function berryTable(e){function t(){return d.render()}function i(t,i){var s=this.files;window.FileReader?(!function(i){var s=new FileReader;s.readAsText(i),s.onload=function(i){var s=i.target.result,n=CSVToArray(s),a=!0;$("#myModal").remove();var o=$(templates.modal.render({title:"Importing CSV ",footer:'<div class="btn btn-danger" data-dismiss="modal">Cancel</div>',body:'<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 0%"><span class="sr-only">50% Complete</span></div></div><div class="status">Validating Items...</div>'}));o.modal(),o.on("hidden.bs.modal",function(){this.importing=!1}.bind(this));var r=n.length-1,l=2*r,d=[];this.importing=!0,n[0]=_.map(n[0],function(t){var i=_.findWhere(e.schema,{label:t});return i=null==i?t:i.name});for(var h=1;h<n.length;h++){if(!this.importing)return!1;if(n[0].length==n[h].length){var c={};for(var f in n[0])c[n[0][f]]=n[h][f];if(a=t.validate(c),!a)break;d.push(a)}else r--;o.find(".progress-bar").width(h/l*100+"%")}if(!a)return o.find(".btn").html("Done"),void o.find(".status").html('<div class="alert alert-danger">Error(s) in row '+h+", failed to validate!<ul><li>"+_.filter(t.errors,function(e){return e.length}).join("</li><li>")+"</li></div>");o.find(".status").html("Adding Items...");for(var h=0;h<d.length;h++){if(!this.importing)return!1;t.add(d[h]),o.find(".progress-bar").width((h+r)/l*100+"%")}o.find(".status").html('<div class="alert alert-success">Successfully processed file, '+r+" rows were added!</div>"),o.find(".btn").toggleClass("btn-danger btn-success").html("Done"),o.find(".progress").hide(),"undefined"!=typeof t.options.defaultSort&&(t.models=_.sortBy(t.models,function(e){return e.attributes[this.options.defaultSort]}.bind(t)).reverse()),"function"==typeof t.options.onBulkLoad&&t.options.onBulkLoad()},s.onerror=function(e){"NotReadableError"==e.target.error.name&&alert("Canno't read file !")}}(s[0]),i.currentTarget.value=""):alert("FileReader is not supported in this browser.")}function s(t){if(this.$el=t,this.options.columns&&this.$el.on("click",".columnEnables label",function(e){e.stopPropagation(),_.findWhere(this.summary.items,{id:e.currentTarget.dataset.field}).isEnabled=e.currentTarget.childNodes[0].checked,this.draw()}.bind(this)),this.$el.on("change",".csvFileInput",_.partial(i,this)),this.$el.on("change",".sortBy",function(e){""!==$(e.currentTarget).val()&&(r.call(this,(_.findWhere(this.options.filterFields,{id:$(e.currentTarget).val()})||{search:!0}).search),this.draw())}.bind(this)),this.$el.on("click",".reverse",function(){r.call(this,this.options.sort),this.draw()}.bind(this)),this.$el.on("click",".filterForm",function(){this.$el.find('[name="search"]').val(""),$().berry({legend:"Filter By",name:"modal_filter"+this.options.id,attributes:this.filterValues,disableMath:!0,suppress:!0,fields:e.filterFields}).on("save",function(){this.filterValues=Berries["modal_filter"+this.options.id].toJSON(),this.draw(),Berries["modal_filter"+this.options.id].trigger("close")},this)}.bind(this)),this.$el.on("click",'[name="bt-upload"]',function(){this.$el.find(".csvFileInput").click()}.bind(this)),this.$el.on("click",'[data-event="delete"]',function(e){$(e.target).closest(".dropdown-menu").toggle();var t=_.findWhere(this.models,{id:e.currentTarget.dataset.id});confirm("Are you sure you want to delete? \nThis operation can not be undone.\n\n"+_.values(t.attributes).join("\n"))&&("function"==typeof this.options.delete&&this.options.delete(t),t.delete(),this.draw(),this.updateCount(_.where(this.models,{checked:!0}).length))}.bind(this)),this.$el.on("click",'[data-event="delete_all"]',function(){var e=_.where(this.models,{checked:!0});e.length&&confirm("Are you sure you want to delete "+e.length+" records? \nThis operation can not be undone.\n\n")&&(_.each(e,function(e){"function"==typeof this.options.delete&&this.options.delete(e),e.delete()}.bind(this)),this.draw(),this.updateCount(_.where(this.models,{checked:!0}).length))}.bind(this)),this.$el.on("click","[data-event].custom-event-all",function(e){e.stopPropagation();var t=_.findWhere(this.options.events,{name:e.target.dataset.event});"undefined"!=typeof t&&"function"==typeof t.callback&&(t.multiEdit&&_.where(this.models,{checked:!0}).length>1?_.each(_.where(this.models,{checked:!0}),function(e){t.callback(e)}):t.callback(_.where(this.models,{checked:!0})[0]),"function"==typeof t.complete&&t.complete(_.where(this.models,{checked:!0}),this))}.bind(this)),this.$el.on("click","[data-event].custom-event-collection",function(e){e.stopPropagation();var t=_.findWhere(this.options.events,{name:e.target.dataset.event});"undefined"!=typeof t&&"function"==typeof t.callback&&t.callback.call(this,this.models)}.bind(this)),this.$el.on("click",'[data-event="edit_all"]',function(e){e.stopPropagation(),"undefined"!=typeof this.options.multiEdit&&0!==this.options.multiEdit.length&&_.where(this.models,{checked:!0}).length>1?this.editCommon():$().berry($.extend(!0,{},{name:"modal",legend:'<i class="fa fa-pencil-square-o"></i> Edit',model:_.where(this.models,{checked:!0})[0]},this.options.berry||{})).on("saved",function(){"function"==typeof this.options.edit&&this.options.edit(_.where(this.models,{checked:!0})[0]),"function"==typeof this.options.editComplete&&this.options.editComplete(_.where(this.models,{checked:!0}),this),this.draw()},this)}.bind(this)),this.$el.on("change",'[name="count"]',function(t){e.count=parseInt($(t.currentTarget).val(),10),this.draw()}.bind(this)),this.$el.on("input",'[name="search"]',_.debounce(function(){this.draw()}.bind(this),300)),t.find(".filter").length&&(this.filter=t.find(".filter").berry({name:"filter"+this.options.id,renderer:"inline",disableMath:!0,suppress:!0,fields:e.filterFields}).on("change",function(){this.$el.find('[name="search"]').val(""),this.filterValues=this.filter.toJSON(),this.draw()},this),h.call(this.filter,this.defaults)),this.updateCount=function(e){this.summary.checked_count=e,this.summary.multi_checked=e>1;var t=this.$el.find('[data-event="select_all"].fa');e>0&&e==this.models.length?t.attr("class","fa fa-2x fa-check-square-o"):0==e?t.attr("class","fa fa-2x fa-square-o"):t.attr("class","fa fa-2x fa-minus-square-o")},this.$el.on("click",'[data-event="select_all"]',function(){var e=_.where(this.models,{checked:!0});e.length||0==this.models.length?_.each(e,function(e){e.toggle(!1)}):_.each(this.filtered,function(e){e.toggle(!0)}),e=_.where(this.models,{checked:!0}),this.updateCount(e.length)}.bind(this)),e.data)for(var s in e.data)this.models.push(new tableModel(this,e.data[s]).on("check",function(){this.owner.updateCount(_.where(this.owner.models,{checked:!0}).length),this.owner.$el.find('[name="events"]').html(templates.events.render(this.owner.summary,templates))}));"undefined"!=typeof this.options.defaultSort&&(this.models=_.sortBy(this.models,function(e){return e.attributes[this.options.defaultSort]}.bind(this)).reverse()),this.$el.on("click","[data-page]",o.bind(this)),e.sort&&this.$el.on("click","[data-sort]",function(e){e.stopPropagation(),e.preventDefault();var t=_.findWhere(this.options.filterFields,{name:$(e.currentTarget).data("sort")}).search;this.options.reverse&&this.options.sort==t?r.call(this,!0):r.call(this,t),this.draw()}.bind(this)),this.$el.on("click",'[name="reset-search"]',function(){this.$el.find('[name="search"]').val(""),r.call(this,!0),this.filter&&h.call(this.filter,this.defaults),this.filterValues={},this.draw()}.bind(this)),this.$el.on("click",'[name="bt-download"]',function(){this.getCSV()}.bind(this)),this.$el.find('[data-event="add"]').on("click",function(){var t=_.findWhere(this.options.events,{name:"add"});"undefined"!=typeof t&&"function"==typeof t.callback?t.callback.call(this):$().berry($.extend(!0,{},{name:"modal",legend:'<i class="fa fa-pencil-square-o"></i> Create New',fields:e.schema},e.berry||{})).on("save",function(){if(Berries.modal.validate()){var e=new tableModel(this,Berries.modal.toJSON()).on("check",function(){this.updateCount(_.where(this.models,{checked:!0}).length),this.$el.find('[name="events"]').html(templates.events.render(this.summary,templates))}.bind(this));this.models.push(e),"undefined"!=typeof this.options.defaultSort&&(this.models=_.sortBy(this.models,function(e){return e.attributes[this.options.defaultSort]}.bind(this)).reverse()),this.draw(),this.updateCount(this.summary.checked_count),"function"==typeof this.options.add&&this.options.add(e),"undefined"!=typeof Berries.modal&&Berries.modal.trigger("cancel")}},this)}.bind(this)),this.draw()}this.version="0.1.0",e=$.extend(!0,{filter:!0,sort:!0,search:!0,download:!0,upload:!0,columns:!0,id:Berry.getUID()},e),e.events=_.map(e.events,function(e){return $.extend(!0,{global:!1},e)});var n=!1;if(window.localStorage&&e.name)try{n=JSON.parse(localStorage.getItem("bt_"+e.name))}catch(a){}e.item_template=e.item_template?Hogan.compile(e.item_template):window.outerWidth>767||0==window.outerWidth?templates.table_row:templates.mobile_row,this.filterValues={},this.draw=function(){_.each(this.summary.items,function(e){this.$el.find(".filter #"+e.id+",[data-sort="+e.id+"]").toggle(e.isEnabled)}.bind(this)),e.search=this.filterValues,_.each(e.search,function(t,i){t||0===t||delete e.search[i]});var t=e.pagebuffer||2;this.$el.find('[name="search"]').length&&this.$el.find('[name="search"]').val().length?this.searchAll(this.$el.find('[name="search"]').val()):this.search(e);var i={};e.pagecount=Math.ceil(this.lastGrabbed/e.count),i.pages=[],e.page>e.pagecount&&(e.page=e.pagecount||1);var s=this.lastGrabbed>e.count*e.page?e.count*e.page:this.lastGrabbed,n=$('<tbody class="list-group">'),a=Hogan.compile(e.item_template.render(l,templates));_.each(this.grab(e),function(e){new viewitem({model:e,container:n,view:a})});var o=(this.$el.find(".list-group").empty().replaceWith(n),e.page-t);1>o&&(o=1);var r=e.page+t;r>e.pagecount&&(r=e.pagecount);for(var d=o;r>=d;d++){var h={name:d};e.page==d&&(h.active="active"),i.pages.push(h)}i.size=this.lastGrabbed,i.last=s,i.first=e.count*(e.page-1)+1,i.multiPage=r>o,i.isFirst=1==e.page,i.isLast=e.page==e.pagecount,i.showLast=e.pagecount==r,i.showFirst=1==o,i.checked_count=_.where(this.models,{checked:!0}).length,i.entries=_.map(e.entries,function(t){return{value:t,selected:t==e.count}},e),this.renderObj=i,this.$el.find(".paginate-footer").html(templates.table_footer.render(this.renderObj,templates)),this.summary.checked_count=_.where(this.models,{checked:!0}).length,this.summary.multi_checked=this.summary.checked_count>1,this.$el.find('[name="events"]').html(templates.events.render(this.summary,templates)),this.fixStyle(),window.localStorage&&e.name&&localStorage.setItem("bt_"+e.name,JSON.stringify(this.state.get()))},this.drawHead=function(){};var o=function(t){t.stopPropagation(),t.preventDefault(),"inc"==$(t.currentTarget).data("page")?(e.page++,e.page>e.pagecount&&(e.page=e.pagecount)):"dec"==$(t.currentTarget).data("page")?(e.page--,e.page<1&&(e.page=1)):e.page=$(t.currentTarget).data("page")||e.pagecount,this.draw()},r=function(t,i){if(1==t)this.$el.find(".reverse, [data-sort]").removeClass("text-primary").find("i").attr("class","fa fa-sort text-muted"),this.$el.find(".sortBy").val("true"),e.reverse=!1;else{e.reverse="undefined"==typeof i?e.sort==t?!e.reverse:!1:i;var s=this.$el.find(".reverse, [data-sort="+_.findWhere(this.options.filterFields,{search:t}).id+"]");"undefined"!=typeof s&&(e.reverse?s.find("i").attr("class","fa fa-sort-asc"):s.find("i").attr("class","fa fa-sort-desc"),s.siblings("[data-sort]").removeClass("text-primary"),s.siblings("[data-sort]").find("i").attr("class","fa fa-sort text-muted"),s.addClass("text-primary"))}e.sort=t},e=$.extend({count:e.count||25,page:1,sort:"createdAt",reverse:!1},e);self=this,e.schema=_.map(e.schema,function(e){return Berry.processOpts(e,{update:function(e){this.item.choices=e.choices,this.item.options=e.choices;var t=this.self.options.schema;_.each(this.self.models,function(e){e.schema=t,e.pat()}),this.self.draw()}.bind({item:e,self:self})})}),"undefined"!=typeof e.filters&&(e.filters=_.map(e.filters,Berry.processOpts)),e.filterFields=_.map($.extend(!0,{},e.filters||e.schema),function(e){switch(e=Berry.normalizeItem(e),name=e.name,e.value="",e.type){case"checkbox":e.choices=[{label:"False",value:"false"},{label:e.truestate||"True",value:e.truestate||"true"}],"undefined"!=typeof e.falsestate&&(e.choices[0].label=e.falsestate,e.choices[0].value=e.falsestate);case"radio":e.type="select";case"select":e.default={},e.default[e.label_key||"label"]="No Filter",e.default[e.value_key||"value"]="","index"==e.value_key&&delete e.value_key;break;case"hidden":break;default:e.type="text"}return e.options&&(e.options=_.map(e.options,function(e){return _.omit(e,"selected")})),e.id=e.id||Berry.getUID(),e.search=e.name,e.name=e.id,e.show={},e.enabled=!0,e.help="",e}),"object"==typeof e.columns&&(e.filterFields=_.filter(e.filterFields,function(t){return _.contains(e.columns,t.name)||_.contains(e.columns,t.id)}));var l={start:"{{",end:"}}",checked_count:0,multi_checked:!1,multiEdit:!!e.multiEdit,items:_.map(e.filterFields,function(t){var i=t.search||t.label.split(" ").join("_").toLowerCase();if(t.template)i=t.template.replace(/{{value}}/gi,"{{attributes."+i+"}}");else switch(t.type){case"date":i='<span data-moment="{{attributes.'+i+'}}" data-format="L"></span>';break;case"select":i=e.inlineEdit?'<span data-popins="'+i+'"></span>':"{{display."+i+"}}";break;case"color":i='<div class="btn btn-default" style="background-color:{{attributes.'+i+'}}">{{attributes.'+i+"}}</div> {{attributes."+i+"}}";break;default:i=e.inlineEdit?'<span data-popins="'+i+'"></span>':"{{attributes."+i+"}}"}return{isEnabled:"undefined"==typeof t.showColumn||t.showColumn,label:t.label,name:i,cname:t.name||t.label.split(" ").join("_").toLowerCase(),id:t.id,visible:!("hidden"==t.type)}})};e.hasActions=!!(e.edit||e.delete||e.events),"undefined"==typeof e.hasEdit&&(e.hasEdit=!!e.edit),"undefined"==typeof e.hasDelete&&(e.hasDelete=!!e.delete),e.entries=e.entries||[25,50,100],l.options=e,l.showAdd=!!e.add||e.showAdd,this.defaults={},_.map(e.filterFields,function(e){switch(e.type){case"text":e.value="";break;case"checkbox":e.value="false";case"radio":e.value="";case"select":e.value=""}this.defaults[e.name]=e.value}.bind(this)),this.summary=l;var d;d=Hogan.compile(e.template?Hogan.compile(e.template).render(l,templates):window.outerWidth>767||0==window.outerWidth?templates.table.render(l,templates):templates.mobile_table.render(l,templates));var h=function(e){this.each(function(e){this.isContainer||this.setValue(Berry.search(e,this.getPath()))},[e],this.fields)};this.validate=function(t){var i=!1,s=this.$el.find(".hiddenForm").berry({fields:e.schema,attributes:t});return s.validate()?i=s.toJSON():(this.errors=s.errors,console.log("Model not valid")),s.destroy(),i},this.add=function(t){var i=new tableModel(this,t).on("check",function(){this.owner.updateCount(_.where(this.owner.models,{checked:!0}).length),this.owner.$el.find('[name="events"]').html(templates.events.render(this.owner.summary,templates))}),s=this.$el.find(".hiddenForm").berry({fields:e.schema,model:i});return s.validate()?(this.models.push(i),this.draw(),this.updateCount(this.summary.checked_count),"function"==typeof this.options.add&&this.options.add(i)):console.log("Model not valid"),s.destroy(),i},this.search=function(e){var t=_.sortBy(this.models,function(t){return t.attributes[e.sort]});e.reverse||(t=t.reverse()),filterMap=this.filterMap,t=_.filter(t,function(t){var i=$.isEmptyObject(e.search);for(var s in e.search){var n;if(n=_.where(e.filterFields,{id:s})[0]&&"undefined"==typeof _.where(e.filterFields,{id:s})[0].options?$.score((t.display[this.filterMap[s]]+"").replace(/\s+/g," ").toLowerCase(),(e.search[s]+"").toLowerCase())>.4:t.display[this.filterMap[s]]+""==e.search[s]+""||t.attributes[this.filterMap[s]]+""==e.search[s]+"",i=n,!i)break}return i}),this.lastGrabbed=t.length,this.filtered=t},this.find=function(e){var t=_.keys(e);return _.filter(this.models,function(i){return _.isEqual(e,_.pick(i.attributes,t))})},this.searchAll=function(t){e.sort=null,this.$el.find("[data-sort]").removeClass("text-primary"),this.$el.find("[data-sort]").find("i").attr("class","fa fa-sort text-muted"),this.filter&&h.call(this.filter,this.defaults),t=t.toLowerCase(),_.map(this.models,function(i){i.score=0;for(var s in e.filterFields)i.score+=$.score((i.display[e.filterFields[s].search]+"").replace(/\s+/g," ").toLowerCase(),t)}),this.filtered=_.filter(_.sortBy(this.models,"score"),function(e){return e.score>0}).reverse(),this.lastGrabbed=this.filtered.length},this.fixStyle=function(){if(this.options.autoSize)try{var e=this.$el.find(".table-container > div"),t=this.$el.find(".table-container > table tr th:visible"),i=this.$el.find(".list-group-row th");this.$el.find(".table-container table").removeClass("table-fixed"),e.css("width","auto"),e.css("minWidth","auto"),t.css("width","auto"),t.css("minWidth","85px"),this.$el.find(".table-container > table tr th.select-column").css("minWidth","60px"),this.$el.find(".table-container > table tr th.select-column").css("width","60px"),i.css("width","auto"),i.css("minWidth","auto"),e.css("height",$(window).height()-e.offset().top-(88+this.options.autoSize)+"px"),_.each(i,function(e,i){"undefined"!=typeof t[i]?(e.style.display="table-cell",t[i].offsetWidth>e.offsetWidth?($(e).css("width",t[i].offsetWidth+"px"),$(e).css("minWidth",t[i].offsetWidth+"px"),$(t[i]).css("width",t[i].offsetWidth+"px"),$(t[i]).css("minWidth",t[i].offsetWidth+"px")):($(t[i]).css("width",t[i].offsetWidth+"px"),$(t[i]).css("minWidth",t[i].offsetWidth+"px"),$(e).css("width",t[i].offsetWidth+"px"),$(e).css("minWidth",t[i].offsetWidth+"px"))):e.style.display="none"}.bind(this)),this.$el.find(".table-container table").addClass("table-fixed");var s=this.$el.find(".table-container > div table")[0].offsetWidth;this.$el.find(".table-container > table")[0].offsetWidth>s&&(s=this.$el.find(".table-container > table")[0].offsetWidth),e.css("width",s+"px"),e.css("minWidth",s+"px"),s>this.$el.find(".table-container")[0].offsetWidth?this.$el.find(".table-container").css("overflow","auto"):this.$el.find(".table-container").css("overflow","hidden")}catch(n){}},this.grab=function(e){return this.filtered.slice(e.count*(e.page-1),e.count*(e.page-1)+e.count)},this.editCommon=function(){if("undefined"!=typeof this.options.multiEdit&&0!=this.options.multiEdit.length){var e=_.where(this.models,{checked:!0});if(0!=e.length){var t=_.map(e,function(e){return e.attributes}),i=_.filter(this.options.multiEdit,function(e){return 1==_.unique(_.pluck(t,e)).length});if(0==i.length)$(templates.modal.render({title:"Common Field Editor ",footer:'<div class="btn btn-danger" data-dismiss="modal">Done</div>',body:'<div class="alert alert-warning">No eligible fields have been found for editing.</div>'})).modal();else{var s=_.filter(this.options.schema,function(e){return i.indexOf(e.name)>=0});$().berry({legend:"("+e.length+") Common Field Editor",fields:s,attributes:$.extend(!0,{},_.pick(e[0].attributes,i))}).on("save",function(){var t=this.toJSON();_.map(e,function(e){e.set($.extend(!0,{},e.attributes,t))}),this.trigger("close")}).on("close",function(){this.draw(),"function"==typeof this.options.editComplete&&this.options.editComplete(_.where(this.models,{checked:!0}),this)},this)}}}},this.destroy=function(){this.$el.find(".list-group").empty(),this.$el.off(),this.$el.empty()},this.state={get:function(){var t={count:this.options.count,page:this.options.page};return this.$el.find('[name="search"]').length&&this.$el.find('[name="search"]').val().length?t.search=this.$el.find('[name="search"]').val():(t.sort=e.sort,t.reverse=e.reverse,"undefined"!=typeof this.filter&&(t.filters={},_.each(this.options.filterFields,function(e){t.filters[e.search]=this[e.id]}.bind(this.filter.toJSON())))),t.columns=_.map(_.pluck(_.filter(this.summary.items,function(e){return e.isEnabled}),"id"),function(e){return _.findWhere(this.options.filterFields,{id:e}).search}.bind(this)),t}.bind(this),set:function(t){"undefined"!=typeof t.columns&&t.columns.length&&(this.summary.items=_.map(this.summary.items,function(e){return e.isEnabled=_.contains(t.columns,this.filterMap[e.cname]),e}),this.$el.find('.columnEnables [type="checkbox"]').each(function(){this.checked=!1}),e.columns&&_.each(t.columns,function(e){var t=this.$el.find('.columnEnables [data-field="'+_.findWhere(this.options.filterFields,{search:e}).id+'"] [type="checkbox"]');t.length&&(t[0].checked=!0)}.bind(this))),"undefined"!=typeof t.filters&&(this.filterValues={},_.each(t.filters,function(e,t){this.filterValues[_.findWhere(this.options.filterFields,{search:t}).id]=e}.bind(this))),"undefined"!=typeof t.sort&&r.call(this,t.sort||e.sort,t.reverse),"undefined"!=typeof this.filter&&h.call(this.filter,this.filterValues),"undefined"!=typeof t.search&&""!==t.search&&this.$el.find('[name="search"]').val(t.search),this.options.page=t.page||this.options.page,this.options.count=t.count||this.options.count,this.draw()}.bind(this)},this.models=[],this.options=e,this.filterMap={},_.map(e.filterFields,function(e){this.filterMap[e.id]=e.search}.bind(this));$(e.container).html(t.call(this)),s.call(this,$(e.container)),this.getCSV=function(e){var t=this.filterMap;csvify(_.map(this.filtered,function(e){return e.attributes}),_.map(_.filter(this.summary.items,function(e){return e.isEnabled}),function(e){return{label:e.label,name:t[e.cname]}}),e||this.options.title)},this.$el.find('[name="search"]').focus(),this.$el.find(".table-container > div").css("overflow","auto"),$(window).on("resize orientationChange",this.fixStyle.bind(this)),n&&this.state.set(n)} function CSVToArray(e,n){n=n||",";for(var t=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),r=[[]],l=null;l=t.exec(e);){var i=l[1];i.length&&i!==n&&r.push([]);var a;a=l[2]?l[2].replace(new RegExp('""',"g"),'"'):l[3],r[r.length-1].push(a)}return r}!function(e){e.score=function(n,t,r){if(r=r||0,0===t.length)return.9;if(t.length>n.length)return 0;for(var l=t.length;l>0;l--){var i=t.substring(0,l),a=n.indexOf(i);if(!(0>a||a+t.length>n.length+r)){var u=n.substring(a+i.length),s=null;s=l>=t.length?"":t.substring(l);var c=e.score(u,s,r+a);if(c>0){var o=n.length-u.length;if(0!==a){var h=n.charCodeAt(a-1);if(32==h||9==h)for(var g=a-2;g>=0;g--)h=n.charCodeAt(g),o-=32==h||9==h?1:.15;else o-=a}return o+=c*u.length,o/=n.length}}}return 0}}(jQuery),csvify=function(e,n,t){var r='"'+_.pluck(n,"label").join('","')+'"\n';this.labels=_.pluck(n,"name");var l=_.zipObject(this.labels,_.map(this.labels,function(){return""}));r+=_.map(e,function(e){return JSON.stringify(_.values(_.extend(l,_.pick(e,this.labels))))},this).join("\n").replace(/(^\[)|(\]$)/gm,"").split('"').join("");var i=document.createElement("a");i.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(r)),i.setAttribute("download",(t||"berryTable")+".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}; function tableModel(t,e){this.owner=t,this.id=Berry.getUID(),this.attributes={},this.display={},this.attribute_history=[],this.schema=t.options.schema;var i=function(){_.each(this.schema,function(t){if("undefined"!=typeof t.options){var e;if("undefined"!=typeof t.value_key)if("index"==t.value_key)e=t.options[this.attributes[t.name]];else{var i={};i[t.value_key]=this.attributes[t.name],e=_.findWhere(t.options,i),$.isNumeric(this.attributes[t.name])&&(i[t.value_key]=parseInt(this.attributes[t.name]),"undefined"==typeof e&&(e=_.findWhere(t.options,i)),"undefined"==typeof e&&(e=_.findWhere(t.options,i)))}else e=_.findWhere(t.options,{value:this.attributes[t.name]}),"undefined"==typeof e&&(e=_.findWhere(t.options,{id:this.attributes[t.name]})),$.isNumeric(this.attributes[t.name])&&("undefined"==typeof e&&(e=_.findWhere(t.options,{value:parseInt(this.attributes[t.name],10)})),"undefined"==typeof e&&(e=_.findWhere(t.options,{id:parseInt(this.attributes[t.name],10)})));this.display[t.name]="object"==typeof e?e[t.label_key]||e.label||e.name:this.attributes[t.name]}else this.display[t.name]=t.template?Hogan.compile(t.template).render(this):this.attributes[t.name]}.bind(this))};this.set=function(t){this.attribute_history.push($.extend(!0,{},this.attributes)),this.attributes=t,i.call(this)},this.pat=function(){i.call(this)},this.checked=!1,this.toggle=function(){this.checked="bool"==typeof state?state:!this.checked,this.trigger("check")},$.extend(!0,this.attributes,e),i.call(this),this.toJSON=function(){return this.attributes},this.undo=function(){this.attribute_history.length&&(this.attributes=this.attribute_history.pop(),i.call(this),this.owner.draw())},this.delete=function(){this.owner.models.splice(_.indexOf(_.pluck(this.owner.models,"id"),this.id),1)},this.events={initialize:[]},this.addSub=Berry.prototype.addSub,this.on=Berry.prototype.on,this.off=Berry.prototype.off,this.trigger=Berry.prototype.trigger} function viewitem(t){this.update=function(){"undefined"!=typeof this.berry&&this.berry.destroy(),this.$el.find("[data-event]").off(),this.$el.off(),"undefined"!=typeof this.model.owner.options.preDraw&&this.model.owner.options.preDraw(this.model),this.$el.replaceWith(this.setElement(t.view.render(this.model,templates)).$el),this.$el.find("[data-popins]").length>0&&(this.berry=this.$el.berry({popins:{container:"#first",viewport:{selector:"body",padding:20}},renderer:"popins",model:this.model})),"function"==typeof this.model.owner.options.click&&this.$el.on("click",function(t){"undefined"==typeof t.target.dataset.event&&this.model.owner.options.click(this.model,this)}.bind(this)),this.$el.find("[data-event].custom-event").on("click",$.proxy(function(t){t.stopPropagation(),$(t.target).closest(".dropdown-menu").toggle();var e=_.findWhere(this.model.owner.options.events,{name:t.target.dataset.event});"undefined"!=typeof e&&"function"==typeof e.callback&&e.callback(this.model)},this)),this.$el.find(".btn-group > .dropdown-toggle").on("click",function(t){t.stopPropagation(),$(this).next(".dropdown-menu").toggle()}),this.$el.find('[data-event="edit"]').on("click",$.proxy(function(t){t.stopPropagation(),$(t.target).closest(".dropdown-menu").toggle(),this.edit()},this)),this.edit=function(){$().berry($.extend(!0,{},{name:"modal",legend:'<i class="fa fa-pencil-square-o"></i> Edit',model:this.model},this.model.owner.options.berry||{})).on("saved",function(){"function"==typeof this.model.owner.options.edit&&this.model.owner.options.edit(this.model),this.update()},this)},this.$el.find('[data-event="mark"]').on("click",$.proxy(function(t){t.stopPropagation(),this.model.toggle(t.currentTarget.checked)},this)),this.$el.find("[data-moment]").each(function(){$(this).html(moment.utc($(this).data("moment")).format($(this).data("format")))}),this.$el.find(".sparkline").each(function(){$(this).peity($(this).data("type"),{radius:$(this).data("radius")})})},this.setElement=function(t){return this.$el=$(t),this},this.model=t.model,this.model.on("check",this.update.bind(this)),this.$el=$("<tr>"),t.container&&t.container.append(this.$el),this.model.on("change",this.update,this),this.model.on("destroy",$.proxy(function(){this.$el.fadeOut("fast",$.proxy(function(){this.remove()},this))},this)),this.update()} if(!templates)var templates={};templates.events=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b("<div>"),a.b("\n"+e),a.b('	<span class="hidden-xs">'),a.b("\n"+e),a.s(a.d("options.hasDelete",t,n,1),t,n,0,55,245,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<a href="javascript:void(0);" data-event="delete_all" class="btn btn-danger '),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.b('" style="margin-right:15px"><i class="fa fa-times"></i> Delete</a>'),a.b("\n"+e)}),t.pop()),a.b('	<div class="btn-group"role="group" aria-label="...">'),a.b("\n"),a.b("\n"+e),a.b("	    "),a.s(a.d("options.hasEdit",t,n,1),t,n,0,348,607,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<a href="javascript:void(0);" data-event="edit_all" class="btn btn-primary '),e.s(e.f("checked_count",t,n,1),t,n,1,0,0,"")||e.b("disabled"),e.s(e.f("multiEdit",t,n,1),t,n,1,0,0,"")||e.s(e.f("multi_checked",t,n,1),t,n,0,499,507,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),e.b('" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-pencil"></i> Edit</a>')}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.events",t,n,1),t,n,0,653,942,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("	    	"),a.s(a.f("global",t,n,1),t,n,1,0,0,"")||(a.b('<a href="javascript:void(0);" data-event="'),a.b(a.v(a.f("name",t,n,0))),a.b('" class="custom-event-all btn btn-default '),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.s(a.f("multiEdit",t,n,1),t,n,1,0,0,"")||a.s(a.f("multi_checked",t,n,1),t,n,0,839,847,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),a.b('" data-id="'),a.b(a.v(a.f("start",t,n,0))),a.b("id"),a.b(a.v(a.f("end",t,n,0))),a.b('">'),a.b(a.t(a.f("label",t,n,0))),a.b("</a>")),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b("	</span>"),a.b("\n"+e),a.b('	<div class="btn-group visible-xs">'),a.b("\n"+e),a.b('		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'),a.b("\n"+e),a.b('			<i class="fa fa-cogs"></i> <span class="caret"></span>'),a.b("\n"+e),a.b("		</button>"),a.b("\n"+e),a.b('		<ul class="dropdown-menu">'),a.b("\n"+e),a.b("				"),a.s(a.d("options.hasEdit",t,n,1),t,n,0,1270,1525,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<li  class=" '),e.s(e.f("checked_count",t,n,1),t,n,1,0,0,"")||e.b("disabled"),e.s(e.f("multiEdit",t,n,1),t,n,1,0,0,"")||e.s(e.f("multi_checked",t,n,1),t,n,0,1359,1367,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),e.b('"><a href="javascript:void(0);" data-event="edit_all" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-pencil"></i> Edit</a></li> ')}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.events",t,n,1),t,n,0,1570,1858,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("					"),a.s(a.f("global",t,n,1),t,n,1,0,0,"")||(a.b('<li class="'),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.s(a.f("multiEdit",t,n,1),t,n,1,0,0,"")||a.s(a.f("multi_checked",t,n,1),t,n,0,1674,1682,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),a.b('"><a href="javascript:void(0);" data-event="'),a.b(a.v(a.f("name",t,n,0))),a.b('" class="custom-event-all" data-id="'),a.b(a.v(a.f("start",t,n,0))),a.b("id"),a.b(a.v(a.f("end",t,n,0))),a.b('">'),a.b(a.t(a.f("label",t,n,0))),a.b("</a></li>")),a.b("\n"+e)}),t.pop()),a.s(a.d("options.hasDelete",t,n,1),t,n,0,1904,2144,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('					<li role="separator" class="divider"></li>'),a.b("\n"+e),a.b('					<li class=" '),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.b('"><a href="javascript:void(0);" data-event="delete_all" style="margin-right:15px"><i class="fa fa-times"></i> Delete</a></li>'),a.b("\n"+e)}),t.pop()),a.b("		</ul>"),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b("	"),a.s(a.f("checked_count",t,n,1),t,n,0,2202,2315,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<h5 class="range label label-info checked_count" style="margin:7px 15px;">'),e.b(e.v(e.f("checked_count",t,n,0))),e.b(" item(s) selected</h5>")}),t.pop()),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{},subs:{}}),templates.mobile_head=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<div style="clear:both;">'),a.b("\n"),a.b("\n"+e),a.s(a.d("options.sort",t,n,1),t,n,0,46,1261,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("\n"+e),a.b('  <div class="row" style="margin-bottom:10px">'),a.b("\n"),a.b("\n"+e),a.b('    <div class="col-xs-6">'),a.b("\n"+e),a.s(a.d("options.filter",t,n,1),t,n,0,146,494,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("\n"+e),a.b('      <div name="reset-search" style="position:relative" class="btn btn-default" data-toggle="tooltip" data-placement="left" title="Clear Filters">'),a.b("\n"+e),a.b('        <i class="fa fa-filter"></i>'),a.b("\n"+e),a.b('        <i class="fa fa-times text-danger" style="position: absolute;right: 5px;"></i>'),a.b("\n"+e),a.b("      </div>    "),a.b("\n"),a.b("\n"+e),a.b('    <div class="btn btn-info filterForm">Filter</div>'),a.b("\n"+e)}),t.pop()),a.b("    </div>"),a.b("\n"+e),a.b('    <div class="col-xs-6">'),a.b("\n"+e),a.b("    		"),a.s(a.d("options.search",t,n,1),t,n,0,577,661,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<input type="text" name="search" class="form-control" style="" placeholder="Search">')}),t.pop()),a.b("\n"+e),a.b("        </div>"),a.b("\n"+e),a.b("    </div>"),a.b("\n"+e),a.b('    <div class="input-group">'),a.b("\n"+e),a.b('      <span class="" style="display: table-cell;width: 1%;white-space: nowrap;vertical-align: middle;padding-right:5px">'),a.b("\n"+e),a.b('        <button class="btn btn-default reverse" type="button" tabindex="-1"><i class="fa fa-sort text-muted"></i></button>'),a.b("\n"+e),a.b("      </span>"),a.b("\n"+e),a.b('        <select class="form-control sortBy">'),a.b("\n"+e),a.b("          <option value=true>None</option>"),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,1103,1220,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,1128,1197,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('              <option value="'),a.b(a.v(a.f("id",t,n,0))),a.b('">'),a.b(a.v(a.f("label",t,n,0))),a.b("</option>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("        <select>"),a.b("\n"+e),a.b("    </div>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{},subs:{}}),templates.mobile_row=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<tr><td colspan="100%" class="filterable">		'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,70,497,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<div data-event="mark" style="text-align:left;padding:0;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">'),a.b("\n"+e),a.b('	<span class="text-muted fa '),a.b(a.v(a.f("start",t,n,0))),a.b("#checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-check-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b(" "),a.b(a.v(a.f("start",t,n,0))),a.b("^checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b('" style="margin:6px; cursor:pointer;font-size:24px"></span>'),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e)}),t.pop()),a.b(" <div>"),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,540,740,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b(" 	"),a.s(a.f("visible",t,n,1),t,n,0,555,725,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.s(e.f("isEnabled",t,n,1),t,n,0,569,711,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b('<div class="row" style="min-width:85px"><span class="col-sm-3"><b>'),e.b(e.v(e.f("label",t,n,0))),e.b('</b></span><span class="col-sm-9 col-xs-12">'),e.b(e.t(e.f("name",t,n,0))),e.b("</span></div>")}),t.pop())}),t.pop()),a.b("\n"+e)}),t.pop()),a.b(" 	</div>"),a.b("\n"+e),a.b("</td></tr>"),a.fl()},partials:{},subs:{}}),templates.mobile_table=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<div class="well table-well">'),a.b("\n"+e),a.b('	<div style="height:40px;">'),a.b("\n"+e),a.b('    <div name="events" class=" pull-left" style="margin-bottom:10px;width:62%" ></div>'),a.b("\n"),a.b("\n"+e),a.b('		<input type="file" class="csvFileInput" accept=".csv" style="display:none">'),a.b("\n"),a.b("\n"+e),a.b('		<div class="hiddenForm" style="display:none"></div>'),a.b("\n"+e),a.b('		<div class="btn-group pull-right" style="margin-bottom:10px" role="group" aria-label="...">'),a.b("\n"+e),a.s(a.f("showAdd",t,n,1),t,n,0,388,489,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div data-event="add" class="btn btn-success"><i class="fa fa-pencil-square-o"></i> New</div>'),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.s(a.d("options.events",t,n,1),t,n,0,526,678,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("				"),a.s(a.f("global",t,n,1),t,n,0,542,663,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<div class="btn btn-default custom-event-collection" data-event="'),e.b(e.v(e.f("name",t,n,0))),e.b('" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('">'),e.b(e.t(e.f("label",t,n,0))),e.b("</div>")}),t.pop()),a.b("\n"+e)}),t.pop()),a.s(a.d("options.download",t,n,1),t,n,0,722,885,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-download" data-toggle="tooltip" data-placement="left" title="Download"><i class="fa fa-download"></i></div>'),a.b("\n"+e)}),t.pop()),a.s(a.d("options.upload",t,n,1),t,n,0,929,1086,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-upload" data-toggle="tooltip" data-placement="left" title="Upload"><i class="fa fa-upload"></i></div>'),a.b("\n"+e)}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.columns",t,n,1),t,n,0,1131,1892,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn-group columnEnables" data-toggle="tooltip" data-placement="left" title="Display Columns">'),a.b("\n"+e),a.b('			  <button class="btn btn-default dropdown-toggle" type="button" id="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">'),a.b("\n"+e),a.b('			    <i class="fa fa-list"></i>'),a.b("\n"+e),a.b('			    <span class="caret"></span>'),a.b("\n"+e),a.b("			  </button>"),a.b("\n"+e),a.b('			  <ul class="dropdown-menu pull-right" style="padding-top:10px" aria-labelledby="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('">'),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,1611,1857,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,1630,1837,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			    <li><label data-field="'),a.b(a.v(a.f("id",t,n,0))),a.b('" style="width:100%;font-weight:normal"><input type="checkbox" '),a.s(a.f("isEnabled",t,n,1),t,n,0,1744,1761,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('checked="checked"')}),t.pop()),a.b(' style="margin: 5px 0 5px 15px;"> '),a.b(a.v(a.f("label",t,n,0))),a.b("</label></li>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("			  </ul>"),a.b("\n"+e),a.b("			</div>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("		</div>"),a.b("\n"),a.b("\n"),a.b("\n"+e),a.b("	</div>	"),a.b("\n"+e),a.b(a.rp("<mobile_head0",t,n,"			")),a.b("\n"),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,1979,2086,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('  <div style="padding: 16px 0 0 15px;"><i data-event="select_all" class="fa fa-2x fa-square-o"></i></div>'),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b('	<div class="table-container" style="width:100%;overflow:auto">'),a.b("\n"),a.b("\n"+e),a.b('	<div style="min-height:100px">'),a.b("\n"+e),a.b('		<table class="table '),a.s(a.d("options.noborder",t,n,1),t,n,1,0,0,"")||a.b("table-bordered"),a.b(' table-striped table-hover dataTable" style="margin-bottom:0px">'),a.b("\n"+e),a.b('			<tbody class="list-group">'),a.b("\n"+e),a.b("				<tr><td>"),a.b("\n"+e),a.b('					<div class="alert alert-info" role="alert">You have no items.</div>'),a.b("\n"+e),a.b("				</td></tr>"),a.b("\n"+e),a.b("			</tbody>"),a.b("\n"),a.b("\n"+e),a.b("		</table>"),a.b("\n"+e),a.b("	</div>"),a.b("\n"),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b('	<div class="paginate-footer" style="overflow:hidden;margin-top:10px"></div>'),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{"<mobile_head0":{name:"mobile_head",partials:{},subs:{}}},subs:{}}),templates.table=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<div class="well table-well">'),a.b("\n"+e),a.b('	<div style="height:40px">'),a.b("\n"+e),a.b('		<div name="events" class=" pull-left" style="margin-bottom:10px;width:62%" ></div>'),a.b("\n"),a.b("\n"+e),a.b('		<input type="file" class="csvFileInput" accept=".csv" style="display:none">'),a.b("\n"),a.b("\n"+e),a.b('		<div class="hiddenForm" style="display:none"></div>'),a.b("\n"+e),a.b('		<div class="btn-group pull-right" style="margin-bottom:10px;margin-left:10px" role="group" aria-label="...">'),a.b("\n"+e),a.s(a.f("showAdd",t,n,1),t,n,0,402,503,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div data-event="add" class="btn btn-success"><i class="fa fa-pencil-square-o"></i> New</div>'),a.b("\n"+e)}),t.pop()),a.s(a.d("options.events",t,n,1),t,n,0,540,703,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("				"),a.s(a.f("global",t,n,1),t,n,0,556,688,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<div class="btn btn-default custom-event-collection '),e.b(e.v(e.f("global",t,n,0))),e.b('" data-event="'),e.b(e.v(e.f("name",t,n,0))),e.b('" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('">'),e.b(e.t(e.f("label",t,n,0))),e.b("</div>")}),t.pop()),a.b("\n"+e)}),t.pop()),a.s(a.d("options.download",t,n,1),t,n,0,747,910,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-download" data-toggle="tooltip" data-placement="left" title="Download"><i class="fa fa-download"></i></div>'),a.b("\n"+e)}),t.pop()),a.s(a.d("options.upload",t,n,1),t,n,0,954,1111,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-upload" data-toggle="tooltip" data-placement="left" title="Upload"><i class="fa fa-upload"></i></div>'),a.b("\n"+e)}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.columns",t,n,1),t,n,0,1156,1903,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn-group columnEnables" data-toggle="tooltip" data-placement="left" title="Display Columns">'),a.b("\n"+e),a.b('			  <button class="btn btn-default dropdown-toggle" type="button" id="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">'),a.b("\n"+e),a.b('			    <i class="fa fa-list"></i>'),a.b("\n"+e),a.b('			    <span class="caret"></span>'),a.b("\n"+e),a.b("			  </button>"),a.b("\n"+e),a.b('			  <ul class="dropdown-menu pull-right" style="padding-top:10px;padding-left:10px" aria-labelledby="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('">'),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,1654,1868,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,1673,1848,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			    <li><label data-field="'),a.b(a.v(a.f("id",t,n,0))),a.b('" style="width:100%;font-weight:normal"><input type="checkbox" '),a.s(a.f("isEnabled",t,n,1),t,n,0,1787,1804,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('checked="checked"')}),t.pop()),a.b("> "),a.b(a.v(a.f("label",t,n,0))),a.b("</label></li>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("			  </ul>"),a.b("\n"+e),a.b("			</div>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("		</div>"),a.b("\n"),a.b("\n"+e),a.b("		"),a.s(a.d("options.search",t,n,1),t,n,0,1956,2086,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<input type="text" name="search" class="form-control pull-right" style="max-width:300px; margin-bottom:10px" placeholder="Search">')}),t.pop()),a.b("\n"),a.b("\n"+e),a.b("	</div>	"),a.b("\n"),a.b("\n"+e),a.s(a.d("options.autoSize",t,n,1),t,n,1,0,0,"")||(a.b('	<div class="paginate-footer hidden-xs" style="overflow:hidden;margin-top:10px;clear:both"></div>'),a.b("\n"+e)),a.b("\n"+e),a.b('	<div class="table-container" style="width:100%;overflow:auto">'),a.b("\n"+e),a.s(a.d("options.autoSize",t,n,1),t,n,0,2348,2515,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<table class="table '),a.s(a.d("options.noborder",t,n,1),t,n,1,0,0,"")||a.b("table-bordered"),a.b('" style="margin-bottom:0px">'),a.b("\n"+e),a.b('	<thead class="head">'),a.b("\n"+e),a.b(a.rp("<table_head0",t,n,"	")),a.b("	</thead>"),a.b("\n"+e),a.b("	</table>"),a.b("\n"+e)}),t.pop()),a.b("\n"),a.b("\n"+e),a.b('	<div style="min-height:100px">'),a.b("\n"+e),a.b('		<table class="table '),a.s(a.d("options.noborder",t,n,1),t,n,1,0,0,"")||a.b("table-bordered"),a.b(' table-striped table-hover dataTable" style="margin-bottom:0px;'),a.s(a.d("options.autoSize",t,n,1),t,n,0,2733,2751,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("margin-top: -19px;")}),t.pop()),a.b('">'),a.b("\n"+e),a.s(a.d("options.autoSize",t,n,1),t,n,1,0,0,"")||(a.b('			<thead class="head">'),a.b("\n"+e),a.b(a.rp("<table_head1",t,n,"			")),a.b("			</thead>"),a.b("\n"+e)),a.s(a.d("options.autoSize",t,n,1),t,n,0,2901,3181,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("			<thead>"),a.b("\n"+e),a.b('						<tr  class="list-group-row">'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,2981,3041,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <th style="width:60px" class="select-column"></th>'),a.b("\n"+e)}),t.pop()),a.s(a.f("items",t,n,1),t,n,0,3082,3151,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,3099,3134,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<th  style="min-width:85px">'),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("		</tr>"),a.b("\n"+e),a.b("		</thead>"),a.b("\n"+e)}),t.pop()),a.b('			<tbody class="list-group">'),a.b("\n"+e),a.b("				<tr><td>"),a.b("\n"+e),a.b('					<div class="alert alert-info" role="alert">You have no items.</div>'),a.b("\n"+e),a.b("				</td></tr>"),a.b("\n"+e),a.b("			</tbody>"),a.b("\n"),a.b("\n"+e),a.b("		</table>"),a.b("\n"+e),a.b("	</div>"),a.b("\n"),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b('	<div class="paginate-footer" style="overflow:hidden;margin-top:10px"></div>'),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{"<table_head0":{name:"table_head",partials:{},subs:{}},"<table_head1":{name:"table_head",partials:{},subs:{}}},subs:{}}),templates.table_footer=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b("<div>"),a.b("\n"+e),a.s(a.f("multiPage",t,n,1),t,n,0,21,930,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<nav class="pull-right" style="margin-left: 10px;">'),a.b("\n"+e),a.s(a.f("size",t,n,1),t,n,0,85,910,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('		<ul class="pagination" style="margin:0">'),a.b("\n"+e),a.s(a.f("isFirst",t,n,1),t,n,1,0,0,"")||(a.b("			"),a.s(a.f("showFirst",t,n,1),t,n,1,0,0,"")||a.b('<li class="pagination-first"><a data-page="1" href="javascript:void(0);" aria-label="First"><span aria-hidden="true">&laquo;</span></a></li>'),a.b("\n"+e),a.b('			<li><a data-page="dec" href="javascript:void(0);" aria-label="Previous"><span aria-hidden="true">&lsaquo;</span></a></li>'),a.b("\n"+e)),a.s(a.f("pages",t,n,1),t,n,0,471,571,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('				<li class="'),a.b(a.v(a.f("active",t,n,0))),a.b('"><a data-page="'),a.b(a.v(a.f("name",t,n,0))),a.b('" href="javascript:void(0);">'),a.b(a.v(a.f("name",t,n,0))),a.b("</a></li>"),a.b("\n"+e)}),t.pop()),a.s(a.f("isLast",t,n,1),t,n,1,0,0,"")||(a.b('			<li><a data-page="inc" href="javascript:void(0);" aria-label="Next"><span aria-hidden="true">&rsaquo;</span></a></li>'),a.b("\n"+e),a.b("			"),a.s(a.f("showLast",t,n,1),t,n,1,0,0,"")||a.b('<li class="pagination-last"><a data-page="" href="javascript:void(0);" aria-label="Last"><span aria-hidden="true">&raquo;</span></a></li>'),a.b("\n"+e)),a.b("\n"+e),a.b("		</ul>"),a.b("\n"+e)}),t.pop()),a.b("	</nav>"),a.b("\n"),a.b("\n"+e)}),t.pop()),a.b('	<h5 class="range badge '),a.s(a.f("size",t,n,1),t,n,1,0,0,"")||a.b("alert-danger"),a.b(' pull-left" style="margin-right:15px;">'),a.s(a.f("size",t,n,1),t,n,0,1048,1097,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("Showing "),e.b(e.v(e.f("first",t,n,0))),e.b(" to "),e.b(e.v(e.f("last",t,n,0))),e.b(" of "),e.b(e.v(e.f("size",t,n,0))),e.b(" results")}),t.pop()),a.s(a.f("size",t,n,1),t,n,1,0,0,"")||a.b("No matching results"),a.b("</h5>"),a.b("\n"+e),a.s(a.d("entries.length",t,n,1),t,n,0,1170,1540,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('		<span class="pull-left">'),a.b("\n"+e),a.b('			<select class="form-control" style="display:inline-block;width:auto;min-width:50px" name="count">'),a.b("\n"+e),a.b('			<option value="10000">All</option>'),a.b("\n"+e),a.s(a.f("entries",t,n,1),t,n,0,1352,1450,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<option value="'),a.b(a.v(a.f("value",t,n,0))),a.b('" '),a.s(a.f("selected",t,n,1),t,n,0,1395,1414,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('selected="selected"')}),t.pop()),a.b(">"),a.b(a.v(a.f("value",t,n,0))),a.b("</option>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("			</select>"),a.b("\n"+e),a.b('			<span class="hidden-xs">results per page</span>'),a.b("\n"+e),a.b("		</span>"),a.b("\n"+e)}),t.pop()),a.b("</div>"),a.fl()},partials:{},subs:{}}),templates.table_head=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<tr style="cursor:pointer" class="noselect table-sort">'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,83,240,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <th style="width: 60px;min-width:60px;padding: 0 0 0 20px;" class="select-column"><i data-event="select_all" class="fa fa-2x fa-square-o"></i></th>'),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,279,499,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,296,482,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <th data-sort="'),a.b(a.v(a.f("cname",t,n,0))),a.b('"><h6 style="margin: 2px;font-size:13px;white-space: nowrap">'),a.s(a.d("options.sort",t,n,1),t,n,0,403,441,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<i class="fa fa-sort text-muted"></i> ')}),t.pop()),a.b(a.v(a.f("label",t,n,0))),a.b("</h6></th>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("  </tr>"),a.b("\n"+e),a.s(a.d("options.filter",t,n,1),t,n,0,539,1040,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('  <tr class="filter">'),a.b("\n"+e),a.b("    "),a.s(a.d("options.hasActions",t,n,1),t,n,0,589,868,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("<td>"),a.b("\n"+e),a.b('    <div name="reset-search" style="position:relative" class="btn" data-toggle="tooltip" data-placement="left" title="Clear Filters">'),a.b("\n"+e),a.b('      <i class="fa fa-filter"></i>'),a.b("\n"+e),a.b('      <i class="fa fa-times text-danger" style="position: absolute;right: 5px;"></i>'),a.b("\n"+e),a.b("    </div>"),a.b("\n"+e),a.b("    </td>")}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,907,1019,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,924,1002,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <td data-inline="'),a.b(a.v(a.f("cname",t,n,0))),a.b('" style="min-width:85px" id="'),a.b(a.v(a.f("id",t,n,0))),a.b('"></td>'),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("  </tr>"),a.b("\n"+e)}),t.pop()),a.fl()},partials:{},subs:{}}),templates.table_row=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<tr class="filterable">		'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,50,1280,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("\n"+e),a.b('	<td data-event="mark" style="width: 60px;min-width:60px;text-align:left;padding:0;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">'),a.b("\n"+e),a.b('<!-- 		<div class="btn-group">'),a.b("\n"+e),a.b('		  <button type="button" class="btn btn-xs btn-info go">Actions</button>'),a.b("\n"+e),a.b('		  <button type="button" class="btn btn-xs btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'),a.b("\n"+e),a.b('		    <span class="caret"></span>'),a.b("\n"+e),a.b('		    <span class="sr-only">Toggle Dropdown</span>'),a.b("\n"+e),a.b("		  </button>"),a.b("\n"+e),a.b('		  <ul class="dropdown-menu dropdown-menu-right">'),a.b("\n"+e),a.b("		    "),a.s(a.d("options.hasEdit",t,n,1),t,n,0,698,821,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<li><a href="javascript:void(0);" data-event="edit" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-pencil"></i> Edit</a></li>')}),t.pop()),a.b("\n"+e),a.b("		    "),a.s(a.d("options.hasDelete",t,n,1),t,n,0,870,996,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<li><a href="javascript:void(0);" data-event="delete" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-times"></i> Delete</a></li>')}),t.pop()),a.b("\n"+e),a.b("		  </ul>"),a.b("\n"+e),a.b("		</div> -->"),a.b("\n"+e),a.b('		<span class="text-muted fa '),a.b(a.v(a.f("start",t,n,0))),a.b("#checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-check-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b(" "),a.b(a.v(a.f("start",t,n,0))),a.b("^checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b('" style="margin:6px 0 6px 20px; cursor:pointer;font-size:24px"></span>'),a.b("\n"+e),a.b("   	</td>"),a.b("\n"),a.b("\n"+e)}),t.pop()),a.s(a.f("items",t,n,1),t,n,0,1315,1413,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("	"),a.s(a.f("visible",t,n,1),t,n,0,1329,1399,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.s(e.f("isEnabled",t,n,1),t,n,0,1343,1385,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b('<td style="min-width:85px">'),e.b(e.t(e.f("name",t,n,0))),e.b("</td>")}),t.pop())}),t.pop()),a.b("\n"+e)}),t.pop()),a.b("</tr>"),a.fl()},partials:{},subs:{}});
