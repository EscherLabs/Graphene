(function(undefined){var moment,VERSION='2.9.0',globalScope=(typeof global!=='undefined'&&(typeof window==='undefined'||window===global.window))?global:this,oldGlobalMoment,round=Math.round,hasOwnProperty=Object.prototype.hasOwnProperty,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,locales={},momentProperties=[],hasModule=(typeof module!=='undefined'&&module&&module.exports),aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenOneToFourDigits=/\d{1,4}/,parseTokenOneToSixDigits=/[+\-]?\d{1,6}/,parseTokenDigits=/\d+/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/gi,parseTokenT=/T/i,parseTokenOffsetMs=/[\+\-]?\d+/,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,parseTokenOneDigit=/\d/,parseTokenTwoDigits=/\d\d/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{4}/,parseTokenSixDigits=/[+-]?\d{6}/,parseTokenSignedNumber=/[+-]?\d+/,isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoFormat='YYYY-MM-DDTHH:mm:ssZ',isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d{2}-\d{2}/],['YYYY-MM-DD',/\d{4}-\d{2}-\d{2}/],['GGGG-[W]WW-E',/\d{4}-W\d{2}-\d/],['GGGG-[W]WW',/\d{4}-W\d{2}/],['YYYY-DDD',/\d{4}-\d{3}/]],isoTimes=[['HH:mm:ss.SSSS',/(T|)\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss',/(T|)\d\d:\d\d:\d\d/],['HH:mm',/(T|)\d\d:\d\d/],['HH',/(T|)\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters='Date|Hours|Minutes|Seconds|Milliseconds'.split('|'),unitMillisecondFactors={'Milliseconds':1,'Seconds':1e3,'Minutes':6e4,'Hours':36e5,'Days':864e5,'Months':2592e6,'Years':31536e6},unitAliases={ms:'millisecond',s:'second',m:'minute',h:'hour',d:'day',D:'date',w:'week',W:'isoWeek',M:'month',Q:'quarter',y:'year',DDD:'dayOfYear',e:'weekday',E:'isoWeekday',gg:'weekYear',GG:'isoWeekYear'},camelFunctions={dayofyear:'dayOfYear',isoweekday:'isoWeekday',isoweek:'isoWeek',weekyear:'weekYear',isoweekyear:'isoWeekYear'},formatFunctions={},relativeTimeThresholds={s:45,m:45,h:22,d:26,M:11},ordinalizeTokens='DDD w W M D d'.split(' '),paddedTokens='M D H h m s w W'.split(' '),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.localeData().monthsShort(this,format)},MMMM:function(format){return this.localeData().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.localeData().weekdaysMin(this,format)},ddd:function(format){return this.localeData().weekdaysShort(this,format)},dddd:function(format){return this.localeData().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},YYYYYY:function(){var y=this.year(),sign=y>=0?'+':'-';return sign+leftZeroFill(Math.abs(y),6)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return leftZeroFill(this.weekYear(),4)},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return leftZeroFill(this.isoWeekYear(),4)},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},SSSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b='+';if(a<0){a=-a;b='-'}
return b+leftZeroFill(toInt(a/60),2)+':'+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b='+';if(a<0){a=-a;b='-'}
return b+leftZeroFill(toInt(a/60),2)+leftZeroFill(toInt(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},deprecations={},lists=['months','monthsShort','weekdays','weekdaysShort','weekdaysMin'],updateInProgress=!1;function dfl(a,b,c){switch(arguments.length){case 2:return a!=null?a:b;case 3:return a!=null?a:b!=null?b:c;default:throw new Error('Implement me')}}
function hasOwnProp(a,b){return hasOwnProperty.call(a,b)}
function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}
function printMsg(msg){if(moment.suppressDeprecationWarnings===!1&&typeof console!=='undefined'&&console.warn){console.warn('Deprecation warning: '+msg)}}
function deprecate(msg,fn){var firstTime=!0;return extend(function(){if(firstTime){printMsg(msg);firstTime=!1}
return fn.apply(this,arguments)},fn)}
function deprecateSimple(name,msg){if(!deprecations[name]){printMsg(msg);deprecations[name]=!0}}
function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}
function ordinalizeToken(func,period){return function(a){return this.localeData().ordinal(func.call(this,a),period)}}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor)}
return-(wholeMonthDiff+adjust)}
while(ordinalizeTokens.length){i=ordinalizeTokens.pop();formatTokenFunctions[i+'o']=ordinalizeToken(formatTokenFunctions[i],i)}
while(paddedTokens.length){i=paddedTokens.pop();formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2)}
formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3);function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}
if(!isPm&&hour===12){hour=0}
return hour}else{return hour}}
function Locale(){}
function Moment(config,skipOverflow){if(skipOverflow!==!1){checkOverflow(config)}
copyConfig(this,config);this._d=new Date(+config._d);if(updateInProgress===!1){updateInProgress=!0;moment.updateOffset(this);updateInProgress=!1}}
function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=moment.localeData();this._bubble()}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}
if(hasOwnProp(b,'toString')){a.toString=b.toString}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf}
return a}
function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=='undefined'){to._isAMomentObject=from._isAMomentObject}
if(typeof from._i!=='undefined'){to._i=from._i}
if(typeof from._f!=='undefined'){to._f=from._f}
if(typeof from._l!=='undefined'){to._l=from._l}
if(typeof from._strict!=='undefined'){to._strict=from._strict}
if(typeof from._tzm!=='undefined'){to._tzm=from._tzm}
if(typeof from._isUTC!=='undefined'){to._isUTC=from._isUTC}
if(typeof from._offset!=='undefined'){to._offset=from._offset}
if(typeof from._pf!=='undefined'){to._pf=from._pf}
if(typeof from._locale!=='undefined'){to._locale=from._locale}
if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=='undefined'){to[prop]=val}}}
return to}
function absRound(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}
function leftZeroFill(number,targetLength,forceSign){var output=''+Math.abs(number),sign=number>=0;while(output.length<targetLength){output='0'+output}
return(sign?(forceSign?'+':''):'-')+output}
function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months}
res.milliseconds=+other- +(base.clone().add(res.months,'M'));return res}
function momentsDifference(base,other){var res;other=makeAs(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}
return res}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period).');tmp=val;val=period;period=tmp}
val=typeof val==='string'?+val:val;dur=moment.duration(val,period);addOrSubtractDurationFromMoment(this,dur,direction);return this}}
function addOrSubtractDurationFromMoment(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?!0:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding)}
if(days){rawSetter(mom,'Date',rawGetter(mom,'Date')+days*isAdding)}
if(months){rawMonthSetter(mom,rawGetter(mom,'Month')+months*isAdding)}
if(updateOffset){moment.updateOffset(mom,days||months)}}
function isArray(input){return Object.prototype.toString.call(input)==='[object Array]'}
function isDate(input){return Object.prototype.toString.call(input)==='[object Date]'||input instanceof Date}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++}}
return diffs+lengthDiff}
function normalizeUnits(units){if(units){var lowered=units.toLowerCase().replace(/(.)s$/,'$1');units=unitAliases[units]||camelFunctions[lowered]||lowered}
return units}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}
return normalizedInput}
function makeList(field){var count,setter;if(field.indexOf('week')===0){count=7;setter='day'}else if(field.indexOf('month')===0){count=12;setter='month'}else{return}
moment[field]=function(format,index){var i,getter,method=moment._locale[field],results=[];if(typeof format==='number'){index=format;format=undefined}
getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment._locale,m,format||'')};if(index!=null){return getter(index)}else{for(i=0;i<count;i++){results.push(getter(i))}
return results}}}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){if(coercedNumber>=0){value=Math.floor(coercedNumber)}else{value=Math.ceil(coercedNumber)}}
return value}
function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}
function weeksInYear(year,dow,doy){return weekOfYear(moment([year,11,31+dow-doy]),dow,doy).week}
function daysInYear(year){return isLeapYear(year)?366:365}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0}
function checkOverflow(m){var overflow;if(m._a&&m._pf.overflow===-2){overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>24||(m._a[HOUR]===24&&(m._a[MINUTE]!==0||m._a[SECOND]!==0||m._a[MILLISECOND]!==0))?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1;if(m._pf._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}
m._pf.overflow=overflow}}
function isValid(m){if(m._isValid==null){m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.invalidFormat&&!m._pf.userInvalidated;if(m._strict){m._isValid=m._isValid&&m._pf.charsLeftOver===0&&m._pf.unusedTokens.length===0&&m._pf.bigHour===undefined}}
return m._isValid}
function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale}
if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1){break}
j--}
i++}
return null}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&hasModule){try{oldLocale=moment.locale();require('./locale/'+name);moment.locale(oldLocale)}catch(e){}}
return locales[name]}
function makeAs(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(moment.isMoment(input)||isDate(input)?+input:+moment(input))-(+res);res._d.setTime(+res._d+diff);moment.updateOffset(res,!1);return res}else{return moment(input).local()}}
extend(Locale.prototype,{set:function(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==='function'){this[i]=prop}else{this['_'+i]=prop}}
this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+/\d{1,2}/.source)},_months:'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),months:function(m){return this._months[m.month()]},_monthsShort:'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}
for(i=0;i<12;i++){mom=moment.utc([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i')}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i')}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}},_weekdays:'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[]}
for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=moment([2000,1]).day(i);regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i')}
if(this._weekdaysParse[i].test(weekdayName)){return i}}},_longDateFormat:{LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY LT',LLLL:'dddd, MMMM D, YYYY LT'},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}
return output},isPM:function(input){return((input+'').toLowerCase().charAt(0)==='p')},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM'}else{return isLower?'am':'AM'}},_calendar:{sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'},calendar:function(key,mom,now){var output=this._calendar[key];return typeof output==='function'?output.apply(mom,[now]):output},_relativeTime:{future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(typeof output==='function')?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return typeof format==='function'?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace('%d',number)},_ordinal:'%d',_ordinalParse:/\d{1,2}/,preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:'Invalid date',invalidDate:function(){return this._invalidDate}});function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'')}
return input.replace(/\\/g,'')}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}
return function(mom){var output='';for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}
return output}}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}
format=expandFormat(format,m.localeData());if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}
return formatFunctions[format](m)}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}
return format}
function getParseRegexForToken(token,config){var a,strict=config._strict;switch(token){case 'Q':return parseTokenOneDigit;case 'DDDD':return parseTokenThreeDigits;case 'YYYY':case 'GGGG':case 'gggg':return strict?parseTokenFourDigits:parseTokenOneToFourDigits;case 'Y':case 'G':case 'g':return parseTokenSignedNumber;case 'YYYYYY':case 'YYYYY':case 'GGGGG':case 'ggggg':return strict?parseTokenSixDigits:parseTokenOneToSixDigits;case 'S':if(strict){return parseTokenOneDigit}
case 'SS':if(strict){return parseTokenTwoDigits}
case 'SSS':if(strict){return parseTokenThreeDigits}
case 'DDD':return parseTokenOneToThreeDigits;case 'MMM':case 'MMMM':case 'dd':case 'ddd':case 'dddd':return parseTokenWord;case 'a':case 'A':return config._locale._meridiemParse;case 'x':return parseTokenOffsetMs;case 'X':return parseTokenTimestampMs;case 'Z':case 'ZZ':return parseTokenTimezone;case 'T':return parseTokenT;case 'SSSS':return parseTokenDigits;case 'MM':case 'DD':case 'YY':case 'GG':case 'gg':case 'HH':case 'hh':case 'mm':case 'ss':case 'ww':case 'WW':return strict?parseTokenTwoDigits:parseTokenOneOrTwoDigits;case 'M':case 'D':case 'd':case 'H':case 'h':case 'm':case 's':case 'w':case 'W':case 'e':case 'E':return parseTokenOneOrTwoDigits;case 'Do':return strict?config._locale._ordinalParse:config._locale._ordinalParseLenient;default:a=new RegExp(regexpEscape(unescapeFormat(token.replace('\\','')),'i'));return a}}
function utcOffsetFromString(string){string=string||'';var possibleTzMatches=(string.match(parseTokenTimezone)||[]),tzChunk=possibleTzMatches[possibleTzMatches.length-1]||[],parts=(tzChunk+'').match(parseTimezoneChunker)||['-',0,0],minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==='+'?minutes:-minutes}
function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case 'Q':if(input!=null){datePartArray[MONTH]=(toInt(input)-1)*3}
break;case 'M':case 'MM':if(input!=null){datePartArray[MONTH]=toInt(input)-1}
break;case 'MMM':case 'MMMM':a=config._locale.monthsParse(input,token,config._strict);if(a!=null){datePartArray[MONTH]=a}else{config._pf.invalidMonth=input}
break;case 'D':case 'DD':if(input!=null){datePartArray[DATE]=toInt(input)}
break;case 'Do':if(input!=null){datePartArray[DATE]=toInt(parseInt(input.match(/\d{1,2}/)[0],10))}
break;case 'DDD':case 'DDDD':if(input!=null){config._dayOfYear=toInt(input)}
break;case 'YY':datePartArray[YEAR]=moment.parseTwoDigitYear(input);break;case 'YYYY':case 'YYYYY':case 'YYYYYY':datePartArray[YEAR]=toInt(input);break;case 'a':case 'A':config._meridiem=input;break;case 'h':case 'hh':config._pf.bigHour=!0;case 'H':case 'HH':datePartArray[HOUR]=toInt(input);break;case 'm':case 'mm':datePartArray[MINUTE]=toInt(input);break;case 's':case 'ss':datePartArray[SECOND]=toInt(input);break;case 'S':case 'SS':case 'SSS':case 'SSSS':datePartArray[MILLISECOND]=toInt(('0.'+input)*1000);break;case 'x':config._d=new Date(toInt(input));break;case 'X':config._d=new Date(parseFloat(input)*1000);break;case 'Z':case 'ZZ':config._useUTC=!0;config._tzm=utcOffsetFromString(input);break;case 'dd':case 'ddd':case 'dddd':a=config._locale.weekdaysParse(input);if(a!=null){config._w=config._w||{};config._w.d=a}else{config._pf.invalidWeekday=input}
break;case 'w':case 'ww':case 'W':case 'WW':case 'd':case 'e':case 'E':token=token.substr(0,1);case 'gggg':case 'GGGG':case 'GGGGG':token=token.substr(0,2);if(input){config._w=config._w||{};config._w[token]=toInt(input)}
break;case 'gg':case 'GG':config._w=config._w||{};config._w[token]=moment.parseTwoDigitYear(input)}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=dfl(w.GG,config._a[YEAR],weekOfYear(moment(),1,4).year);week=dfl(w.W,1);weekday=dfl(w.E,1)}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=dfl(w.gg,config._a[YEAR],weekOfYear(moment(),dow,doy).year);week=dfl(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week}}else if(w.e!=null){weekday=w.e+dow}else{weekday=dow}}
temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}
function dateFromConfig(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}
if(config._dayOfYear){yearToUse=dfl(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){config._pf._overflowDayOfYear=!0}
date=makeUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i]}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=!0;config._a[HOUR]=0}
config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}
if(config._nextDay){config._a[HOUR]=24}}
function dateFromObject(config){var normalizedInput;if(config._d){return}
normalizedInput=normalizeObjectUnits(config._i);config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day||normalizedInput.date,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond];dateFromConfig(config)}
function currentDateArray(config){var now=new Date();if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]}else{return[now.getFullYear(),now.getMonth(),now.getDate()]}}
function makeDateFromStringAndFormat(config){if(config._f===moment.ISO_8601){parseISO(config);return}
config._a=[];config._pf.empty=!0;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){config._pf.unusedInput.push(skipped)}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}
if(formatTokenFunctions[token]){if(parsedInput){config._pf.empty=!1}else{config._pf.unusedTokens.push(token)}
addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){config._pf.unusedTokens.push(token)}}
config._pf.charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){config._pf.unusedInput.push(string)}
if(config._pf.bigHour===!0&&config._a[HOUR]<=12){config._pf.bigHour=undefined}
config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);dateFromConfig(config);checkOverflow(config)}
function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}
function regexpEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')}
function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){config._pf.invalidFormat=!0;config._d=new Date(NaN);return}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}
tempConfig._pf=defaultParsingFlags();tempConfig._f=config._f[i];makeDateFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue}
currentScore+=tempConfig._pf.charsLeftOver;currentScore+=tempConfig._pf.unusedTokens.length*10;tempConfig._pf.score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}
extend(config,bestMoment||tempConfig)}
function parseISO(config){var i,l,string=config._i,match=isoRegex.exec(string);if(match){config._pf.iso=!0;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||' ');break}}
for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}
if(string.match(parseTokenTimezone)){config._f+='Z'}
makeDateFromStringAndFormat(config)}else{config._isValid=!1}}
function makeDateFromString(config){parseISO(config);if(config._isValid===!1){delete config._isValid;moment.createFromInputFallback(config)}}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}
return res}
function makeDateFromInput(config){var input=config._i,matched;if(input===undefined){config._d=new Date()}else if(isDate(input)){config._d=new Date(+input)}else if((matched=aspNetJsonRegex.exec(input))!==null){config._d=new Date(+matched[1])}else if(typeof input==='string'){makeDateFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});dateFromConfig(config)}else if(typeof(input)==='object'){dateFromObject(config)}else if(typeof(input)==='number'){config._d=new Date(input)}else{moment.createFromInputFallback(config)}}
function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y)}
return date}
function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y)}
return date}
function parseWeekday(input,locale){if(typeof input==='string'){if(!isNaN(input)){input=parseInt(input,10)}else{input=locale.weekdaysParse(input);if(typeof input!=='number'){return null}}}
return input}
function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}
function relativeTime(posNegDuration,withoutSuffix,locale){var duration=moment.duration(posNegDuration).abs(),seconds=round(duration.as('s')),minutes=round(duration.as('m')),hours=round(duration.as('h')),days=round(duration.as('d')),months=round(duration.as('M')),years=round(duration.as('y')),args=seconds<relativeTimeThresholds.s&&['s',seconds]||minutes===1&&['m']||minutes<relativeTimeThresholds.m&&['mm',minutes]||hours===1&&['h']||hours<relativeTimeThresholds.h&&['hh',hours]||days===1&&['d']||days<relativeTimeThresholds.d&&['dd',days]||months===1&&['M']||months<relativeTimeThresholds.M&&['MM',months]||years===1&&['y']||['yy',years];args[2]=withoutSuffix;args[3]=+posNegDuration>0;args[4]=locale;return substituteTimeAgo.apply({},args)}
function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7}
if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}
adjustedMoment=moment(mom).add(daysToDayOfWeek,'d');return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}
function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var d=makeUTCDate(year,0,1).getUTCDay(),daysToAdd,dayOfYear;d=d===0?7:d;weekday=weekday!=null?weekday:firstDayOfWeek;daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0);dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}
function makeMoment(config){var input=config._i,format=config._f,res;config._locale=config._locale||moment.localeData(config._l);if(input===null||(format===undefined&&input==='')){return moment.invalid({nullInput:!0})}
if(typeof input==='string'){config._i=input=config._locale.preparse(input)}
if(moment.isMoment(input)){return new Moment(input,!0)}else if(format){if(isArray(format)){makeDateFromStringAndArray(config)}else{makeDateFromStringAndFormat(config)}}else{makeDateFromInput(config)}
res=new Moment(config);if(res._nextDay){res.add(1,'d');res._nextDay=undefined}
return res}
moment=function(input,format,locale,strict){var c;if(typeof(locale)==='boolean'){strict=locale;locale=undefined}
c={};c._isAMomentObject=!0;c._i=input;c._f=format;c._l=locale;c._strict=strict;c._isUTC=!1;c._pf=defaultParsingFlags();return makeMoment(c)};moment.suppressDeprecationWarnings=!1;moment.createFromInputFallback=deprecate('moment construction falls back to js Date. This is '+'discouraged and will be removed in upcoming major '+'release. Please refer to '+'https://github.com/moment/moment/issues/1407 for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''))});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}
if(!moments.length){return moment()}
res=moments[0];for(i=1;i<moments.length;++i){if(moments[i][fn](res)){res=moments[i]}}
return res}
moment.min=function(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args)};moment.max=function(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args)};moment.utc=function(input,format,locale,strict){var c;if(typeof(locale)==='boolean'){strict=locale;locale=undefined}
c={};c._isAMomentObject=!0;c._useUTC=!0;c._isUTC=!0;c._l=locale;c._i=input;c._f=format;c._strict=strict;c._pf=defaultParsingFlags();return makeMoment(c).utc()};moment.unix=function(input){return moment(input*1000)};moment.duration=function(input,key){var duration=input,match=null,sign,ret,parseIso,diffRes;if(moment.isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(typeof input==='number'){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetTimeSpanJsonRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}}else if(!!(match=isoDurationRegex.exec(input))){sign=(match[1]==='-')?-1:1;parseIso=function(inp){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign};duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])}}else if(duration==null){duration={}}else if(typeof duration==='object'&&('from' in duration||'to' in duration)){diffRes=momentsDifference(moment(duration.from),moment(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}
ret=new Duration(duration);if(moment.isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale}
return ret};moment.version=VERSION;moment.defaultFormat=isoFormat;moment.ISO_8601=function(){};moment.momentProperties=momentProperties;moment.updateOffset=function(){};moment.relativeTimeThreshold=function(threshold,limit){if(relativeTimeThresholds[threshold]===undefined){return!1}
if(limit===undefined){return relativeTimeThresholds[threshold]}
relativeTimeThresholds[threshold]=limit;return!0};moment.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',function(key,value){return moment.locale(key,value)});moment.locale=function(key,values){var data;if(key){if(typeof(values)!=='undefined'){data=moment.defineLocale(key,values)}else{data=moment.localeData(key)}
if(data){moment.duration._locale=moment._locale=data}}
return moment._locale._abbr};moment.defineLocale=function(name,values){if(values!==null){values.abbr=name;if(!locales[name]){locales[name]=new Locale()}
locales[name].set(values);moment.locale(name);return locales[name]}else{delete locales[name];return null}};moment.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',function(key){return moment.localeData(key)});moment.localeData=function(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}
if(!key){return moment._locale}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}
key=[key]}
return chooseLocale(key)};moment.isMoment=function(obj){return obj instanceof Moment||(obj!=null&&hasOwnProp(obj,'_isAMomentObject'))};moment.isDuration=function(obj){return obj instanceof Duration};for(i=lists.length-1;i>=0;--i){makeList(lists[i])}
moment.normalizeUnits=function(units){return normalizeUnits(units)};moment.invalid=function(flags){var m=moment.utc(NaN);if(flags!=null){extend(m._pf,flags)}else{m._pf.userInvalidated=!0}
return m};moment.parseZone=function(){return moment.apply(null,arguments).parseZone()};moment.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000)};moment.isDate=isDate;extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d-((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ')},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var m=moment(this).utc();if(0<m.year()&&m.year()<=9999){if('function'===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return formatMoment(m,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]')}}else{return formatMoment(m,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]')}},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0}
return!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(keepLocalTime){return this.utcOffset(0,keepLocalTime)},local:function(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=!1;if(keepLocalTime){this.subtract(this._dateUtcOffset(),'m')}}
return this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.localeData().postformat(output)},add:createAdder(1,'add'),subtract:createAdder(-1,'subtract'),diff:function(input,units,asFloat){var that=makeAs(input,this),zoneDiff=(that.utcOffset()-this.utcOffset())*6e4,anchor,diff,output,daysAdjust;units=normalizeUnits(units);if(units==='year'||units==='month'||units==='quarter'){output=monthDiff(this,that);if(units==='quarter'){output=output/3}else if(units==='year'){output=output/12}}else{diff=this-that;output=units==='second'?diff/1e3:units==='minute'?diff/6e4:units==='hour'?diff/36e5:units==='day'?(diff-zoneDiff)/864e5:units==='week'?(diff-zoneDiff)/6048e5:diff}
return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(time){var now=time||moment(),sod=makeAs(now,this).startOf('day'),diff=this.diff(sod,'days',!0),format=diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';return this.format(this.localeData().calendar(format,this,moment(now)))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset())},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d')}else{return day}},month:makeAccessor('Month',!0),startOf:function(units){units=normalizeUnits(units);switch(units){case 'year':this.month(0);case 'quarter':case 'month':this.date(1);case 'week':case 'isoWeek':case 'day':this.hours(0);case 'hour':this.minutes(0);case 'minute':this.seconds(0);case 'second':this.milliseconds(0)}
if(units==='week'){this.weekday(0)}else if(units==='isoWeek'){this.isoWeekday(1)}
if(units==='quarter'){this.month(Math.floor(this.month()/3)*3)}
return this},endOf:function(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this}
return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms')},isAfter:function(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=moment.isMoment(input)?input:moment(input);return+this>+input}else{inputMs=moment.isMoment(input)?+input:+moment(input);return inputMs<+this.clone().startOf(units)}},isBefore:function(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=moment.isMoment(input)?input:moment(input);return+this<+input}else{inputMs=moment.isMoment(input)?+input:+moment(input);return+this.clone().endOf(units)<inputMs}},isBetween:function(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)},isSame:function(input,units){var inputMs;units=normalizeUnits(units||'millisecond');if(units==='millisecond'){input=moment.isMoment(input)?input:moment(input);return+this===+input}else{inputMs=+moment(input);return+(this.clone().startOf(units))<=inputMs&&inputMs<=+(this.clone().endOf(units))}},min:deprecate('moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',function(other){other=moment.apply(null,arguments);return other<this?this:other}),max:deprecate('moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',function(other){other=moment.apply(null,arguments);return other>this?this:other}),zone:deprecate('moment().zone is deprecated, use moment().utcOffset instead. '+'https://github.com/moment/moment/issues/1779',function(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input}
this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}),utcOffset:function(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==='string'){input=utcOffsetFromString(input)}
if(Math.abs(input)<16){input=input*60}
if(!this._isUTC&&keepLocalTime){localAdjust=this._dateUtcOffset()}
this._offset=input;this._isUTC=!0;if(localAdjust!=null){this.add(localAdjust,'m')}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){addOrSubtractDurationFromMoment(this,moment.duration(input-offset,'m'),1,!1)}else if(!this._changeInProgress){this._changeInProgress=!0;moment.updateOffset(this,!0);this._changeInProgress=null}}
return this}else{return this._isUTC?offset:this._dateUtcOffset()}},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&this._offset===0},zoneAbbr:function(){return this._isUTC?'UTC':''},zoneName:function(){return this._isUTC?'Coordinated Universal Time':''},parseZone:function(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==='string'){this.utcOffset(utcOffsetFromString(this._i))}
return this},hasAlignedHourOffset:function(input){if(!input){input=0}else{input=moment(input).utcOffset()}
return(this.utcOffset()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf('day')-moment(this).startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d')},quarter:function(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)},weekYear:function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add((input-year),'y')},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add((input-year),'y')},week:function(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d')},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d')},weekday:function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d')},isoWeekday:function(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7)},isoWeeksInYear:function(){return weeksInYear(this.year(),1,4)},weeksInYear:function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},get:function(units){units=normalizeUnits(units);return this[units]()},set:function(units,value){var unit;if(typeof units==='object'){for(unit in units){this.set(unit,units[unit])}}else{units=normalizeUnits(units);if(typeof this[units]==='function'){this[units](value)}}
return this},locale:function(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=moment.localeData(key);if(newLocaleData!=null){this._locale=newLocaleData}
return this}},lang:deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}}),localeData:function(){return this._locale},_dateUtcOffset:function(){return-Math.round(this._d.getTimezoneOffset()/15)*15}});function rawMonthSetter(mom,value){var dayOfMonth;if(typeof value==='string'){value=mom.localeData().monthsParse(value);if(typeof value!=='number'){return mom}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom}
function rawGetter(mom,unit){return mom._d['get'+(mom._isUTC?'UTC':'')+unit]()}
function rawSetter(mom,unit,value){if(unit==='Month'){return rawMonthSetter(mom,value)}else{return mom._d['set'+(mom._isUTC?'UTC':'')+unit](value)}}
function makeAccessor(unit,keepTime){return function(value){if(value!=null){rawSetter(this,unit,value);moment.updateOffset(this,keepTime);return this}else{return rawGetter(this,unit)}}}
moment.fn.millisecond=moment.fn.milliseconds=makeAccessor('Milliseconds',!1);moment.fn.second=moment.fn.seconds=makeAccessor('Seconds',!1);moment.fn.minute=moment.fn.minutes=makeAccessor('Minutes',!1);moment.fn.hour=moment.fn.hours=makeAccessor('Hours',!0);moment.fn.date=makeAccessor('Date',!0);moment.fn.dates=deprecate('dates accessor is deprecated. Use date instead.',makeAccessor('Date',!0));moment.fn.year=makeAccessor('FullYear',!0);moment.fn.years=deprecate('years accessor is deprecated. Use year instead.',makeAccessor('FullYear',!0));moment.fn.days=moment.fn.day;moment.fn.months=moment.fn.month;moment.fn.weeks=moment.fn.week;moment.fn.isoWeeks=moment.fn.isoWeek;moment.fn.quarters=moment.fn.quarter;moment.fn.toJSON=moment.fn.toISOString;moment.fn.isUTC=moment.fn.isUtc;function daysToYears(days){return days*400/146097}
function yearsToDays(years){return years*146097/400}
extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years=0;data.milliseconds=milliseconds%1000;seconds=absRound(milliseconds/1000);data.seconds=seconds%60;minutes=absRound(seconds/60);data.minutes=minutes%60;hours=absRound(minutes/60);data.hours=hours%24;days+=absRound(hours/24);years=absRound(daysToYears(days));days-=absRound(yearsToDays(years));months+=absRound(days/30);days%=30;years+=absRound(months/12);months%=12;data.days=days;data.months=months;data.years=years},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+(this._months%12)*2592e6+toInt(this._months/12)*31536e6},humanize:function(withSuffix){var output=relativeTime(this,!withSuffix,this.localeData());if(withSuffix){output=this.localeData().pastFuture(+this,output)}
return this.localeData().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);this._milliseconds+=dur._milliseconds;this._days+=dur._days;this._months+=dur._months;this._bubble();return this},subtract:function(input,val){var dur=moment.duration(input,val);this._milliseconds-=dur._milliseconds;this._days-=dur._days;this._months-=dur._months;this._bubble();return this},get:function(units){units=normalizeUnits(units);return this[units.toLowerCase()+'s']()},as:function(units){var days,months;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+this._milliseconds/864e5;months=this._months+daysToYears(days)*12;return units==='month'?months:months/12}else{days=this._days+Math.round(yearsToDays(this._months/12));switch(units){case 'week':return days/7+this._milliseconds/6048e5;case 'day':return days+this._milliseconds/864e5;case 'hour':return days*24+this._milliseconds/36e5;case 'minute':return days*24*60+this._milliseconds/6e4;case 'second':return days*24*60*60+this._milliseconds/1000;case 'millisecond':return Math.floor(days*24*60*60*1000)+this._milliseconds;default:throw new Error('Unknown unit '+units)}}},lang:moment.fn.lang,locale:moment.fn.locale,toIsoString:deprecate('toIsoString() is deprecated. Please use toISOString() instead '+'(notice the capitals)',function(){return this.toISOString()}),toISOString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return'P0D'}
return(this.asSeconds()<0?'-':'')+'P'+(years?years+'Y':'')+(months?months+'M':'')+(days?days+'D':'')+((hours||minutes||seconds)?'T':'')+(hours?hours+'H':'')+(minutes?minutes+'M':'')+(seconds?seconds+'S':'')},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}});moment.duration.fn.toString=moment.duration.fn.toISOString;function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}
for(i in unitMillisecondFactors){if(hasOwnProp(unitMillisecondFactors,i)){makeDurationGetter(i.toLowerCase())}}
moment.duration.fn.asMilliseconds=function(){return this.as('ms')};moment.duration.fn.asSeconds=function(){return this.as('s')};moment.duration.fn.asMinutes=function(){return this.as('m')};moment.duration.fn.asHours=function(){return this.as('h')};moment.duration.fn.asDays=function(){return this.as('d')};moment.duration.fn.asWeeks=function(){return this.as('weeks')};moment.duration.fn.asMonths=function(){return this.as('M')};moment.duration.fn.asYears=function(){return this.as('y')};moment.locale('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output}});function makeGlobal(shouldDeprecate){if(typeof ender!=='undefined'){return}
oldGlobalMoment=globalScope.moment;if(shouldDeprecate){globalScope.moment=deprecate('Accessing Moment through the global scope is '+'deprecated, and will be removed in an upcoming '+'release.',moment)}else{globalScope.moment=moment}}
if(hasModule){module.exports=moment}else if(typeof define==='function'&&define.amd){define(function(require,exports,module){if(module.config&&module.config()&&module.config().noGlobal===!0){globalScope.moment=oldGlobalMoment}
return moment});makeGlobal(!0)}else{makeGlobal()}}).call(this);/**
 * math.js
 * https://github.com/josdejong/mathjs
 *
 * Math.js is an extensive math library for JavaScript and Node.js,
 * It features real and complex numbers, units, matrices, a large set of
 * mathematical functions, and a flexible expression parser.
 *
 * @version 6.2.2
 * @date    2019-09-23
 *
 * @license
 * Copyright (C) 2013-2019 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.math=t():e.math=t()}(this,function(){return n={},i.m=r=[function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return o});r(2);var a=r(3);function n(r,n,i,e){function t(e){var t=Object(a.j)(e,n.map(o));return function(e,t,r){if(!t.filter(function(e){return!function(e){return e&&"?"===e[0]}(e)}).every(function(e){return void 0!==r[e]})){var n=t.filter(function(e){return void 0===r[e]});throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(function(e){return'"'.concat(e,'"')}).join(", "),"."))}}(r,n,e),i(t)}return t.isFactory=!0,t.fn=r,t.dependencies=n.slice().sort(),e&&(t.meta=e),t}function i(e){return"function"==typeof e&&"string"==typeof e.fn&&Array.isArray(e.dependencies)}function o(e){return e&&"?"===e[0]?e.slice(1):e}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"number"==typeof e}function a(e){return e&&!0===e.constructor.prototype.isBigNumber||!1}function o(e){return e&&"object"===n(e)&&!0===Object.getPrototypeOf(e).isComplex||!1}function s(e){return e&&"object"===n(e)&&!0===Object.getPrototypeOf(e).isFraction||!1}function u(e){return e&&!0===e.constructor.prototype.isUnit||!1}function c(e){return"string"==typeof e}r.d(t,"y",function(){return i}),r.d(t,"e",function(){return a}),r.d(t,"j",function(){return o}),r.d(t,"o",function(){return s}),r.d(t,"L",function(){return u}),r.d(t,"I",function(){return c}),r.d(t,"b",function(){return f}),r.d(t,"v",function(){return l}),r.d(t,"i",function(){return p}),r.d(t,"n",function(){return m}),r.d(t,"H",function(){return h}),r.d(t,"D",function(){return d}),r.d(t,"t",function(){return y}),r.d(t,"g",function(){return g}),r.d(t,"G",function(){return v}),r.d(t,"s",function(){return b}),r.d(t,"p",function(){return x}),r.d(t,"m",function(){return w}),r.d(t,"F",function(){return N}),r.d(t,"z",function(){return O}),r.d(t,"x",function(){return M}),r.d(t,"K",function(){return E}),r.d(t,"a",function(){return j}),r.d(t,"c",function(){return S}),r.d(t,"d",function(){return A}),r.d(t,"f",function(){return C}),r.d(t,"k",function(){return T}),r.d(t,"l",function(){return _}),r.d(t,"q",function(){return I}),r.d(t,"r",function(){return B}),r.d(t,"u",function(){return q}),r.d(t,"w",function(){return k}),r.d(t,"A",function(){return z}),r.d(t,"B",function(){return D}),r.d(t,"C",function(){return R}),r.d(t,"E",function(){return P}),r.d(t,"J",function(){return F}),r.d(t,"h",function(){return U}),r.d(t,"M",function(){return L});var f=Array.isArray;function l(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function p(e){return Array.isArray(e)||l(e)}function m(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function h(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function d(e){return e&&!0===e.constructor.prototype.isRange||!1}function y(e){return e&&!0===e.constructor.prototype.isIndex||!1}function g(e){return"boolean"==typeof e}function v(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function b(e){return e&&!0===e.constructor.prototype.isHelp||!1}function x(e){return"function"==typeof e}function w(e){return e instanceof Date}function N(e){return e instanceof RegExp}function O(e){return!(!e||"object"!==n(e)||e.constructor!==Object||o(e)||s(e))}function M(e){return null===e}function E(e){return void 0===e}function j(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function S(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function A(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function C(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function T(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function _(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function I(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function q(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function k(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function z(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function D(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function P(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.constructor.prototype.isChain||!1}function L(e){var t=n(e);return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":a(e)?"BigNumber":o(e)?"Complex":s(e)?"Fraction":l(e)?"Matrix":u(e)?"Unit":y(e)?"Index":d(e)?"Range":v(e)?"ResultSet":k(e)?e.type:U(e)?"Chain":b(e)?"Help":"Object":"function"===t?"Function":t}},function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"r",function(){return c}),r.d(t,"s",function(){return f}),r.d(t,"o",function(){return l}),r.d(t,"n",function(){return p}),r.d(t,"p",function(){return m}),r.d(t,"q",function(){return h}),r.d(t,"e",function(){return d}),r.d(t,"m",function(){return y}),r.d(t,"f",function(){return g}),r.d(t,"c",function(){return v}),r.d(t,"d",function(){return b}),r.d(t,"k",function(){return x}),r.d(t,"i",function(){return w}),r.d(t,"g",function(){return N}),r.d(t,"h",function(){return O}),r.d(t,"l",function(){return M}),r.d(t,"j",function(){return E}),r.d(t,"b",function(){return j});var n=r(4),i=r(1),a=r(5),u=r(6),o=r(10);function s(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function c(e,t){if(0===t.length){if(Array.isArray(e))throw new u.a(e.length,0)}else!function e(t,r,n){var i,a=t.length;if(a!==r[n])throw new u.a(a,r[n]);if(n<r.length-1){var o=n+1;for(i=0;i<a;i++){var s=t[i];if(!Array.isArray(s))throw new u.a(r.length-1,r.length,"<");e(t[i],r,o)}}else for(i=0;i<a;i++)if(Array.isArray(t[i]))throw new u.a(r.length+1,r.length,">")}(e,t,0)}function f(e,t){if(!Object(i.y)(e)||!Object(n.i)(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&t<=e)throw new o.a(e,t)}function l(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach(function(e){if(!Object(i.y)(e)||!Object(n.i)(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Object(a.d)(t)+")")}),function e(t,r,n,i){var a;var o;var s=t.length;var u=r[n];var c=Math.min(s,u);t.length=u;if(n<r.length-1){var f=n+1;for(a=0;a<c;a++)o=t[a],Array.isArray(o)||(o=[o],t[a]=o),e(o,r,f,i);for(a=c;a<u;a++)o=[],t[a]=o,e(o,r,f,i)}else{for(a=0;a<c;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=c;a<u;a++)t[a]=i}}(e,t,0,void 0!==r?r:0),e}function p(t,r){var e,n=d(t);function i(e){return e.reduce(function(e,t){return e*t})}if(!Array.isArray(t)||!Array.isArray(r))throw new TypeError("Array expected");if(0===r.length)throw new u.a(0,i(s(t)),"!=");for(var a=1,o=0;o<r.length;o++)a*=r[o];if(n.length!==a)throw new u.a(i(r),i(s(t)),"!=");try{e=function(e,t){for(var r,n=e,i=t.length-1;0<i;i--){var a=t[i];r=[];for(var o=n.length/a,s=0;s<o;s++)r.push(n.slice(s*a,(s+1)*a));n=r}return n}(n,r)}catch(e){if(e instanceof u.a)throw new u.a(i(r),i(s(t)),"!=");throw e}return e}function m(e,t){for(var r=t||s(e);Array.isArray(e)&&1===e.length;)e=e[0],r.shift();for(var n=r.length;1===r[n-1];)n--;return n<r.length&&(e=function e(t,r,n){var i,a;if(n<r){var o=n+1;for(i=0,a=t.length;i<a;i++)t[i]=e(t[i],r,o)}else for(;Array.isArray(t);)t=t[0];return t}(e,n,0),r.length=n),e}function h(e,t,r,n){var i=n||s(e);if(r)for(var a=0;a<r;a++)e=[e],i.unshift(1);for(e=function e(t,r,n){var i,a;if(Array.isArray(t)){var o=n+1;for(i=0,a=t.length;i<a;i++)t[i]=e(t[i],r,o)}else for(var s=n;s<r;s++)t=[t];return t}(e,t,0);i.length<t;)i.push(1);return e}function d(e){if(!Array.isArray(e))return e;var r=[];return e.forEach(function e(t){Array.isArray(t)?t.forEach(e):r.push(t)}),r}function y(e,t){return Array.prototype.map.call(e,t)}function g(e,t){Array.prototype.forEach.call(e,t)}function v(e,t){if(1!==s(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function b(e,t){if(1!==s(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,function(e){return t.test(e)})}function x(e,t){return Array.prototype.join.call(e,t)}function w(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],r=0;t[0]={value:e[0],identifier:0};for(var n=1;n<e.length;n++)e[n]===e[n-1]?r++:r=0,t.push({value:e[n],identifier:r});return t}function N(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],r=0;r<e.length;r++)t.push(e[r].value);return t}function O(e,t){for(var r,n=0,i=0;i<e.length;i++){var a=e[i],o=Array.isArray(a);if(0===i&&o&&(n=a.length),o&&a.length!==n)return;var s=o?O(a,t):t(a);if(void 0===r)r=s;else if(r!==s)return"mixed"}return r}function M(e){return e[e.length-1]}function E(e){return e.slice(0,e.length-1)}function j(e,t){return-1!==e.indexOf(t)}},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"i",function(){return o}),r.d(t,"e",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"c",function(){return f}),r.d(t,"h",function(){return l}),r.d(t,"k",function(){return p}),r.d(t,"f",function(){return m}),r.d(t,"g",function(){return h}),r.d(t,"j",function(){return d}),r.d(t,"l",function(){return y});var n=r(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var t=a(e);if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return i(e)});if(e instanceof Date)return new Date(e.valueOf());if(Object(n.e)(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return o(e,i)}function o(e,t){var r={};for(var n in e)m(e,n)&&(r[n]=t(e[n]));return r}function s(e,t){for(var r in t)m(t,r)&&(e[r]=t[r]);return e}function u(e,t){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(var r in t)if(m(t,r))if(t[r]&&t[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r]&&e[r].constructor===Object?u(e[r],t[r]):e[r]=t[r];else{if(Array.isArray(t[r]))throw new TypeError("Arrays are not supported by deepExtend");e[r]=t[r]}return e}function c(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(n=0,i=e.length;n<i;n++)if(!c(e[n],t[n]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t&&c(e[r],t[r])))return!1;for(r in t)if(!(r in e&&c(e[r],t[r])))return!1;return!0}return e===t}function f(e){var t={};return function e(t,r){for(var n in t)if(m(t,n)){var i=t[n];"object"===a(i)&&null!==i?e(i,r):r[n]=i}}(e,t),t}function l(e,t,r){var n,i=!0;Object.defineProperty(e,t,{get:function(){return i&&(n=r(),i=!1),n},set:function(e){n=e,i=!1},configurable:!0,enumerable:!0})}function p(e,t){if(t&&"string"==typeof t)return p(e,t.split("."));var r=e;if(t)for(var n=0;n<t.length;n++){var i=t[n];i in r||(r[i]={}),r=r[i]}return r}function m(e,t){return e&&Object.hasOwnProperty.call(e,t)}function h(e){return e&&"function"==typeof e.factory}function d(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],a=e[i];void 0!==a&&(r[i]=a)}return r}function y(t){return Object.keys(t).map(function(e){return t[e]})}},function(e,t,r){"use strict";r.d(t,"i",function(){return n}),r.d(t,"n",function(){return i}),r.d(t,"l",function(){return o}),r.d(t,"j",function(){return s}),r.d(t,"k",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"g",function(){return f}),r.d(t,"h",function(){return l}),r.d(t,"q",function(){return h}),r.d(t,"f",function(){return b}),r.d(t,"m",function(){return w}),r.d(t,"a",function(){return N}),r.d(t,"b",function(){return O}),r.d(t,"c",function(){return M}),r.d(t,"e",function(){return E}),r.d(t,"o",function(){return j}),r.d(t,"p",function(){return S});var a=r(3),p=r(1);function n(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var i=Math.sign||function(e){return 0<e?1:e<0?-1:0},o=Math.log2||function(e){return Math.log(e)/Math.LN2},s=Math.log10||function(e){return Math.log(e)/Math.LN10},u=Math.log1p||function(e){return Math.log(e+1)},c=Math.cbrt||function(e){if(0===e)return e;var t,r=e<0;return r&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,r?-t:t},f=Math.expm1||function(e){return 2e-4<=e||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function l(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r,n="auto";switch(t&&(t.notation&&(n=t.notation),Object(p.y)(t)?r=t:Object(p.y)(t.precision)&&(r=t.precision)),n){case"fixed":return h(e,r);case"exponential":return d(e,r);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=g(m(e),t),n=r.exponent,i=r.coefficients,a=n%3==0?n:n<0?n-3-n%3:n-n%3;if(Object(p.y)(t))for(;t>i.length||n-a+1>i.length;)i.push(0);else for(var o=0<=n?n:Math.abs(a);i.length-1<o;)i.push(0);var s=Math.abs(n-a),u=1;for(;0<s;)u++,s--;var c=i.slice(u).join(""),f=Object(p.y)(t)&&c.length||c.match(/[1-9]/)?"."+c:"",l=i.slice(0,u).join("")+f+"e"+(0<=n?"+":"")+a.toString();return r.sign+l}(e,r);case"auto":if(!t||!t.exponential||void 0===t.exponential.lower&&void 0===t.exponential.upper)return y(e,r,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});var i=Object(a.i)(t,function(e){return e});return(i.exponential=void 0)!==t.exponential.lower&&(i.lowerExp=Math.round(Math.log(t.exponential.lower)/Math.LN10)),void 0!==t.exponential.upper&&(i.upperExp=Math.round(Math.log(t.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(t)+" with "+JSON.stringify(i)),y(e,r,i);default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}}function m(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],i=parseFloat(t[4]||"0"),a=n.indexOf(".");i+=-1!==a?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(e){return i-=e.length,""}).replace(/0*$/,"").split("").map(function(e){return parseInt(e)});return 0===o.length&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function h(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=m(e),n="number"==typeof t?g(r,r.exponent+1+t):r,i=n.coefficients,a=n.exponent+1,o=a+(t||0);return i.length<o&&(i=i.concat(v(o-i.length))),a<0&&(i=v(1-a).concat(i),a=1),a<i.length&&i.splice(a,0,0===a?"0.":"."),n.sign+i.join("")}function d(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=m(e),n=t?g(r,t):r,i=n.coefficients,a=n.exponent;i.length<t&&(i=i.concat(v(t-i.length)));var o=i.shift();return n.sign+o+(0<i.length?"."+i.join(""):"")+"e"+(0<=a?"+":"")+a}function y(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=r&&void 0!==r.lowerExp?r.lowerExp:-3,i=r&&void 0!==r.upperExp?r.upperExp:5,a=m(e),o=t?g(a,t):a;if(o.exponent<n||o.exponent>=i)return d(e,t);var s=o.coefficients,u=o.exponent;s.length<t&&(s=s.concat(v(t-s.length))),s=s.concat(v(u-s.length+1+(s.length<t?t-s.length:0)));var c=0<u?u:0;return c<(s=v(-u).concat(s)).length-1&&s.splice(c+1,0,"."),o.sign+s.join("")}function g(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t&&5<=n.splice(t,n.length-t)[0]){var i=t-1;for(n[i]++;10===n[i];)n.pop(),0===i&&(n.unshift(0),r.exponent++,i++),n[--i]++}return r}function v(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function b(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var x=Number.EPSILON||2220446049250313e-31;function w(e,t,r){if(null==r)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var n=Math.abs(e-t);return n<x||n<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}var N=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},O=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},M=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},E=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},j=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},S=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)}},function(e,t,r){"use strict";var n=r(1),i=r(4),c=r(3);function f(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r,n="auto";switch(void 0!==t&&(t.notation&&(n=t.notation),"number"==typeof t?r=t:t.precision&&(r=t.precision)),n){case"fixed":return function(e,t){return e.toFixed(t)}(e,r);case"exponential":return l(e,r);case"engineering":return function(e,t){var r=e.e,n=r%3==0?r:r<0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)),a=i.toPrecision(t);-1!==a.indexOf("e")&&(a=i.toString());return a+"e"+(0<=r?"+":"")+n.toString()}(e,r);case"auto":if(t&&t.exponential&&(void 0!==t.exponential.lower||void 0!==t.exponential.upper)){var i=Object(c.i)(t,function(e){return e});return(i.exponential=void 0)!==t.exponential.lower&&(i.lowerExp=Math.round(Math.log(t.exponential.lower)/Math.LN10)),void 0!==t.exponential.upper&&(i.upperExp=Math.round(Math.log(t.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(t)+" with "+JSON.stringify(i)),f(e,i)}var a=t&&void 0!==t.lowerExp?t.lowerExp:-3,o=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var s=e.toSignificantDigits(r),u=s.e;return(a<=u&&u<o?s.toFixed():l(e,r)).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}}function l(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=e.length-t.length,n=e.length;return e.substring(r,n)===t}function s(t,r){return"number"==typeof t?Object(i.h)(t,r):Object(n.e)(t)?f(t,r):function(e){return e&&"object"===a(e)&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(t)?r&&"decimal"===r.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?function e(t,r){{if(Array.isArray(t)){for(var n="[",i=t.length,a=0;a<i;a++)0!==a&&(n+=", "),n+=e(t[a],r);return n+="]"}return s(t,r)}}(t,r):Object(n.I)(t)?'"'+t+'"':"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"===a(t)?"function"==typeof t.format?t.format(r):t&&t.toString(r)!=={}.toString()?t.toString(r):"{"+Object.keys(t).map(function(e){return'"'+e+'": '+s(t[e],r)}).join(", ")+"}":String(t)}function u(e){for(var t=String(e),r="",n=0;n<t.length;){var i=t.charAt(n);"\\"===i?(r+=i,n++,""!==(i=t.charAt(n))&&-1!=='"\\/bfnrtu'.indexOf(i)||(r+="\\"),r+=i):r+='"'===i?'\\"':i,n++}return'"'+r+'"'}function p(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e,t){if(!Object(n.I)(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Object(n.M)(e)+", index: 0)");if(!Object(n.I)(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Object(n.M)(t)+", index: 1)");return e===t?0:t<e?1:-1}r.d(t,"b",function(){return o}),r.d(t,"d",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"c",function(){return p}),r.d(t,"a",function(){return m})},function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}r.d(t,"a",function(){return n}),(n.prototype=new RangeError).constructor=RangeError,n.prototype.name="DimensionError",n.prototype.isDimensionError=!0},,function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a,n=(a={},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=t.join(", ");a[i]||(a[i]=!0,(n=console).warn.apply(n,["Warning:"].concat(t)))})},function(e,t,r){var o;/**
     * @license Complex.js v2.0.11 11/02/2016
     *
     * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     **/
/**
     * @license Complex.js v2.0.11 11/02/2016
     *
     * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     **/
!function(){"use strict";function n(e){return.5*(Math.exp(e)+Math.exp(-e))}function i(e){return.5*(Math.exp(e)-Math.exp(-e))}function u(){throw SyntaxError("Invalid Param")}function c(e,t){var r=Math.abs(e),n=Math.abs(t);return 0===e?Math.log(n):0===t?Math.log(r):r<3e3&&n<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}var a=function(e,t){var r={re:0,im:0};if(null==e)r.re=r.im=0;else if(void 0!==t)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return f.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return f.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else 2===e.length?(r.re=e[0],r.im=e[1]):u();break;case"string":r.im=r.re=0;var n=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,a=0;null===n&&u();for(var o=0;o<n.length;o++){var s=n[o];" "===s||"\t"===s||"\n"===s||("+"===s?i++:"-"===s?a++:i=a=("i"===s||"I"===s?(i+a===0&&u()," "===n[o+1]||isNaN(n[o+1])?r.im+=parseFloat((a%2?"-":"")+"1"):(r.im+=parseFloat((a%2?"-":"")+n[o+1]),o++)):(i+a!==0&&!isNaN(s)||u(),"i"===n[o+1]||"I"===n[o+1]?(r.im+=parseFloat((a%2?"-":"")+s),o++):r.re+=parseFloat((a%2?"-":"")+s)),0))}0<i+a&&u();break;case"number":r.im=0,r.re=e;break;default:u()}return isNaN(r.re)||isNaN(r.im),r};function f(e,t){if(!(this instanceof f))return new f(e,t);var r=a(e,t);this.re=r.re,this.im=r.im}f.prototype={re:0,im:0,sign:function(){var e=this.abs();return new f(this.re/e,this.im/e)},add:function(e,t){var r=new f(e,t);return this.isInfinite()&&r.isInfinite()?f.NAN:this.isInfinite()||r.isInfinite()?f.INFINITY:new f(this.re+r.re,this.im+r.im)},sub:function(e,t){var r=new f(e,t);return this.isInfinite()&&r.isInfinite()?f.NAN:this.isInfinite()||r.isInfinite()?f.INFINITY:new f(this.re-r.re,this.im-r.im)},mul:function(e,t){var r=new f(e,t);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?f.NAN:this.isInfinite()||r.isInfinite()?f.INFINITY:0===r.im&&0===this.im?new f(this.re*r.re,0):new f(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){var r=new f(e,t);if(this.isZero()&&r.isZero()||this.isInfinite()&&r.isInfinite())return f.NAN;if(this.isInfinite()||r.isZero())return f.INFINITY;if(this.isZero()||r.isInfinite())return f.ZERO;e=this.re,t=this.im;var n,i,a=r.re,o=r.im;return 0===o?new f(e/a,t/a):Math.abs(a)<Math.abs(o)?new f((e*(i=a/o)+t)/(n=a*i+o),(t*i-e)/n):new f((e+t*(i=o/a))/(n=o*i+a),(t-e*i)/n)},pow:function(e,t){var r=new f(e,t);if(e=this.re,t=this.im,r.isZero())return f.ONE;if(0===r.im){if(0===t&&0<=e)return new f(Math.pow(e,r.re),0);if(0===e)switch((r.re%4+4)%4){case 0:return new f(Math.pow(t,r.re),0);case 1:return new f(0,Math.pow(t,r.re));case 2:return new f(-Math.pow(t,r.re),0);case 3:return new f(0,-Math.pow(t,r.re))}}if(0===e&&0===t&&0<r.re&&0<=r.im)return f.ZERO;var n=Math.atan2(t,e),i=c(e,t);return e=Math.exp(r.re*i-r.im*n),t=r.im*i+r.re*n,new f(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,r=this.re,n=this.im,i=this.abs();if(0<=r){if(0===n)return new f(Math.sqrt(r),0);e=.5*Math.sqrt(2*(i+r))}else e=Math.abs(n)/Math.sqrt(2*(i-r));return t=r<=0?.5*Math.sqrt(2*(i-r)):Math.abs(n)/Math.sqrt(2*(i+r)),new f(e,n<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new f(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new f(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||t<e)return Math.cos(e)-1;var r=e*e;return r*(r*(1/24+r*(-1/720+r*(1/40320+r*(-1/3628800+r*(1/4790014600+r*(-1/87178291200+1/20922789888e3*r))))))-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new f(c(e,t),Math.atan2(t,e))},abs:function(){return function(e,t){var r=Math.abs(e),n=Math.abs(t);return r<3e3&&n<3e3?Math.sqrt(r*r+n*n):(n=r<n?(r=n,e/t):t/e,r*Math.sqrt(1+n*n))}(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new f(Math.sin(e)*n(t),Math.cos(e)*i(t))},cos:function(){var e=this.re,t=this.im;return new f(Math.cos(e)*n(t),-Math.sin(e)*i(t))},tan:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)+n(t);return new f(Math.sin(e)/r,i(t)/r)},cot:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)-n(t);return new f(-Math.sin(e)/r,i(t)/r)},sec:function(){var e=this.re,t=this.im,r=.5*n(2*t)+.5*Math.cos(2*e);return new f(Math.cos(e)*n(t)/r,Math.sin(e)*i(t)/r)},csc:function(){var e=this.re,t=this.im,r=.5*n(2*t)-.5*Math.cos(2*e);return new f(Math.sin(e)*n(t)/r,-Math.cos(e)*i(t)/r)},asin:function(){var e=this.re,t=this.im,r=new f(t*t-e*e+1,-2*e*t).sqrt(),n=new f(r.re-t,r.im+e).log();return new f(n.im,-n.re)},acos:function(){var e=this.re,t=this.im,r=new f(t*t-e*e+1,-2*e*t).sqrt(),n=new f(r.re-t,r.im+e).log();return new f(Math.PI/2-n.im,n.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new f(0,1/0);if(-1===t)return new f(0,-1/0)}var r=e*e+(1-t)*(1-t),n=new f((1-t*t-e*e)/r,-2*e/r).log();return new f(-.5*n.im,.5*n.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new f(Math.atan2(1,e),0);var r=e*e+t*t;return 0!=r?new f(e/r,-t/r).atan():new f(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new f(0,1/0);var r=e*e+t*t;return 0!=r?new f(e/r,-t/r).acos():new f(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new f(Math.PI/2,1/0);var r=e*e+t*t;return 0!=r?new f(e/r,-t/r).asin():new f(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new f(i(e)*Math.cos(t),n(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new f(n(e)*Math.cos(t),i(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,r=n(e)+Math.cos(t);return new f(i(e)/r,Math.sin(t)/r)},coth:function(){var e=2*this.re,t=2*this.im,r=n(e)-Math.cos(t);return new f(i(e)/r,-Math.sin(t)/r)},csch:function(){var e=this.re,t=this.im,r=Math.cos(2*t)-n(2*e);return new f(-2*i(e)*Math.cos(t)/r,2*n(e)*Math.sin(t)/r)},sech:function(){var e=this.re,t=this.im,r=Math.cos(2*t)+n(2*e);return new f(2*n(e)*Math.cos(t)/r,-2*i(e)*Math.sin(t)/r)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else{t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,r=1<e&&0===t,n=1-e,i=1+e,a=n*n+t*t,o=0!=a?new f((i*n-t*t)/a,(t*n+i*t)/a):new f(-1!==e?e/0:0,0!==t?t/0:0),s=o.re;return o.re=c(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,r&&(o.im=-o.im),o},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new f(0,Math.PI/2);var r=e*e+t*t;return 0!=r?new f(e/r,-t/r).atanh():new f(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new f(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var r=e*e+t*t;return 0!=r?new f(e/r,-t/r).asinh():new f(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return f.INFINITY;var r=e*e+t*t;return 0!=r?new f(e/r,-t/r).acosh():new f(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var e=this.re,t=this.im,r=e*e+t*t;return new f(e/r,-t/r)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new f(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new f(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new f(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var r=new f(e,t);return Math.abs(r.re-this.re)<=f.EPSILON&&Math.abs(r.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(r+=e),0!==t&&(0!==e?r+=t<0?" - ":" + ":t<0&&(r+="-"),1!==(t=Math.abs(t))&&(r+=t),r+="i"),r||"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return!(0!==this.re&&-0!==this.re||0!==this.im&&-0!==this.im)},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-16,void 0===(o=function(){return f}.apply(t,[]))||(e.exports=o)}()},function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}r.d(t,"a",function(){return n}),(n.prototype=new RangeError).constructor=RangeError,n.prototype.name="IndexError",n.prototype.isIndexError=!0},function(r,i,e){var a;/**
     * @license Fraction.js v4.0.12 09/09/2015
     * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
     *
     * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     **/
/**
     * @license Fraction.js v4.0.12 09/09/2015
     * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
     *
     * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     **/
!function(){"use strict";var d={s:1,n:0,d:1};function e(t){function e(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message}function r(){}return r.prototype=Error.prototype,e.prototype=new r,e}var y=c.DivisionByZero=e("DivisionByZero"),t=c.InvalidParameter=e("InvalidParameter");function g(e,t){return isNaN(e=parseInt(e,10))&&v(),e*t}function v(){throw new t}var n=function(e,t){var r,n=0,i=1,a=1,o=0,s=0,u=0,c=1,f=1,l=0,p=1,m=1,h=1;if(null==e);else if(void 0!==t)a=(n=e)*(i=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(n=e.n,i=e.d,"s"in e&&(n*=e.s)):0 in e?(n=e[0],1 in e&&(i=e[1])):v(),a=n*i;break;case"number":if(e<0&&(e=-(a=e)),e%1==0)n=e;else if(0<e){for(1<=e&&(e/=f=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));p<=1e7&&h<=1e7;){if(e===(r=(l+m)/(p+h))){i=p+h<=1e7?(n=l+m,p+h):p<h?(n=m,h):(n=l,p);break}r<e?(l+=m,p+=h):(m+=l,h+=p),i=1e7<p?(n=m,h):(n=l,p)}n*=f}else(isNaN(e)||isNaN(t))&&(i=n=NaN);break;case"string":if(null===(p=e.match(/\d+|./g))&&v(),"-"===p[l]?(a=-1,l++):"+"===p[l]&&l++,p.length===l+1?s=g(p[l++],a):"."===p[l+1]||"."===p[l]?("."!==p[l]&&(o=g(p[l++],a)),(++l+1===p.length||"("===p[l+1]&&")"===p[l+3]||"'"===p[l+1]&&"'"===p[l+3])&&(s=g(p[l],a),c=Math.pow(10,p[l].length),l++),("("===p[l]&&")"===p[l+2]||"'"===p[l]&&"'"===p[l+2])&&(u=g(p[l+1],a),f=Math.pow(10,p[l+1].length)-1,l+=3)):"/"===p[l+1]||":"===p[l+1]?(s=g(p[l],a),c=g(p[l+2],1),l+=3):"/"===p[l+3]&&" "===p[l+1]&&(o=g(p[l],a),s=g(p[l+2],a),c=g(p[l+4],1),l+=5),p.length<=l){a=n=u+(i=c*f)*o+f*s;break}default:v()}if(0===i)throw new y;d.s=a<0?-1:1,d.n=Math.abs(n),d.d=Math.abs(i)};function u(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function c(e,t){if(!(this instanceof c))return new c(e,t);n(e,t),e=c.REDUCE?u(d.d,d.n):1,this.s=d.s,this.n=d.n/e,this.d=d.d/e}c.REDUCE=1,c.prototype={s:1,n:0,d:1,abs:function(){return new c(this.n,this.d)},neg:function(){return new c(-this.s*this.n,this.d)},add:function(e,t){return n(e,t),new c(this.s*this.n*d.d+d.s*this.d*d.n,this.d*d.d)},sub:function(e,t){return n(e,t),new c(this.s*this.n*d.d-d.s*this.d*d.n,this.d*d.d)},mul:function(e,t){return n(e,t),new c(this.s*d.s*this.n*d.n,this.d*d.d)},div:function(e,t){return n(e,t),new c(this.s*d.s*this.n*d.d,this.d*d.n)},clone:function(){return new c(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new c(NaN):void 0===e?new c(this.s*this.n%this.d,1):(n(e,t),0===d.n&&0===this.d&&c(0,0),new c(this.s*(d.d*this.n)%(d.n*this.d),d.d*this.d))},gcd:function(e,t){return n(e,t),new c(u(d.n,this.n)*u(d.d,this.d),d.d*this.d)},lcm:function(e,t){return n(e,t),0===d.n&&0===this.n?new c:new c(d.n*this.n,u(d.n,this.n)*u(d.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):new c(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):new c(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new c(NaN):new c(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new c(this.s*this.d,this.n)},pow:function(e){return e<0?new c(Math.pow(this.s*this.d,-e),Math.pow(this.n,-e)):new c(Math.pow(this.s*this.n,e),Math.pow(this.d,e))},equals:function(e,t){return n(e,t),this.s*this.n*d.d==d.s*d.n*this.d},compare:function(e,t){n(e,t);var r=this.s*this.n*d.d-d.s*d.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function r(e){return 1===e.length?new c(e[0]):r(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var n=0;n<t.length;n++){var i=r(t.slice(0,n+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return n(e,t),!(!(d.n*this.d)||this.n*d.d%(d.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&0<(t=Math.floor(n/i))&&(r+=t,r+=" ",n%=i),r+=n,r+="/",r+=i),r},toLatex:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&0<(t=Math.floor(n/i))&&(r+=t,n%=i),r+="\\frac{",r+=n,r+="}{",r+=i,r+="}"),r},toContinued:function(){var e,t=this.n,r=this.d,n=[];if(isNaN(this.n)||isNaN(this.d))return n;for(;n.push(Math.floor(t/r)),e=t%r,t=r,r=e,1!==t;);return n},toString:function(e){var t,r=this.n,n=this.d;if(isNaN(r)||isNaN(n))return"NaN";c.REDUCE||(r/=t=u(r,n),n/=t),e=e||15;var i=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var r=10%t,n=1;1!==r;n++)if(r=10*r%t,2e3<n)return 0;return n}(0,n),a=function(e,t,r){for(var n=1,i=function(e,t,r){for(var n=1;0<t;e=e*e%r,t>>=1)1&t&&(n=n*e%r);return n}(10,r,t),a=0;a<300;a++){if(n===i)return a;n=10*n%t,i=10*i%t}return 0}(0,n,i),o=-1===this.s?"-":"";if(o+=r/n|0,r%=n,(r*=10)&&(o+="."),i){for(var s=a;s--;)o+=r/n|0,r%=n,r*=10;o+="(";for(s=i;s--;)o+=r/n|0,r%=n,r*=10;o+=")"}else for(s=e;r&&s--;)o+=r/n|0,r%=n,r*=10;return o}},void 0===(a=function(){return c}.apply(i,[]))||(r.exports=a)}()},function(e,t){e.exports=function t(e,r){"use strict";function n(e){return t.insensitive&&(""+e).toLowerCase()||""+e}var i,a,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,f=/^0/,l=n(e).replace(s,"")||"",p=n(r).replace(s,"")||"",m=l.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=parseInt(l.match(c),16)||1!==m.length&&l.match(u)&&Date.parse(l),y=parseInt(p.match(c),16)||d&&p.match(u)&&Date.parse(p)||null;if(y){if(d<y)return-1;if(y<d)return 1}for(var g=0,v=Math.max(m.length,h.length);g<v;g++){if(i=!(m[g]||"").match(f)&&parseFloat(m[g])||m[g]||0,a=!(h[g]||"").match(f)&&parseFloat(h[g])||h[g]||0,isNaN(i)!==isNaN(a))return isNaN(i)?1:-1;if(typeof i!=typeof a&&(i+="",a+=""),i<a)return-1;if(a<i)return 1}return 0}},function(e,t,r){"use strict";function i(e,t,r,n){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+r+(null!=n?"-"+n:"")+" expected)",this.stack=(new Error).stack}r.d(t,"a",function(){return i}),(i.prototype=new Error).constructor=Error,i.prototype.name="ArgumentsError",i.prototype.isArgumentsError=!0},function(e,t,r){"use strict";var n,i,a;i=[],void 0===(a="function"==typeof(n=function(){function k(){return!0}function re(){return!1}function ne(){}return function e(){var t=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}];var n={name:"any",test:k};var r=[];var i=[];var U={types:t,conversions:i,ignore:r};function u(t){var e=ee(U.types,function(e){return e.name===t});if(e)return e;if("any"===t)return n;var r=ee(U.types,function(e){return e.name.toLowerCase()===t.toLowerCase()});throw new TypeError('Unknown type "'+t+'"'+(r?'. Did you mean "'+r.name+'"?':""))}function c(e){return e===n?999:U.types.indexOf(e)}function p(t){var e=ee(U.types,function(e){return e.test(t)});if(e)return e.name;throw new TypeError("Value has unknown type. Value: "+t)}function a(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof t){r=t.split(",");for(var n=0;n<r.length;n++)r[n]=r[n].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");r=t}var i=r.join(","),a=e.signatures[i];if(a)return a;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+r.join(", ")+"))")}function o(e,t){var r=p(e);if(t===r)return e;for(var n=0;n<U.conversions.length;n++){var i=U.conversions[n];if(i.from===r&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+r+" to "+t)}function L(e){return e.map(function(e){var t=e.types.map(h);return(e.restParam?"...":"")+t.join("|")}).join(",")}function s(e,r){var t=0===e.indexOf("..."),n=t?3<e.length?e.slice(3):"any":e,i=n.split("|").map(M).filter(E).filter(O),a=x(r,i),o=i.map(function(e){var t=u(e);return{name:e,typeIndex:c(t),test:t.test,conversion:null,conversionIndex:-1}}),s=a.map(function(e){var t=u(e.from);return{name:e.from,typeIndex:c(t),test:t.test,conversion:e,conversionIndex:r.indexOf(e)}});return{types:o.concat(s),restParam:t}}function H(e,t,i){var r=[];return""!==e.trim()&&(r=e.split(",").map(M).map(function(e,t,r){var n=s(e,i);if(n.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return n})),r.some(j)?null:{params:r,fn:t}}function $(e){var t=A(e);return!!t&&t.restParam}function f(e){return e.types.some(function(e){return null!=e.conversion})}function G(e){if(e&&0!==e.types.length){if(1===e.types.length)return u(e.types[0].name).test;if(2===e.types.length){var t=u(e.types[0].name).test,r=u(e.types[1].name).test;return function(e){return t(e)||r(e)}}var n=e.types.map(function(e){return u(e.name).test});return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}return k}function Z(e){var r,t,n;if($(e)){var i=(r=S(e).map(G)).length,a=G(A(e)),o=function(e){for(var t=i;t<e.length;t++)if(!a(e[t]))return!1;return!0};return function(e){for(var t=0;t<r.length;t++)if(!r[t](e[t]))return!1;return o(e)&&e.length>=i+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(t=G(e[0]),function(e){return t(e[0])&&1===e.length}):2===e.length?(t=G(e[0]),n=G(e[1]),function(e){return t(e[0])&&n(e[1])&&2===e.length}):(r=e.map(G),function(e){for(var t=0;t<r.length;t++)if(!r[t](e[t]))return!1;return e.length===r.length})}function m(e,t){return t<e.params.length?e.params[t]:$(e.params)?A(e.params):null}function l(e,t,r){var n=m(e,t),i=n?r?n.types.filter(d):n.types:[];return i.map(h)}function h(e){return e.name}function d(e){return null===e.conversion||void 0===e.conversion}function y(e,t){var r=I(te(e,function(e){return l(e,t,!1)}));return-1!==r.indexOf("any")?["any"]:r}function V(e,r,t){var n,i,a,o=e||"unnamed",s=t;for(a=0;a<r.length;a++){var u=s.filter(function(e){var t=G(m(e,a));return(a<e.params.length||$(e.params))&&t(r[a])});if(0===u.length){if(0<(i=y(s,a)).length){var c=p(r[a]);return(n=new TypeError("Unexpected type of argument in function "+o+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+a+")")).data={category:"wrongType",fn:o,index:a,actual:c,expected:i},n}}else s=u}var f=s.map(function(e){return $(e.params)?1/0:e.params.length});if(r.length<Math.min.apply(null,f))return i=y(s,a),(n=new TypeError("Too few arguments in function "+o+" (expected: "+i.join(" or ")+", index: "+r.length+")")).data={category:"tooFewArgs",fn:o,index:r.length,expected:i},n;var l=Math.max.apply(null,f);return r.length>l?(n=new TypeError("Too many arguments in function "+o+" (expected: "+l+", actual: "+r.length+")")).data={category:"tooManyArgs",fn:o,index:r.length,expectedLength:l}:(n=new TypeError('Arguments of type "'+r.join(", ")+'" do not match any of the defined signatures of function '+o+".")).data={category:"mismatch",actual:r.map(p)},n}function g(e){for(var t=999,r=0;r<e.types.length;r++)d(e.types[r])&&(t=Math.min(t,e.types[r].typeIndex));return t}function v(e){for(var t=999,r=0;r<e.types.length;r++)d(e.types[r])||(t=Math.min(t,e.types[r].conversionIndex));return t}function b(e,t){var r;return 0!==(r=e.restParam-t.restParam)?r:0!==(r=f(e)-f(t))?r:0!==(r=g(e)-g(t))?r:v(e)-v(t)}function J(e,t){var r,n,i=Math.min(e.params.length,t.params.length);if(0!==(n=e.params.some(f)-t.params.some(f)))return n;for(r=0;r<i;r++)if(0!==(n=f(e.params[r])-f(t.params[r])))return n;for(r=0;r<i;r++)if(0!==(n=b(e.params[r],t.params[r])))return n;return e.params.length-t.params.length}function x(e,t){var r={};return e.forEach(function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||r[e.from]||(r[e.from]=e)}),Object.keys(r).map(function(e){return r[e]})}function W(e,n){var t=n;if(e.some(f)){var i=$(e),a=e.map(w);t=function(){for(var e=[],t=i?arguments.length-1:arguments.length,r=0;r<t;r++)e[r]=a[r](arguments[r]);return i&&(e[t]=arguments[t].map(a[t])),n.apply(null,e)}}var r=t;if($(e)){var o=e.length-1;r=function(){return t.apply(null,C(arguments,0,o).concat([C(arguments,o)]))}}return r}function w(e){var t,r,n,i,a=[],o=[];switch(e.types.forEach(function(e){e.conversion&&(a.push(u(e.conversion.from).test),o.push(e.conversion.convert))}),o.length){case 0:return function(e){return e};case 1:return t=a[0],n=o[0],function(e){return t(e)?n(e):e};case 2:return t=a[0],r=a[1],n=o[0],i=o[1],function(e){return t(e)?n(e):r(e)?i(e):e};default:return function(e){for(var t=0;t<o.length;t++)if(a[t](e))return o[t](e);return e}}}function Y(e){var r={};return e.forEach(function(t){t.params.some(f)||X(t.params,!0).forEach(function(e){r[L(e)]=t.fn})}),r}function X(e,u){function c(r,t,n){if(t<r.length){var e,i=r[t],a=u?i.types.filter(d):i.types;if(i.restParam){var o=a.filter(d);e=o.length<a.length?[o,a]:[a]}else e=a.map(function(e){return[e]});return te(e,function(e){return c(r,t+1,n.concat([e]))})}var s=n.map(function(e,t){return{types:e,restParam:t===r.length-1&&$(r)}});return[s]}return c(e,0,[])}function Q(e,t){for(var r=Math.max(e.params.length,t.params.length),n=0;n<r;n++){var i=l(e,n,!0),a=l(t,n,!0);if(!_(i,a))return!1}var o=e.params.length,s=t.params.length,u=$(e.params),c=$(t.params);return u?c?o===s:o<=s:c?s<=o:o===s}function N(t,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var n=[];Object.keys(r).map(function(e){return H(e,r[e],U.conversions)}).filter(K).forEach(function(t){var e=ee(n,function(e){return Q(e,t)});if(e)throw new TypeError('Conflicting signatures "'+L(e.params)+'" and "'+L(t.params)+'".');n.push(t)});var i=te(n,function(t){var e=t?X(t.params,!1):[];return e.map(function(e){return{params:e,fn:t.fn}})}).filter(K);i.sort(J);var e=i[0]&&i[0].params.length<=2&&!$(i[0].params),a=i[1]&&i[1].params.length<=2&&!$(i[1].params),o=i[2]&&i[2].params.length<=2&&!$(i[2].params),s=i[3]&&i[3].params.length<=2&&!$(i[3].params),u=i[4]&&i[4].params.length<=2&&!$(i[4].params),c=i[5]&&i[5].params.length<=2&&!$(i[5].params),f=e&&a&&o&&s&&u&&c,l=i.map(function(e){return Z(e.params)}),p=e?G(i[0].params[0]):re,m=a?G(i[1].params[0]):re,h=o?G(i[2].params[0]):re,d=s?G(i[3].params[0]):re,y=u?G(i[4].params[0]):re,g=c?G(i[5].params[0]):re,v=e?G(i[0].params[1]):re,b=a?G(i[1].params[1]):re,x=o?G(i[2].params[1]):re,w=s?G(i[3].params[1]):re,N=u?G(i[4].params[1]):re,O=c?G(i[5].params[1]):re,M=i.map(function(e){return W(e.params,e.fn)}),E=e?M[0]:ne,j=a?M[1]:ne,S=o?M[2]:ne,A=s?M[3]:ne,C=u?M[4]:ne,T=c?M[5]:ne,_=e?i[0].params.length:-1,I=a?i[1].params.length:-1,B=o?i[2].params.length:-1,q=s?i[3].params.length:-1,k=u?i[4].params.length:-1,z=c?i[5].params.length:-1,D=f?6:0,R=i.length,P=function(){for(var e=D;e<R;e++)if(l[e](arguments))return M[e].apply(null,arguments);throw V(t,arguments,i)},F=function(e,t){return arguments.length===_&&p(e)&&v(t)?E.apply(null,arguments):arguments.length===I&&m(e)&&b(t)?j.apply(null,arguments):arguments.length===B&&h(e)&&x(t)?S.apply(null,arguments):arguments.length===q&&d(e)&&w(t)?A.apply(null,arguments):arguments.length===k&&y(e)&&N(t)?C.apply(null,arguments):arguments.length===z&&g(e)&&O(t)?T.apply(null,arguments):P.apply(null,arguments)};try{Object.defineProperty(F,"name",{value:t})}catch(e){}return F.signatures=Y(i),F}function O(e){return-1===U.ignore.indexOf(e)}function M(e){return e.trim()}function E(e){return!!e}function K(e){return null!==e}function j(e){return 0===e.types.length}function S(e){return e.slice(0,e.length-1)}function A(e){return e[e.length-1]}function C(e,t,r){return Array.prototype.slice.call(e,t,r)}function T(e,t){return-1!==e.indexOf(t)}function _(e,t){for(var r=0;r<e.length;r++)if(T(t,e[r]))return!0;return!1}function ee(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]}function I(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return Object.keys(t)}function te(e,t){return Array.prototype.concat.apply([],e.map(t))}function B(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(("object"==typeof n.signatures||"string"==typeof n.signature)&&""!==n.name)if(""===t)t=n.name;else if(t!==n.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+n.name+")");throw i.data={actual:n.name,expected:t},i}}return t}function q(e){var r,n={};function t(e,t){if(n.hasOwnProperty(e)&&t!==n[e])throw(r=new Error('Signature "'+e+'" is defined twice')).data={signature:e},r}for(var i=0;i<e.length;i++){var a=e[i];if("object"==typeof a.signatures)for(var o in a.signatures)a.signatures.hasOwnProperty(o)&&(t(o,a.signatures[o]),n[o]=a.signatures[o]);else{if("string"!=typeof a.signature)throw(r=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},r;t(a.signature,a),n[a.signature]=a}}return n}U=N("typed",{"string, Object":N,Object:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);var n=B(t);return N(n,e)},"...Function":function(e){return N(B(e),q(e))},"string, ...Function":function(e,t){return N(e,q(t))}});U.create=e;U.types=t;U.conversions=i;U.ignore=r;U.convert=o;U.find=a;U.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var r=0;r<U.types.length;r++)if("Object"===U.types[r].name)return void U.types.splice(r,0,e);U.types.push(e)};U.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");U.conversions.push(e)};return U}()})?n.apply(t,i):n)||(e.exports=a)},function(m,e,t){"use strict";(function(e){var s=256,i=[],a=void 0===e?window:e,o=Math.pow(s,6),u=Math.pow(2,52),c=2*u,t=Math.random;function f(e){var t,r=e.length,o=this,n=0,i=o.i=o.j=0,a=o.S=[];for(r||(e=[r++]);n<s;)a[n]=n++;for(n=0;n<s;n++)a[n]=a[i=255&i+e[n%r]+(t=a[n])],a[i]=t;(o.g=function(e){for(var t,r=0,n=o.i,i=o.j,a=o.S;e--;)t=a[n=255&n+1],r=r*s+a[255&(a[n]=a[i=255&i+t])+(a[i]=t)];return o.i=n,o.j=i,r})(s)}function l(e,t){for(var r,n=e+"",i=0;i<n.length;)t[255&i]=255&(r^=19*t[255&i])+n.charCodeAt(i++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}m.exports=function(e,t){if(t&&!0===t.global)return t.global=!1,Math.random=m.exports(e,t),t.global=!0,Math.random;var r=[],n=(l(function e(t,r){var n,i=[],a=(typeof t)[0];if(r&&"o"==a)for(n in t)try{i.push(e(t[n],r-1))}catch(e){}return i.length?i:"s"==a?t:t+"\0"}(t&&t.entropy||!1?[e,p(i)]:0 in arguments?e:function(e){try{return a.crypto.getRandomValues(e=new Uint8Array(s)),p(e)}catch(e){return[+new Date,a,a.navigator&&a.navigator.plugins,a.screen,p(i)]}}(),3),r),new f(r));return l(p(n.S),i),function(){for(var e=n.g(6),t=o,r=0;e<u;)e=(e+r)*s,t*=s,r=n.g(1);for(;c<=e;)e/=2,t/=2,r>>>=1;return(e+r)/t}},m.exports.resetGlobal=function(){Math.random=t},l(Math.random(),i)}).call(this,t(20))},function(t,De,Re){var Pe;!function(){"use strict";var l,T,o,s=9e15,d=1e9,y="0123456789abcdef",n="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",i="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",u={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-s,maxE:s,crypto:!1},b=!0,c="[DecimalError] ",g=c+"Invalid argument: ",a=c+"Precision limit exceeded",f=c+"crypto unavailable",_=Math.floor,v=Math.pow,p=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,m=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,h=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,x=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,I=1e7,B=7,w=n.length-1,N=i.length-1,O={name:"[object Decimal]"};function M(e){var t,r,n,i=e.length-1,a="",o=e[0];if(0<i){for(a+=o,t=1;t<i;t++)n=e[t]+"",(r=B-n.length)&&(a+=L(r)),a+=n;o=e[t],(r=B-(n=o+"").length)&&(a+=L(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return a+o}function E(e,t,r){if(e!==~~e||e<t||r<e)throw Error(g+e)}function j(e,t,r,n){var i,a,o;for(a=e[0];10<=a;a/=10)--t;return--t<0?(t+=B,i=0):(i=Math.ceil((t+1)/B),t%=B),a=v(10,B-t),o=e[i]%a|0,null==n?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),r<4&&99999==o||3<r&&49999==o||5e4==o||0==o):(r<4&&o+1==a||3<r&&o+1==a/2)&&(e[i+1]/a/100|0)==v(10,t-2)-1||(o==a/2||0==o)&&0==(e[i+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),(n||r<4)&&9999==o||!n&&3<r&&4999==o):((n||r<4)&&o+1==a||!n&&3<r&&o+1==a/2)&&(e[i+1]/a/1e3|0)==v(10,t-3)-1}function S(e,t,r){for(var n,i,a=[0],o=0,s=e.length;o<s;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=y.indexOf(e.charAt(o++)),n=0;n<a.length;n++)a[n]>r-1&&(void 0===a[n+1]&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}O.absoluteValue=O.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),D(e)},O.ceil=function(){return D(new this.constructor(this),this.e+1,2)},O.comparedTo=O.cmp=function(e){var t,r,n,i,a=this,o=a.d,s=(e=new a.constructor(e)).d,u=a.s,c=e.s;if(!o||!s)return u&&c?u!==c?u:o===s?0:!o^u<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?u:s[0]?-c:0;if(u!==c)return u;if(a.e!==e.e)return a.e>e.e^u<0?1:-1;for(t=0,r=(n=o.length)<(i=s.length)?n:i;t<r;++t)if(o[t]!==s[t])return o[t]>s[t]^u<0?1:-1;return n===i?0:i<n^u<0?1:-1},O.cosine=O.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+B,n.rounding=1,r=function(e,t){var r,n,i=t.d.length;n=i<32?(r=Math.ceil(i/3),(1/Y(4,r)).toString()):(r=16,"2.3283064365386962890625e-10");e.precision+=r,t=W(e,1,t.times(n),new e(1));for(var a=r;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=r,t}(n,X(n,r)),n.precision=e,n.rounding=t,D(2==o||3==o?r.neg():r,e,t,!0)):new n(1):new n(NaN)},O.cubeRoot=O.cbrt=function(){var e,t,r,n,i,a,o,s,u,c,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(b=!1,(a=f.s*v(f.s*f,1/3))&&Math.abs(a)!=1/0?n=new l(a.toString()):(r=M(f.d),(a=((e=f.e)-r.length+1)%3)&&(r+=1==a||-2==a?"0":"00"),a=v(r,1/3),e=_((e+1)/3)-(e%3==(e<0?-1:2)),(n=new l(r=a==1/0?"5e"+e:(r=a.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=f.s),o=(e=l.precision)+3;;)if(c=(u=(s=n).times(s).times(s)).plus(f),n=A(c.plus(f).times(s),c.plus(u),o+2,1),M(s.d).slice(0,o)===(r=M(n.d)).slice(0,o)){if("9999"!=(r=r.slice(o-3,o+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(D(n,e+1,1),t=!n.times(n).times(n).eq(f));break}if(!i&&(D(s,e+1,0),s.times(s).times(s).eq(f))){n=s;break}o+=4,i=1}return b=!0,D(n,e,l.rounding,t)},O.decimalPlaces=O.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-_(this.e/B))*B,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},O.dividedBy=O.div=function(e){return A(this,new this.constructor(e))},O.dividedToIntegerBy=O.divToInt=function(e){var t=this.constructor;return D(A(this,new t(e),0,1,1),t.precision,t.rounding)},O.equals=O.eq=function(e){return 0===this.cmp(e)},O.floor=function(){return D(new this.constructor(this),this.e+1,3)},O.greaterThan=O.gt=function(e){return 0<this.cmp(e)},O.greaterThanOrEqualTo=O.gte=function(e){var t=this.cmp(e);return 1==t||0===t},O.hyperbolicCosine=O.cosh=function(){var e,t,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,t=(i=a.d.length)<32?(1/Y(4,e=Math.ceil(i/3))).toString():(e=16,"2.3283064365386962890625e-10"),a=W(o,1,a.times(t),new o(1),!0);for(var u,c=e,f=new o(8);c--;)u=a.times(a),a=s.minus(u.times(f.minus(u.times(f))));return D(a,o.precision=r,o.rounding=n,!0)},O.hyperbolicSine=O.sinh=function(){var e,t,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(n=i.d.length)<3)i=W(a,2,i,i,!0);else{e=16<(e=1.4*Math.sqrt(n))?16:0|e,i=W(a,2,i=i.times(1/Y(5,e)),i,!0);for(var o,s=new a(5),u=new a(16),c=new a(20);e--;)o=i.times(i),i=i.times(s.plus(o.times(u.times(o).plus(c))))}return D(i,a.precision=t,a.rounding=r,!0)},O.hyperbolicTangent=O.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,A(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)},O.inverseCosine=O.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),i=r.precision,a=r.rounding;return-1!==n?0===n?t.isNeg()?F(r,i,a):new r(0):new r(NaN):t.isZero()?F(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,t=t.asin(),e=F(r,i+4,a).times(.5),r.precision=i,r.rounding=a,e.minus(t))},O.inverseHyperbolicCosine=O.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,b=!1,r=r.times(r).minus(1).sqrt().plus(r),b=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},O.inverseHyperbolicSine=O.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,b=!1,r=r.times(r).plus(1).sqrt().plus(r),b=!0,n.precision=e,n.rounding=t,r.ln())},O.inverseHyperbolicTangent=O.atanh=function(){var e,t,r,n,i=this,a=i.constructor;return i.isFinite()?0<=i.e?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?D(new a(i),e,t,!0):(a.precision=r=n-i.e,i=A(i.plus(1),new a(1).minus(i),r+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},O.inverseSine=O.asin=function(){var e,t,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),r=a.precision,n=a.rounding,-1!==t?0===t?((e=F(a,r+4,n).times(.5)).s=i.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))},O.inverseTangent=O.atan=function(){var e,t,r,n,i,a,o,s,u,c=this,f=c.constructor,l=f.precision,p=f.rounding;if(c.isFinite()){if(c.isZero())return new f(c);if(c.abs().eq(1)&&l+4<=N)return(o=F(f,l+4,p).times(.25)).s=c.s,o}else{if(!c.s)return new f(NaN);if(l+4<=N)return(o=F(f,l+4,p).times(.5)).s=c.s,o}for(f.precision=s=l+10,f.rounding=1,e=r=Math.min(28,s/B+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(b=!1,t=Math.ceil(s/B),n=1,u=c.times(c),o=new f(c),i=c;-1!==e;)if(i=i.times(u),a=o.minus(i.div(n+=2)),i=i.times(u),void 0!==(o=a.plus(i.div(n+=2))).d[t])for(e=t;o.d[e]===a.d[e]&&e--;);return r&&(o=o.times(2<<r-1)),b=!0,D(o,f.precision=l,f.rounding=p,!0)},O.isFinite=function(){return!!this.d},O.isInteger=O.isInt=function(){return!!this.d&&_(this.e/B)>this.d.length-2},O.isNaN=function(){return!this.s},O.isNegative=O.isNeg=function(){return this.s<0},O.isPositive=O.isPos=function(){return 0<this.s},O.isZero=function(){return!!this.d&&0===this.d[0]},O.lessThan=O.lt=function(e){return this.cmp(e)<0},O.lessThanOrEqualTo=O.lte=function(e){return this.cmp(e)<1},O.logarithm=O.log=function(e){var t,r,n,i,a,o,s,u,c=this,f=c.constructor,l=f.precision,p=f.rounding;if(null==e)e=new f(10),t=!0;else{if(r=(e=new f(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=c.d,c.s<0||!r||!r[0]||c.eq(1))return new f(r&&!r[0]?-1/0:1!=c.s?NaN:r?0:1/0);if(t)if(1<r.length)a=!0;else{for(i=r[0];i%10==0;)i/=10;a=1!==i}if(b=!1,o=Z(c,s=l+5),n=t?P(f,s+10):Z(e,s),j((u=A(o,n,s,1)).d,i=l,p))do{if(o=Z(c,s+=10),n=t?P(f,s+10):Z(e,s),u=A(o,n,s,1),!a){+M(u.d).slice(i+1,i+15)+1==1e14&&(u=D(u,l+1,0));break}}while(j(u.d,i+=10,p));return b=!0,D(u,l,p)},O.minus=O.sub=function(e){var t,r,n,i,a,o,s,u,c,f,l,p,m=this,h=m.constructor;if(e=new h(e),!m.d||!e.d)return m.s&&e.s?m.d?e.s=-e.s:e=new h(e.d||m.s!==e.s?m:NaN):e=new h(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(c=m.d,p=e.d,s=h.precision,u=h.rounding,!c[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!c[0])return new h(3===u?-0:0);e=new h(m)}return b?D(e,s,u):e}if(r=_(e.e/B),f=_(m.e/B),c=c.slice(),a=f-r){for(o=(l=a<0)?(t=c,a=-a,p.length):(t=p,r=f,c.length),(n=Math.max(Math.ceil(s/B),o)+2)<a&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for((l=(n=c.length)<(o=p.length))&&(o=n),n=0;n<o;n++)if(c[n]!=p[n]){l=c[n]<p[n];break}a=0}for(l&&(t=c,c=p,p=t,e.s=-e.s),o=c.length,n=p.length-o;0<n;--n)c[o++]=0;for(n=p.length;a<n;){if(c[--n]<p[n]){for(i=n;i&&0===c[--i];)c[i]=I-1;--c[i],c[n]+=I}c[n]-=p[n]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(e.d=c,e.e=R(c,r),b?D(e,s,u):e):new h(3===u?-0:0)},O.modulo=O.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?D(new n(r),n.precision,n.rounding):(b=!1,9==n.modulo?(t=A(r,e.abs(),0,3,1)).s*=e.s:t=A(r,e,0,n.modulo,1),t=t.times(e),b=!0,r.minus(t))},O.naturalExponential=O.exp=function(){return G(this)},O.naturalLogarithm=O.ln=function(){return Z(this)},O.negated=O.neg=function(){var e=new this.constructor(this);return e.s=-e.s,D(e)},O.plus=O.add=function(e){var t,r,n,i,a,o,s,u,c,f,l=this,p=l.constructor;if(e=new p(e),!l.d||!e.d)return l.s&&e.s?l.d||(e=new p(e.d||l.s===e.s?l:NaN)):e=new p(NaN),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(c=l.d,f=e.d,s=p.precision,u=p.rounding,!c[0]||!f[0])return f[0]||(e=new p(l)),b?D(e,s,u):e;if(a=_(l.e/B),n=_(e.e/B),c=c.slice(),i=a-n){for((o=(o=i<0?(r=c,i=-i,f.length):(r=f,n=a,c.length))<(a=Math.ceil(s/B))?a+1:o+1)<i&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=c.length)-(i=f.length)<0&&(i=o,r=f,f=c,c=r),t=0;i;)t=(c[--i]=c[i]+f[i]+t)/I|0,c[i]%=I;for(t&&(c.unshift(t),++n),o=c.length;0==c[--o];)c.pop();return e.d=c,e.e=R(c,n),b?D(e,s,u):e},O.precision=O.sd=function(e){var t;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return this.d?(t=U(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},O.round=function(){var e=this.constructor;return D(new e(this),this.e+1,e.rounding)},O.sine=O.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+B,n.rounding=1,r=function(e,t){var r,n=t.d.length;if(n<3)return W(e,2,t,t);r=16<(r=1.4*Math.sqrt(n))?16:0|r,t=t.times(1/Y(5,r)),t=W(e,2,t,t);for(var i,a=new e(5),o=new e(16),s=new e(20);r--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(s))));return t}(n,X(n,r)),n.precision=e,n.rounding=t,D(2<o?r.neg():r,e,t,!0)):new n(NaN)},O.squareRoot=O.sqrt=function(){var e,t,r,n,i,a,o=this,s=o.d,u=o.e,c=o.s,f=o.constructor;if(1!==c||!s||!s[0])return new f(!c||c<0&&(!s||s[0])?NaN:s?o:1/0);for(b=!1,n=0==(c=Math.sqrt(+o))||c==1/0?(((t=M(s)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=_((u+1)/2)-(u<0||u%2),new f(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):new f(c.toString()),r=(u=f.precision)+3;;)if(n=(a=n).plus(A(o,a,r+2,1)).times(.5),M(a.d).slice(0,r)===(t=M(n.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(D(n,u+1,1),e=!n.times(n).eq(o));break}if(!i&&(D(a,u+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}return b=!0,D(n,u,f.rounding,e)},O.tangent=O.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(r=r.sin()).s=1,r=A(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,D(2==o||4==o?r.neg():r,e,t,!0)):new n(NaN)},O.times=O.mul=function(e){var t,r,n,i,a,o,s,u,c,f=this.constructor,l=this.d,p=(e=new f(e)).d;if(e.s*=this.s,!(l&&l[0]&&p&&p[0]))return new f(!e.s||l&&!l[0]&&!p||p&&!p[0]&&!l?NaN:l&&p?0*e.s:e.s/0);for(r=_(this.e/B)+_(e.e/B),(u=l.length)<(c=p.length)&&(a=l,l=p,p=a,o=u,u=c,c=o),a=[],n=o=u+c;n--;)a.push(0);for(n=c;0<=--n;){for(t=0,i=u+n;n<i;)s=a[i]+p[n]*l[i-n-1]+t,a[i--]=s%I|0,t=s/I|0;a[i]=(a[i]+t)%I|0}for(;!a[--o];)a.pop();return t?++r:a.shift(),e.d=a,e.e=R(a,r),b?D(e,f.precision,f.rounding):e},O.toBinary=function(e,t){return r(this,2,e,t)},O.toDecimalPlaces=O.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(E(e,0,d),void 0===t?t=n.rounding:E(t,0,8),D(r,e+r.e+1,t))},O.toExponential=function(e,t){var r,n=this,i=n.constructor;return r=void 0===e?C(n,!0):(E(e,0,d),void 0===t?t=i.rounding:E(t,0,8),C(n=D(new i(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},O.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return r=void 0===e?C(i):(E(e,0,d),void 0===t?t=a.rounding:E(t,0,8),C(n=D(new a(i),e+i.e+1,t),!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},O.toFraction=function(e){var t,r,n,i,a,o,s,u,c,f,l,p,m=this,h=m.d,d=m.constructor;if(!h)return new d(m);if(c=r=new d(1),o=(a=(t=new d(n=u=new d(0))).e=U(h)-m.e-1)%B,t.d[0]=v(10,o<0?B+o:o),null==e)e=0<a?t:c;else{if(!(s=new d(e)).isInt()||s.lt(c))throw Error(g+s);e=s.gt(t)?0<a?t:c:s}for(b=!1,s=new d(M(h)),f=d.precision,d.precision=a=h.length*B*2;l=A(s,t,0,1,1),1!=(i=r.plus(l.times(n))).cmp(e);)r=n,n=i,i=c,c=u.plus(l.times(i)),u=i,i=t,t=s.minus(l.times(i)),s=i;return i=A(e.minus(r),n,0,1,1),u=u.plus(i.times(c)),r=r.plus(i.times(n)),u.s=c.s=m.s,p=A(c,n,a,1).minus(m).abs().cmp(A(u,r,a,1).minus(m).abs())<1?[c,n]:[u,r],d.precision=f,b=!0,p},O.toHexadecimal=O.toHex=function(e,t){return r(this,16,e,t)},O.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:E(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(b=!1,r=A(r,e,0,t,1).times(e),b=!0,D(r)):(e.s=r.s,r=e),r},O.toNumber=function(){return+this},O.toOctal=function(e,t){return r(this,8,e,t)},O.toPower=O.pow=function(e){var t,r,n,i,a,o,s=this,u=s.constructor,c=+(e=new u(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new u(v(+s,c));if((s=new u(s)).eq(1))return s;if(n=u.precision,a=u.rounding,e.eq(1))return D(s,n,a);if((t=_(e.e/B))>=e.d.length-1&&(r=c<0?-c:c)<=9007199254740991)return i=H(u,s,r,n),e.s<0?new u(1).div(i):D(i,n,a);if((o=s.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(r=v(+s,c))&&isFinite(r)?new u(r+"").e:_(c*(Math.log("0."+M(s.d))/Math.LN10+s.e+1)))>u.maxE+1||t<u.minE-1?new u(0<t?o/0:0):(b=!1,u.rounding=s.s=1,r=Math.min(12,(t+"").length),(i=G(e.times(Z(s,n+r)),n)).d&&j((i=D(i,n+5,1)).d,n,a)&&(t=n+10,+M((i=D(G(e.times(Z(s,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=D(i,n+1,0))),i.s=o,b=!0,D(i,n,u.rounding=a))},O.toPrecision=function(e,t){var r,n=this,i=n.constructor;return r=void 0===e?C(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(E(e,1,d),void 0===t?t=i.rounding:E(t,0,8),C(n=D(new i(n),e,t),e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},O.toSignificantDigits=O.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(E(e,1,d),void 0===t?t=r.rounding:E(t,0,8)),D(new r(this),e,t)},O.toString=function(){var e=this,t=e.constructor,r=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r},O.truncated=O.trunc=function(){return D(new this.constructor(this),this.e+1,1)},O.valueOf=O.toJSON=function(){var e=this,t=e.constructor,r=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};var A=function(e,t,r,n,i,a){var o,s,u,c,f,l,p,m,h,d,y,g,v,b,x,w,N,O,M,E,j=e.constructor,S=e.s==t.s?1:-1,A=e.d,C=t.d;if(!(A&&A[0]&&C&&C[0]))return new j(e.s&&t.s&&(A?!C||A[0]!=C[0]:C)?A&&0==A[0]||!C?0*S:S/0:NaN);for(s=a?(f=1,e.e-t.e):(a=I,f=B,_(e.e/f)-_(t.e/f)),M=C.length,N=A.length,d=(h=new j(S)).d=[],u=0;C[u]==(A[u]||0);u++);if(C[u]>(A[u]||0)&&s--,null==r?(b=r=j.precision,n=j.rounding):b=i?r+(e.e-t.e)+1:r,b<0)d.push(1),l=!0;else{if(b=b/f+2|0,u=0,1==M){for(C=C[c=0],b++;(u<N||c)&&b--;u++)x=c*a+(A[u]||0),d[u]=x/C|0,c=x%C|0;l=c||u<N}else{for(1<(c=a/(C[0]+1)|0)&&(C=q(C,c,a),A=q(A,c,a),M=C.length,N=A.length),w=M,g=(y=A.slice(0,M)).length;g<M;)y[g++]=0;for((E=C.slice()).unshift(0),O=C[0],C[1]>=a/2&&++O;c=0,(o=k(C,y,M,g))<0?(v=y[0],M!=g&&(v=v*a+(y[1]||0)),1<(c=v/O|0)?(a<=c&&(c=a-1),1==(o=k(p=q(C,c,a),y,m=p.length,g=y.length))&&(c--,z(p,M<m?E:C,m,a))):(0==c&&(o=c=1),p=C.slice()),(m=p.length)<g&&p.unshift(0),z(y,p,g,a),-1==o&&(o=k(C,y,M,g=y.length))<1&&(c++,z(y,M<g?E:C,g,a)),g=y.length):0===o&&(c++,y=[0]),d[u++]=c,o&&y[0]?y[g++]=A[w]||0:(y=[A[w]],g=1),(w++<N||void 0!==y[0])&&b--;);l=void 0!==y[0]}d[0]||d.shift()}if(1==f)h.e=s,T=l;else{for(u=1,c=d[0];10<=c;c/=10)u++;h.e=u+s*f-1,D(h,i?r+h.e+1:r,n,l)}return h};function q(e,t,r){var n,i=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+i,e[a]=n%r|0,i=n/r|0;return i&&e.unshift(i),e}function k(e,t,r,n){var i,a;if(r!=n)a=n<r?1:-1;else for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function z(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&1<e.length;)e.shift()}function D(e,t,r,n){var i,a,o,s,u,c,f,l,p,m=e.constructor;e:if(null!=t){if(!(l=e.d))return e;for(i=1,s=l[0];10<=s;s/=10)i++;if((a=t-i)<0)a+=B,o=t,u=(f=l[p=0])/v(10,i-o-1)%10|0;else if(p=Math.ceil((a+1)/B),(s=l.length)<=p){if(!n)break e;for(;s++<=p;)l.push(0);f=u=0,o=(a%=B)-B+(i=1)}else{for(f=s=l[p],i=1;10<=s;s/=10)i++;u=(o=(a%=B)-B+i)<0?0:f/v(10,i-o-1)%10|0}if(n=n||t<0||void 0!==l[p+1]||(o<0?f:f%v(10,i-o-1)),c=r<4?(u||n)&&(0==r||r==(e.s<0?3:2)):5<u||5==u&&(4==r||n||6==r&&(0<a?0<o?f/v(10,i-o):0:l[p-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,c?(t-=e.e+1,l[0]=v(10,(B-t%B)%B),e.e=-t||0):l[0]=e.e=0,e;if(0==a?(l.length=p,s=1,p--):(l.length=p+1,s=v(10,B-a),l[p]=0<o?(f/v(10,i-o)%v(10,o)|0)*s:0),c)for(;;){if(0==p){for(a=1,o=l[0];10<=o;o/=10)a++;for(o=l[0]+=s,s=1;10<=o;o/=10)s++;a!=s&&(e.e++,l[0]==I&&(l[0]=1));break}if(l[p]+=s,l[p]!=I)break;l[p--]=0,s=1}for(a=l.length;0===l[--a];)l.pop()}return b&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function C(e,t,r){if(!e.isFinite())return V(e);var n,i=e.e,a=M(e.d),o=a.length;return t?(r&&0<(n=r-o)?a=a.charAt(0)+"."+a.slice(1)+L(n):1<o&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+L(-i-1)+a,r&&0<(n=r-o)&&(a+=L(n))):o<=i?(a+=L(i+1-o),r&&0<(n=r-i-1)&&(a=a+"."+L(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&0<(n=r-o)&&(i+1===o&&(a+="."),a+=L(n))),a}function R(e,t){var r=e[0];for(t*=B;10<=r;r/=10)t++;return t}function P(e,t,r){if(w<t)throw b=!0,r&&(e.precision=r),Error(a);return D(new e(n),t,1,!0)}function F(e,t,r){if(N<t)throw Error(a);return D(new e(i),t,r,!0)}function U(e){var t=e.length-1,r=t*B+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];10<=t;t/=10)r++}return r}function L(e){for(var t="";e--;)t+="0";return t}function H(e,t,r,n){var i,a=new e(1),o=Math.ceil(n/B+4);for(b=!1;;){if(r%2&&Q((a=a.times(t)).d,o)&&(i=!0),0===(r=_(r/2))){r=a.d.length-1,i&&0===a.d[r]&&++a.d[r];break}Q((t=t.times(t)).d,o)}return b=!0,a}function $(e){return 1&e.d[e.d.length-1]}function e(e,t,r){for(var n,i=new e(t[0]),a=0;++a<t.length;){if(!(n=new e(t[a])).s){i=n;break}i[r](n)&&(i=n)}return i}function G(e,t){var r,n,i,a,o,s,u,c=0,f=0,l=0,p=e.constructor,m=p.rounding,h=p.precision;if(!e.d||!e.d[0]||17<e.e)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(u=null==t?(b=!1,h):t,s=new p(.03125);-2<e.e;)e=e.times(s),l+=5;for(u+=n=Math.log(v(2,l))/Math.LN10*2+5|0,r=a=o=new p(1),p.precision=u;;){if(a=D(a.times(e),u,1),r=r.times(++f),M((s=o.plus(A(a,r,u,1))).d).slice(0,u)===M(o.d).slice(0,u)){for(i=l;i--;)o=D(o.times(o),u,1);if(null!=t)return p.precision=h,o;if(!(c<3&&j(o.d,u-n,m,c)))return D(o,p.precision=h,m,b=!0);p.precision=u+=10,r=a=s=new p(1),f=0,c++}o=s}}function Z(e,t){var r,n,i,a,o,s,u,c,f,l,p,m=1,h=e,d=h.d,y=h.constructor,g=y.rounding,v=y.precision;if(h.s<0||!d||!d[0]||!h.e&&1==d[0]&&1==d.length)return new y(d&&!d[0]?-1/0:1!=h.s?NaN:d?0:h);if(f=null==t?(b=!1,v):t,y.precision=f+=10,n=(r=M(d)).charAt(0),!(Math.abs(a=h.e)<15e14))return c=P(y,f+2,v).times(a+""),h=Z(new y(n+"."+r.slice(1)),f-10).plus(c),y.precision=v,null==t?D(h,v,g,b=!0):h;for(;n<7&&1!=n||1==n&&3<r.charAt(1);)n=(r=M((h=h.times(e)).d)).charAt(0),m++;for(a=h.e,1<n?(h=new y("0."+r),a++):h=new y(n+"."+r.slice(1)),u=o=h=A((l=h).minus(1),h.plus(1),f,1),p=D(h.times(h),f,1),i=3;;){if(o=D(o.times(p),f,1),M((c=u.plus(A(o,new y(i),f,1))).d).slice(0,f)===M(u.d).slice(0,f)){if(u=u.times(2),0!==a&&(u=u.plus(P(y,f+2,v).times(a+""))),u=A(u,new y(m),f,1),null!=t)return y.precision=v,u;if(!j(u.d,f-10,g,s))return D(u,y.precision=v,g,b=!0);y.precision=f+=10,c=o=h=A(l.minus(1),l.plus(1),f,1),p=D(h.times(h),f,1),i=s=1}u=c,i+=2}}function V(e){return String(e.s*e.s/0)}function J(e,t){var r,n,i;for(-1<(r=t.indexOf("."))&&(t=t.replace(".","")),0<(n=t.search(/e/i))?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(n,i)){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%B,r<0&&(n+=B),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=B;n<i;)e.d.push(+t.slice(n,n+=B));t=t.slice(n),n=B-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),b&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function W(e,t,r,n,i){var a,o,s,u,c=e.precision,f=Math.ceil(c/B);for(b=!1,u=r.times(r),s=new e(n);;){if(o=A(s.times(u),new e(t++*t++),c,1),s=i?n.plus(o):n.minus(o),n=A(o.times(u),new e(t++*t++),c,1),void 0!==(o=s.plus(n)).d[f]){for(a=f;o.d[a]===s.d[a]&&a--;);if(-1==a)break}a=s,s=n,n=o,o=a,0}return b=!0,o.d.length=f+1,o}function Y(e,t){for(var r=e;--t;)r*=e;return r}function X(e,t){var r,n=t.s<0,i=F(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return o=n?4:1,t;if((r=t.divToInt(i)).isZero())o=n?3:2;else{if((t=t.minus(r.times(i))).lte(a))return o=$(r)?n?2:3:n?4:1,t;o=$(r)?n?1:4:n?3:2}return t.minus(i).abs()}function r(e,t,r,n){var i,a,o,s,u,c,f,l,p,m=e.constructor,h=void 0!==r;if(h?(E(r,1,d),void 0===n?n=m.rounding:E(n,0,8)):(r=m.precision,n=m.rounding),e.isFinite()){for(h?(i=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):i=t,0<=(o=(f=C(e)).indexOf("."))&&(f=f.replace(".",""),(p=new m(1)).e=f.length-o,p.d=S(C(p),10,i),p.e=p.d.length),a=u=(l=S(f,10,i)).length;0==l[--u];)l.pop();if(l[0]){if(o<0?a--:((e=new m(e)).d=l,e.e=a,l=(e=A(e,p,r,n,0,i)).d,a=e.e,c=T),o=l[r],s=i/2,c=c||void 0!==l[r+1],c=n<4?(void 0!==o||c)&&(0===n||n===(e.s<0?3:2)):s<o||o===s&&(4===n||c||6===n&&1&l[r-1]||n===(e.s<0?8:7)),l.length=r,c)for(;++l[--r]>i-1;)l[r]=0,r||(++a,l.unshift(1));for(u=l.length;!l[u-1];--u);for(o=0,f="";o<u;o++)f+=y.charAt(l[o]);if(h){if(1<u)if(16==t||8==t){for(o=16==t?4:3,--u;u%o;u++)f+="0";for(u=(l=S(f,i,t)).length;!l[u-1];--u);for(o=1,f="1.";o<u;o++)f+=y.charAt(l[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>u)for(a-=u;a--;)f+="0";else a<u&&(f=f.slice(0,a)+"."+f.slice(a))}else f=h?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=V(e);return e.s<0?"-"+f:f}function Q(e,t){if(e.length>t)return e.length=t,!0}function K(e){return new this(e).abs()}function ee(e){return new this(e).acos()}function te(e){return new this(e).acosh()}function re(e,t){return new this(e).plus(t)}function ne(e){return new this(e).asin()}function ie(e){return new this(e).asinh()}function ae(e){return new this(e).atan()}function oe(e){return new this(e).atanh()}function se(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,a=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?F(this,n,i):new this(0)).s=e.s:!e.d||t.isZero()?(r=F(this,a,1).times(.5)).s=e.s:r=t.s<0?(this.precision=a,this.rounding=1,r=this.atan(A(e,t,a,1)),t=F(this,a,1),this.precision=n,this.rounding=i,e.s<0?r.minus(t):r.plus(t)):this.atan(A(e,t,a,1)):(r=F(this,a,1).times(0<t.s?.25:.75)).s=e.s:r=new this(NaN),r}function ue(e){return new this(e).cbrt()}function ce(e){return D(e=new this(e),e.e+1,2)}function fe(e){if(!e||"object"!=typeof e)throw Error(c+"Object expected");var t,r,n,i=!0===e.defaults,a=["precision",1,d,"rounding",0,8,"toExpNeg",-s,0,"toExpPos",0,s,"maxE",0,s,"minE",-s,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(r=a[t],i&&(this[r]=u[r]),void 0!==(n=e[r])){if(!(_(n)===n&&a[t+1]<=n&&n<=a[t+2]))throw Error(g+r+": "+n);this[r]=n}if(r="crypto",i&&(this[r]=u[r]),void 0!==(n=e[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(g+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(f);this[r]=!0}else this[r]=!1}return this}function le(e){return new this(e).cos()}function pe(e){return new this(e).cosh()}function me(e,t){return new this(e).div(t)}function he(e){return new this(e).exp()}function de(e){return D(e=new this(e),e.e+1,3)}function ye(){var e,t,r=new this(0);for(b=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return b=!0,new this(1/0);r=t}return b=!0,r.sqrt()}function ge(e){return e instanceof l||e&&"[object Decimal]"===e.name||!1}function ve(e){return new this(e).ln()}function be(e,t){return new this(e).log(t)}function xe(e){return new this(e).log(2)}function we(e){return new this(e).log(10)}function Ne(){return e(this,arguments,"lt")}function Oe(){return e(this,arguments,"gt")}function Me(e,t){return new this(e).mod(t)}function Ee(e,t){return new this(e).mul(t)}function je(e,t){return new this(e).pow(t)}function Se(e){var t,r,n,i,a=0,o=new this(1),s=[];if(void 0===e?e=this.precision:E(e,1,d),n=Math.ceil(e/B),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)429e7<=(i=t[a])?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(f);for(t=crypto.randomBytes(n*=4);a<n;)214e7<=(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))?crypto.randomBytes(4).copy(t,a):(s.push(i%1e7),a+=4);a=n/4}else for(;a<n;)s[a++]=1e7*Math.random()|0;for(n=s[--a],e%=B,n&&e&&(i=v(10,B-e),s[a]=(n/i|0)*i);0===s[a];a--)s.pop();if(a<0)s=[r=0];else{for(r=-1;0===s[0];r-=B)s.shift();for(n=1,i=s[0];10<=i;i/=10)n++;n<B&&(r-=B-n)}return o.e=r,o.d=s,o}function Ae(e){return D(e=new this(e),e.e+1,this.rounding)}function Ce(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Te(e){return new this(e).sin()}function _e(e){return new this(e).sinh()}function Ie(e){return new this(e).sqrt()}function Be(e,t){return new this(e).sub(t)}function qe(e){return new this(e).tan()}function ke(e){return new this(e).tanh()}function ze(e){return D(e=new this(e),e.e+1,1)}(l=function e(t){var r,n,i;function a(e){var t,r,n,i=this;if(!(i instanceof a))return new a(e);if(e instanceof(i.constructor=a))return i.s=e.s,void(b?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(n=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(i.s=e<0?(e=-e,-1):1,e===~~e&&e<1e7){for(t=0,r=e;10<=r;r/=10)t++;return void(b?a.maxE<t?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):J(i,e.toString())}if("string"!=n)throw Error(g+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===r&&(e=e.slice(1)),i.s=1),x.test(e)?J(i,e):function(e,t){var r,n,i,a,o,s,u,c,f;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(m.test(t))r=16,t=t.toLowerCase();else if(p.test(t))r=2;else{if(!h.test(t))throw Error(g+t);r=8}for(o=0<=(a=(t=0<(a=t.search(/p/i))?(u=+t.slice(a+1),t.substring(2,a)):t.slice(2)).indexOf(".")),n=e.constructor,o&&(a=(s=(t=t.replace(".","")).length)-a,i=H(n,new n(r),a,2*a)),a=f=(c=S(t,r,I)).length-1;0===c[a];--a)c.pop();return a<0?new n(0*e.s):(e.e=R(c,f),e.d=c,b=!1,o&&(e=A(e,i,4*s)),u&&(e=e.times(Math.abs(u)<54?v(2,u):l.pow(2,u))),b=!0,e)}(i,e)}if(a.prototype=O,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=fe,a.clone=e,a.isDecimal=ge,a.abs=K,a.acos=ee,a.acosh=te,a.add=re,a.asin=ne,a.asinh=ie,a.atan=ae,a.atanh=oe,a.atan2=se,a.cbrt=ue,a.ceil=ce,a.cos=le,a.cosh=pe,a.div=me,a.exp=he,a.floor=de,a.hypot=ye,a.ln=ve,a.log=be,a.log10=we,a.log2=xe,a.max=Ne,a.min=Oe,a.mod=Me,a.mul=Ee,a.pow=je,a.random=Se,a.round=Ae,a.sign=Ce,a.sin=Te,a.sinh=_e,a.sqrt=Ie,a.sub=Be,a.tan=qe,a.tanh=ke,a.trunc=ze,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return a.config(t),a}(u)).default=l.Decimal=l,n=new l(n),i=new l(i),void 0===(Pe=function(){return l}.call(De,Re,De,t))||(t.exports=Pe)}()},function(e,t,r){"use strict";function l(e,t){return p({},e,t)}var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},h={"":"\\--","":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"};e.exports=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.preserveFormatting,n=void 0!==r&&r,i=t.escapeMapFn,a=void 0===i?l:i,o=String(e),s="",u=a(p({},m),n?p({},h):{}),c=Object.keys(u),f=function(){var r=!1;c.forEach(function(e,t){r||o.length>=e.length&&o.slice(0,e.length)===e&&(s+=u[c[t]],o=o.slice(e.length,o.length),r=!0)}),r||(s+=o.slice(0,1),o=o.slice(1,o.length))};o;)f();return s}},function(e,t){function r(){}r.prototype={on:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var n=this;function i(){n.off(e,i),t.apply(r,arguments)}return i._=t,this.on(e,i,r)},emit:function(e){for(var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=r.length;n<i;n++)r[n].fn.apply(r[n].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),n=r[e],i=[];if(n&&t)for(var a=0,o=n.length;a<o;a++)n[a].fn!==t&&n[a].fn._!==t&&i.push(n[a]);return i.length?r[e]=i:delete r[e],this}},e.exports=r,e.exports.TinyEmitter=r},function(e,t,r){var n=r(21),i=(0,r(22).create)(n);e.exports=i},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.r(t);var ie=r(1),n=r(14),i=r.n(n),j=r(4),s=r(0),o=function(){return o=i.a.create,i.a},a=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],u=Object(s.a)("typed",a,function(e){var r=e.BigNumber,n=e.Complex,t=e.DenseMatrix,i=e.Fraction,a=o();return a.types=[{name:"number",test:ie.y},{name:"Complex",test:ie.j},{name:"BigNumber",test:ie.e},{name:"Fraction",test:ie.o},{name:"Unit",test:ie.L},{name:"string",test:ie.I},{name:"Chain",test:ie.h},{name:"Array",test:ie.b},{name:"Matrix",test:ie.v},{name:"DenseMatrix",test:ie.n},{name:"SparseMatrix",test:ie.H},{name:"Range",test:ie.D},{name:"Index",test:ie.t},{name:"boolean",test:ie.g},{name:"ResultSet",test:ie.G},{name:"Help",test:ie.s},{name:"function",test:ie.p},{name:"Date",test:ie.m},{name:"RegExp",test:ie.F},{name:"null",test:ie.x},{name:"undefined",test:ie.K},{name:"AccessorNode",test:ie.a},{name:"ArrayNode",test:ie.c},{name:"AssignmentNode",test:ie.d},{name:"BlockNode",test:ie.f},{name:"ConditionalNode",test:ie.k},{name:"ConstantNode",test:ie.l},{name:"FunctionNode",test:ie.r},{name:"FunctionAssignmentNode",test:ie.q},{name:"IndexNode",test:ie.u},{name:"Node",test:ie.w},{name:"ObjectNode",test:ie.A},{name:"OperatorNode",test:ie.B},{name:"ParenthesisNode",test:ie.C},{name:"RangeNode",test:ie.E},{name:"SymbolNode",test:ie.J},{name:"Object",test:ie.z}],a.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(r||c(e),15<Object(j.f)(e))throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new r(e)}},{from:"number",to:"Complex",convert:function(e){return n||f(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||f(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||f(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||l(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(t){r||c(t);try{return new r(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){i||l(t);try{return new i(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){n||f(t);try{return new n(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return r||c(e),new r(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||l(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return t||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new t(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],a});function c(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function f(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function l(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var p=[],m=Object(s.a)("ResultSet",p,function(){function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0}),h=r(16),d=r.n(h),y=["?on","config"],g=Object(s.a)("BigNumber",y,function(e){var t=e.on,r=e.config,n=d.a.clone({precision:r.precision});return n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(e){return new n(e.value)},t&&t("config",function(e,t){e.precision!==t.precision&&n.config({precision:e.precision})}),n},{isClass:!0}),v=r(9),b=r.n(v);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w=[],N=Object(s.a)("Complex",w,function(){return b.a.prototype.type="Complex",b.a.prototype.isComplex=!0,b.a.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},b.a.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},b.a.prototype.format=function(e){var t=this.im,r=this.re,n=Object(j.h)(this.re,e),i=Object(j.h)(this.im,e),a=Object(ie.y)(e)?e:e?e.precision:null;if(null!==a){var o=Math.pow(10,-a);Math.abs(r/t)<o&&(r=0),Math.abs(t/r)<o&&(t=0)}return 0===t?n:0===r?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?n+" - i":n+" - "+i.substring(1)+"i":1===t?n+" + i":n+" + "+i+"i"},b.a.fromPolar=function(e){switch(arguments.length){case 1:var t=e;if("object"===x(t))return b()(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=e,n=arguments[1];if(Object(ie.y)(r)){if(Object(ie.L)(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Object(ie.y)(n))return new b.a({r:r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},b.a.prototype.valueOf=b.a.prototype.toString,b.a.fromJSON=function(e){return new b.a(e)},b.a.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},b.a},{isClass:!0}),O=r(11),M=r.n(O),E=[],S=Object(s.a)("Fraction",E,function(){return M.a.prototype.type="Fraction",M.a.prototype.isFraction=!0,M.a.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},M.a.fromJSON=function(e){return new M.a(e)},M.a},{isClass:!0}),A=[],C=Object(s.a)("Range",A,function(){function o(e,t,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");var n=null!=e,i=null!=t,a=null!=r;if(n)if(Object(ie.e)(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(i)if(Object(ie.e)(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter end must be a number");if(a)if(Object(ie.e)(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=n?parseFloat(e):0,this.end=i?parseFloat(t):0,this.step=a?parseFloat(r):1}return o.prototype.type="Range",o.prototype.isRange=!0,o.parse=function(e){if("string"!=typeof e)return null;var t=e.split(":").map(function(e){return parseFloat(e)});if(t.some(function(e){return isNaN(e)}))return null;switch(t.length){case 2:return new o(t[0],t[1]);case 3:return new o(t[0],t[2],t[1]);default:return null}},o.prototype.clone=function(){return new o(this.start,this.end,this.step)},o.prototype.size=function(){var e=0,t=this.start,r=this.step,n=this.end-t;return Object(j.n)(r)===Object(j.n)(n)?e=Math.ceil(n/r):0==n&&(e=0),isNaN(e)&&(e=0),[e]},o.prototype.min=function(){var e=this.size()[0];return 0<e?0<this.step?this.start:this.start+(e-1)*this.step:void 0},o.prototype.max=function(){var e=this.size()[0];return 0<e?0<this.step?this.start+(e-1)*this.step:this.start:void 0},o.prototype.forEach=function(e){var t=this.start,r=this.step,n=this.end,i=0;if(0<r)for(;t<n;)e(t,[i],this),t+=r,i++;else if(r<0)for(;n<t;)e(t,[i],this),t+=r,i++},o.prototype.map=function(n){var i=[];return this.forEach(function(e,t,r){i[t[0]]=n(e,t,r)}),i},o.prototype.toArray=function(){var r=[];return this.forEach(function(e,t){r[t[0]]=e}),r},o.prototype.valueOf=function(){return this.toArray()},o.prototype.format=function(e){var t=Object(j.h)(this.start,e);return 1!==this.step&&(t+=":"+Object(j.h)(this.step,e)),t+=":"+Object(j.h)(this.end,e)},o.prototype.toString=function(){return this.format()},o.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},o.fromJSON=function(e){return new o(e.start,e.end,e.step)},o},{isClass:!0}),T=[],_=Object(s.a)("Matrix",T,function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.storage=function(e){throw new Error("Matrix.storage is deprecated since v6.0.0. Use the factory function math.matrix instead.")},e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0}),I=r(2),J=r(5),ae=r(3),D=r(6),B=["Matrix"],q=Object(s.a)("DenseMatrix",B,function(e){var t=e.Matrix;function m(e,t){if(!(this instanceof m))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Object(ie.I)(t))throw new Error("Invalid datatype: "+t);if(Object(ie.v)(e))"DenseMatrix"===e.type?(this._data=Object(ae.a)(e._data),this._size=Object(ae.a)(e._size)):(this._data=e.toArray(),this._size=e.size()),this._datatype=t||e._datatype;else if(e&&Object(ie.b)(e.data)&&Object(ie.b)(e.size))this._data=e.data,this._size=e.size,this._datatype=t||e.datatype;else if(Object(ie.b)(e))this._data=function e(t){for(var r=0,n=t.length;r<n;r++){var i=t[r];Object(ie.b)(i)?t[r]=e(i):i&&!0===i.isMatrix&&(t[r]=e(i.valueOf()))}return t}(e),this._size=Object(I.a)(this._data),Object(I.r)(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+Object(ie.M)(e)+")");this._data=[],this._size=[0],this._datatype=t}}function s(e,t,r){if(0!==t.length)return e._size=t.slice(0),e._data=Object(I.o)(e._data,e._size,r),e;for(var n=e._data;Object(ie.b)(n);)n=n[0];return n}function l(e,t,r){for(var n=e._size.slice(0),i=!1;n.length<t.length;)n.push(0),i=!0;for(var a=0,o=t.length;a<o;a++)t[a]>n[a]&&(n[a]=t[a],i=!0);i&&s(e,n,r)}return(m.prototype=new t).createDenseMatrix=function(e,t){return new m(e,t)},m.prototype.type="DenseMatrix",m.prototype.isDenseMatrix=!0,m.prototype.getDataType=function(){return Object(I.h)(this._data,ie.M)},m.prototype.storage=function(){return"dense"},m.prototype.datatype=function(){return this._datatype},m.prototype.create=function(e,t){return new m(e,t)},m.prototype.subset=function(e,t,r){switch(arguments.length){case 1:return function(e,t){if(!Object(ie.t)(t))throw new TypeError("Invalid index");{if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new D.a(r.length,e._size.length);for(var n=t.min(),i=t.max(),a=0,o=e._size.length;a<o;a++)Object(I.s)(n[a],e._size[a]),Object(I.s)(i[a],e._size[a]);return new m(function r(n,i,a,o){var e=o===a-1;var t=i.dimension(o);return e?t.map(function(e){return Object(I.s)(e,n.length),n[e]}).valueOf():t.map(function(e){Object(I.s)(e,n.length);var t=n[e];return r(t,i,a,o+1)}).valueOf()}(e._data,t,r.length,0),e._datatype)}}(this,e);case 2:case 3:return function(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),o=t.isScalar();Object(ie.v)(r)?(i=r.size(),r=r.valueOf()):i=Object(I.a)(r);if(o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),r,n)}else{if(a.length<e._size.length)throw new D.a(a.length,e._size.length,"<");if(i.length<a.length){for(var s=0,u=0;1===a[s]&&1===i[s];)s++;for(;1===a[s];)u++,s++;r=Object(I.q)(r,a.length,u,i)}if(!Object(ae.d)(a,i))throw new D.a(a,i,">");var c=t.max().map(function(e){return e+1});l(e,c,n);var f=a.length;!function r(n,i,a,o,s){var e=s===o-1;var t=i.dimension(s);e?t.forEach(function(e,t){Object(I.s)(e),n[e]=a[t[0]]}):t.forEach(function(e,t){Object(I.s)(e),r(n[e],i,a[t[0]],o,s+1)})}(e._data,t,r,f,0)}return e}(this,e,t,r);default:throw new SyntaxError("Wrong number of arguments")}},m.prototype.get=function(e){if(!Object(ie.b)(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new D.a(e.length,this._size.length);for(var t=0;t<e.length;t++)Object(I.s)(e[t],this._size[t]);for(var r=this._data,n=0,i=e.length;n<i;n++){var a=e[n];Object(I.s)(a,r.length),r=r[a]}return r},m.prototype.set=function(e,t,r){if(!Object(ie.b)(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new D.a(e.length,this._size.length,"<");var n,i,a;l(this,e.map(function(e){return e+1}),r);var o=this._data;for(n=0,i=e.length-1;n<i;n++)a=e[n],Object(I.s)(a,o.length),o=o[a];return a=e[e.length-1],Object(I.s)(a,o.length),o[a]=t,this},m.prototype.resize=function(e,t,r){if(!Object(ie.b)(e))throw new TypeError("Array expected");return s(r?this.clone():this,e,t)},m.prototype.reshape=function(e,t){var r=t?this.clone():this;return r._data=Object(I.n)(r._data,e),r._size=e.slice(0),r},m.prototype.clone=function(){return new m({data:Object(ae.a)(this._data),size:Object(ae.a)(this._size),datatype:this._datatype})},m.prototype.size=function(){return this._size.slice(0)},m.prototype.map=function(t){var i=this;return new m({data:function r(e,n){return Object(ie.b)(e)?e.map(function(e,t){return r(e,n.concat(t))}):t(e,n,i)}(this._data,[]),size:Object(ae.a)(this._size),datatype:this._datatype})},m.prototype.forEach=function(t){var i=this;!function r(e,n){Object(ie.b)(e)?e.forEach(function(e,t){r(e,n.concat(t))}):t(e,n,i)}(this._data,[])},m.prototype.toArray=function(){return Object(ae.a)(this._data)},m.prototype.valueOf=function(){return this._data},m.prototype.format=function(e){return Object(J.d)(this._data,e)},m.prototype.toString=function(){return Object(J.d)(this._data)},m.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},m.prototype.diagonal=function(e){if(e){if(Object(ie.e)(e)&&(e=e.toNumber()),!Object(ie.y)(e)||!Object(j.i)(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=0<e?e:0,r=e<0?-e:0,n=this._size[0],i=this._size[1],a=Math.min(n-r,i-t),o=[],s=0;s<a;s++)o[s]=this._data[s+r][s+t];return new m({data:o,size:[a],datatype:this._datatype})},m.diagonal=function(e,t,r,n){if(!Object(ie.b)(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(Object(ie.e)(e)&&(e=e.toNumber()),!Object(ie.y)(e)||!Object(j.i)(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(Object(ie.e)(r)&&(r=r.toNumber()),!Object(ie.y)(r)||!Object(j.i)(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var i,a=0<r?r:0,o=r<0?-r:0,s=e[0],u=e[1],c=Math.min(s-o,u-a);if(Object(ie.b)(t)){if(t.length!==c)throw new Error("Invalid value array length");i=function(e){return t[e]}}else if(Object(ie.v)(t)){var f=t.size();if(1!==f.length||f[0]!==c)throw new Error("Invalid matrix length");i=function(e){return t.get([e])}}else i=function(){return t};n=n||(Object(ie.e)(i(0))?i(0).mul(0):0);var l=[];if(0<e.length){l=Object(I.o)(l,e,n);for(var p=0;p<c;p++)l[p+o][p+a]=i(p)}return new m({data:l,size:[s,u]})},m.fromJSON=function(e){return new m(e)},m.prototype.swapRows=function(e,t){if(!(Object(ie.y)(e)&&Object(j.i)(e)&&Object(ie.y)(t)&&Object(j.i)(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Object(I.s)(e,this._size[0]),Object(I.s)(t,this._size[0]),m._swapRows(e,t,this._data),this},m._swapRows=function(e,t,r){var n=r[e];r[e]=r[t],r[t]=n},m},{isClass:!0}),k=["typed"],z=Object(s.a)("clone",k,function(e){return(0,e.typed)("clone",{any:ae.a})}),R=r(10);function P(e){for(var t=0;t<e.length;t++)if(Object(ie.i)(e[t]))return!0;return!1}function F(e,t){Object(ie.v)(e)&&(e=e.valueOf());for(var r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?F(i,t):t(i)}}function oe(e,t,r){return e&&"function"==typeof e.map?e.map(function(e){return oe(e,t,r)}):t(e)}function U(e,t,r){var n=Array.isArray(e)?Object(I.a)(e):e.size();if(t<0||t>=n.length)throw new R.a(t,n.length);return Object(ie.v)(e)?e.create(L(e.valueOf(),t,r)):L(e,t,r)}function L(e,t,r){var n,i,a,o;if(t<=0){if(Array.isArray(e[0])){for(o=function(e){var t,r,n=e.length,i=e[0].length,a=[];for(r=0;r<i;r++){var o=[];for(t=0;t<n;t++)o.push(e[t][r]);a.push(o)}return a}(e),i=[],n=0;n<o.length;n++)i[n]=L(o[n],t-1,r);return i}for(a=e[0],n=1;n<e.length;n++)a=r(a,e[n]);return a}for(i=[],n=0;n<e.length;n++)i[n]=L(e[n],t-1,r);return i}function H(e,t,r,n,i,a,o,s,u,c,f){var l,p,m,h,d=e._values,y=e._index,g=e._ptr,v=o._index;if(n)for(p=g[t],m=g[t+1],l=p;l<m;l++)r[h=y[l]]!==a?(r[h]=a,v.push(h),c?(n[h]=u?s(d[l],f):s(f,d[l]),i[h]=a):n[h]=d[l]):(n[h]=u?s(d[l],n[h]):s(n[h],d[l]),i[h]=a);else for(p=g[t],m=g[t+1],l=p;l<m;l++)r[h=y[l]]!==a?(r[h]=a,v.push(h)):i[h]=a}var $="isInteger",G=["typed"],Z=Object(s.a)($,G,function(e){var t=(0,e.typed)($,{number:j.i,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":function(e){return oe(e,t)}});return t}),V="number";function W(e){return e<0}function Y(e){return 0<e}function X(e){return 0===e}function Q(e){return Number.isNaN(e)}Q.signature=X.signature=Y.signature=W.signature=V;var K="isNegative",ee=["typed"],te=Object(s.a)(K,ee,function(e){var t=(0,e.typed)(K,{number:W,BigNumber:function(e){return e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s<0},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return oe(e,t)}});return t}),re="isNumeric",ne=["typed"],se=Object(s.a)(re,ne,function(e){var t=(0,e.typed)(re,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(e){return oe(e,t)}});return t}),ue="hasNumericValue",ce=["typed","isNumeric"],fe=Object(s.a)(ue,ce,function(e){var t=e.typed,r=e.isNumeric;return t(ue,{string:function(e){return 0<e.trim().length&&!isNaN(Number(e))},any:function(e){return r(e)}})}),le="isPositive",pe=["typed"],me=Object(s.a)(le,pe,function(e){var t=(0,e.typed)(le,{number:Y,BigNumber:function(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return 0<e.s&&0<e.n},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return oe(e,t)}});return t}),he=["typed"],de=Object(s.a)("isZero",he,function(e){var t=(0,e.typed)("isZero",{number:X,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return oe(e,t)}});return t}),ye=["typed"],ge=Object(s.a)("isNaN",ye,function(e){return(0,e.typed)("isNaN",{number:Q,BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":function(e){return oe(e,Number.isNaN)}})}),ve=r(8),be=["typed"],xe=Object(s.a)("typeOf",be,function(e){return(0,e.typed)("typeOf",{any:ie.M})}),we=Object(s.a)("typeof",[],function(){return function(){Object(ve.a)('Function "typeof" has been renamed to "typeOf" in v6.0.0, please use the new function instead.');for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ie.M.apply(ie.M,t)}});function Ne(e,t,r){if(null==r)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var n=e.minus(t).abs();if(n.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return n.lte(i.times(r))}return!1}var Oe="equalScalar",Me=["typed","config"],Ee=Object(s.a)(Oe,Me,function(e){var t=e.typed,r=e.config,n=t(Oe,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return Object(j.m)(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||Ne(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,r){return Object(j.m)(e.re,t.re,r)&&Object(j.m)(e.im,t.im,r)}(e,t,r.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return n(e.value,t.value)}});return n}),je=(Object(s.a)(Oe,["typed","config"],function(e){var t=e.typed,r=e.config;return t(Oe,{"number, number":function(e,t){return Object(j.m)(e,t,r.epsilon)}})}),["typed","equalScalar","Matrix"]),Se=Object(s.a)("SparseMatrix",je,function(e){var O=e.typed,M=e.equalScalar,t=e.Matrix;function E(e,t){if(!(this instanceof E))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Object(ie.I)(t))throw new Error("Invalid datatype: "+t);if(Object(ie.v)(e))!function(e,t,r){"SparseMatrix"===t.type?(e._values=t._values?Object(ae.a)(t._values):void 0,e._index=Object(ae.a)(t._index),e._ptr=Object(ae.a)(t._ptr),e._size=Object(ae.a)(t._size),e._datatype=r||t._datatype):n(e,t.valueOf(),r||t._datatype)}(this,e,t);else if(e&&Object(ie.b)(e.index)&&Object(ie.b)(e.ptr)&&Object(ie.b)(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(Object(ie.b)(e))n(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+Object(ie.M)(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function n(e,t,r){e._values=[],e._index=[],e._ptr=[],e._datatype=r;var n=t.length,i=0,a=M,o=0;if(Object(ie.I)(r)&&(a=O.find(M,[r,r])||M,o=O.convert(0,r)),0<n){var s=0;do{e._ptr.push(e._index.length);for(var u=0;u<n;u++){var c=t[u];if(Object(ie.b)(c)){if(0===s&&i<c.length&&(i=c.length),s<c.length){var f=c[s];a(f,o)||(e._values.push(f),e._index.push(u))}}else 0===s&&i<1&&(i=1),a(c,o)||(e._values.push(c),e._index.push(u))}s++}while(s<i)}e._ptr.push(e._index.length),e._size=[n,i]}function g(e,t,r,n){if(r-t==0)return r;for(var i=t;i<r;i++)if(n[i]===e)return i;return t}function v(e,t,r,n,i,a,o){i.splice(e,0,n),a.splice(e,0,t);for(var s=r+1;s<o.length;s++)o[s]++}function f(e,t,r,n){var i=n||0,a=M,o=0;Object(ie.I)(e._datatype)&&(a=O.find(M,[e._datatype,e._datatype])||M,o=O.convert(0,e._datatype),i=O.convert(i,e._datatype));var s,u,c,f=!a(i,o),l=e._size[0],p=e._size[1];if(p<r){for(u=p;u<r;u++)if(e._ptr[u]=e._values.length,f)for(s=0;s<l;s++)e._values.push(i),e._index.push(s);e._ptr[r]=e._values.length}else r<p&&(e._ptr.splice(r+1,p-r),e._values.splice(e._ptr[r],e._values.length),e._index.splice(e._ptr[r],e._index.length));if(p=r,l<t){if(f){var m=0;for(u=0;u<p;u++){e._ptr[u]=e._ptr[u]+m,c=e._ptr[u+1]+m;var h=0;for(s=l;s<t;s++,h++)e._values.splice(c+h,0,i),e._index.splice(c+h,0,s),m++}e._ptr[p]=e._values.length}}else if(t<l){var d=0;for(u=0;u<p;u++){e._ptr[u]=e._ptr[u]-d;var y=e._ptr[u],g=e._ptr[u+1]-d;for(c=y;c<g;c++)t-1<(s=e._index[c])&&(e._values.splice(c,1),e._index.splice(c,1),d++)}e._ptr[u]=e._values.length}return e._size[0]=t,e._size[1]=r,e}function r(e,t,r,n,i){var a,o,s=n[0],u=n[1],c=[];for(a=0;a<s;a++)for(c[a]=[],o=0;o<u;o++)c[a][o]=0;for(o=0;o<u;o++)for(var f=r[o],l=r[o+1],p=f;p<l;p++)c[a=t[p]][o]=e?i?Object(ae.a)(e[p]):e[p]:1;return c}return(E.prototype=new t).createSparseMatrix=function(e,t){return new E(e,t)},E.prototype.type="SparseMatrix",E.prototype.isSparseMatrix=!0,E.prototype.getDataType=function(){return Object(I.h)(this._values,ie.M)},E.prototype.storage=function(){return"sparse"},E.prototype.datatype=function(){return this._datatype},E.prototype.create=function(e,t){return new E(e,t)},E.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},E.prototype.subset=function(e,t,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(e,t){if(!Object(ie.t)(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r,n,i,a,o=t.size();if(o.length!==e._size.length)throw new D.a(o.length,e._size.length);var s=t.min(),u=t.max();for(r=0,n=e._size.length;r<n;r++)Object(I.s)(s[r],e._size[r]),Object(I.s)(u[r],e._size[r]);var c=e._values,f=e._index,l=e._ptr,p=t.dimension(0),m=t.dimension(1),h=[],d=[];p.forEach(function(e,t){d[e]=t[0],h[e]=!0});var y=c?[]:void 0,g=[],v=[];return m.forEach(function(e){for(v.push(g.length),i=l[e],a=l[e+1];i<a;i++)r=f[i],!0===h[r]&&(g.push(d[r]),y&&y.push(c[i]))}),v.push(g.length),new E({values:y,index:g,ptr:v,size:o,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),o=t.isScalar();Object(ie.v)(r)?(i=r.size(),r=r.toArray()):i=Object(I.a)(r);if(o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),r,n)}else{if(1!==a.length&&2!==a.length)throw new D.a(a.length,e._size.length,"<");if(i.length<a.length){for(var s=0,u=0;1===a[s]&&1===i[s];)s++;for(;1===a[s];)u++,s++;r=Object(I.q)(r,a.length,u,i)}if(!Object(ae.d)(a,i))throw new D.a(a,i,">");for(var c=t.min()[0],f=t.min()[1],l=i[0],p=i[1],m=0;m<l;m++)for(var h=0;h<p;h++){var d=r[m][h];e.set([m+c,h+f],d,n)}}return e}(this,e,t,r);default:throw new SyntaxError("Wrong number of arguments")}},E.prototype.get=function(e){if(!Object(ie.b)(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new D.a(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],r=e[1];Object(I.s)(t,this._size[0]),Object(I.s)(r,this._size[1]);var n=g(t,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===t?this._values[n]:0},E.prototype.set=function(e,t,r){if(!Object(ie.b)(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new D.a(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var n=e[0],i=e[1],a=this._size[0],o=this._size[1],s=M,u=0;Object(ie.I)(this._datatype)&&(s=O.find(M,[this._datatype,this._datatype])||M,u=O.convert(0,this._datatype)),(a-1<n||o-1<i)&&(f(this,Math.max(n+1,a),Math.max(i+1,o),r),a=this._size[0],o=this._size[1]),Object(I.s)(n,a),Object(I.s)(i,o);var c=g(n,this._ptr[i],this._ptr[i+1],this._index);return c<this._ptr[i+1]&&this._index[c]===n?s(t,u)?function(e,t,r,n,i){r.splice(e,1),n.splice(e,1);for(var a=t+1;a<i.length;a++)i[a]--}(c,i,this._values,this._index,this._ptr):this._values[c]=t:v(c,n,i,t,this._values,this._index,this._ptr),this},E.prototype.resize=function(t,e,r){if(!Object(ie.b)(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");return t.forEach(function(e){if(!Object(ie.y)(e)||!Object(j.i)(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Object(J.d)(t)+")")}),f(r?this.clone():this,t[0],t[1],e)},E.prototype.reshape=function(t,e){if(!Object(ie.b)(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach(function(e){if(!Object(ie.y)(e)||!Object(j.i)(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Object(J.d)(t)+")")}),this._size[0]*this._size[1]!=t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return r;for(var n=[],i=0;i<r._ptr.length;i++)for(var a=0;a<r._ptr[i+1]-r._ptr[i];a++)n.push(i);for(var o=r._values.slice(),s=r._index.slice(),u=0;u<r._index.length;u++){var c=s[u],f=n[u],l=c*r._size[1]+f;n[u]=l%t[1],s[u]=Math.floor(l/t[1])}r._values.length=0,r._index.length=0,r._ptr.length=t[1]+1,r._size=t.slice();for(var p=0;p<r._ptr.length;p++)r._ptr[p]=0;for(var m=0;m<o.length;m++){var h=s[m],d=n[m],y=o[m];v(g(h,r._ptr[d],r._ptr[d+1],r._index),h,d,y,r._values,r._index,r._ptr)}return r},E.prototype.clone=function(){return new E({values:this._values?Object(ae.a)(this._values):void 0,index:Object(ae.a)(this._index),ptr:Object(ae.a)(this._ptr),size:Object(ae.a)(this._size),datatype:this._datatype})},E.prototype.size=function(){return this._size.slice(0)},E.prototype.map=function(n,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var i=this;return function(e,t,r,n,i,a,o){var s=[],u=[],c=[],f=M,l=0;Object(ie.I)(e._datatype)&&(f=O.find(M,[e._datatype,e._datatype])||M,l=O.convert(0,e._datatype));for(var p=function(e,t,r){e=a(e,t,r),f(e,l)||(s.push(e),u.push(t))},m=n;m<=i;m++){c.push(s.length);var h=e._ptr[m],d=e._ptr[m+1];if(o)for(var y=h;y<d;y++){var g=e._index[y];t<=g&&g<=r&&p(e._values[y],g-t,m-n)}else{for(var v={},b=h;b<d;b++){var x=e._index[b];v[x]=e._values[b]}for(var w=t;w<=r;w++){var N=w in v?v[w]:0;p(N,w-t,m-n)}}}return c.push(s.length),new E({values:s,index:u,ptr:c,size:[r-t+1,i-n+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(e,t,r){return n(e,[t,r],i)},e)},E.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],n=this._size[1],i=0;i<n;i++){var a=this._ptr[i],o=this._ptr[i+1];if(t)for(var s=a;s<o;s++){var u=this._index[s];e(this._values[s],[u,i],this)}else{for(var c={},f=a;f<o;f++){c[this._index[f]]=this._values[f]}for(var l=0;l<r;l++){e(l in c?c[l]:0,[l,i],this)}}}},E.prototype.toArray=function(){return r(this._values,this._index,this._ptr,this._size,!0)},E.prototype.valueOf=function(){return r(this._values,this._index,this._ptr,this._size,!1)},E.prototype.format=function(e){for(var t=this._size[0],r=this._size[1],n=this.density(),i="Sparse Matrix ["+Object(J.d)(t,e)+" x "+Object(J.d)(r,e)+"] density: "+Object(J.d)(n,e)+"\n",a=0;a<r;a++)for(var o=this._ptr[a],s=this._ptr[a+1],u=o;u<s;u++){var c=this._index[u];i+="\n    ("+Object(J.d)(c,e)+", "+Object(J.d)(a,e)+") ==> "+(this._values?Object(J.d)(this._values[u],e):"X")}return i},E.prototype.toString=function(){return Object(J.d)(this.toArray())},E.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},E.prototype.diagonal=function(e){if(e){if(Object(ie.e)(e)&&(e=e.toNumber()),!Object(ie.y)(e)||!Object(j.i)(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=0<e?e:0,r=e<0?-e:0,n=this._size[0],i=this._size[1],a=Math.min(n-r,i-t),o=[],s=[],u=[];u[0]=0;for(var c=t;c<i&&o.length<a;c++)for(var f=this._ptr[c],l=this._ptr[c+1],p=f;p<l;p++){var m=this._index[p];if(m===c-t+r){o.push(this._values[p]),s[o.length-1]=m-r;break}}return u.push(o.length),new E({values:o,index:s,ptr:u,size:[a,1]})},E.fromJSON=function(e){return new E(e)},E.diagonal=function(e,t,r,n,i){if(!Object(ie.b)(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(Object(ie.e)(e)&&(e=e.toNumber()),!Object(ie.y)(e)||!Object(j.i)(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(Object(ie.e)(r)&&(r=r.toNumber()),!Object(ie.y)(r)||!Object(j.i)(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a=M,o=0;Object(ie.I)(i)&&(a=O.find(M,[i,i])||M,o=O.convert(0,i));var s,u=0<r?r:0,c=r<0?-r:0,f=e[0],l=e[1],p=Math.min(f-c,l-u);if(Object(ie.b)(t)){if(t.length!==p)throw new Error("Invalid value array length");s=function(e){return t[e]}}else if(Object(ie.v)(t)){var m=t.size();if(1!==m.length||m[0]!==p)throw new Error("Invalid matrix length");s=function(e){return t.get([e])}}else s=function(){return t};for(var h=[],d=[],y=[],g=0;g<l;g++){y.push(h.length);var v=g-u;if(0<=v&&v<p){var b=s(v);a(b,o)||(d.push(v+c),h.push(b))}}return y.push(h.length),new E({values:h,index:d,ptr:y,size:[f,l]})},E.prototype.swapRows=function(e,t){if(!(Object(ie.y)(e)&&Object(j.i)(e)&&Object(ie.y)(t)&&Object(j.i)(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Object(I.s)(e,this._size[0]),Object(I.s)(t,this._size[0]),E._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},E._forEachRow=function(e,t,r,n,i){for(var a=n[e],o=n[e+1],s=a;s<o;s++)i(r[s],t[s])},E._swapRows=function(e,t,r,n,i,a){for(var o=0;o<r;o++){var s=a[o],u=a[o+1],c=g(e,s,u,i),f=g(t,s,u,i);if(c<u&&f<u&&i[c]===e&&i[f]===t){if(n){var l=n[c];n[c]=n[f],n[f]=l}}else if(c<u&&i[c]===e&&(u<=f||i[f]!==t)){var p=n?n[c]:void 0;i.splice(f,0,t),n&&n.splice(f,0,p),i.splice(f<=c?c+1:c,1),n&&n.splice(f<=c?c+1:c,1)}else if(f<u&&i[f]===t&&(u<=c||i[c]!==e)){var m=n?n[f]:void 0;i.splice(c,0,e),n&&n.splice(c,0,m),i.splice(c<=f?f+1:f,1),n&&n.splice(c<=f?f+1:f,1)}}},E},{isClass:!0}),Ae=["typed"],Ce=Object(s.a)("number",Ae,function(e){var t=(0,e.typed)("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return oe(e,t)}});return t}),Te=["typed"],_e=Object(s.a)("string",Te,function(e){var t=(0,e.typed)("string",{"":function(){return""},number:j.h,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":function(e){return oe(e,t)},any:function(e){return String(e)}});return t}),Ie="boolean",Be=["typed"],qe=Object(s.a)(Ie,Be,function(e){var t=(0,e.typed)(Ie,{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var r=Number(e);if(""!==e&&!isNaN(r))return!!r;throw new Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":function(e){return oe(e,t)}});return t}),ke=["typed","BigNumber"],ze=Object(s.a)("bignumber",ke,function(e){var t=e.typed,r=e.BigNumber,n=t("bignumber",{"":function(){return new r(0)},number:function(e){return new r(e+"")},string:function(e){return new r(e)},BigNumber:function(e){return e},Fraction:function(e){return new r(e.n).div(e.d).times(e.s)},null:function(e){return new r(0)},"Array | Matrix":function(e){return oe(e,n)}});return n}),De=["typed","Complex"],Re=Object(s.a)("complex",De,function(e){var t=e.typed,r=e.Complex,n=t("complex",{"":function(){return r.ZERO},number:function(e){return new r(e,0)},"number, number":function(e,t){return new r(e,t)},"BigNumber, BigNumber":function(e,t){return new r(e.toNumber(),t.toNumber())},Fraction:function(e){return new r(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return r(e)},null:function(e){return r(0)},Object:function(e){if("re"in e&&"im"in e)return new r(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new r(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(e){return oe(e,n)}});return n}),Pe=["typed","Fraction"],Fe=Object(s.a)("fraction",Pe,function(e){var t=e.typed,r=e.Fraction,n=t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new r(e)},string:function(e){return new r(e)},"number, number":function(e,t){return new r(e,t)},null:function(e){return new r(0)},BigNumber:function(e){return new r(e.toString())},Fraction:function(e){return e},Object:function(e){return new r(e)},"Array | Matrix":function(e){return oe(e,n)}});return n}),Ue=["typed","Matrix","DenseMatrix","SparseMatrix"],Le=Object(s.a)("matrix",Ue,function(e){var t=e.typed,n=(e.Matrix,e.DenseMatrix),i=e.SparseMatrix;return t("matrix",{"":function(){return r([])},string:function(e){return r([],e)},"string, string":function(e,t){return r([],e,t)},Array:function(e){return r(e)},Matrix:function(e){return r(e,e.storage())},"Array | Matrix, string":r,"Array | Matrix, string, string":r});function r(e,t,r){if("dense"===t||"default"===t||void 0===t)return new n(e,r);if("sparse"===t)return new i(e,r);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}}),He="splitUnit",$e=["typed"],Ge=Object(s.a)(He,$e,function(e){return(0,e.typed)(He,{"Unit, Array":function(e,t){return e.splitUnit(t)}})}),Ze="number",Ve="number, number";function Je(e){return Math.abs(e)}function We(e,t){return e+t}function Ye(e,t){return e*t}function Xe(e){return-e}function Qe(e){return e}function Ke(e){return Object(j.d)(e)}function et(e){return Math.ceil(e)}function tt(e){return e*e*e}function rt(e){return Math.exp(e)}function nt(e){return Object(j.g)(e)}function it(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Parameters in function gcd must be integer numbers");for(var r;0!==t;)r=e%t,e=t,t=r;return e<0?-e:e}function at(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var r,n=e*t;0!==t;)t=e%(r=t),e=r;return Math.abs(n/e)}function ot(e){return Math.log(e)}function st(e){return Object(j.j)(e)}function ut(e){return Object(j.l)(e)}function ct(e,t){if(0<t)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor")}function ft(e,t){var r=t<0;if(r&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===e)return r?1/0:0;if(!isFinite(e))return r?0:e;var n=Math.pow(Math.abs(e),1/t);return n=e<0?-n:n,r?1/n:n}function lt(e){return Object(j.n)(e)}function pt(e){return e*e}function mt(e,t){var r,n,i,a=0,o=1,s=1,u=0;if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(n=Math.floor(e/t))*t,a=o-n*(r=a),o=r,s=u-n*(r=s),u=r,e=t,t=i;return e<0?[-e,-o,-u]:[e,e?o:0,u]}function ht(e,t){return e*e<1&&t===1/0||1<e*e&&t===-1/0?0:Math.pow(e,t)}function dt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(Object(j.q)(e,t))}Je.signature=Ze,Ye.signature=We.signature=Ve,nt.signature=rt.signature=tt.signature=et.signature=Ke.signature=Qe.signature=Xe.signature=Ze,at.signature=it.signature=Ve,ut.signature=st.signature=ot.signature=Ze,ft.signature=ct.signature=Ve,pt.signature=lt.signature=Ze,dt.signature=ht.signature=mt.signature=Ve;var yt="unaryMinus",gt=["typed"],vt=Object(s.a)(yt,gt,function(e){var r=(0,e.typed)(yt,{number:Xe,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=r(e.value),t},"Array | Matrix":function(e){return oe(e,r,!0)}});return r}),bt="unaryPlus",xt=["typed","config","BigNumber"],wt=Object(s.a)(bt,xt,function(e){var t=e.typed,r=e.config,n=e.BigNumber,i=t(bt,{number:Qe,Complex:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":function(e){return oe(e,i,!0)},"boolean | string":function(e){return"BigNumber"===r.number?new n(+e):+e}});return i}),Nt=["typed"],Ot=Object(s.a)("abs",Nt,function(e){var t=(0,e.typed)("abs",{number:Je,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return oe(e,t,!0)},Unit:function(e){return e.abs()}});return t}),Mt=["typed","isInteger"],Et=Object(s.a)("apply",Mt,function(e){var t=e.typed,i=e.isInteger;return t("apply",{"Array | Matrix, number | BigNumber, function":function(e,t,r){if(!i(t))throw new TypeError("Integer number expected for dimension");var n=Array.isArray(e)?Object(I.a)(e):e.size();if(t<0||t>=n.length)throw new R.a(t,n.length);return Object(ie.v)(e)?e.create(jt(e.valueOf(),t,r)):jt(e,t,r)}})});function jt(e,t,r){var n,i,a;if(t<=0){if(Array.isArray(e[0])){for(a=function(e){var t,r,n=e.length,i=e[0].length,a=[];for(r=0;r<i;r++){var o=[];for(t=0;t<n;t++)o.push(e[t][r]);a.push(o)}return a}(e),i=[],n=0;n<a.length;n++)i[n]=jt(a[n],t-1,r);return i}return r(e)}for(i=[],n=0;n<e.length;n++)i[n]=jt(e[n],t-1,r);return i}var St="addScalar",At=["typed"],Ct=Object(s.a)(St,At,function(e){var n=(0,e.typed)(St,{"number, number":We,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null===e.value||void 0===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value||void 0===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var r=e.clone();return r.value=n(r.value,t.value),r.fixPrefix=!1,r}});return n}),Tt=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],_t=Object(s.a)("cbrt",Tt,function(e){var o=e.config,t=e.typed,a=e.isNegative,s=e.unaryMinus,u=e.matrix,c=e.Complex,f=e.BigNumber,l=e.Fraction,r=t("cbrt",{number:Ke,Complex:p,"Complex, boolean":p,BigNumber:function(e){return e.cbrt()},Unit:function(e){{if(e.value&&Object(ie.j)(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=p(e.value),t}var r,n=a(e.value);n&&(e.value=s(e.value)),r=Object(ie.e)(e.value)?new f(1).div(3):Object(ie.o)(e.value)?new l(1,3):1/3;var i=e.pow(r);return n&&(i.value=s(i.value)),i}},"Array | Matrix":function(e){return oe(e,r,!0)}});function p(e,t){var r=e.arg()/3,n=e.abs(),i=new c(Ke(n),0).mul(new c(0,r).exp());if(t){var a=[i,new c(Ke(n),0).mul(new c(0,r+2*Math.PI/3).exp()),new c(Ke(n),0).mul(new c(0,r-2*Math.PI/3).exp())];return"Array"===o.matrix?a:u(a)}return i}return r}),It=["typed","config","round"],Bt=Object(s.a)("ceil",It,function(e){var t=e.typed,r=e.config,n=e.round,i=t("ceil",{number:function(e){return Object(j.m)(e,n(e),r.epsilon)?n(e):et(e)},Complex:function(e){return e.ceil()},BigNumber:function(e){return Ne(e,n(e),r.epsilon)?n(e):e.ceil()},Fraction:function(e){return e.ceil()},"Array | Matrix":function(e){return oe(e,i,!0)}});return i}),qt=["typed"],kt=Object(s.a)("cube",qt,function(e){var t=(0,e.typed)("cube",{number:tt,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},Fraction:function(e){return e.pow(3)},"Array | Matrix":function(e){return oe(e,t,!0)},Unit:function(e){return e.pow(3)}});return t}),zt=["typed"],Dt=Object(s.a)("exp",zt,function(e){var t=(0,e.typed)("exp",{number:rt,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()},"Array | Matrix":function(e){return oe(e,t)}});return t}),Rt=["typed","Complex"],Pt=Object(s.a)("expm1",Rt,function(e){var t=e.typed,r=e.Complex,n=t("expm1",{number:nt,Complex:function(e){var t=Math.exp(e.re);return new r(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)},"Array | Matrix":function(e){return oe(e,n)}});return n}),Ft=["typed","Complex","ceil","floor"],Ut=Object(s.a)("fix",Ft,function(e){var t=e.typed,r=e.Complex,n=e.ceil,i=e.floor,a=t("fix",{number:function(e){return 0<e?i(e):n(e)},Complex:function(e){return new r(0<e.re?Math.floor(e.re):Math.ceil(e.re),0<e.im?Math.floor(e.im):Math.ceil(e.im))},BigNumber:function(e){return e.isNegative()?n(e):i(e)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Array | Matrix":function(e){return oe(e,a,!0)}});return a}),Lt=["typed","config","round"],Ht=Object(s.a)("floor",Lt,function(e){var t=e.typed,r=e.config,n=e.round,i=t("floor",{number:function(e){return Object(j.m)(e,n(e),r.epsilon)?n(e):Math.floor(e)},Complex:function(e){return e.floor()},BigNumber:function(e){return Ne(e,n(e),r.epsilon)?n(e):e.floor()},Fraction:function(e){return e.floor()},"Array | Matrix":function(e){return oe(e,i,!0)}});return i}),$t=["typed"],Gt=Object(s.a)("algorithm01",$t,function(e){var E=e.typed;return function(e,t,r,n){var i=e._data,a=e._size,o=e._datatype,s=t._values,u=t._index,c=t._ptr,f=t._size,l=t._datatype;if(a.length!==f.length)throw new D.a(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,m,h=a[0],d=a[1],y="string"==typeof o&&o===l?o:void 0,g=y?E.find(r,[y,y]):r,v=[];for(p=0;p<h;p++)v[p]=[];var b=[],x=[];for(m=0;m<d;m++){for(var w=m+1,N=c[m],O=c[m+1],M=N;M<O;M++)b[p=u[M]]=n?g(s[M],i[p][m]):g(i[p][m],s[M]),x[p]=w;for(p=0;p<h;p++)x[p]===w?v[p][m]=b[p]:v[p][m]=i[p][m]}return e.createDenseMatrix({data:v,size:[h,d],datatype:y})}}),Zt=["typed","equalScalar"],Vt=Object(s.a)("algorithm04",Zt,function(e){var q=e.typed,k=e.equalScalar;return function(e,t,r){var n=e._values,i=e._index,a=e._ptr,o=e._size,s=e._datatype,u=t._values,c=t._index,f=t._ptr,l=t._size,p=t._datatype;if(o.length!==l.length)throw new D.a(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var m,h=o[0],d=o[1],y=k,g=0,v=r;"string"==typeof s&&s===p&&(m=s,y=q.find(k,[m,m]),g=q.convert(0,m),v=q.find(r,[m,m]));var b,x,w,N,O,M=n&&u?[]:void 0,E=[],j=[],S=e.createSparseMatrix({values:M,index:E,ptr:j,size:[h,d],datatype:m}),A=n&&u?[]:void 0,C=n&&u?[]:void 0,T=[],_=[];for(x=0;x<d;x++){j[x]=E.length;var I=x+1;for(N=a[x],O=a[x+1],w=N;w<O;w++)b=i[w],E.push(b),T[b]=I,A&&(A[b]=n[w]);for(N=f[x],O=f[x+1],w=N;w<O;w++)if(T[b=c[w]]===I){if(A){var B=v(A[b],u[w]);y(B,g)?T[b]=null:A[b]=B}}else E.push(b),_[b]=I,C&&(C[b]=u[w]);if(A&&C)for(w=j[x];w<E.length;)T[b=E[w]]===I?(M[w]=A[b],w++):_[b]===I?(M[w]=C[b],w++):E.splice(w,1)}return j[d]=E.length,S}}),Jt=["typed","DenseMatrix"],Wt=Object(s.a)("algorithm10",Jt,function(e){var M=e.typed,E=e.DenseMatrix;return function(e,t,r,n){var i=e._values,a=e._index,o=e._ptr,s=e._size,u=e._datatype;if(!i)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c,f=s[0],l=s[1],p=r;"string"==typeof u&&(c=u,t=M.convert(t,c),p=M.find(r,[c,c]));for(var m=[],h=new E({data:m,size:[f,l],datatype:c}),d=[],y=[],g=0;g<l;g++){for(var v=g+1,b=o[g],x=o[g+1],w=b;w<x;w++){var N=a[w];d[N]=i[w],y[N]=v}for(var O=0;O<f;O++)0===g&&(m[O]=[]),y[O]===v?m[O][g]=n?p(t,d[O]):p(d[O],t):m[O][g]=t}return h}}),Yt=["typed"],Xt=Object(s.a)("algorithm13",Yt,function(e){var h=e.typed;return function(e,t,r){var n,i=e._data,a=e._size,o=e._datatype,s=t._data,u=t._size,c=t._datatype,f=[];if(a.length!==u.length)throw new D.a(a.length,u.length);for(var l=0;l<a.length;l++){if(a[l]!==u[l])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");f[l]=a[l]}var p=r;"string"==typeof o&&o===c&&(n=o,p=h.find(r,[n,n]));var m=0<f.length?function e(t,r,n,i,a,o){var s=[];if(r===n.length-1)for(var u=0;u<i;u++)s[u]=t(a[u],o[u]);else for(var c=0;c<i;c++)s[c]=e(t,r+1,n,n[r+1],a[c],o[c]);return s}(p,0,f,f[0],i,s):[];return e.createDenseMatrix({data:m,size:f,datatype:n})}}),Qt=["typed"],Kt=Object(s.a)("algorithm14",Qt,function(e){var f=e.typed;return function(e,t,r,n){var i,a=e._data,o=e._size,s=e._datatype,u=r;"string"==typeof s&&(i=s,t=f.convert(t,i),u=f.find(r,[i,i]));var c=0<o.length?function e(t,r,n,i,a,o,s){var u=[];if(r===n.length-1)for(var c=0;c<i;c++)u[c]=s?t(o,a[c]):t(a[c],o);else for(var f=0;f<i;f++)u[f]=e(t,r+1,n,n[r+1],a[f],o,s);return u}(u,0,o,o[0],a,t,n):[];return e.createDenseMatrix({data:c,size:Object(ae.a)(o),datatype:i})}}),er=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],tr=Object(s.a)("gcd",er,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.BigNumber,a=e.DenseMatrix,o=Gt({typed:t}),s=Vt({typed:t,equalScalar:n}),u=Wt({typed:t,DenseMatrix:a}),c=Xt({typed:t}),f=Kt({typed:t}),l=t("gcd",{"number, number":it,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");var r=new i(0);for(;!t.isZero();){var n=e.mod(t);e=t,t=n}return e.lt(r)?e.neg():e},"Fraction, Fraction":function(e,t){return e.gcd(t)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return u(e,t,l,!1)},"DenseMatrix, number | BigNumber":function(e,t){return f(e,t,l,!1)},"number | BigNumber, SparseMatrix":function(e,t){return u(t,e,l,!0)},"number | BigNumber, DenseMatrix":function(e,t){return f(t,e,l,!0)},"Array, number | BigNumber":function(e,t){return f(r(e),t,l,!1).valueOf()},"number | BigNumber, Array":function(e,t){return f(r(t),e,l,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(e,t,r){for(var n=l(e,t),i=0;i<r.length;i++)n=l(n,r[i]);return n}});return l}),rr=["typed","equalScalar"],nr=Object(s.a)("algorithm02",rr,function(e){var S=e.typed,A=e.equalScalar;return function(e,t,r,n){var i=e._data,a=e._size,o=e._datatype,s=t._values,u=t._index,c=t._ptr,f=t._size,l=t._datatype;if(a.length!==f.length)throw new D.a(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,m=a[0],h=a[1],d=A,y=0,g=r;"string"==typeof o&&o===l&&(p=o,d=S.find(A,[p,p]),y=S.convert(0,p),g=S.find(r,[p,p]));for(var v=[],b=[],x=[],w=0;w<h;w++){x[w]=b.length;for(var N=c[w],O=c[w+1],M=N;M<O;M++){var E=u[M],j=n?g(s[M],i[E][w]):g(i[E][w],s[M]);d(j,y)||(b.push(E),v.push(j))}}return x[h]=b.length,t.createSparseMatrix({values:v,index:b,ptr:x,size:[m,h],datatype:p})}}),ir=["typed","equalScalar"],ar=Object(s.a)("algorithm06",ir,function(e){var A=e.typed,C=e.equalScalar;return function(e,t,r){var n=e._values,i=e._size,a=e._datatype,o=t._values,s=t._size,u=t._datatype;if(i.length!==s.length)throw new D.a(i.length,s.length);if(i[0]!==s[0]||i[1]!==s[1])throw new RangeError("Dimension mismatch. Matrix A ("+i+") must match Matrix B ("+s+")");var c,f=i[0],l=i[1],p=C,m=0,h=r;"string"==typeof a&&a===u&&(c=a,p=A.find(C,[c,c]),m=A.convert(0,c),h=A.find(r,[c,c]));for(var d=n&&o?[]:void 0,y=[],g=[],v=e.createSparseMatrix({values:d,index:y,ptr:g,size:[f,l],datatype:c}),b=d?[]:void 0,x=[],w=[],N=0;N<l;N++){g[N]=y.length;var O=N+1;if(H(e,N,x,b,w,O,v,h),H(t,N,x,b,w,O,v,h),b)for(var M=g[N];M<y.length;){var E=y[M];if(w[E]===O){var j=b[E];p(j,m)?y.splice(M,1):(d.push(j),M++)}else y.splice(M,1)}else for(var S=g[N];S<y.length;){w[y[S]]!==O?y.splice(S,1):S++}}return g[l]=y.length,v}}),or=["typed","equalScalar"],sr=Object(s.a)("algorithm11",or,function(e){var E=e.typed,j=e.equalScalar;return function(e,t,r,n){var i=e._values,a=e._index,o=e._ptr,s=e._size,u=e._datatype;if(!i)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c,f=s[0],l=s[1],p=j,m=0,h=r;"string"==typeof u&&(c=u,p=E.find(j,[c,c]),m=E.convert(0,c),t=E.convert(t,c),h=E.find(r,[c,c]));for(var d=[],y=[],g=[],v=e.createSparseMatrix({values:d,index:y,ptr:g,size:[f,l],datatype:c}),b=0;b<l;b++){g[b]=y.length;for(var x=o[b],w=o[b+1],N=x;N<w;N++){var O=a[N],M=n?h(t,i[N]):h(i[N],t);p(M,m)||(y.push(O),d.push(M))}}return g[l]=y.length,v}}),ur=["typed","matrix","equalScalar"],cr=Object(s.a)("lcm",ur,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=nr({typed:t,equalScalar:n}),a=ar({typed:t,equalScalar:n}),o=sr({typed:t,equalScalar:n}),s=Xt({typed:t}),u=Kt({typed:t}),c=t("lcm",{"number, number":at,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;var r=e.times(t);for(;!t.isZero();){var n=t;t=e.mod(n),e=n}return r.div(e).abs()},"Fraction, Fraction":function(e,t){return e.lcm(t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return c(r(e),t)},"Matrix, Array":function(e,t){return c(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,c,!1)},"DenseMatrix, number | BigNumber":function(e,t){return u(e,t,c,!1)},"number | BigNumber, SparseMatrix":function(e,t){return o(t,e,c,!0)},"number | BigNumber, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, number | BigNumber":function(e,t){return u(r(e),t,c,!1).valueOf()},"number | BigNumber, Array":function(e,t){return u(r(t),e,c,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(e,t,r){for(var n=c(e,t),i=0;i<r.length;i++)n=c(n,r[i]);return n}});return c}),fr=["typed","config","Complex"],lr=Object(s.a)("log10",fr,function(e){var t=e.typed,r=e.config,n=e.Complex,i=t("log10",{number:function(e){return 0<=e||r.predictable?st(e):new n(e,0).log().div(Math.LN10)},Complex:function(e){return new n(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||r.predictable?e.log():new n(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(e){return oe(e,i)}});return i}),pr=["typed","config","Complex"],mr=Object(s.a)("log2",pr,function(e){var t=e.typed,r=e.config,n=e.Complex,i=t("log2",{number:function(e){return 0<=e||r.predictable?ut(e):a(new n(e,0))},Complex:a,BigNumber:function(e){return!e.isNegative()||r.predictable?e.log(2):a(new n(e.toNumber(),0))},"Array | Matrix":function(e){return oe(e,i)}});function a(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new n(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}return i}),hr=["typed"],dr=Object(s.a)("algorithm03",hr,function(e){var A=e.typed;return function(e,t,r,n){var i=e._data,a=e._size,o=e._datatype,s=t._values,u=t._index,c=t._ptr,f=t._size,l=t._datatype;if(a.length!==f.length)throw new D.a(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,m=a[0],h=a[1],d=0,y=r;"string"==typeof o&&o===l&&(p=o,d=A.convert(0,p),y=A.find(r,[p,p]));for(var g=[],v=0;v<m;v++)g[v]=[];for(var b=[],x=[],w=0;w<h;w++){for(var N=w+1,O=c[w],M=c[w+1],E=O;E<M;E++){var j=u[E];b[j]=n?y(s[E],i[j][w]):y(i[j][w],s[E]),x[j]=N}for(var S=0;S<m;S++)x[S]===N?g[S][w]=b[S]:g[S][w]=n?y(d,i[S][w]):y(i[S][w],d)}return e.createDenseMatrix({data:g,size:[m,h],datatype:p})}}),yr=["typed","equalScalar"],gr=Object(s.a)("algorithm05",yr,function(e){var k=e.typed,z=e.equalScalar;return function(e,t,r){var n=e._values,i=e._index,a=e._ptr,o=e._size,s=e._datatype,u=t._values,c=t._index,f=t._ptr,l=t._size,p=t._datatype;if(o.length!==l.length)throw new D.a(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var m,h=o[0],d=o[1],y=z,g=0,v=r;"string"==typeof s&&s===p&&(m=s,y=k.find(z,[m,m]),g=k.convert(0,m),v=k.find(r,[m,m]));var b,x,w,N,O=n&&u?[]:void 0,M=[],E=[],j=e.createSparseMatrix({values:O,index:M,ptr:E,size:[h,d],datatype:m}),S=O?[]:void 0,A=O?[]:void 0,C=[],T=[];for(x=0;x<d;x++){E[x]=M.length;var _=x+1;for(w=a[x],N=a[x+1];w<N;w++)b=i[w],M.push(b),C[b]=_,S&&(S[b]=n[w]);for(w=f[x],N=f[x+1];w<N;w++)C[b=c[w]]!==_&&M.push(b),T[b]=_,A&&(A[b]=u[w]);if(O)for(w=E[x];w<M.length;){var I=C[b=M[w]],B=T[b];if(I===_||B===_){var q=v(I===_?S[b]:g,B===_?A[b]:g);y(q,g)?M.splice(w,1):(O.push(q),w++)}}}return E[d]=M.length,j}}),vr=["typed","DenseMatrix"],br=Object(s.a)("algorithm12",vr,function(e){var M=e.typed,E=e.DenseMatrix;return function(e,t,r,n){var i=e._values,a=e._index,o=e._ptr,s=e._size,u=e._datatype;if(!i)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var c,f=s[0],l=s[1],p=r;"string"==typeof u&&(c=u,t=M.convert(t,c),p=M.find(r,[c,c]));for(var m=[],h=new E({data:m,size:[f,l],datatype:c}),d=[],y=[],g=0;g<l;g++){for(var v=g+1,b=o[g],x=o[g+1],w=b;w<x;w++){var N=a[w];d[N]=i[w],y[N]=v}for(var O=0;O<f;O++)0===g&&(m[O]=[]),y[O]===v?m[O][g]=n?p(t,d[O]):p(d[O],t):m[O][g]=n?p(t,0):p(0,t)}return h}}),xr=["typed","matrix","equalScalar","DenseMatrix"],wr=Object(s.a)("mod",xr,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=nr({typed:t,equalScalar:n}),o=dr({typed:t}),s=gr({typed:t,equalScalar:n}),u=sr({typed:t,equalScalar:n}),c=br({typed:t,DenseMatrix:i}),f=Xt({typed:t}),l=Kt({typed:t}),p=t("mod",{"number, number":ct,"BigNumber, BigNumber":function(e,t){return t.isZero()?e:e.mod(t)},"Fraction, Fraction":function(e,t){return e.mod(t)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,p,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,p,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,p,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,p)},"Array, Array":function(e,t){return p(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return p(r(e),t)},"Matrix, Array":function(e,t){return p(e,r(t))},"SparseMatrix, any":function(e,t){return u(e,t,p,!1)},"DenseMatrix, any":function(e,t){return l(e,t,p,!1)},"any, SparseMatrix":function(e,t){return c(t,e,p,!0)},"any, DenseMatrix":function(e,t){return l(t,e,p,!0)},"Array, any":function(e,t){return l(r(e),t,p,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,p,!0).valueOf()}});return p}),Nr=["typed"],Or=Object(s.a)("multiplyScalar",Nr,function(e){var n=(0,e.typed)("multiplyScalar",{"number, number":Ye,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var r=t.clone();return r.value=null===r.value?r._normalize(e):n(r.value,e),r},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var r=e.clone();return r.value=null===r.value?r._normalize(t):n(r.value,t),r},"Unit, Unit":function(e,t){return e.multiply(t)}});return n}),Mr="multiply",Er=["typed","matrix","addScalar","multiplyScalar","equalScalar"],jr=Object(s.a)(Mr,Er,function(e){var z=e.typed,n=e.matrix,D=e.addScalar,R=e.multiplyScalar,q=e.equalScalar,r=sr({typed:z,equalScalar:q}),i=Kt({typed:z}),a=z(Mr,Object(ae.e)({"Array, Array":function(e,t){o(Object(I.a)(e),Object(I.a)(t));var r=a(n(e),n(t));return Object(ie.v)(r)?r.valueOf():r},"Matrix, Matrix":function(e,t){var r=e.size(),n=t.size();return o(r,n),1===r.length?1===n.length?function(e,t,r){if(0===r)throw new Error("Cannot multiply two empty vectors");var n,i=e._data,a=e._datatype,o=t._data,s=t._datatype,u=D,c=R;a&&s&&a===s&&"string"==typeof a&&(n=a,u=z.find(D,[n,n]),c=z.find(R,[n,n]));for(var f=c(i[0],o[0]),l=1;l<r;l++)f=u(f,c(i[l],o[l]));return f}(e,t,r[0]):function(e,t){if("dense"===t.storage())return function(e,t){var r,n=e._data,i=e._size,a=e._datatype,o=t._data,s=t._size,u=t._datatype,c=i[0],f=s[1],l=D,p=R;a&&u&&a===u&&"string"==typeof a&&(r=a,l=z.find(D,[r,r]),p=z.find(R,[r,r]));for(var m=[],h=0;h<f;h++){for(var d=p(n[0],o[0][h]),y=1;y<c;y++)d=l(d,p(n[y],o[y][h]));m[h]=d}return e.createDenseMatrix({data:m,size:[f],datatype:r})}(e,t);throw new Error("Support for SparseMatrix not implemented")}(e,t):1===n.length?s(e,t):u(e,t)},"Matrix, Array":function(e,t){return a(e,n(t))},"Array, Matrix":function(e,t){return a(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return r(e,t,R,!1)},"DenseMatrix, any":function(e,t){return i(e,t,R,!1)},"any, SparseMatrix":function(e,t){return r(t,e,R,!0)},"any, DenseMatrix":function(e,t){return i(t,e,R,!0)},"Array, any":function(e,t){return i(n(e),t,R,!1).valueOf()},"any, Array":function(e,t){return i(n(t),e,R,!0).valueOf()},"any, any":R,"any, any, ...any":function(e,t,r){for(var n=a(e,t),i=0;i<r.length;i++)n=a(n,r[i]);return n}},R.signatures));function o(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var s=z("_multiplyMatrixVector",{"DenseMatrix, any":function(e,t){var r,n=e._data,i=e._size,a=e._datatype,o=t._data,s=t._datatype,u=i[0],c=i[1],f=D,l=R;a&&s&&a===s&&"string"==typeof a&&(r=a,f=z.find(D,[r,r]),l=z.find(R,[r,r]));for(var p=[],m=0;m<u;m++){for(var h=n[m],d=l(h[0],o[0]),y=1;y<c;y++)d=f(d,l(h[y],o[y]));p[m]=d}return e.createDenseMatrix({data:p,size:[u],datatype:r})},"SparseMatrix, any":function(e,t){var r=e._values,n=e._index,i=e._ptr,a=e._datatype;if(!r)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var o,s=t._data,u=t._datatype,c=e._size[0],f=t._size[0],l=[],p=[],m=[],h=D,d=R,y=q,g=0;a&&u&&a===u&&"string"==typeof a&&(o=a,h=z.find(D,[o,o]),d=z.find(R,[o,o]),y=z.find(q,[o,o]),g=z.convert(0,o));for(var v=[],b=[],x=m[0]=0;x<f;x++){var w=s[x];if(!y(w,g))for(var N=i[x],O=i[x+1],M=N;M<O;M++){var E=n[M];b[E]?v[E]=h(v[E],d(w,r[M])):(b[E]=!0,p.push(E),v[E]=d(w,r[M]))}}for(var j=p.length,S=0;S<j;S++){var A=p[S];l[S]=v[A]}return m[1]=p.length,e.createSparseMatrix({values:l,index:p,ptr:m,size:[c,1],datatype:o})}}),u=z("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,t){var r,n=e._data,i=e._size,a=e._datatype,o=t._data,s=t._size,u=t._datatype,c=i[0],f=i[1],l=s[1],p=D,m=R;a&&u&&a===u&&"string"==typeof a&&(r=a,p=z.find(D,[r,r]),m=z.find(R,[r,r]));for(var h=[],d=0;d<c;d++){var y=n[d];h[d]=[];for(var g=0;g<l;g++){for(var v=m(y[0],o[0][g]),b=1;b<f;b++)v=p(v,m(y[b],o[b][g]));h[d][g]=v}}return e.createDenseMatrix({data:h,size:[c,l],datatype:r})},"DenseMatrix, SparseMatrix":function(e,t){var r=e._data,n=e._size,i=e._datatype,a=t._values,o=t._index,s=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,l=n[0],p=u[1],m=D,h=R,d=q,y=0;i&&c&&i===c&&"string"==typeof i&&(f=i,m=z.find(D,[f,f]),h=z.find(R,[f,f]),d=z.find(q,[f,f]),y=z.convert(0,f));for(var g=[],v=[],b=[],x=t.createSparseMatrix({values:g,index:v,ptr:b,size:[l,p],datatype:f}),w=0;w<p;w++){b[w]=v.length;var N=s[w],O=s[w+1];if(N<O)for(var M=0,E=0;E<l;E++){for(var j=E+1,S=void 0,A=N;A<O;A++){var C=o[A];M!==j?(S=h(r[E][C],a[A]),M=j):S=m(S,h(r[E][C],a[A]))}M!==j||d(S,y)||(v.push(E),g.push(S))}}return b[p]=v.length,x},"SparseMatrix, DenseMatrix":function(e,t){var r=e._values,n=e._index,i=e._ptr,a=e._datatype;if(!r)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var o,s=t._data,u=t._datatype,c=e._size[0],f=t._size[0],l=t._size[1],p=D,m=R,h=q,d=0;a&&u&&a===u&&"string"==typeof a&&(o=a,p=z.find(D,[o,o]),m=z.find(R,[o,o]),h=z.find(q,[o,o]),d=z.convert(0,o));for(var y=[],g=[],v=[],b=e.createSparseMatrix({values:y,index:g,ptr:v,size:[c,l],datatype:o}),x=[],w=[],N=0;N<l;N++){v[N]=g.length;for(var O=N+1,M=0;M<f;M++){var E=s[M][N];if(!h(E,d))for(var j=i[M],S=i[M+1],A=j;A<S;A++){var C=n[A];w[C]!==O?(w[C]=O,g.push(C),x[C]=m(E,r[A])):x[C]=p(x[C],m(E,r[A]))}}for(var T=v[N],_=g.length,I=T;I<_;I++){var B=g[I];y[I]=x[B]}}return v[l]=g.length,b},"SparseMatrix, SparseMatrix":function(e,t){var r,n=e._values,i=e._index,a=e._ptr,o=e._datatype,s=t._values,u=t._index,c=t._ptr,f=t._datatype,l=e._size[0],p=t._size[1],m=n&&s,h=D,d=R;o&&f&&o===f&&"string"==typeof o&&(r=o,h=z.find(D,[r,r]),d=z.find(R,[r,r]));for(var y,g,v,b,x,w,N,O,M=m?[]:void 0,E=[],j=[],S=e.createSparseMatrix({values:M,index:E,ptr:j,size:[l,p],datatype:r}),A=m?[]:void 0,C=[],T=0;T<p;T++){j[T]=E.length;var _=T+1;for(x=c[T],w=c[T+1],b=x;b<w;b++)if(O=u[b],m)for(g=a[O],v=a[O+1],y=g;y<v;y++)N=i[y],C[N]!==_?(C[N]=_,E.push(N),A[N]=d(s[b],n[y])):A[N]=h(A[N],d(s[b],n[y]));else for(g=a[O],v=a[O+1],y=g;y<v;y++)N=i[y],C[N]!==_&&(C[N]=_,E.push(N));if(m)for(var I=j[T],B=E.length,q=I;q<B;q++){var k=E[q];M[q]=A[k]}}return j[p]=E.length,S}});return a}),Sr="nthRoot",Ar=["typed","matrix","equalScalar","BigNumber"],Cr=Object(s.a)(Sr,Ar,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,u=e.BigNumber,i=Gt({typed:t}),a=nr({typed:t,equalScalar:n}),o=ar({typed:t,equalScalar:n}),s=sr({typed:t,equalScalar:n}),c=Xt({typed:t}),f=Kt({typed:t}),l="Complex number not supported in function nthRoot. Use nthRoots instead.",p=t(Sr,{number:function(e){return ft(e,2)},"number, number":ft,BigNumber:function(e){return m(e,new u(2))},Complex:function(e){throw new Error(l)},"Complex, number":function(e,t){throw new Error(l)},"BigNumber, BigNumber":m,"Array | Matrix":function(e){return p(e,2)},"SparseMatrix, SparseMatrix":function(e,t){if(1===t.density())return o(e,t,p);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,p,!0)},"DenseMatrix, SparseMatrix":function(e,t){if(1===t.density())return i(e,t,p,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,p)},"Array, Array":function(e,t){return p(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return p(r(e),t)},"Matrix, Array":function(e,t){return p(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return s(e,t,p,!1)},"DenseMatrix, number | BigNumber":function(e,t){return f(e,t,p,!1)},"number | BigNumber, SparseMatrix":function(e,t){if(1===t.density())return s(t,e,p,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(e,t){return f(t,e,p,!0)},"Array, number | BigNumber":function(e,t){return p(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return p(e,r(t)).valueOf()}});return p;function m(e,t){var r=u.precision,n=u.clone({precision:r+2}),i=new u(0),a=new n(1),o=t.isNegative();if(o&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return o?new n(1/0):0;if(!e.isFinite())return o?i:e;var s=e.abs().pow(a.div(t));return s=e.isNeg()?s.neg():s,new u((o?a.div(s):s).toPrecision(r))}}),Tr=["typed","BigNumber","Fraction"],_r=Object(s.a)("sign",Tr,function(e){var t=e.typed,r=e.BigNumber,n=e.Fraction,i=t("sign",{number:lt,Complex:function(e){return e.sign()},BigNumber:function(e){return new r(e.cmp(0))},Fraction:function(e){return new n(e.s,1)},"Array | Matrix":function(e){return oe(e,i,!0)},Unit:function(e){return i(e.value)}});return i}),Ir=["config","typed","Complex"],Br=Object(s.a)("sqrt",Ir,function(e){var t=e.config,r=e.typed,n=e.Complex,i=r("sqrt",{number:a,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():a(e.toNumber())},"Array | Matrix":function(e){return oe(e,i,!0)},Unit:function(e){return e.pow(.5)}});function a(e){return isNaN(e)?NaN:0<=e||t.predictable?Math.sqrt(e):new n(e,0).sqrt()}return i}),qr=["typed"],kr=Object(s.a)("square",qr,function(e){var t=(0,e.typed)("square",{number:pt,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},Fraction:function(e){return e.mul(e)},"Array | Matrix":function(e){return oe(e,t,!0)},Unit:function(e){return e.pow(2)}});return t}),zr="subtract",Dr=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],Rr=Object(s.a)(zr,Dr,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.addScalar,a=e.unaryMinus,o=e.DenseMatrix,s=Gt({typed:t}),u=dr({typed:t}),c=gr({typed:t,equalScalar:n}),f=Wt({typed:t,DenseMatrix:o}),l=Xt({typed:t}),p=Kt({typed:t}),m=t(zr,{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var r=e.clone();return r.value=m(r.value,t.value),r.fixPrefix=!1,r},"SparseMatrix, SparseMatrix":function(e,t){return Pr(e,t),c(e,t,m)},"SparseMatrix, DenseMatrix":function(e,t){return Pr(e,t),u(t,e,m,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Pr(e,t),s(e,t,m,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Pr(e,t),l(e,t,m)},"Array, Array":function(e,t){return m(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return m(r(e),t)},"Matrix, Array":function(e,t){return m(e,r(t))},"SparseMatrix, any":function(e,t){return f(e,a(t),i)},"DenseMatrix, any":function(e,t){return p(e,t,m)},"any, SparseMatrix":function(e,t){return f(t,e,m,!0)},"any, DenseMatrix":function(e,t){return p(t,e,m,!0)},"Array, any":function(e,t){return p(r(e),t,m,!1).valueOf()},"any, Array":function(e,t){return p(r(t),e,m,!0).valueOf()}});return m});function Pr(e,t){var r=e.size(),n=t.size();if(r.length!==n.length)throw new D.a(r.length,n.length)}var Fr=["typed","config","matrix","BigNumber"],Ur=Object(s.a)("xgcd",Fr,function(e){var t=e.typed,p=e.config,m=e.matrix,h=e.BigNumber;return t("xgcd",{"number, number":function(e,t){var r=mt(e,t);return"Array"===p.matrix?r:m(r)},"BigNumber, BigNumber":function(e,t){var r,n,i,a,o=new h(0),s=new h(1),u=o,c=s,f=s,l=o;if(!e.isInt()||!t.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();)n=e.div(t).floor(),i=e.mod(t),r=u,u=c.minus(n.times(u)),c=r,r=f,f=l.minus(n.times(f)),l=r,e=t,t=i;a=e.lt(o)?[e.neg(),c.neg(),l.neg()]:[e,e.isZero()?0:c,l];return"Array"===p.matrix?a:m(a)}})}),Lr=["typed","equalScalar"],Hr=Object(s.a)("algorithm09",Lr,function(e){var B=e.typed,q=e.equalScalar;return function(e,t,r){var n=e._values,i=e._index,a=e._ptr,o=e._size,s=e._datatype,u=t._values,c=t._index,f=t._ptr,l=t._size,p=t._datatype;if(o.length!==l.length)throw new D.a(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var m,h=o[0],d=o[1],y=q,g=0,v=r;"string"==typeof s&&s===p&&(m=s,y=B.find(q,[m,m]),g=B.convert(0,m),v=B.find(r,[m,m]));var b,x,w,N,O,M=n&&u?[]:void 0,E=[],j=[],S=e.createSparseMatrix({values:M,index:E,ptr:j,size:[h,d],datatype:m}),A=M?[]:void 0,C=[];for(x=0;x<d;x++){j[x]=E.length;var T=x+1;if(A)for(N=f[x],O=f[x+1],w=N;w<O;w++)C[b=c[w]]=T,A[b]=u[w];for(N=a[x],O=a[x+1],w=N;w<O;w++)if(b=i[w],A){var _=C[b]===T?A[b]:g,I=v(n[w],_);y(I,g)||(E.push(b),M.push(I))}else E.push(b)}return j[d]=E.length,S}}),$r="dotMultiply",Gr=["typed","matrix","equalScalar","multiplyScalar"],Zr=Object(s.a)($r,Gr,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.multiplyScalar,a=nr({typed:t,equalScalar:n}),o=Hr({typed:t,equalScalar:n}),s=sr({typed:t,equalScalar:n}),u=Xt({typed:t}),c=Kt({typed:t}),f=t($r,{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,i)},"Array, Array":function(e,t){return f(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return f(r(e),t)},"Matrix, Array":function(e,t){return f(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,i,!1)},"DenseMatrix, any":function(e,t){return c(e,t,i,!1)},"any, SparseMatrix":function(e,t){return s(t,e,i,!0)},"any, DenseMatrix":function(e,t){return c(t,e,i,!0)},"Array, any":function(e,t){return c(r(e),t,i,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,i,!0).valueOf()}});return f});function Vr(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new r(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e}return Yr(e,t,function(e,t){return e&t})}function Jr(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,r=t.precision;t.config({precision:1e9});var n=e.plus(new t(1));return n.s=-n.s||null,t.config({precision:r}),n}function Wr(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);var n=new r(-1);return e.isZero()||t.eq(n)||e.eq(t)?t:t.isZero()||e.eq(n)?e:e.isFinite()&&t.isFinite()?Yr(e,t,function(e,t){return e|t}):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?n:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function Yr(e,t,r){var n,i,a,o,s,u=e.constructor,c=+(e.s<0),f=+(t.s<0);if(c){n=Xr(Jr(e));for(var l=0;l<n.length;++l)n[l]^=1}else n=Xr(e);if(f){i=Xr(Jr(t));for(var p=0;p<i.length;++p)i[p]^=1}else i=Xr(t);s=n.length<=i.length?(a=n,o=i,c):(a=i,o=n,f);var m=a.length,h=o.length,d=1^r(c,f),y=new u(1^d),g=new u(1),v=new u(2),b=u.precision;for(u.config({precision:1e9});0<m;)r(a[--m],o[--h])===d&&(y=y.plus(g)),g=g.times(v);for(;0<h;)r(s,o[--h])===d&&(y=y.plus(g)),g=g.times(v);return u.config({precision:b}),0==d&&(y.s=-y.s),y}function Xr(e){for(var t=e.d,r=t[0]+"",n=1;n<t.length;++n){for(var i=t[n]+"",a=7-i.length;a--;)i="0"+i;r+=i}for(var o=r.length;"0"===r.charAt(o);)o--;var s=e.e,u=r.slice(0,o+1||1),c=u.length;if(0<s)if(++s>c)for(s-=c;s--;)u+="0";else s<c&&(u=u.slice(0,s)+"."+u.slice(s));for(var f=[0],l=0;l<u.length;){for(var p=f.length;p--;)f[p]*=10;f[0]+=parseInt(u.charAt(l++));for(var m=0;m<f.length;++m)1<f[m]&&(null!==f[m+1]&&void 0!==f[m+1]||(f[m+1]=0),f[m+1]+=f[m]>>1,f[m]&=1)}return f.reverse()}function Qr(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new r(0);var n=new r(-1);return e.eq(n)?Jr(t):t.eq(n)?Jr(e):e.isFinite()&&t.isFinite()?Yr(e,t,function(e,t){return e^t}):e.isFinite()||t.isFinite()?new r(e.isNegative()===t.isNegative()?1/0:-1/0):n}function Kr(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new r(2).pow(t)):new r(NaN)}function en(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new r(2).pow(t)).floor():e.isNegative()?new r(-1):e.isFinite()?new r(0):new r(NaN)}var tn="number, number";function rn(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Integers expected in function bitAnd");return e&t}function nn(e){if(!Object(j.i)(e))throw new Error("Integer expected in function bitNot");return~e}function an(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Integers expected in function bitOr");return e|t}function on(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Integers expected in function bitXor");return e^t}function sn(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Integers expected in function leftShift");return e<<t}function un(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function cn(e,t){if(!Object(j.i)(e)||!Object(j.i)(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}rn.signature=tn,nn.signature="number",cn.signature=un.signature=sn.signature=on.signature=an.signature=tn;var fn=["typed","matrix","equalScalar"],ln=Object(s.a)("bitAnd",fn,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=nr({typed:t,equalScalar:n}),a=ar({typed:t,equalScalar:n}),o=sr({typed:t,equalScalar:n}),s=Xt({typed:t}),u=Kt({typed:t}),c=t("bitAnd",{"number, number":rn,"BigNumber, BigNumber":Vr,"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c,!1)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return c(r(e),t)},"Matrix, Array":function(e,t){return c(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,c,!1)},"DenseMatrix, any":function(e,t){return u(e,t,c,!1)},"any, SparseMatrix":function(e,t){return o(t,e,c,!0)},"any, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, any":function(e,t){return u(r(e),t,c,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,c,!0).valueOf()}});return c}),pn=["typed"],mn=Object(s.a)("bitNot",pn,function(e){var t=(0,e.typed)("bitNot",{number:nn,BigNumber:Jr,"Array | Matrix":function(e){return oe(e,t)}});return t}),hn=["typed","matrix","equalScalar","DenseMatrix"],dn=Object(s.a)("bitOr",hn,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=Gt({typed:t}),o=Vt({typed:t,equalScalar:n}),s=Wt({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t("bitOr",{"number, number":an,"BigNumber, BigNumber":Wr,"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return f(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return f(r(e),t)},"Matrix, Array":function(e,t){return f(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(r(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,f,!0).valueOf()}});return f}),yn=["typed","DenseMatrix"],gn=Object(s.a)("algorithm07",yn,function(e){var O=e.typed,M=e.DenseMatrix;return function(e,t,r){var n=e._size,i=e._datatype,a=t._size,o=t._datatype;if(n.length!==a.length)throw new D.a(n.length,a.length);if(n[0]!==a[0]||n[1]!==a[1])throw new RangeError("Dimension mismatch. Matrix A ("+n+") must match Matrix B ("+a+")");var s,u,c,f=n[0],l=n[1],p=0,m=r;"string"==typeof i&&i===o&&(s=i,p=O.convert(0,s),m=O.find(r,[s,s]));var h=[];for(u=0;u<f;u++)h[u]=[];var d=new M({data:h,size:[f,l],datatype:s}),y=[],g=[],v=[],b=[];for(c=0;c<l;c++){var x=c+1;for(E(e,c,v,y,x),E(t,c,b,g,x),u=0;u<f;u++){var w=v[u]===x?y[u]:p,N=b[u]===x?g[u]:p;h[u][c]=m(w,N)}}return d};function E(e,t,r,n,i){for(var a=e._values,o=e._index,s=e._ptr,u=s[t],c=s[t+1];u<c;u++){var f=o[u];r[f]=i,n[f]=a[u]}}}),vn=["typed","matrix","DenseMatrix"],bn=Object(s.a)("bitXor",vn,function(e){var t=e.typed,r=e.matrix,n=e.DenseMatrix,i=dr({typed:t}),a=gn({typed:t,DenseMatrix:n}),o=br({typed:t,DenseMatrix:n}),s=Xt({typed:t}),u=Kt({typed:t}),c=t("bitXor",{"number, number":on,"BigNumber, BigNumber":Qr,"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return c(r(e),t)},"Matrix, Array":function(e,t){return c(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,c,!1)},"DenseMatrix, any":function(e,t){return u(e,t,c,!1)},"any, SparseMatrix":function(e,t){return o(t,e,c,!0)},"any, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, any":function(e,t){return u(r(e),t,c,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,c,!0).valueOf()}});return c}),xn=["typed"],wn=Object(s.a)("arg",xn,function(e){var t=(0,e.typed)("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":function(e){return oe(e,t)}});return t}),Nn=["typed"],On=Object(s.a)("conj",Nn,function(e){var t=(0,e.typed)("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return oe(e,t)}});return t}),Mn=["typed"],En=Object(s.a)("im",Mn,function(e){var t=(0,e.typed)("im",{number:function(e){return 0},BigNumber:function(e){return e.mul(0)},Complex:function(e){return e.im},"Array | Matrix":function(e){return oe(e,t)}});return t}),jn=["typed"],Sn=Object(s.a)("re",jn,function(e){var t=(0,e.typed)("re",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.re},"Array | Matrix":function(e){return oe(e,t)}});return t}),An="number, number";function Cn(e){return!e}function Tn(e,t){return!(!e&&!t)}function _n(e,t){return!!e!=!!t}function In(e,t){return!(!e||!t)}Cn.signature="number",In.signature=_n.signature=Tn.signature=An;var Bn=["typed"],qn=Object(s.a)("not",Bn,function(e){var t=(0,e.typed)("not",{number:Cn,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},Unit:function(e){return null===e.value||t(e.value)},"Array | Matrix":function(e){return oe(e,t)}});return t}),kn=["typed","matrix","equalScalar","DenseMatrix"],zn=Object(s.a)("or",kn,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=dr({typed:t}),o=gr({typed:t,equalScalar:n}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t("or",{"number, number":Tn,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"Unit, Unit":function(e,t){return f(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return f(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return f(r(e),t)},"Matrix, Array":function(e,t){return f(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(r(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,f,!0).valueOf()}});return f}),Dn=["typed","matrix","DenseMatrix"],Rn=Object(s.a)("xor",Dn,function(e){var t=e.typed,r=e.matrix,n=e.DenseMatrix,i=dr({typed:t}),a=gn({typed:t,DenseMatrix:n}),o=br({typed:t,DenseMatrix:n}),s=Xt({typed:t}),u=Kt({typed:t}),c=t("xor",{"number, number":_n,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!=(!t.isZero()&&!t.isNaN())},"Unit, Unit":function(e,t){return c(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,c)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,c,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,c,!1)},"DenseMatrix, DenseMatrix":function(e,t){return s(e,t,c)},"Array, Array":function(e,t){return c(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return c(r(e),t)},"Matrix, Array":function(e,t){return c(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,c,!1)},"DenseMatrix, any":function(e,t){return u(e,t,c,!1)},"any, SparseMatrix":function(e,t){return o(t,e,c,!0)},"any, DenseMatrix":function(e,t){return u(t,e,c,!0)},"Array, any":function(e,t){return u(r(e),t,c,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,c,!0).valueOf()}});return c}),Pn=["typed","matrix","isInteger"],Fn=Object(s.a)("concat",Pn,function(e){var t=e.typed,l=e.matrix,p=e.isInteger;return t("concat",{"...Array | Matrix | number | BigNumber":function(e){var t,r,n=e.length,i=-1,a=!1,o=[];for(t=0;t<n;t++){var s=e[t];if(Object(ie.v)(s)&&(a=!0),Object(ie.y)(s)||Object(ie.e)(s)){if(t!==n-1)throw new Error("Dimension must be specified as last argument");if(r=i,i=s.valueOf(),!p(i))throw new TypeError("Integer number expected for dimension");if(i<0||0<t&&r<i)throw new R.a(i,r+1)}else{var u=Object(ae.a)(s).valueOf(),c=Object(I.a)(u);if(o[t]=u,r=i,i=c.length-1,0<t&&i!==r)throw new D.a(r+1,i+1)}}if(0===o.length)throw new SyntaxError("At least one matrix expected");for(var f=o.shift();o.length;)f=Un(f,o.shift(),i,0);return a?l(f):f},"...string":function(e){return e.join("")}})});function Un(e,t,r,n){if(n<r){if(e.length!==t.length)throw new D.a(e.length,t.length);for(var i=[],a=0;a<e.length;a++)i[a]=Un(e[a],t[a],r,n+1);return i}return e.concat(t)}var Ln=["typed","Index","matrix","range"],Hn=Object(s.a)("column",Ln,function(e){var t=e.typed,i=e.Index,r=e.matrix,a=e.range;return t("column",{"Matrix, number":n,"Array, number":function(e,t){return n(r(Object(ae.a)(e)),t).valueOf()}});function n(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");Object(I.s)(t,e.size()[1]);var r=a(0,e.size()[0]),n=new i(r,t);return e.subset(n)}}),$n=["typed","matrix","subtract","multiply"],Gn=Object(s.a)("cross",$n,function(e){var t=e.typed,r=e.matrix,o=e.subtract,s=e.multiply;return t("cross",{"Matrix, Matrix":function(e,t){return r(n(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return r(n(e.toArray(),t))},"Array, Matrix":function(e,t){return r(n(e,t.toArray()))},"Array, Array":n});function n(e,t){var r=Math.max(Object(I.a)(e).length,Object(I.a)(t).length);e=Object(I.p)(e),t=Object(I.p)(t);var n=Object(I.a)(e),i=Object(I.a)(t);if(1!==n.length||1!==i.length||3!==n[0]||3!==i[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+n.join(", ")+"], B = ["+i.join(", ")+"])");var a=[o(s(e[1],t[2]),s(e[2],t[1])),o(s(e[2],t[0]),s(e[0],t[2])),o(s(e[0],t[1]),s(e[1],t[0]))];return 1<r?[a]:a}}),Zn=["typed","matrix","DenseMatrix","SparseMatrix"],Vn=Object(s.a)("diag",Zn,function(e){var t=e.typed,f=e.matrix,u=e.DenseMatrix,c=e.SparseMatrix;return t("diag",{Array:function(e){return n(e,0,Object(I.a)(e),null)},"Array, number":function(e,t){return n(e,t,Object(I.a)(e),null)},"Array, BigNumber":function(e,t){return n(e,t.toNumber(),Object(I.a)(e),null)},"Array, string":function(e,t){return n(e,0,Object(I.a)(e),t)},"Array, number, string":function(e,t,r){return n(e,t,Object(I.a)(e),r)},"Array, BigNumber, string":function(e,t,r){return n(e,t.toNumber(),Object(I.a)(e),r)},Matrix:function(e){return n(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return n(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return n(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return n(e,0,e.size(),t)},"Matrix, number, string":function(e,t,r){return n(e,t,e.size(),r)},"Matrix, BigNumber, string":function(e,t,r){return n(e,t.toNumber(),e.size(),r)}});function n(e,t,r,n){if(!Object(j.i)(t))throw new TypeError("Second parameter in function diag must be an integer");var i=0<t?t:0,a=t<0?-t:0;switch(r.length){case 1:return function(e,t,r,n,i,a){var o=[n+i,n+a];if(r&&"sparse"!==r&&"dense"!==r)throw new TypeError("Unknown matrix type ".concat(r,'"'));var s="sparse"===r?c.diagonal(o,e,t):u.diagonal(o,e,t);return null!==r?s:s.valueOf()}(e,t,n,r[0],a,i);case 2:return function(e,t,r,n,i,a){if(Object(ie.v)(e)){var o=e.diagonal(t);return null!==r?r!==o.storage()?f(o,r):o:o.valueOf()}for(var s=Math.min(n[0]-i,n[1]-a),u=[],c=0;c<s;c++)u[c]=e[c+i][c+a];return null!==r?f(u):u}(e,t,n,r,a,i)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}),Jn=Object(s.a)("eye",[],function(){return function(){throw new Error('Function "eye" is renamed to "identity" since mathjs version 5.0.0. To keep eye working, create an alias for it using "math.import({eye: math.identity}, {override: true})"')}});function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(i,a){return function e(){"object"!==Wn(e.cache)&&(e.cache={});for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=a?a(t):JSON.stringify(t);return n in e.cache||(e.cache[n]=i.apply(i,t)),e.cache[n]}}function Xn(e){return Object.keys(e.signatures||{}).reduce(function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var Qn=["typed"],Kn=Object(s.a)("filter",Qn,function(e){return(0,e.typed)("filter",{"Array, function":ei,"Matrix, function":function(e,t){return e.create(ei(e.toArray(),t))},"Array, RegExp":I.d,"Matrix, RegExp":function(e,t){return e.create(Object(I.d)(e.toArray(),t))}})});function ei(e,n){var i=Xn(n);return Object(I.c)(e,function(e,t,r){return 1===i?n(e):2===i?n(e,[t]):n(e,[t],r)})}var ti="flatten",ri=["typed","matrix"],ni=Object(s.a)(ti,ri,function(e){var t=e.typed,r=e.matrix;return t(ti,{Array:function(e){return Object(I.e)(Object(ae.a)(e))},Matrix:function(e){var t=Object(I.e)(Object(ae.a)(e.toArray()));return r(t)}})}),ii="forEach",ai=["typed"],oi=Object(s.a)(ii,ai,function(e){return(0,e.typed)(ii,{"Array, function":si,"Matrix, function":function(e,t){return e.forEach(t)}})});function si(t,i){var a=Xn(i);!function r(e,n){Array.isArray(e)?Object(I.f)(e,function(e,t){r(e,n.concat(t))}):1===a?i(e):2===a?i(e,n):i(e,n,t)}(t,[])}var ui="getMatrixDataType",ci=["typed"],fi=Object(s.a)(ui,ci,function(e){return(0,e.typed)(ui,{Array:function(e){return Object(I.h)(e,ie.M)},Matrix:function(e){return e.getDataType()}})}),li="identity",pi=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],mi=Object(s.a)(li,pi,function(e){var t=e.typed,r=e.config,n=e.matrix,f=e.BigNumber,l=e.DenseMatrix,p=e.SparseMatrix;return t(li,{"":function(){return"Matrix"===r.matrix?n([]):[]},string:function(e){return n(e)},"number | BigNumber":function(e){return a(e,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return a(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return a(e,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,r){return a(e,t,r)},Array:function(e){return i(e)},"Array, string":function(e,t){return i(e,t)},Matrix:function(e){return i(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return i(e.valueOf(),t)}});function i(e,t){switch(e.length){case 0:return t?n(t):[];case 1:return a(e[0],e[0],t);case 2:return a(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function a(e,t,r){var n=Object(ie.e)(e)||Object(ie.e)(t)?f:null;if(Object(ie.e)(e)&&(e=e.toNumber()),Object(ie.e)(t)&&(t=t.toNumber()),!Object(j.i)(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!Object(j.i)(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var i=n?new f(1):1,a=n?new n(0):0,o=[e,t];if(r){if("sparse"===r)return p.diagonal(o,i,0,a);if("dense"===r)return l.diagonal(o,i,0,a);throw new TypeError('Unknown matrix type "'.concat(r,'"'))}for(var s=Object(I.o)([],o,a),u=e<t?e:t,c=0;c<u;c++)s[c][c]=i;return s}}),hi=["typed","matrix","multiplyScalar"],di=Object(s.a)("kron",hi,function(e){var t=e.typed,r=e.matrix,a=e.multiplyScalar;return t("kron",{"Matrix, Matrix":function(e,t){return r(n(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return r(n(e.toArray(),t))},"Array, Matrix":function(e,t){return r(n(e,t.toArray()))},"Array, Array":n});function n(e,r){if(1===Object(I.a)(e).length&&(e=[e]),1===Object(I.a)(r).length&&(r=[r]),2<Object(I.a)(e).length||2<Object(I.a)(r).length)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(r.length)+")");var n=[],i=[];return e.map(function(t){return r.map(function(e){return i=[],n.push(i),t.map(function(t){return e.map(function(e){return i.push(a(t,e))})})})})&&n}}),yi=["typed"],gi=Object(s.a)("map",yi,function(e){return(0,e.typed)("map",{"Array, function":vi,"Matrix, function":function(e,t){return e.map(t)}})});function vi(t,i){var a=Xn(i);return function r(e,n){return Array.isArray(e)?e.map(function(e,t){return r(e,n.concat(t))}):1===a?i(e):2===a?i(e,n):i(e,n,t)}(t,[])}var bi=["typed","config","matrix","BigNumber"],xi=Object(s.a)("ones",bi,function(e){var t=e.typed,r=e.config,a=e.matrix,o=e.BigNumber;return t("ones",{"":function(){return"Array"===r.matrix?n([]):n([],"default")},"...number | BigNumber | string":function(e){if("string"!=typeof e[e.length-1])return"Array"===r.matrix?n(e):n(e,"default");var t=e.pop();return n(e,t)},Array:n,Matrix:function(e){var t=e.storage();return n(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return n(e.valueOf(),t)}});function n(e,t){var r=function(e){var n=!1;return e.forEach(function(e,t,r){Object(ie.e)(e)&&(n=!0,r[t]=e.toNumber())}),n}(e)?new o(1):1;if(function(e){e.forEach(function(e){if("number"!=typeof e||!Object(j.i)(e)||e<0)throw new Error("Parameters in function ones must be positive integers")})}(e),t){var n=a(t);return 0<e.length?n.resize(e,r):n}var i=[];return 0<e.length?Object(I.o)(i,e,r):i}});function wi(){throw new Error('No "bignumber" implementation available')}function Ni(){throw new Error('No "fraction" implementation available')}function Oi(){throw new Error('No "matrix" implementation available')}var Mi=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],Ei=Object(s.a)("range",Mi,function(e){var t=e.typed,n=e.config,r=e.matrix,o=e.bignumber,s=e.smaller,u=e.smallerEq,c=e.larger,f=e.largerEq;return t("range",{string:a,"string, boolean":a,"number, number":function(e,t){return i(l(e,t,1))},"number, number, number":function(e,t,r){return i(l(e,t,r))},"number, number, boolean":function(e,t,r){return i(r?p(e,t,1):l(e,t,1))},"number, number, number, boolean":function(e,t,r,n){return i(n?p(e,t,r):l(e,t,r))},"BigNumber, BigNumber":function(e,t){return i(m(e,t,new e.constructor(1)))},"BigNumber, BigNumber, BigNumber":function(e,t,r){return i(m(e,t,r))},"BigNumber, BigNumber, boolean":function(e,t,r){var n=e.constructor;return i(r?h(e,t,new n(1)):m(e,t,new n(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,r,n){return i(n?h(e,t,r):m(e,t,r))}});function i(e){return"Matrix"===n.matrix?r?r(e):Oi():e}function a(e,t){var r=function(e){var t=e.split(":").map(function(e){return Number(e)});if(t.some(function(e){return isNaN(e)}))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===o&&wi(),i((t?h:m)(o(r.start),o(r.end),o(r.step)))):i((t?p:l)(r.start,r.end,r.step))}function l(e,t,r){var n=[],i=e;if(0<r)for(;s(i,t);)n.push(i),i+=r;else if(r<0)for(;c(i,t);)n.push(i),i+=r;return n}function p(e,t,r){var n=[],i=e;if(0<r)for(;u(i,t);)n.push(i),i+=r;else if(r<0)for(;f(i,t);)n.push(i),i+=r;return n}function m(e,t,r){var n=o(0),i=[],a=e;if(r.gt(n))for(;s(a,t);)i.push(a),a=a.plus(r);else if(r.lt(n))for(;c(a,t);)i.push(a),a=a.plus(r);return i}function h(e,t,r){var n=o(0),i=[],a=e;if(r.gt(n))for(;u(a,t);)i.push(a),a=a.plus(r);else if(r.lt(n))for(;f(a,t);)i.push(a),a=a.plus(r);return i}}),ji="reshape",Si=["typed","isInteger","matrix"],Ai=Object(s.a)(ji,Si,function(e){var t=e.typed,r=e.isInteger,n=e.matrix;return t(ji,{"Matrix, Array":function(e,t){return e.reshape?e.reshape(t):n(Object(I.n)(e.valueOf(),t))},"Array, Array":function(e,t){return t.forEach(function(e){if(!r(e))throw new TypeError("Invalid size for dimension: "+e)}),Object(I.n)(e,t)}})}),Ci=r(13),Ti=["config","matrix"],_i=Object(s.a)("resize",Ti,function(e){var a=e.config,o=e.matrix;return function(e,t,r){if(2!==arguments.length&&3!==arguments.length)throw new Ci.a("resize",arguments.length,2,3);if(Object(ie.v)(t)&&(t=t.valueOf()),Object(ie.e)(t[0])&&(t=t.map(function(e){return Object(ie.e)(e)?e.toNumber():e})),Object(ie.v)(e))return e.resize(t,r,!0);if("string"==typeof e)return function(e,t,r){if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";if(1!==t.length)throw new D.a(t.length,1);var n=t[0];if("number"!=typeof n||!Object(j.i)(n))throw new TypeError("Invalid size, must contain positive integers (size: "+Object(J.d)(t)+")");{if(e.length>n)return e.substring(0,n);if(e.length<n){for(var i=e,a=0,o=n-e.length;a<o;a++)i+=r;return i}return e}}(e,t,r);var n=!Array.isArray(e)&&"Array"!==a.matrix;if(0===t.length){for(;Array.isArray(e);)e=e[0];return Object(ae.a)(e)}Array.isArray(e)||(e=[e]),e=Object(ae.a)(e);var i=Object(I.o)(e,t,r);return n?o(i):i}}),Ii=["typed","Index","matrix","range"],Bi=Object(s.a)("row",Ii,function(e){var t=e.typed,i=e.Index,r=e.matrix,a=e.range;return t("row",{"Matrix, number":n,"Array, number":function(e,t){return n(r(Object(ae.a)(e)),t).valueOf()}});function n(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");Object(I.s)(t,e.size()[0]);var r=a(0,e.size()[1]),n=new i(t,r);return e.subset(n)}}),qi=["typed","config","?matrix"],ki=Object(s.a)("size",qi,function(e){var t=e.typed,r=e.config,n=e.matrix;return t("size",{Matrix:function(e){return e.create(e.size())},Array:I.a,string:function(e){return"Array"===r.matrix?[e.length]:n([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===r.matrix?[]:n?n([]):Oi()}})}),zi="squeeze",Di=["typed","matrix"],Ri=Object(s.a)(zi,Di,function(e){var t=e.typed,r=e.matrix;return t(zi,{Array:function(e){return Object(I.p)(Object(ae.a)(e))},Matrix:function(e){var t=Object(I.p)(e.toArray());return Array.isArray(t)?r(t):t},any:function(e){return Object(ae.a)(e)}})});function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){if($i(e)&&Li(e,t))return e[t];if("function"==typeof e[t]&&Hi(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function Ui(e,t,r){if($i(e)&&Li(e,t))return e[t]=r;throw new Error('No access to property "'+t+'"')}function Li(e,t){return!(!e||"object"!==Pi(e))&&(!!Object(ae.f)(Gi,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function Hi(e,t){return null!=e&&"function"==typeof e[t]&&(!(Object(ae.f)(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e))&&(!!Object(ae.f)(Zi,t)||!(t in Object.prototype)&&!(t in Function.prototype)))}function $i(e){return"object"===Pi(e)&&e&&e.constructor===Object}var Gi={length:!0,name:!0},Zi={toString:!0,valueOf:!0,toLocaleString:!0},Vi=["typed","matrix"],Ji=Object(s.a)("subset",Vi,function(e){var t=e.typed,i=e.matrix;return t("subset",{"Array, Index":function(e,t){var r=i(e).subset(t);return t.isScalar()?r:r.valueOf()},"Matrix, Index":function(e,t){return e.subset(t)},"Object, Index":Xi,"string, Index":Wi,"Array, Index, any":function(e,t,r){return i(Object(ae.a)(e)).subset(t,r,void 0).valueOf()},"Array, Index, any, any":function(e,t,r,n){return i(Object(ae.a)(e)).subset(t,r,n).valueOf()},"Matrix, Index, any":function(e,t,r){return e.clone().subset(t,r)},"Matrix, Index, any, any":function(e,t,r,n){return e.clone().subset(t,r,n)},"string, Index, string":Yi,"string, Index, string, string":Yi,"Object, Index, any":Qi})});function Wi(t,e){if(!Object(ie.t)(e))throw new TypeError("Index expected");if(1!==e.size().length)throw new D.a(e.size().length,1);var r=t.length;Object(I.s)(e.min()[0],r),Object(I.s)(e.max()[0],r);var n=e.dimension(0),i="";return n.forEach(function(e){i+=t.charAt(e)}),i}function Yi(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(1!==t.size().length)throw new D.a(t.size().length,1);if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=t.dimension(0);if(i.size()[0]!==r.length)throw new D.a(i.size()[0],r.length);var a=e.length;Object(I.s)(t.min()[0]),Object(I.s)(t.max()[0]);for(var o=[],s=0;s<a;s++)o[s]=e.charAt(s);if(i.forEach(function(e,t){o[e]=r.charAt(t[0])}),o.length>a)for(var u=a-1,c=o.length;u<c;u++)o[u]||(o[u]=n);return o.join("")}function Xi(e,t){if(1!==t.size().length)throw new D.a(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");return Fi(e,r)}function Qi(e,t,r){if(1!==t.size().length)throw new D.a(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");var i=Object(ae.a)(e);return Ui(i,n,r),i}var Ki=["typed","matrix"],ea=Object(s.a)("transpose",Ki,function(e){var t=e.typed,r=e.matrix,n=t("transpose",{Array:function(e){return n(r(e)).valueOf()},Matrix:function(e){var t,r=e.size();switch(r.length){case 1:t=e.clone();break;case 2:var n=r[0],i=r[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Object(J.d)(r)+")");switch(e.storage()){case"dense":t=function(e,t,r){for(var n,i=e._data,a=[],o=0;o<r;o++){n=a[o]=[];for(var s=0;s<t;s++)n[s]=Object(ae.a)(i[s][o])}return e.createDenseMatrix({data:a,size:[r,t],datatype:e._datatype})}(e,n,i);break;case"sparse":t=function(e,t,r){for(var n,i,a,o=e._values,s=e._index,u=e._ptr,c=o?[]:void 0,f=[],l=[],p=[],m=0;m<t;m++)p[m]=0;for(n=0,i=s.length;n<i;n++)p[s[n]]++;for(var h=0,d=0;d<t;d++)l.push(h),h+=p[d],p[d]=l[d];for(l.push(h),a=0;a<r;a++)for(var y=u[a],g=u[a+1],v=y;v<g;v++){var b=p[s[v]]++;f[b]=a,o&&(c[b]=Object(ae.a)(o[v]))}return e.createSparseMatrix({values:c,index:f,ptr:l,size:[r,t],datatype:e._datatype})}(e,n,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Object(J.d)(this._size)+")")}return t},any:function(e){return Object(ae.a)(e)}});return n}),ta="ctranspose",ra=["typed","transpose","conj"],na=Object(s.a)(ta,ra,function(e){var t=e.typed,r=e.transpose,n=e.conj;return t(ta,{any:function(e){return n(r(e))}})}),ia=["typed","config","matrix","BigNumber"],aa=Object(s.a)("zeros",ia,function(e){var t=e.typed,r=e.config,a=e.matrix,o=e.BigNumber;return t("zeros",{"":function(){return"Array"===r.matrix?n([]):n([],"default")},"...number | BigNumber | string":function(e){if("string"!=typeof e[e.length-1])return"Array"===r.matrix?n(e):n(e,"default");var t=e.pop();return n(e,t)},Array:n,Matrix:function(e){var t=e.storage();return n(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return n(e.valueOf(),t)}});function n(e,t){var r=function(e){var n=!1;return e.forEach(function(e,t,r){Object(ie.e)(e)&&(n=!0,r[t]=e.toNumber())}),n}(e)?new o(0):0;if(function(e){e.forEach(function(e){if("number"!=typeof e||!Object(j.i)(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")})}(e),t){var n=a(t);return 0<e.length?n.resize(e,r):n}var i=[];return 0<e.length?Object(I.o)(i,e,r):i}}),oa=["typed"],sa=Object(s.a)("erf",oa,function(e){var t=(0,e.typed)("name",{number:function(e){var t=Math.abs(e);return pa<=t?Object(j.n)(e):t<=ua?Object(j.n)(e)*function(e){var t,r=e*e,n=fa[0][4]*r,i=r;for(t=0;t<3;t+=1)n=(n+fa[0][t])*r,i=(i+la[0][t])*r;return e*(n+fa[0][3])/(i+la[0][3])}(t):t<=4?Object(j.n)(e)*(1-function(e){var t,r=fa[1][8]*e,n=e;for(t=0;t<7;t+=1)r=(r+fa[1][t])*e,n=(n+la[1][t])*e;var i=(r+fa[1][7])/(n+la[1][7]),a=parseInt(16*e)/16,o=(e-a)*(e+a);return Math.exp(-a*a)*Math.exp(-o)*i}(t)):Object(j.n)(e)*(1-function(e){var t,r=1/(e*e),n=fa[2][5]*r,i=r;for(t=0;t<4;t+=1)n=(n+fa[2][t])*r,i=(i+la[2][t])*r;var a=r*(n+fa[2][4])/(i+la[2][4]);a=(ca-a)/e,r=parseInt(16*e)/16;var o=(e-r)*(e+r);return Math.exp(-r*r)*Math.exp(-o)*a}(t))},"Array | Matrix":function(e){return oe(e,t)}});return t}),ua=.46875,ca=.5641895835477563,fa=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],la=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],pa=Math.pow(2,53),ma=["typed","isNaN","isNumeric"],ha=Object(s.a)("mode",ma,function(e){var t=e.typed,o=e.isNaN,s=e.isNumeric;return t("mode",{"Array | Matrix":r,"...":function(e){return r(e)}});function r(e){if(0===(e=Object(I.e)(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var t={},r=[],n=0,i=0;i<e.length;i++){var a=e[i];if(s(a)&&o(a))throw new Error("Cannot calculate mode of an array containing NaN values");a in t||(t[a]=0),t[a]++,t[a]===n?r.push(a):t[a]>n&&(n=t[a],r=[a])}return r}});function da(e,t,r){var n;return-1!==String(e).indexOf("Unexpected type")?(n=2<arguments.length?" (type: "+Object(ie.M)(r)+", value: "+JSON.stringify(r)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+n)):-1!==String(e).indexOf("complex numbers")?(n=2<arguments.length?" (type: "+Object(ie.M)(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+n)):e}var ya=["typed","multiply"],ga=Object(s.a)("prod",ya,function(e){var t=e.typed,n=e.multiply;return t("prod",{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("prod(A, dim) is not yet supported")},"...":function(e){return r(e)}});function r(e){var r;if(F(e,function(t){try{r=void 0===r?t:n(r,t)}catch(e){throw da(e,"prod",t)}}),void 0===r)throw new Error("Cannot calculate prod of an empty array");return r}}),va=["typed"],ba=Object(s.a)("format",va,function(e){return(0,e.typed)("format",{any:J.d,"any, Object | function | number":J.d})}),xa=["typed"],wa=Object(s.a)("print",xa,function(e){return(0,e.typed)("print",{"string, Object | Array":Na,"string, Object | Array, number | Object":Na})});function Na(e,a,o){return e.replace(/\$([\w.]+)/g,function(e,t){for(var r=t.split("."),n=a[r.shift()];r.length&&void 0!==n;){var i=r.shift();n=i?n[i]:n+"."}return void 0!==n?Object(ie.I)(n)?n:Object(J.d)(n,o):e})}var Oa=["typed","matrix"],Ma=Object(s.a)("to",Oa,function(e){var t=e.typed,r=e.matrix,n=Xt({typed:t}),i=Kt({typed:t}),a=t("to",{"Unit, Unit | string":function(e,t){return e.to(t)},"Matrix, Matrix":function(e,t){return n(e,t,a)},"Array, Array":function(e,t){return a(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return a(r(e),t)},"Matrix, Array":function(e,t){return a(e,r(t))},"Matrix, any":function(e,t){return i(e,t,a,!1)},"any, Matrix":function(e,t){return i(t,e,a,!0)},"Array, any":function(e,t){return i(r(e),t,a,!1).valueOf()},"any, Array":function(e,t){return i(r(t),e,a,!0).valueOf()}});return a}),Ea="isPrime",ja=["typed"],Sa=Object(s.a)(Ea,ja,function(e){var t=(0,e.typed)(Ea,{number:function(e){if(e<2)return!1;if(2===e)return!0;if(e%2==0)return!1;for(var t=3;t*t<=e;t+=2)if(e%t==0)return!1;return!0},BigNumber:function(e){if(e.lt(2))return!1;if(e.equals(2))return!0;if(e.mod(2).isZero())return!1;for(var t=new e.constructor(3);t.times(t).lte(e);t=t.plus(1))if(e.mod(t).isZero())return!1;return!0},"Array | Matrix":function(e){return oe(e,t)}});return t}),Aa=["number","?bignumber","?fraction"],Ca=Object(s.a)("numeric",Aa,function(e){var t=e.number,r=e.bignumber,n=e.fraction,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:function(e){return t(e)},BigNumber:r?function(e){return r(e)}:wi,Fraction:n?function(e){return n(e)}:Ni};return function(e,t){var r=Object(ie.M)(e);if(!(r in i))throw new TypeError("Cannot convert "+e+' of type "'+r+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in a))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(a).join(", "));return t===r?e:a[t](e)}}),Ta="divideScalar",_a=["typed","numeric"],Ia=Object(s.a)(Ta,_a,function(e){var t=e.typed,i=e.numeric,a=t(Ta,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var r=e.clone(),n=i(1,Object(ie.M)(t));return r.value=a(null===r.value?r._normalize(n):r.value,t),r},"number | Fraction | BigNumber, Unit":function(e,t){var r=t.clone();r=r.pow(-1);var n=i(1,Object(ie.M)(e));return r.value=a(e,null===t.value?t._normalize(n):t.value),r},"Unit, Unit":function(e,t){return e.divide(t)}});return a}),Ba=["typed","config","identity","multiply","matrix","fraction","number","Complex"],qa=Object(s.a)("pow",Ba,function(e){var t=e.typed,i=e.config,a=e.identity,o=e.multiply,r=e.matrix,s=e.number,u=e.fraction,c=e.Complex;return t("pow",{"number, number":n,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||0<=e||i.predictable?e.pow(t):new c(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){if(1===t.d)return e.pow(t);if(i.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return n(e.valueOf(),t.valueOf())},"Array, number":f,"Array, BigNumber":function(e,t){return f(e,t.toNumber())},"Matrix, number":l,"Matrix, BigNumber":function(e,t){return l(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function n(e,t){if(i.predictable&&!Object(j.i)(t)&&e<0)try{var r=u(t),n=s(r);if((t===n||Math.abs((t-n)/t)<1e-14)&&r.d%2==1)return(r.n%2==0?1:-1)*Math.pow(-e,t)}catch(e){}return i.predictable&&(e<-1&&t===1/0||-1<e&&e<0&&t===-1/0)?NaN:Object(j.i)(t)||0<=e||i.predictable?ht(e,t):e*e<1&&t===1/0||1<e*e&&t===-1/0?0:new c(e,0).pow(t,0)}function f(e,t){if(!Object(j.i)(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var r=Object(I.a)(e);if(2!==r.length)throw new Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!==r[1])throw new Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");for(var n=a(r[0]).valueOf(),i=e;1<=t;)1==(1&t)&&(n=o(i,n)),t>>=1,i=o(i,i);return n}function l(e,t){return r(f(e.valueOf(),t))}});function ka(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function za(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Da="Number of decimals in function round must be an integer",Ra="round",Pa=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Fa=Object(s.a)(Ra,Pa,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.BigNumber,o=e.DenseMatrix,s=sr({typed:t,equalScalar:n}),u=br({typed:t,DenseMatrix:o}),c=Kt({typed:t}),f=t(Ra,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ka(r,!0).forEach(function(e){za(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ka(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},Ua,{Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(Da);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Da);var r=t.toNumber();return e.round(r)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Da);return new a(e).toDecimalPlaces(t.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Da);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(Da);return e.round(t)},"Array | Matrix":function(e){return oe(e,f,!0)},"SparseMatrix, number | BigNumber":function(e,t){return s(e,t,f,!1)},"DenseMatrix, number | BigNumber":function(e,t){return c(e,t,f,!1)},"number | Complex | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):u(t,e,f,!0)},"number | Complex | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):c(t,e,f,!0)},"Array, number | BigNumber":function(e,t){return c(r(e),t,f,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return c(r(t),e,f,!0).valueOf()}}));return f}),Ua={number:dt,"number, number":function(e,t){if(!Object(j.i)(t))throw new TypeError(Da);if(t<0||15<t)throw new Error("Number of decimals in function round must be in te range of 0-15");return dt(e,t)}},La=["config","typed","divideScalar","Complex"],Ha=Object(s.a)("log",La,function(e){var t=e.typed,r=e.config,n=e.divideScalar,i=e.Complex,a=t("log",{number:function(e){return 0<=e||r.predictable?ot(e):new i(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||r.predictable?e.ln():new i(e.toNumber(),0).log()},"Array | Matrix":function(e){return oe(e,a)},"any, any":function(e,t){return n(a(e),a(t))}});return a}),$a=["typed","config","divideScalar","log","Complex"],Ga=Object(s.a)("log1p",$a,function(e){var t=e.typed,r=e.config,n=e.divideScalar,i=e.log,a=e.Complex,o=t("log1p",{number:function(e){return-1<=e||r.predictable?Object(j.k)(e):s(new a(e,0))},Complex:s,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||r.predictable?t.ln():s(new a(e.toNumber(),0))},"Array | Matrix":function(e){return oe(e,o)},"any, any":function(e,t){return n(o(e),i(t))}});function s(e){var t=e.re+1;return new a(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}return o}),Za="nthRoots",Va=["config","typed","divideScalar","Complex"],Ja=Object(s.a)(Za,Va,function(e){var t=e.typed,f=(e.config,e.divideScalar,e.Complex),r=t(Za,{Complex:function(e){return n(e,2)},"Complex, number":n}),l=[function(e){return new f(e,0)},function(e){return new f(0,e)},function(e){return new f(-e,0)},function(e){return new f(0,-e)}];function n(e,t){if(t<0)throw new Error("Root must be greater than zero");if(0===t)throw new Error("Root must be non-zero");if(t%1!=0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new f(0,0)];var r,n="number"==typeof e;!n&&0!==e.re&&0!==e.im||(r=n?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var i=e.arg(),a=e.abs(),o=[],s=Math.pow(a,1/t),u=0;u<t;u++){var c=(r+4*u)/t;c!==Math.round(c)?o.push(new f({r:s,phi:(i+2*Math.PI*u)/t})):o.push(l[c%4](s))}return o}return r}),Wa=["typed","equalScalar","matrix","pow","DenseMatrix"],Ya=Object(s.a)("dotPow",Wa,function(e){var t=e.typed,r=e.equalScalar,n=e.matrix,i=e.pow,a=e.DenseMatrix,o=dr({typed:t}),s=gn({typed:t,DenseMatrix:a}),u=sr({typed:t,equalScalar:r}),c=br({typed:t,DenseMatrix:a}),f=Xt({typed:t}),l=Kt({typed:t}),p=t("dotPow",{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,i)},"Array, Array":function(e,t){return p(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return p(n(e),t)},"Matrix, Array":function(e,t){return p(e,n(t))},"SparseMatrix, any":function(e,t){return u(e,t,p,!1)},"DenseMatrix, any":function(e,t){return l(e,t,p,!1)},"any, SparseMatrix":function(e,t){return c(t,e,p,!0)},"any, DenseMatrix":function(e,t){return l(t,e,p,!0)},"Array, any":function(e,t){return l(n(e),t,p,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,p,!0).valueOf()}});return p}),Xa="dotDivide",Qa=["typed","matrix","equalScalar","divideScalar","DenseMatrix"],Ka=Object(s.a)(Xa,Qa,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.divideScalar,a=e.DenseMatrix,o=nr({typed:t,equalScalar:n}),s=dr({typed:t}),u=gn({typed:t,DenseMatrix:a}),c=sr({typed:t,equalScalar:n}),f=br({typed:t,DenseMatrix:a}),l=Xt({typed:t}),p=Kt({typed:t}),m=t(Xa,{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,i)},"Array, Array":function(e,t){return m(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return m(r(e),t)},"Matrix, Array":function(e,t){return m(e,r(t))},"SparseMatrix, any":function(e,t){return c(e,t,i,!1)},"DenseMatrix, any":function(e,t){return p(e,t,i,!1)},"any, SparseMatrix":function(e,t){return f(t,e,i,!0)},"any, DenseMatrix":function(e,t){return p(t,e,i,!0)},"Array, any":function(e,t){return p(r(e),t,i,!1).valueOf()},"any, Array":function(e,t){return p(r(t),e,i,!0).valueOf()}});return m});function eo(e){var d=e.DenseMatrix;return function(e,t,r){var n=e.size();if(2!==n.length)throw new RangeError("Matrix must be two dimensional (size: "+Object(J.d)(n)+")");var i,a,o,s=n[0];if(s!==n[1])throw new RangeError("Matrix must be square (size: "+Object(J.d)(n)+")");if(Object(ie.v)(t)){var u=t.size();if(1===u.length){if(u[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(i=[],o=t._data,a=0;a<s;a++)i[a]=[o[a]];return new d({data:i,size:[s,1],datatype:t._datatype})}if(2!==u.length)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(u[0]!==s||1!==u[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Object(ie.n)(t)){if(r){for(i=[],o=t._data,a=0;a<s;a++)i[a]=[o[a][0]];return new d({data:i,size:[s,1],datatype:t._datatype})}return t}for(i=[],a=0;a<s;a++)i[a]=[0];for(var c=t._values,f=t._index,l=t._ptr,p=l[1],m=l[0];m<p;m++)i[a=f[m]][0]=c[m];return new d({data:i,size:[s,1],datatype:t._datatype})}if(Object(ie.b)(t)){var h=Object(I.a)(t);if(1===h.length){if(h[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(i=[],a=0;a<s;a++)i[a]=[t[a]];return new d({data:i,size:[s,1]})}if(2!==h.length)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(h[0]!==s||1!==h[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(i=[],a=0;a<s;a++)i[a]=[t[a][0]];return new d({data:i,size:[s,1]})}}}var to=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],ro=Object(s.a)("lsolve",to,function(e){var t=e.typed,r=e.matrix,v=e.divideScalar,b=e.multiplyScalar,x=e.subtract,w=e.equalScalar,N=e.DenseMatrix,O=eo({DenseMatrix:N});return t("lsolve",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r,n,i=(t=O(e,t,!0))._data,a=e._size[0],o=e._size[1],s=e._values,u=e._index,c=e._ptr,f=[],l=0;l<o;l++){var p=i[l][0]||0;if(w(p,0))f[l]=[0];else{var m=0,h=[],d=[],y=c[l+1];for(n=c[l];n<y;n++)(r=u[n])===l?m=s[n]:l<r&&(h.push(s[n]),d.push(r));if(w(m,0))throw new Error("Linear system cannot be solved since matrix is singular");var g=v(p,m);for(n=0,y=d.length;n<y;n++)r=d[n],i[r]=[x(i[r][0]||0,b(g,h[n]))];f[l]=[g]}}return new N({data:f,size:[a,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return n(e,t)},"Array, Array | Matrix":function(e,t){return n(r(e),t).valueOf()}});function n(e,t){for(var r=(t=O(e,t,!0))._data,n=e._size[0],i=e._size[1],a=[],o=e._data,s=0;s<i;s++){var u=r[s][0]||0,c=void 0;if(w(u,0))c=0;else{var f=o[s][s];if(w(f,0))throw new Error("Linear system cannot be solved since matrix is singular");c=v(u,f);for(var l=s+1;l<n;l++)r[l]=[x(r[l][0]||0,b(c,o[l][s]))]}a[s]=[c]}return new N({data:a,size:[n,1]})}}),no=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],io=Object(s.a)("usolve",no,function(e){var t=e.typed,r=e.matrix,b=e.divideScalar,x=e.multiplyScalar,w=e.subtract,N=e.equalScalar,O=e.DenseMatrix,M=eo({DenseMatrix:O});return t("usolve",{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r,n,i=(t=M(e,t,!0))._data,a=e._size[0],o=e._size[1],s=e._values,u=e._index,c=e._ptr,f=[],l=o-1;0<=l;l--){var p=i[l][0]||0;if(N(p,0))f[l]=[0];else{var m=0,h=[],d=[],y=c[l],g=c[l+1];for(n=g-1;y<=n;n--)(r=u[n])===l?m=s[n]:r<l&&(h.push(s[n]),d.push(r));if(N(m,0))throw new Error("Linear system cannot be solved since matrix is singular");var v=b(p,m);for(n=0,g=d.length;n<g;n++)r=d[n],i[r]=[w(i[r][0],x(v,h[n]))];f[l]=[v]}}return new O({data:f,size:[a,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return n(e,t)},"Array, Array | Matrix":function(e,t){return n(r(e),t).valueOf()}});function n(e,t){for(var r=(t=M(e,t,!0))._data,n=e._size[0],i=e._size[1],a=[],o=e._data,s=i-1;0<=s;s--){var u=r[s][0]||0,c=void 0;if(N(u,0))c=0;else{var f=o[s][s];if(N(f,0))throw new Error("Linear system cannot be solved since matrix is singular");c=b(u,f);for(var l=s-1;0<=l;l--)r[l]=[w(r[l][0]||0,x(c,o[l][s]))]}a[s]=[c]}return new O({data:a,size:[n,1]})}}),ao=["typed","equalScalar"],oo=Object(s.a)("algorithm08",ao,function(e){var I=e.typed,B=e.equalScalar;return function(e,t,r){var n=e._values,i=e._index,a=e._ptr,o=e._size,s=e._datatype,u=t._values,c=t._index,f=t._ptr,l=t._size,p=t._datatype;if(o.length!==l.length)throw new D.a(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");if(!n||!u)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,h=o[0],d=o[1],y=B,g=0,v=r;"string"==typeof s&&s===p&&(m=s,y=I.find(B,[m,m]),g=I.convert(0,m),v=I.find(r,[m,m]));for(var b,x,w,N,O=[],M=[],E=[],j=e.createSparseMatrix({values:O,index:M,ptr:E,size:[h,d],datatype:m}),S=[],A=[],C=0;C<d;C++){E[C]=M.length;var T=C+1;for(x=a[C],w=a[C+1],b=x;b<w;b++)A[N=i[b]]=T,S[N]=n[b],M.push(N);for(x=f[C],w=f[C+1],b=x;b<w;b++)A[N=c[b]]===T&&(S[N]=v(S[N],u[b]));for(b=E[C];b<M.length;){var _=S[N=M[b]];y(_,g)?M.splice(b,1):(O.push(_),b++)}}return E[d]=M.length,j}}),so="leftShift",uo=["typed","matrix","equalScalar","zeros","DenseMatrix"],co=Object(s.a)(so,uo,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=Gt({typed:t}),s=nr({typed:t,equalScalar:n}),u=oo({typed:t,equalScalar:n}),c=Wt({typed:t,DenseMatrix:a}),f=sr({typed:t,equalScalar:n}),l=Xt({typed:t}),p=Kt({typed:t}),m=t(so,{"number, number":sn,"BigNumber, BigNumber":Kr,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,m,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,m,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,m,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,m)},"Array, Array":function(e,t){return m(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return m(r(e),t)},"Matrix, Array":function(e,t){return m(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():f(e,t,m,!1)},"DenseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():p(e,t,m,!1)},"number | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):c(t,e,m,!0)},"number | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):p(t,e,m,!0)},"Array, number | BigNumber":function(e,t){return m(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return m(e,r(t)).valueOf()}});return m}),fo="rightArithShift",lo=["typed","matrix","equalScalar","zeros","DenseMatrix"],po=Object(s.a)(fo,lo,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=Gt({typed:t}),s=nr({typed:t,equalScalar:n}),u=oo({typed:t,equalScalar:n}),c=Wt({typed:t,DenseMatrix:a}),f=sr({typed:t,equalScalar:n}),l=Xt({typed:t}),p=Kt({typed:t}),m=t(fo,{"number, number":un,"BigNumber, BigNumber":en,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,m,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,m,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,m,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,m)},"Array, Array":function(e,t){return m(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return m(r(e),t)},"Matrix, Array":function(e,t){return m(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():f(e,t,m,!1)},"DenseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():p(e,t,m,!1)},"number | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):c(t,e,m,!0)},"number | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):p(t,e,m,!0)},"Array, number | BigNumber":function(e,t){return m(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return m(e,r(t)).valueOf()}});return m}),mo="rightLogShift",ho=["typed","matrix","equalScalar","zeros","DenseMatrix"],yo=Object(s.a)(mo,ho,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.DenseMatrix,o=Gt({typed:t}),s=nr({typed:t,equalScalar:n}),u=oo({typed:t,equalScalar:n}),c=Wt({typed:t,DenseMatrix:a}),f=sr({typed:t,equalScalar:n}),l=Xt({typed:t}),p=Kt({typed:t}),m=t(mo,{"number, number":cn,"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,m,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,m,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,m,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,m)},"Array, Array":function(e,t){return m(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return m(r(e),t)},"Matrix, Array":function(e,t){return m(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():f(e,t,m,!1)},"DenseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():p(e,t,m,!1)},"number | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):c(t,e,m,!0)},"number | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):p(t,e,m,!0)},"Array, number | BigNumber":function(e,t){return m(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return m(e,r(t)).valueOf()}});return m}),go=["typed","matrix","equalScalar","zeros","not"],vo=Object(s.a)("and",go,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.zeros,a=e.not,o=nr({typed:t,equalScalar:n}),s=ar({typed:t,equalScalar:n}),u=sr({typed:t,equalScalar:n}),c=Xt({typed:t}),f=Kt({typed:t}),l=t("and",{"number, number":In,"Complex, Complex":function(e,t){return!(0===e.re&&0===e.im||0===t.re&&0===t.im)},"BigNumber, BigNumber":function(e,t){return!(e.isZero()||t.isZero()||e.isNaN()||t.isNaN())},"Unit, Unit":function(e,t){return l(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,l,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return a(t)?i(e.size(),e.storage()):u(e,t,l,!1)},"DenseMatrix, any":function(e,t){return a(t)?i(e.size(),e.storage()):f(e,t,l,!1)},"any, SparseMatrix":function(e,t){return a(e)?i(e.size(),e.storage()):u(t,e,l,!0)},"any, DenseMatrix":function(e,t){return a(e)?i(e.size(),e.storage()):f(t,e,l,!0)},"Array, any":function(e,t){return l(r(e),t).valueOf()},"any, Array":function(e,t){return l(e,r(t)).valueOf()}});return l}),bo="compare",xo=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],wo=Object(s.a)(bo,xo,function(e){var t=e.typed,r=e.config,n=e.equalScalar,i=e.matrix,a=e.BigNumber,o=e.Fraction,s=e.DenseMatrix,u=dr({typed:t}),c=gr({typed:t,equalScalar:n}),f=br({typed:t,DenseMatrix:s}),l=Xt({typed:t}),p=Kt({typed:t}),m=t(bo,{"boolean, boolean":function(e,t){return e===t?0:t<e?1:-1},"number, number":function(e,t){return Object(j.m)(e,t,r.epsilon)?0:t<e?1:-1},"BigNumber, BigNumber":function(e,t){return Ne(e,t,r.epsilon)?new a(0):new a(e.cmp(t))},"Fraction, Fraction":function(e,t){return new o(e.compare(t))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return m(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return c(e,t,m)},"SparseMatrix, DenseMatrix":function(e,t){return u(t,e,m,!0)},"DenseMatrix, SparseMatrix":function(e,t){return u(e,t,m,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,m)},"Array, Array":function(e,t){return m(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return m(i(e),t)},"Matrix, Array":function(e,t){return m(e,i(t))},"SparseMatrix, any":function(e,t){return f(e,t,m,!1)},"DenseMatrix, any":function(e,t){return p(e,t,m,!1)},"any, SparseMatrix":function(e,t){return f(t,e,m,!0)},"any, DenseMatrix":function(e,t){return p(t,e,m,!0)},"Array, any":function(e,t){return p(i(e),t,m,!1).valueOf()},"any, Array":function(e,t){return p(i(t),e,m,!0).valueOf()}});return m}),No=r(12),Oo=r.n(No),Mo="compareNatural",Eo=["typed","compare"],jo=Object(s.a)(Mo,Eo,function(e){var t=e.typed,a=e.compare,o=a.signatures["boolean,boolean"],s=t(Mo,{"any, any":function(e,t){var r,n=Object(ie.M)(e),i=Object(ie.M)(t);if(!("number"!==n&&"BigNumber"!==n&&"Fraction"!==n||"number"!==i&&"BigNumber"!==i&&"Fraction"!==i))return"0"!==(r=a(e,t)).toString()?0<r?1:-1:Oo()(n,i);if("Array"===n||"Matrix"===n||"Array"===i||"Matrix"===i)return 0!==(r=function e(t,r){if(Object(ie.H)(t)&&Object(ie.H)(r))return u(t.toJSON().values,r.toJSON().values);if(Object(ie.H)(t))return e(t.toArray(),r);if(Object(ie.H)(r))return e(t,r.toArray());if(Object(ie.n)(t))return e(t.toJSON().data,r);if(Object(ie.n)(r))return e(t,r.toJSON().data);if(!Array.isArray(t))return e([t],r);if(!Array.isArray(r))return e(t,[r]);return u(t,r)}(e,t))?r:Oo()(n,i);if(n!==i)return Oo()(n,i);if("Complex"===n)return function(e,t){if(e.re>t.re)return 1;if(e.re<t.re)return-1;if(e.im>t.im)return 1;if(e.im<t.im)return-1;return 0}(e,t);if("Unit"===n)return e.equalBase(t)?s(e.value,t.value):u(e.formatUnits(),t.formatUnits());if("boolean"===n)return o(e,t);if("string"===n)return Oo()(e,t);if("Object"===n)return function(e,t){var r=Object.keys(e),n=Object.keys(t);r.sort(Oo.a),n.sort(Oo.a);var i=u(r,n);if(0!==i)return i;for(var a=0;a<r.length;a++){var o=s(e[r[a]],t[n[a]]);if(0!==o)return o}return 0}(e,t);if("null"===n)return 0;if("undefined"===n)return 0;throw new TypeError('Unsupported type of value "'+n+'"')}});function u(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++){var i=s(e[r],t[r]);if(0!==i)return i}return e.length>t.length?1:e.length<t.length?-1:0}return s});var So="compareText",Ao=["typed","matrix"],Co=Object(s.a)(So,Ao,function(e){var t=e.typed,r=e.matrix,n=Xt({typed:t}),i=Kt({typed:t}),a=t(So,{"any, any":J.a,"DenseMatrix, DenseMatrix":function(e,t){return n(e,t,J.a)},"Array, Array":function(e,t){return a(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return a(r(e),t)},"Matrix, Array":function(e,t){return a(e,r(t))},"DenseMatrix, any":function(e,t){return i(e,t,J.a,!1)},"any, DenseMatrix":function(e,t){return i(t,e,J.a,!0)},"Array, any":function(e,t){return i(r(e),t,J.a,!1).valueOf()},"any, Array":function(e,t){return i(r(t),e,J.a,!0).valueOf()}});return a}),To="equal",_o=["typed","matrix","equalScalar","DenseMatrix"],Io=Object(s.a)(To,_o,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.DenseMatrix,a=dr({typed:t}),o=gn({typed:t,DenseMatrix:i}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t(To,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,n)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,n,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,n,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,n)},"Array, Array":function(e,t){return f(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return f(r(e),t)},"Matrix, Array":function(e,t){return f(e,r(t))},"SparseMatrix, any":function(e,t){return s(e,t,n,!1)},"DenseMatrix, any":function(e,t){return c(e,t,n,!1)},"any, SparseMatrix":function(e,t){return s(t,e,n,!0)},"any, DenseMatrix":function(e,t){return c(t,e,n,!0)},"Array, any":function(e,t){return c(r(e),t,n,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,n,!0).valueOf()}});return f}),Bo=(Object(s.a)(To,["typed","equalScalar"],function(e){var t=e.typed,r=e.equalScalar;return t(To,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)}})}),"equalText"),qo=["typed","compareText","isZero"],ko=Object(s.a)(Bo,qo,function(e){var t=e.typed,r=e.compareText,n=e.isZero;return t(Bo,{"any, any":function(e,t){return n(r(e,t))}})}),zo="smaller",Do=["typed","config","matrix","DenseMatrix"],Ro=Object(s.a)(zo,Do,function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=dr({typed:t}),o=gn({typed:t,DenseMatrix:i}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t(zo,{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!Object(j.m)(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!Ne(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return f(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(n(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,f,!0).valueOf()}});return f}),Po="smallerEq",Fo=["typed","config","matrix","DenseMatrix"],Uo=Object(s.a)(Po,Fo,function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=dr({typed:t}),o=gn({typed:t,DenseMatrix:i}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t(Po,{"boolean, boolean":function(e,t){return e<=t},"number, number":function(e,t){return e<=t||Object(j.m)(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lte(t)||Ne(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return 1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return f(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(n(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,f,!0).valueOf()}});return f}),Lo="larger",Ho=["typed","config","matrix","DenseMatrix"],$o=Object(s.a)(Lo,Ho,function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=dr({typed:t}),o=gn({typed:t,DenseMatrix:i}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t(Lo,{"boolean, boolean":function(e,t){return t<e},"number, number":function(e,t){return t<e&&!Object(j.m)(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!Ne(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return f(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(n(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,f,!0).valueOf()}});return f}),Go="largerEq",Zo=["typed","config","matrix","DenseMatrix"],Vo=Object(s.a)(Go,Zo,function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.DenseMatrix,a=dr({typed:t}),o=gn({typed:t,DenseMatrix:i}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t(Go,{"boolean, boolean":function(e,t){return t<=e},"number, number":function(e,t){return t<=e||Object(j.m)(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gte(t)||Ne(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return-1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return f(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,f,!1)},"DenseMatrix, any":function(e,t){return c(e,t,f,!1)},"any, SparseMatrix":function(e,t){return s(t,e,f,!0)},"any, DenseMatrix":function(e,t){return c(t,e,f,!0)},"Array, any":function(e,t){return c(n(e),t,f,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,f,!0).valueOf()}});return f}),Jo="deepEqual",Wo=["typed","equal"],Yo=Object(s.a)(Jo,Wo,function(e){var t=e.typed,a=e.equal;return t(Jo,{"any, any":function(e,t){return function e(t,r){{if(Array.isArray(t)){if(Array.isArray(r)){var n=t.length;if(n!==r.length)return!1;for(var i=0;i<n;i++)if(!e(t[i],r[i]))return!1;return!0}return!1}return!Array.isArray(r)&&a(t,r)}}(e.valueOf(),t.valueOf())}})}),Xo="unequal",Qo=["typed","config","equalScalar","matrix","DenseMatrix"],Ko=Object(s.a)(Xo,Qo,function(e){var t=e.typed,r=(e.config,e.equalScalar),n=e.matrix,i=e.DenseMatrix,a=dr({typed:t}),o=gn({typed:t,DenseMatrix:i}),s=br({typed:t,DenseMatrix:i}),u=Xt({typed:t}),c=Kt({typed:t}),f=t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:l(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return s(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return s(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(n(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,l,!0).valueOf()}});function l(e,t){return!r(e,t)}return f}),es=(Object(s.a)(Xo,["typed","equalScalar"],function(e){var t=e.typed,r=e.equalScalar;return t(Xo,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!r(e,t)}})}),"partitionSelect"),ts=["typed","isNumeric","isNaN","compare"],rs=Object(s.a)(es,ts,function(e){function n(e,t){return-r(e,t)}var t=e.typed,f=e.isNumeric,l=e.isNaN,r=e.compare,i=r;return t(es,{"Array | Matrix, number":function(e,t){return a(e,t,i)},"Array | Matrix, number, string":function(e,t,r){if("asc"===r)return a(e,t,i);if("desc"===r)return a(e,t,n);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":a});function a(e,t,r){if(!Object(j.i)(t)||t<0)throw new Error("k must be a non-negative integer");if(Object(ie.v)(e)){if(1<e.size().length)throw new Error("Only one dimensional matrices supported");return o(e.valueOf(),t,r)}if(Array.isArray(e))return o(e,t,r)}function o(e,t,r){if(t>=e.length)throw new Error("k out of bounds");for(var n=0;n<e.length;n++)if(f(e[n])&&l(e[n]))return e[n];for(var i=0,a=e.length-1;i<a;){for(var o=i,s=a,u=e[Math.floor(Math.random()*(a-i+1))+i];o<s;)if(0<=r(e[o],u)){var c=e[s];e[s]=e[o],e[o]=c,--s}else++o;0<r(e[o],u)&&--o,t<=o?a=o:i=o+1}return e[t]}}),ns=["typed","matrix","compare","compareNatural"],is=Object(s.a)("sort",ns,function(e){function t(e,t){return-i(e,t)}var r=e.typed,n=e.matrix,i=e.compare,a=e.compareNatural,o=i;return r("sort",{Array:function(e){return u(e),e.sort(o)},Matrix:function(e){return c(e),n(e.toArray().sort(o),e.storage())},"Array, function":function(e,t){return u(e),e.sort(t)},"Matrix, function":function(e,t){return c(e),n(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return u(e),e.sort(s(t))},"Matrix, string":function(e,t){return c(e),n(e.toArray().sort(s(t)),e.storage())}});function s(e){if("asc"===e)return o;if("desc"===e)return t;if("natural"===e)return a;throw new Error('String "asc", "desc", or "natural" expected')}function u(e){if(1!==Object(I.a)(e).length)throw new Error("One dimensional array expected")}function c(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}}),as=["typed","larger"],os=Object(s.a)("max",as,function(e){var t=e.typed,n=e.larger;return t("max",{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(e,t){return U(e,t.valueOf(),r)},"...":function(e){if(P(e))throw new TypeError("Scalar values expected in function max");return i(e)}});function r(e,t){try{return n(e,t)?e:t}catch(e){throw da(e,"max",t)}}function i(e){var r;if(F(e,function(t){try{isNaN(t)&&"number"==typeof t?r=NaN:void 0!==r&&!n(t,r)||(r=t)}catch(e){throw da(e,"max",t)}}),void 0===r)throw new Error("Cannot calculate max of an empty array");return r}}),ss=["typed","smaller"],us=Object(s.a)("min",ss,function(e){var t=e.typed,n=e.smaller;return t("min",{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(e,t){return U(e,t.valueOf(),r)},"...":function(e){if(P(e))throw new TypeError("Scalar values expected in function min");return i(e)}});function r(e,t){try{return n(e,t)?e:t}catch(e){throw da(e,"min",t)}}function i(e){var r;if(F(e,function(t){try{isNaN(t)&&"number"==typeof t?r=NaN:void 0!==r&&!n(t,r)||(r=t)}catch(e){throw da(e,"min",t)}}),void 0===r)throw new Error("Cannot calculate min of an empty array");return r}}),cs=["smaller","DenseMatrix"],fs=Object(s.a)("ImmutableDenseMatrix",cs,function(e){var r=e.smaller,n=e.DenseMatrix;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!Object(ie.I)(t))throw new Error("Invalid datatype: "+t);if(Object(ie.v)(e)||Object(ie.b)(e)){var r=new n(e,t);this._data=r._data,this._size=r._size,this._datatype=r._datatype,this._min=null,this._max=null}else if(e&&Object(ie.b)(e.data)&&Object(ie.b)(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+Object(ie.M)(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return(i.prototype=new n).type="ImmutableDenseMatrix",i.prototype.isImmutableDenseMatrix=!0,i.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return Object(ie.v)(t)?new i({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},i.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},i.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},i.prototype.clone=function(){return new i({data:Object(ae.a)(this._data),size:Object(ae.a)(this._size),datatype:this._datatype})},i.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.fromJSON=function(e){return new i(e)},i.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},i.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(e){null!==t&&!r(e,t)||(t=e)}),this._min=null!==t?t:void 0}return this._min},i.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(e){null!==t&&!r(t,e)||(t=e)}),this._max=null!==t?t:void 0}return this._max},i},{isClass:!0}),ls=["ImmutableDenseMatrix"],ps=Object(s.a)("Index",ls,function(e){var n=e.ImmutableDenseMatrix;function o(e){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var t=0,r=arguments.length;t<r;t++){var n=arguments[t];if(Object(ie.D)(n))this._dimensions.push(n),this._isScalar=!1;else if(Array.isArray(n)||Object(ie.v)(n)){var i=s(n.valueOf());this._dimensions.push(i);var a=i.size();1===a.length&&1===a[0]||(this._isScalar=!1)}else if("number"==typeof n)this._dimensions.push(s([n]));else{if("string"!=typeof n)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(n)}}}function s(e){for(var t=0,r=e.length;t<r;t++)if("number"!=typeof e[t]||!Object(j.i)(e[t]))throw new TypeError("Index parameters must be positive integer numbers");return new n(e)}return o.prototype.type="Index",o.prototype.isIndex=!0,o.prototype.clone=function(){var e=new o;return e._dimensions=Object(ae.a)(this._dimensions),e._isScalar=this._isScalar,e},o.create=function(e){var t=new o;return o.apply(t,e),t},o.prototype.size=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e[t]="string"==typeof n?1:n.size()[0]}return e},o.prototype.max=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e[t]="string"==typeof n?n:n.max()}return e},o.prototype.min=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e[t]="string"==typeof n?n:n.min()}return e},o.prototype.forEach=function(e){for(var t=0,r=this._dimensions.length;t<r;t++)e(this._dimensions[t],t,this)},o.prototype.dimension=function(e){return this._dimensions[e]||null},o.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},o.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},o.prototype.isScalar=function(){return this._isScalar},o.prototype.valueOf=o.prototype.toArray=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e.push("string"==typeof n?n:n.toArray())}return e},o.prototype.toString=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];"string"==typeof n?e.push(JSON.stringify(n)):e.push(n.toString())}return"["+e.join(", ")+"]"},o.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},o.fromJSON=function(e){return o.create(e.dimensions)},o},{isClass:!0}),ms=["smaller","larger"],hs=Object(s.a)("FibonacciHeap",ms,function(e){var l=e.smaller,p=e.larger,m=1/Math.log((1+Math.sqrt(5))/2);function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function i(e,t,r){t.left.right=t.right,t.right.left=t.left,r.degree--,r.child===t&&(r.child=t.right),0===r.degree&&(r.child=null),t.left=e,t.right=e.right,((e.right=t).right.left=t).parent=null,t.mark=!1}t.prototype.type="FibonacciHeap",t.prototype.isFibonacciHeap=!0,t.prototype.insert=function(e,t){var r={key:e,value:t,degree:0};if(this._minimum){var n=this._minimum;r.left=n,r.right=n.right,(n.right=r).right.left=r,l(e,n.key)&&(this._minimum=r)}else(r.left=r).right=r,this._minimum=r;return this._size++,r},t.prototype.size=function(){return this._size},t.prototype.clear=function(){this._minimum=null,this._size=0},t.prototype.isEmpty=function(){return 0===this._size},t.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var t=this._minimum,r=e.degree,n=e.child;0<r;){var i=n.right;n.left.right=n.right,n.right.left=n.left,n.left=t,n.right=t.right,((t.right=n).right.left=n).parent=null,n=i,r--}return e.left.right=e.right,e.right.left=e.left,t=e===e.right?null:function(e,t){var r,n=Math.floor(Math.log(t)*m)+1,i=new Array(n),a=0,o=e;if(o)for(a++,o=o.right;o!==e;)a++,o=o.right;for(;0<a;){for(var s=o.degree,u=o.right;r=i[s];){if(p(o.key,r.key)){var c=r;r=o,o=c}h(r,o),i[s]=null,s++}i[s]=o,o=u,a--}e=null;for(var f=0;f<n;f++)(r=i[f])&&(e?(r.left.right=r.right,r.right.left=r.left,r.left=e,r.right=e.right,(e.right=r).right.left=r,l(r.key,e.key)&&(e=r)):e=r);return e}(t=e.right,this._size),this._size--,this._minimum=t,e},t.prototype.remove=function(e){this._minimum=function(e,t,r){t.key=r;var n=t.parent;n&&l(t.key,n.key)&&(i(e,t,n),function e(t,r){var n=r.parent;if(!n)return;r.mark?(i(t,r,n),e(n)):r.mark=!0}(e,n));l(t.key,e.key)&&(e=t);return e}(this._minimum,e,-1),this.extractMinimum()};var h=function(e,t){e.left.right=e.right,e.right.left=e.left,(e.parent=t).child?(e.left=t.child,e.right=t.child.right,(t.child.right=e).right.left=e):((t.child=e).right=e).left=e,t.degree++,e.mark=!1};return t},{isClass:!0}),ds=["addScalar","equalScalar","FibonacciHeap"],ys=Object(s.a)("Spa",ds,function(e){var n=e.addScalar,c=e.equalScalar,t=e.FibonacciHeap;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t}return r.prototype.type="Spa",r.prototype.isSpa=!0,r.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var r=this._heap.insert(e,t);this._values[e]=r}},r.prototype.get=function(e){var t=this._values[e];return t?t.value:0},r.prototype.accumulate=function(e,t){var r=this._values[e];r?r.value=n(r.value,t):(r=this._heap.insert(e,t),this._values[e]=r)},r.prototype.forEach=function(e,t,r){var n=this._heap,i=this._values,a=[],o=n.extractMinimum();for(o&&a.push(o);o&&o.key<=t;)o.key>=e&&(c(o.value,0)||r(o.key,o.value,this)),(o=n.extractMinimum())&&a.push(o);for(var s=0;s<a.length;s++){var u=a[s];i[(o=n.insert(u.key,u.value)).key]=o}},r.prototype.swap=function(e,t){var r=this._values[e],n=this._values[t];if(!r&&n)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(r&&!n)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(r&&n){var i=r.value;r.value=n.value,n.value=i}},r},{isClass:!0}),gs=Yn(function(e){return new e(1).exp()},ws),vs=Yn(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},ws),bs=Yn(function(e){return e.acos(-1)},ws),xs=Yn(function(e){return bs(e).times(2)},ws);function ws(e){return e[0].precision}function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Os(){return(Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ms=["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],Es=Object(s.a)("Unit",Ms,function(e){var y,g,v,t=e.on,b=e.config,c=e.addScalar,f=e.subtract,l=e.multiplyScalar,p=e.divideScalar,m=e.pow,h=e.abs,d=e.fix,x=e.round,w=e.equal,i=e.isNumeric,s=e.format,r=e.number,n=e.Complex,N=e.BigNumber,O=e.Fraction,a=r;function M(e,t){if(!(this instanceof M))throw new Error("Constructor must be called with the new operator");if(null!=e&&!i(e)&&!Object(ie.j)(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==t&&("string"!=typeof t||""===t))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==t){var r=M.parse(t);this.units=r.units,this.dimensions=r.dimensions}else{this.units=[{unit:z,prefix:I.NONE,power:0}],this.dimensions=[];for(var n=0;n<B.length;n++)this.dimensions[n]=0}this.value=null!=e?this._normalize(e):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function E(){for(;" "===v||"\t"===v;)j()}function o(e){return"0"<=e&&e<="9"}function j(){g++,v=y.charAt(g)}function u(e){g=e,v=y.charAt(g)}function S(){var e="",t=g;if("+"===v?j():"-"===v&&(e+=v,j()),!function(e){return"0"<=e&&e<="9"||"."===e}(v))return u(t),null;if("."===v){if(e+=v,j(),!o(v))return u(t),null}else{for(;o(v);)e+=v,j();"."===v&&(e+=v,j())}for(;o(v);)e+=v,j();if("E"===v||"e"===v){var r="",n=g;if(r+=v,j(),"+"!==v&&"-"!==v||(r+=v,j()),!o(v))return u(n),e;for(e+=r;o(v);)e+=v,j()}return e}function A(){for(var e="",t=y.charCodeAt(g);48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122;)e+=v,j(),t=y.charCodeAt(g);return(65<=(t=e.charCodeAt(0))&&t<=90||97<=t&&t<=122)&&e||null}function C(e){return v===e?(j(),e):null}function T(e){if(Object(ae.f)(D,e)){var t=D[e];return{unit:t,prefix:t.prefixes[""]}}for(var r in D)if(Object(ae.f)(D,r)&&Object(J.b)(e,r)){var n=D[r],i=e.length-r.length,a=e.substring(0,i),o=Object(ae.f)(n.prefixes,a)?n.prefixes[a]:void 0;if(void 0!==o)return{unit:n,prefix:o}}return null}function _(e){return e.equalBase(q.NONE)&&null!==e.value&&!b.predictable?e.value:e}M.prototype.type="Unit",M.prototype.isUnit=!0,M.parse=function(e,t){if(t=t||{},g=-1,v="","string"!=typeof(y=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var r=new M,n=1,i=!(r.units=[]);j(),E();var a=S(),o=null;if(a){if("BigNumber"===b.number)o=new N(a);else if("Fraction"===b.number)try{o=new O(a)}catch(e){o=parseFloat(a)}else o=parseFloat(a);E(),C("*")?(n=1,i=!0):C("/")&&(n=-1,i=!0)}for(var s=[],u=1;;){for(E();"("===v;)s.push(n),u*=n,n=1,j(),E();var c=void 0;if(!v)break;var f=v;if(null===(c=A()))throw new SyntaxError('Unexpected "'+f+'" in "'+y+'" at index '+g.toString());var l=T(c);if(null===l)throw new SyntaxError('Unit "'+c+'" not found.');var p=n*u;if(E(),C("^")){E();var m=S();if(null===m)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');p*=m}r.units.push({unit:l.unit,prefix:l.prefix,power:p});for(var h=0;h<B.length;h++)r.dimensions[h]+=(l.unit.dimensions[h]||0)*p;for(E();")"===v;){if(0===s.length)throw new SyntaxError('Unmatched ")" in "'+y+'" at index '+g.toString());u/=s.pop(),j(),E()}if(i=!1,C("*")?(n=1,i=!0):C("/")?(n=-1,i=!0):n=1,l.unit.base){var d=l.unit.base.key;F.auto[d]={unit:l.unit,prefix:l.prefix}}}if(E(),v)throw new SyntaxError('Could not parse: "'+e+'"');if(i)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==s.length)throw new SyntaxError('Unmatched "(" in "'+y+'"');if(0===r.units.length&&!t.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return r.value=void 0!==o?r._normalize(o):null,r},M.prototype.clone=function(){var e=new M;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=Object(ae.a)(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var r in e.units[t]={},this.units[t])Object(ae.f)(this.units[t],r)&&(e.units[t][r]=this.units[t][r]);return e},M.prototype._isDerived=function(){return 0!==this.units.length&&(1<this.units.length||1e-15<Math.abs(this.units[0].power-1))},M.prototype._normalize=function(e){var t,r,n,i,a;if(null==e||0===this.units.length)return e;if(this._isDerived()){var o=e;a=M._getNumberConverter(Object(ie.M)(e));for(var s=0;s<this.units.length;s++)t=a(this.units[s].unit.value),i=a(this.units[s].prefix.value),n=a(this.units[s].power),o=l(o,m(l(t,i),n));return o}return t=(a=M._getNumberConverter(Object(ie.M)(e)))(this.units[0].unit.value),r=a(this.units[0].unit.offset),i=a(this.units[0].prefix.value),l(c(e,r),l(t,i))},M.prototype._denormalize=function(e,t){var r,n,i,a,o;if(null==e||0===this.units.length)return e;if(this._isDerived()){var s=e;o=M._getNumberConverter(Object(ie.M)(e));for(var u=0;u<this.units.length;u++)r=o(this.units[u].unit.value),a=o(this.units[u].prefix.value),i=o(this.units[u].power),s=p(s,m(l(r,a),i));return s}return r=(o=M._getNumberConverter(Object(ie.M)(e)))(this.units[0].unit.value),a=o(this.units[0].prefix.value),n=o(this.units[0].unit.offset),f(p(p(e,r),null==t?a:t),n)},M.isValuelessUnit=function(e){return null!==T(e)},M.prototype.hasBase=function(e){if("string"==typeof e&&(e=q[e]),!e)return!1;for(var t=0;t<B.length;t++)if(1e-12<Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0)))return!1;return!0},M.prototype.equalBase=function(e){for(var t=0;t<B.length;t++)if(1e-12<Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0)))return!1;return!0},M.prototype.equals=function(e){return this.equalBase(e)&&w(this.value,e.value)},M.prototype.multiply=function(e){for(var t=this.clone(),r=0;r<B.length;r++)t.dimensions[r]=(this.dimensions[r]||0)+(e.dimensions[r]||0);for(var n=0;n<e.units.length;n++){var i={};for(var a in e.units[n])i[a]=e.units[n][a];t.units.push(i)}if(null!==this.value||null!==e.value){var o=null===this.value?this._normalize(1):this.value,s=null===e.value?e._normalize(1):e.value;t.value=l(o,s)}else t.value=null;return t.skipAutomaticSimplification=!1,_(t)},M.prototype.divide=function(e){for(var t=this.clone(),r=0;r<B.length;r++)t.dimensions[r]=(this.dimensions[r]||0)-(e.dimensions[r]||0);for(var n=0;n<e.units.length;n++){var i={};for(var a in e.units[n])i[a]=e.units[n][a];i.power=-i.power,t.units.push(i)}if(null!==this.value||null!==e.value){var o=null===this.value?this._normalize(1):this.value,s=null===e.value?e._normalize(1):e.value;t.value=p(o,s)}else t.value=null;return t.skipAutomaticSimplification=!1,_(t)},M.prototype.pow=function(e){for(var t=this.clone(),r=0;r<B.length;r++)t.dimensions[r]=(this.dimensions[r]||0)*e;for(var n=0;n<t.units.length;n++)t.units[n].power*=e;return null!==t.value?t.value=m(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,_(t)},M.prototype.abs=function(){var e=this.clone();for(var t in e.value=null!==e.value?h(e.value):null,e.units)"VA"!==e.units[t].unit.name&&"VAR"!==e.units[t].unit.name||(e.units[t].unit=D.W);return e},M.prototype.to=function(e){var t,r=null===this.value?this._normalize(1):this.value;if("string"==typeof e){if(t=M.parse(e),!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return t.value=Object(ae.a)(r),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}if(Object(ie.L)(e)){if(!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(t=e.clone()).value=Object(ae.a)(r),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}throw new Error("String or Unit expected as parameter")},M.prototype.toNumber=function(e){return a(this.toNumeric(e))},M.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},M.prototype.toString=function(){return this.format()},M.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},M.fromJSON=function(e){var t=new M(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},M.prototype.valueOf=M.prototype.toString,M.prototype.simplify=function(){var e,t,r=this.clone(),n=[];for(var i in U)if(r.hasBase(q[i])){e=i;break}if("NONE"===e)r.units=[];else if(e&&Object(ae.f)(U,e)&&(t=U[e]),t)r.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var a=!1,o=0;o<B.length;o++){var s=B[o];1e-12<Math.abs(r.dimensions[o]||0)&&(Object(ae.f)(U,s)?n.push({unit:U[s].unit,prefix:U[s].prefix,power:r.dimensions[o]||0}):a=!0)}n.length<r.units.length&&!a&&(r.units=n)}return r},M.prototype.toSI=function(){for(var e=this.clone(),t=[],r=0;r<B.length;r++){var n=B[r];if(1e-12<Math.abs(e.dimensions[r]||0)){if(!Object(ae.f)(F.si,n))throw new Error("Cannot express custom unit "+n+" in SI units");t.push({unit:F.si[n].unit,prefix:F.si[n].prefix,power:e.dimensions[r]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e},M.prototype.formatUnits=function(){for(var e="",t="",r=0,n=0,i=0;i<this.units.length;i++)0<this.units[i].power?(r++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,1e-15<Math.abs(this.units[i].power-1)&&(e+="^"+this.units[i].power)):this.units[i].power<0&&n++;if(0<n)for(var a=0;a<this.units.length;a++)this.units[a].power<0&&(0<r?(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,1e-15<Math.abs(this.units[a].power+1)&&(t+="^"+-this.units[a].power)):(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,t+="^"+this.units[a].power));e=e.substr(1),t=t.substr(1),1<r&&0<n&&(e="("+e+")"),1<n&&0<r&&(t="("+t+")");var o=e;return 0<r&&0<n&&(o+=" / "),o+=t},M.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var n in void 0!==t.value&&null!==t.value&&Object(ie.j)(t.value)&&(r=Math.abs(t.value.re)<1e-14),t.units)t.units[n].unit&&("VA"===t.units[n].unit.name&&r?t.units[n].unit=D.VAR:"VAR"!==t.units[n].unit.name||r||(t.units[n].unit=D.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),a=null!==t.value?s(i,e||{}):"",o=t.formatUnits();return t.value&&Object(ie.j)(t.value)&&(a="("+a+")"),0<o.length&&0<a.length&&(a+=" "),a+=o},M.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(1e-14<=Math.abs(this.units[0].power-Math.round(this.units[0].power)))throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?h(this.value):0,t=h(this.units[0].unit.value),r=this.units[0].prefix;if(0===e)return r;var n=this.units[0].power,i=Math.log(e/Math.pow(r.value*t,n))/Math.LN10-1.2;if(-2.200001<i&&i<1.800001)return r;i=Math.abs(i);var a=this.units[0].unit.prefixes;for(var o in a)if(Object(ae.f)(a,o)){var s=a[o];if(s.scientific){var u=Math.abs(Math.log(e/Math.pow(s.value*t,n))/Math.LN10-1.2);(u<i||u===i&&s.name.length<r.name.length)&&(r=s,i=u)}}return r};var I={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!(M.prototype.splitUnit=function(e){for(var t=this.clone(),r=[],n=0;n<e.length&&(t=t.to(e[n]),n!==e.length-1);n++){var i=t.toNumeric(),a=x(i),o=new M(w(a,i)?a:d(t.toNumeric()),e[n].toString());r.push(o),t=f(t,o)}for(var s=0,u=0;u<r.length;u++)s=c(s,r[u].value);return w(s,this.value)&&(t.value=0),r.push(t),r})},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};I.SHORTLONG=Os({},I.SHORT,I.LONG),I.BINARY_SHORT=Os({},I.BINARY_SHORT_SI,I.BINARY_SHORT_IEC),I.BINARY_LONG=Os({},I.BINARY_LONG_SI,I.BINARY_LONG_IEC);var B=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],q={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var k in q)q[k].key=k;var z={name:"",base:{},value:1,offset:0,dimensions:B.map(function(e){return 0})},D={meter:{name:"meter",base:q.LENGTH,prefixes:I.LONG,value:1,offset:0},inch:{name:"inch",base:q.LENGTH,prefixes:I.NONE,value:.0254,offset:0},foot:{name:"foot",base:q.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yard:{name:"yard",base:q.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mile:{name:"mile",base:q.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},link:{name:"link",base:q.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rod:{name:"rod",base:q.LENGTH,prefixes:I.NONE,value:5.0292,offset:0},chain:{name:"chain",base:q.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:q.LENGTH,prefixes:I.NONE,value:1e-10,offset:0},m:{name:"m",base:q.LENGTH,prefixes:I.SHORT,value:1,offset:0},in:{name:"in",base:q.LENGTH,prefixes:I.NONE,value:.0254,offset:0},ft:{name:"ft",base:q.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yd:{name:"yd",base:q.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mi:{name:"mi",base:q.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},li:{name:"li",base:q.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rd:{name:"rd",base:q.LENGTH,prefixes:I.NONE,value:5.02921,offset:0},ch:{name:"ch",base:q.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},mil:{name:"mil",base:q.LENGTH,prefixes:I.NONE,value:254e-7,offset:0},m2:{name:"m2",base:q.SURFACE,prefixes:I.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:q.SURFACE,prefixes:I.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:q.SURFACE,prefixes:I.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:q.SURFACE,prefixes:I.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:q.SURFACE,prefixes:I.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:q.SURFACE,prefixes:I.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:q.SURFACE,prefixes:I.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:q.SURFACE,prefixes:I.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:q.SURFACE,prefixes:I.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:q.SURFACE,prefixes:I.NONE,value:1e4,offset:0},m3:{name:"m3",base:q.VOLUME,prefixes:I.CUBIC,value:1,offset:0},L:{name:"L",base:q.VOLUME,prefixes:I.SHORT,value:.001,offset:0},l:{name:"l",base:q.VOLUME,prefixes:I.SHORT,value:.001,offset:0},litre:{name:"litre",base:q.VOLUME,prefixes:I.LONG,value:.001,offset:0},cuin:{name:"cuin",base:q.VOLUME,prefixes:I.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:q.VOLUME,prefixes:I.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:q.VOLUME,prefixes:I.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:q.VOLUME,prefixes:I.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:q.VOLUME,prefixes:I.NONE,value:15e-6,offset:0},drop:{name:"drop",base:q.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:q.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},minim:{name:"minim",base:q.VOLUME,prefixes:I.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:q.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:q.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:q.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:q.VOLUME,prefixes:I.NONE,value:1e-6,offset:0},cup:{name:"cup",base:q.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:q.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:q.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:q.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:q.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:q.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:q.VOLUME,prefixes:I.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:q.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:q.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:q.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:q.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:q.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:q.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:q.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:q.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},obl:{name:"obl",base:q.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},g:{name:"g",base:q.MASS,prefixes:I.SHORT,value:.001,offset:0},gram:{name:"gram",base:q.MASS,prefixes:I.LONG,value:.001,offset:0},ton:{name:"ton",base:q.MASS,prefixes:I.SHORT,value:907.18474,offset:0},t:{name:"t",base:q.MASS,prefixes:I.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:q.MASS,prefixes:I.LONG,value:1e3,offset:0},grain:{name:"grain",base:q.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:q.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:q.MASS,prefixes:I.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:q.MASS,prefixes:I.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:q.MASS,prefixes:I.NONE,value:45.359237,offset:0},stick:{name:"stick",base:q.MASS,prefixes:I.NONE,value:.115,offset:0},stone:{name:"stone",base:q.MASS,prefixes:I.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:q.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:q.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:q.MASS,prefixes:I.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:q.MASS,prefixes:I.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:q.MASS,prefixes:I.NONE,value:45.359237,offset:0},s:{name:"s",base:q.TIME,prefixes:I.SHORT,value:1,offset:0},min:{name:"min",base:q.TIME,prefixes:I.NONE,value:60,offset:0},h:{name:"h",base:q.TIME,prefixes:I.NONE,value:3600,offset:0},second:{name:"second",base:q.TIME,prefixes:I.LONG,value:1,offset:0},sec:{name:"sec",base:q.TIME,prefixes:I.LONG,value:1,offset:0},minute:{name:"minute",base:q.TIME,prefixes:I.NONE,value:60,offset:0},hour:{name:"hour",base:q.TIME,prefixes:I.NONE,value:3600,offset:0},day:{name:"day",base:q.TIME,prefixes:I.NONE,value:86400,offset:0},week:{name:"week",base:q.TIME,prefixes:I.NONE,value:604800,offset:0},month:{name:"month",base:q.TIME,prefixes:I.NONE,value:2629800,offset:0},year:{name:"year",base:q.TIME,prefixes:I.NONE,value:31557600,offset:0},decade:{name:"decade",base:q.TIME,prefixes:I.NONE,value:315576e3,offset:0},century:{name:"century",base:q.TIME,prefixes:I.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:q.TIME,prefixes:I.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:q.FREQUENCY,prefixes:I.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:q.FREQUENCY,prefixes:I.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:q.ANGLE,prefixes:I.SHORT,value:1,offset:0},radian:{name:"radian",base:q.ANGLE,prefixes:I.LONG,value:1,offset:0},deg:{name:"deg",base:q.ANGLE,prefixes:I.SHORT,value:null,offset:0},degree:{name:"degree",base:q.ANGLE,prefixes:I.LONG,value:null,offset:0},grad:{name:"grad",base:q.ANGLE,prefixes:I.SHORT,value:null,offset:0},gradian:{name:"gradian",base:q.ANGLE,prefixes:I.LONG,value:null,offset:0},cycle:{name:"cycle",base:q.ANGLE,prefixes:I.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:q.ANGLE,prefixes:I.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:q.ANGLE,prefixes:I.NONE,value:null,offset:0},A:{name:"A",base:q.CURRENT,prefixes:I.SHORT,value:1,offset:0},ampere:{name:"ampere",base:q.CURRENT,prefixes:I.LONG,value:1,offset:0},K:{name:"K",base:q.TEMPERATURE,prefixes:I.NONE,value:1,offset:0},degC:{name:"degC",base:q.TEMPERATURE,prefixes:I.NONE,value:1,offset:273.15},degF:{name:"degF",base:q.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:q.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:q.TEMPERATURE,prefixes:I.NONE,value:1,offset:0},celsius:{name:"celsius",base:q.TEMPERATURE,prefixes:I.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:q.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:q.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:q.AMOUNT_OF_SUBSTANCE,prefixes:I.SHORT,value:1,offset:0},mole:{name:"mole",base:q.AMOUNT_OF_SUBSTANCE,prefixes:I.LONG,value:1,offset:0},cd:{name:"cd",base:q.LUMINOUS_INTENSITY,prefixes:I.SHORT,value:1,offset:0},candela:{name:"candela",base:q.LUMINOUS_INTENSITY,prefixes:I.LONG,value:1,offset:0},N:{name:"N",base:q.FORCE,prefixes:I.SHORT,value:1,offset:0},newton:{name:"newton",base:q.FORCE,prefixes:I.LONG,value:1,offset:0},dyn:{name:"dyn",base:q.FORCE,prefixes:I.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:q.FORCE,prefixes:I.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:q.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:q.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:q.FORCE,prefixes:I.LONG,value:4448.2216,offset:0},J:{name:"J",base:q.ENERGY,prefixes:I.SHORT,value:1,offset:0},joule:{name:"joule",base:q.ENERGY,prefixes:I.SHORT,value:1,offset:0},erg:{name:"erg",base:q.ENERGY,prefixes:I.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:q.ENERGY,prefixes:I.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:q.ENERGY,prefixes:I.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:q.ENERGY,prefixes:I.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:q.ENERGY,prefixes:I.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:q.POWER,prefixes:I.SHORT,value:1,offset:0},watt:{name:"watt",base:q.POWER,prefixes:I.LONG,value:1,offset:0},hp:{name:"hp",base:q.POWER,prefixes:I.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:q.POWER,prefixes:I.SHORT,value:n.I,offset:0},VA:{name:"VA",base:q.POWER,prefixes:I.SHORT,value:1,offset:0},Pa:{name:"Pa",base:q.PRESSURE,prefixes:I.SHORT,value:1,offset:0},psi:{name:"psi",base:q.PRESSURE,prefixes:I.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:q.PRESSURE,prefixes:I.NONE,value:101325,offset:0},bar:{name:"bar",base:q.PRESSURE,prefixes:I.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:q.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:q.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:q.PRESSURE,prefixes:I.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:q.PRESSURE,prefixes:I.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:q.ELECTRIC_CHARGE,prefixes:I.LONG,value:1,offset:0},C:{name:"C",base:q.ELECTRIC_CHARGE,prefixes:I.SHORT,value:1,offset:0},farad:{name:"farad",base:q.ELECTRIC_CAPACITANCE,prefixes:I.LONG,value:1,offset:0},F:{name:"F",base:q.ELECTRIC_CAPACITANCE,prefixes:I.SHORT,value:1,offset:0},volt:{name:"volt",base:q.ELECTRIC_POTENTIAL,prefixes:I.LONG,value:1,offset:0},V:{name:"V",base:q.ELECTRIC_POTENTIAL,prefixes:I.SHORT,value:1,offset:0},ohm:{name:"ohm",base:q.ELECTRIC_RESISTANCE,prefixes:I.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:q.ELECTRIC_INDUCTANCE,prefixes:I.LONG,value:1,offset:0},H:{name:"H",base:q.ELECTRIC_INDUCTANCE,prefixes:I.SHORT,value:1,offset:0},siemens:{name:"siemens",base:q.ELECTRIC_CONDUCTANCE,prefixes:I.LONG,value:1,offset:0},S:{name:"S",base:q.ELECTRIC_CONDUCTANCE,prefixes:I.SHORT,value:1,offset:0},weber:{name:"weber",base:q.MAGNETIC_FLUX,prefixes:I.LONG,value:1,offset:0},Wb:{name:"Wb",base:q.MAGNETIC_FLUX,prefixes:I.SHORT,value:1,offset:0},tesla:{name:"tesla",base:q.MAGNETIC_FLUX_DENSITY,prefixes:I.LONG,value:1,offset:0},T:{name:"T",base:q.MAGNETIC_FLUX_DENSITY,prefixes:I.SHORT,value:1,offset:0},b:{name:"b",base:q.BIT,prefixes:I.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:q.BIT,prefixes:I.BINARY_LONG,value:1,offset:0},B:{name:"B",base:q.BIT,prefixes:I.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:q.BIT,prefixes:I.BINARY_LONG,value:8,offset:0}},R={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function P(e){if("BigNumber"===e.number){var t=bs(N);D.rad.value=new N(1),D.deg.value=t.div(180),D.grad.value=t.div(200),D.cycle.value=t.times(2),D.arcsec.value=t.div(648e3),D.arcmin.value=t.div(10800)}else D.rad.value=1,D.deg.value=Math.PI/180,D.grad.value=Math.PI/200,D.cycle.value=2*Math.PI,D.arcsec.value=Math.PI/648e3,D.arcmin.value=Math.PI/10800;D.radian.value=D.rad.value,D.degree.value=D.deg.value,D.gradian.value=D.grad.value}P(b),t&&t("config",function(e,t){e.number!==t.number&&P(e)});var F={si:{NONE:{unit:z,prefix:I.NONE[""]},LENGTH:{unit:D.m,prefix:I.SHORT[""]},MASS:{unit:D.g,prefix:I.SHORT.k},TIME:{unit:D.s,prefix:I.SHORT[""]},CURRENT:{unit:D.A,prefix:I.SHORT[""]},TEMPERATURE:{unit:D.K,prefix:I.SHORT[""]},LUMINOUS_INTENSITY:{unit:D.cd,prefix:I.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:D.mol,prefix:I.SHORT[""]},ANGLE:{unit:D.rad,prefix:I.SHORT[""]},BIT:{unit:D.bits,prefix:I.SHORT[""]},FORCE:{unit:D.N,prefix:I.SHORT[""]},ENERGY:{unit:D.J,prefix:I.SHORT[""]},POWER:{unit:D.W,prefix:I.SHORT[""]},PRESSURE:{unit:D.Pa,prefix:I.SHORT[""]},ELECTRIC_CHARGE:{unit:D.C,prefix:I.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:D.F,prefix:I.SHORT[""]},ELECTRIC_POTENTIAL:{unit:D.V,prefix:I.SHORT[""]},ELECTRIC_RESISTANCE:{unit:D.ohm,prefix:I.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:D.H,prefix:I.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:D.S,prefix:I.SHORT[""]},MAGNETIC_FLUX:{unit:D.Wb,prefix:I.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:D.T,prefix:I.SHORT[""]},FREQUENCY:{unit:D.Hz,prefix:I.SHORT[""]}}};F.cgs=JSON.parse(JSON.stringify(F.si)),F.cgs.LENGTH={unit:D.m,prefix:I.SHORT.c},F.cgs.MASS={unit:D.g,prefix:I.SHORT[""]},F.cgs.FORCE={unit:D.dyn,prefix:I.SHORT[""]},F.cgs.ENERGY={unit:D.erg,prefix:I.NONE[""]},F.us=JSON.parse(JSON.stringify(F.si)),F.us.LENGTH={unit:D.ft,prefix:I.NONE[""]},F.us.MASS={unit:D.lbm,prefix:I.NONE[""]},F.us.TEMPERATURE={unit:D.degF,prefix:I.NONE[""]},F.us.FORCE={unit:D.lbf,prefix:I.NONE[""]},F.us.ENERGY={unit:D.BTU,prefix:I.BTU[""]},F.us.POWER={unit:D.hp,prefix:I.NONE[""]},F.us.PRESSURE={unit:D.psi,prefix:I.NONE[""]},F.auto=JSON.parse(JSON.stringify(F.si));var U=F.auto;for(var L in M.setUnitSystem=function(e){if(!Object(ae.f)(F,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(F).join(", "));U=F[e]},M.getUnitSystem=function(){for(var e in F)if(F[e]===U)return e},M.typeConverters={BigNumber:function(e){return new N(e+"")},Fraction:function(e){return new O(e)},Complex:function(e){return e},number:function(e){return e}},M._getNumberConverter=function(e){if(!M.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return M.typeConverters[e]},D){var H=D[L];H.dimensions=H.base.dimensions}for(var $ in R)if(Object(ae.f)(R,$)){var G=D[R[$]],Z={};for(var V in G)Object(ae.f)(G,V)&&(Z[V]=G[V]);Z.name=$,D[$]=Z}return M.createUnit=function(e,t){if("object"!==Ns(e))throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var r in e)if(Object(ae.f)(e,r)&&M.deleteUnit(r),e[r].aliases)for(var n=0;n<e[r].aliases.length;n++)M.deleteUnit(e[r].aliases[n]);var i;for(var a in e)Object(ae.f)(e,a)&&(i=M.createUnitSingle(a,e[a]));return i},M.createUnitSingle=function(t,e,r){if(null==e&&(e={}),"string"!=typeof t)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Object(ae.f)(D,t))throw new Error('Cannot create unit "'+t+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){var r=e.charAt(t),n=function(e){return/^[a-zA-Z]$/.test(e)};if(0===t&&!n(r))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(0<t&&!(n(r)||"0"<=(i=r)&&i<="9"))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}var i}(t);var n,i,a=null,o=[],s=0;if(e&&"Unit"===e.type)a=e.clone();else if("string"==typeof e)""!==e&&(n=e);else{if("object"!==Ns(e))throw new TypeError('Cannot create unit "'+t+'" from "'+e.toString()+'": expecting "string" or "Unit" or "Object"');n=e.definition,i=e.prefixes,s=e.offset,e.aliases&&(o=e.aliases.valueOf())}if(o)for(var u=0;u<o.length;u++)if(Object(ae.f)(D,o[u]))throw new Error('Cannot create alias "'+o[u]+'": a unit with that name already exists');if(n&&"string"==typeof n&&!a)try{a=M.parse(n,{allowNoUnits:!0})}catch(e){throw e.message='Could not create unit "'+t+'" from "'+n+'": '+e.message,e}else n&&"Unit"===n.type&&(a=n.clone());o=o||[],s=s||0,i=i&&i.toUpperCase&&I[i.toUpperCase()]||I.NONE;var c={};if(a){var f=!(c={name:t,value:a.value,dimensions:a.dimensions.slice(0),prefixes:i,offset:s});for(var l in q)if(Object(ae.f)(q,l)){for(var p=!0,m=0;m<B.length;m++)if(1e-12<Math.abs((c.dimensions[m]||0)-(q[l].dimensions[m]||0))){p=!1;break}if(p){f=!0,c.base=q[l];break}}if(!f){var h=t+"_STUFF",d={dimensions:a.dimensions.slice(0)};d.key=h,q[h]=d,U[h]={unit:c,prefix:I.NONE[""]},c.base=q[h]}}else{var y=t+"_STUFF";if(0<=B.indexOf(y))throw new Error('Cannot create new base unit "'+t+'": a base unit with that name already exists (and cannot be overridden)');for(var g in B.push(y),q)Object(ae.f)(q,g)&&(q[g].dimensions[B.length-1]=0);for(var v={dimensions:[]},b=0;b<B.length;b++)v.dimensions[b]=0;v.dimensions[B.length-1]=1,v.key=y,q[y]=v,c={name:t,value:1,dimensions:q[y].dimensions.slice(0),prefixes:i,offset:s,base:q[y]},U[y]={unit:c,prefix:I.NONE[""]}}M.UNITS[t]=c;for(var x=0;x<o.length;x++){var w=o[x],N={};for(var O in c)Object(ae.f)(c,O)&&(N[O]=c[O]);N.name=w,M.UNITS[w]=N}return new M(null,t)},M.deleteUnit=function(e){delete M.UNITS[e]},M.PREFIXES=I,M.BASE_DIMENSIONS=B,M.BASE_UNITS=q,M.UNIT_SYSTEMS=F,M.UNITS=D,M},{isClass:!0}),js=["typed","Unit"],Ss=Object(s.a)("unit",js,function(e){var t=e.typed,r=e.Unit,n=t("unit",{Unit:function(e){return e.clone()},string:function(e){return r.isValuelessUnit(e)?new r(null,e):r.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(e,t){return new r(e,t)},"Array | Matrix":function(e){return oe(e,n)}});return n}),As=["typed","SparseMatrix"],Cs=Object(s.a)("sparse",As,function(e){var t=e.typed,r=e.SparseMatrix;return t("sparse",{"":function(){return new r([])},string:function(e){return new r([],e)},"Array | Matrix":function(e){return new r(e)},"Array | Matrix, string":function(e,t){return new r(e,t)}})}),Ts="createUnit",_s=["typed","Unit"],Is=Object(s.a)(Ts,_s,function(e){var t=e.typed,i=e.Unit;return t(Ts,{"Object, Object":function(e,t){return i.createUnit(e,t)},Object:function(e){return i.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,r){var n={};return n[e]=t,i.createUnit(n,r)},"string, Unit | string | Object":function(e,t){var r={};return r[e]=t,i.createUnit(r,{})},string:function(e){var t={};return t[e]={},i.createUnit(t,{})}})}),Bs=["typed","config","Complex"],qs=Object(s.a)("acos",Bs,function(e){var t=e.typed,r=e.config,n=e.Complex,i=t("acos",{number:function(e){return-1<=e&&e<=1||r.predictable?Math.acos(e):new n(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()},"Array | Matrix":function(e){return oe(e,i)}});return i}),ks="number";function zs(e){return Object(j.a)(e)}function Ds(e){return Math.atan(1/e)}function Rs(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function Ps(e){return Math.asin(1/e)}function Fs(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function Us(e){return Math.acos(1/e)}function Ls(e){var t=1/e,r=Math.sqrt(t*t-1);return Math.log(r+t)}function Hs(e){return Object(j.b)(e)}function $s(e){return Object(j.c)(e)}function Gs(e){return 1/Math.tan(e)}function Zs(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function Vs(e){return 1/Math.sin(e)}function Js(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*Object(j.n)(e)}function Ws(e){return 1/Math.cos(e)}function Ys(e){return 2/(Math.exp(e)+Math.exp(-e))}function Xs(e){return Object(j.o)(e)}Xs.signature=Ys.signature=Ws.signature=Js.signature=Vs.signature=Zs.signature=Gs.signature=$s.signature=Hs.signature=Ls.signature=Us.signature=Fs.signature=Ps.signature=Rs.signature=Ds.signature=zs.signature=ks;var Qs=["typed","config","Complex"],Ks=Object(s.a)("acosh",Qs,function(e){var t=e.typed,r=e.config,n=e.Complex,i=t("acosh",{number:function(e){return 1<=e||r.predictable?zs(e):e<=-1?new n(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new n(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()},"Array | Matrix":function(e){return oe(e,i)}});return i}),eu=["typed","BigNumber"],tu=Object(s.a)("acot",eu,function(e){var t=e.typed,r=e.BigNumber,n=t("acot",{number:Ds,Complex:function(e){return e.acot()},BigNumber:function(e){return new r(1).div(e).atan()},"Array | Matrix":function(e){return oe(e,n)}});return n}),ru=["typed","config","Complex","BigNumber"],nu=Object(s.a)("acoth",ru,function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber,a=t("acoth",{number:function(e){return 1<=e||e<=-1||r.predictable?Rs(e):new n(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new i(1).div(e).atanh()},"Array | Matrix":function(e){return oe(e,a)}});return a}),iu=["typed","config","Complex","BigNumber"],au=Object(s.a)("acsc",iu,function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber,a=t("acsc",{number:function(e){return e<=-1||1<=e||r.predictable?Ps(e):new n(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new i(1).div(e).asin()},"Array | Matrix":function(e){return oe(e,a)}});return a}),ou=["typed","BigNumber"],su=Object(s.a)("acsch",ou,function(e){var t=e.typed,r=e.BigNumber,n=t("acsch",{number:Fs,Complex:function(e){return e.acsch()},BigNumber:function(e){return new r(1).div(e).asinh()},"Array | Matrix":function(e){return oe(e,n)}});return n}),uu=["typed","config","Complex","BigNumber"],cu=Object(s.a)("asec",uu,function(e){var t=e.typed,r=e.config,n=e.Complex,i=e.BigNumber,a=t("asec",{number:function(e){return e<=-1||1<=e||r.predictable?Us(e):new n(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new i(1).div(e).acos()},"Array | Matrix":function(e){return oe(e,a)}});return a}),fu=["typed","config","Complex","BigNumber"],lu=Object(s.a)("asech",fu,function(e){var t=e.typed,n=e.config,i=e.Complex,r=e.BigNumber,a=t("asech",{number:function(e){if(e<=1&&-1<=e||n.predictable){var t=1/e;if(0<t||n.predictable)return Ls(e);var r=Math.sqrt(t*t-1);return new i(Math.log(r-t),Math.PI)}return new i(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new r(1).div(e).acosh()},"Array | Matrix":function(e){return oe(e,a)}});return a}),pu=["typed","config","Complex"],mu=Object(s.a)("asin",pu,function(e){var t=e.typed,r=e.config,n=e.Complex,i=t("asin",{number:function(e){return-1<=e&&e<=1||r.predictable?Math.asin(e):new n(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()},"Array | Matrix":function(e){return oe(e,i,!0)}});return i}),hu=["typed"],du=Object(s.a)("asinh",hu,function(e){var t=(0,e.typed)("asinh",{number:Hs,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()},"Array | Matrix":function(e){return oe(e,t,!0)}});return t}),yu=["typed"],gu=Object(s.a)("atan",yu,function(e){var t=(0,e.typed)("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()},"Array | Matrix":function(e){return oe(e,t,!0)}});return t}),vu=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],bu=Object(s.a)("atan2",vu,function(e){var t=e.typed,r=e.matrix,n=e.equalScalar,i=e.BigNumber,a=e.DenseMatrix,o=nr({typed:t,equalScalar:n}),s=dr({typed:t}),u=Hr({typed:t,equalScalar:n}),c=sr({typed:t,equalScalar:n}),f=br({typed:t,DenseMatrix:a}),l=Xt({typed:t}),p=Kt({typed:t}),m=t("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function(e,t){return i.atan2(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,m,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,m,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,m,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,m)},"Array, Array":function(e,t){return m(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return m(r(e),t)},"Matrix, Array":function(e,t){return m(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return c(e,t,m,!1)},"DenseMatrix, number | BigNumber":function(e,t){return p(e,t,m,!1)},"number | BigNumber, SparseMatrix":function(e,t){return f(t,e,m,!0)},"number | BigNumber, DenseMatrix":function(e,t){return p(t,e,m,!0)},"Array, number | BigNumber":function(e,t){return p(r(e),t,m,!1).valueOf()},"number | BigNumber, Array":function(e,t){return p(r(t),e,m,!0).valueOf()}});return m}),xu=["typed","config","Complex"],wu=Object(s.a)("atanh",xu,function(e){var t=e.typed,r=e.config,n=e.Complex,i=t("atanh",{number:function(e){return e<=1&&-1<=e||r.predictable?$s(e):new n(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()},"Array | Matrix":function(e){return oe(e,i,!0)}});return i}),Nu=["typed"],Ou=Object(s.a)("cos",Nu,function(e){var t=(0,e.typed)("cos",{number:Math.cos,Complex:function(e){return e.cos()},BigNumber:function(e){return e.cos()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return t(e.value)},"Array | Matrix":function(e){return oe(e,t)}});return t}),Mu=["typed"],Eu=Object(s.a)("cosh",Mu,function(e){var t=(0,e.typed)("cosh",{number:j.e,Complex:function(e){return e.cosh()},BigNumber:function(e){return e.cosh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return t(e.value)},"Array | Matrix":function(e){return oe(e,t)}});return t}),ju=["typed","BigNumber"],Su=Object(s.a)("cot",ju,function(e){var t=e.typed,r=e.BigNumber,n=t("cot",{number:Gs,Complex:function(e){return e.cot()},BigNumber:function(e){return new r(1).div(e.tan())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return n(e.value)},"Array | Matrix":function(e){return oe(e,n)}});return n}),Au=["typed","BigNumber"],Cu=Object(s.a)("coth",Au,function(e){var t=e.typed,r=e.BigNumber,n=t("coth",{number:Zs,Complex:function(e){return e.coth()},BigNumber:function(e){return new r(1).div(e.tanh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return n(e.value)},"Array | Matrix":function(e){return oe(e,n)}});return n}),Tu=["typed","BigNumber"],_u=Object(s.a)("csc",Tu,function(e){var t=e.typed,r=e.BigNumber,n=t("csc",{number:Vs,Complex:function(e){return e.csc()},BigNumber:function(e){return new r(1).div(e.sin())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return n(e.value)},"Array | Matrix":function(e){return oe(e,n)}});return n}),Iu=["typed","BigNumber"],Bu=Object(s.a)("csch",Iu,function(e){var t=e.typed,r=e.BigNumber,n=t("csch",{number:Js,Complex:function(e){return e.csch()},BigNumber:function(e){return new r(1).div(e.sinh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return n(e.value)},"Array | Matrix":function(e){return oe(e,n)}});return n}),qu=["typed","BigNumber"],ku=Object(s.a)("sec",qu,function(e){var t=e.typed,r=e.BigNumber,n=t("sec",{number:Ws,Complex:function(e){return e.sec()},BigNumber:function(e){return new r(1).div(e.cos())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return n(e.value)},"Array | Matrix":function(e){return oe(e,n)}});return n}),zu=["typed","BigNumber"],Du=Object(s.a)("sech",zu,function(e){var t=e.typed,r=e.BigNumber,n=t("sech",{number:Ys,Complex:function(e){return e.sech()},BigNumber:function(e){return new r(1).div(e.cosh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return n(e.value)},"Array | Matrix":function(e){return oe(e,n)}});return n}),Ru=["typed"],Pu=Object(s.a)("sin",Ru,function(e){var t=(0,e.typed)("sin",{number:Math.sin,Complex:function(e){return e.sin()},BigNumber:function(e){return e.sin()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return t(e.value)},"Array | Matrix":function(e){return oe(e,t,!0)}});return t}),Fu=["typed"],Uu=Object(s.a)("sinh",Fu,function(e){var t=(0,e.typed)("sinh",{number:Xs,Complex:function(e){return e.sinh()},BigNumber:function(e){return e.sinh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return t(e.value)},"Array | Matrix":function(e){return oe(e,t,!0)}});return t}),Lu=["typed"],Hu=Object(s.a)("tan",Lu,function(e){var t=(0,e.typed)("tan",{number:Math.tan,Complex:function(e){return e.tan()},BigNumber:function(e){return e.tan()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return t(e.value)},"Array | Matrix":function(e){return oe(e,t,!0)}});return t}),$u=["typed"],Gu=Object(s.a)("tanh",$u,function(e){var t=(0,e.typed)("tanh",{number:j.p,Complex:function(e){return e.tanh()},BigNumber:function(e){return e.tanh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return t(e.value)},"Array | Matrix":function(e){return oe(e,t,!0)}});return t}),Zu="setCartesian",Vu=["typed","size","subset","compareNatural","Index","DenseMatrix"],Ju=Object(s.a)(Zu,Vu,function(e){var t=e.typed,s=e.size,u=e.subset,c=e.compareNatural,f=e.Index,l=e.DenseMatrix;return t(Zu,{"Array | Matrix, Array | Matrix":function(e,t){var r=[];if(0!==u(s(e),new f(0))&&0!==u(s(t),new f(0))){var n=Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(c),i=Object(I.e)(Array.isArray(t)?t:t.toArray()).sort(c);r=[];for(var a=0;a<n.length;a++)for(var o=0;o<i.length;o++)r.push([n[a],i[o]])}return Array.isArray(e)&&Array.isArray(t)?r:new l(r)}})}),Wu="setDifference",Yu=["typed","size","subset","compareNatural","Index","DenseMatrix"],Xu=Object(s.a)(Wu,Yu,function(e){var t=e.typed,u=e.size,c=e.subset,f=e.compareNatural,l=e.Index,p=e.DenseMatrix;return t(Wu,{"Array | Matrix, Array | Matrix":function(e,t){var r;if(0===c(u(e),new l(0)))r=[];else{if(0===c(u(t),new l(0)))return Object(I.e)(e.toArray());var n,i=Object(I.i)(Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(f)),a=Object(I.i)(Object(I.e)(Array.isArray(t)?t:t.toArray()).sort(f));r=[];for(var o=0;o<i.length;o++){n=!1;for(var s=0;s<a.length;s++)if(0===f(i[o].value,a[s].value)&&i[o].identifier===a[s].identifier){n=!0;break}n||r.push(i[o])}}return Array.isArray(e)&&Array.isArray(t)?Object(I.g)(r):new p(Object(I.g)(r))}})}),Qu="setDistinct",Ku=["typed","size","subset","compareNatural","Index","DenseMatrix"],ec=Object(s.a)(Qu,Ku,function(e){var t=e.typed,i=e.size,a=e.subset,o=e.compareNatural,s=e.Index,u=e.DenseMatrix;return t(Qu,{"Array | Matrix":function(e){var t;if(0===a(i(e),new s(0)))t=[];else{var r=Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(o);(t=[]).push(r[0]);for(var n=1;n<r.length;n++)0!==o(r[n],r[n-1])&&t.push(r[n])}return Array.isArray(e)?t:new u(t)}})}),tc="setIntersect",rc=["typed","size","subset","compareNatural","Index","DenseMatrix"],nc=Object(s.a)(tc,rc,function(e){var t=e.typed,s=e.size,u=e.subset,c=e.compareNatural,f=e.Index,l=e.DenseMatrix;return t(tc,{"Array | Matrix, Array | Matrix":function(e,t){var r;if(0===u(s(e),new f(0))||0===u(s(t),new f(0)))r=[];else{var n=Object(I.i)(Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(c)),i=Object(I.i)(Object(I.e)(Array.isArray(t)?t:t.toArray()).sort(c));r=[];for(var a=0;a<n.length;a++)for(var o=0;o<i.length;o++)if(0===c(n[a].value,i[o].value)&&n[a].identifier===i[o].identifier){r.push(n[a]);break}}return Array.isArray(e)&&Array.isArray(t)?Object(I.g)(r):new l(Object(I.g)(r))}})}),ic="setIsSubset",ac=["typed","size","subset","compareNatural","Index"],oc=Object(s.a)(ic,ac,function(e){var t=e.typed,s=e.size,u=e.subset,c=e.compareNatural,f=e.Index;return t(ic,{"Array | Matrix, Array | Matrix":function(e,t){if(0===u(s(e),new f(0)))return!0;if(0===u(s(t),new f(0)))return!1;for(var r,n=Object(I.i)(Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(c)),i=Object(I.i)(Object(I.e)(Array.isArray(t)?t:t.toArray()).sort(c)),a=0;a<n.length;a++){r=!1;for(var o=0;o<i.length;o++)if(0===c(n[a].value,i[o].value)&&n[a].identifier===i[o].identifier){r=!0;break}if(!1===r)return!1}return!0}})}),sc="setMultiplicity",uc=["typed","size","subset","compareNatural","Index"],cc=Object(s.a)(sc,uc,function(e){var t=e.typed,a=e.size,o=e.subset,s=e.compareNatural,u=e.Index;return t(sc,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,t){if(0===o(a(t),new u(0)))return 0;for(var r=Object(I.e)(Array.isArray(t)?t:t.toArray()),n=0,i=0;i<r.length;i++)0===s(r[i],e)&&n++;return n}})}),fc="setPowerset",lc=["typed","size","subset","compareNatural","Index"],pc=Object(s.a)(fc,lc,function(e){var t=e.typed,i=e.size,a=e.subset,o=e.compareNatural,s=e.Index;return t(fc,{"Array | Matrix":function(e){if(0===a(i(e),new s(0)))return[];for(var t=Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(o),r=[],n=0;n.toString(2).length<=t.length;)r.push(u(t,n.toString(2).split("").reverse())),n++;return function(e){for(var t=[],r=e.length-1;0<r;r--)for(var n=0;n<r;n++)e[n].length>e[n+1].length&&(t=e[n],e[n]=e[n+1],e[n+1]=t);return e}(r)}});function u(e,t){for(var r=[],n=0;n<t.length;n++)"1"===t[n]&&r.push(e[n]);return r}}),mc="setSize",hc=["typed","compareNatural"],dc=Object(s.a)(mc,hc,function(e){var t=e.typed,a=e.compareNatural;return t(mc,{"Array | Matrix":function(e){return Array.isArray(e)?Object(I.e)(e).length:Object(I.e)(e.toArray()).length},"Array | Matrix, boolean":function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?Object(I.e)(e).length:Object(I.e)(e.toArray()).length;for(var r=Object(I.e)(Array.isArray(e)?e:e.toArray()).sort(a),n=1,i=1;i<r.length;i++)0!==a(r[i],r[i-1])&&n++;return n}})}),yc="setSymDifference",gc=["typed","size","concat","subset","setDifference","Index"],vc=Object(s.a)(yc,gc,function(e){var t=e.typed,i=e.size,a=e.concat,o=e.subset,s=e.setDifference,u=e.Index;return t(yc,{"Array | Matrix, Array | Matrix":function(e,t){if(0===o(i(e),new u(0)))return Object(I.e)(t);if(0===o(i(t),new u(0)))return Object(I.e)(e);var r=Object(I.e)(e),n=Object(I.e)(t);return a(s(r,n),s(n,r))}})}),bc="setUnion",xc=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],wc=Object(s.a)(bc,xc,function(e){var t=e.typed,i=e.size,a=e.concat,o=e.subset,s=e.setIntersect,u=e.setSymDifference,c=e.Index;return t(bc,{"Array | Matrix, Array | Matrix":function(e,t){if(0===o(i(e),new c(0)))return Object(I.e)(t);if(0===o(i(t),new c(0)))return Object(I.e)(e);var r=Object(I.e)(e),n=Object(I.e)(t);return a(u(r,n),s(r,n))}})}),Nc=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],Oc=Object(s.a)("add",Nc,function(e){var t=e.typed,r=e.matrix,n=e.addScalar,i=e.equalScalar,a=e.DenseMatrix,o=(e.SparseMatrix,Gt({typed:t})),s=Vt({typed:t,equalScalar:i}),u=Wt({typed:t,DenseMatrix:a}),c=Xt({typed:t}),f=Kt({typed:t}),l=t("add",Object(ae.e)({"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,n)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,n,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,n,!0)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,n)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"DenseMatrix, any":function(e,t){return f(e,t,n,!1)},"SparseMatrix, any":function(e,t){return u(e,t,n,!1)},"any, DenseMatrix":function(e,t){return f(t,e,n,!0)},"any, SparseMatrix":function(e,t){return u(t,e,n,!0)},"Array, any":function(e,t){return f(r(e),t,n,!1).valueOf()},"any, Array":function(e,t){return f(r(t),e,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(e,t,r){for(var n=l(e,t),i=0;i<r.length;i++)n=l(n,r[i]);return n}},n.signatures));return l}),Mc=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Ec=Object(s.a)("hypot",Mc,function(e){var t=e.typed,a=e.abs,o=e.addScalar,s=e.divideScalar,u=e.multiplyScalar,c=e.sqrt,f=e.smaller,l=e.isPositive,r=t("hypot",{"... number | BigNumber":function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=a(e[n]);f(r,i)?(t=u(t,u(s(r,i),s(r,i))),t=o(t,1),r=i):t=o(t,l(i)?u(s(i,r),s(i,r)):i)}return u(r,c(t))},Array:function(e){return r.apply(r,Object(I.e)(e))},Matrix:function(e){return r.apply(r,Object(I.e)(e.toArray()))}});return r}),jc=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix"],Sc=Object(s.a)("norm",jc,function(e){var t=e.typed,l=e.abs,p=e.add,m=e.pow,h=e.conj,d=e.sqrt,y=e.multiply,g=e.equalScalar,v=e.larger,b=e.smaller,r=e.matrix,n=t("norm",{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return x(r(e),2)},Matrix:function(e){return x(e,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(e){return n(e)},"Array, number | BigNumber | string":function(e,t){return x(r(e),t)},"Matrix, number | BigNumber | string":function(e,t){return x(e,t)}});function x(e,t){var r=e.size();if(1===r.length){if(t===Number.POSITIVE_INFINITY||"inf"===t){var n=0;return e.forEach(function(e){var t=l(e);v(t,n)&&(n=t)},!0),n}var i;if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return e.forEach(function(e){var t=l(e);i&&!b(t,i)||(i=t)},!0),i||0;if("fro"===t)return x(e,2);if("number"!=typeof t||isNaN(t))throw new Error("Unsupported parameter value");if(g(t,0))return Number.POSITIVE_INFINITY;var a=0;return e.forEach(function(e){a=p(m(l(e),t),a)},!0),m(a,1/t)}if(2===r.length){if(1===t){var o=[],s=0;return e.forEach(function(e,t){var r=t[1],n=p(o[r]||0,l(e));v(n,s)&&(s=n),o[r]=n},!0),s}if(t===Number.POSITIVE_INFINITY||"inf"===t){var u=[],c=0;return e.forEach(function(e,t){var r=t[0],n=p(u[r]||0,l(e));v(n,c)&&(c=n),u[r]=n},!0),c}if("fro"===t){var f=0;return e.forEach(function(e,t){f=p(f,y(e,h(e)))}),l(d(f))}if(2===t)throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw new Error("Unsupported parameter value")}}return n}),Ac=["typed","add","multiply"],Cc=Object(s.a)("dot",Ac,function(e){var t=e.typed,s=e.add,u=e.multiply;return t("dot",{"Matrix, Matrix":function(e,t){return r(e.toArray(),t.toArray())},"Matrix, Array":function(e,t){return r(e.toArray(),t)},"Array, Matrix":function(e,t){return r(e,t.toArray())},"Array, Array":r});function r(e,t){var r=Object(I.a)(e),n=Object(I.a)(t),i=r[0];if(1!==r.length||1!==n.length)throw new RangeError("Vector expected");if(r[0]!==n[0])throw new RangeError("Vectors must have equal length ("+r[0]+" != "+n[0]+")");if(0===i)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var a=0,o=0;o<i;o++)a=s(a,u(e[o],t[o]));return a}}),Tc=["typed","matrix","add"],_c=Object(s.a)("trace",Tc,function(e){var t=e.typed,r=e.matrix,m=e.add;return t("trace",{Array:function(e){return n(r(e))},SparseMatrix:function(e){var t=e._values,r=e._index,n=e._ptr,i=e._size,a=i[0],o=i[1];if(a!==o)throw new RangeError("Matrix must be square (size: "+Object(J.d)(i)+")");var s=0;if(0<t.length)for(var u=0;u<o;u++)for(var c=n[u],f=n[u+1],l=c;l<f;l++){var p=r[l];if(p===u){s=m(s,t[l]);break}if(u<p)break}return s},DenseMatrix:n,any:ae.a});function n(e){var t=e._size,r=e._data;switch(t.length){case 1:if(1===t[0])return Object(ae.a)(r[0]);throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");case 2:var n=t[0];if(n!==t[1])throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");for(var i=0,a=0;a<n;a++)i=m(i,r[a][a]);return i;default:throw new RangeError("Matrix must be two dimensional (size: "+Object(J.d)(t)+")")}}}),Ic=["typed","Index"],Bc=Object(s.a)("index",Ic,function(e){var t=e.typed,n=e.Index;return t("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var t=e.map(function(e){return Object(ie.e)(e)?e.toNumber():Array.isArray(e)||Object(ie.v)(e)?e.map(function(e){return Object(ie.e)(e)?e.toNumber():e}):e}),r=new n;return n.apply(r,t),r}})}),qc={end:!0};function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zc=["mathWithTransform"],Dc=Object(s.a)("Node",zc,function(e){var a=e.mathWithTransform;function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.evaluate=function(e){return this.compile().evaluate(e)},t.prototype.eval=function(e){return Object(ve.a)("Method Node.eval is renamed to Node.evaluate. Please use the new method name."),this.evaluate(e)},t.prototype.type="Node",t.prototype.isNode=!0,t.prototype.comment="",t.prototype.compile=function(){var r=this._compile(a,{}),n={},i=null;function t(e){var t=e||{};return function(e){for(var t in e)if(Object(ae.f)(e,t)&&t in qc)throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(t),r(t,n,i)}return{evaluate:t,eval:function(e){return Object(ve.a)("Method eval is renamed to evaluate. Please use the new method."),t(e)}}},t.prototype._compile=function(e,t){throw new Error("Method _compile should be implemented by type "+this.type)},t.prototype.forEach=function(e){throw new Error("Cannot run forEach on a Node interface")},t.prototype.map=function(e){throw new Error("Cannot run map on a Node interface")},t.prototype._ifNode=function(e){if(!Object(ie.w)(e))throw new TypeError("Callback function must return a Node");return e},t.prototype.traverse=function(e){e(this,null,null),function n(e,i){e.forEach(function(e,t,r){i(e,t,r),n(e,i)})}(this,e)},t.prototype.transform=function(a){return function e(t,r,n){var i=a(t,r,n);return i!==t?i:t.map(e)}(this,null,null)},t.prototype.filter=function(n){var i=[];return this.traverse(function(e,t,r){n(e,t,r)&&i.push(e)}),i},t.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},t.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},t.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},t.prototype.cloneDeep=function(){return this.map(function(e){return e.cloneDeep()})},t.prototype.equals=function(e){return!!e&&Object(ae.d)(this,e)},t.prototype.toString=function(e){var t;if(e&&"object"===kc(e))switch(kc(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this._toString(e)},t.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},t.prototype.toHTML=function(e){var t;if(e&&"object"===kc(e))switch(kc(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this.toHTML(e)},t.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},t.prototype.toTex=function(e){var t;if(e&&"object"===kc(e))switch(kc(e.handler)){case"object":case"undefined":break;case"function":t=e.handler(this,e);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==t?t:this._toTex(e)},t.prototype._toTex=function(e){throw new Error("_toTex not implemented for "+this.type)},t.prototype.getIdentifier=function(){return this.type},t.prototype.getContent=function(){return this},t},{isClass:!0,isNode:!0});function Rc(e){return e&&e.isIndexError?new R.a(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function Pc(e){return(Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fc(e){var r=e.subset;return function(e,t){try{if(Array.isArray(e))return r(e,t);if(e&&"function"==typeof e.subset)return e.subset(t);if("string"==typeof e)return r(e,t);if("object"!==Pc(e))throw new TypeError("Cannot apply index: unsupported type of object");if(!t.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Fi(e,t.getObjectProperty())}catch(e){throw Rc(e)}}}var Uc=["subset","Node"],Lc=Object(s.a)("AccessorNode",Uc,function(e){var t=e.subset,r=e.Node,s=Fc({subset:t});function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Object(ie.w)(e))throw new TypeError('Node expected for parameter "object"');if(!Object(ie.u)(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=t,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function i(e){return!(Object(ie.a)(e)||Object(ie.c)(e)||Object(ie.l)(e)||Object(ie.r)(e)||Object(ie.A)(e)||Object(ie.C)(e)||Object(ie.J)(e))}return(n.prototype=new r).type="AccessorNode",n.prototype.isAccessorNode=!0,n.prototype._compile=function(e,t){var a=this.object._compile(e,t),o=this.index._compile(e,t);if(this.index.isObjectProperty()){var n=this.index.getObjectProperty();return function(e,t,r){return Fi(a(e,t,r),n)}}return function(e,t,r){var n=a(e,t,r),i=o(e,t,n);return s(n,i)}},n.prototype.forEach=function(e){e(this.object,"object",this),e(this.index,"index",this)},n.prototype.map=function(e){return new n(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))},n.prototype.clone=function(){return new n(this.object,this.index)},n.prototype._toString=function(e){var t=this.object.toString(e);return i(this.object)&&(t="("+t+")"),t+this.index.toString(e)},n.prototype.toHTML=function(e){var t=this.object.toHTML(e);return i(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)},n.prototype._toTex=function(e){var t=this.object.toTex(e);return i(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)},n.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},n.fromJSON=function(e){return new n(e.object,e.index)},n},{isClass:!0,isNode:!0}),Hc=["Node"],$c=Object(s.a)("ArrayNode",Hc,function(e){var t=e.Node;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(ie.w))throw new TypeError("Array containing Nodes expected");function t(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")}Object.defineProperty(this,"nodes",{get:t,set:t})}return(n.prototype=new t).type="ArrayNode",n.prototype.isArrayNode=!0,n.prototype._compile=function(t,r){var e=Object(I.m)(this.items,function(e){return e._compile(t,r)});if("Array"===t.config.matrix)return function(t,r,n){return Object(I.m)(e,function(e){return e(t,r,n)})};var i=t.matrix;return function(t,r,n){return i(Object(I.m)(e,function(e){return e(t,r,n)}))}},n.prototype.forEach=function(e){for(var t=0;t<this.items.length;t++){e(this.items[t],"items["+t+"]",this)}},n.prototype.map=function(e){for(var t=[],r=0;r<this.items.length;r++)t[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));return new n(t)},n.prototype.clone=function(){return new n(this.items.slice(0))},n.prototype._toString=function(t){return"["+this.items.map(function(e){return e.toString(t)}).join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},n.fromJSON=function(e){return new n(e.items)},n.prototype.toHTML=function(t){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map(function(e){return e.toHTML(t)}).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},n.prototype._toTex=function(t){var r="\\begin{bmatrix}";return this.items.forEach(function(e){e.items?r+=e.items.map(function(e){return e.toTex(t)}).join("&"):r+=e.toTex(t),r+="\\\\"}),r+="\\end{bmatrix}"},n},{isClass:!0,isNode:!0});function Gc(e){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Zc=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function Vc(e,t){var r=e;"keep"!==t&&(r=e.getContent());for(var n=r.getIdentifier(),i=0;i<Zc.length;i++)if(n in Zc[i])return i;return null}function Jc(e,t){var r=e;"keep"!==t&&(r=e.getContent());var n=r.getIdentifier(),i=Vc(r,t);if(null===i)return null;var a=Zc[i][n];if(Object(ae.f)(a,"associativity")){if("left"===a.associativity)return"left";if("right"===a.associativity)return"right";throw Error("'"+n+"' has the invalid associativity '"+a.associativity+"'.")}return null}function Wc(e,t,r){var n="keep"!==r?e.getContent():e,i="keep"!==r?e.getContent():t,a=n.getIdentifier(),o=i.getIdentifier(),s=Vc(n,r);if(null===s)return null;var u=Zc[s][a];if(Object(ae.f)(u,"associativeWith")&&u.associativeWith instanceof Array){for(var c=0;c<u.associativeWith.length;c++)if(u.associativeWith[c]===o)return!0;return!1}return null}var Yc=["subset","?matrix","Node"],Xc=Object(s.a)("AssignmentNode",Yc,function(e){var t=e.subset,r=e.matrix,n=e.Node,m=Fc({subset:t}),h=function(e){var n=e.subset,i=e.matrix;return function(e,t,r){try{if(Array.isArray(e))return i(e).subset(t,r).valueOf();if(e&&"function"==typeof e.subset)return e.subset(t,r);if("string"==typeof e)return n(e,t,r);if("object"!==Gc(e))throw new TypeError("Cannot apply index: unsupported type of object");if(!t.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Ui(e,t.getObjectProperty(),r),e}catch(e){throw Rc(e)}}}({subset:t,matrix:r});function i(e,t,r){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=r?t:null,this.value=r||t,!Object(ie.J)(e)&&!Object(ie.a)(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Object(ie.J)(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!Object(ie.u)(this.index))throw new TypeError('IndexNode expected as "index"');if(!Object(ie.w)(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function a(e,t){var r=Vc(e,t=t||"keep"),n=Vc(e.value,t);return"all"===t||null!==n&&n<=r}return(i.prototype=new n).type="AssignmentNode",i.prototype.isAssignmentNode=!0,i.prototype._compile=function(e,t){var o=this.object._compile(e,t),u=this.index?this.index._compile(e,t):null,c=this.value._compile(e,t),s=this.object.name;if(this.index){if(this.index.isObjectProperty()){var a=this.index.getObjectProperty();return function(e,t,r){var n=o(e,t,r),i=c(e,t,r);return Ui(n,a,i)}}if(Object(ie.J)(this.object))return function(e,t,r){var n=o(e,t,r),i=c(e,t,r),a=u(e,t,n);return Ui(e,s,h(n,a,i)),i};var f=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var l=this.object.index.getObjectProperty();return function(e,t,r){var n=f(e,t,r),i=Fi(n,l),a=u(e,t,i),o=c(e,t,r);return Ui(n,l,h(i,a,o)),o}}var p=this.object.index._compile(e,t);return function(e,t,r){var n=f(e,t,r),i=p(e,t,n),a=m(n,i),o=u(e,t,a),s=c(e,t,r);return h(n,i,h(a,o,s)),s}}if(!Object(ie.J)(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,r){return Ui(e,s,c(e,t,r))}},i.prototype.forEach=function(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)},i.prototype.map=function(e){return new i(this._ifNode(e(this.object,"object",this)),this.index?this._ifNode(e(this.index,"index",this)):null,this._ifNode(e(this.value,"value",this)))},i.prototype.clone=function(){return new i(this.object,this.index,this.value)},i.prototype._toString=function(e){var t=this.object.toString(e),r=this.index?this.index.toString(e):"",n=this.value.toString(e);return a(this,e&&e.parenthesis)&&(n="("+n+")"),t+r+" = "+n},i.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},i.fromJSON=function(e){return new i(e.object,e.index,e.value)},i.prototype.toHTML=function(e){var t=this.object.toHTML(e),r=this.index?this.index.toHTML(e):"",n=this.value.toHTML(e);return a(this,e&&e.parenthesis)&&(n='<span class="math-paranthesis math-round-parenthesis">(</span>'+n+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+r+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+n},i.prototype._toTex=function(e){var t=this.object.toTex(e),r=this.index?this.index.toTex(e):"",n=this.value.toTex(e);return a(this,e&&e.parenthesis)&&(n="\\left(".concat(n,"\\right)")),t+r+":="+n},i},{isClass:!0,isNode:!0}),Qc=["ResultSet","Node"],Kc=Object(s.a)("BlockNode",Qc,function(e){var o=e.ResultSet,t=e.Node;function a(e){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map(function(e){var t=e&&e.node,r=!e||void 0===e.visible||e.visible;if(!Object(ie.w)(t))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof r)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:r}})}return(a.prototype=new t).type="BlockNode",a.prototype.isBlockNode=!0,a.prototype._compile=function(t,r){var e=Object(I.m)(this.blocks,function(e){return{evaluate:e.node._compile(t,r),visible:e.visible}});return function(r,n,i){var a=[];return Object(I.f)(e,function(e){var t=e.evaluate(r,n,i);e.visible&&a.push(t)}),new o(a)}},a.prototype.forEach=function(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)},a.prototype.map=function(e){for(var t=[],r=0;r<this.blocks.length;r++){var n=this.blocks[r],i=this._ifNode(e(n.node,"blocks["+r+"].node",this));t[r]={node:i,visible:n.visible}}return new a(t)},a.prototype.clone=function(){return new a(this.blocks.map(function(e){return{node:e.node,visible:e.visible}}))},a.prototype._toString=function(t){return this.blocks.map(function(e){return e.node.toString(t)+(e.visible?"":";")}).join("\n")},a.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},a.fromJSON=function(e){return new a(e.blocks)},a.prototype.toHTML=function(t){return this.blocks.map(function(e){return e.node.toHTML(t)+(e.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')},a.prototype._toTex=function(t){return this.blocks.map(function(e){return e.node.toTex(t)+(e.visible?"":";")}).join("\\;\\;\n")},a},{isClass:!0,isNode:!0}),ef=["Node"],tf=Object(s.a)("ConditionalNode",ef,function(e){var t=e.Node;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Object(ie.w)(e))throw new TypeError("Parameter condition must be a Node");if(!Object(ie.w)(t))throw new TypeError("Parameter trueExpr must be a Node");if(!Object(ie.w)(r))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=r}return(n.prototype=new t).type="ConditionalNode",n.prototype.isConditionalNode=!0,n.prototype._compile=function(e,t){var n=this.condition._compile(e,t),i=this.trueExpr._compile(e,t),a=this.falseExpr._compile(e,t);return function(e,t,r){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(Object(ie.e)(e))return!e.isZero();if(Object(ie.j)(e))return!(!e.re&&!e.im);if(Object(ie.L)(e))return!!e.value}if(null!=e)throw new TypeError('Unsupported type of condition "'+Object(ie.M)(e)+'"');return!1}(n(e,t,r))?i(e,t,r):a(e,t,r)}},n.prototype.forEach=function(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)},n.prototype.map=function(e){return new n(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))},n.prototype.clone=function(){return new n(this.condition,this.trueExpr,this.falseExpr)},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=Vc(this,t),n=this.condition.toString(e),i=Vc(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=r)&&(n="("+n+")");var a=this.trueExpr.toString(e),o=Vc(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=r)&&(a="("+a+")");var s=this.falseExpr.toString(e),u=Vc(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=r)&&(s="("+s+")"),n+" ? "+a+" : "+s},n.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},n.fromJSON=function(e){return new n(e.condition,e.trueExpr,e.falseExpr)},n.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=Vc(this,t),n=this.condition.toHTML(e),i=Vc(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=r)&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.trueExpr.toHTML(e),o=Vc(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=r)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.falseExpr.toHTML(e),u=Vc(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==u&&u<=r)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+'<span class="math-operator math-conditional-operator">?</span>'+a+'<span class="math-operator math-conditional-operator">:</span>'+s},n.prototype._toTex=function(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},n},{isClass:!0,isNode:!0}),rf=r(17),nf=r.n(rf),af={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},of={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},sf={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(of.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(of.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(of.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(of.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(of.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(of.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(of.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(of.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(of.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(of.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(of.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(of.bitAnd,"${args[1]}\\right)")},bitNot:{1:of.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(of.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(of.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(of.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(of.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(of.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(of.and,"${args[1]}\\right)")},not:{1:of.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(of.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(of.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(of.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(of.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(of.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(of.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(of.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(of.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(of.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(of.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(of.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(of.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(of.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(af.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},uf={deg:"^\\circ"};function cf(e){return nf()(e,{preserveFormatting:!0})}function ff(e,t){return(t=void 0!==t&&t)?Object(ae.f)(uf,e)?uf[e]:"\\mathrm{"+cf(e)+"}":Object(ae.f)(af,e)?af[e]:cf(e)}var lf=["Node"],pf=Object(s.a)("ConstantNode",lf,function(e){var t=e.Node;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(2===arguments.length)throw new SyntaxError("new ConstantNode(valueStr, valueType) is not supported anymore since math v4.0.0. Use new ConstantNode(value) instead, where value is a non-stringified value.");this.value=e}return(r.prototype=new t).type="ConstantNode",r.prototype.isConstantNode=!0,r.prototype._compile=function(e,t){var r=this.value;return function(){return r}},r.prototype.forEach=function(e){},r.prototype.map=function(e){return this.clone()},r.prototype.clone=function(){return new r(this.value)},r.prototype._toString=function(e){return Object(J.d)(this.value,e)},r.prototype.toHTML=function(e){var t=this._toString(e);switch(Object(ie.M)(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}},r.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},r.fromJSON=function(e){return new r(e.value)},r.prototype._toTex=function(e){var t=this._toString(e);switch(Object(ie.M)(this.value)){case"string":return"\\mathtt{"+cf(t)+"}";case"number":case"BigNumber":var r=t.toLowerCase().indexOf("e");return-1!==r?t.substring(0,r)+"\\cdot10^{"+t.substring(r+1)+"}":t;case"Fraction":return this.value.toLatex();default:return t}},r},{isClass:!0,isNode:!0}),mf=["typed","Node"],hf=Object(s.a)("FunctionAssignmentNode",mf,function(e){var f=e.typed,t=e.Node;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Object(ie.w)(r))throw new TypeError('Node expected for parameter "expr"');if(e in qc)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=t.map(function(e){return e&&e.name||e}),this.types=t.map(function(e){return e&&e.type||"any"}),this.expr=r}function a(e,t){var r=Vc(e,t),n=Vc(e.expr,t);return"all"===t||null!==n&&n<=r}return(n.prototype=new t).type="FunctionAssignmentNode",n.prototype.isFunctionAssignmentNode=!0,n.prototype._compile=function(e,t){var r=Object.create(t);Object(I.f)(this.params,function(e){r[e]=!0});var a=this.expr._compile(e,r),o=this.name,s=this.params,u=Object(I.k)(this.types,","),c=o+"("+Object(I.k)(this.params,", ")+")";return function(r,n,i){var e={};e[u]=function(){for(var e=Object.create(n),t=0;t<s.length;t++)e[s[t]]=arguments[t];return a(r,e,i)};var t=f(o,e);return t.syntax=c,Ui(r,o,t),t}},n.prototype.forEach=function(e){e(this.expr,"expr",this)},n.prototype.map=function(e){var t=this._ifNode(e(this.expr,"expr",this));return new n(this.name,this.params.slice(0),t)},n.prototype.clone=function(){return new n(this.name,this.params.slice(0),this.expr)},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=this.expr.toString(e);return a(this,t)&&(r="("+r+")"),this.name+"("+this.params.join(", ")+") = "+r},n.prototype.toJSON=function(){var r=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map(function(e,t){return{name:e,type:r[t]}}),expr:this.expr}},n.fromJSON=function(e){return new n(e.name,e.params,e.expr)},n.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=[],n=0;n<this.params.length;n++)r.push('<span class="math-symbol math-parameter">'+Object(J.c)(this.params[n])+"</span>");var i=this.expr.toHTML(e);return a(this,t)&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Object(J.c)(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+r.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+i},n.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=this.expr.toTex(e);return a(this,t)&&(r="\\left(".concat(r,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(ff).join(",")+"\\right):="+r},n},{isClass:!0,isNode:!0}),df=["Index"],yf=Object(s.a)("index",df,function(e){var a=e.Index;return function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if(Object(ie.D)(n))n.start--,n.end-=0<n.step?0:2;else if(n&&!0===n.isSet)n=n.map(function(e){return e-1});else if(Object(ie.b)(n)||Object(ie.v)(n))n=n.map(function(e){return e-1});else if(Object(ie.y)(n))n--;else if(Object(ie.e)(n))n=n.toNumber()-1;else if("string"!=typeof n)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[t]=n}var i=new a;return a.apply(i,e),i}},{isTransformFunction:!0});function gf(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var vf=["Range","Node","Index","size"],bf=Object(s.a)("IndexNode",vf,function(e){var n=e.Range,t=e.Node,r=e.Index,h=e.size,a=yf({Index:r});function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(ie.w))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");function r(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")}Object.defineProperty(this,"object",{get:r,set:r})}function d(e,t,r){return new n(Object(ie.e)(e)?e.toNumber():e,Object(ie.e)(t)?t.toNumber():t,Object(ie.e)(r)?r.toNumber():r)}return(i.prototype=new t).type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(p,m){var i=Object(I.m)(this.dimensions,function(e,a){if(Object(ie.E)(e)){if(e.needsEnd()){var t=Object.create(m);t.end=!0;var o=e.start._compile(p,t),s=e.end._compile(p,t),u=e.step?e.step._compile(p,t):function(){return 1};return function(e,t,r){var n=h(r).valueOf(),i=Object.create(t);return i.end=n[a],d(o(e,i,r),s(e,i,r),u(e,i,r))}}var n=e.start._compile(p,m),i=e.end._compile(p,m),c=e.step?e.step._compile(p,m):function(){return 1};return function(e,t,r){return d(n(e,t,r),i(e,t,r),c(e,t,r))}}if(Object(ie.J)(e)&&"end"===e.name){var r=Object.create(m);r.end=!0;var f=e._compile(p,r);return function(e,t,r){var n=h(r).valueOf(),i=Object.create(t);return i.end=n[a],f(e,i,r)}}var l=e._compile(p,m);return function(e,t,r){return l(e,t,r)}});return function(t,r,n){var e=Object(I.m)(i,function(e){return e(t,r,n)});return a.apply(void 0,gf(e))}},i.prototype.forEach=function(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)},i.prototype.map=function(e){for(var t=[],r=0;r<this.dimensions.length;r++)t[r]=this._ifNode(e(this.dimensions[r],"dimensions["+r+"]",this));return new i(t,this.dotNotation)},i.prototype.clone=function(){return new i(this.dimensions.slice(0),this.dotNotation)},i.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&Object(ie.l)(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},i.prototype._toString=function(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},i.fromJSON=function(e){return new i(e.dimensions,e.dotNotation)},i.prototype.toHTML=function(e){for(var t=[],r=0;r<this.dimensions.length;r++)t[r]=this.dimensions[r].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Object(J.c)(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},i.prototype._toTex=function(t){var e=this.dimensions.map(function(e){return e.toTex(t)});return this.dotNotation?"."+this.getObjectProperty():"_{"+e.join(",")+"}"},i},{isClass:!0,isNode:!0});function xf(e){return(xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wf=["Node"],Nf=Object(s.a)("ObjectNode",wf,function(e){var t=e.Node;function n(t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=t||{},t&&("object"!==xf(t)||!Object.keys(t).every(function(e){return Object(ie.w)(t[e])})))throw new TypeError("Object containing Nodes expected")}return(n.prototype=new t).type="ObjectNode",n.prototype.isObjectNode=!0,n.prototype._compile=function(e,t){var a={};for(var r in this.properties)if(Object(ae.f)(this.properties,r)){var n=Object(J.e)(r),i=JSON.parse(n);if(!Li(this.properties,i))throw new Error('No access to property "'+i+'"');a[i]=this.properties[r]._compile(e,t)}return function(e,t,r){var n={};for(var i in a)Object(ae.f)(a,i)&&(n[i]=a[i](e,t,r));return n}},n.prototype.forEach=function(e){for(var t in this.properties)Object(ae.f)(this.properties,t)&&e(this.properties[t],"properties["+Object(J.e)(t)+"]",this)},n.prototype.map=function(e){var t={};for(var r in this.properties)Object(ae.f)(this.properties,r)&&(t[r]=this._ifNode(e(this.properties[r],"properties["+Object(J.e)(r)+"]",this)));return new n(t)},n.prototype.clone=function(){var e={};for(var t in this.properties)Object(ae.f)(this.properties,t)&&(e[t]=this.properties[t]);return new n(e)},n.prototype._toString=function(e){var t=[];for(var r in this.properties)Object(ae.f)(this.properties,r)&&t.push(Object(J.e)(r)+": "+this.properties[r].toString(e));return"{"+t.join(", ")+"}"},n.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},n.fromJSON=function(e){return new n(e.properties)},n.prototype.toHTML=function(e){var t=[];for(var r in this.properties)Object(ae.f)(this.properties,r)&&t.push('<span class="math-symbol math-property">'+Object(J.c)(r)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[r].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},n.prototype._toTex=function(e){var t=[];for(var r in this.properties)Object(ae.f)(this.properties,r)&&t.push("\\mathbf{"+r+":} & "+this.properties[r].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(t.join("\n"),"\\end{array}\\right\\}")},n},{isClass:!0,isNode:!0}),Of=["Node"],Mf=Object(s.a)("OperatorNode",Of,function(e){var t=e.Node;function i(e,t,r,n){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(ie.w))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===n,this.op=e,this.fn=t,this.args=r||[]}function m(i,a,e,t,r){var n,o=Vc(i,a),s=Jc(i,a);if("all"===a||2<t.length&&"OperatorNode:add"!==i.getIdentifier()&&"OperatorNode:multiply"!==i.getIdentifier())return t.map(function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});switch(t.length){case 0:n=[];break;case 1:var u=Vc(t[0],a);if(r&&null!==u){var c,f;if(f="keep"===a?(c=t[0].getIdentifier(),i.getIdentifier()):(c=t[0].getContent().getIdentifier(),i.getContent().getIdentifier()),!1===Zc[o][f].latexLeftParens){n=[!1];break}if(!1===Zc[u][c].latexParens){n=[!1];break}}if(null===u){n=[!1];break}if(u<=o){n=[!0];break}n=[!1];break;case 2:var l,p,m=Vc(t[0],a),h=Wc(i,t[0],a);l=null!==m&&(m===o&&"right"===s&&!h||m<o);var d,y,g,v=Vc(t[1],a),b=Wc(i,t[1],a);if(p=null!==v&&(v===o&&"left"===s&&!b||v<o),r)g="keep"===a?(d=i.getIdentifier(),y=i.args[0].getIdentifier(),i.args[1].getIdentifier()):(d=i.getContent().getIdentifier(),y=i.args[0].getContent().getIdentifier(),i.args[1].getContent().getIdentifier()),null!==m&&(!1===Zc[o][d].latexLeftParens&&(l=!1),!1===Zc[m][y].latexParens&&(l=!1)),null!==v&&(!1===Zc[o][d].latexRightParens&&(p=!1),!1===Zc[v][g].latexParens&&(p=!1));n=[l,p];break;default:"OperatorNode:add"!==i.getIdentifier()&&"OperatorNode:multiply"!==i.getIdentifier()||(n=t.map(function(e){var t=Vc(e,a),r=Wc(i,e,a),n=Jc(e,a);return null!==t&&(o===t&&s===n&&!r||t<o)}))}return 2<=t.length&&"OperatorNode:multiply"===i.getIdentifier()&&i.implicit&&"auto"===a&&"hide"===e&&(n=t.map(function(e,t){var r="ParenthesisNode"===e.getIdentifier();return!(!n[t]&&!r)})),n}return(i.prototype=new t).type="OperatorNode",i.prototype.isOperatorNode=!0,i.prototype._compile=function(t,r){if("string"!=typeof this.fn||!Hi(t,this.fn))throw t[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var i=Fi(t,this.fn),e=Object(I.m)(this.args,function(e){return e._compile(t,r)});if(1===e.length){var n=e[0];return function(e,t,r){return i(n(e,t,r))}}if(2!==e.length)return function(t,r,n){return i.apply(null,Object(I.m)(e,function(e){return e(t,r,n)}))};var a=e[0],o=e[1];return function(e,t,r){return i(a(e,t,r),o(e,t,r))}},i.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},i.prototype.map=function(e){for(var t=[],r=0;r<this.args.length;r++)t[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new i(this.op,this.fn,t,this.implicit)},i.prototype.clone=function(){return new i(this.op,this.fn,this.args.slice(0),this.implicit)},i.prototype.isUnary=function(){return 1===this.args.length},i.prototype.isBinary=function(){return 2===this.args.length},i.prototype._toString=function(r){var e=r&&r.parenthesis?r.parenthesis:"keep",t=r&&r.implicit?r.implicit:"hide",n=this.args,i=m(this,e,t,n,!1);if(1===n.length){var a=Jc(this,e),o=n[0].toString(r);i[0]&&(o="("+o+")");var s=/[a-zA-Z]+/.test(this.op);return"right"===a?this.op+(s?" ":"")+o:"left"===a?o+(s?" ":"")+this.op:o+this.op}if(2===n.length){var u=n[0].toString(r),c=n[1].toString(r);return i[0]&&(u="("+u+")"),i[1]&&(c="("+c+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===t?u+" "+c:u+" "+this.op+" "+c}if(2<n.length&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var f=n.map(function(e,t){return e=e.toString(r),i[t]&&(e="("+e+")"),e});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===t?f.join(" "):f.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},i.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},i.fromJSON=function(e){return new i(e.op,e.fn,e.args,e.implicit)},i.prototype.toHTML=function(r){var e=r&&r.parenthesis?r.parenthesis:"keep",t=r&&r.implicit?r.implicit:"hide",n=this.args,i=m(this,e,t,n,!1);if(1===n.length){var a=Jc(this,e),o=n[0].toHTML(r);return i[0]&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===a?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Object(J.c)(this.op)+"</span>"+o:o+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Object(J.c)(this.op)+"</span>"}if(2===n.length){var s=n[0].toHTML(r),u=n[1].toHTML(r);return i[0]&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i[1]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===t?s+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+u:s+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Object(J.c)(this.op)+"</span>"+u}var c=n.map(function(e,t){return e=e.toHTML(r),i[t]&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e});return 2<n.length&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===t?c.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):c.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Object(J.c)(this.op)+"</span>"):'<span class="math-function">'+Object(J.c)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},i.prototype._toTex=function(r){var e=r&&r.parenthesis?r.parenthesis:"keep",t=r&&r.implicit?r.implicit:"hide",n=this.args,i=m(this,e,t,n,!0),a=of[this.fn];if(a=void 0===a?this.op:a,1===n.length){var o=Jc(this,e),s=n[0].toTex(r);return i[0]&&(s="\\left(".concat(s,"\\right)")),"right"===o?a+s:s+a}if(2===n.length){var u=n[0],c=u.toTex(r);i[0]&&(c="\\left(".concat(c,"\\right)"));var f,l=n[1].toTex(r);switch(i[1]&&(l="\\left(".concat(l,"\\right)")),f="keep"===e?u.getIdentifier():u.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return a+"{"+c+"}{"+l+"}";case"OperatorNode:pow":switch(c="{"+c+"}",l="{"+l+"}",f){case"ConditionalNode":case"OperatorNode:divide":c="\\left(".concat(c,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===t)return c+"~"+l}return c+a+l}if(2<n.length&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var p=n.map(function(e,t){return e=e.toTex(r),i[t]&&(e="\\left(".concat(e,"\\right)")),e});return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?p.join("~"):p.join(a)}return"\\mathrm{"+this.fn+"}\\left("+n.map(function(e){return e.toTex(r)}).join(",")+"\\right)"},i.prototype.getIdentifier=function(){return this.type+":"+this.fn},i},{isClass:!0,isNode:!0}),Ef=["Node"],jf=Object(s.a)("ParenthesisNode",Ef,function(e){var t=e.Node;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!Object(ie.w)(e))throw new TypeError('Node expected for parameter "content"');this.content=e}return(r.prototype=new t).type="ParenthesisNode",r.prototype.isParenthesisNode=!0,r.prototype._compile=function(e,t){return this.content._compile(e,t)},r.prototype.getContent=function(){return this.content.getContent()},r.prototype.forEach=function(e){e(this.content,"content",this)},r.prototype.map=function(e){return new r(e(this.content,"content",this))},r.prototype.clone=function(){return new r(this.content)},r.prototype._toString=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)},r.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},r.fromJSON=function(e){return new r(e.content)},r.prototype.toHTML=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)},r.prototype._toTex=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)},r},{isClass:!0,isNode:!0}),Sf=["Node"],Af=Object(s.a)("RangeNode",Sf,function(e){var t=e.Node;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Object(ie.w)(e))throw new TypeError("Node expected");if(!Object(ie.w)(t))throw new TypeError("Node expected");if(r&&!Object(ie.w)(r))throw new TypeError("Node expected");if(3<arguments.length)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=r||null}function o(e,t){var r=Vc(e,t),n={},i=Vc(e.start,t);if(n.start=null!==i&&i<=r||"all"===t,e.step){var a=Vc(e.step,t);n.step=null!==a&&a<=r||"all"===t}var o=Vc(e.end,t);return n.end=null!==o&&o<=r||"all"===t,n}return(n.prototype=new t).type="RangeNode",n.prototype.isRangeNode=!0,n.prototype.needsEnd=function(){return 0<this.filter(function(e){return Object(ie.J)(e)&&"end"===e.name}).length},n.prototype._compile=function(e,t){var n=e.range,i=this.start._compile(e,t),a=this.end._compile(e,t);if(this.step){var o=this.step._compile(e,t);return function(e,t,r){return n(i(e,t,r),a(e,t,r),o(e,t,r))}}return function(e,t,r){return n(i(e,t,r),a(e,t,r))}},n.prototype.forEach=function(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)},n.prototype.map=function(e){return new n(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))},n.prototype.clone=function(){return new n(this.start,this.end,this.step&&this.step)},n.prototype._toString=function(e){var t,r=o(this,e&&e.parenthesis?e.parenthesis:"keep"),n=this.start.toString(e);if(r.start&&(n="("+n+")"),t=n,this.step){var i=this.step.toString(e);r.step&&(i="("+i+")"),t+=":"+i}var a=this.end.toString(e);return r.end&&(a="("+a+")"),t+=":"+a},n.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(e){return new n(e.start,e.end,e.step)},n.prototype.toHTML=function(e){var t,r=o(this,e&&e.parenthesis?e.parenthesis:"keep"),n=this.start.toHTML(e);if(r.start&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=n,this.step){var i=this.step.toHTML(e);r.step&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+i}var a=this.end.toHTML(e);return r.end&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+a},n.prototype._toTex=function(e){var t=o(this,e&&e.parenthesis?e.parenthesis:"keep"),r=this.start.toTex(e);if(t.start&&(r="\\left(".concat(r,"\\right)")),this.step){var n=this.step.toTex(e);t.step&&(n="\\left(".concat(n,"\\right)")),r+=":"+n}var i=this.end.toTex(e);return t.end&&(i="\\left(".concat(i,"\\right)")),r+=":"+i},n},{isClass:!0,isNode:!0}),Cf=["Node"],Tf=Object(s.a)("RelationalNode",Cf,function(e){var t=e.Node;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}return(i.prototype=new t).type="RelationalNode",i.prototype.isRelationalNode=!0,i.prototype._compile=function(o,t){var s=this,u=this.params.map(function(e){return e._compile(o,t)});return function(e,t,r){for(var n,i=u[0](e,t,r),a=0;a<s.conditionals.length;a++){if(n=i,i=u[a+1](e,t,r),!Fi(o,s.conditionals[a])(n,i))return!1}return!0}},i.prototype.forEach=function(r){var n=this;this.params.forEach(function(e,t){return r(e,"params["+t+"]",n)},this)},i.prototype.map=function(r){var n=this;return new i(this.conditionals.slice(),this.params.map(function(e,t){return n._ifNode(r(e,"params["+t+"]",n))},this))},i.prototype.clone=function(){return new i(this.conditionals,this.params)},i.prototype._toString=function(n){for(var i=n&&n.parenthesis?n.parenthesis:"keep",a=Vc(this,i),e=this.params.map(function(e,t){var r=Vc(e,i);return"all"===i||null!==r&&r<=a?"("+e.toString(n)+")":e.toString(n)}),t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},r=e[0],o=0;o<this.conditionals.length;o++)r+=" "+t[this.conditionals[o]]+" "+e[o+1];return r},i.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},i.fromJSON=function(e){return new i(e.conditionals,e.params)},i.prototype.toHTML=function(n){for(var i=n&&n.parenthesis?n.parenthesis:"keep",a=Vc(this,i),e=this.params.map(function(e,t){var r=Vc(e,i);return"all"===i||null!==r&&r<=a?'<span class="math-parenthesis math-round-parenthesis">(</span>'+e.toHTML(n)+'<span class="math-parenthesis math-round-parenthesis">)</span>':e.toHTML(n)}),t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},r=e[0],o=0;o<this.conditionals.length;o++)r+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Object(J.c)(t[this.conditionals[o]])+"</span>"+e[o+1];return r},i.prototype._toTex=function(n){for(var i=n&&n.parenthesis?n.parenthesis:"keep",a=Vc(this,i),e=this.params.map(function(e,t){var r=Vc(e,i);return"all"===i||null!==r&&r<=a?"\\left("+e.toTex(n)+"\right)":e.toTex(n)}),t=e[0],r=0;r<this.conditionals.length;r++)t+=of[this.conditionals[r]]+e[r+1];return t},i},{isClass:!0,isNode:!0}),_f=["math","?Unit","Node"],If=Object(s.a)("SymbolNode",_f,function(e){var n=e.math,o=e.Unit,t=e.Node;function s(e){return!!o&&o.isValuelessUnit(e)}function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}return(r.prototype=new t).type="SymbolNode",r.prototype.isSymbolNode=!0,r.prototype._compile=function(n,e){var i=this.name;if(!0===e[i])return function(e,t,r){return t[i]};if(i in n)return function(e,t,r){return Fi(i in e?e:n,i)};var a=s(i);return function(e,t,r){return i in e?Fi(e,i):a?new o(null,i):function(e){throw new Error("Undefined symbol "+e)}(i)}},r.prototype.forEach=function(e){},r.prototype.map=function(e){return this.clone()},r.prototype.clone=function(){return new r(this.name)},r.prototype._toString=function(e){return this.name},r.prototype.toHTML=function(e){var t=Object(J.c)(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"},r.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},r.fromJSON=function(e){return new r(e.name)},r.prototype._toTex=function(e){var t=!1;void 0===n[this.name]&&s(this.name)&&(t=!0);var r=ff(this.name,t);return"\\"===r[0]?r:" "+r},r},{isClass:!0,isNode:!0});function Bf(e){return(Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qf(){return(qf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var kf=["math","Node","SymbolNode"],zf=Object(s.a)("FunctionNode",kf,function(e){var i=e.math,t=e.Node,n=e.SymbolNode;function y(e,t){if(!(this instanceof y))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new n(e)),!Object(ie.w)(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(ie.w))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});function r(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")}Object.defineProperty(this,"object",{get:r,set:r})}(y.prototype=new t).type="FunctionNode",y.prototype.isFunctionNode=!0,y.prototype._compile=function(i,t){if(!(this instanceof y))throw new TypeError("No valid FunctionNode");var a=Object(I.m)(this.args,function(e){return e._compile(i,t)});if(Object(ie.J)(this.fn)){var o=this.fn.name,s=o in i?Fi(i,o):void 0;if("function"==typeof s&&!0===s.rawArgs){var n=this.args;return function(e,t,r){return(o in e?Fi(e,o):s)(n,i,qf({},e,t))}}if(1===a.length){var u=a[0];return function(e,t,r){return(o in e?Fi(e,o):s)(u(e,t,r))}}if(2!==a.length)return function(t,r,n){return(o in t?Fi(t,o):s).apply(null,Object(I.m)(a,function(e){return e(t,r,n)}))};var c=a[0],f=a[1];return function(e,t,r){return(o in e?Fi(e,o):s)(c(e,t,r),f(e,t,r))}}if(Object(ie.a)(this.fn)&&Object(ie.u)(this.fn.index)&&this.fn.index.isObjectProperty()){var l=this.fn.object._compile(i,t),p=this.fn.index.getObjectProperty(),m=this.args;return function(t,r,n){var e=l(t,r,n);return function(e,t){if(!Hi(e,t))throw new Error('No access to method "'+t+'"')}(e,p),e[p]&&e[p].rawArgs?e[p](m,i,qf({},t,r)):e[p].apply(e,Object(I.m)(a,function(e){return e(t,r,n)}))}}var h=this.fn._compile(i,t),d=this.args;return function(t,r,n){var e=h(t,r,n);return e&&e.rawArgs?e(d,i,qf({},t,r)):e.apply(e,Object(I.m)(a,function(e){return e(t,r,n)}))}},y.prototype.forEach=function(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},y.prototype.map=function(e){for(var t=this._ifNode(e(this.fn,"fn",this)),r=[],n=0;n<this.args.length;n++)r[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new y(t,r)},y.prototype.clone=function(){return new y(this.fn,this.args.slice(0))};var a=y.prototype.toString;function o(e,t,r){for(var n,i="",a=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),o=0;null!==(n=a.exec(e));)if(i+=e.substring(o,n.index),o=n.index,"$$"===n[0])i+="$",o++;else{o+=n[0].length;var s=t[n[1]];if(!s)throw new ReferenceError("Template: Property "+n[1]+" does not exist.");if(void 0===n[2])switch(Bf(s)){case"string":i+=s;break;case"object":if(Object(ie.w)(s))i+=s.toTex(r);else{if(!Array.isArray(s))throw new TypeError("Template: "+n[1]+" has to be a Node, String or array of Nodes");i+=s.map(function(e,t){if(Object(ie.w)(e))return e.toTex(r);throw new TypeError("Template: "+n[1]+"["+t+"] is not a Node.")}).join(",")}break;default:throw new TypeError("Template: "+n[1]+" has to be a Node, String or array of Nodes")}else{if(!Object(ie.w)(s[n[2]]&&s[n[2]]))throw new TypeError("Template: "+n[1]+"["+n[2]+"] is not a Node.");i+=s[n[2]].toTex(r)}}return i+=e.slice(o)}y.prototype.toString=function(e){var t,r=this.fn.toString(e);return e&&"object"===Bf(e.handler)&&Object(ae.f)(e.handler,r)&&(t=e.handler[r](this,e)),void 0!==t?t:a.call(this,e)},y.prototype._toString=function(t){var e=this.args.map(function(e){return e.toString(t)});return(Object(ie.q)(this.fn)?"("+this.fn.toString(t)+")":this.fn.toString(t))+"("+e.join(", ")+")"},y.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},y.fromJSON=function(e){return new y(e.fn,e.args)},y.prototype.toHTML=function(t){var e=this.args.map(function(e){return e.toHTML(t)});return'<span class="math-function">'+Object(J.c)(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var r=y.prototype.toTex;return y.prototype.toTex=function(e){var t;return e&&"object"===Bf(e.handler)&&Object(ae.f)(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t?t:r.call(this,e)},y.prototype._toTex=function(t){var e,r,n=this.args.map(function(e){return e.toTex(t)});switch(sf[this.name]&&(e=sf[this.name]),!i[this.name]||"function"!=typeof i[this.name].toTex&&"object"!==Bf(i[this.name].toTex)&&"string"!=typeof i[this.name].toTex||(e=i[this.name].toTex),Bf(e)){case"function":r=e(this,t);break;case"string":r=o(e,this,t);break;case"object":switch(Bf(e[n.length])){case"function":r=e[n.length](this,t);break;case"string":r=o(e[n.length],this,t)}}return void 0!==r?r:o("\\mathrm{${name}}\\left(${args}\\right)",this,t)},y.prototype.getIdentifier=function(){return this.type+":"+this.name},y},{isClass:!0,isNode:!0});function Df(){return(Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Rf=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Pf=Object(s.a)("parse",Rf,function(e){var t=e.typed,s=e.numeric,u=e.config,i=e.AccessorNode,c=e.ArrayNode,o=e.AssignmentNode,a=e.BlockNode,f=e.ConditionalNode,l=e.ConstantNode,p=e.FunctionAssignmentNode,m=e.FunctionNode,h=e.IndexNode,d=e.ObjectNode,y=e.OperatorNode,g=e.ParenthesisNode,n=e.RangeNode,v=e.RelationalNode,b=e.SymbolNode,x=t("parse",{string:function(e){return k(e,{})},"Array | Matrix":function(e){return r(e,{})},"string, Object":function(e,t){return k(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":r});function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==t.nodes?t.nodes:{};return oe(e,function(e){if("string"!=typeof e)throw new TypeError("String expected");return k(e,r)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},N={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},O={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},M={true:!0,false:!1,null:null,undefined:void 0},E=["NaN","Infinity"];function j(e,t){return e.expression.substr(e.index,t)}function S(e){return j(e,1)}function A(e){e.index++}function C(e){return e.expression.charAt(e.index-1)}function T(e){return e.expression.charAt(e.index+1)}function _(e){for(e.tokenType=w.NULL,e.token="",e.comment="";x.isWhitespace(S(e),e.nestingLevel);)A(e);if("#"===S(e))for(;"\n"!==S(e)&&""!==S(e);)e.comment+=S(e),A(e);if(""!==S(e)){if("\n"===S(e)&&!e.nestingLevel)return e.tokenType=w.DELIMITER,e.token=S(e),void A(e);var t=S(e),r=j(e,2),n=j(e,3);if(3===n.length&&N[n])return e.tokenType=w.DELIMITER,e.token=n,A(e),A(e),void A(e);if(2===r.length&&N[r])return e.tokenType=w.DELIMITER,e.token=r,A(e),void A(e);if(N[t])return e.tokenType=w.DELIMITER,e.token=t,void A(e);if(x.isDigitDot(t)){if(e.tokenType=w.NUMBER,"."===S(e))e.token+=S(e),A(e),x.isDigit(S(e))||(e.tokenType=w.DELIMITER);else{for(;x.isDigit(S(e));)e.token+=S(e),A(e);x.isDecimalMark(S(e),T(e))&&(e.token+=S(e),A(e))}for(;x.isDigit(S(e));)e.token+=S(e),A(e);if("E"===S(e)||"e"===S(e))if(x.isDigit(T(e))||"-"===T(e)||"+"===T(e)){if(e.token+=S(e),A(e),"+"!==S(e)&&"-"!==S(e)||(e.token+=S(e),A(e)),!x.isDigit(S(e)))throw re(e,'Digit expected, got "'+S(e)+'"');for(;x.isDigit(S(e));)e.token+=S(e),A(e);if(x.isDecimalMark(S(e),T(e)))throw re(e,'Digit expected, got "'+S(e)+'"')}else if("."===T(e))throw A(e),re(e,'Digit expected, got "'+S(e)+'"')}else{if(!x.isAlpha(S(e),C(e),T(e))){for(e.tokenType=w.UNKNOWN;""!==S(e);)e.token+=S(e),A(e);throw re(e,'Syntax error in part "'+e.token+'"')}for(;x.isAlpha(S(e),C(e),T(e))||x.isDigit(S(e));)e.token+=S(e),A(e);Object(ae.f)(O,e.token)?e.tokenType=w.DELIMITER:e.tokenType=w.SYMBOL}}else e.tokenType=w.DELIMITER}function I(e){for(;_(e),"\n"===e.token;);}function B(e){e.nestingLevel++}function q(e){e.nestingLevel--}function k(e,t){var r={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null};Df(r,{expression:e,extraNodes:t}),_(r);var n=function(e){var t,r,n=[];""!==e.token&&"\n"!==e.token&&";"!==e.token&&((t=z(e)).comment=e.comment);for(;"\n"===e.token||";"===e.token;)0===n.length&&t&&(r=";"!==e.token,n.push({node:t,visible:r})),_(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&((t=z(e)).comment=e.comment,r=";"!==e.token,n.push({node:t,visible:r}));return 0<n.length?new a(n):(t||((t=new l(void 0)).comment=e.comment),t)}(r);if(""!==r.token)throw r.tokenType===w.DELIMITER?ne(r,"Unexpected operator "+r.token):re(r,'Unexpected part "'+r.token+'"');return n}function z(e){var t,r,n,i,a=function(e){var t=function(e){var t=D(e);for(;"or"===e.token;)I(e),t=new y("or","or",[t,D(e)]);return t}(e);for(;"?"===e.token;){var r=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,I(e);var n=t,i=z(e);if(":"!==e.token)throw re(e,"False part of conditional expression expected");e.conditionalLevel=null,I(e);var a=z(e);t=new f(n,i,a),e.conditionalLevel=r}return t}(e);if("="!==e.token)return a;if(Object(ie.J)(a))return t=a.name,I(e),n=z(e),new o(new b(t),n);if(Object(ie.a)(a))return I(e),n=z(e),new o(a.object,a.index,n);if(Object(ie.r)(a)&&Object(ie.J)(a.fn)&&(i=!0,r=[],t=a.name,a.args.forEach(function(e,t){Object(ie.J)(e)?r[t]=e.name:i=!1}),i))return I(e),n=z(e),new p(t,r,n);throw re(e,"Invalid left hand side of assignment operator =")}function D(e){for(var t=R(e);"xor"===e.token;)I(e),t=new y("xor","xor",[t,R(e)]);return t}function R(e){for(var t=P(e);"and"===e.token;)I(e),t=new y("and","and",[t,P(e)]);return t}function P(e){for(var t=F(e);"|"===e.token;)I(e),t=new y("|","bitOr",[t,F(e)]);return t}function F(e){for(var t=U(e);"^|"===e.token;)I(e),t=new y("^|","bitXor",[t,U(e)]);return t}function U(e){for(var t=L(e);"&"===e.token;)I(e),t=new y("&","bitAnd",[t,L(e)]);return t}function L(e){for(var t=[H(e)],r=[],n={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Object(ae.f)(n,e.token);){var i={name:e.token,fn:n[e.token]};r.push(i),I(e),t.push(H(e))}return 1===t.length?t[0]:2===t.length?new y(r[0].name,r[0].fn,t):new v(r.map(function(e){return e.fn}),t)}function H(e){var t,r,n,i;t=$(e);for(var a={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Object(ae.f)(a,e.token);)n=a[r=e.token],I(e),i=[t,$(e)],t=new y(r,n,i);return t}function $(e){var t,r,n,i;t=G(e);for(var a={to:"to",in:"to"};Object(ae.f)(a,e.token);)n=a[r=e.token],I(e),t="in"===r&&""===e.token?new y("*","multiply",[t,new b("in")],!0):(i=[t,G(e)],new y(r,n,i));return t}function G(e){var t,r=[];if(t=":"===e.token?new l(1):Z(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(r.push(t);":"===e.token&&r.length<3;)I(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?r.push(new b("end")):r.push(Z(e));t=3===r.length?new n(r[0],r[2],r[1]):new n(r[0],r[1])}return t}function Z(e){var t,r,n,i;t=V(e);for(var a={"+":"add","-":"subtract"};Object(ae.f)(a,e.token);)n=a[r=e.token],I(e),i=[t,V(e)],t=new y(r,n,i);return t}function V(e){var t,r,n,i;r=t=J(e);for(var a={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Object(ae.f)(a,e.token);)i=a[n=e.token],I(e),r=J(e),t=new y(n,i,[t,r]);return t}function J(e){var t,r;for(r=t=W(e);e.tokenType===w.SYMBOL||"in"===e.token&&Object(ie.l)(t)||!(e.tokenType!==w.NUMBER||Object(ie.l)(r)||Object(ie.B)(r)&&"!"!==r.op)||"("===e.token;)r=W(e),t=new y("*","multiply",[t,r],!0);return t}function W(e){for(var t=Y(e),r=t,n=[];"/"===e.token&&Object(ie.l)(r);){if(n.push(Df({},e)),I(e),e.tokenType!==w.NUMBER){Df(e,n.pop());break}if(n.push(Df({},e)),I(e),e.tokenType!==w.SYMBOL&&"("!==e.token){n.pop(),Df(e,n.pop());break}Df(e,n.pop()),n.pop(),r=Y(e),t=new y("/","divide",[t,r])}return t}function Y(e){var t,r,n,i={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Object(ae.f)(i,e.token)?(n=i[e.token],t=e.token,I(e),r=[Y(e)],new y(t,n,r)):function(e){var t,r,n,i;t=function(e){var t,r,n;t=function(e){var t=[];if(e.tokenType===w.SYMBOL&&Object(ae.f)(e.extraNodes,e.token)){var r=e.extraNodes[e.token];if(_(e),"("===e.token){if(t=[],B(e),_(e),")"!==e.token)for(t.push(z(e));","===e.token;)_(e),t.push(z(e));if(")"!==e.token)throw re(e,"Parenthesis ) expected");q(e),_(e)}return new r(t)}return function(e){var t,r;if(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in O)return r=e.token,_(e),t=Object(ae.f)(M,r)?new l(M[r]):-1!==E.indexOf(r)?new l(s(r,"number")):new b(r),t=X(e,t);return function(e){var t,r;return'"'!==e.token?function(e){var t,r;return"'"!==e.token?function(e){var t,r,n,i;if("["!==e.token)return function(e){if("{"!==e.token)return function(e){var t;return e.tokenType!==w.NUMBER?function(e){var t;if("("!==e.token)return function(e){throw""===e.token?re(e,"Unexpected end of expression"):re(e,"Value expected")}(e);if(B(e),_(e),t=z(e),")"===e.token)return q(e),_(e),t=new g(t),t=X(e,t);throw re(e,"Parenthesis ) expected")}(e):(t=e.token,_(e),new l(s(t,u.number)))}(e);var t;B(e);var r={};do{if(_(e),"}"!==e.token){if('"'===e.token)t=Q(e);else if("'"===e.token)t=K(e);else{if(e.tokenType!==w.SYMBOL)throw re(e,"Symbol or string expected as object key");t=e.token,_(e)}if(":"!==e.token)throw re(e,"Colon : expected after object key");_(e),r[t]=z(e)}}while(","===e.token);if("}"!==e.token)throw re(e,"Comma , or bracket } expected after object value");q(e),_(e);var n=new d(r);return n=X(e,n)}(e);if(B(e),_(e),"]"!==e.token){var a=ee(e);if(";"===e.token){for(n=1,r=[a];";"===e.token;)_(e),r[n]=ee(e),n++;if("]"!==e.token)throw re(e,"End of matrix ] expected");q(e),_(e),i=r[0].items.length;for(var o=1;o<n;o++)if(r[o].items.length!==i)throw ne(e,"Column dimensions mismatch ("+r[o].items.length+" !== "+i+")");t=new c(r)}else{if("]"!==e.token)throw re(e,"End of matrix ] expected");q(e),_(e),t=a}}else q(e),_(e),t=new c([]);return X(e,t)}(e):(r=K(e),t=new l(r),t=X(e,t))}(e):(r=Q(e),t=new l(r),t=X(e,t))}(e)}(e)}(e);var i={"!":"factorial","'":"ctranspose"};for(;Object(ae.f)(i,e.token);)r=e.token,n=i[r],_(e),t=new y(r,n,[t]),t=X(e,t);return t}(e),"^"!==e.token&&".^"!==e.token||(r=e.token,n="^"===r?"pow":"dotPow",I(e),i=[t,Y(e)],t=new y(r,n,i));return t}(e)}function X(e,t,r){for(var n;!("("!==e.token&&"["!==e.token&&"."!==e.token||r&&-1===r.indexOf(e.token));)if(n=[],"("===e.token){if(!Object(ie.J)(t)&&!Object(ie.a)(t))return t;if(B(e),_(e),")"!==e.token)for(n.push(z(e));","===e.token;)_(e),n.push(z(e));if(")"!==e.token)throw re(e,"Parenthesis ) expected");q(e),_(e),t=new m(t,n)}else if("["===e.token){if(B(e),_(e),"]"!==e.token)for(n.push(z(e));","===e.token;)_(e),n.push(z(e));if("]"!==e.token)throw re(e,"Parenthesis ] expected");q(e),_(e),t=new i(t,new h(n))}else{if(_(e),e.tokenType!==w.SYMBOL)throw re(e,"Property name expected after dot");n.push(new l(e.token)),_(e);t=new i(t,new h(n,!0))}return t}function Q(e){for(var t="";""!==S(e)&&'"'!==S(e);)"\\"===S(e)&&(t+=S(e),A(e)),t+=S(e),A(e);if(_(e),'"'!==e.token)throw re(e,'End of string " expected');return _(e),JSON.parse('"'+t+'"')}function K(e){for(var t="";""!==S(e)&&"'"!==S(e);)"\\"===S(e)&&(t+=S(e),A(e)),t+=S(e),A(e);if(_(e),"'"!==e.token)throw re(e,"End of string ' expected");return _(e),JSON.parse('"'+t+'"')}function ee(e){for(var t=[z(e)],r=1;","===e.token;)_(e),t[r]=z(e),r++;return new c(t)}function te(e){return e.index-e.token.length+1}function re(e,t){var r=te(e),n=new SyntaxError(t+" (char "+r+")");return n.char=r,n}function ne(e,t){var r=te(e),n=new SyntaxError(t+" (char "+r+")");return n.char=r,n}return x.isAlpha=function(e,t,r){return x.isValidLatinOrGreek(e)||x.isValidMathSymbol(e,r)||x.isValidMathSymbol(t,e)},x.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},x.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},x.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&0<t},x.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},x.isDigitDot=function(e){return"0"<=e&&e<="9"||"."===e},x.isDigit=function(e){return"0"<=e&&e<="9"},x}),Ff="compile",Uf=["typed","parse"],Lf=Object(s.a)(Ff,Uf,function(e){var t=e.typed,r=e.parse;return t(Ff,{string:function(e){return r(e).compile()},"Array | Matrix":function(e){return oe(e,function(e){return r(e).compile()})}})}),Hf="evaluate",$f=["typed","parse"],Gf=Object(s.a)(Hf,$f,function(e){var t=e.typed,r=e.parse;return t(Hf,{string:function(e){return r(e).compile().evaluate({})},"string, Object":function(e,t){return r(e).compile().evaluate(t)},"Array | Matrix":function(e){var t={};return oe(e,function(e){return r(e).compile().evaluate(t)})},"Array | Matrix, Object":function(e,t){return oe(e,function(e){return r(e).compile().evaluate(t)})}})}),Zf=Object(s.a)("eval",["evaluate"],function(e){var n=e.evaluate;return function(){Object(ve.a)('Function "eval" has been renamed to "evaluate" in v6.0.0, please use the new function instead.');for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(n,t)}}),Vf=["parse"],Jf=Object(s.a)("Parser",Vf,function(e){var t=e.parse;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.parse=function(e){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},r.prototype.compile=function(e){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},r.prototype.evaluate=function(e){return t(e).compile().evaluate(this.scope)},r.prototype.eval=function(e){return Object(ve.a)("Method Parser.eval is renamed to Parser.evaluate. Please use the new method name."),this.evaluate(e)},r.prototype.get=function(e){return e in this.scope?Fi(this.scope,e):void 0},r.prototype.getAll=function(){return Object(ae.e)({},this.scope)},r.prototype.set=function(e,t){return Ui(this.scope,e,t)},r.prototype.remove=function(e){delete this.scope[e]},r.prototype.clear=function(){for(var e in this.scope)Object(ae.f)(this.scope,e)&&delete this.scope[e]},r},{isClass:!0}),Wf=["typed","Parser"],Yf=Object(s.a)("parser",Wf,function(e){var t=e.typed,r=e.Parser;return t("parser",{"":function(){return new r}})}),Xf=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],Qf=Object(s.a)("lup",Xf,function(e){var t=e.typed,r=e.matrix,M=e.abs,E=e.addScalar,j=e.divideScalar,S=e.multiplyScalar,A=e.subtract,C=e.larger,T=e.equalScalar,O=e.unaryMinus,_=e.DenseMatrix,I=e.SparseMatrix,B=e.Spa;return t("lup",{DenseMatrix:function(e){return n(e)},SparseMatrix:function(e){return function(e){var r,s,u,c=e._size[0],t=e._size[1],n=Math.min(c,t),f=e._values,l=e._index,p=e._ptr,m=[],h=[],d=[],y=[c,n],g=[],v=[],b=[],x=[n,t],w=[],N=[];for(r=0;r<c;r++)w[r]=r,N[r]=r;function i(){var i=new B;s<c&&(d.push(m.length),m.push(1),h.push(s)),b.push(g.length);var e=p[s],t=p[s+1];for(u=e;u<t;u++)r=l[u],i.set(w[r],f[u]);0<s&&i.forEach(0,s-1,function(r,n){I._forEachRow(r,m,h,d,function(e,t){r<e&&i.accumulate(e,O(S(t,n)))})});var n=s,a=i.get(s),o=M(a);i.forEach(s+1,c-1,function(e,t){var r=M(t);C(r,o)&&(n=e,o=r,a=t)}),s!==n&&(I._swapRows(s,n,y[1],m,h,d),I._swapRows(s,n,x[1],g,v,b),i.swap(s,n),function(e,t){var r=N[e],n=N[t];w[r]=t,w[n]=e,N[e]=n,N[t]=r}(s,n)),i.forEach(0,c-1,function(e,t){e<=s?(g.push(t),v.push(e)):(t=j(t,a),T(t,0)||(m.push(t),h.push(e)))})}for(s=0;s<t;s++)i();return b.push(g.length),d.push(m.length),{L:new I({values:m,index:h,ptr:d,size:y}),U:new I({values:g,index:v,ptr:b,size:x}),p:w,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=n(r(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function n(e){var t,r,n,i=e._size[0],a=e._size[1],o=Math.min(i,a),s=Object(ae.a)(e._data),u=[],c=[i,o],f=[],l=[o,a],p=[];for(t=0;t<i;t++)p[t]=t;for(r=0;r<a;r++){if(0<r)for(t=0;t<i;t++){var m=Math.min(t,r),h=0;for(n=0;n<m;n++)h=E(h,S(s[t][n],s[n][r]));s[t][r]=A(s[t][r],h)}var d=r,y=0,g=0;for(t=r;t<i;t++){var v=s[t][r],b=M(v);C(b,y)&&(d=t,y=b,g=v)}if(r!==d&&(p[r]=[p[d],p[d]=p[r]][0],_._swapRows(r,d,s)),r<i)for(t=r+1;t<i;t++){var x=s[t][r];T(x,0)||(s[t][r]=j(s[t][r],g))}}for(r=0;r<a;r++)for(t=0;t<i;t++)0===r&&(t<a&&(f[t]=[]),u[t]=[]),t<r?(t<a&&(f[t][r]=s[t][r]),r<i&&(u[t][r]=0)):t!==r?(t<a&&(f[t][r]=0),r<i&&(u[t][r]=s[t][r])):(t<a&&(f[t][r]=s[t][r]),r<i&&(u[t][r]=1));var w=new _({data:u,size:c}),N=new _({data:f,size:l}),O=[];for(t=0,o=p.length;t<o;t++)O[p[t]]=t;return{L:w,U:N,p:O,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),Kf=["typed","matrix","zeros","identity","isZero","unequal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract"],el=Object(s.a)("qr",Kf,function(e){var t=e.typed,r=e.matrix,b=e.zeros,x=e.identity,w=e.isZero,N=e.unequal,O=e.sign,M=e.sqrt,E=e.conj,j=e.unaryMinus,S=e.addScalar,A=e.divideScalar,C=e.multiplyScalar,T=e.subtract;return t("qr",{DenseMatrix:function(e){return n(e)},SparseMatrix:function(e){return function(){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=n(r(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}});function n(e){var t,r,n,i=e._size[0],a=e._size[1],o=x([i],"dense"),s=o._data,u=e.clone(),c=u._data,f=b([i],"");for(n=0;n<Math.min(a,i);++n){var l=c[n][n],p=j(O(l)),m=E(p),h=0;for(t=n;t<i;t++)h=S(h,C(c[t][n],E(c[t][n])));var d=C(p,M(h));if(!w(d)){var y=T(l,d);for(t=n+(f[n]=1);t<i;t++)f[t]=A(c[t][n],y);var g=j(E(A(y,d))),v=void 0;for(r=n;r<a;r++){for(v=0,t=n;t<i;t++)v=S(v,C(E(f[t]),c[t][r]));for(v=C(v,g),t=n;t<i;t++)c[t][r]=C(T(c[t][r],C(f[t],v)),m)}for(t=0;t<i;t++){for(v=0,r=n;r<i;r++)v=S(v,C(s[t][r],f[r]));for(v=C(v,g),r=n;r<i;++r)s[t][r]=A(T(s[t][r],C(v,E(f[r]))),m)}}}for(t=0;t<i;++t)for(r=0;r<t&&r<a;++r){if(N(0,A(c[t][r],1e5)))throw new Error("math.qr(): unknown error - R is not lower triangular (element ("+t+", "+r+")  = "+c[t][r]+")");c[t][r]=C(c[t][r],0)}return{Q:o,R:u,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}});function tl(e,t,r,n,i,a,o){var s=0;for(r[o]=e;0<=s;){var u=r[o+s],c=r[n+u];-1===c?(s--,a[t++]=u):(r[n+u]=r[i+c],r[o+ ++s]=c)}return t}function rl(e){return-e-2}var nl=["add","multiply","transpose"],il=Object(s.a)("csAmd",nl,function(e){var K=e.add,ee=e.multiply,te=e.transpose;return function(e,t){if(!t||e<=0||3<e)return null;var r=t._size,n=r[0],i=r[1],a=0,o=Math.max(16,10*Math.sqrt(i)),s=function(e,t,r,n,i){var a=te(t);if(1===e&&n===r)return K(t,a);if(2!==e)return ee(a,t);for(var o=a._index,s=a._ptr,u=0,c=0;c<r;c++){var f=s[c];if(s[c]=u,!(s[c+1]-f>i))for(var l=s[c+1];f<l;f++)o[u++]=o[f]}return s[r]=u,t=te(a),ee(a,t)}(e,t,n,i,o=Math.min(i-2,o));!function(e,t,r){for(var n=e._values,i=e._index,a=e._ptr,o=e._size[1],s=0,u=0;u<o;u++){var c=a[u];for(a[u]=s;c<a[u+1];c++)t(i[c],u,n?n[c]:1,r)&&(i[s]=i[c],n&&(n[s]=n[c]),s++)}a[o]=s,i.splice(s,i.length-s),n&&n.splice(s,n.length-s)}(s,ne,null);for(var u,c,f,l,p,m,h,d,y,g,v,b,x,w,N,O,M=s._index,E=s._ptr,j=E[i],S=[],A=[],C=i+1,T=2*(i+1),_=3*(i+1),I=4*(i+1),B=5*(i+1),q=6*(i+1),k=7*(i+1),z=S,D=function(e,t,r,n,i,a,o,s,u,c,f,l){for(var p=0;p<e;p++)r[n+p]=t[p+1]-t[p];for(var m=r[n+e]=0;m<=e;m++)r[i+m]=-1,a[m]=-1,r[o+m]=-1,r[s+m]=-1,r[u+m]=1,r[c+m]=1,r[f+m]=0,r[l+m]=r[n+m];var h=re(0,0,r,c,e);return r[f+e]=-2,t[e]=-1,r[c+e]=0,h}(i,E,A,0,_,z,T,k,C,q,I,B),R=function(e,t,r,n,i,a,o,s,u,c,f){for(var l=0,p=0;p<e;p++){var m=r[n+p];if(0===m)r[i+p]=-2,l++,t[p]=-1,r[a+p]=0;else if(o<m)r[s+p]=0,r[i+p]=-1,l++,t[p]=rl(e),r[s+e]++;else{var h=r[u+m];-1!==h&&(c[h]=p),r[f+p]=r[u+m],r[u+m]=p}}return l}(i,E,A,B,I,q,o,C,_,z,T),P=0;R<i;){for(f=-1;P<i&&-1===(f=A[_+P]);P++);-1!==A[T+f]&&(z[A[T+f]]=-1),A[_+P]=A[T+f];var F=A[I+f],U=A[C+f];R+=U;var L=0;A[C+f]=-U;var H=E[f],$=0===F?H:j,G=$;for(l=1;l<=F+1;l++){for(d=F<l?(h=H,A[0+(m=f)]-F):(h=E[m=M[H++]],A[0+m]),p=1;p<=d;p++)(y=A[C+(u=M[h++])])<=0||(L+=y,A[C+u]=-y,-1!==A[T+(M[G++]=u)]&&(z[A[T+u]]=z[u]),-1!==z[u]?A[T+z[u]]=A[T+u]:A[_+A[B+u]]=A[T+u]);m!==f&&(E[m]=rl(f),A[q+m]=0)}for(0!==F&&(j=G),A[B+f]=L,E[f]=$,A[0+f]=G-$,A[I+f]=-2,D=re(D,a,A,q,i),g=$;g<G;g++)if(!((v=A[I+(u=M[g])])<=0)){var Z=D-(y=-A[C+u]);for(H=E[u],b=E[u]+v-1;H<=b;H++)A[q+(m=M[H])]>=D?A[q+m]-=y:0!==A[q+m]&&(A[q+m]=A[B+m]+Z)}for(g=$;g<G;g++){for(x=(b=E[u=M[g]])+A[I+u]-1,O=N=0,H=w=b;H<=x;H++)if(0!==A[q+(m=M[H])]){var V=A[q+m]-D;0<V?(O+=V,N+=M[w++]=m):(E[m]=rl(f),A[q+m]=0)}A[I+u]=w-b+1;var J=w,W=b+A[0+u];for(H=1+x;H<W;H++){var Y=A[C+(c=M[H])];Y<=0||(O+=Y,N+=M[w++]=c)}0===O?(E[u]=rl(f),L-=y=-A[C+u],U+=y,R+=y,A[C+u]=0,A[I+u]=-1):(A[B+u]=Math.min(A[B+u],O),M[w]=M[J],M[J]=M[b],M[b]=f,A[0+u]=w-b+1,N=(N<0?-N:N)%i,A[T+u]=A[k+N],z[A[k+N]=u]=N)}for(A[B+f]=L,D=re(D+(a=Math.max(a,L)),a,A,q,i),g=$;g<G;g++)if(!(0<=A[C+(u=M[g])]))for(u=A[k+(N=z[u])],A[k+N]=-1;-1!==u&&-1!==A[T+u];u=A[T+u],D++){for(d=A[0+u],v=A[I+u],H=E[u]+1;H<=E[u]+d-1;H++)A[q+M[H]]=D;var X=u;for(c=A[T+u];-1!==c;){var Q=A[0+c]===d&&A[I+c]===v;for(H=E[c]+1;Q&&H<=E[c]+d-1;H++)A[q+M[H]]!==D&&(Q=0);Q?(E[c]=rl(u),A[C+u]+=A[C+c],A[C+c]=0,A[I+c]=-1,c=A[T+c],A[T+X]=c):c=A[T+(X=c)]}}for(g=H=$;g<G;g++)(y=-A[C+(u=M[g])])<=0||(A[C+u]=y,O=A[B+u]+L-y,-1!==A[_+(O=Math.min(O,i-R-y))]&&(z[A[_+O]]=u),A[T+u]=A[_+O],z[u]=-1,A[_+O]=u,P=Math.min(P,O),A[B+u]=O,M[H++]=u);A[C+f]=U,0==(A[0+f]=H-$)&&(E[f]=-1,A[q+f]=0),0!==F&&(j=H)}for(u=0;u<i;u++)E[u]=rl(E[u]);for(c=0;c<=i;c++)A[_+c]=-1;for(c=i;0<=c;c--)0<A[C+c]||(A[T+c]=A[_+E[c]],A[_+E[c]]=c);for(m=i;0<=m;m--)A[C+m]<=0||-1!==E[m]&&(A[T+m]=A[_+E[m]],A[_+E[m]]=m);for(u=f=0;u<=i;u++)-1===E[u]&&(f=tl(u,f,A,_,T,S,q));return S.splice(S.length-1,1),S};function re(e,t,r,n,i){if(e<2||e+t<0){for(var a=0;a<i;a++)0!==r[n+a]&&(r[n+a]=1);e=2}return e}function ne(e,t){return e!==t}});function al(e,t,r,n,i,a,o){var s,u,c,f=0;if(e<=t||r[n+t]<=r[i+e])return-1;r[i+e]=r[n+t];var l=r[a+e];if(r[a+e]=t,-1===l)f=1,c=e;else{for(f=2,c=l;c!==r[o+c];c=r[o+c]);for(s=l;s!==c;s=u)u=r[o+s],r[o+s]=c}return{jleaf:f,q:c}}var ol=["transpose"],sl=Object(s.a)("csCounts",ol,function(e){var j=e.transpose;return function(e,t,r,n){if(!e||!t||!r)return null;var i,a,o,s,u,c,f,l=e._size,p=l[0],m=l[1],h=4*m+(n?m+p+1:0),d=[],y=m,g=2*m,v=3*m,b=4*m,x=5*m+1;for(o=0;o<h;o++)d[o]=-1;var w=[],N=j(e),O=N._index,M=N._ptr;for(o=0;o<m;o++)for(w[a=r[o]]=-1===d[v+a]?1:0;-1!==a&&-1===d[v+a];a=t[a])d[v+a]=o;if(n){for(o=0;o<m;o++)d[r[o]]=o;for(i=0;i<p;i++){for(o=m,c=M[i],f=M[i+1],u=c;u<f;u++)o=Math.min(o,d[O[u]]);d[x+i]=d[b+o],d[b+o]=i}}for(i=0;i<m;i++)d[0+i]=i;for(o=0;o<m;o++){for(-1!==t[a=r[o]]&&w[t[a]]--,s=n?d[b+o]:a;-1!==s;s=n?d[x+s]:-1)for(u=M[s];u<M[s+1];u++){var E=al(i=O[u],a,d,v,y,g,0);1<=E.jleaf&&w[a]++,2===E.jleaf&&w[E.q]--}-1!==t[a]&&(d[0+a]=t[a])}for(a=0;a<m;a++)-1!==t[a]&&(w[t[a]]+=w[a]);return w}}),ul=["add","multiply","transpose"],cl=Object(s.a)("csSqr",ul,function(e){var t=e.add,r=e.multiply,n=e.transpose,c=il({add:t,multiply:r,transpose:n}),f=sl({transpose:n});return function(e,t,r){var n,i=t._ptr,a=t._size[1],o={};if(o.q=c(e,t),e&&!o.q)return null;if(r){var s=e?function(e,t,r,n){for(var i=e._values,a=e._index,o=e._ptr,s=e._size,u=e._datatype,c=s[0],f=s[1],l=n&&e._values?[]:null,p=[],m=[],h=0,d=0;d<f;d++){m[d]=h;for(var y=r?r[d]:d,g=o[y],v=o[y+1],b=g;b<v;b++){var x=t?t[a[b]]:a[b];p[h]=x,l&&(l[h]=i[b]),h++}}return m[f]=h,e.createSparseMatrix({values:l,index:p,ptr:m,size:[c,f],datatype:u})}(t,null,o.q,0):t;o.parent=function(e,t){if(!e)return null;var r,n,i=e._index,a=e._ptr,o=e._size,s=o[0],u=o[1],c=[],f=[],l=u;if(t)for(r=0;r<s;r++)f[l+r]=-1;for(var p=0;p<u;p++){c[p]=-1,f[0+p]=-1;for(var m=a[p],h=a[p+1],d=m;d<h;d++){var y=i[d];for(r=t?f[l+y]:y;-1!==r&&r<p;r=n)n=f[0+r],f[0+r]=p,-1===n&&(c[r]=p);t&&(f[l+y]=p)}}return c}(s,1);var u=function(e,t){if(!e)return null;var r,n=0,i=[],a=[],o=t,s=2*t;for(r=0;r<t;r++)a[0+r]=-1;for(r=t-1;0<=r;r--)-1!==e[r]&&(a[o+r]=a[0+e[r]],a[0+e[r]]=r);for(r=0;r<t;r++)-1===e[r]&&(n=tl(r,n,a,0,o,i,s));return i}(o.parent,a);if(o.cp=f(s,o.parent,u,1),s&&o.parent&&o.cp&&function(e,t){var r=e._ptr,n=e._index,i=e._size,a=i[0],o=i[1];t.pinv=[],t.leftmost=[];var s,u,c,f,l,p=t.parent,m=t.pinv,h=t.leftmost,d=[],y=a,g=a+o,v=a+2*o;for(u=0;u<o;u++)d[y+u]=-1,d[g+u]=-1,d[v+u]=0;for(s=0;s<a;s++)h[s]=-1;for(u=o-1;0<=u;u--)for(f=r[u],l=r[u+1],c=f;c<l;c++)h[n[c]]=u;for(s=a-1;0<=s;s--)(m[s]=-1)!==(u=h[s])&&(0==d[v+u]++&&(d[g+u]=s),d[0+s]=d[y+u],d[y+u]=s);for(t.lnz=0,t.m2=a,u=0;u<o;u++)if(s=d[y+u],t.lnz++,s<0&&(s=t.m2++),m[s]=u,!(--v[u]<=0)){t.lnz+=d[v+u];var b=p[u];-1!==b&&(0===d[v+b]&&(d[g+b]=d[g+u]),d[0+d[g+u]]=d[y+b],d[y+b]=d[0+s],d[v+b]+=d[v+u])}for(s=0;s<a;s++)m[s]<0&&(m[s]=u++);return!0}(s,o))for(n=o.unz=0;n<a;n++)o.unz+=o.cp[n]}else o.unz=4*i[a]+a,o.lnz=o.unz;return o}});function fl(e,t){return e[t]<0}function ll(e,t){e[t]=rl(e[t])}function pl(e){return e<0?rl(e):e}function ml(e,t,r,n,i){var a,o,s,u=t._index,c=t._ptr,f=t._size[1],l=0;for(n[0]=e;0<=l;){e=n[l];var p=i?i[e]:e;fl(c,e)||(ll(c,e),n[f+l]=p<0?0:pl(c[p]));var m=1;for(o=n[f+l],s=p<0?0:pl(c[p+1]);o<s;o++)if(!fl(c,a=u[o])){n[f+l]=o,n[++l]=a,m=0;break}m&&(l--,n[--r]=e)}return r}var hl=["divideScalar","multiply","subtract"],dl=Object(s.a)("csSpsolve",hl,function(e){var O=e.divideScalar,M=e.multiply,E=e.subtract;return function(e,t,r,n,i,a,o){var s,u,c,f,l=e._values,p=e._index,m=e._ptr,h=e._size[1],d=t._values,y=t._index,g=t._ptr,v=function(e,t,r,n,i){var a,o,s,u=e._ptr,c=e._size,f=t._index,l=t._ptr,p=c[1],m=p;for(o=l[r],s=l[r+1],a=o;a<s;a++){var h=f[a];fl(u,h)||(m=ml(h,e,m,n,i))}for(a=m;a<p;a++)ll(u,n[a]);return m}(e,t,r,n,a);for(s=v;s<h;s++)i[n[s]]=0;for(u=g[r],c=g[r+1],s=u;s<c;s++)i[y[s]]=d[s];for(var b=v;b<h;b++){var x=n[b],w=a?a[x]:x;if(!(w<0))for(u=m[w],c=m[w+1],i[x]=O(i[x],l[o?u:c-1]),s=o?u+1:u,f=o?c:c-1;s<f;s++){var N=p[s];i[N]=E(i[N],M(l[s],i[x]))}}return v}}),yl=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],gl=Object(s.a)("csLu",yl,function(e){var S=e.abs,A=e.divideScalar,C=e.multiply,t=e.subtract,T=e.larger,_=e.largerEq,I=e.SparseMatrix,B=dl({divideScalar:A,multiply:C,subtract:t});return function(e,t,r){if(!e)return null;var n,i=e._size[1],a=100,o=100;t&&(n=t.q,a=t.lnz||a,o=t.unz||o);var s,u,c=[],f=[],l=[],p=new I({values:c,index:f,ptr:l,size:[i,i]}),m=[],h=[],d=[],y=new I({values:m,index:h,ptr:d,size:[i,i]}),g=[],v=[],b=[];for(s=0;s<i;s++)v[s]=0,g[s]=-1,l[s+1]=0;for(var x=o=a=0;x<i;x++){l[x]=a,d[x]=o;var w=n?n[x]:x,N=B(p,e,w,b,v,g,1),O=-1,M=-1;for(u=N;u<i;u++)if(g[s=b[u]]<0){var E=S(v[s]);T(E,M)&&(M=E,O=s)}else h[o]=g[s],m[o++]=v[s];if(-1===O||M<=0)return null;g[w]<0&&_(S(v[w]),C(M,r))&&(O=w);var j=v[O];for(h[o]=x,m[o++]=j,g[O]=x,f[a]=O,c[a++]=1,u=N;u<i;u++)g[s=b[u]]<0&&(f[a]=s,c[a++]=A(v[s],j)),v[s]=0}for(l[i]=a,d[i]=o,u=0;u<a;u++)f[u]=g[f[u]];return c.splice(a,c.length-a),f.splice(a,f.length-a),m.splice(o,m.length-o),h.splice(o,h.length-o),{L:p,U:y,pinv:g}}}),vl=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],bl=Object(s.a)("slu",vl,function(e){var t=e.typed,r=e.abs,n=e.add,i=e.multiply,a=e.transpose,o=e.divideScalar,s=e.subtract,u=e.larger,c=e.largerEq,f=e.SparseMatrix,l=cl({add:n,multiply:i,transpose:a}),p=gl({abs:r,divideScalar:o,multiply:i,subtract:s,larger:u,largerEq:c,SparseMatrix:f});return t("slu",{"SparseMatrix, number, number":function(e,t,r){if(!Object(j.i)(t)||t<0||3<t)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(r<0||1<r)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var n=l(t,e,!1),i=p(e,n,r);return{L:i.L,U:i.U,p:i.pinv,q:n.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})});function xl(e,t){var r,n=t.length,i=[];if(e)for(r=0;r<n;r++)i[e[r]]=t[r];else for(r=0;r<n;r++)i[r]=t[r];return i}var wl="lusolve",Nl=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Ol=Object(s.a)(wl,Nl,function(e){var t=e.typed,n=e.matrix,i=e.lup,a=e.slu,s=e.usolve,u=e.lsolve,c=eo({DenseMatrix:e.DenseMatrix});return t(wl,{"Array, Array | Matrix":function(e,t){e=n(e);var r=i(e);return o(r.L,r.U,r.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var r=i(e);return o(r.L,r.U,r.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var r=i(e);return o(r.L,r.U,r.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,r,n){var i=a(e,r,n);return o(i.L,i.U,i.p,i.q,t)},"Object, Array | Matrix":function(e,t){return o(e.L,e.U,e.p,e.q,t)}});function f(e){if(Object(ie.v)(e))return e;if(Object(ie.b)(e))return n(e);throw new TypeError("Invalid Matrix LU decomposition")}function o(e,t,r,n,i){e=f(e),t=f(t),i=c(e,i,!1),r&&(i._data=xl(r,i._data));var a=u(e,i),o=s(t,a);return n&&(o._data=xl(n,o._data)),o}}),Ml=["parse"],El=Object(s.a)("Help",Ml,function(e){var o=e.parse;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var e=this.doc||{},t="\n";if(e.name&&(t+="Name: "+e.name+"\n\n"),e.category&&(t+="Category: "+e.category+"\n\n"),e.description&&(t+="Description:\n    "+e.description+"\n\n"),e.syntax&&(t+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){t+="Examples:\n";for(var r={},n=0;n<e.examples.length;n++){var i=e.examples[n];t+="    "+i+"\n";var a=void 0;try{a=o(i).compile().evaluate(r)}catch(e){a=e}void 0===a||Object(ie.s)(a)||(t+="        "+Object(J.d)(a,{precision:14})+"\n")}t+="\n"}return e.seealso&&e.seealso.length&&(t+="See also: "+e.seealso.join(", ")+"\n"),t},n.prototype.toJSON=function(){var e=Object(ae.a)(this.doc);return e.mathjs="Help",e},n.fromJSON=function(e){var t={};for(var r in e)"mathjs"!==r&&(t[r]=e[r]);return new n(t)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),jl=["?on","math"],Sl=Object(s.a)("Chain",jl,function(e){var t=e.on,r=e.math;function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");Object(ie.h)(e)?this.value=e.value:this.value=e}function a(e,t){Object(ae.h)(i.prototype,e,function(){var e=t();if("function"==typeof e)return o(e)})}function o(r){return function(){for(var e=[this.value],t=0;t<arguments.length;t++)e[t+1]=arguments[t];return new i(r.apply(r,e))}}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Object(J.d)(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(e){return new i(e.value)},i.createProxy=function(t,e){if("string"==typeof t)!function(e,t){"function"==typeof t&&(i.prototype[e]=o(t))}(t,e);else{var r=function(e){Object(ae.f)(t,e)&&void 0===s[e]&&a(e,function(){return t[e]})};for(var n in t)r(n)}};var s={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(r),t&&t("import",function(e,t,r){r||a(e,t)}),i},{isClass:!0}),Al={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},Cl={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},Tl={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},_l={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Il={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Bl={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:_l,E:_l,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:Tl,PI:Tl,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:Cl,eval:Cl,help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:Il,var:Il,acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},typeOf:Al,typeof:Al,numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}},ql=["typed","mathWithTransform","Help"],kl=Object(s.a)("help",ql,function(e){var t=e.typed,a=e.mathWithTransform,o=e.Help;return t("help",{any:function(e){var t,r=e;if("string"!=typeof e)for(t in a)if(Object(ae.f)(a,t)&&e===a[t]){r=t;break}var n=Fi(Bl,r);if(n)return new o(n);var i="function"==typeof r?r.name:r;throw new Error('No documentation found on "'+i+'"')}})}),zl=["typed","Chain"],Dl=Object(s.a)("chain",zl,function(e){var t=e.typed,r=e.Chain;return t("chain",{"":function(){return new r},any:function(e){return new r(e)}})}),Rl=["typed","matrix","subtract","multiply","unaryMinus","lup"],Pl=Object(s.a)("det",Rl,function(e){var t=e.typed,n=e.matrix,f=e.subtract,l=e.multiply,p=e.unaryMinus,m=e.lup;return t("det",{any:function(e){return Object(ae.a)(e)},"Array | Matrix":function(e){var t;switch((t=Object(ie.v)(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return Object(ae.a)(e);case 1:if(1===t[0])return Object(ae.a)(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");case 2:var r=t[0];if(r===t[1])return function(e,t){{if(1===t)return Object(ae.a)(e[0][0]);if(2===t)return f(l(e[0][0],e[1][1]),l(e[1][0],e[0][1]));for(var r=m(e),n=r.U[0][0],i=1;i<t;i++)n=l(n,r.U[i][i]);for(var a=0,o=0,s=[];;){for(;s[o];)o++;if(t<=o)break;for(var u=o,c=0;!s[r.p[u]];)s[r.p[u]]=!0,u=r.p[u],c++;c%2==0&&a++}return a%2==0?n:p(n)}}(e.clone().valueOf(),r);throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Object(J.d)(t)+")")}}})}),Fl=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Ul=Object(s.a)("inv",Fl,function(e){var t=e.typed,i=e.matrix,v=e.divideScalar,b=e.addScalar,x=e.multiply,w=e.unaryMinus,N=e.det,O=e.identity,M=e.abs;return t("inv",{"Array | Matrix":function(e){var t=Object(ie.v)(e)?e.size():Object(I.a)(e);switch(t.length){case 1:if(1===t[0])return Object(ie.v)(e)?i([v(1,e.valueOf()[0])]):[v(1,e[0])];throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");case 2:var r=t[0],n=t[1];if(r===n)return Object(ie.v)(e)?i(a(e.valueOf(),r,n),e.storage()):a(e,r,n);throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Object(J.d)(t)+")")}},any:function(e){return v(1,e)}});function a(e,t,r){var n,i,a,o,s;if(1===t){if(0===(o=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[v(1,o)]]}if(2===t){var u=N(e);if(0===u)throw Error("Cannot calculate inverse, determinant is zero");return[[v(e[1][1],u),v(w(e[0][1]),u)],[v(w(e[1][0]),u),v(e[0][0],u)]]}var c=e.concat();for(n=0;n<t;n++)c[n]=c[n].concat();for(var f=O(t).valueOf(),l=0;l<r;l++){var p=M(c[l][l]),m=l;for(n=l+1;n<t;)M(c[n][l])>p&&(p=M(c[n][l]),m=n),n++;if(0===p)throw Error("Cannot calculate inverse, determinant is zero");(n=m)!==l&&(s=c[l],c[l]=c[n],c[n]=s,s=f[l],f[l]=f[n],f[n]=s);var h=c[l],d=f[l];for(n=0;n<t;n++){var y=c[n],g=f[n];if(n!==l){if(0!==y[l]){for(a=v(w(y[l]),h[l]),i=l;i<r;i++)y[i]=b(y[i],x(a,h[i]));for(i=0;i<r;i++)g[i]=b(g[i],x(a,d[i]))}}else{for(a=h[l],i=l;i<r;i++)y[i]=v(y[i],a);for(i=0;i<r;i++)g[i]=v(g[i],a)}}}return f}}),Ll=["typed","abs","add","identity","inv","multiply"],Hl=Object(s.a)("expm",Ll,function(e){var t=e.typed,d=e.abs,y=e.add,g=e.identity,v=e.inv,b=e.multiply;return t("expm",{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");for(var r=t[0],n=function(e,t){for(var r=0;r<30;r++)for(var n=0;n<=r;n++){var i=r-n;if(x(e,n,i)<t)return{q:n,j:i}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(e){for(var t=e.size()[0],r=0,n=0;n<t;n++){for(var i=0,a=0;a<t;a++)i+=d(e.get([n,a]));r=Math.max(i,r)}return r}(e),1e-15),i=n.q,a=n.j,o=b(e,Math.pow(2,-a)),s=g(r),u=g(r),c=1,f=o,l=-1,p=1;p<=i;p++)1<p&&(f=b(f,o),l=-l),s=y(s,b(c=c*(i-p+1)/((2*i-p+1)*p),f)),u=y(u,b(c*l,f));for(var m=b(v(u),s),h=0;h<a;h++)m=b(m,m);return Object(ie.H)(e)?e.createSparseMatrix(m):m}});function x(e,t,r){for(var n=1,i=2;i<=t;i++)n*=i;for(var a=n,o=t+1;o<=2*t;o++)a*=o;var s=a*(2*t+1);return 8*Math.pow(e/Math.pow(2,r),2*t)*n*n/(a*s)}}),$l=["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],Gl=Object(s.a)("sqrtm",$l,function(e){var t=e.typed,o=e.abs,s=e.add,u=e.multiply,r=e.sqrt,c=e.subtract,f=e.inv,l=e.size,p=e.max,m=e.identity,n=t("sqrtm",{"Array | Matrix":function(e){var t=Object(ie.v)(e)?e.size():Object(I.a)(e);switch(t.length){case 1:if(1===t[0])return r(e);throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")");case 2:if(t[0]===t[1])return function(e){var t,r=0,n=e,i=m(l(e));do{var a=n;if(n=u(.5,s(a,f(i))),i=u(.5,s(i,f(a))),t=p(o(c(n,a))),d<t&&++r>h)throw new Error("computing square root of matrix: iterative method could not converge")}while(d<t);return n}(e);throw new RangeError("Matrix must be square (size: "+Object(J.d)(t)+")")}}}),h=1e3,d=1e-6;return n}),Zl=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Vl=Object(s.a)("divide",Zl,function(e){var t=e.typed,r=e.matrix,n=e.multiply,i=e.equalScalar,a=e.divideScalar,o=e.inv,s=sr({typed:t,equalScalar:i}),u=Kt({typed:t});return t("divide",Object(ae.e)({"Array | Matrix, Array | Matrix":function(e,t){return n(e,o(t))},"DenseMatrix, any":function(e,t){return u(e,t,a,!1)},"SparseMatrix, any":function(e,t){return s(e,t,a,!1)},"Array, any":function(e,t){return u(r(e),t,a,!1).valueOf()},"any, Array | Matrix":function(e,t){return n(e,o(t))}},a.signatures))}),Jl="distance",Wl=["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],Yl=Object(s.a)(Jl,Wl,function(e){var t=e.typed,l=e.addScalar,p=e.subtract,m=e.multiplyScalar,h=e.divideScalar,s=e.unaryMinus,d=e.sqrt,u=e.abs;return t(Jl,{"Array, Array, Array":function(e,t,r){if(2!==e.length||2!==t.length||2!==r.length)throw new TypeError("Invalid Arguments: Try again");if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(r))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var n=h(p(r[1],r[0]),p(t[1],t[0])),i=m(m(n,n),t[0]),a=s(m(n,t[0])),o=e[1];return f(e[0],e[1],i,a,o)},"Object, Object, Object":function(e,t,r){if(2!==Object.keys(e).length||2!==Object.keys(t).length||2!==Object.keys(r).length)throw new TypeError("Invalid Arguments: Try again");if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(r))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in r&&"lineTwoPtY"in r){var n=h(p(r.lineTwoPtY,r.lineTwoPtX),p(t.lineOnePtY,t.lineOnePtX)),i=m(m(n,n),t.lineOnePtX),a=s(m(n,t.lineOnePtX)),o=e.pointX;return f(e.pointX,e.pointY,i,a,o)}throw new TypeError("Key names do not match")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!n(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return f(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!n(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!i(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return o(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(2===e.length&&2===t.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");return y(e[0],e[1],t[0],t[1])}if(3!==e.length||3!==t.length)throw new TypeError("Invalid Arguments: Try again");if(!n(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!n(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return g(e[0],e[1],e[2],t[0],t[1],t[2])},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!n(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return f(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!n(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!i(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return o(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return y(e.pointOneX,e.pointOneY,t.pointTwoX,t.pointTwoY);throw new TypeError("Key names do not match")}if(3!==Object.keys(e).length||3!==Object.keys(t).length)throw new TypeError("Invalid Arguments: Try again");if(!n(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!n(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return g(e.pointOneX,e.pointOneY,e.pointOneZ,t.pointTwoX,t.pointTwoY,t.pointTwoZ);throw new TypeError("Key names do not match")},Array:function(e){if(!function(e){if(2===e[0].length&&r(e[0][0])&&r(e[0][1])){if(e.some(function(e){return 2!==e.length||!r(e[0])||!r(e[1])}))return!1}else{if(!(3===e[0].length&&r(e[0][0])&&r(e[0][1])&&r(e[0][2])))return!1;if(e.some(function(e){return 3!==e.length||!r(e[0])||!r(e[1])||!r(e[2])}))return!1}return!0}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],r=0;r<e.length-1;r++)for(var n=r+1;n<e.length;n++)2===e[0].length?t.push(y(e[r][0],e[r][1],e[n][0],e[n][1])):3===e[0].length&&t.push(g(e[r][0],e[r][1],e[r][2],e[n][0],e[n][1],e[n][2]));return t}(e)}});function r(e){return"number"==typeof e||Object(ie.e)(e)}function c(e){return e.constructor!==Array&&(e=a(e)),r(e[0])&&r(e[1])}function n(e){return e.constructor!==Array&&(e=a(e)),r(e[0])&&r(e[1])&&r(e[2])}function i(e){return e.constructor!==Array&&(e=a(e)),r(e[0])&&r(e[1])&&r(e[2])&&r(e[3])&&r(e[4])&&r(e[5])}function a(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;n++)r.push(e[t[n]]);return r}function f(e,t,r,n,i){var a=u(l(l(m(r,e),m(n,t)),i)),o=d(l(m(r,r),m(n,n)));return h(a,o)}function o(e,t,r,n,i,a,o,s,u){var c=[p(m(p(i,t),u),m(p(a,r),s)),p(m(p(a,r),o),m(p(n,e),u)),p(m(p(n,e),s),m(p(i,t),o))];c=d(l(l(m(c[0],c[0]),m(c[1],c[1])),m(c[2],c[2])));var f=d(l(l(m(o,o),m(s,s)),m(u,u)));return h(c,f)}function y(e,t,r,n){var i=p(n,t),a=p(r,e),o=l(m(i,i),m(a,a));return d(o)}function g(e,t,r,n,i,a){var o=p(a,r),s=p(i,t),u=p(n,e),c=l(l(m(o,o),m(s,s)),m(u,u));return d(c)}}),Xl=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar"],Ql=Object(s.a)("intersect",Xl,function(e){var t=e.typed,h=e.config,d=e.abs,y=e.add,E=e.addScalar,i=e.matrix,g=e.multiply,j=e.multiplyScalar,S=e.divideScalar,A=e.subtract,v=e.smaller,C=e.equalScalar,a=t("intersect",{"Array, Array, Array":function(e,t,r){if(!s(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!s(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&n(e[0])&&n(e[1])&&n(e[2])&&n(e[3])}(r))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,r,n,i,a,o,s,u,c){var f=j(e,o),l=j(n,o),p=j(t,s),m=j(i,s),h=j(r,u),d=j(a,u),y=S(A(A(A(c,f),p),h),A(A(A(E(E(l,m),d),f),p),h)),g=E(e,j(y,A(n,e))),v=E(t,j(y,A(i,t))),b=E(r,j(y,A(a,r)));return[g,v,b]}(e[0],e[1],e[2],t[0],t[1],t[2],r[0],r[1],r[2],r[3])},"Array, Array, Array, Array":function(e,t,r,n){if(2===e.length){if(!o(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!o(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!o(r))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!o(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,r,n){var i=e,a=r,o=A(i,t),s=A(a,n),u=A(j(o[0],s[1]),j(s[0],o[1]));if(v(d(u),h.epsilon))return null;var c=j(s[0],i[1]),f=j(s[1],i[0]),l=j(s[0],a[1]),p=j(s[1],a[0]),m=S(E(A(A(c,f),l),p),u);return y(g(o,m),i)}(e,t,r,n)}if(3!==e.length)throw new TypeError("Arrays with two or thee dimensional points expected");if(!s(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!s(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!s(r))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!s(n))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(e,t,r,n,i,a,o,s,u,c,f,l){var p=T(e,o,c,o,t,s,f,s,r,u,l,u),m=T(c,o,n,e,f,s,i,t,l,u,a,r),h=T(e,o,n,e,t,s,i,t,r,u,a,r),d=T(c,o,c,o,f,s,f,s,l,u,l,u),y=T(n,e,n,e,i,t,i,t,a,r,a,r),g=S(A(j(p,m),j(h,d)),A(j(y,d),j(m,m))),v=S(E(p,j(g,m)),d),b=E(e,j(g,A(n,e))),x=E(t,j(g,A(i,t))),w=E(r,j(g,A(a,r))),N=E(o,j(v,A(c,o))),O=E(s,j(v,A(f,s))),M=E(u,j(v,A(l,u)));return C(b,N)&&C(x,O)&&C(w,M)?[b,x,w]:null}(e[0],e[1],e[2],t[0],t[1],t[2],r[0],r[1],r[2],n[0],n[1],n[2])},"Matrix, Matrix, Matrix":function(e,t,r){return i(a(e.valueOf(),t.valueOf(),r.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(e,t,r,n){return i(a(e.valueOf(),t.valueOf(),r.valueOf(),n.valueOf()))}});function n(e){return"number"==typeof e||Object(ie.e)(e)}function o(e){return 2===e.length&&n(e[0])&&n(e[1])}function s(e){return 3===e.length&&n(e[0])&&n(e[1])&&n(e[2])}function T(e,t,r,n,i,a,o,s,u,c,f,l){var p=j(A(e,t),A(r,n)),m=j(A(i,a),A(o,s)),h=j(A(u,c),A(f,l));return E(E(p,m),h)}return a}),Kl=["typed","config","add","?bignumber","?fraction"],ep=Object(s.a)("sum",Kl,function(e){var t=e.typed,n=e.config,i=e.add,a=e.bignumber,o=e.fraction;return t("sum",{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(e,t){try{return U(e,t,i)}catch(e){throw da(e,"sum")}},"...":function(e){if(P(e))throw new TypeError("Scalar values expected in function sum");return r(e)}});function r(e){var r;if(F(e,function(t){try{r=void 0===r?t:i(r,t)}catch(e){throw da(e,"sum",t)}}),void 0===r)switch(n.number){case"number":return 0;case"BigNumber":return a?a(0):wi();case"Fraction":return o?o(0):Ni();default:return 0}return r}}),tp=["typed","add","divide"],rp=Object(s.a)("mean",tp,function(e){var t=e.typed,i=e.add,a=e.divide;return t("mean",{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(e,t){try{var r=U(e,t,i),n=Array.isArray(e)?Object(I.a)(e):e.size();return a(r,n[t])}catch(e){throw da(e,"mean")}},"...":function(e){if(P(e))throw new TypeError("Scalar values expected in function mean");return r(e)}});function r(e){var r=0,n=0;if(F(e,function(t){try{r=i(r,t),n++}catch(e){throw da(e,"mean",t)}}),0===n)throw new Error("Cannot calculate mean of an empty array");return a(r,n)}}),np=["typed","add","divide","compare","partitionSelect"],ip=Object(s.a)("median",np,function(e){var t=e.typed,r=e.add,n=e.divide,s=e.compare,u=e.partitionSelect,i=t("median",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("median(A, dim) is not yet supported")},"...":function(e){if(P(e))throw new TypeError("Scalar values expected in function median");return a(e)}});function a(e){try{var t=(e=Object(I.e)(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2==0){for(var r=t/2-1,n=u(e,1+r),i=e[r],a=0;a<r;++a)0<s(e[a],i)&&(i=e[a]);return f(i,n)}var o=u(e,(t-1)/2);return c(o)}catch(e){throw da(e,"median")}}var c=t({"number | BigNumber | Complex | Unit":function(e){return e}}),f=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return n(r(e,t),2)}});return i}),ap=["typed","abs","map","median","subtract"],op=Object(s.a)("mad",ap,function(e){var t=e.typed,r=e.abs,n=e.map,i=e.median,a=e.subtract;return t("mad",{"Array | Matrix":o,"...":function(e){return o(e)}});function o(e){if(0===(e=Object(I.e)(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=i(e);return i(n(e,function(e){return r(a(e,t))}))}catch(e){throw e instanceof TypeError&&-1!==e.message.indexOf("median")?new TypeError(e.message.replace("median","mad")):da(e,"mad")}}}),sp="unbiased",up="variance",cp=["typed","add","subtract","multiply","divide","apply","isNaN"],fp=Object(s.a)(up,cp,function(e){var t=e.typed,o=e.add,s=e.subtract,u=e.multiply,c=e.divide,n=e.apply,f=e.isNaN;return t(up,{"Array | Matrix":function(e){return i(e,sp)},"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":function(e,t){return r(e,t,sp)},"Array | Matrix, number | BigNumber, string":r,"...":function(e){return i(e,sp)}});function i(e,t){var r=0,n=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(F(e,function(t){try{r=o(r,t),n++}catch(e){throw da(e,"variance",t)}}),0===n)throw new Error("Cannot calculate variance of an empty array");var i=c(r,n);if(r=0,F(e,function(e){var t=s(e,i);r=o(r,u(t,t))}),f(r))return r;switch(t){case"uncorrected":return c(r,n);case"biased":return c(r,n+1);case"unbiased":var a=Object(ie.e)(r)?r.mul(0):0;return 1===n?a:c(r,n-1);default:throw new Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function r(e,t,r){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return n(e,t,function(e){return i(e,r)})}catch(e){throw da(e,"variance")}}}),lp=Object(s.a)("var",["variance"],function(e){var n=e.variance;return function(){Object(ve.a)('Function "var" has been renamed to "variance" in v6.0.0, please use the new function instead.');for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(n,t)}}),pp=["typed","add","multiply","partitionSelect","compare"],mp=Object(s.a)("quantileSeq",pp,function(e){var t=e.typed,w=e.add,N=e.multiply,O=e.partitionSelect,M=e.compare;function h(e,t,r){var n=Object(I.e)(e),i=n.length;if(0===i)throw new Error("Cannot calculate quantile of an empty sequence");if(Object(ie.y)(t)){var a=t*(i-1),o=a%1;if(0==o){var s=r?n[a]:O(n,a);return E(s),s}var u,c,f=Math.floor(a);if(r)u=n[f],c=n[f+1];else{c=O(n,f+1),u=n[f];for(var l=0;l<f;++l)0<M(n[l],u)&&(u=n[l])}return E(u),E(c),w(N(u,1-o),N(c,o))}var p=t.times(i-1);if(p.isInteger()){p=p.toNumber();var m=r?n[p]:O(n,p);return E(m),m}var h,d,y=p.floor(),g=p.minus(y),v=y.toNumber();if(r)h=n[v],d=n[v+1];else{d=O(n,v+1),h=n[v];for(var b=0;b<v;++b)0<M(n[b],h)&&(h=n[b])}E(h),E(d);var x=new g.constructor(1);return w(N(h,x.minus(g)),N(d,g))}var E=t({"number | BigNumber | Unit":function(e){return e}});return function(e,t,r){var n,i,a;if(arguments.length<2||3<arguments.length)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(Object(ie.i)(e)){if("boolean"!=typeof(r=r||!1))throw new TypeError("Unexpected type of argument in function quantileSeq");if(i=e.valueOf(),Object(ie.y)(t)){if(t<0)throw new Error("N/prob must be non-negative");if(t<=1)return h(i,t,r);if(1<t){if(!Object(j.i)(t))throw new Error("N must be a positive integer");var o=t+1;n=new Array(t);for(var s=0;s<t;)n[s]=h(i,++s/o,r);return n}}if(Object(ie.e)(t)){var u=t.constructor;if(t.isNegative())throw new Error("N/prob must be non-negative");if(a=new u(1),t.lte(a))return new u(h(i,t,r));if(t.gt(a)){if(!t.isInteger())throw new Error("N must be a positive integer");var c=t.toNumber();if(4294967295<c)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var f=new u(c+1);n=new Array(c);for(var l=0;l<c;)n[l]=new u(h(i,new u(++l).div(f),r));return n}}if(Array.isArray(t)){n=new Array(t.length);for(var p=0;p<n.length;++p){var m=t[p];if(Object(ie.y)(m)){if(m<0||1<m)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!Object(ie.e)(m))throw new TypeError("Unexpected type of argument in function quantileSeq");if(a=new m.constructor(1),m.isNegative()||m.gt(a))throw new Error("Probability must be between 0 and 1, inclusive")}n[p]=h(i,m,r)}return n}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}}),hp=["typed","sqrt","variance"],dp=Object(s.a)("std",hp,function(e){var t=e.typed,r=e.sqrt,n=e.variance;return t("std",{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(e){return i(e)}});function i(e,t){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return r(n.apply(null,arguments))}catch(e){throw e instanceof TypeError&&-1!==e.message.indexOf(" variance")?new TypeError(e.message.replace(" variance"," std")):e}}});function yp(e,t){if(t<e)return 1;if(t===e)return t;var r=t+e>>1;return yp(e,r)*yp(1+r,t)}function gp(e,t){if(!Object(j.i)(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!Object(j.i)(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(e<t)throw new TypeError("k must be less than or equal to n");var r=e-t;return t<r?yp(1+r,e)/yp(1,t):yp(t+1,e)/yp(1,r)}gp.signature="number, number";var vp="combinations",bp=["typed"],xp=Object(s.a)(vp,bp,function(e){return(0,e.typed)(vp,{"number, number":gp,"BigNumber, BigNumber":function(e,t){var r,n,i=e.constructor,a=e.minus(t),o=new i(1);if(!wp(e)||!wp(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(r=o,t.lt(a))for(n=o;n.lte(a);n=n.plus(o))r=r.times(t.plus(n)).dividedBy(n);else for(n=o;n.lte(t);n=n.plus(o))r=r.times(a.plus(n)).dividedBy(n);return r}})});function wp(e){return e.isInteger()&&e.gte(0)}var Np="combinationsWithRep",Op=["typed"],Mp=Object(s.a)(Np,Op,function(e){return(0,e.typed)(Np,{"number, number":function(e,t){if(!Object(j.i)(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Object(j.i)(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?yp(e,e+t-1)/yp(1,t):yp(t+1,e+t-1)/yp(1,e-1)},"BigNumber, BigNumber":function(e,t){var r,n,i=new e.constructor(1),a=e.minus(i);if(!Ep(e)||!Ep(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(r=i,t.lt(a))for(n=i;n.lte(a);n=n.plus(i))r=r.times(t.plus(n)).dividedBy(n);else for(n=i;n.lte(t);n=n.plus(i))r=r.times(a.plus(n)).dividedBy(n);return r}})});function Ep(e){return e.isInteger()&&e.gte(0)}function jp(e){var t;if(Object(j.i)(e))return e<=0?isFinite(e)?1/0:NaN:171<e?1/0:yp(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*jp(1-e));if(171.35<=e)return 1/0;if(85<e){var r=e*e,n=r*e,i=n*e,a=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*e))}--e,t=Ap[0];for(var o=1;o<Ap.length;++o)t+=Ap[o]/(e+o);var s=e+Sp+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t}jp.signature="number";var Sp=4.7421875,Ap=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Cp=["typed","config","multiplyScalar","pow","BigNumber","Complex"],Tp=Object(s.a)("gamma",Cp,function(e){var t=e.typed,i=e.config,c=e.multiplyScalar,f=e.pow,a=e.BigNumber,l=e.Complex,p=t("gamma",{number:jp,Complex:function(e){if(0===e.im)return p(e.re);e=new l(e.re-1,e.im);for(var t=new l(Ap[0],0),r=1;r<Ap.length;++r){var n=e.re+r,i=n*n+e.im*e.im;0!=i?(t.re+=Ap[r]*n/i,t.im+=-Ap[r]*e.im/i):t.re=Ap[r]<0?-1/0:1/0}var a=new l(e.re+Sp+.5,e.im),o=Math.sqrt(2*Math.PI);e.re+=.5;var s=f(a,e);0===s.im?s.re*=o:(0===s.re||(s.re*=o),s.im*=o);var u=Math.exp(-a.re);return a.re=u*Math.cos(-a.im),a.im=u*Math.sin(-a.im),c(c(s,a),t)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new a(1/0):function(e){if(e.isZero())return new a(1);var t=i.precision+(0|Math.log(e.toNumber())),r=new(a.clone({precision:t}))(e),n=e.toNumber()-1;for(;1<n;)r=r.times(n),n--;return new a(r.toPrecision(a.precision))}(e.minus(1));if(!e.isFinite())return new a(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(e){return oe(e,p)}});return p}),_p="factorial",Ip=["typed","gamma"],Bp=Object(s.a)(_p,Ip,function(e){var t=e.typed,r=e.gamma,n=t(_p,{number:function(e){if(e<0)throw new Error("Value must be non-negative");return r(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error("Value must be non-negative");return r(e.plus(1))},"Array | Matrix":function(e){return oe(e,n)}});return n}),qp="kldivergence",kp=["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],zp=Object(s.a)(qp,kp,function(e){var t=e.typed,r=e.matrix,s=e.divide,u=e.sum,c=e.multiply,f=e.dotDivide,l=e.log,p=e.isNumeric;return t(qp,{"Array, Array":function(e,t){return n(r(e),r(t))},"Matrix, Array":function(e,t){return n(e,r(t))},"Array, Matrix":function(e,t){return n(r(e),t)},"Matrix, Matrix":function(e,t){return n(e,t)}});function n(e,t){var r=t.size().length,n=e.size().length;if(1<r)throw new Error("first object must be one dimensional");if(1<n)throw new Error("second object must be one dimensional");if(r!==n)throw new Error("Length of two vectors must be equal");if(0===u(e))throw new Error("Sum of elements in first object must be non zero");if(0===u(t))throw new Error("Sum of elements in second object must be non zero");var i=s(e,u(e)),a=s(t,u(t)),o=u(c(i,l(f(i,a))));return p(o)?o:Number.NaN}}),Dp="multinomial",Rp=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Pp=Object(s.a)(Dp,Rp,function(e){var t=e.typed,n=e.add,i=e.divide,a=e.multiply,o=e.factorial,s=e.isInteger,u=e.isPositive;return t(Dp,{"Array | Matrix":function(e){var t=0,r=1;return F(e,function(e){if(!s(e)||!u(e))throw new TypeError("Positive integer value expected in function multinomial");t=n(t,e),r=a(r,o(e))}),i(o(t),r)}})}),Fp="permutations",Up=["typed","factorial"],Lp=Object(s.a)(Fp,Up,function(e){var t=e.typed,r=e.factorial;return t(Fp,{"number | BigNumber":r,"number, number":function(e,t){if(!Object(j.i)(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!Object(j.i)(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(e<t)throw new TypeError("second argument k must be less than or equal to first argument n");return yp(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var r,n;if(!Hp(e)||!Hp(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(r=e.mul(0).add(1),n=e.minus(t).plus(1);n.lte(e);n=n.plus(1))r=r.times(n);return r}})});function Hp(e){return e.isInteger()&&e.gte(0)}var $p=r(15),Gp=r.n($p),Zp=Gp()();function Vp(e){var t,r;return t=null===(r=e)?Zp:Gp()(String(r)),function(){return t()}}var Jp=["typed","config","?on"],Wp=Object(s.a)("pickRandom",Jp,function(e){var t=e.typed,r=e.config,n=e.on,m=Vp(r.randomSeed);return n&&n("config",function(e,t){e.randomSeed!==t.randomSeed&&(m=Vp(e.randomSeed))}),t({"Array | Matrix":function(e){return i(e)},"Array | Matrix, number":function(e,t){return i(e,t,void 0)},"Array | Matrix, Array":function(e,t){return i(e,void 0,t)},"Array | Matrix, Array | Matrix, number":function(e,t,r){return i(e,r,t)},"Array | Matrix, number, Array | Matrix":function(e,t,r){return i(e,t,r)}});function i(e,t,r){var n=void 0===t;if(n&&(t=1),e=e.valueOf(),r=r&&r.valueOf(),1<Object(I.a)(e).length)throw new Error("Only one dimensional vectors supported");var i=0;if(void 0!==r){if(r.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var a=0,o=r.length;a<o;a++){if(!Object(ie.y)(r[a])||r[a]<0)throw new Error("Weights must be an array of positive numbers");i+=r[a]}}var s=e.length;if(0===s)return[];if(s<=t)return 1<t?e:e[0];for(var u,c=[];c.length<t;){if(void 0===r)u=e[Math.floor(m()*s)];else for(var f=m()*i,l=0,p=e.length;l<p;l++)if((f-=r[l])<0){u=e[l];break}-1===c.indexOf(u)&&c.push(u)}return n?c[0]:c}});function Yp(e,t){var r=[];if(1<(e=e.slice(0)).length)for(var n=0,i=e.shift();n<i;n++)r.push(Yp(e,t));else for(var a=0,o=e.shift();a<o;a++)r.push(t());return r}var Xp="random",Qp=["typed","config","?on"],Kp=Object(s.a)(Xp,Qp,function(e){var t=e.typed,r=e.config,n=e.on,i=Vp(r.randomSeed);return n&&n("config",function(e,t){e.randomSeed!==t.randomSeed&&(i=Vp(e.randomSeed))}),t(Xp,{"":function(){return o(0,1)},number:function(e){return o(0,e)},"number, number":function(e,t){return o(e,t)},"Array | Matrix":function(e){return a(e,0,1)},"Array | Matrix, number":function(e,t){return a(e,0,t)},"Array | Matrix, number, number":function(e,t,r){return a(e,t,r)}});function a(e,t,r){var n=Yp(e.valueOf(),function(){return o(t,r)});return Object(ie.v)(e)?e.create(n):n}function o(e,t){return e+i()*(t-e)}}),em="randomInt",tm=["typed","config","?on"],rm=Object(s.a)(em,tm,function(e){var t=e.typed,r=e.config,n=e.on,i=Vp(r.randomSeed);return n&&n("config",function(e,t){e.randomSeed!==t.randomSeed&&(i=Vp(e.randomSeed))}),t(em,{"":function(){return o(0,1)},number:function(e){return o(0,e)},"number, number":function(e,t){return o(e,t)},"Array | Matrix":function(e){return a(e,0,1)},"Array | Matrix, number":function(e,t){return a(e,0,t)},"Array | Matrix, number, number":function(e,t,r){return a(e,t,r)}});function a(e,t,r){var n=Yp(e.valueOf(),function(){return o(t,r)});return Object(ie.v)(e)?e.create(n):n}function o(e,t){return Math.floor(e+i()*(t-e))}}),nm="stirlingS2",im=["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],am=Object(s.a)(nm,im,function(e){var t=e.typed,u=e.addScalar,c=e.subtract,f=e.multiplyScalar,l=e.divideScalar,p=e.pow,m=e.factorial,h=e.combinations,d=e.isNegative,y=e.isInteger,g=e.larger;return t(nm,{"number | BigNumber, number | BigNumber":function(e,t){if(!y(e)||d(e)||!y(t)||d(t))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(g(t,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var r=m(t),n=0,i=0;i<=t;i++){var a=p(-1,c(t,i)),o=h(t,i),s=p(i,e);n=u(n,f(f(o,s),a))}return l(n,r)}})}),om="bellNumbers",sm=["typed","addScalar","isNegative","isInteger","stirlingS2"],um=Object(s.a)(om,sm,function(e){var t=e.typed,n=e.addScalar,i=e.isNegative,a=e.isInteger,o=e.stirlingS2;return t(om,{"number | BigNumber":function(e){if(!a(e)||i(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,r=0;r<=e;r++)t=n(t,o(e,r));return t}})}),cm="catalan",fm=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],lm=Object(s.a)(cm,fm,function(e){var t=e.typed,r=e.addScalar,n=e.divideScalar,i=e.multiplyScalar,a=e.combinations,o=e.isNegative,s=e.isInteger;return t(cm,{"number | BigNumber":function(e){if(!s(e)||o(e))throw new TypeError("Non-negative integer value expected in function catalan");return n(a(i(e,2),e),r(e,1))}})}),pm="composition",mm=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],hm=Object(s.a)(pm,mm,function(e){var t=e.typed,r=e.addScalar,n=e.combinations,i=e.isPositive,a=(e.isNegative,e.isInteger),o=e.larger;return t(pm,{"number | BigNumber, number | BigNumber":function(e,t){if(!(a(e)&&i(e)&&a(t)&&i(t)))throw new TypeError("Positive integer value expected in function composition");if(o(t,e))throw new TypeError("k must be less than or equal to n in function composition");return n(r(e,-1),r(t,-1))}})}),dm=["FunctionNode","OperatorNode","SymbolNode"],ym=Object(s.a)("simplifyUtil",dm,function(e){var r=e.FunctionNode,n=e.OperatorNode,i=e.SymbolNode,a={add:!0,multiply:!0},o={add:!0,multiply:!0};function s(e,t){if(!Object(ie.B)(e))return!1;var r=e.fn.toString();return t&&Object(ae.f)(t,r)&&Object(ae.f)(t[r],"associative")?t[r].associative:o[r]||!1}function u(e){var i,a=[];return s(e)?(i=e.op,function e(t){for(var r=0;r<t.args.length;r++){var n=t.args[r];Object(ie.B)(n)&&i===n.op?e(n):a.push(n)}}(e),a):e.args}function c(t){return Object(ie.B)(t)?function(e){try{return new n(t.op,t.fn,e,t.implicit)}catch(e){return console.error(e),[]}}:function(e){return new r(new i(t.name),e)}}return{createMakeNodeFunction:c,isCommutative:function(e,t){if(!Object(ie.B)(e))return!0;var r=e.fn.toString();return t&&Object(ae.f)(t,r)&&Object(ae.f)(t[r],"commutative")?t[r].commutative:a[r]||!1},isAssociative:s,flatten:function e(t){if(!t.args||0===t.args.length)return t;t.args=u(t);for(var r=0;r<t.args.length;r++)e(t.args[r])},allChildren:u,unflattenr:function e(t){if(t.args&&0!==t.args.length){for(var r=c(t),n=t.args.length,i=0;i<n;i++)e(t.args[i]);if(2<n&&s(t)){for(var a=t.args.pop();0<t.args.length;)a=r([t.args.pop(),a]);t.args=a.args}}},unflattenl:function e(t){if(t.args&&0!==t.args.length){for(var r=c(t),n=t.args.length,i=0;i<n;i++)e(t.args[i]);if(2<n&&s(t)){for(var a=t.args.shift();0<t.args.length;)a=r([a,t.args.shift()]);t.args=a.args}}}}}),gm=["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],vm=Object(s.a)("simplifyCore",gm,function(e){var f=e.equal,l=e.isZero,p=e.add,m=e.subtract,h=e.multiply,d=e.divide,y=e.pow,g=e.ConstantNode,v=e.OperatorNode,b=e.FunctionNode,x=e.ParenthesisNode,w=new g(0),N=new g(1);return function e(t){if(Object(ie.B)(t)&&t.isUnary()){var r=e(t.args[0]);if("+"===t.op)return r;if("-"===t.op){if(Object(ie.B)(r)){if(r.isUnary()&&"-"===r.op)return r.args[0];if(r.isBinary()&&"subtract"===r.fn)return new v("-","subtract",[r.args[1],r.args[0]])}return new v(t.op,t.fn,[r])}}else if(Object(ie.B)(t)&&t.isBinary()){var n=e(t.args[0]),i=e(t.args[1]);if("+"===t.op){if(Object(ie.l)(n)){if(l(n.value))return i;if(Object(ie.l)(i))return new g(p(n.value,i.value))}return Object(ie.l)(i)&&l(i.value)?n:Object(ie.B)(i)&&i.isUnary()&&"-"===i.op?new v("-","subtract",[n,i.args[0]]):new v(t.op,t.fn,i?[n,i]:[n])}if("-"===t.op){if(Object(ie.l)(n)&&i){if(Object(ie.l)(i))return new g(m(n.value,i.value));if(l(n.value))return new v("-","unaryMinus",[i])}if("subtract"===t.fn)return Object(ie.l)(i)&&l(i.value)?n:Object(ie.B)(i)&&i.isUnary()&&"-"===i.op?e(new v("+","add",[n,i.args[0]])):new v(t.op,t.fn,[n,i])}else{if("*"===t.op){if(Object(ie.l)(n)){if(l(n.value))return w;if(f(n.value,1))return i;if(Object(ie.l)(i))return new g(h(n.value,i.value))}if(Object(ie.l)(i)){if(l(i.value))return w;if(f(i.value,1))return n;if(Object(ie.B)(n)&&n.isBinary()&&n.op===t.op){var a=n.args[0];if(Object(ie.l)(a)){var o=new g(h(a.value,i.value));return new v(t.op,t.fn,[o,n.args[1]],t.implicit)}}return new v(t.op,t.fn,[i,n],t.implicit)}return new v(t.op,t.fn,[n,i],t.implicit)}if("/"===t.op){if(Object(ie.l)(n)){if(l(n.value))return w;if(Object(ie.l)(i)&&(f(i.value,1)||f(i.value,2)||f(i.value,4)))return new g(d(n.value,i.value))}return new v(t.op,t.fn,[n,i])}if("^"===t.op){if(Object(ie.l)(i)){if(l(i.value))return N;if(f(i.value,1))return n;if(Object(ie.l)(n))return new g(y(n.value,i.value));if(Object(ie.B)(n)&&n.isBinary()&&"^"===n.op){var s=n.args[1];if(Object(ie.l)(s))return new v(t.op,t.fn,[n.args[0],new g(h(s.value,i.value))])}}return new v(t.op,t.fn,[n,i])}}}else{if(Object(ie.C)(t)){var u=e(t.content);return Object(ie.C)(u)||Object(ie.J)(u)||Object(ie.l)(u)?u:new x(u)}if(Object(ie.r)(t)){var c=t.args.map(e).map(function(e){return Object(ie.C)(e)?e.content:e});return new b(e(t.fn),c)}}return t}}),bm=["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],xm=Object(s.a)("simplifyConstant",bm,function(e){var t=e.typed,r=e.config,p=e.mathWithTransform,n=e.fraction,i=e.bignumber,a=e.ConstantNode,o=e.OperatorNode,m=e.FunctionNode,s=e.SymbolNode,u=ym({FunctionNode:m,OperatorNode:o,SymbolNode:s}),h=u.isCommutative,d=u.isAssociative,y=u.allChildren,g=u.createMakeNodeFunction;function v(t,r,n){try{return x(p[t].apply(null,r),n)}catch(e){return r=r.map(function(e){return Object(ie.o)(e)?e.valueOf():e}),x(p[t].apply(null,r),n)}}var b=t({Fraction:function(e){var t,r=e.s*e.n;t=r<0?new o("-","unaryMinus",[new a(-r)]):new a(r);return 1!==e.d?new o("/","divide",[t,new a(e.d)]):t},number:function(e){return e<0?f(new a(-e)):new a(e)},BigNumber:function(e){return e<0?f(new a(-e)):new a(e)},Complex:function(e){throw new Error("Cannot convert Complex number to Node")}});function c(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&n){var r=n(e);if(r.valueOf()===e)return r}return e}var x=t({"string, Object":function(e,t){return"BigNumber"===r.number?(void 0===i&&wi(),i(e)):"Fraction"===r.number?(void 0===n&&Ni(),n(e)):c(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return c(e,t)},"Complex, Object":function(e,t){return 0!==e.im?e:c(e.re,t)}});function f(e){return new o("-","unaryMinus",[e])}function w(r,e,n,i){return e.reduce(function(e,t){if(Object(ie.w)(e)||Object(ie.w)(t))Object(ie.w)(e)?Object(ie.w)(t)||(t=b(t)):e=b(e);else{try{return v(r,[e,t],i)}catch(e){}e=b(e),t=b(t)}return n([e,t])})}return function(e,t){var r=function t(e,r){switch(e.type){case"SymbolNode":return e;case"ConstantNode":return"number"!=typeof e.value&&isNaN(e.value)?e:x(e.value,r);case"FunctionNode":if(p[e.name]&&p[e.name].rawArgs)return e;var n=["add","multiply"];if(-1===n.indexOf(e.name)){var i=e.args.map(function(e){return t(e,r)});if(!i.some(ie.w))try{return v(e.name,i,r)}catch(e){}return i=i.map(function(e){return Object(ie.w)(e)?e:b(e)}),new m(e.name,i)}case"OperatorNode":var a,o,s=e.fn.toString(),u=g(e);if(Object(ie.B)(e)&&e.isUnary())a=[t(e.args[0],r)],o=Object(ie.w)(a[0])?u(a):v(s,a,r);else if(d(e))if(a=(a=y(e)).map(function(e){return t(e,r)}),h(s)){for(var c=[],f=[],l=0;l<a.length;l++)Object(ie.w)(a[l])?f.push(a[l]):c.push(a[l]);o=1<c.length?(o=w(s,c,u,r),f.unshift(o),w(s,f,u,r)):w(s,a,u,r)}else o=w(s,a,u,r);else a=e.args.map(function(e){return t(e,r)}),o=w(s,a,u,r);return o;case"ParenthesisNode":return t(e.content,r);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(e.type))}}(e,t);return Object(ie.w)(r)?r:b(r)}}),wm=["parse","FunctionNode","OperatorNode","ParenthesisNode"],Nm=Object(s.a)("resolve",wm,function(e){var o=e.parse,s=e.FunctionNode,u=e.OperatorNode,c=e.ParenthesisNode;return function t(e,r){if(!r)return e;if(Object(ie.J)(e)){var n=r[e.name];if(Object(ie.w)(n))return t(n,r);if("number"==typeof n)return o(String(n))}else{if(Object(ie.B)(e)){var i=e.args.map(function(e){return t(e,r)});return new u(e.op,e.fn,i,e.implicit)}if(Object(ie.C)(e))return new c(t(e.content,r));if(Object(ie.r)(e)){var a=e.args.map(function(e){return t(e,r)});return new s(e.name,a)}}return e}});function Om(e){return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Mm=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Em=Object(s.a)("simplify",Mm,function(e){var t=e.config,r=e.typed,c=e.parse,n=e.add,i=e.subtract,a=e.multiply,o=e.divide,s=e.pow,u=e.isZero,l=e.equal,f=e.fraction,p=e.bignumber,m=e.mathWithTransform,h=e.ConstantNode,d=e.FunctionNode,y=e.OperatorNode,g=e.ParenthesisNode,v=e.SymbolNode,b=xm({typed:r,config:t,mathWithTransform:m,fraction:f,bignumber:p,ConstantNode:h,OperatorNode:y,FunctionNode:d,SymbolNode:v}),x=vm({equal:l,isZero:u,add:n,subtract:i,multiply:a,divide:o,pow:s,ConstantNode:h,OperatorNode:y,FunctionNode:d,ParenthesisNode:g}),w=Nm({parse:c,FunctionNode:d,OperatorNode:y,ParenthesisNode:g}),N=ym({FunctionNode:d,OperatorNode:y,SymbolNode:v}),O=N.isCommutative,M=N.isAssociative,E=N.flatten,j=N.unflattenr,S=N.unflattenl,A=N.createMakeNodeFunction,C=r("simplify",{string:function(e){return C(c(e),C.rules,{},{})},"string, Object":function(e,t){return C(c(e),C.rules,t,{})},"string, Object, Object":function(e,t,r){return C(c(e),C.rules,t,r)},"string, Array":function(e,t){return C(c(e),t,{},{})},"string, Array, Object":function(e,t,r){return C(c(e),t,r,{})},"string, Array, Object, Object":function(e,t,r,n){return C(c(e),t,r,n)},"Node, Object":function(e,t){return C(e,C.rules,t,{})},"Node, Object, Object":function(e,t,r){return C(e,C.rules,t,r)},Node:function(e){return C(e,C.rules,{},{})},"Node, Array":function(e,t){return C(e,t,{},{})},"Node, Array, Object":function(e,t,r){return C(e,t,r,{})},"Node, Array, Object, Object":function(e,t,r,n){t=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=void 0,a=Om(n);switch(a){case"string":var o=n.split("->");if(2!==o.length)throw SyntaxError("Could not parse rule: "+n);n={l:o[0],r:o[1]};case"object":if(i={l:T(c(n.l)),r:T(c(n.r))},n.context&&(i.evaluate=n.context),n.evaluate&&(i.evaluate=c(n.evaluate)),M(i.l)){var s=A(i.l),u=new v("_p"+I++);i.expanded={},i.expanded.l=s([i.l.clone(),u]),E(i.expanded.l),j(i.expanded.l),i.expanded.r=s([i.r,u])}break;case"function":i=n;break;default:throw TypeError("Unsupported type of rule: "+a)}t.push(i)}return t}(t);for(var i=w(e,r),a={},o=(i=T(i)).toString({parenthesis:"all"});!a[o];){a[o]=!0;for(var s=I=0;s<t.length;s++)i="function"==typeof t[s]?t[s](i,n):(E(i),B(i,t[s])),S(i);o=i.toString({parenthesis:"all"})}return i}});function T(e){return e.transform(function(e,t,r){return Object(ie.C)(e)?T(e.content):e})}C.simplifyCore=x,C.resolve=w;var _={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};C.rules=[x,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},b,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"}];var I=0;var B=r("applyRule",{"Node, Object":function(e,t){var r=e;if(r instanceof y||r instanceof d){if(r.args)for(var n=0;n<r.args.length;n++)r.args[n]=B(r.args[n],t)}else r instanceof g&&r.content&&(r.content=B(r.content,t));var i=t.r,a=z(t.l,r)[0];if(!a&&t.expanded&&(i=t.expanded.r,a=z(t.expanded.l,r)[0]),a){var o=r.implicit;r=i.clone(),o&&"implicit"in i&&(r.implicit=!0),r=r.transform(function(e){return e.isSymbolNode&&Object(ae.f)(a.placeholders,e.name)?a.placeholders[e.name].clone():e})}return r}});function q(e,t){var r={placeholders:{}};if(!e.placeholders&&!t.placeholders)return r;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var n in e.placeholders)if(r.placeholders[n]=e.placeholders[n],Object(ae.f)(t.placeholders,n)&&!D(e.placeholders[n],t.placeholders[n]))return null;for(var i in t.placeholders)r.placeholders[i]=t.placeholders[i];return r}function k(e,t){var r,n=[];if(0===e.length||0===t.length)return n;for(var i=0;i<e.length;i++)for(var a=0;a<t.length;a++)(r=q(e[i],t[a]))&&n.push(r);return n}function z(e,t,r){var n=[{placeholders:{}}];if(e instanceof y&&t instanceof y||e instanceof d&&t instanceof d){if(e instanceof y){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof d&&e.name!==t.name)return[];if((1!==t.args.length||1!==e.args.length)&&M(t)&&!r){if(2<=t.args.length&&2===e.args.length){for(var i=function(e,t){var r,n,i=[],a=A(e);if(O(e,t))for(var o=0;o<e.args.length;o++)(n=e.args.slice(0)).splice(o,1),r=1===n.length?n[0]:a(n),i.push(a([e.args[o],r]));else r=1===(n=e.args.slice(1)).length?n[0]:a(n),i.push(a([e.args[0],r]));return i}(t,e.context),a=[],o=0;o<i.length;o++){var s=z(e,i[o],!0);a=a.concat(s)}return a}if(2<e.args.length)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var u=[],c=0;c<e.args.length;c++){var f=z(e.args[c],t.args[c]);if(0===f.length)return[];u.push(f)}n=function(e){if(0===e.length)return e;for(var t=e.reduce(k),r=[],n={},i=0;i<t.length;i++){var a=JSON.stringify(t[i]);n[a]||(n[a]=!0,r.push(t[i]))}return r}(u)}else if(e instanceof v){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(_[e.name]){if(e.name!==t.name)return[]}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))n[0].placeholders[e.name]=t;else if("v"===e.name[0]){if(Object(ie.l)(t))return[];n[0].placeholders[e.name]=t}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(t instanceof h))return[];n[0].placeholders[e.name]=t}}else{if(!(e instanceof h))return[];if(!l(e.value,t.value))return[]}return n}function D(e,t){if(e instanceof h&&t instanceof h){if(!l(e.value,t.value))return!1}else if(e instanceof v&&t instanceof v){if(e.name!==t.name)return!1}else{if(!(e instanceof y&&t instanceof y||e instanceof d&&t instanceof d))return!1;if(e instanceof y){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof d&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var r=0;r<e.args.length;r++)if(!D(e.args[r],t.args[r]))return!1}return!0}return C}),jm=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Sm=Object(s.a)("derivative",jm,function(e){var t=e.typed,r=e.config,n=e.parse,a=e.simplify,l=e.equal,p=e.isZero,i=e.numeric,o=e.ConstantNode,m=e.FunctionNode,h=e.OperatorNode,s=e.ParenthesisNode,f=e.SymbolNode,u=t("derivative",{"Node, SymbolNode, Object":function(e,t,r){var n={};d(n,e,t.name);var i=y(e,n);return r.simplify?a(i):i},"Node, SymbolNode":function(e,t){return u(e,t,{simplify:!0})},"string, SymbolNode":function(e,t){return u(n(e),t)},"string, SymbolNode, Object":function(e,t,r){return u(n(e),t,r)},"string, string":function(e,t){return u(n(e),n(t))},"string, string, Object":function(e,t,r){return u(n(e),n(t),r)},"Node, string":function(e,t){return u(e,n(t))},"Node, string, Object":function(e,t,r){return u(e,n(t),r)}});u._simplify=!0,u.toTex=function(e){return c.apply(null,e.args)};var c=t("_derivTex",{"Node, SymbolNode":function(e,t){return Object(ie.l)(e)&&"string"===Object(ie.M)(e.value)?c(n(e.value).toString(),t.toString(),1):c(e.toString(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===Object(ie.M)(t.value))return c(e,n(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,r){return c(e.toString(),t.name,r.value)},"string, string, number":function(e,t,r){return(1===r?"{d\\over d"+t+"}":"{d^{"+r+"}\\over d"+t+"^{"+r+"}}")+"\\left[".concat(e,"\\right]")}}),d=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0},"Object, SymbolNode, string":function(e,t,r){return t.name!==r&&(e[t]=!0)},"Object, ParenthesisNode, string":function(e,t,r){return d(e,t.content,r)},"Object, FunctionAssignmentNode, string":function(e,t,r){return-1===t.params.indexOf(r)?e[t]=!0:d(e,t.expr,r)},"Object, FunctionNode | OperatorNode, string":function(e,t,r){if(0<t.args.length){for(var n=d(e,t.args[0],r),i=1;i<t.args.length;++i)n=d(e,t.args[i],r)&&n;if(n)return e[t]=!0}return!1}}),y=t("_derivative",{"ConstantNode, Object":function(e){return g(0)},"SymbolNode, Object":function(e,t){return void 0!==t[e]?g(0):g(1)},"ParenthesisNode, Object":function(e,t){return new s(y(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?g(0):y(e.expr,t)},"FunctionNode, Object":function(e,t){if(1!==e.args.length&&function(e){if(("log"===e.name||"nthRoot"===e.name||"pow"===e.name)&&2===e.args.length)return;for(var t=0;t<e.args.length;++t)e.args[t]=g(0);throw e.compile().evaluate(),new Error("Expected TypeError, but none found")}(e),void 0!==t[e])return g(0);var r,n,i,a,o=e.args[0],s=!1,u=!1;switch(e.name){case"cbrt":s=!0,n=new h("*","multiply",[g(3),new h("^","pow",[o,new h("/","divide",[g(2),g(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)s=!0,n=new h("*","multiply",[g(2),new m("sqrt",[o])]);else if(2===e.args.length)return t[r=new h("/","divide",[g(1),e.args[1]])]=t[e.args[1]],y(new h("^","pow",[o,r]),t);break;case"log10":r=g(10);case"log":if(r||1!==e.args.length){if(1===e.args.length&&r||2===e.args.length&&void 0!==t[e.args[1]])n=new h("*","multiply",[o.clone(),new m("log",[r||e.args[1]])]),s=!0;else if(2===e.args.length)return y(new h("/","divide",[new m("log",[o]),new m("log",[e.args[1]])]),t)}else n=o.clone(),s=!0;break;case"pow":return t[r]=t[e.args[1]],y(new h("^","pow",[o,e.args[1]]),t);case"exp":n=new m("exp",[o.clone()]);break;case"sin":n=new m("cos",[o.clone()]);break;case"cos":n=new h("-","unaryMinus",[new m("sin",[o.clone()])]);break;case"tan":n=new h("^","pow",[new m("sec",[o.clone()]),g(2)]);break;case"sec":n=new h("*","multiply",[e,new m("tan",[o.clone()])]);break;case"csc":u=!0,n=new h("*","multiply",[e,new m("cot",[o.clone()])]);break;case"cot":u=!0,n=new h("^","pow",[new m("csc",[o.clone()]),g(2)]);break;case"asin":s=!0,n=new m("sqrt",[new h("-","subtract",[g(1),new h("^","pow",[o.clone(),g(2)])])]);break;case"acos":u=s=!0,n=new m("sqrt",[new h("-","subtract",[g(1),new h("^","pow",[o.clone(),g(2)])])]);break;case"atan":s=!0,n=new h("+","add",[new h("^","pow",[o.clone(),g(2)]),g(1)]);break;case"asec":s=!0,n=new h("*","multiply",[new m("abs",[o.clone()]),new m("sqrt",[new h("-","subtract",[new h("^","pow",[o.clone(),g(2)]),g(1)])])]);break;case"acsc":u=s=!0,n=new h("*","multiply",[new m("abs",[o.clone()]),new m("sqrt",[new h("-","subtract",[new h("^","pow",[o.clone(),g(2)]),g(1)])])]);break;case"acot":u=s=!0,n=new h("+","add",[new h("^","pow",[o.clone(),g(2)]),g(1)]);break;case"sinh":n=new m("cosh",[o.clone()]);break;case"cosh":n=new m("sinh",[o.clone()]);break;case"tanh":n=new h("^","pow",[new m("sech",[o.clone()]),g(2)]);break;case"sech":u=!0,n=new h("*","multiply",[e,new m("tanh",[o.clone()])]);break;case"csch":u=!0,n=new h("*","multiply",[e,new m("coth",[o.clone()])]);break;case"coth":u=!0,n=new h("^","pow",[new m("csch",[o.clone()]),g(2)]);break;case"asinh":s=!0,n=new m("sqrt",[new h("+","add",[new h("^","pow",[o.clone(),g(2)]),g(1)])]);break;case"acosh":s=!0,n=new m("sqrt",[new h("-","subtract",[new h("^","pow",[o.clone(),g(2)]),g(1)])]);break;case"atanh":s=!0,n=new h("-","subtract",[g(1),new h("^","pow",[o.clone(),g(2)])]);break;case"asech":u=s=!0,n=new h("*","multiply",[o.clone(),new m("sqrt",[new h("-","subtract",[g(1),new h("^","pow",[o.clone(),g(2)])])])]);break;case"acsch":u=s=!0,n=new h("*","multiply",[new m("abs",[o.clone()]),new m("sqrt",[new h("+","add",[new h("^","pow",[o.clone(),g(2)]),g(1)])])]);break;case"acoth":u=s=!0,n=new h("-","subtract",[g(1),new h("^","pow",[o.clone(),g(2)])]);break;case"abs":n=new h("/","divide",[new m(new f("abs"),[o.clone()]),o.clone()]);break;case"gamma":default:throw new Error('Function "'+e.name+'" is not supported by derivative, or a wrong number of arguments is passed')}a=s?(i="/","divide"):(i="*","multiply");var c=y(o,t);return u&&(c=new h("-","unaryMinus",[c])),new h(i,a,[c,n])},"OperatorNode, Object":function(e,r){if(void 0!==r[e])return g(0);if("+"===e.op)return new h(e.op,e.fn,e.args.map(function(e){return y(e,r)}));if("-"===e.op){if(e.isUnary())return new h(e.op,e.fn,[y(e.args[0],r)]);if(e.isBinary())return new h(e.op,e.fn,[y(e.args[0],r),y(e.args[1],r)])}if("*"===e.op){var t=e.args.filter(function(e){return void 0!==r[e]});if(0<t.length){var n=e.args.filter(function(e){return void 0===r[e]}),i=1===n.length?n[0]:new h("*","multiply",n),a=t.concat(y(i,r));return new h("*","multiply",a)}return new h("+","add",e.args.map(function(t){return new h("*","multiply",e.args.map(function(e){return e===t?y(e,r):e.clone()}))}))}if("/"===e.op&&e.isBinary()){var o=e.args[0],s=e.args[1];return void 0!==r[s]?new h("/","divide",[y(o,r),s]):void 0!==r[o]?new h("*","multiply",[new h("-","unaryMinus",[o]),new h("/","divide",[y(s,r),new h("^","pow",[s.clone(),g(2)])])]):new h("/","divide",[new h("-","subtract",[new h("*","multiply",[y(o,r),s.clone()]),new h("*","multiply",[o.clone(),y(s,r)])]),new h("^","pow",[s.clone(),g(2)])])}if("^"===e.op&&e.isBinary()){var u=e.args[0],c=e.args[1];if(void 0!==r[u])return Object(ie.l)(u)&&(p(u.value)||l(u.value,1))?g(0):new h("*","multiply",[e,new h("*","multiply",[new m("log",[u.clone()]),y(c.clone(),r)])]);if(void 0===r[c])return new h("*","multiply",[new h("^","pow",[u.clone(),c.clone()]),new h("+","add",[new h("*","multiply",[y(u,r),new h("/","divide",[c.clone(),u.clone()])]),new h("*","multiply",[y(c,r),new m("log",[u.clone()])])])]);if(Object(ie.l)(c)){if(p(c.value))return g(0);if(l(c.value,1))return y(u,r)}var f=new h("^","pow",[u.clone(),new h("-","subtract",[c,g(1)])]);return new h("*","multiply",[c.clone(),new h("*","multiply",[y(u,r),f])])}throw new Error('Operator "'+e.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function g(e,t){return new o(i(e,t||r.number))}return u}),Am="rationalize",Cm=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],Tm=Object(s.a)(Am,Cm,function(e){var t=e.config,r=e.typed,n=e.equal,i=e.isZero,a=e.add,o=e.subtract,s=e.multiply,u=e.divide,c=e.pow,f=e.parse,m=e.simplify,l=e.fraction,p=e.bignumber,h=e.mathWithTransform,d=e.ConstantNode,y=e.OperatorNode,g=e.FunctionNode,v=e.SymbolNode,b=e.ParenthesisNode,x=xm({typed:r,config:t,mathWithTransform:h,fraction:l,bignumber:p,ConstantNode:d,OperatorNode:y,FunctionNode:g,SymbolNode:v}),w=vm({equal:n,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:c,ConstantNode:d,OperatorNode:y,FunctionNode:g,ParenthesisNode:b}),N=r(Am,{string:function(e){return N(f(e),{},!1)},"string, boolean":function(e,t){return N(f(e),{},t)},"string, Object":function(e,t){return N(f(e),t,!1)},"string, Object, boolean":function(e,t,r){return N(f(e),t,r)},Node:function(e){return N(e,{},!1)},"Node, boolean":function(e,t){return N(e,{},t)},"Node, Object":function(e,t){return N(e,t,!1)},"Node, Object, boolean":function(e,t,r){var n=function(){var e=[w,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},x,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],r=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],n={};return n.firstRules=e.concat(t,r),n.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],n.sucDivRules=r,n.firstRulesAgain=e.concat(t),n.finalRules=[w,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},x,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],n}(),i=function(e,t,r,n){var o=[],i=m(e,n,t,{exactFractions:!1}),s="+-*"+((r=!!r)?"/":"");!function e(t){var r=t.type;{if("FunctionNode"===r)throw new Error("There is an unsolved function call");if("OperatorNode"===r)if("^"===t.op){if("unaryMinus"===t.args[1].fn&&(t=t.args[0]),"ConstantNode"!==t.args[1].type||!Object(j.i)(parseFloat(t.args[1].value)))throw new Error("There is a non-integer exponent");e(t.args[0])}else{if(-1===s.indexOf(t.op))throw new Error("Operator "+t.op+" invalid in polynomial expression");for(var n=0;n<t.args.length;n++)e(t.args[n])}else if("SymbolNode"===r){var i=t.name,a=o.indexOf(i);-1===a&&o.push(i)}else if("ParenthesisNode"===r)e(t.content);else if("ConstantNode"!==r)throw new Error("type "+r+" is not allowed in polynomial expression")}}(i);var a={};return a.expression=i,a.variables=o,a}(e,t,!0,n.firstRules),a=i.variables.length;if(e=i.expression,1<=a){var o,s;e=function e(t,r,n){var i=t.type;var a=1<arguments.length;if("OperatorNode"===i&&t.isBinary()){var o,s=!1;if("^"===t.op&&("ParenthesisNode"!==t.args[0].type&&"OperatorNode"!==t.args[0].type||"ConstantNode"!==t.args[1].type||(o=parseFloat(t.args[1].value),s=2<=o&&Object(j.i)(o))),s){if(2<o){var u=t.args[0],c=new y("^","pow",[t.args[0].cloneDeep(),new d(o-1)]);t=new y("*","multiply",[u,c])}else t=new y("*","multiply",[t.args[0],t.args[0].cloneDeep()]);a&&("content"===n?r.content=t:r.args[n]=t)}}if("ParenthesisNode"===i)e(t.content,t,"content");else if("ConstantNode"!==i&&"SymbolNode"!==i)for(var f=0;f<t.args.length;f++)e(t.args[f],t,f);if(!a)return t}(e);var u,c=!0,f=!1;for(e=m(e,n.firstRules,{},{exactFractions:!1});s=c?n.distrDivRules:n.sucDivRules,c=!c,(u=(e=m(e,s)).toString())!==o;)f=!0,o=u;f&&(e=m(e,n.firstRulesAgain,{},{exactFractions:!1})),e=m(e,n.finalRules,{},{exactFractions:!1})}var l=[],p={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===a&&(e.args[0]=O(e.args[0],l),e.args[1]=O(e.args[1])),r&&(p.numerator=e.args[0],p.denominator=e.args[1])):(1===a&&(e=O(e,l)),r&&(p.numerator=e,p.denominator=null)),r?(p.coefficients=l,p.variables=i.variables,p.expression=e,p):e}});function O(e,u){void 0===u&&(u=[]);var t={cte:1,oper:"+",fire:""},c=u[0]=0,f="";!function e(t,r,n){var i=t.type;{if("FunctionNode"===i)throw new Error("There is an unsolved function call");if("OperatorNode"===i){if(-1==="+-*^".indexOf(t.op))throw new Error("Operator "+t.op+" invalid");if(null!==r){if(("unaryMinus"===t.fn||"pow"===t.fn)&&"add"!==r.fn&&"subtract"!==r.fn&&"multiply"!==r.fn)throw new Error("Invalid "+t.op+" placing");if(("subtract"===t.fn||"add"===t.fn||"multiply"===t.fn)&&"add"!==r.fn&&"subtract"!==r.fn)throw new Error("Invalid "+t.op+" placing");if(("subtract"===t.fn||"add"===t.fn||"unaryMinus"===t.fn)&&0!==n.noFil)throw new Error("Invalid "+t.op+" placing")}"^"!==t.op&&"*"!==t.op||(n.fire=t.op);for(var a=0;a<t.args.length;a++)"unaryMinus"===t.fn&&(n.oper="-"),"+"!==t.op&&"subtract"!==t.fn||(n.fire="",n.cte=1,n.oper=0===a?"+":t.op),n.noFil=a,e(t.args[a],t,n)}else if("SymbolNode"===i){if(t.name!==f&&""!==f)throw new Error("There is more than one variable");if(f=t.name,null===r)return void(u[1]=1);if("^"===r.op&&0!==n.noFil)throw new Error("In power the variable should be the first parameter");if("*"===r.op&&1!==n.noFil)throw new Error("In multiply the variable should be the second parameter");""!==n.fire&&"*"!==n.fire||(c<1&&(u[1]=0),u[1]+=n.cte*("+"===n.oper?1:-1),c=Math.max(1,c))}else{if("ConstantNode"!==i)throw new Error("Type "+i+" is not allowed");var o=parseFloat(t.value);if(null===r)return void(u[0]=o);if("^"===r.op){if(1!==n.noFil)throw new Error("Constant cannot be powered");if(!Object(j.i)(o)||o<=0)throw new Error("Non-integer exponent is not allowed");for(var s=c+1;s<o;s++)u[s]=0;return c<o&&(u[o]=0),u[o]+=n.cte*("+"===n.oper?1:-1),void(c=Math.max(o,c))}n.cte=o,""===n.fire&&(u[0]+=n.cte*("+"===n.oper?1:-1))}}}(e,null,t);for(var r,n=!0,i=c=u.length-1;0<=i;i--)if(0!==u[i]){var a=new d(n?u[i]:Math.abs(u[i])),o=u[i]<0?"-":"+";if(0<i){var s=new v(f);if(1<i){var l=new d(i);s=new y("^","pow",[s,l])}a=-1===u[i]&&n?new y("-","unaryMinus",[s]):1===Math.abs(u[i])?s:new y("*","multiply",[a,s])}r=n?a:"+"==o?new y("+","add",[r,a]):new y("-","subtract",[r,a]),n=!1}return n?new d(0):r}return N}),_m=["classes"],Im=Object(s.a)("reviver",_m,function(e){var n=e.classes;return function(e,t){var r=n[t&&t.mathjs];return r&&"function"==typeof r.fromJSON?r.fromJSON(t):t}}),Bm=Math.PI,qm=2*Math.PI,km=Math.E,zm=Object(s.a)("true",[],function(){return!0}),Dm=Object(s.a)("false",[],function(){return!1}),Rm=Object(s.a)("null",[],function(){return null}),Pm=th("Infinity",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(1/0):1/0}),Fm=th("NaN",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(NaN):NaN}),Um=th("pi",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?bs(r):Bm}),Lm=th("tau",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?xs(r):qm}),Hm=th("e",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?gs(r):km}),$m=th("phi",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?vs(r):1.618033988749895}),Gm=th("LN2",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(2).ln():Math.LN2}),Zm=th("LN10",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(10).ln():Math.LN10}),Vm=th("LOG2E",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(1).div(new r(2).ln()):Math.LOG2E}),Jm=th("LOG10E",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(1).div(new r(10).ln()):Math.LOG10E}),Wm=th("SQRT1_2",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r("0.5").sqrt():Math.SQRT1_2}),Ym=th("SQRT2",["config","?BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(2).sqrt():Math.SQRT2}),Xm=th("i",["Complex"],function(e){return e.Complex.I}),Qm=Object(s.a)("PI",["pi"],function(e){return e.pi}),Km=Object(s.a)("E",["e"],function(e){return e.e}),eh=Object(s.a)("version",[],function(){return"6.2.2"});function th(e,t,r){return Object(s.a)(e,t,r,{recreateOnConfigChange:!0})}var rh=Qh("speedOfLight","299792458","m s^-1"),nh=Qh("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),ih=Qh("planckConstant","6.62607015e-34","J s"),ah=Qh("reducedPlanckConstant","1.0545718176461565e-34","J s"),oh=Qh("magneticConstant","1.25663706212e-6","N A^-2"),sh=Qh("electricConstant","8.8541878128e-12","F m^-1"),uh=Qh("vacuumImpedance","376.730313667","ohm"),ch=Qh("coulomb","8.987551792261171e9","N m^2 C^-2"),fh=Qh("elementaryCharge","1.602176634e-19","C"),lh=Qh("bohrMagneton","9.2740100783e-24","J T^-1"),ph=Qh("conductanceQuantum","7.748091729863649e-5","S"),mh=Qh("inverseConductanceQuantum","12906.403729652257","ohm"),hh=Qh("magneticFluxQuantum","2.0678338484619295e-15","Wb"),dh=Qh("nuclearMagneton","5.0507837461e-27","J T^-1"),yh=Qh("klitzing","25812.807459304513","ohm"),gh=Qh("bohrRadius","5.29177210903e-11","m"),vh=Qh("classicalElectronRadius","2.8179403262e-15","m"),bh=Qh("electronMass","9.1093837015e-31","kg"),xh=Qh("fermiCoupling","1.1663787e-5","GeV^-2"),wh=Kh("fineStructure",.0072973525693),Nh=Qh("hartreeEnergy","4.3597447222071e-18","J"),Oh=Qh("protonMass","1.67262192369e-27","kg"),Mh=Qh("deuteronMass","3.3435830926e-27","kg"),Eh=Qh("neutronMass","1.6749271613e-27","kg"),jh=Qh("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Sh=Qh("rydberg","10973731.568160","m^-1"),Ah=Qh("thomsonCrossSection","6.6524587321e-29","m^2"),Ch=Kh("weakMixingAngle",.2229),Th=Kh("efimovFactor",22.7),_h=Qh("atomicMass","1.66053906660e-27","kg"),Ih=Qh("avogadro","6.02214076e23","mol^-1"),Bh=Qh("boltzmann","1.380649e-23","J K^-1"),qh=Qh("faraday","96485.33212331001","C mol^-1"),kh=Qh("firstRadiation","3.7417718521927573e-16","W m^2"),zh=Qh("loschmidt","2.686780111798444e25","m^-3"),Dh=Qh("gasConstant","8.31446261815324","J K^-1 mol^-1"),Rh=Qh("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Ph=Qh("molarVolume","0.022413969545014137","m^3 mol^-1"),Fh=Kh("sackurTetrode",-1.16487052358),Uh=Qh("secondRadiation","0.014387768775039337","m K"),Lh=Qh("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Hh=Qh("wienDisplacement","2.897771955e-3","m K"),$h=Qh("molarMass","0.99999999965e-3","kg mol^-1"),Gh=Qh("molarMassC12","11.9999999958e-3","kg mol^-1"),Zh=Qh("gravity","9.80665","m s^-2"),Vh=Qh("planckLength","1.616255e-35","m"),Jh=Qh("planckMass","2.176435e-8","kg"),Wh=Qh("planckTime","5.391245e-44","s"),Yh=Qh("planckCharge","1.87554603778e-18","C"),Xh=Qh("planckTemperature","1.416785e+32","K");function Qh(e,a,o){return Object(s.a)(e,["config","Unit","BigNumber"],function(e){var t=e.config,r=e.Unit,n=e.BigNumber,i=new r("BigNumber"===t.number?new n(a):parseFloat(a),o);return i.fixPrefix=!0,i})}function Kh(e,n){return Object(s.a)(e,["config","BigNumber"],function(e){var t=e.config,r=e.BigNumber;return"BigNumber"===t.number?new r(n):n})}var ed=["typed","isInteger"],td=Object(s.a)("apply",ed,function(e){var t=e.typed,r=e.isInteger,n=Et({typed:t,isInteger:r});return t("apply",{"...any":function(e){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1));try{return n.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),rd=["typed","Index","matrix","range"],nd=Object(s.a)("column",rd,function(e){var t=e.typed,r=e.Index,n=e.matrix,i=e.range,a=Hn({typed:t,Index:r,matrix:n,range:i});return t("column",{"...any":function(e){var t=e.length-1,r=e[t];Object(ie.y)(r)&&(e[t]=r-1);try{return a.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0});function id(e,t,r){var n=e.filter(function(e){return Object(ie.J)(e)&&!(e.name in t)&&!(e.name in r)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+e+'"');var i=n.name,a=Object.create(r),o=e.compile();return function(e){return a[i]=e,o.evaluate(a)}}var ad=["typed"],od=Object(s.a)("filter",ad,function(e){var t=e.typed;function r(e,t,r){var n,i;return e[0]&&(n=e[0].compile().evaluate(r)),e[1]&&(i=Object(ie.J)(e[1])||Object(ie.q)(e[1])?e[1].compile().evaluate(r):id(e[1],t,r)),a(n,i)}r.rawArgs=!0;var a=t("filter",{"Array, function":sd,"Matrix, function":function(e,t){return e.create(sd(e.toArray(),t))},"Array, RegExp":I.d,"Matrix, RegExp":function(e,t){return e.create(Object(I.d)(e.toArray(),t))}});return r},{isTransformFunction:!0});function sd(e,n){var i=Xn(n);return Object(I.c)(e,function(e,t,r){return 1===i?n(e):2===i?n(e,[t+1]):n(e,[t+1],r)})}var ud=["typed"],cd=Object(s.a)("forEach",ud,function(e){var t=e.typed;function r(e,t,r){var n,i;return e[0]&&(n=e[0].compile().evaluate(r)),e[1]&&(i=Object(ie.J)(e[1])||Object(ie.q)(e[1])?e[1].compile().evaluate(r):id(e[1],t,r)),a(n,i)}r.rawArgs=!0;var a=t("forEach",{"Array | Matrix, function":function(t,i){var a=Xn(i);!function r(e,n){Array.isArray(e)?Object(I.f)(e,function(e,t){r(e,n.concat(t+1))}):1===a?i(e):2===a?i(e,n):i(e,n,t)}(t.valueOf(),[])}});return r},{isTransformFunction:!0}),fd=["typed"],ld=Object(s.a)("map",fd,function(e){var t=e.typed;function r(e,t,r){var n,i;return e[0]&&(n=e[0].compile().evaluate(r)),e[1]&&(i=Object(ie.J)(e[1])||Object(ie.q)(e[1])?e[1].compile().evaluate(r):id(e[1],t,r)),a(n,i)}r.rawArgs=!0;var a=t("map",{"Array, function":function(e,t){return pd(e,t,e)},"Matrix, function":function(e,t){return e.create(pd(e.valueOf(),t,e))}});return r},{isTransformFunction:!0});function pd(e,t,i){var a=Xn(t);return function r(e,n){return Array.isArray(e)?Object(I.m)(e,function(e,t){return r(e,n.concat(t+1))}):1===a?t(e):2===a?t(e,n):t(e,n,i)}(e,[])}var md=["typed","larger"],hd=Object(s.a)("max",md,function(e){var t=e.typed,r=e.larger,n=os({typed:t,larger:r});return t("max",{"...any":function(e){if(2===e.length&&Object(ie.i)(e[0])){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),dd=["typed","add","divide"],yd=Object(s.a)("mean",dd,function(e){var t=e.typed,r=e.add,n=e.divide,i=rp({typed:t,add:r,divide:n});return t("mean",{"...any":function(e){if(2===e.length&&Object(ie.i)(e[0])){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1))}try{return i.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),gd=["typed","smaller"],vd=Object(s.a)("min",gd,function(e){var t=e.typed,r=e.smaller,n=us({typed:t,smaller:r});return t("min",{"...any":function(e){if(2===e.length&&Object(ie.i)(e[0])){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1))}try{return n.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),bd=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],xd=Object(s.a)("range",bd,function(e){var t=e.typed,r=e.config,n=e.matrix,i=e.bignumber,a=e.smaller,o=e.smallerEq,s=e.larger,u=e.largerEq,c=Ei({typed:t,config:r,matrix:n,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u});return t("range",{"...any":function(e){return"boolean"!=typeof e[e.length-1]&&e.push(!0),c.apply(null,e)}})},{isTransformFunction:!0}),wd=["typed","Index","matrix","range"],Nd=Object(s.a)("row",wd,function(e){var t=e.typed,r=e.Index,n=e.matrix,i=e.range,a=Bi({typed:t,Index:r,matrix:n,range:i});return t("row",{"...any":function(e){var t=e.length-1,r=e[t];Object(ie.y)(r)&&(e[t]=r-1);try{return a.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),Od=["typed","matrix"],Md=Object(s.a)("subset",Od,function(e){var t=e.typed,r=e.matrix,n=Ji({typed:t,matrix:r});return t("subset",{"...any":function(e){try{return n.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),Ed=["typed","matrix","isInteger"],jd=Object(s.a)("concat",Ed,function(e){var t=e.typed,r=e.matrix,n=e.isInteger,i=Fn({typed:t,matrix:r,isInteger:n});return t("concat",{"...any":function(e){var t=e.length-1,r=e[t];Object(ie.y)(r)?e[t]=r-1:Object(ie.e)(r)&&(e[t]=r.minus(1));try{return i.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),Sd=["typed","sqrt","variance"],Ad=Object(s.a)("std",Sd,function(e){var t=e.typed,r=e.sqrt,n=e.variance,i=dp({typed:t,sqrt:r,variance:n});return t("std",{"...any":function(e){if(2<=e.length&&Object(ie.i)(e[0])){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1))}try{return i.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),Cd=["typed","config","add","?bignumber","?fraction"],Td=Object(s.a)("sum",Cd,function(e){var t=e.typed,r=e.config,n=e.add,i=e.bignumber,a=e.fraction,o=ep({typed:t,config:r,add:n,bignumber:i,fraction:a});return t("sum",{"...any":function(e){if(2===e.length&&Object(ie.i)(e[0])){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1))}try{return o.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0}),_d="variance",Id=["typed","add","subtract","multiply","divide","apply","isNaN"],Bd=Object(s.a)(_d,Id,function(e){var t=e.typed,r=e.add,n=e.subtract,i=e.multiply,a=e.divide,o=e.apply,s=e.isNaN,u=fp({typed:t,add:r,subtract:n,multiply:i,divide:a,apply:o,isNaN:s});return t(_d,{"...any":function(e){if(2<=e.length&&Object(ie.i)(e[0])){var t=e[1];Object(ie.y)(t)?e[1]=t-1:Object(ie.e)(t)&&(e[1]=t.minus(1))}try{return u.apply(null,e)}catch(e){throw Rc(e)}}})},{isTransformFunction:!0});r.d(t,"createTyped",function(){return u}),r.d(t,"createResultSet",function(){return m}),r.d(t,"createBigNumberClass",function(){return g}),r.d(t,"createComplexClass",function(){return N}),r.d(t,"createFractionClass",function(){return S}),r.d(t,"createRangeClass",function(){return C}),r.d(t,"createMatrixClass",function(){return _}),r.d(t,"createDenseMatrixClass",function(){return q}),r.d(t,"createClone",function(){return z}),r.d(t,"createIsInteger",function(){return Z}),r.d(t,"createIsNegative",function(){return te}),r.d(t,"createIsNumeric",function(){return se}),r.d(t,"createHasNumericValue",function(){return fe}),r.d(t,"createIsPositive",function(){return me}),r.d(t,"createIsZero",function(){return de}),r.d(t,"createIsNaN",function(){return ge}),r.d(t,"createTypeOf",function(){return xe}),r.d(t,"createDeprecatedTypeof",function(){return we}),r.d(t,"createEqualScalar",function(){return Ee}),r.d(t,"createSparseMatrixClass",function(){return Se}),r.d(t,"createNumber",function(){return Ce}),r.d(t,"createString",function(){return _e}),r.d(t,"createBoolean",function(){return qe}),r.d(t,"createBignumber",function(){return ze}),r.d(t,"createComplex",function(){return Re}),r.d(t,"createFraction",function(){return Fe}),r.d(t,"createMatrix",function(){return Le}),r.d(t,"createSplitUnit",function(){return Ge}),r.d(t,"createUnaryMinus",function(){return vt}),r.d(t,"createUnaryPlus",function(){return wt}),r.d(t,"createAbs",function(){return Ot}),r.d(t,"createApply",function(){return Et}),r.d(t,"createAddScalar",function(){return Ct}),r.d(t,"createCbrt",function(){return _t}),r.d(t,"createCeil",function(){return Bt}),r.d(t,"createCube",function(){return kt}),r.d(t,"createExp",function(){return Dt}),r.d(t,"createExpm1",function(){return Pt}),r.d(t,"createFix",function(){return Ut}),r.d(t,"createFloor",function(){return Ht}),r.d(t,"createGcd",function(){return tr}),r.d(t,"createLcm",function(){return cr}),r.d(t,"createLog10",function(){return lr}),r.d(t,"createLog2",function(){return mr}),r.d(t,"createMod",function(){return wr}),r.d(t,"createMultiplyScalar",function(){return Or}),r.d(t,"createMultiply",function(){return jr}),r.d(t,"createNthRoot",function(){return Cr}),r.d(t,"createSign",function(){return _r}),r.d(t,"createSqrt",function(){return Br}),r.d(t,"createSquare",function(){return kr}),r.d(t,"createSubtract",function(){return Rr}),r.d(t,"createXgcd",function(){return Ur}),r.d(t,"createDotMultiply",function(){return Zr}),r.d(t,"createBitAnd",function(){return ln}),r.d(t,"createBitNot",function(){return mn}),r.d(t,"createBitOr",function(){return dn}),r.d(t,"createBitXor",function(){return bn}),r.d(t,"createArg",function(){return wn}),r.d(t,"createConj",function(){return On}),r.d(t,"createIm",function(){return En}),r.d(t,"createRe",function(){return Sn}),r.d(t,"createNot",function(){return qn}),r.d(t,"createOr",function(){return zn}),r.d(t,"createXor",function(){return Rn}),r.d(t,"createConcat",function(){return Fn}),r.d(t,"createColumn",function(){return Hn}),r.d(t,"createCross",function(){return Gn}),r.d(t,"createDiag",function(){return Vn}),r.d(t,"createEye",function(){return Jn}),r.d(t,"createFilter",function(){return Kn}),r.d(t,"createFlatten",function(){return ni}),r.d(t,"createForEach",function(){return oi}),r.d(t,"createGetMatrixDataType",function(){return fi}),r.d(t,"createIdentity",function(){return mi}),r.d(t,"createKron",function(){return di}),r.d(t,"createMap",function(){return gi}),r.d(t,"createOnes",function(){return xi}),r.d(t,"createRange",function(){return Ei}),r.d(t,"createReshape",function(){return Ai}),r.d(t,"createResize",function(){return _i}),r.d(t,"createRow",function(){return Bi}),r.d(t,"createSize",function(){return ki}),r.d(t,"createSqueeze",function(){return Ri}),r.d(t,"createSubset",function(){return Ji}),r.d(t,"createTranspose",function(){return ea}),r.d(t,"createCtranspose",function(){return na}),r.d(t,"createZeros",function(){return aa}),r.d(t,"createErf",function(){return sa}),r.d(t,"createMode",function(){return ha}),r.d(t,"createProd",function(){return ga}),r.d(t,"createFormat",function(){return ba}),r.d(t,"createPrint",function(){return wa}),r.d(t,"createTo",function(){return Ma}),r.d(t,"createIsPrime",function(){return Sa}),r.d(t,"createNumeric",function(){return Ca}),r.d(t,"createDivideScalar",function(){return Ia}),r.d(t,"createPow",function(){return qa}),r.d(t,"createRound",function(){return Fa}),r.d(t,"createLog",function(){return Ha}),r.d(t,"createLog1p",function(){return Ga}),r.d(t,"createNthRoots",function(){return Ja}),r.d(t,"createDotPow",function(){return Ya}),r.d(t,"createDotDivide",function(){return Ka}),r.d(t,"createLsolve",function(){return ro}),r.d(t,"createUsolve",function(){return io}),r.d(t,"createLeftShift",function(){return co}),r.d(t,"createRightArithShift",function(){return po}),r.d(t,"createRightLogShift",function(){return yo}),r.d(t,"createAnd",function(){return vo}),r.d(t,"createCompare",function(){return wo}),r.d(t,"createCompareNatural",function(){return jo}),r.d(t,"createCompareText",function(){return Co}),r.d(t,"createEqual",function(){return Io}),r.d(t,"createEqualText",function(){return ko}),r.d(t,"createSmaller",function(){return Ro}),r.d(t,"createSmallerEq",function(){return Uo}),r.d(t,"createLarger",function(){return $o}),r.d(t,"createLargerEq",function(){return Vo}),r.d(t,"createDeepEqual",function(){return Yo}),r.d(t,"createUnequal",function(){return Ko}),r.d(t,"createPartitionSelect",function(){return rs}),r.d(t,"createSort",function(){return is}),r.d(t,"createMax",function(){return os}),r.d(t,"createMin",function(){return us}),r.d(t,"createImmutableDenseMatrixClass",function(){return fs}),r.d(t,"createIndexClass",function(){return ps}),r.d(t,"createFibonacciHeapClass",function(){return hs}),r.d(t,"createSpaClass",function(){return ys}),r.d(t,"createUnitClass",function(){return Es}),r.d(t,"createUnitFunction",function(){return Ss}),r.d(t,"createSparse",function(){return Cs}),r.d(t,"createCreateUnit",function(){return Is}),r.d(t,"createAcos",function(){return qs}),r.d(t,"createAcosh",function(){return Ks}),r.d(t,"createAcot",function(){return tu}),r.d(t,"createAcoth",function(){return nu}),r.d(t,"createAcsc",function(){return au}),r.d(t,"createAcsch",function(){return su}),r.d(t,"createAsec",function(){return cu}),r.d(t,"createAsech",function(){return lu}),r.d(t,"createAsin",function(){return mu}),r.d(t,"createAsinh",function(){return du}),r.d(t,"createAtan",function(){return gu}),r.d(t,"createAtan2",function(){return bu}),r.d(t,"createAtanh",function(){return wu}),r.d(t,"createCos",function(){return Ou}),r.d(t,"createCosh",function(){return Eu}),r.d(t,"createCot",function(){return Su}),r.d(t,"createCoth",function(){return Cu}),r.d(t,"createCsc",function(){return _u}),r.d(t,"createCsch",function(){return Bu}),r.d(t,"createSec",function(){return ku}),r.d(t,"createSech",function(){return Du}),r.d(t,"createSin",function(){return Pu}),r.d(t,"createSinh",function(){return Uu}),r.d(t,"createTan",function(){return Hu}),r.d(t,"createTanh",function(){return Gu}),r.d(t,"createSetCartesian",function(){return Ju}),r.d(t,"createSetDifference",function(){return Xu}),r.d(t,"createSetDistinct",function(){return ec}),r.d(t,"createSetIntersect",function(){return nc}),r.d(t,"createSetIsSubset",function(){return oc}),r.d(t,"createSetMultiplicity",function(){return cc}),r.d(t,"createSetPowerset",function(){return pc}),r.d(t,"createSetSize",function(){return dc}),r.d(t,"createSetSymDifference",function(){return vc}),r.d(t,"createSetUnion",function(){return wc}),r.d(t,"createAdd",function(){return Oc}),r.d(t,"createHypot",function(){return Ec}),r.d(t,"createNorm",function(){return Sc}),r.d(t,"createDot",function(){return Cc}),r.d(t,"createTrace",function(){return _c}),r.d(t,"createIndex",function(){return Bc}),r.d(t,"createNode",function(){return Dc}),r.d(t,"createAccessorNode",function(){return Lc}),r.d(t,"createArrayNode",function(){return $c}),r.d(t,"createAssignmentNode",function(){return Xc}),r.d(t,"createBlockNode",function(){return Kc}),r.d(t,"createConditionalNode",function(){return tf}),r.d(t,"createConstantNode",function(){return pf}),r.d(t,"createFunctionAssignmentNode",function(){return hf}),r.d(t,"createIndexNode",function(){return bf}),r.d(t,"createObjectNode",function(){return Nf}),r.d(t,"createOperatorNode",function(){return Mf}),r.d(t,"createParenthesisNode",function(){return jf}),r.d(t,"createRangeNode",function(){return Af}),r.d(t,"createRelationalNode",function(){return Tf}),r.d(t,"createSymbolNode",function(){return If}),r.d(t,"createFunctionNode",function(){return zf}),r.d(t,"createParse",function(){return Pf}),r.d(t,"createCompile",function(){return Lf}),r.d(t,"createEvaluate",function(){return Gf}),r.d(t,"createDeprecatedEval",function(){return Zf}),r.d(t,"createParserClass",function(){return Jf}),r.d(t,"createParser",function(){return Yf}),r.d(t,"createLup",function(){return Qf}),r.d(t,"createQr",function(){return el}),r.d(t,"createSlu",function(){return bl}),r.d(t,"createLusolve",function(){return Ol}),r.d(t,"createHelpClass",function(){return El}),r.d(t,"createChainClass",function(){return Sl}),r.d(t,"createHelp",function(){return kl}),r.d(t,"createChain",function(){return Dl}),r.d(t,"createDet",function(){return Pl}),r.d(t,"createInv",function(){return Ul}),r.d(t,"createExpm",function(){return Hl}),r.d(t,"createSqrtm",function(){return Gl}),r.d(t,"createDivide",function(){return Vl}),r.d(t,"createDistance",function(){return Yl}),r.d(t,"createIntersect",function(){return Ql}),r.d(t,"createSum",function(){return ep}),r.d(t,"createMean",function(){return rp}),r.d(t,"createMedian",function(){return ip}),r.d(t,"createMad",function(){return op}),r.d(t,"createVariance",function(){return fp}),r.d(t,"createDeprecatedVar",function(){return lp}),r.d(t,"createQuantileSeq",function(){return mp}),r.d(t,"createStd",function(){return dp}),r.d(t,"createCombinations",function(){return xp}),r.d(t,"createCombinationsWithRep",function(){return Mp}),r.d(t,"createGamma",function(){return Tp}),r.d(t,"createFactorial",function(){return Bp}),r.d(t,"createKldivergence",function(){return zp}),r.d(t,"createMultinomial",function(){return Pp}),r.d(t,"createPermutations",function(){return Lp}),r.d(t,"createPickRandom",function(){return Wp}),r.d(t,"createRandom",function(){return Kp}),r.d(t,"createRandomInt",function(){return rm}),r.d(t,"createStirlingS2",function(){return am}),r.d(t,"createBellNumbers",function(){return um}),r.d(t,"createCatalan",function(){return lm}),r.d(t,"createComposition",function(){return hm}),r.d(t,"createSimplify",function(){return Em}),r.d(t,"createDerivative",function(){return Sm}),r.d(t,"createRationalize",function(){return Tm}),r.d(t,"createReviver",function(){return Im}),r.d(t,"createE",function(){return Hm}),r.d(t,"createUppercaseE",function(){return Km}),r.d(t,"createFalse",function(){return Dm}),r.d(t,"createI",function(){return Xm}),r.d(t,"createInfinity",function(){return Pm}),r.d(t,"createLN10",function(){return Zm}),r.d(t,"createLN2",function(){return Gm}),r.d(t,"createLOG10E",function(){return Jm}),r.d(t,"createLOG2E",function(){return Vm}),r.d(t,"createNaN",function(){return Fm}),r.d(t,"createNull",function(){return Rm}),r.d(t,"createPhi",function(){return $m}),r.d(t,"createPi",function(){return Um}),r.d(t,"createUppercasePi",function(){return Qm}),r.d(t,"createSQRT1_2",function(){return Wm}),r.d(t,"createSQRT2",function(){return Ym}),r.d(t,"createTau",function(){return Lm}),r.d(t,"createTrue",function(){return zm}),r.d(t,"createVersion",function(){return eh}),r.d(t,"createAtomicMass",function(){return _h}),r.d(t,"createAvogadro",function(){return Ih}),r.d(t,"createBohrMagneton",function(){return lh}),r.d(t,"createBohrRadius",function(){return gh}),r.d(t,"createBoltzmann",function(){return Bh}),r.d(t,"createClassicalElectronRadius",function(){return vh}),r.d(t,"createConductanceQuantum",function(){return ph}),r.d(t,"createCoulomb",function(){return ch}),r.d(t,"createDeuteronMass",function(){return Mh}),r.d(t,"createEfimovFactor",function(){return Th}),r.d(t,"createElectricConstant",function(){return sh}),r.d(t,"createElectronMass",function(){return bh}),r.d(t,"createElementaryCharge",function(){return fh}),r.d(t,"createFaraday",function(){return qh}),r.d(t,"createFermiCoupling",function(){return xh}),r.d(t,"createFineStructure",function(){return wh}),r.d(t,"createFirstRadiation",function(){return kh}),r.d(t,"createGasConstant",function(){return Dh}),r.d(t,"createGravitationConstant",function(){return nh}),r.d(t,"createGravity",function(){return Zh}),r.d(t,"createHartreeEnergy",function(){return Nh}),r.d(t,"createInverseConductanceQuantum",function(){return mh}),r.d(t,"createKlitzing",function(){return yh}),r.d(t,"createLoschmidt",function(){return zh}),r.d(t,"createMagneticConstant",function(){return oh}),r.d(t,"createMagneticFluxQuantum",function(){return hh}),r.d(t,"createMolarMass",function(){return $h}),r.d(t,"createMolarMassC12",function(){return Gh}),r.d(t,"createMolarPlanckConstant",function(){return Rh}),r.d(t,"createMolarVolume",function(){return Ph}),r.d(t,"createNeutronMass",function(){return Eh}),r.d(t,"createNuclearMagneton",function(){return dh}),r.d(t,"createPlanckCharge",function(){return Yh}),r.d(t,"createPlanckConstant",function(){return ih}),r.d(t,"createPlanckLength",function(){return Vh}),r.d(t,"createPlanckMass",function(){return Jh}),r.d(t,"createPlanckTemperature",function(){return Xh}),r.d(t,"createPlanckTime",function(){return Wh}),r.d(t,"createProtonMass",function(){return Oh}),r.d(t,"createQuantumOfCirculation",function(){return jh}),r.d(t,"createReducedPlanckConstant",function(){return ah}),r.d(t,"createRydberg",function(){return Sh}),r.d(t,"createSackurTetrode",function(){return Fh}),r.d(t,"createSecondRadiation",function(){return Uh}),r.d(t,"createSpeedOfLight",function(){return rh}),r.d(t,"createStefanBoltzmann",function(){return Lh}),r.d(t,"createThomsonCrossSection",function(){return Ah}),r.d(t,"createVacuumImpedance",function(){return uh}),r.d(t,"createWeakMixingAngle",function(){return Ch}),r.d(t,"createWienDisplacement",function(){return Hh}),r.d(t,"createApplyTransform",function(){return td}),r.d(t,"createColumnTransform",function(){return nd}),r.d(t,"createFilterTransform",function(){return od}),r.d(t,"createForEachTransform",function(){return cd}),r.d(t,"createIndexTransform",function(){return yf}),r.d(t,"createMapTransform",function(){return ld}),r.d(t,"createMaxTransform",function(){return hd}),r.d(t,"createMeanTransform",function(){return yd}),r.d(t,"createMinTransform",function(){return vd}),r.d(t,"createRangeTransform",function(){return xd}),r.d(t,"createRowTransform",function(){return Nd}),r.d(t,"createSubsetTransform",function(){return Md}),r.d(t,"createConcatTransform",function(){return jd}),r.d(t,"createStdTransform",function(){return Ad}),r.d(t,"createSumTransform",function(){return Td}),r.d(t,"createVarianceTransform",function(){return Bd})},function(e,t,r){"use strict";r.r(t);var v=r(3),n=r(18),i=r.n(n);var b=r(1),x=r(0),w=r(2),N=r(13),O=r(8);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(u,c,f,l){function s(e,t,r){if(r.wrap&&"function"==typeof t&&(t=function(i){function e(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];e[t]=n&&n.valueOf()}return i.apply(f,e)}i.transform&&(e.transform=i.transform);return e}(t)),function(e){return"function"==typeof e&&"string"==typeof e.signature}(t)&&(t=u(e,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t.signature,t))),h(f[e])&&h(t))return t=r.override?u(e,t.signatures):u(f[e],t),f[e]=t,delete l[e],n(e,t),void f.emit("import",e,function(){return t});if(void 0===f[e]||r.override)return f[e]=t,delete l[e],n(e,t),void f.emit("import",e,function(){return t});if(!r.silent)throw new Error('Cannot import "'+e+'": already exists')}function n(e,t){t&&"function"==typeof t.transform?(f.expression.transform[e]=t.transform,r(e)&&(f.expression.mathWithTransform[e]=t.transform)):(delete f.expression.transform[e],r(e)&&(f.expression.mathWithTransform[e]=t))}function p(e){delete f.expression.transform[e],r(e)?f.expression.mathWithTransform[e]=f[e]:delete f.expression.mathWithTransform[e]}function m(r,n,e){var i=2<arguments.length&&void 0!==e?e:r.fn;if(Object(w.b)(i,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(i));function t(){var t={};r.dependencies.map(x.c).forEach(function(e){if(Object(w.b)(e,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(e));"math"===e?t.math=f:"mathWithTransform"===e?t.mathWithTransform=f.expression.mathWithTransform:"classes"===e?t.classes=f:t[e]=f[e]});var e=r(t);if(e&&"function"==typeof e.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(void 0===s||n.override)return e;if(h(s)&&h(e))return u(s,e);if(n.silent)return s;throw new Error('Cannot import "'+i+'": already exists')}var a=g(r)?f.expression.transform:f,o=i in f.expression.transform,s=Object(v.f)(a,i)?a[i]:void 0;r.meta&&!1===r.meta.lazy?a[i]=t():Object(v.h)(a,i,t),s&&o?p(i):(g(r)||y(r))&&Object(v.h)(f.expression.mathWithTransform,i,function(){return a[i]}),l[i]=r,f.emit("import",i,t)}function h(e){return"function"==typeof e&&"object"===M(e.signatures)}function r(e){return!Object(v.f)(t,e)}function d(e){return void 0===e.path&&!Object(v.f)(t,e.name)}function y(e){return!(-1!==e.fn.indexOf(".")||Object(v.f)(t,e.fn)||e.meta&&e.meta.isClass)}function g(e){return void 0!==e&&void 0!==e.meta&&!0===e.meta.isTransformFunction||!1}var t={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function(e,o){var t=arguments.length;if(1!==t&&2!==t)throw new N.a("import",t,1,2);o=o||{};var r,n={};for(var i in function t(r,e,n){if(Object(v.g)(e))!function(t,r){if(Object(O.a)("Factories of type { name, factory } are deprecated since v6. Please create your factory functions using the math.factory function."),"string"==typeof t.name){var n=t.name,e=n in f.expression.transform,i=t.path?Object(v.k)(f,t.path):f,a=Object(v.f)(i,n)?i[n]:void 0,o=function(){var e=c(t);if(e&&"function"==typeof e.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(h(a)&&h(e))return r.override||(e=u(a,e)),e;if(void 0===a||r.override)return e;if(r.silent)return a;throw new Error('Cannot import "'+n+'": already exists')};!1!==t.lazy?(Object(v.h)(i,n,o),e?p(n):"expression.transform"!==t.path&&!d(t)||Object(v.h)(f.expression.mathWithTransform,n,o)):(i[n]=o(),e?p(n):"expression.transform"!==t.path&&!d(t)||(f.expression.mathWithTransform[n]=o()));var s=t.path?t.path+"."+t.name:t.name;l[s]=t,f.emit("import",n,o,t.path)}else c(t)}(e,o);else if(Array.isArray(e))e.forEach(function(e){return t(r,e)});else if("object"===M(e))for(var i in e)Object(v.f)(e,i)&&t(r,e[i],i);else if(Object(x.b)(e)||void 0!==n){var a=Object(x.b)(e)?g(e)?e.fn+".transform":e.fn:n;if(Object(v.f)(r,a)&&r[a]!==e&&!o.silent)throw new Error('Cannot import "'+a+'" twice');r[a]=e}else if(!o.silent)throw new TypeError("Factory, Object, or Array expected")}(n,e),n)if(Object(v.f)(n,i)){var a=n[i];if(Object(x.b)(a))m(a,o);else if("function"==typeof(r=a)||"number"==typeof r||"string"==typeof r||"boolean"==typeof r||null===r||Object(b.L)(r)||Object(b.j)(r)||Object(b.e)(r)||Object(b.o)(r)||Object(b.v)(r)||Array.isArray(r))s(i,a,o);else if(!o.silent)throw new TypeError("Factory, Object, or Array expected")}}}var f={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},l=["Matrix","Array"],p=["number","BigNumber","Fraction"];function m(e,t,r){if(void 0!==e[t]&&!function(e,t){return-1!==e.indexOf(t)}(r,e[t])){var n=function(e,t){return e.map(function(e){return e.toLowerCase()}).indexOf(t.toLowerCase())}(r,e[t]);-1!==n?(console.warn('Warning: Wrong casing for configuration option "'+t+'", should be "'+r[n]+'" instead of "'+e[t]+'".'),e[t]=r[n]):console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+r.map(JSON.stringify).join(", ")+".")}}var h=r(6),d=r(10);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){var a=y({},f,t);if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var o=function(e){var t=new i.a;return e.on=t.on.bind(t),e.off=t.off.bind(t),e.once=t.once.bind(t),e.emit=t.emit.bind(t),e}({isNumber:b.y,isComplex:b.j,isBigNumber:b.e,isFraction:b.o,isUnit:b.L,isString:b.I,isArray:b.b,isMatrix:b.v,isCollection:b.i,isDenseMatrix:b.n,isSparseMatrix:b.H,isRange:b.D,isIndex:b.t,isBoolean:b.g,isResultSet:b.G,isHelp:b.s,isFunction:b.p,isDate:b.m,isRegExp:b.F,isObject:b.z,isNull:b.x,isUndefined:b.K,isAccessorNode:b.a,isArrayNode:b.c,isAssignmentNode:b.d,isBlockNode:b.f,isConditionalNode:b.k,isConstantNode:b.l,isFunctionAssignmentNode:b.q,isFunctionNode:b.r,isIndexNode:b.u,isNode:b.w,isObjectNode:b.A,isOperatorNode:b.B,isParenthesisNode:b.C,isRangeNode:b.E,isSymbolNode:b.J,isChain:b.h});o.config=function(i,a){function t(e){if(e){var t=Object(v.i)(i,v.a);m(e,"matrix",l),m(e,"number",p),Object(v.b)(i,e);var r=Object(v.i)(i,v.a),n=Object(v.i)(e,v.a);return a("config",r,t,n),r}return Object(v.i)(i,v.a)}return t.MATRIX_OPTIONS=l,t.NUMBER_OPTIONS=p,Object.keys(f).forEach(function(e){Object.defineProperty(t,e,{get:function(){return i[e]},enumerable:!0,configurable:!0})}),t}(a,o.emit),o.expression={transform:{},mathWithTransform:{config:o.config}};var s=[],u=[];var r={};var n=c(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.typed.apply(o.typed,t)},function e(t){if(Object(x.b)(t))return t(o);var r=t[Object.keys(t)[0]];if(Object(x.b)(r))return r(o);if(!Object(v.g)(t))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",t),new Error("Factory object with properties `type`, `name`, and `factory` expected");var n,i=s.indexOf(t);return-1===i?(n=!0===t.math?t.factory(o.type,a,e,o.typed,o):t.factory(o.type,a,e,o.typed),s.push(t),u.push(n)):n=u[i],n},o,r);o.import=n,o.on("config",function(){Object(v.l)(r).forEach(function(e){e&&e.meta&&e.meta.recreateOnConfigChange&&n(e,{override:!0})})}),o.create=g.bind(null,e),o.factory=x.a,o.import(Object(v.l)(Object(v.c)(e)));return["type.isNumber","type.isComplex","type.isBigNumber","type.isFraction","type.isUnit","type.isString","type.isArray","type.isMatrix","type.isDenseMatrix","type.isSparseMatrix","type.isCollection","type.isRange","type.isIndex","type.isBoolean","type.isResultSet","type.isHelp","type.isFunction","type.isDate","type.isRegExp","type.isObject","type.isNull","type.isUndefined","type.isAccessorNode","type.isArrayNode","type.isAssignmentNode","type.isBlockNode","type.isConditionalNode","type.isConstantNode","type.isFunctionAssignmentNode","type.isFunctionNode","type.isIndexNode","type.isNode","type.isObjectNode","type.isOperatorNode","type.isParenthesisNode","type.isRangeNode","type.isSymbolNode","type.isChain","type.BigNumber","type.Chain","type.Complex","type.Fraction","type.Matrix","type.DenseMatrix","type.SparseMatrix","type.Spa","type.FibonacciHeap","type.ImmutableDenseMatrix","type.Index","type.Range","type.ResultSet","type.Unit","type.Help","type.Parser","expression.parse","expression.Parser","expression.node.AccessorNode","expression.node.ArrayNode","expression.node.AssignmentNode","expression.node.BlockNode","expression.node.ConditionalNode","expression.node.ConstantNode","expression.node.IndexNode","expression.node.FunctionAssignmentNode","expression.node.FunctionNode","expression.node.Node","expression.node.ObjectNode","expression.node.OperatorNode","expression.node.ParenthesisNode","expression.node.RangeNode","expression.node.RelationalNode","expression.node.SymbolNode","json.reviver","error.ArgumentsError","error.DimensionError","error.IndexError"].forEach(function(e){var t=e.split("."),r=Object(w.j)(t),n=Object(w.l)(t),i=Object(v.k)(o,r);Object(v.h)(i,n,function(){return Object(O.a)("math.".concat(e," is moved to math.").concat(n," in v6.0.0. ")+"Please use the new location instead."),o[n]})}),Object(v.h)(o.expression,"docs",function(){throw new Error("math.expression.docs has been moved. Please import via \"import { docs } from 'mathjs'\"")}),o.ArgumentsError=N.a,o.DimensionError=h.a,o.IndexError=d.a,o}r.d(t,"create",function(){return g})}],i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=19);function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r,n});"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Popper={})}(this,(function(e){function t(e){return{width:(e=e.getBoundingClientRect()).width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function n(e){return"[object Window]"!==e.toString()?(e=e.ownerDocument)?e.defaultView:window:e}function r(e){return{scrollLeft:(e=n(e)).pageXOffset,scrollTop:e.pageYOffset}}function o(e){return e instanceof n(e).Element||e instanceof Element}function i(e){return e instanceof n(e).HTMLElement||e instanceof HTMLElement}function a(e){return e?(e.nodeName||"").toLowerCase():null}function s(e){return(o(e)?e.ownerDocument:e.document).documentElement}function f(e){return t(s(e)).left+r(e).scrollLeft}function p(e,o,p){void 0===p&&(p=!1),e=t(e);var c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return p||("body"!==a(o)&&(c=o!==n(o)&&i(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:r(o)),i(o)?((u=t(o)).x+=o.clientLeft,u.y+=o.clientTop):(o=s(o))&&(u.x=f(o))),{x:e.left+c.scrollLeft-u.x,y:e.top+c.scrollTop-u.y,width:e.width,height:e.height}}function c(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function u(e){return"html"===a(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function d(e){return n(e).getComputedStyle(e)}function l(e,t){void 0===t&&(t=[]);var r=function e(t){if(0<=["html","body","#document"].indexOf(a(t)))return t.ownerDocument.body;if(i(t)){var n=d(t);if(/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX))return t}return e(u(t))}(e);return r=(e="body"===a(r))?n(r):r,t=t.concat(r),e?t:t.concat(l(u(r)))}function m(e){return i(e)&&"fixed"!==d(e).position?e.offsetParent:null}function h(e){var t=n(e);for(e=m(e);e&&0<=["table","td","th"].indexOf(a(e));)e=m(e);return e&&"body"===a(e)&&"static"===d(e).position?t:e||t}function v(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach((function(r){n.has(r)||(r=t.get(r))&&e(r)})),r.push(o)}(e)})),r}function g(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function b(e){return e.split("-")[0]}function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function x(e){void 0===e&&(e={});var t=e.defaultModifiers,n=void 0===t?[]:t,r=void 0===(e=e.defaultOptions)?F:e;return function(e,t,i){function a(){f.forEach((function(e){return e()})),f=[]}void 0===i&&(i=r);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},F,{},r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},f=[],u=!1,d={state:s,setOptions:function(i){return a(),s.options=Object.assign({},r,{},s.options,{},i),s.scrollParents={reference:o(e)?l(e):e.contextElement?l(e.contextElement):[],popper:l(t)},i=function(e){var t=v(e);return C.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(n,s.options.modifiers))),s.orderedModifiers=i.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options;n=void 0===n?{}:n,"function"==typeof(e=e.effect)&&(t=e({state:s,name:t,instance:d,options:n}),f.push(t||function(){}))})),d.update()},forceUpdate:function(){if(!u){var e=s.elements,t=e.reference;if(y(t,e=e.popper))for(s.rects={reference:p(t,h(e),"fixed"===s.options.strategy),popper:c(e)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)})),t=0;t<s.orderedModifiers.length;t++)if(!0===s.reset)s.reset=!1,t=-1;else{var n=s.orderedModifiers[t];e=n.fn;var r=n.options;r=void 0===r?{}:r,n=n.name,"function"==typeof e&&(s=e({state:s,options:r,name:n,instance:d})||s)}}},update:g((function(){return new Promise((function(e){d.forceUpdate(),e(s)}))})),destroy:function(){a(),u=!0}};return y(e,t)?(d.setOptions(i).then((function(e){!u&&i.onFirstUpdate&&i.onFirstUpdate(e)})),d):d}}function w(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function O(e){var t=e.reference,n=e.element,r=(e=e.placement)?b(e):null;e=e?e.split("-")[1]:null;var o=t.x+t.width/2-n.width/2,i=t.y+t.height/2-n.height/2;switch(r){case"top":o={x:o,y:t.y-n.height};break;case"bottom":o={x:o,y:t.y+t.height};break;case"right":o={x:t.x+t.width,y:i};break;case"left":o={x:t.x-n.width,y:i};break;default:o={x:t.x,y:t.y}}if(null!=(r=r?w(r):null))switch(i="y"===r?"height":"width",e){case"start":o[r]=Math.floor(o[r])-Math.floor(t[i]/2-n[i]/2);break;case"end":o[r]=Math.floor(o[r])+Math.ceil(t[i]/2-n[i]/2)}return o}function M(e){var t,r=e.popper,o=e.popperRect,i=e.placement,a=e.offsets,f=e.position,p=e.gpuAcceleration,c=e.adaptive,u=window.devicePixelRatio||1;e=Math.round(a.x*u)/u||0,u=Math.round(a.y*u)/u||0;var d=a.hasOwnProperty("x");a=a.hasOwnProperty("y");var l,m="left",v="top",g=window;if(c){var b=h(r);b===n(r)&&(b=s(r)),"top"===i&&(v="bottom",u-=b.clientHeight-o.height,u*=p?1:-1),"left"===i&&(m="right",e-=b.clientWidth-o.width,e*=p?1:-1)}return r=Object.assign({position:f},c&&I),p?Object.assign({},r,((l={})[v]=a?"0":"",l[m]=d?"0":"",l.transform=2>(g.devicePixelRatio||1)?"translate("+e+"px, "+u+"px)":"translate3d("+e+"px, "+u+"px, 0)",l)):Object.assign({},r,((t={})[v]=a?u+"px":"",t[m]=d?e+"px":"",t.transform="",t))}function j(e){return e.replace(/left|right|bottom|top/g,(function(e){return _[e]}))}function E(e){return e.replace(/start|end/g,(function(e){return U[e]}))}function D(e,t){var n=!(!t.getRootNode||!t.getRootNode().host);if(e.contains(t))return!0;if(n)do{if(t&&e.isSameNode(t))return!0;t=t.parentNode||t.host}while(t);return!1}function L(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function k(e,o){if("viewport"===o)e=L({width:(e=n(e)).innerWidth,height:e.innerHeight,x:0,y:0});else if(i(o))e=t(o);else{var a=s(e);e=n(a),o=r(a),(a=p(s(a),e)).height=Math.max(a.height,e.innerHeight),a.width=Math.max(a.width,e.innerWidth),a.x=-o.scrollLeft,a.y=-o.scrollTop,e=L(a)}return e}function P(e,t,r){return t="clippingParents"===t?function(e){var t=l(e),n=0<=["absolute","fixed"].indexOf(d(e).position)&&i(e)?h(e):e;return o(n)?t.filter((function(e){return o(e)&&D(e,n)})):[]}(e):[].concat(t),(r=(r=[].concat(t,[r])).reduce((function(t,r){var o=k(e,r),p=n(r=i(r)?r:s(e)),c=i(r)?d(r):{};parseFloat(c.borderTopWidth);var u=parseFloat(c.borderRightWidth)||0,l=parseFloat(c.borderBottomWidth)||0,m=parseFloat(c.borderLeftWidth)||0;c="html"===a(r);var h=f(r),v=r.clientWidth+u,g=r.clientHeight+l;return c&&50<p.innerHeight-r.clientHeight&&(g=p.innerHeight-l),l=c?0:r.clientTop,u=r.clientLeft>m?u:c?p.innerWidth-v-h:r.offsetWidth-v,p=c?p.innerHeight-g:r.offsetHeight-g,r=c?h:r.clientLeft,t.top=Math.max(o.top+l,t.top),t.right=Math.min(o.right-u,t.right),t.bottom=Math.min(o.bottom-p,t.bottom),t.left=Math.max(o.left+r,t.left),t}),k(e,r[0]))).width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function B(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function W(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function H(e,n){void 0===n&&(n={});var r=n;n=void 0===(n=r.placement)?e.placement:n;var i=r.boundary,a=void 0===i?"clippingParents":i,f=void 0===(i=r.rootBoundary)?"viewport":i;i=void 0===(i=r.elementContext)?"popper":i;var p=r.altBoundary,c=void 0!==p&&p;r=B("number"!=typeof(r=void 0===(r=r.padding)?0:r)?r:W(r,q));var u=e.elements.reference;p=e.rects.popper,a=P(o(c=e.elements[c?"popper"===i?"reference":"popper":i])?c:c.contextElement||s(e.elements.popper),a,f),c=O({reference:f=t(u),element:p,strategy:"absolute",placement:n}),p=L(Object.assign({},p,{},c)),f="popper"===i?p:f;var d={top:a.top-f.top+r.top,bottom:f.bottom-a.bottom+r.bottom,left:a.left-f.left+r.left,right:f.right-a.right+r.right};if(e=e.modifiersData.offset,"popper"===i&&e){var l=e[n];Object.keys(d).forEach((function(e){var t=0<=["right","bottom"].indexOf(e)?1:-1,n=0<=["top","bottom"].indexOf(e)?"y":"x";d[e]+=l[n]*t}))}return d}function T(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function R(e){return["top","right","bottom","left"].some((function(t){return 0<=e[t]}))}var q=["top","bottom","right","left"],A=q.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),S=[].concat(q,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),C="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" "),F={placement:"bottom",modifiers:[],strategy:"absolute"},N={passive:!0},I={top:"auto",right:"auto",bottom:"auto",left:"auto"},_={left:"right",right:"left",bottom:"top",top:"bottom"},U={start:"end",end:"start"},V=[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,o=(e=e.options).scroll,i=void 0===o||o,a=void 0===(e=e.resize)||e,s=n(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&f.forEach((function(e){e.addEventListener("scroll",r.update,N)})),a&&s.addEventListener("resize",r.update,N),function(){i&&f.forEach((function(e){e.removeEventListener("scroll",r.update,N)})),a&&s.removeEventListener("resize",r.update,N)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;t.modifiersData[e.name]=O({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options;e=void 0===(e=n.gpuAcceleration)||e,n=void 0===(n=n.adaptive)||n,e={placement:b(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e},t.styles.popper=Object.assign({},t.styles.popper,{},M(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:n}))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},M(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];i(o)&&a(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:"absolute",left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{};e=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{}),i(r)&&a(r)&&(Object.assign(r.style,e),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.name,r=void 0===(e=e.options.offset)?[0,0]:e,o=(e=S.reduce((function(e,n){var o=t.rects,i=b(n),a=0<=["left","top"].indexOf(i)?-1:1,s="function"==typeof r?r(Object.assign({},o,{placement:n})):r;return o=(o=s[0])||0,s=((s=s[1])||0)*a,i=0<=["left","right"].indexOf(i)?{x:s,y:o}:{x:o,y:s},e[n]=i,e}),{}))[t.placement],i=o.y;t.modifiersData.popperOffsets.x+=o.x,t.modifiersData.popperOffsets.y+=i,t.modifiersData[n]=e}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options;if(e=e.name,!t.modifiersData[e]._skip){var r=n.fallbackPlacements,o=n.padding,i=n.boundary,a=n.rootBoundary,s=n.altBoundary,f=void 0===(n=n.flipVariations)||n,p=b(n=t.options.placement);r=r||(p!==n&&f?function(e){if("auto"===b(e))return[];var t=j(e);return[E(e),t,E(t)]}(n):[j(n)]);var c=[n].concat(r).reduce((function(e,n){return e.concat("auto"===b(n)?function(e,t){void 0===t&&(t={});var n=t.boundary,r=t.rootBoundary,o=t.padding,i=t.flipVariations,a=t.placement.split("-")[1],s=(a?i?A:A.filter((function(e){return e.split("-")[1]===a})):q).reduce((function(t,i){return t[i]=H(e,{placement:i,boundary:n,rootBoundary:r,padding:o})[b(i)],t}),{});return Object.keys(s).sort((function(e,t){return s[e]-s[t]}))}(t,{placement:n,boundary:i,rootBoundary:a,padding:o,flipVariations:f}):n)}),[]);r=t.rects.reference,n=t.rects.popper;var u=new Map;p=!0;for(var d=c[0],l=0;l<c.length;l++){var m=c[l],h=b(m),v="start"===m.split("-")[1],g=0<=["top","bottom"].indexOf(h),y=g?"width":"height",x=H(t,{placement:m,boundary:i,rootBoundary:a,altBoundary:s,padding:o});if(v=g?v?"right":"left":v?"bottom":"top",r[y]>n[y]&&(v=j(v)),y=j(v),(h=[0>=x[h],0>=x[v],0>=x[y]]).every((function(e){return e}))){d=m,p=!1;break}u.set(m,h)}if(p)for(s=function(e){var t=c.find((function(t){if(t=u.get(t))return t.slice(0,e).every((function(e){return e}))}));if(t)return d=t,"break"},r=f?3:1;0<r&&"break"!==s(r);r--);t.placement!==d&&(t.modifiersData[e]._skip=!0,t.placement=d,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options;e=e.name;var r=n.mainAxis,o=void 0===r||r;r=void 0!==(r=n.altAxis)&&r;var i=n.tether;i=void 0===i||i;var a=n.tetherOffset,s=void 0===a?0:a;n=H(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),a=b(t.placement);var f=t.placement.split("-")[1],p=!f,u=w(a);a="x"===u?"y":"x";var d=t.modifiersData.popperOffsets,l=t.rects.reference,m=t.rects.popper,v="function"==typeof s?s(Object.assign({},t.rects,{placement:t.placement})):s;if(s={x:0,y:0},o){var g="y"===u?"top":"left",y="y"===u?"bottom":"right",x="y"===u?"height":"width";o=d[u];var O=d[u]+n[g],M=d[u]-n[y],j=i?-m[x]/2:0,E="start"===f?l[x]:m[x];f="start"===f?-m[x]:-l[x],m=t.elements.arrow,m=i&&m?c(m):{width:0,height:0};var D=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};g=D[g],y=D[y],m=Math.max(0,Math.min(l[x],m[x])),E=p?l[x]/2-j-m-g-v:E-m-g-v,p=p?-l[x]/2+j+m+y+v:f+m+y+v,v=t.elements.arrow&&h(t.elements.arrow),l=t.modifiersData.offset?t.modifiersData.offset[t.placement][u]:0,v=d[u]+E-l-(v?"y"===u?v.clientTop||0:v.clientLeft||0:0),p=d[u]+p-l,i=Math.max(i?Math.min(O,v):O,Math.min(o,i?Math.max(M,p):M)),d[u]=i,s[u]=i-o}r&&(r=d[a],i=Math.max(r+n["x"===u?"top":"left"],Math.min(r,r-n["x"===u?"bottom":"right"])),t.modifiersData.popperOffsets[a]=i,s[a]=i-r),t.modifiersData[e]=s},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state;e=e.name;var r=n.elements.arrow,o=n.modifiersData.popperOffsets,i=b(n.placement),a=w(i);if(i=0<=["left","right"].indexOf(i)?"height":"width",r){var s=n.modifiersData[e+"#persistent"].padding;r=c(r);var f="y"===a?"top":"left",p="y"===a?"bottom":"right",u=n.rects.reference[i]+n.rects.reference[a]-o[a]-n.rects.popper[i];o=o[a]-n.rects.reference[a];var d=n.elements.arrow&&h(n.elements.arrow);u=(d=d?"y"===a?d.clientHeight||0:d.clientWidth||0:0)/2-r[i]/2+(u/2-o/2),i=Math.max(s[f],Math.min(u,d-r[i]-s[p])),n.modifiersData[e]=((t={})[a]=i,t.centerOffset=i-u,t)}},effect:function(e){var t=e.state,n=e.options;e=e.name;var r=n.element;r=void 0===r?"[data-popper-arrow]":r,n=void 0===(n=n.padding)?0:n,("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&D(t.elements.popper,r)&&(t.elements.arrow=r,t.modifiersData[e+"#persistent"]={padding:B("number"!=typeof n?n:W(n,q))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state;e=e.name;var n=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,i=H(t,{elementContext:"reference"}),a=H(t,{altBoundary:!0});n=T(i,n),r=T(a,r,o),o=R(n),a=R(r),t.modifiersData[e]={referenceClippingOffsets:n,popperEscapeOffsets:r,isReferenceHidden:o,hasPopperEscaped:a},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":o,"data-popper-escaped":a})}}],z=x({defaultModifiers:V});e.createPopper=z,e.defaultModifiers=V,e.detectOverflow=H,e.popperGenerator=x,Object.defineProperty(e,"__esModule",{value:!0})}));/*! jQuery v2.0.3 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/
(function(e,undefined){var t,n,r=typeof undefined,i=e.location,o=e.document,s=o.documentElement,a=e.jQuery,u=e.$,l={},c=[],p="2.0.3",f=c.concat,h=c.push,d=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,x=function(e,n){return new x.fn.init(e,n,t)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^-ms-/,N=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()},S=function(){o.removeEventListener("DOMContentLoaded",S,!1),e.removeEventListener("load",S,!1),x.ready()};x.fn=x.prototype={jquery:p,constructor:x,init:function(e,t,n){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),C.test(r[1])&&x.isPlainObject(t))for(r in t)x.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=o.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?n.ready(e):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2),"object"==typeof s||x.isFunction(s)||(s={}),u===a&&(s=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(x.isPlainObject(r)||(i=x.isArray(r)))?(i?(i=!1,o=n&&x.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},s[t]=x.extend(l,o,r)):r!==undefined&&(s[t]=r));return s},x.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=a),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(e===!0?--x.readyWait:x.isReady)||(x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(o,[x]),x.fn.trigger&&x(o).trigger("ready").off("ready")))},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&x.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;e=x.trim(e),e&&(1===e.indexOf("use strict")?(t=o.createElement("script"),t.text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(k,"ms-").replace(N,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,s=j(e);if(n){if(s){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(s){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":v.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;n>i;i++)e[r++]=t[i];else while(t[i]!==undefined)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[],o=0,s=e.length;for(n=!!n;s>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,s=j(e),a=[];if(s)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(a[a.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(a[a.length]=r);return f.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),x.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):undefined},access:function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===x.type(n)){i=!0;for(a in n)x.access(e,t,a,n[a],!0,o,s)}else if(r!==undefined&&(i=!0,x.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(x(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o},now:Date.now,swap:function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i}}),x.ready.promise=function(t){return n||(n=x.Deferred(),"complete"===o.readyState?setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",S,!1),e.addEventListener("load",S,!1))),n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function j(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}t=x(o),function(e,undefined){var t,n,r,i,o,s,a,u,l,c,p,f,h,d,g,m,y,v="sizzle"+-new Date,b=e.document,w=0,T=0,C=st(),k=st(),N=st(),E=!1,S=function(e,t){return e===t?(E=!0,0):0},j=typeof undefined,D=1<<31,A={}.hasOwnProperty,L=[],q=L.pop,H=L.push,O=L.push,F=L.slice,P=L.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",$=W.replace("w","w#"),B="\\["+M+"*("+W+")"+M+"*(?:([*^$|!~]?=)"+M+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+$+")|)|)"+M+"*\\]",I=":("+W+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+B.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=RegExp("^"+M+"*,"+M+"*"),X=RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=RegExp(M+"*[+~]"),Y=RegExp("="+M+"*([^\\]'\"]*)"+M+"*\\]","g"),V=RegExp(I),G=RegExp("^"+$+"$"),J={ID:RegExp("^#("+W+")"),CLASS:RegExp("^\\.("+W+")"),TAG:RegExp("^("+W.replace("w","w*")+")"),ATTR:RegExp("^"+B),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:RegExp("^(?:"+R+")$","i"),needsContext:RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/^(?:input|select|textarea|button)$/i,et=/^h\d$/i,tt=/'|\\/g,nt=RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{O.apply(L=F.call(b.childNodes),b.childNodes),L[b.childNodes.length].nodeType}catch(it){O={apply:L.length?function(e,t){H.apply(e,F.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function ot(e,t,r,i){var o,s,a,u,l,f,g,m,x,w;if((t?t.ownerDocument||t:b)!==p&&c(t),t=t||p,r=r||[],!e||"string"!=typeof e)return r;if(1!==(u=t.nodeType)&&9!==u)return[];if(h&&!i){if(o=K.exec(e))if(a=o[1]){if(9===u){if(s=t.getElementById(a),!s||!s.parentNode)return r;if(s.id===a)return r.push(s),r}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&y(t,s)&&s.id===a)return r.push(s),r}else{if(o[2])return O.apply(r,t.getElementsByTagName(e)),r;if((a=o[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&(!d||!d.test(e))){if(m=g=v,x=t,w=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=gt(e),(g=t.getAttribute("id"))?m=g.replace(tt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=f.length;while(l--)f[l]=m+mt(f[l]);x=U.test(e)&&t.parentNode||t,w=f.join(",")}if(w)try{return O.apply(r,x.querySelectorAll(w)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,r,i)}function st(){var e=[];function t(n,r){return e.push(n+=" ")>i.cacheLength&&delete t[e.shift()],t[n]=r}return t}function at(e){return e[v]=!0,e}function ut(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)i.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return at(function(t){return t=+t,at(function(n,r){var i,o=e([],n.length,t),s=o.length;while(s--)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},n=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:b,r=t.defaultView;return t!==p&&9===t.nodeType&&t.documentElement?(p=t,f=t.documentElement,h=!s(t),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){c()}),n.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ut(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ut(function(e){return f.appendChild(e).id=v,!t.getElementsByName||!t.getElementsByName(v).length}),n.getById?(i.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==j?t.getElementsByTagName(e):undefined}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==j&&h?t.getElementsByClassName(e):undefined},g=[],d=[],(n.qsa=Q.test(t.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ut(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(n.matchesSelector=Q.test(m=f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",I)}),d=d.length&&RegExp(d.join("|")),g=g.length&&RegExp(g.join("|")),y=Q.test(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},S=f.compareDocumentPosition?function(e,r){if(e===r)return E=!0,0;var i=r.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(r);return i?1&i||!n.sortDetached&&r.compareDocumentPosition(e)===i?e===t||y(b,e)?-1:r===t||y(b,r)?1:l?P.call(l,e)-P.call(l,r):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,o=e.parentNode,s=n.parentNode,a=[e],u=[n];if(e===n)return E=!0,0;if(!o||!s)return e===t?-1:n===t?1:o?-1:s?1:l?P.call(l,e)-P.call(l,n):0;if(o===s)return ct(e,n);r=e;while(r=r.parentNode)a.unshift(r);r=n;while(r=r.parentNode)u.unshift(r);while(a[i]===u[i])i++;return i?ct(a[i],u[i]):a[i]===b?-1:u[i]===b?1:0},t):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Y,"='$1']"),!(!n.matchesSelector||!h||g&&g.test(t)||d&&d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&c(e);var r=i.attrHandle[t.toLowerCase()],o=r&&A.call(i.attrHandle,t.toLowerCase())?r(e,t,!h):undefined;return o===undefined?n.attributes||!h?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,o=0;if(E=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(S),E){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=ot.selectors={cacheLength:50,createPseudo:at,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return J.CHILD.test(e[0])?null:(e[3]&&e[4]!==undefined?e[2]=e[4]:n&&V.test(n)&&(t=gt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,h,d,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),x=!u&&!a;if(m){if(o){while(g){p=t;while(p=p[g])if(a?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;d=g="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&x){c=m[v]||(m[v]={}),l=c[e]||[],h=l[0]===w&&l[1],f=l[0]===w&&l[2],p=h&&m.childNodes[h];while(p=++h&&p&&p[g]||(f=h=0)||d.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[w,h,f];break}}else if(x&&(l=(t[v]||(t[v]={}))[e])&&l[0]===w)f=l[1];else while(p=++h&&p&&p[g]||(f=h=0)||d.pop())if((a?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(x&&((p[v]||(p[v]={}))[e]=[w,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[v]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,o=r(e,t),s=o.length;while(s--)i=P.call(e,o[s]),e[i]=!(n[i]=o[s])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(z,"$1"));return r[v]?at(function(e,t,n,i){var o,s=r(e,null,i,[]),a=e.length;while(a--)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return G.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return et.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},i.pseudos.nth=i.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ft(t);function dt(){}dt.prototype=i.filters=i.pseudos,i.setFilters=new dt;function gt(e,t){var n,r,o,s,a,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);a=e,u=[],l=i.preFilter;while(a){(!n||(r=_.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=X.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(z," ")}),a=a.slice(n.length));for(s in i.filter)!(r=J[s].exec(a))||l[s]&&!(r=l[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ot.error(e):k(e,u).slice(0)}function mt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var i=t.dir,o=n&&"parentNode"===i,s=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var u,l,c,p=w+" "+s;if(a){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,a))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[v]||(t[v]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,a)||r,l[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){var o,s=[],a=0,u=e.length,l=null!=t;for(;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function bt(e,t,n,r,i,o){return r&&!r[v]&&(r=bt(r)),i&&!i[v]&&(i=bt(i,o)),at(function(o,s,a,u){var l,c,p,f=[],h=[],d=s.length,g=o||Ct(t||"*",a.nodeType?[a]:a,[]),m=!e||!o&&t?g:xt(g,f,e,a,u),y=n?i||(o?e:d||r)?[]:s:m;if(n&&n(m,y,a,u),r){l=xt(y,h),r(l,[],a,u),c=l.length;while(c--)(p=l[c])&&(y[h[c]]=!(m[h[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?P.call(o,p):f[c])>-1&&(o[l]=!(s[l]=p))}}else y=xt(y===s?y.splice(d,y.length):y),i?i(null,s,y,u):O.apply(s,y)})}function wt(e){var t,n,r,o=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,c=yt(function(e){return e===t},a,!0),p=yt(function(e){return P.call(t,e)>-1},a,!0),f=[function(e,n,r){return!s&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>l;l++)if(n=i.relative[e[l].type])f=[yt(vt(f),n)];else{if(n=i.filter[e[l].type].apply(null,e[l].matches),n[v]){for(r=++l;o>r;r++)if(i.relative[e[r].type])break;return bt(l>1&&vt(f),l>1&&mt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&wt(e.slice(l,r)),o>r&&wt(e=e.slice(r)),o>r&&mt(e))}f.push(n)}return vt(f)}function Tt(e,t){var n=0,o=t.length>0,s=e.length>0,a=function(a,l,c,f,h){var d,g,m,y=[],v=0,x="0",b=a&&[],T=null!=h,C=u,k=a||s&&i.find.TAG("*",h&&l.parentNode||l),N=w+=null==C?1:Math.random()||.1;for(T&&(u=l!==p&&l,r=n);null!=(d=k[x]);x++){if(s&&d){g=0;while(m=e[g++])if(m(d,l,c)){f.push(d);break}T&&(w=N,r=++n)}o&&((d=!m&&d)&&v--,a&&b.push(d))}if(v+=x,o&&x!==v){g=0;while(m=t[g++])m(b,y,l,c);if(a){if(v>0)while(x--)b[x]||y[x]||(y[x]=q.call(f));y=xt(y)}O.apply(f,y),T&&!a&&y.length>0&&v+t.length>1&&ot.uniqueSort(f)}return T&&(w=N,u=C),b};return o?at(a):a}a=ot.compile=function(e,t){var n,r=[],i=[],o=N[e+" "];if(!o){t||(t=gt(e)),n=t.length;while(n--)o=wt(t[n]),o[v]?r.push(o):i.push(o);o=N(e,Tt(i,r))}return o};function Ct(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function kt(e,t,r,o){var s,u,l,c,p,f=gt(e);if(!o&&1===f.length){if(u=f[0]=f[0].slice(0),u.length>2&&"ID"===(l=u[0]).type&&n.getById&&9===t.nodeType&&h&&i.relative[u[1].type]){if(t=(i.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return r;e=e.slice(u.shift().value.length)}s=J.needsContext.test(e)?0:u.length;while(s--){if(l=u[s],i.relative[c=l.type])break;if((p=i.find[c])&&(o=p(l.matches[0].replace(nt,rt),U.test(u[0].type)&&t.parentNode||t))){if(u.splice(s,1),e=o.length&&mt(u),!e)return O.apply(r,o),r;break}}}return a(e,f)(o,t,!h,r,U.test(e)),r}n.sortStable=v.split("").sort(S).join("")===v,n.detectDuplicates=E,c(),n.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?undefined:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?undefined:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||lt(R,function(e,t,n){var r;return n?undefined:(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),x.find=ot,x.expr=ot.selectors,x.expr[":"]=x.expr.pseudos,x.unique=ot.uniqueSort,x.text=ot.getText,x.isXMLDoc=ot.isXML,x.contains=ot.contains}(e);var D={};function A(e){var t=D[e]={};return x.each(e.match(w)||[],function(e,n){t[n]=!0}),t}x.Callbacks=function(e){e="string"==typeof e?D[e]||A(e):x.extend({},e);var t,n,r,i,o,s,a=[],u=!e.once&&[],l=function(p){for(t=e.memory&&p,n=!0,s=i||0,i=0,o=a.length,r=!0;a&&o>s;s++)if(a[s].apply(p[0],p[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,a&&(u?u.length&&l(u.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var n=a.length;(function s(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&s(n)})})(arguments),r?o=a.length:t&&(i=n,l(t))}return this},remove:function(){return a&&x.each(arguments,function(e,t){var n;while((n=x.inArray(t,a,n))>-1)a.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?x.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=u=t=undefined,this},disabled:function(){return!a},lock:function(){return u=undefined,t||c.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!a||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var s=o[0],a=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),s=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},a,u,l;if(r>1)for(a=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(s(t,l,n)).fail(o.reject).progress(s(t,u,a)):--i;return i||o.resolveWith(l,n),o.promise()}}),x.support=function(t){var n=o.createElement("input"),r=o.createDocumentFragment(),i=o.createElement("div"),s=o.createElement("select"),a=s.appendChild(o.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=a.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!a.disabled,n=o.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,x(function(){var n,r,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=o.getElementsByTagName("body")[0];a&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",x.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(o.createElement("div")),r.style.cssText=i.style.cssText=s,r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var L,q,H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,O=/([A-Z])/g;function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=x.expando+Math.random()}F.uid=1,F.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=F.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,x.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(x.isEmptyObject(o))x.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&"string"==typeof t&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,x.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(t===undefined)this.cache[o]={};else{x.isArray(t)?r=t.concat(t.map(x.camelCase)):(i=x.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(w)||[])),n=r.length;while(n--)delete s[r[n]]}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},L=new F,q=new F,x.extend({acceptData:F.accepts,hasData:function(e){return L.hasData(e)||q.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return q.access(e,t,n)},_removeData:function(e,t){q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i=this[0],o=0,s=null;if(e===undefined){if(this.length&&(s=L.get(i),1===i.nodeType&&!q.get(i,"hasDataAttrs"))){for(n=i.attributes;n.length>o;o++)r=n[o].name,0===r.indexOf("data-")&&(r=x.camelCase(r.slice(5)),P(i,r,s[r]));q.set(i,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){L.set(this,e)}):x.access(this,function(t){var n,r=x.camelCase(e);if(i&&t===undefined){if(n=L.get(i,e),n!==undefined)return n;if(n=L.get(i,r),n!==undefined)return n;if(n=P(i,r,undefined),n!==undefined)return n}else this.each(function(){var n=L.get(this,r);L.set(this,r,t),-1!==e.indexOf("-")&&n!==undefined&&L.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){L.remove(this,e)})}});function P(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(O,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:H.test(n)?JSON.parse(n):n}catch(i){}L.set(e,t,n)}else n=undefined;return n}x.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=q.get(e,t),n&&(!r||x.isArray(n)?r=q.access(e,t,x.makeArray(n)):r.push(n)),r||[]):undefined},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),s=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q.get(e,n)||q.access(e,n,{empty:x.Callbacks("once memory").add(function(){q.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?x.queue(this[0],e):t===undefined?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=undefined),e=e||"fx";while(s--)n=q.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var R,M,W=/[\t\r\n\f]/g,$=/\r/g,B=/^(?:input|select|textarea|button)$/i;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})},addClass:function(e){var t,n,r,i,o,s=0,a=this.length,u="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,i=0,o=x(this),s=e.match(w)||[];while(t=s[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else(n===r||"boolean"===n)&&(this.className&&q.set(this,"__className__",this.className),this.className=this.className||e===!1?"":q.get(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(W," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=x.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,x(this).val()):e,null==i?i="":"number"==typeof i?i+="":x.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,i,"value")!==undefined||(this.value=i))});if(i)return t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}}),x.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;for(;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=x.makeArray(t),s=i.length;while(s--)r=i[s],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,t,n){var i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===r?x.prop(e,t,n):(1===s&&x.isXMLDoc(e)||(t=t.toLowerCase(),i=x.attrHooks[t]||(x.expr.match.bool.test(t)?M:R)),n===undefined?i&&"get"in i&&null!==(o=i.get(e,t))?o:(o=x.find.attr(e,t),null==o?undefined:o):null!==n?i&&"set"in i&&(o=i.set(e,n,t))!==undefined?o:(e.setAttribute(t,n+""),n):(x.removeAttr(e,t),undefined))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!x.isXMLDoc(e),o&&(t=x.propFix[t]||t,i=x.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||B.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),M={set:function(e,t,n){return t===!1?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=x.expr.attrHandle[t]||x.find.attr;x.expr.attrHandle[t]=function(e,t,r){var i=x.expr.attrHandle[t],o=r?undefined:(x.expr.attrHandle[t]=undefined)!=n(e,t,r)?t.toLowerCase():null;return x.expr.attrHandle[t]=i,o}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){return x.isArray(t)?e.checked=x.inArray(x(e).val(),t)>=0:undefined}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var I=/^key/,z=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;function U(){return!0}function Y(){return!1}function V(){try{return o.activeElement}catch(e){}}x.event={global:{},add:function(e,t,n,i,o){var s,a,u,l,c,p,f,h,d,g,m,y=q.get(e);if(y){n.handler&&(s=n,n=s.handler,o=s.selector),n.guid||(n.guid=x.guid++),(l=y.events)||(l=y.events={}),(a=y.handle)||(a=y.handle=function(e){return typeof x===r||e&&x.event.triggered===e.type?undefined:x.event.dispatch.apply(a.elem,arguments)},a.elem=e),t=(t||"").match(w)||[""],c=t.length;while(c--)u=X.exec(t[c])||[],d=m=u[1],g=(u[2]||"").split(".").sort(),d&&(f=x.event.special[d]||{},d=(o?f.delegateType:f.bindType)||d,f=x.event.special[d]||{},p=x.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:g.join(".")},s),(h=l[d])||(h=l[d]=[],h.delegateCount=0,f.setup&&f.setup.call(e,i,g,a)!==!1||e.addEventListener&&e.addEventListener(d,a,!1)),f.add&&(f.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,p):h.push(p),x.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var o,s,a,u,l,c,p,f,h,d,g,m=q.hasData(e)&&q.get(e);if(m&&(u=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(a=X.exec(t[l])||[],h=g=a[1],d=(a[2]||"").split(".").sort(),h){p=x.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,f=u[h]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;while(o--)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,p.remove&&p.remove.call(e,c));s&&!f.length&&(p.teardown&&p.teardown.call(e,d,m.handle)!==!1||x.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)x.event.remove(e,h+t[l],n,r,!0);x.isEmptyObject(u)&&(delete m.handle,q.remove(e,"events"))}},trigger:function(t,n,r,i){var s,a,u,l,c,p,f,h=[r||o],d=y.call(t,"type")?t.type:t,g=y.call(t,"namespace")?t.namespace.split("."):[];if(a=u=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!_.test(d+x.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),c=0>d.indexOf(":")&&"on"+d,t=t[x.expando]?t:new x.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:x.makeArray(n,[t]),f=x.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!x.isWindow(r)){for(l=f.delegateType||d,_.test(l+d)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(r.ownerDocument||o)&&h.push(u.defaultView||u.parentWindow||e)}s=0;while((a=h[s++])&&!t.isPropagationStopped())t.type=s>1?l:f.bindType||d,p=(q.get(a,"events")||{})[t.type]&&q.get(a,"handle"),p&&p.apply(a,n),p=c&&a[c],p&&x.acceptData(a)&&p.apply&&p.apply(a,n)===!1&&t.preventDefault();return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!x.acceptData(r)||c&&x.isFunction(r[d])&&!x.isWindow(r)&&(u=r[c],u&&(r[c]=null),x.event.triggered=d,r[d](),x.event.triggered=undefined,u&&(r[c]=u)),t.result}},dispatch:function(e){e=x.event.fix(e);var t,n,r,i,o,s=[],a=d.call(arguments),u=(q.get(this,"events")||{})[e.type]||[],l=x.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),t=0;while((i=s[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",r[i]===undefined&&(r[i]=o.needsContext?x(i,this).index(u)>=0:x.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return t.length>a&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||o,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||s===undefined||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,s=e,a=this.fixHooks[i];a||(this.fixHooks[i]=a=z.test(i)?this.mouseHooks:I.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new x.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==V()&&this.focus?(this.focus(),!1):undefined},delegateType:"focusin"},blur:{trigger:function(){return this===V()&&this.blur?(this.blur(),!1):undefined},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):undefined},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},x.Event=function(e,t){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?U:Y):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,undefined):new x.Event(e,t)},x.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=U,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=U,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=U,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=undefined);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=undefined):null==r&&("string"==typeof t?(r=n,n=undefined):(r=n,n=t,t=undefined)),r===!1)r=Y;else if(!r)return this;return 1===i&&(o=r,r=function(e){return x().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=x.guid++)),this.each(function(){x.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=undefined),n===!1&&(n=Y),this.each(function(){x.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?x.event.trigger(e,t,n,!0):undefined}});var G=/^.[^:#\[\.,]*$/,J=/^(?:parents|prev(?:Until|All))/,Q=x.expr.match.needsContext,K={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){var e=0;for(;n>e;e++)if(x.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(et(this,e||[],!0))},filter:function(e){return this.pushStack(et(this,e||[],!1))},is:function(e){return!!et(this,"string"==typeof e&&Q.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,o=[],s=Q.test(e)||"string"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(x(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function Z(e,t){while((e=e[t])&&1!==e.nodeType);return e}x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return Z(e,"nextSibling")},prev:function(e){return Z(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(K[e]||x.unique(i),J.test(e)&&i.reverse()),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function et(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(G.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return g.call(t,e)>=0!==n})}var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,nt=/<([\w:]+)/,rt=/<|&#?\w+;/,it=/<(?:script|style|link)/i,ot=/^(?:checkbox|radio)$/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,ut=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===undefined?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(mt(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&dt(mt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(mt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!ct[(nt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(tt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(x.cleanData(mt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=f.apply([],e);var r,i,o,s,a,u,l=0,c=this.length,p=this,h=c-1,d=e[0],g=x.isFunction(d);if(g||!(1>=c||"string"!=typeof d||x.support.checkClone)&&st.test(d))return this.each(function(r){var i=p.eq(r);g&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=x.map(mt(r,"script"),ft),s=o.length;c>l;l++)a=r,l!==h&&(a=x.clone(a,!0,!0),s&&x.merge(o,mt(a,"script"))),t.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,x.map(o,ht),l=0;s>l;l++)a=o[l],at.test(a.type||"")&&!q.access(a,"globalEval")&&x.contains(u,a)&&(a.src?x._evalUrl(a.src):x.globalEval(a.textContent.replace(lt,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,r=[],i=x(e),o=i.length-1,s=0;for(;o>=s;s++)n=s===o?this:this.clone(!0),x(i[s])[t](n),h.apply(r,n.get());return this.pushStack(r)}}),x.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=x.contains(e.ownerDocument,e);if(!(x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(s=mt(a),o=mt(e),r=0,i=o.length;i>r;r++)yt(o[r],s[r]);if(t)if(n)for(o=o||mt(e),s=s||mt(a),r=0,i=o.length;i>r;r++)gt(o[r],s[r]);else gt(e,a);return s=mt(a,"script"),s.length>0&&dt(s,!u&&mt(e,"script")),a},buildFragment:function(e,t,n,r){var i,o,s,a,u,l,c=0,p=e.length,f=t.createDocumentFragment(),h=[];for(;p>c;c++)if(i=e[c],i||0===i)if("object"===x.type(i))x.merge(h,i.nodeType?[i]:i);else if(rt.test(i)){o=o||f.appendChild(t.createElement("div")),s=(nt.exec(i)||["",""])[1].toLowerCase(),a=ct[s]||ct._default,o.innerHTML=a[1]+i.replace(tt,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;x.merge(h,o.childNodes),o=f.firstChild,o.textContent=""}else h.push(t.createTextNode(i));f.textContent="",c=0;while(i=h[c++])if((!r||-1===x.inArray(i,r))&&(u=x.contains(i.ownerDocument,i),o=mt(f.appendChild(i),"script"),u&&dt(o),n)){l=0;while(i=o[l++])at.test(i.type||"")&&n.push(i)}return f},cleanData:function(e){var t,n,r,i,o,s,a=x.event.special,u=0;for(;(n=e[u])!==undefined;u++){if(F.accepts(n)&&(o=n[q.expando],o&&(t=q.cache[o]))){if(r=Object.keys(t.events||{}),r.length)for(s=0;(i=r[s])!==undefined;s++)a[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);q.cache[o]&&delete q.cache[o]}delete L.cache[n[L.expando]]}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});function pt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ht(e){var t=ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function dt(e,t){var n=e.length,r=0;for(;n>r;r++)q.set(e[r],"globalEval",!t||q.get(t[r],"globalEval"))}function gt(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(q.hasData(e)&&(o=q.access(e),s=q.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)x.event.add(t,i,l[i][n])}L.hasData(e)&&(a=L.access(e),u=x.extend({},a),L.set(t,u))}}function mt(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&x.nodeName(e,t)?x.merge([e],n):n}function yt(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ot.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var vt,xt,bt=/^(none|table(?!-c[ea]).+)/,wt=/^margin/,Tt=RegExp("^("+b+")(.*)$","i"),Ct=RegExp("^("+b+")(?!px)[a-z%]+$","i"),kt=RegExp("^([+-])=("+b+")","i"),Nt={BODY:"block"},Et={position:"absolute",visibility:"hidden",display:"block"},St={letterSpacing:0,fontWeight:400},jt=["Top","Right","Bottom","Left"],Dt=["Webkit","O","Moz","ms"];function At(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Dt.length;while(i--)if(t=Dt[i]+n,t in e)return t;return r}function Lt(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function qt(t){return e.getComputedStyle(t,null)}function Ht(e,t){var n,r,i,o=[],s=0,a=e.length;for(;a>s;s++)r=e[s],r.style&&(o[s]=q.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Lt(r)&&(o[s]=q.access(r,"olddisplay",Rt(r.nodeName)))):o[s]||(i=Lt(r),(n&&"none"!==n||!i)&&q.set(r,"olddisplay",i?n:x.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}x.fn.extend({css:function(e,t){return x.access(this,function(e,t,n){var r,i,o={},s=0;if(x.isArray(t)){for(r=qt(e),i=t.length;i>s;s++)o[t[s]]=x.css(e,t[s],!1,r);return o}return n!==undefined?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Lt(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=vt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=x.camelCase(t),u=e.style;return t=x.cssProps[a]||(x.cssProps[a]=At(u,a)),s=x.cssHooks[t]||x.cssHooks[a],n===undefined?s&&"get"in s&&(i=s.get(e,!1,r))!==undefined?i:u[t]:(o=typeof n,"string"===o&&(i=kt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(x.css(e,t)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||x.cssNumber[a]||(n+="px"),x.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&(n=s.set(e,n,r))===undefined||(u[t]=n)),undefined)}},css:function(e,t,n,r){var i,o,s,a=x.camelCase(t);return t=x.cssProps[a]||(x.cssProps[a]=At(e.style,a)),s=x.cssHooks[t]||x.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),i===undefined&&(i=vt(e,t,r)),"normal"===i&&t in St&&(i=St[t]),""===n||n?(o=parseFloat(i),n===!0||x.isNumeric(o)?o||0:i):i}}),vt=function(e,t,n){var r,i,o,s=n||qt(e),a=s?s.getPropertyValue(t)||s[t]:undefined,u=e.style;return s&&(""!==a||x.contains(e.ownerDocument,e)||(a=x.style(e,t)),Ct.test(a)&&wt.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=s.width,u.width=r,u.minWidth=i,u.maxWidth=o)),a};function Ot(e,t,n){var r=Tt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ft(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;for(;4>o;o+=2)"margin"===n&&(s+=x.css(e,n+jt[o],!0,i)),r?("content"===n&&(s-=x.css(e,"padding"+jt[o],!0,i)),"margin"!==n&&(s-=x.css(e,"border"+jt[o]+"Width",!0,i))):(s+=x.css(e,"padding"+jt[o],!0,i),"padding"!==n&&(s+=x.css(e,"border"+jt[o]+"Width",!0,i)));return s}function Pt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=qt(e),s=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=vt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ct.test(i))return i;r=s&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+Ft(e,t,n||(s?"border":"content"),r,o)+"px"}function Rt(e){var t=o,n=Nt[e];return n||(n=Mt(e,t),"none"!==n&&n||(xt=(xt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(xt[0].contentWindow||xt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=Mt(e,t),xt.detach()),Nt[e]=n),n}function Mt(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&bt.test(x.css(e,"display"))?x.swap(e,Et,function(){return Pt(e,t,r)}):Pt(e,t,r):undefined},set:function(e,n,r){var i=r&&qt(e);return Ot(e,n,r?Ft(e,t,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,t){return t?x.swap(e,{display:"inline-block"},vt,[e,"marginRight"]):undefined}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,t){x.cssHooks[t]={get:function(e,n){return n?(n=vt(e,t),Ct.test(n)?x(e).position()[t]+"px":n):undefined}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+jt[r]+t]=o[r]||o[r-2]||o[0];return i}},wt.test(e)||(x.cssHooks[e+t].set=Ot)});var Wt=/%20/g,$t=/\[\]$/,Bt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&zt.test(this.nodeName)&&!It.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),x.param=function(e,t){var n,r=[],i=function(e,t){t=x.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)_t(n,e[n],t,i);return r.join("&").replace(Wt,"+")};function _t(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||$t.test(e)?r(e,i):_t(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Xt,Ut,Yt=x.now(),Vt=/\?/,Gt=/#.*$/,Jt=/([?&])_=[^&]*/,Qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zt=/^(?:GET|HEAD)$/,en=/^\/\//,tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,nn=x.fn.load,rn={},on={},sn="*/".concat("*");try{Ut=i.href}catch(an){Ut=o.createElement("a"),Ut.href="",Ut=Ut.href}Xt=tn.exec(Ut.toLowerCase())||[];function un(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(x.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ln(e,t,n,r){var i={},o=e===on;function s(a){var u;return i[a]=!0,x.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):undefined:(t.dataTypes.unshift(l),s(l),!1)}),u}return s(t.dataTypes[0])||!i["*"]&&s("*")}function cn(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}x.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=e.slice(a),e=e.slice(0,a)),x.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),s.length>0&&x.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut,type:"GET",isLocal:Kt.test(Xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?cn(cn(e,x.ajaxSettings),t):cn(x.ajaxSettings,e)},ajaxPrefilter:un(rn),ajaxTransport:un(on),ajax:function(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,i,o,s,a,u,l,c=x.ajaxSetup({},t),p=c.context||c,f=c.context&&(p.nodeType||p.jquery)?x(p):x.event,h=x.Deferred(),d=x.Callbacks("once memory"),g=c.statusCode||{},m={},y={},v=0,b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!o){o={};while(t=Qt.exec(i))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return v||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return v||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)g[t]=[g[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),k(0,t),this}};if(h.promise(T).complete=d.add,T.success=T.done,T.error=T.fail,c.url=((e||c.url||Ut)+"").replace(Gt,"").replace(en,Xt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=x.trim(c.dataType||"*").toLowerCase().match(w)||[""],null==c.crossDomain&&(a=tn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===Xt[1]&&a[2]===Xt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(Xt[3]||("http:"===Xt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=x.param(c.data,c.traditional)),ln(rn,c,t,T),2===v)return T;u=c.global,u&&0===x.active++&&x.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Zt.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Vt.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Jt.test(r)?r.replace(Jt,"$1_="+Yt++):r+(Vt.test(r)?"&":"?")+"_="+Yt++)),c.ifModified&&(x.lastModified[r]&&T.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&T.setRequestHeader("If-None-Match",x.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",c.contentType),T.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+sn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)T.setRequestHeader(l,c.headers[l]);if(c.beforeSend&&(c.beforeSend.call(p,T,c)===!1||2===v))return T.abort();b="abort";for(l in{success:1,error:1,complete:1})T[l](c[l]);if(n=ln(on,c,t,T)){T.readyState=1,u&&f.trigger("ajaxSend",[T,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){T.abort("timeout")},c.timeout));try{v=1,n.send(m,k)}catch(C){if(!(2>v))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,t,o,a){var l,m,y,b,w,C=t;2!==v&&(v=2,s&&clearTimeout(s),n=undefined,i=a||"",T.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(b=pn(c,T,o)),b=fn(c,b,T,l),l?(c.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(x.lastModified[r]=w),w=T.getResponseHeader("etag"),w&&(x.etag[r]=w)),204===e||"HEAD"===c.type?C="nocontent":304===e?C="notmodified":(C=b.state,m=b.data,y=b.error,l=!y)):(y=C,(e||!C)&&(C="error",0>e&&(e=0))),T.status=e,T.statusText=(t||C)+"",l?h.resolveWith(p,[m,C,T]):h.rejectWith(p,[T,C,y]),T.statusCode(g),g=undefined,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[T,c,l?m:y]),d.fireWith(p,[T,C]),u&&(f.trigger("ajaxComplete",[T,c]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return x.isFunction(n)&&(i=i||r,r=n,n=undefined),x.ajax({url:e,type:t,dataType:i,data:n,success:r})}});function pn(e,t,n){var r,i,o,s,a=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):undefined}function fn(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=x("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}});var hn=[],dn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=hn.pop()||x.expando+"_"+Yt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=x.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(dn,"$1"+i):t.jsonp!==!1&&(t.url+=(Vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||x.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,hn.push(i)),s&&x.isFunction(o)&&o(s[0]),s=o=undefined}),"script"):undefined}),x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var gn=x.ajaxSettings.xhr(),mn={0:200,1223:204},yn=0,vn={};e.ActiveXObject&&x(e).on("unload",function(){for(var e in vn)vn[e]();vn=undefined}),x.support.cors=!!gn&&"withCredentials"in gn,x.support.ajax=gn=!!gn,x.ajaxTransport(function(e){var t;return x.support.cors||gn&&!e.crossDomain?{send:function(n,r){var i,o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete vn[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status||404,s.statusText):r(mn[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:undefined,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=vn[o=yn++]=t("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:undefined});var xn,bn,wn=/^(?:toggle|show|hide)$/,Tn=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),Cn=/queueHooks$/,kn=[An],Nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Tn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),s=(x.cssNumber[e]||"px"!==o&&+r)&&Tn.exec(x.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,x.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};function En(){return setTimeout(function(){xn=undefined}),xn=x.now()}function Sn(e,t,n){var r,i=(Nn[t]||[]).concat(Nn["*"]),o=0,s=i.length;for(;s>o;o++)if(r=i[o].call(n,t,e))return r}function jn(e,t,n){var r,i,o=0,s=kn.length,a=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=xn||En(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;for(;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:xn||En(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Dn(c,l.opts.specialEasing);s>o;o++)if(r=kn[o].call(l,e,c,l.opts))return r;return x.map(c,Sn,l),x.isFunction(l.opts.start)&&l.opts.start.call(e,l),x.fx.timer(x.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function Dn(e,t){var n,r,i,o,s;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=x.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}x.Animation=x.extend(jn,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Nn[n]=Nn[n]||[],Nn[n].unshift(t)},prefilter:function(e,t){t?kn.unshift(e):kn.push(e)}});function An(e,t,n){var r,i,o,s,a,u,l=this,c={},p=e.style,f=e.nodeType&&Lt(e),h=q.get(e,"fxshow");n.queue||(a=x._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,l.always(function(){l.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",l.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],wn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!h||h[r]===undefined)continue;f=!0}c[r]=h&&h[r]||x.style(e,r)}if(!x.isEmptyObject(c)){h?"hidden"in h&&(f=h.hidden):h=q.access(e,"fxshow",{}),o&&(h.hidden=!f),f?x(e).show():l.done(function(){x(e).hide()}),l.done(function(){var t;q.remove(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)s=Sn(f?h[r]:0,r,l),r in h||(h[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function Ln(e,t,n,r,i){return new Ln.prototype.init(e,t,n,r,i)}x.Tween=Ln,Ln.prototype={constructor:Ln,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ln.propHooks[this.prop];return e&&e.get?e.get(this):Ln.propHooks._default.get(this)},run:function(e){var t,n=Ln.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ln.propHooks._default.set(this),this}},Ln.prototype.init.prototype=Ln.prototype,Ln.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ln.propHooks.scrollTop=Ln.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(qn(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),s=function(){var t=jn(this,x.extend({},e),o);(i||q.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,s=q.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&Cn.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,s=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function qn(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=jt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}x.each({slideDown:qn("show"),slideUp:qn("hide"),slideToggle:qn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=Ln.prototype.init,x.fx.tick=function(){var e,t=x.timers,n=0;for(xn=x.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||x.fx.stop(),xn=undefined},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){bn||(bn=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(bn),bn=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;if(s)return t=s.documentElement,x.contains(t,i)?(typeof i.getBoundingClientRect!==r&&(o=i.getBoundingClientRect()),n=Hn(s),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},x.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=x.css(e,"position"),p=x(e),f={};"static"===c&&(e.style.position="relative"),a=p.offset(),o=x.css(e,"top"),u=x.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=p.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),x.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):p.css(f)}},x.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(r=e.offset()),r.top+=x.css(e[0],"borderTopWidth",!0),r.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;x.fn[t]=function(i){return x.access(this,function(t,i,o){var s=Hn(t);return o===undefined?s?s[n]:t[i]:(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o,undefined)},t,i,arguments.length,null)}});function Hn(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return x.access(this,function(t,n,r){var i;return x.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?x.css(t,n,s):x.style(t,n,r,s)},t,o?r:undefined,o,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=x)})(window);/*!
 * Bootstrap Colorpicker v2.5.2
 * https://itsjavi.com/bootstrap-colorpicker/
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):jQuery&&!jQuery.fn.colorpicker&&b(jQuery)}(this,function(a){"use strict";var b=function(c,d,e,f,g){this.fallbackValue=e?"string"==typeof e?this.parse(e):e:null,this.fallbackFormat=f?f:"rgba",this.hexNumberSignPrefix=g===!0,this.value=this.fallbackValue,this.origFormat=null,this.predefinedColors=d?d:{},this.colors=a.extend({},b.webColors,this.predefinedColors),c&&("undefined"!=typeof c.h?this.value=c:this.setColor(String(c))),this.value||(this.value={h:0,s:0,b:0,a:1})};b.webColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",transparent:"transparent"},b.prototype={constructor:b,colors:{},predefinedColors:{},getValue:function(){return this.value},setValue:function(a){this.value=a},_sanitizeNumber:function(a){return"number"==typeof a?a:isNaN(a)||null===a||""===a||void 0===a?1:""===a?0:"undefined"!=typeof a.toLowerCase?(a.match(/^\./)&&(a="0"+a),Math.ceil(100*parseFloat(a))/100):1},isTransparent:function(a){return!(!a||!("string"==typeof a||a instanceof String))&&(a=a.toLowerCase().trim(),"transparent"===a||a.match(/#?00000000/)||a.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(a){return 0===a.r&&0===a.g&&0===a.b&&0===a.a},setColor:function(a){if(a=a.toLowerCase().trim()){if(this.isTransparent(a))return this.value={h:0,s:0,b:0,a:0},!0;var b=this.parse(a);b?(this.value=this.value={h:b.h,s:b.s,b:b.b,a:b.a},this.origFormat||(this.origFormat=b.format)):this.fallbackValue&&(this.value=this.fallbackValue)}return!1},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setBrightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=Math.round(parseInt(100*(1-a),10)/100*100)/100},toRGB:function(a,b,c,d){0===arguments.length&&(a=this.value.h,b=this.value.s,c=this.value.b,d=this.value.a),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d}},toHex:function(a,b,c,d,e){arguments.length<=1&&(b=this.value.h,c=this.value.s,d=this.value.b,e=this.value.a);var f="#",g=this.toRGB(b,c,d,e);if(this.rgbaIsTransparent(g))return"transparent";a||(f=this.hexNumberSignPrefix?"#":"");var h=f+((1<<24)+(parseInt(g.r)<<16)+(parseInt(g.g)<<8)+parseInt(g.b)).toString(16).slice(1);return h},toHSL:function(a,b,c,d){0===arguments.length&&(a=this.value.h,b=this.value.s,c=this.value.b,d=this.value.a);var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&f<=1?f:2-f,f/=2,g>1&&(g=1),{h:isNaN(e)?0:e,s:isNaN(g)?0:g,l:isNaN(f)?0:f,a:isNaN(d)?0:d}},toAlias:function(a,b,c,d){var e,f=0===arguments.length?this.toHex(!0):this.toHex(!0,a,b,c,d),g="alias"===this.origFormat?f:this.toString(!1,this.origFormat);for(var h in this.colors)if(e=this.colors[h].toLowerCase().trim(),e===f||e===g)return h;return!1},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:this._sanitizeNumber(e),s:f,b:g,a:this._sanitizeNumber(d)}},HueToRGB:function(a,b,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,b,c,d){b<0&&(b=0);var e;e=c<=.5?c*(1+b):c+b-c*b;var f=2*c-e,g=a+1/3,h=a,i=a-1/3,j=Math.round(255*this.HueToRGB(f,e,g)),k=Math.round(255*this.HueToRGB(f,e,h)),l=Math.round(255*this.HueToRGB(f,e,i));return[j,k,l,this._sanitizeNumber(d)]},parse:function(b){if("string"!=typeof b)return this.fallbackValue;if(0===arguments.length)return!1;var c,d,e=this,f=!1,g="undefined"!=typeof this.colors[b];return g&&(b=this.colors[b].toLowerCase().trim()),a.each(this.stringParsers,function(a,h){var i=h.re.exec(b);return c=i&&h.parse.apply(e,[i]),!c||(f={},d=g?"alias":h.format?h.format:e.getValidFallbackFormat(),f=d.match(/hsla?/)?e.RGBtoHSB.apply(e,e.HSLtoRGB.apply(e,c)):e.RGBtoHSB.apply(e,c),f instanceof Object&&(f.format=d),!1)}),f},getValidFallbackFormat:function(){var a=["rgba","rgb","hex","hsla","hsl"];return this.origFormat&&a.indexOf(this.origFormat)!==-1?this.origFormat:this.fallbackFormat&&a.indexOf(this.fallbackFormat)!==-1?this.fallbackFormat:"rgba"},toString:function(a,c,d){c=c||this.origFormat||this.fallbackFormat,d=d||!1;var e=!1;switch(c){case"rgb":return e=this.toRGB(),this.rgbaIsTransparent(e)?"transparent":"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":return e=this.toRGB(),"rgba("+e.r+","+e.g+","+e.b+","+e.a+")";case"hsl":return e=this.toHSL(),"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)";case"hsla":return e=this.toHSL(),"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")";case"hex":return this.toHex(a);case"alias":return e=this.toAlias(),e===!1?this.toString(a,this.getValidFallbackFormat()):d&&!(e in b.webColors)&&e in this.predefinedColors?this.predefinedColors[e]:e;default:return e}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(a){return[a[1],a[2],a[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),1]}}],colorNameToHex:function(a){return"undefined"!=typeof this.colors[a.toLowerCase()]&&this.colors[a.toLowerCase()]}};var c={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",fallbackColor:!1,fallbackFormat:"hex",hexNumberSignPrefix:!0,sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},d=function(b,d){this.element=a(b).addClass("colorpicker-element"),this.options=a.extend(!0,{},c,this.element.data(),d),this.component=this.options.component,this.component=this.component!==!1&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1&&a(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=this.createColor(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.options.color!==!1&&(this.updateInput(this.color),this.updateData(this.color)),this.disabled=!1;var e=this.picker=a(this.options.template);if(this.options.customClass&&e.addClass(this.options.customClass),this.options.inline?e.addClass("colorpicker-inline colorpicker-visible"):e.addClass("colorpicker-hidden"),this.options.horizontal&&e.addClass("colorpicker-horizontal"),["rgba","hsla","alias"].indexOf(this.format)===-1&&this.options.format!==!1&&"transparent"!==this.getValue()||e.addClass("colorpicker-with-alpha"),"right"===this.options.align&&e.addClass("colorpicker-right"),this.options.inline===!0&&e.addClass("colorpicker-no-arrow"),this.options.colorSelectors){var f=this,g=f.picker.find(".colorpicker-selectors");g.length>0&&(a.each(this.options.colorSelectors,function(b,c){var d=a("<i />").addClass("colorpicker-selectors-color").css("background-color",c).data("class",b).data("alias",b);d.on("mousedown.colorpicker touchstart.colorpicker",function(b){b.preventDefault(),f.setValue("alias"===f.format?a(this).data("alias"):a(this).css("background-color"))}),g.append(d)}),g.show().addClass("colorpicker-visible"))}e.on("mousedown.colorpicker touchstart.colorpicker",a.proxy(function(a){a.target===a.currentTarget&&a.preventDefault()},this)),e.find(".colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha").on("mousedown.colorpicker touchstart.colorpicker",a.proxy(this.mousedown,this)),e.appendTo(this.container?this.container:a("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":a.proxy(this.keyup,this)}),this.input.on({"input.colorpicker":a.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":a.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":a.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":a.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":a.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":a.proxy(this.show,this),"focus.colorpicker":a.proxy(this.show,this)}),this.update(),a(a.proxy(function(){this.element.trigger("create")},this))};d.Color=b,d.prototype={constructor:d,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker","color").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var a=this.container&&this.container[0]!==window.document.body?"position":"offset",b=this.component||this.element,c=b[a]();"right"===this.options.align&&(c.left-=this.picker.outerWidth()-b.outerWidth()),this.picker.css({top:c.top+b.outerHeight(),left:c.left})},show:function(b){this.isDisabled()||(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),a(window).on("resize.colorpicker",a.proxy(this.reposition,this)),!b||this.hasInput()&&"color"!==this.input.attr("type")||b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault()),!this.component&&this.input||this.options.inline!==!1||a(window.document).on({"mousedown.colorpicker":a.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color}))},hide:function(b){return("undefined"==typeof b||!b.target||!(a(b.currentTarget).parents(".colorpicker").length>0||a(b.target).parents(".colorpicker").length>0))&&(this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),a(window).off("resize.colorpicker",this.reposition),a(window.document).off({"mousedown.colorpicker":this.hide}),this.update(),void this.element.trigger({type:"hidePicker",color:this.color}))},updateData:function(a){return a=a||this.color.toString(!1,this.format),this.element.data("color",a),a},updateInput:function(a){return a=a||this.color.toString(!1,this.format),this.input!==!1&&(this.input.prop("value",a),this.input.trigger("change")),a},updatePicker:function(a){"undefined"!=typeof a&&(this.color=this.createColor(a));var b=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,c=this.picker.find("i");if(0!==c.length)return this.options.horizontal===!1?(b=this.options.sliders,c.eq(1).css("top",b.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",b.alpha.maxTop*(1-this.color.value.a))):(b=this.options.slidersHorz,c.eq(1).css("left",b.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",b.alpha.maxLeft*(1-this.color.value.a))),c.eq(0).css({top:b.saturation.maxTop-this.color.value.b*b.saturation.maxTop,left:this.color.value.s*b.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(!0,this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex(!0)),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(!0,this.format)),a},updateComponent:function(a){var b;if(b="undefined"!=typeof a?this.createColor(a):this.color,this.component!==!1){var c=this.component.find("i").eq(0);c.length>0?c.css({backgroundColor:b.toString(!0,this.format)}):this.component.css({backgroundColor:b.toString(!0,this.format)})}return b.toString(!1,this.format)},update:function(a){var b;return this.getValue(!1)===!1&&a!==!0||(b=this.updateComponent(),this.updateInput(b),this.updateData(b),this.updatePicker()),b},setValue:function(a){this.color=this.createColor(a),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:a})},createColor:function(a){return new b(a?a:null,this.options.colorSelectors,this.options.fallbackColor?this.options.fallbackColor:this.color,this.options.fallbackFormat,this.options.hexNumberSignPrefix)},getValue:function(a){a="undefined"==typeof a?this.options.fallbackColor:a;var b;return b=this.hasInput()?this.input.val():this.element.data("color"),void 0!==b&&""!==b&&null!==b||(b=a),b},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.disabled},disable:function(){return this.hasInput()&&this.input.prop("disabled",!0),this.disabled=!0,this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0},enable:function(){return this.hasInput()&&this.input.prop("disabled",!1),this.disabled=!1,this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(b){!b.pageX&&!b.pageY&&b.originalEvent&&b.originalEvent.touches&&(b.pageX=b.originalEvent.touches[0].pageX,b.pageY=b.originalEvent.touches[0].pageY),b.stopPropagation(),b.preventDefault();var c=a(b.target),d=c.closest("div"),e=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!d.is(".colorpicker")){if(d.is(".colorpicker-saturation"))this.currentSlider=a.extend({},e.saturation);else if(d.is(".colorpicker-hue"))this.currentSlider=a.extend({},e.hue);else{if(!d.is(".colorpicker-alpha"))return!1;this.currentSlider=a.extend({},e.alpha)}var f=d.offset();this.currentSlider.guide=d.find("i")[0].style,this.currentSlider.left=b.pageX-f.left,this.currentSlider.top=b.pageY-f.top,this.mousePointer={left:b.pageX,top:b.pageY},a(window.document).on({"mousemove.colorpicker":a.proxy(this.mousemove,this),"touchmove.colorpicker":a.proxy(this.mousemove,this),"mouseup.colorpicker":a.proxy(this.mouseup,this),"touchend.colorpicker":a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){!a.pageX&&!a.pageY&&a.originalEvent&&a.originalEvent.touches&&(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((a.pageX||this.mousePointer.left)-this.mousePointer.left))),c=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((a.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=b+"px",this.currentSlider.guide.top=c+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,b/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,c/this.currentSlider.maxTop),this.options.format!==!1||"setAlpha"!==this.currentSlider.callTop&&"setAlpha"!==this.currentSlider.callLeft||(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(b){return b.stopPropagation(),b.preventDefault(),a(window.document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(a){this.color=this.createColor(this.input.val()),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker()),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})},keyup:function(a){38===a.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===a.keyCode&&(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},a.colorpicker=d,a.fn.colorpicker=function(b){var c=Array.prototype.slice.call(arguments,1),e=1===this.length,f=null,g=this.each(function(){var e=a(this),g=e.data("colorpicker"),h="object"==typeof b?b:{};g||(g=new d(this,h),e.data("colorpicker",g)),"string"==typeof b?a.isFunction(g[b])?f=g[b].apply(g,c):(c.length&&(g[b]=c[0]),f=g[b]):f=e});return e?f:g},a.fn.colorpicker.constructor=d});/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);/**
* @preserve Copyright 2012 Twitter, Inc.
* @license http://www.apache.org/licenses/LICENSE-2.0.txt
*/
var Hogan={};!function(t){function n(t,n,e){var i;return n&&"object"==typeof n&&(void 0!==n[t]?i=n[t]:e&&n.get&&"function"==typeof n.get&&(i=n.get(t))),i}function e(t,n,e,i,r,s){function a(){}function o(){}a.prototype=t,o.prototype=t.subs;var u,c=new a;c.subs=new o,c.subsText={},c.buf="",i=i||{},c.stackSubs=i,c.subsText=s;for(u in n)i[u]||(i[u]=n[u]);for(u in i)c.subs[u]=i[u];r=r||{},c.stackPartials=r;for(u in e)r[u]||(r[u]=e[u]);for(u in r)c.partials[u]=r[u];return c}function i(t){return String(null===t||void 0===t?"":t)}function r(t){return t=i(t),l.test(t)?t.replace(s,"&amp;").replace(a,"&lt;").replace(o,"&gt;").replace(u,"&#39;").replace(c,"&quot;"):t}t.Template=function(t,n,e,i){t=t||{},this.r=t.code||this.r,this.c=e,this.options=i||{},this.text=n||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(){return""},v:r,t:i,render:function(t,n,e){return this.ri([t],n||{},e)},ri:function(t,n,e){return this.r(t,n,e)},ep:function(t,n){var i=this.partials[t],r=n[i.name];if(i.instance&&i.base==r)return i.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[t].base=r,i.subs){n.stackText||(n.stackText={});for(key in i.subs)n.stackText[key]||(n.stackText[key]=void 0!==this.activeSub&&n.stackText[this.activeSub]?n.stackText[this.activeSub]:this.text);r=e(r,i.subs,i.partials,this.stackSubs,this.stackPartials,n.stackText)}return this.partials[t].instance=r,r},rp:function(t,n,e,i){var r=this.ep(t,e);return r?r.ri(n,e,i):""},rs:function(t,n,e){var i=t[t.length-1];if(!f(i))return void e(t,n,this);for(var r=0;r<i.length;r++)t.push(i[r]),e(t,n,this),t.pop()},s:function(t,n,e,i,r,s,a){var o;return f(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ms(t,n,e,i,r,s,a)),o=!!t,!i&&o&&n&&n.push("object"==typeof t?t:n[n.length-1]),o)},d:function(t,e,i,r){var s,a=t.split("."),o=this.f(a[0],e,i,r),u=this.options.modelGet,c=null;if("."===t&&f(e[e.length-2]))o=e[e.length-1];else for(var l=1;l<a.length;l++)s=n(a[l],o,u),void 0!==s?(c=o,o=s):o="";return r&&!o?!1:(r||"function"!=typeof o||(e.push(c),o=this.mv(o,e,i),e.pop()),o)},f:function(t,e,i,r){for(var s=!1,a=null,o=!1,u=this.options.modelGet,c=e.length-1;c>=0;c--)if(a=e[c],s=n(t,a,u),void 0!==s){o=!0;break}return o?(r||"function"!=typeof s||(s=this.mv(s,e,i)),s):r?!1:""},ls:function(t,n,e,r,s){var a=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(i(t.call(n,r)),n,e)),this.options.delimiters=a,!1},ct:function(t,n,e){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(n,e)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,n,e,i,r,s,a){var o,u=n[n.length-1],c=t.call(u);return"function"==typeof c?i?!0:(o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,u,e,o.substring(r,s),a)):c},mv:function(t,n,e){var r=n[n.length-1],s=t.call(r);return"function"==typeof s?this.ct(i(s.call(r)),r,e):s},sub:function(t,n,e,i){var r=this.subs[t];r&&(this.activeSub=t,r(n,e,this,i),this.activeSub=!1)}};var s=/&/g,a=/</g,o=/>/g,u=/\'/g,c=/\"/g,l=/[&<>\"\']/,f=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:Hogan),function(t){function n(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function e(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function i(t,n,e){if(n.charAt(e)!=t.charAt(0))return!1;for(var i=1,r=t.length;r>i;i++)if(n.charAt(e+i)!=t.charAt(i))return!1;return!0}function r(n,e,i,o){var u=[],c=null,l=null,f=null;for(l=i[i.length-1];n.length>0;){if(f=n.shift(),l&&"<"==l.tag&&!(f.tag in k))throw new Error("Illegal content in < super tag.");if(t.tags[f.tag]<=t.tags.$||s(f,o))i.push(f),f.nodes=r(n,f.tag,i,o);else{if("/"==f.tag){if(0===i.length)throw new Error("Closing tag without opener: /"+f.n);if(c=i.pop(),f.n!=c.n&&!a(f.n,c.n,o))throw new Error("Nesting error: "+c.n+" vs. "+f.n);return c.end=f.i,u}"\n"==f.tag&&(f.last=0==n.length||"\n"==n[0].tag)}u.push(f)}if(i.length>0)throw new Error("missing closing tag: "+i.pop().n);return u}function s(t,n){for(var e=0,i=n.length;i>e;e++)if(n[e].o==t.n)return t.tag="#",!0}function a(t,n,e){for(var i=0,r=e.length;r>i;i++)if(e[i].c==t&&e[i].o==n)return!0}function o(t){var n=[];for(var e in t)n.push('"'+c(e)+'": function(c,p,t,i) {'+t[e]+"}");return"{ "+n.join(",")+" }"}function u(t){var n=[];for(var e in t.partials)n.push('"'+c(e)+'":{name:"'+c(t.partials[e].name)+'", '+u(t.partials[e])+"}");return"partials: {"+n.join(",")+"}, subs: "+o(t.subs)}function c(t){return t.replace(m,"\\\\").replace(v,'\\"').replace(b,"\\n").replace(d,"\\r").replace(x,"\\u2028").replace(w,"\\u2029")}function l(t){return~t.indexOf(".")?"d":"f"}function f(t,n){var e="<"+(n.prefix||""),i=e+t.n+y++;return n.partials[i]={name:t.n,partials:{}},n.code+='t.b(t.rp("'+c(i)+'",c,p,"'+(t.indent||"")+'"));',i}function h(t,n){n.code+="t.b(t.t(t."+l(t.n)+'("'+c(t.n)+'",c,p,0)));'}function p(t){return"t.b("+t+");"}var g=/\S/,v=/\"/g,b=/\n/g,d=/\r/g,m=/\\/g,x=/\u2028/,w=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(r,s){function a(){m.length>0&&(x.push({tag:"_t",text:new String(m)}),m="")}function o(){for(var n=!0,e=y;e<x.length;e++)if(n=t.tags[x[e].tag]<t.tags._v||"_t"==x[e].tag&&null===x[e].text.match(g),!n)return!1;return n}function u(t,n){if(a(),t&&o())for(var e,i=y;i<x.length;i++)x[i].text&&((e=x[i+1])&&">"==e.tag&&(e.indent=x[i].text.toString()),x.splice(i,1));else n||x.push({tag:"\n"});w=!1,y=x.length}function c(t,n){var i="="+S,r=t.indexOf(i,n),s=e(t.substring(t.indexOf("=",n)+1,r)).split(" ");return T=s[0],S=s[s.length-1],r+i.length-1}var l=r.length,f=0,h=1,p=2,v=f,b=null,d=null,m="",x=[],w=!1,k=0,y=0,T="{{",S="}}";for(s&&(s=s.split(" "),T=s[0],S=s[1]),k=0;l>k;k++)v==f?i(T,r,k)?(--k,a(),v=h):"\n"==r.charAt(k)?u(w):m+=r.charAt(k):v==h?(k+=T.length-1,d=t.tags[r.charAt(k+1)],b=d?r.charAt(k+1):"_v","="==b?(k=c(r,k),v=f):(d&&k++,v=p),w=k):i(S,r,k)?(x.push({tag:b,n:e(m),otag:T,ctag:S,i:"/"==b?w-T.length:k+S.length}),m="",k+=S.length-1,v=f,"{"==b&&("}}"==S?k++:n(x[x.length-1]))):m+=r.charAt(k);return u(w,!0),x};var k={_t:!0,"\n":!0,$:!0,"/":!0};t.stringify=function(n){return"{code: function (c,p,i) { "+t.wrapMain(n.code)+" },"+u(n)+"}"};var y=0;t.generate=function(n,e,i){y=0;var r={code:"",subs:{},partials:{}};return t.walk(n,r),i.asString?this.stringify(r,e,i):this.makeTemplate(r,e,i)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,n,e){var i=this.makePartials(t);return i.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(i,n,this,e)},t.makePartials=function(t){var n,e={subs:{},partials:t.partials,name:t.name};for(n in e.partials)e.partials[n]=this.makePartials(e.partials[n]);for(n in t.subs)e.subs[n]=new Function("c","p","t","i",t.subs[n]);return e},t.codegen={"#":function(n,e){e.code+="if(t.s(t."+l(n.n)+'("'+c(n.n)+'",c,p,1),c,p,0,'+n.i+","+n.end+',"'+n.otag+" "+n.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(n.nodes,e),e.code+="});c.pop();}"},"^":function(n,e){e.code+="if(!t.s(t."+l(n.n)+'("'+c(n.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(n.nodes,e),e.code+="};"},">":f,"<":function(n,e){var i={partials:{},code:"",subs:{},inPartial:!0};t.walk(n.nodes,i);var r=e.partials[f(n,e)];r.subs=i.subs,r.partials=i.partials},$:function(n,e){var i={subs:{},code:"",partials:e.partials,prefix:n.n};t.walk(n.nodes,i),e.subs[n.n]=i.code,e.inPartial||(e.code+='t.sub("'+c(n.n)+'",c,p,i);')},"\n":function(t,n){n.code+=p('"\\n"'+(t.last?"":" + i"))},_v:function(t,n){n.code+="t.b(t.v(t."+l(t.n)+'("'+c(t.n)+'",c,p,0)));'},_t:function(t,n){n.code+=p('"'+c(t.text)+'"')},"{":h,"&":h},t.walk=function(n,e){for(var i,r=0,s=n.length;s>r;r++)i=t.codegen[n[r].tag],i&&i(n[r],e);return e},t.parse=function(t,n,e){return e=e||{},r(t,"",[],e.sectionTags||[])},t.cache={},t.cacheKey=function(t,n){return[t,!!n.asString,!!n.disableLambda,n.delimiters,!!n.modelGet].join("||")},t.compile=function(n,e){e=e||{};var i=t.cacheKey(n,e),r=this.cache[i];if(r){var s=r.partials;for(var a in s)delete s[a].instance;return r}return r=this.generate(this.parse(this.scan(n,e.delimiters),n,e),n,e),this.cache[i]=r}}("undefined"!=typeof exports?exports:Hogan);(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('jquery')):typeof define==='function'&&define.amd?define(['jquery'],factory):(factory(global.jQuery))}(this,(function($$1){'use strict';$$1=$$1&&$$1.hasOwnProperty('default')?$$1['default']:$$1;var Renderer=(function(){function Renderer(markup,children,options,callback){this.markup=markup;this.children=children;this.options=options;this.callback=callback}
Renderer.prototype.render=function($parent){var $node=$$1(this.markup);if(this.options&&this.options.contents){$node.html(this.options.contents)}
if(this.options&&this.options.className){$node.addClass(this.options.className)}
if(this.options&&this.options.data){$$1.each(this.options.data,function(k,v){$node.attr('data-'+k,v)})}
if(this.options&&this.options.click){$node.on('click',this.options.click)}
if(this.children){var $container_1=$node.find('.note-children-container');this.children.forEach(function(child){child.render($container_1.length?$container_1:$node)})}
if(this.callback){this.callback($node,this.options)}
if(this.options&&this.options.callback){this.options.callback($node)}
if($parent){$parent.append($node)}
return $node};return Renderer}());var renderer={create:function(markup,callback){return function(){var options=typeof arguments[1]==='object'?arguments[1]:arguments[0];var children=$$1.isArray(arguments[0])?arguments[0]:[];if(options&&options.children){children=options.children}
return new Renderer(markup,children,options,callback)}}};var editor=renderer.create('<div class="note-editor note-frame panel"/>');var toolbar=renderer.create('<div class="note-toolbar-wrapper panel-default"><div class="note-toolbar panel-heading"></div></div>');var editingArea=renderer.create('<div class="note-editing-area"/>');var codable=renderer.create('<textarea class="note-codable"/>');var editable=renderer.create('<div class="note-editable" contentEditable="true"/>');var statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','  </div>','</div>'].join(''));var airEditor=renderer.create('<div class="note-editor"/>');var airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>');var buttonGroup=renderer.create('<div class="note-btn-group btn-group">');var dropdown=renderer.create('<div class="dropdown-menu">',function($node,options){var markup=$$1.isArray(options.items)?options.items.map(function(item){var value=(typeof item==='string')?item:(item.value||'');var content=options.template?options.template(item):item;var option=(typeof item==='object')?item.option:undefined;var dataValue='data-value="'+value+'"';var dataOption=(option!==undefined)?' data-option="'+option+'"':'';return'<li><a href="#" '+(dataValue+dataOption)+'>'+content+'</a></li>'}).join(''):options.items;$node.html(markup)});var dropdownButtonContents=function(contents,options){return contents+' '+icon(options.icons.caret,'span')};var dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function($node,options){var markup=$$1.isArray(options.items)?options.items.map(function(item){var value=(typeof item==='string')?item:(item.value||'');var content=options.template?options.template(item):item;return'<li><a href="#" data-value="'+value+'">'+icon(options.checkClassName)+' '+content+'</a></li>'}).join(''):options.items;$node.html(markup)});var palette=renderer.create('<div class="note-color-palette"/>',function($node,options){var contents=[];for(var row=0,rowSize=options.colors.length;row<rowSize;row++){var eventName=options.eventName;var colors=options.colors[row];var buttons=[];for(var col=0,colSize=colors.length;col<colSize;col++){var color=colors[col];buttons.push(['<button type="button" class="note-color-btn"','style="background-color:',color,'" ','data-event="',eventName,'" ','data-value="',color,'" ','title="',color,'" ','data-toggle="button" tabindex="-1"></button>'].join(''))}
contents.push('<div class="note-color-row">'+buttons.join('')+'</div>')}
$node.html(contents.join(''));if(options.tooltip){$node.find('.note-color-btn').tooltip({container:options.container,trigger:'hover',placement:'bottom'})}});var dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function($node,options){if(options.fade){$node.addClass('fade')}
$node.html(['<div class="modal-dialog">','  <div class="modal-content">',(options.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+'      <h4 class="modal-title">'+options.title+'</h4>'+'    </div>':''),'    <div class="modal-body">'+options.body+'</div>',(options.footer?'    <div class="modal-footer">'+options.footer+'</div>':''),'  </div>','</div>'].join(''))});var popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>','</div>'].join(''),function($node,options){var direction=typeof options.direction!=='undefined'?options.direction:'bottom';$node.addClass(direction);if(options.hideArrow){$node.find('.arrow').hide()}});var checkbox=renderer.create('<div class="checkbox"></div>',function($node,options){$node.html([' <label'+(options.id?' for="'+options.id+'"':'')+'>',' <input type="checkbox"'+(options.id?' id="'+options.id+'"':''),(options.checked?' checked':'')+'/>',(options.text?options.text:''),'</label>'].join(''))});var icon=function(iconClassName,tagName){tagName=tagName||'i';return'<'+tagName+' class="'+iconClassName+'"/>'};var ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,dropdown:dropdown,dropdownButtonContents:dropdownButtonContents,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,checkbox:checkbox,icon:icon,options:{},button:function($node,options){return renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function($node,options){if(options&&options.tooltip){$node.attr({title:options.tooltip}).tooltip({container:options.container,trigger:'hover',placement:'bottom'})}})($node,options)},toggleBtn:function($btn,isEnable){$btn.toggleClass('disabled',!isEnable);$btn.attr('disabled',!isEnable)},toggleBtnActive:function($btn,isActive){$btn.toggleClass('active',isActive)},onDialogShown:function($dialog,handler){$dialog.one('shown.bs.modal',handler)},onDialogHidden:function($dialog,handler){$dialog.one('hidden.bs.modal',handler)},showDialog:function($dialog){$dialog.modal('show')},hideDialog:function($dialog){$dialog.modal('hide')},createLayout:function($note,options){var $editor=(options.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();$editor.insertAfter($note);return{note:$note,editor:$editor,toolbar:$editor.find('.note-toolbar'),editingArea:$editor.find('.note-editing-area'),editable:$editor.find('.note-editable'),codable:$editor.find('.note-codable'),statusbar:$editor.find('.note-statusbar')}},removeLayout:function($note,layoutInfo){$note.html(layoutInfo.editable.html());layoutInfo.editor.remove();$note.show()}};function eq(itemA){return function(itemB){return itemA===itemB}}
function eq2(itemA,itemB){return itemA===itemB}
function peq2(propName){return function(itemA,itemB){return itemA[propName]===itemB[propName]}}
function ok(){return!0}
function fail(){return!1}
function not(f){return function(){return!f.apply(f,arguments)}}
function and(fA,fB){return function(item){return fA(item)&&fB(item)}}
function self(a){return a}
function invoke(obj,method){return function(){return obj[method].apply(obj,arguments)}}
var idCounter=0;function uniqueId(prefix){var id=++idCounter+'';return prefix?prefix+id:id}
function rect2bnd(rect){var $document=$(document);return{top:rect.top+$document.scrollTop(),left:rect.left+$document.scrollLeft(),width:rect.right-rect.left,height:rect.bottom-rect.top}}
function invertObject(obj){var inverted={};for(var key in obj){if(obj.hasOwnProperty(key)){inverted[obj[key]]=key}}
return inverted}
function namespaceToCamel(namespace,prefix){prefix=prefix||'';return prefix+namespace.split('.').map(function(name){return name.substring(0,1).toUpperCase()+name.substring(1)}).join('')}
function debounce(func,wait,immediate){var _this=this;var timeout;return function(){var context=_this;var args=arguments;var later=function(){timeout=null;if(!immediate){func.apply(context,args)}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args)}}}
var func={eq:eq,eq2:eq2,peq2:peq2,ok:ok,fail:fail,self:self,not:not,and:and,invoke:invoke,uniqueId:uniqueId,rect2bnd:rect2bnd,invertObject:invertObject,namespaceToCamel:namespaceToCamel,debounce:debounce};function head(array){return array[0]}
function last(array){return array[array.length-1]}
function initial(array){return array.slice(0,array.length-1)}
function tail(array){return array.slice(1)}
function find(array,pred){for(var idx=0,len=array.length;idx<len;idx++){var item=array[idx];if(pred(item)){return item}}}
function all(array,pred){for(var idx=0,len=array.length;idx<len;idx++){if(!pred(array[idx])){return!1}}
return!0}
function indexOf(array,item){return $$1.inArray(item,array)}
function contains(array,item){return indexOf(array,item)!==-1}
function sum(array,fn){fn=fn||func.self;return array.reduce(function(memo,v){return memo+fn(v)},0)}
function from(collection){var result=[];var length=collection.length;var idx=-1;while(++idx<length){result[idx]=collection[idx]}
return result}
function isEmpty$1(array){return!array||!array.length}
function clusterBy(array,fn){if(!array.length){return[]}
var aTail=tail(array);return aTail.reduce(function(memo,v){var aLast=last(memo);if(fn(last(aLast),v)){aLast[aLast.length]=v}else{memo[memo.length]=[v]}
return memo},[[head(array)]])}
function compact(array){var aResult=[];for(var idx=0,len=array.length;idx<len;idx++){if(array[idx]){aResult.push(array[idx])}}
return aResult}
function unique(array){var results=[];for(var idx=0,len=array.length;idx<len;idx++){if(!contains(results,array[idx])){results.push(array[idx])}}
return results}
function next(array,item){var idx=indexOf(array,item);if(idx===-1){return null}
return array[idx+1]}
function prev(array,item){var idx=indexOf(array,item);if(idx===-1){return null}
return array[idx-1]}
var lists={head:head,last:last,initial:initial,tail:tail,prev:prev,next:next,find:find,contains:contains,all:all,sum:sum,from:from,isEmpty:isEmpty$1,clusterBy:clusterBy,compact:compact,unique:unique};var isSupportAmd=typeof define==='function'&&define.amd;function isFontInstalled(fontName){var testFontName=fontName==='Comic Sans MS'?'Courier New':'Comic Sans MS';var $tester=$$1('<div>').css({position:'absolute',left:'-9999px',top:'-9999px',fontSize:'200px'}).text('mmmmmmmmmwwwwwww').appendTo(document.body);var originalWidth=$tester.css('fontFamily',testFontName).width();var width=$tester.css('fontFamily',fontName+','+testFontName).width();$tester.remove();return originalWidth!==width}
var userAgent=navigator.userAgent;var isMSIE=/MSIE|Trident/i.test(userAgent);var browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1])}
matches=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1])}}
var isEdge=/Edge\/\d+/.test(userAgent);var hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd){if(typeof __webpack_require__==='function'){try{require.resolve('codemirror');hasCodeMirror=!0}catch(e){}}else if(typeof require!=='undefined'){if(typeof require.resolve!=='undefined'){try{require.resolve('codemirror');hasCodeMirror=!0}catch(e){}}else if(typeof require.specified!=='undefined'){hasCodeMirror=require.specified('codemirror')}}}
var isSupportTouch=(('ontouchstart' in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0));var inputEventName=(isMSIE||isEdge)?'DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted':'input';var env={isMac:navigator.appVersion.indexOf('Mac')>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($$1.fn.jquery),isSupportAmd:isSupportAmd,isSupportTouch:isSupportTouch,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange,inputEventName:inputEventName};var NBSP_CHAR=String.fromCharCode(160);var ZERO_WIDTH_NBSP_CHAR='\ufeff';function isEditable(node){return node&&$$1(node).hasClass('note-editable')}
function isControlSizing(node){return node&&$$1(node).hasClass('note-control-sizing')}
function makePredByNodeName(nodeName){nodeName=nodeName.toUpperCase();return function(node){return node&&node.nodeName.toUpperCase()===nodeName}}
function isText(node){return node&&node.nodeType===3}
function isElement(node){return node&&node.nodeType===1}
function isVoid(node){return node&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(node.nodeName.toUpperCase())}
function isPara(node){if(isEditable(node)){return!1}
return node&&/^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase())}
function isHeading(node){return node&&/^H[1-7]/.test(node.nodeName.toUpperCase())}
var isPre=makePredByNodeName('PRE');var isLi=makePredByNodeName('LI');function isPurePara(node){return isPara(node)&&!isLi(node)}
var isTable=makePredByNodeName('TABLE');var isData=makePredByNodeName('DATA');function isInline(node){return!isBodyContainer(node)&&!isList(node)&&!isHr(node)&&!isPara(node)&&!isTable(node)&&!isBlockquote(node)&&!isData(node)}
function isList(node){return node&&/^UL|^OL/.test(node.nodeName.toUpperCase())}
var isHr=makePredByNodeName('HR');function isCell(node){return node&&/^TD|^TH/.test(node.nodeName.toUpperCase())}
var isBlockquote=makePredByNodeName('BLOCKQUOTE');function isBodyContainer(node){return isCell(node)||isBlockquote(node)||isEditable(node)}
var isAnchor=makePredByNodeName('A');function isParaInline(node){return isInline(node)&&!!ancestor(node,isPara)}
function isBodyInline(node){return isInline(node)&&!ancestor(node,isPara)}
var isBody=makePredByNodeName('BODY');function isClosestSibling(nodeA,nodeB){return nodeA.nextSibling===nodeB||nodeA.previousSibling===nodeB}
function withClosestSiblings(node,pred){pred=pred||func.ok;var siblings=[];if(node.previousSibling&&pred(node.previousSibling)){siblings.push(node.previousSibling)}
siblings.push(node);if(node.nextSibling&&pred(node.nextSibling)){siblings.push(node.nextSibling)}
return siblings}
var blankHTML=env.isMSIE&&env.browserVersion<11?'&nbsp;':'<br>';function nodeLength(node){if(isText(node)){return node.nodeValue.length}
if(node){return node.childNodes.length}
return 0}
function isEmpty(node){var len=nodeLength(node);if(len===0){return!0}else if(!isText(node)&&len===1&&node.innerHTML===blankHTML){return!0}else if(lists.all(node.childNodes,isText)&&node.innerHTML===''){return!0}
return!1}
function paddingBlankHTML(node){if(!isVoid(node)&&!nodeLength(node)){node.innerHTML=blankHTML}}
function ancestor(node,pred){while(node){if(pred(node)){return node}
if(isEditable(node)){break}
node=node.parentNode}
return null}
function singleChildAncestor(node,pred){node=node.parentNode;while(node){if(nodeLength(node)!==1){break}
if(pred(node)){return node}
if(isEditable(node)){break}
node=node.parentNode}
return null}
function listAncestor(node,pred){pred=pred||func.fail;var ancestors=[];ancestor(node,function(el){if(!isEditable(el)){ancestors.push(el)}
return pred(el)});return ancestors}
function lastAncestor(node,pred){var ancestors=listAncestor(node);return lists.last(ancestors.filter(pred))}
function commonAncestor(nodeA,nodeB){var ancestors=listAncestor(nodeA);for(var n=nodeB;n;n=n.parentNode){if($$1.inArray(n,ancestors)>-1){return n}}
return null}
function listPrev(node,pred){pred=pred||func.fail;var nodes=[];while(node){if(pred(node)){break}
nodes.push(node);node=node.previousSibling}
return nodes}
function listNext(node,pred){pred=pred||func.fail;var nodes=[];while(node){if(pred(node)){break}
nodes.push(node);node=node.nextSibling}
return nodes}
function listDescendant(node,pred){var descendants=[];pred=pred||func.ok;(function fnWalk(current){if(node!==current&&pred(current)){descendants.push(current)}
for(var idx=0,len=current.childNodes.length;idx<len;idx++){fnWalk(current.childNodes[idx])}})(node);return descendants}
function wrap(node,wrapperName){var parent=node.parentNode;var wrapper=$$1('<'+wrapperName+'>')[0];parent.insertBefore(wrapper,node);wrapper.appendChild(node);return wrapper}
function insertAfter(node,preceding){var next=preceding.nextSibling;var parent=preceding.parentNode;if(next){parent.insertBefore(node,next)}else{parent.appendChild(node)}
return node}
function appendChildNodes(node,aChild){$$1.each(aChild,function(idx,child){node.appendChild(child)});return node}
function isLeftEdgePoint(point){return point.offset===0}
function isRightEdgePoint(point){return point.offset===nodeLength(point.node)}
function isEdgePoint(point){return isLeftEdgePoint(point)||isRightEdgePoint(point)}
function isLeftEdgeOf(node,ancestor){while(node&&node!==ancestor){if(position(node)!==0){return!1}
node=node.parentNode}
return!0}
function isRightEdgeOf(node,ancestor){if(!ancestor){return!1}
while(node&&node!==ancestor){if(position(node)!==nodeLength(node.parentNode)-1){return!1}
node=node.parentNode}
return!0}
function isLeftEdgePointOf(point,ancestor){return isLeftEdgePoint(point)&&isLeftEdgeOf(point.node,ancestor)}
function isRightEdgePointOf(point,ancestor){return isRightEdgePoint(point)&&isRightEdgeOf(point.node,ancestor)}
function position(node){var offset=0;while((node=node.previousSibling)){offset+=1}
return offset}
function hasChildren(node){return!!(node&&node.childNodes&&node.childNodes.length)}
function prevPoint(point,isSkipInnerOffset){var node;var offset;if(point.offset===0){if(isEditable(point.node)){return null}
node=point.node.parentNode;offset=position(point.node)}else if(hasChildren(point.node)){node=point.node.childNodes[point.offset-1];offset=nodeLength(node)}else{node=point.node;offset=isSkipInnerOffset?0:point.offset-1}
return{node:node,offset:offset}}
function nextPoint(point,isSkipInnerOffset){var node,offset;if(nodeLength(point.node)===point.offset){if(isEditable(point.node)){return null}
node=point.node.parentNode;offset=position(point.node)+1}else if(hasChildren(point.node)){node=point.node.childNodes[point.offset];offset=0}else{node=point.node;offset=isSkipInnerOffset?nodeLength(point.node):point.offset+1}
return{node:node,offset:offset}}
function isSamePoint(pointA,pointB){return pointA.node===pointB.node&&pointA.offset===pointB.offset}
function isVisiblePoint(point){if(isText(point.node)||!hasChildren(point.node)||isEmpty(point.node)){return!0}
var leftNode=point.node.childNodes[point.offset-1];var rightNode=point.node.childNodes[point.offset];if((!leftNode||isVoid(leftNode))&&(!rightNode||isVoid(rightNode))){return!0}
return!1}
function prevPointUntil(point,pred){while(point){if(pred(point)){return point}
point=prevPoint(point)}
return null}
function nextPointUntil(point,pred){while(point){if(pred(point)){return point}
point=nextPoint(point)}
return null}
function isCharPoint(point){if(!isText(point.node)){return!1}
var ch=point.node.nodeValue.charAt(point.offset-1);return ch&&(ch!==' '&&ch!==NBSP_CHAR)}
function walkPoint(startPoint,endPoint,handler,isSkipInnerOffset){var point=startPoint;while(point){handler(point);if(isSamePoint(point,endPoint)){break}
var isSkipOffset=isSkipInnerOffset&&startPoint.node!==point.node&&endPoint.node!==point.node;point=nextPoint(point,isSkipOffset)}}
function makeOffsetPath(ancestor,node){var ancestors=listAncestor(node,func.eq(ancestor));return ancestors.map(position).reverse()}
function fromOffsetPath(ancestor,offsets){var current=ancestor;for(var i=0,len=offsets.length;i<len;i++){if(current.childNodes.length<=offsets[i]){current=current.childNodes[current.childNodes.length-1]}else{current=current.childNodes[offsets[i]]}}
return current}
function splitNode(point,options){var isSkipPaddingBlankHTML=options&&options.isSkipPaddingBlankHTML;var isNotSplitEdgePoint=options&&options.isNotSplitEdgePoint;if(isEdgePoint(point)&&(isText(point.node)||isNotSplitEdgePoint)){if(isLeftEdgePoint(point)){return point.node}else if(isRightEdgePoint(point)){return point.node.nextSibling}}
if(isText(point.node)){return point.node.splitText(point.offset)}else{var childNode=point.node.childNodes[point.offset];var clone=insertAfter(point.node.cloneNode(!1),point.node);appendChildNodes(clone,listNext(childNode));if(!isSkipPaddingBlankHTML){paddingBlankHTML(point.node);paddingBlankHTML(clone)}
return clone}}
function splitTree(root,point,options){var ancestors=listAncestor(point.node,func.eq(root));if(!ancestors.length){return null}else if(ancestors.length===1){return splitNode(point,options)}
return ancestors.reduce(function(node,parent){if(node===point.node){node=splitNode(point,options)}
return splitNode({node:parent,offset:node?position(node):nodeLength(parent)},options)})}
function splitPoint(point,isInline){var pred=isInline?isPara:isBodyContainer;var ancestors=listAncestor(point.node,pred);var topAncestor=lists.last(ancestors)||point.node;var splitRoot,container;if(pred(topAncestor)){splitRoot=ancestors[ancestors.length-2];container=topAncestor}else{splitRoot=topAncestor;container=splitRoot.parentNode}
var pivot=splitRoot&&splitTree(splitRoot,point,{isSkipPaddingBlankHTML:isInline,isNotSplitEdgePoint:isInline});if(!pivot&&container===point.node){pivot=point.node.childNodes[point.offset]}
return{rightNode:pivot,container:container}}
function create(nodeName){return document.createElement(nodeName)}
function createText(text){return document.createTextNode(text)}
function remove(node,isRemoveChild){if(!node||!node.parentNode){return}
if(node.removeNode){return node.removeNode(isRemoveChild)}
var parent=node.parentNode;if(!isRemoveChild){var nodes=[];for(var i=0,len=node.childNodes.length;i<len;i++){nodes.push(node.childNodes[i])}
for(var i=0,len=nodes.length;i<len;i++){parent.insertBefore(nodes[i],node)}}
parent.removeChild(node)}
function removeWhile(node,pred){while(node){if(isEditable(node)||!pred(node)){break}
var parent=node.parentNode;remove(node);node=parent}}
function replace(node,nodeName){if(node.nodeName.toUpperCase()===nodeName.toUpperCase()){return node}
var newNode=create(nodeName);if(node.style.cssText){newNode.style.cssText=node.style.cssText}
appendChildNodes(newNode,lists.from(node.childNodes));insertAfter(newNode,node);remove(node);return newNode}
var isTextarea=makePredByNodeName('TEXTAREA');function value($node,stripLinebreaks){var val=isTextarea($node[0])?$node.val():$node.html();if(stripLinebreaks){return val.replace(/[\n\r]/g,'')}
return val}
function html($node,isNewlineOnBlock){var markup=value($node);if(isNewlineOnBlock){var regexTag=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;markup=markup.replace(regexTag,function(match,endSlash,name){name=name.toUpperCase();var isEndOfInlineContainer=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name)&&!!endSlash;var isBlockNode=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name);return match+((isEndOfInlineContainer||isBlockNode)?'\n':'')});markup=$$1.trim(markup)}
return markup}
function posFromPlaceholder(placeholder){var $placeholder=$$1(placeholder);var pos=$placeholder.offset();var height=$placeholder.outerHeight(!0);return{left:pos.left,top:pos.top+height}}
function attachEvents($node,events){Object.keys(events).forEach(function(key){$node.on(key,events[key])})}
function detachEvents($node,events){Object.keys(events).forEach(function(key){$node.off(key,events[key])})}
function isCustomStyleTag(node){return node&&!isText(node)&&lists.contains(node.classList,'note-styletag')}
var dom={NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:blankHTML,emptyPara:"<p>"+blankHTML+"</p>",makePredByNodeName:makePredByNodeName,isEditable:isEditable,isControlSizing:isControlSizing,isText:isText,isElement:isElement,isVoid:isVoid,isPara:isPara,isPurePara:isPurePara,isHeading:isHeading,isInline:isInline,isBlock:func.not(isInline),isBodyInline:isBodyInline,isBody:isBody,isParaInline:isParaInline,isPre:isPre,isList:isList,isTable:isTable,isData:isData,isCell:isCell,isBlockquote:isBlockquote,isBodyContainer:isBodyContainer,isAnchor:isAnchor,isDiv:makePredByNodeName('DIV'),isLi:isLi,isBR:makePredByNodeName('BR'),isSpan:makePredByNodeName('SPAN'),isB:makePredByNodeName('B'),isU:makePredByNodeName('U'),isS:makePredByNodeName('S'),isI:makePredByNodeName('I'),isImg:makePredByNodeName('IMG'),isTextarea:isTextarea,isEmpty:isEmpty,isEmptyAnchor:func.and(isAnchor,isEmpty),isClosestSibling:isClosestSibling,withClosestSiblings:withClosestSiblings,nodeLength:nodeLength,isLeftEdgePoint:isLeftEdgePoint,isRightEdgePoint:isRightEdgePoint,isEdgePoint:isEdgePoint,isLeftEdgeOf:isLeftEdgeOf,isRightEdgeOf:isRightEdgeOf,isLeftEdgePointOf:isLeftEdgePointOf,isRightEdgePointOf:isRightEdgePointOf,prevPoint:prevPoint,nextPoint:nextPoint,isSamePoint:isSamePoint,isVisiblePoint:isVisiblePoint,prevPointUntil:prevPointUntil,nextPointUntil:nextPointUntil,isCharPoint:isCharPoint,walkPoint:walkPoint,ancestor:ancestor,singleChildAncestor:singleChildAncestor,listAncestor:listAncestor,lastAncestor:lastAncestor,listNext:listNext,listPrev:listPrev,listDescendant:listDescendant,commonAncestor:commonAncestor,wrap:wrap,insertAfter:insertAfter,appendChildNodes:appendChildNodes,position:position,hasChildren:hasChildren,makeOffsetPath:makeOffsetPath,fromOffsetPath:fromOffsetPath,splitTree:splitTree,splitPoint:splitPoint,create:create,createText:createText,remove:remove,removeWhile:removeWhile,replace:replace,html:html,value:value,posFromPlaceholder:posFromPlaceholder,attachEvents:attachEvents,detachEvents:detachEvents,isCustomStyleTag:isCustomStyleTag};$$1.summernote=$$1.summernote||{lang:{}};$$1.extend($$1.summernote.lang,{'en-US':{font:{bold:'Bold',italic:'Italic',underline:'Underline',clear:'Remove Font Style',height:'Line Height',name:'Font Family',strikethrough:'Strikethrough',subscript:'Subscript',superscript:'Superscript',size:'Font Size'},image:{image:'Picture',insert:'Insert Image',resizeFull:'Resize Full',resizeHalf:'Resize Half',resizeQuarter:'Resize Quarter',floatLeft:'Float Left',floatRight:'Float Right',floatNone:'Float None',shapeRounded:'Shape: Rounded',shapeCircle:'Shape: Circle',shapeThumbnail:'Shape: Thumbnail',shapeNone:'Shape: None',dragImageHere:'Drag image or text here',dropImage:'Drop image or Text',selectFromFiles:'Select from files',maximumFileSize:'Maximum file size',maximumFileSizeError:'Maximum file size exceeded.',url:'Image URL',remove:'Remove Image',original:'Original'},video:{video:'Video',videoLink:'Video Link',insert:'Insert Video',url:'Video URL',providers:'(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)'},link:{link:'Link',insert:'Insert Link',unlink:'Unlink',edit:'Edit',textToDisplay:'Text to display',url:'To what URL should this link go?',openInNewWindow:'Open in new window'},table:{table:'Table',addRowAbove:'Add row above',addRowBelow:'Add row below',addColLeft:'Add column left',addColRight:'Add column right',delRow:'Delete row',delCol:'Delete column',delTable:'Delete table'},hr:{insert:'Insert Horizontal Rule'},style:{style:'Style',p:'Normal',blockquote:'Quote',pre:'Code',h1:'Header 1',h2:'Header 2',h3:'Header 3',h4:'Header 4',h5:'Header 5',h6:'Header 6'},lists:{unordered:'Unordered list',ordered:'Ordered list'},options:{help:'Help',fullscreen:'Full Screen',codeview:'Code View'},paragraph:{paragraph:'Paragraph',outdent:'Outdent',indent:'Indent',left:'Align left',center:'Align center',right:'Align right',justify:'Justify full'},color:{recent:'Recent Color',more:'More Color',background:'Background Color',foreground:'Foreground Color',transparent:'Transparent',setTransparent:'Set transparent',reset:'Reset',resetToDefault:'Reset to default'},shortcut:{shortcuts:'Keyboard shortcuts',close:'Close',textFormatting:'Text formatting',action:'Action',paragraphFormatting:'Paragraph formatting',documentStyle:'Document Style',extraKeys:'Extra keys'},help:{'insertParagraph':'Insert Paragraph','undo':'Undoes the last command','redo':'Redoes the last command','tab':'Tab','untab':'Untab','bold':'Set a bold style','italic':'Set a italic style','underline':'Set a underline style','strikethrough':'Set a strikethrough style','removeFormat':'Clean a style','justifyLeft':'Set left align','justifyCenter':'Set center align','justifyRight':'Set right align','justifyFull':'Set full align','insertUnorderedList':'Toggle unordered list','insertOrderedList':'Toggle ordered list','outdent':'Outdent on current paragraph','indent':'Indent on current paragraph','formatPara':'Change current block\'s format as a paragraph(P tag)','formatH1':'Change current block\'s format as H1','formatH2':'Change current block\'s format as H2','formatH3':'Change current block\'s format as H3','formatH4':'Change current block\'s format as H4','formatH5':'Change current block\'s format as H5','formatH6':'Change current block\'s format as H6','insertHorizontalRule':'Insert horizontal rule','linkDialog.show':'Show Link Dialog'},history:{undo:'Undo',redo:'Redo'},specialChar:{specialChar:'SPECIAL CHARACTERS',select:'Select Special characters'}}});var KEY_MAP={'BACKSPACE':8,'TAB':9,'ENTER':13,'SPACE':32,'DELETE':46,'LEFT':37,'UP':38,'RIGHT':39,'DOWN':40,'NUM0':48,'NUM1':49,'NUM2':50,'NUM3':51,'NUM4':52,'NUM5':53,'NUM6':54,'NUM7':55,'NUM8':56,'B':66,'E':69,'I':73,'J':74,'K':75,'L':76,'R':82,'S':83,'U':85,'V':86,'Y':89,'Z':90,'SLASH':191,'LEFTBRACKET':219,'BACKSLASH':220,'RIGHTBRACKET':221};var key={isEdit:function(keyCode){return lists.contains([KEY_MAP.BACKSPACE,KEY_MAP.TAB,KEY_MAP.ENTER,KEY_MAP.SPACE,KEY_MAP.DELETE],keyCode)},isMove:function(keyCode){return lists.contains([KEY_MAP.LEFT,KEY_MAP.UP,KEY_MAP.RIGHT,KEY_MAP.DOWN],keyCode)},nameFromCode:func.invertObject(KEY_MAP),code:KEY_MAP};function textRangeToPoint(textRange,isStart){var container=textRange.parentElement();var offset;var tester=document.body.createTextRange();var prevContainer;var childNodes=lists.from(container.childNodes);for(offset=0;offset<childNodes.length;offset++){if(dom.isText(childNodes[offset])){continue}
tester.moveToElementText(childNodes[offset]);if(tester.compareEndPoints('StartToStart',textRange)>=0){break}
prevContainer=childNodes[offset]}
if(offset!==0&&dom.isText(childNodes[offset-1])){var textRangeStart=document.body.createTextRange();var curTextNode=null;textRangeStart.moveToElementText(prevContainer||container);textRangeStart.collapse(!prevContainer);curTextNode=prevContainer?prevContainer.nextSibling:container.firstChild;var pointTester=textRange.duplicate();pointTester.setEndPoint('StartToStart',textRangeStart);var textCount=pointTester.text.replace(/[\r\n]/g,'').length;while(textCount>curTextNode.nodeValue.length&&curTextNode.nextSibling){textCount-=curTextNode.nodeValue.length;curTextNode=curTextNode.nextSibling}
var dummy=curTextNode.nodeValue;if(isStart&&curTextNode.nextSibling&&dom.isText(curTextNode.nextSibling)&&textCount===curTextNode.nodeValue.length){textCount-=curTextNode.nodeValue.length;curTextNode=curTextNode.nextSibling}
container=curTextNode;offset=textCount}
return{cont:container,offset:offset}}
function pointToTextRange(point){var textRangeInfo=function(container,offset){var node,isCollapseToStart;if(dom.isText(container)){var prevTextNodes=dom.listPrev(container,func.not(dom.isText));var prevContainer=lists.last(prevTextNodes).previousSibling;node=prevContainer||container.parentNode;offset+=lists.sum(lists.tail(prevTextNodes),dom.nodeLength);isCollapseToStart=!prevContainer}else{node=container.childNodes[offset]||container;if(dom.isText(node)){return textRangeInfo(node,0)}
offset=0;isCollapseToStart=!1}
return{node:node,collapseToStart:isCollapseToStart,offset:offset}};var textRange=document.body.createTextRange();var info=textRangeInfo(point.node,point.offset);textRange.moveToElementText(info.node);textRange.collapse(info.collapseToStart);textRange.moveStart('character',info.offset);return textRange}
var WrappedRange=(function(){function WrappedRange(sc,so,ec,eo){this.sc=sc;this.so=so;this.ec=ec;this.eo=eo;this.isOnEditable=this.makeIsOn(dom.isEditable);this.isOnList=this.makeIsOn(dom.isList);this.isOnAnchor=this.makeIsOn(dom.isAnchor);this.isOnCell=this.makeIsOn(dom.isCell);this.isOnData=this.makeIsOn(dom.isData)}
WrappedRange.prototype.nativeRange=function(){if(env.isW3CRangeSupport){var w3cRange=document.createRange();w3cRange.setStart(this.sc,this.so);w3cRange.setEnd(this.ec,this.eo);return w3cRange}else{var textRange=pointToTextRange({node:this.sc,offset:this.so});textRange.setEndPoint('EndToEnd',pointToTextRange({node:this.ec,offset:this.eo}));return textRange}};WrappedRange.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}};WrappedRange.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}};WrappedRange.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}};WrappedRange.prototype.select=function(){var nativeRng=this.nativeRange();if(env.isW3CRangeSupport){var selection=document.getSelection();if(selection.rangeCount>0){selection.removeAllRanges()}
selection.addRange(nativeRng)}else{nativeRng.select()}
return this};WrappedRange.prototype.scrollIntoView=function(container){var height=$$1(container).height();if(container.scrollTop+height<this.sc.offsetTop){container.scrollTop+=Math.abs(container.scrollTop+height-this.sc.offsetTop)}
return this};WrappedRange.prototype.normalize=function(){var getVisiblePoint=function(point,isLeftToRight){if((dom.isVisiblePoint(point)&&!dom.isEdgePoint(point))||(dom.isVisiblePoint(point)&&dom.isRightEdgePoint(point)&&!isLeftToRight)||(dom.isVisiblePoint(point)&&dom.isLeftEdgePoint(point)&&isLeftToRight)||(dom.isVisiblePoint(point)&&dom.isBlock(point.node)&&dom.isEmpty(point.node))){return point}
var block=dom.ancestor(point.node,dom.isBlock);if(((dom.isLeftEdgePointOf(point,block)||dom.isVoid(dom.prevPoint(point).node))&&!isLeftToRight)||((dom.isRightEdgePointOf(point,block)||dom.isVoid(dom.nextPoint(point).node))&&isLeftToRight)){if(dom.isVisiblePoint(point)){return point}
isLeftToRight=!isLeftToRight}
var nextPoint=isLeftToRight?dom.nextPointUntil(dom.nextPoint(point),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(point),dom.isVisiblePoint);return nextPoint||point};var endPoint=getVisiblePoint(this.getEndPoint(),!1);var startPoint=this.isCollapsed()?endPoint:getVisiblePoint(this.getStartPoint(),!0);return new WrappedRange(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset)};WrappedRange.prototype.nodes=function(pred,options){pred=pred||func.ok;var includeAncestor=options&&options.includeAncestor;var fullyContains=options&&options.fullyContains;var startPoint=this.getStartPoint();var endPoint=this.getEndPoint();var nodes=[];var leftEdgeNodes=[];dom.walkPoint(startPoint,endPoint,function(point){if(dom.isEditable(point.node)){return}
var node;if(fullyContains){if(dom.isLeftEdgePoint(point)){leftEdgeNodes.push(point.node)}
if(dom.isRightEdgePoint(point)&&lists.contains(leftEdgeNodes,point.node)){node=point.node}}else if(includeAncestor){node=dom.ancestor(point.node,pred)}else{node=point.node}
if(node&&pred(node)){nodes.push(node)}},!0);return lists.unique(nodes)};WrappedRange.prototype.commonAncestor=function(){return dom.commonAncestor(this.sc,this.ec)};WrappedRange.prototype.expand=function(pred){var startAncestor=dom.ancestor(this.sc,pred);var endAncestor=dom.ancestor(this.ec,pred);if(!startAncestor&&!endAncestor){return new WrappedRange(this.sc,this.so,this.ec,this.eo)}
var boundaryPoints=this.getPoints();if(startAncestor){boundaryPoints.sc=startAncestor;boundaryPoints.so=0}
if(endAncestor){boundaryPoints.ec=endAncestor;boundaryPoints.eo=dom.nodeLength(endAncestor)}
return new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo)};WrappedRange.prototype.collapse=function(isCollapseToStart){if(isCollapseToStart){return new WrappedRange(this.sc,this.so,this.sc,this.so)}else{return new WrappedRange(this.ec,this.eo,this.ec,this.eo)}};WrappedRange.prototype.splitText=function(){var isSameContainer=this.sc===this.ec;var boundaryPoints=this.getPoints();if(dom.isText(this.ec)&&!dom.isEdgePoint(this.getEndPoint())){this.ec.splitText(this.eo)}
if(dom.isText(this.sc)&&!dom.isEdgePoint(this.getStartPoint())){boundaryPoints.sc=this.sc.splitText(this.so);boundaryPoints.so=0;if(isSameContainer){boundaryPoints.ec=boundaryPoints.sc;boundaryPoints.eo=this.eo-this.so}}
return new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo)};WrappedRange.prototype.deleteContents=function(){if(this.isCollapsed()){return this}
var rng=this.splitText();var nodes=rng.nodes(null,{fullyContains:!0});var point=dom.prevPointUntil(rng.getStartPoint(),function(point){return!lists.contains(nodes,point.node)});var emptyParents=[];$$1.each(nodes,function(idx,node){var parent=node.parentNode;if(point.node!==parent&&dom.nodeLength(parent)===1){emptyParents.push(parent)}
dom.remove(node,!1)});$$1.each(emptyParents,function(idx,node){dom.remove(node,!1)});return new WrappedRange(point.node,point.offset,point.node,point.offset).normalize()};WrappedRange.prototype.makeIsOn=function(pred){return function(){var ancestor=dom.ancestor(this.sc,pred);return!!ancestor&&(ancestor===dom.ancestor(this.ec,pred))}};WrappedRange.prototype.isLeftEdgeOf=function(pred){if(!dom.isLeftEdgePoint(this.getStartPoint())){return!1}
var node=dom.ancestor(this.sc,pred);return node&&dom.isLeftEdgeOf(this.sc,node)};WrappedRange.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo};WrappedRange.prototype.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(this.sc)&&dom.isEmpty(this.sc)){this.sc.innerHTML=dom.emptyPara;return new WrappedRange(this.sc.firstChild,0,this.sc.firstChild,0)}
var rng=this.normalize();if(dom.isParaInline(this.sc)||dom.isPara(this.sc)){return rng}
var topAncestor;if(dom.isInline(rng.sc)){var ancestors=dom.listAncestor(rng.sc,func.not(dom.isInline));topAncestor=lists.last(ancestors);if(!dom.isInline(topAncestor)){topAncestor=ancestors[ancestors.length-2]||rng.sc.childNodes[rng.so]}}else{topAncestor=rng.sc.childNodes[rng.so>0?rng.so-1:0]}
var inlineSiblings=dom.listPrev(topAncestor,dom.isParaInline).reverse();inlineSiblings=inlineSiblings.concat(dom.listNext(topAncestor.nextSibling,dom.isParaInline));if(inlineSiblings.length){var para=dom.wrap(lists.head(inlineSiblings),'p');dom.appendChildNodes(para,lists.tail(inlineSiblings))}
return this.normalize()};WrappedRange.prototype.insertNode=function(node){var rng=this.wrapBodyInlineWithPara().deleteContents();var info=dom.splitPoint(rng.getStartPoint(),dom.isInline(node));if(info.rightNode){info.rightNode.parentNode.insertBefore(node,info.rightNode)}else{info.container.appendChild(node)}
return node};WrappedRange.prototype.pasteHTML=function(markup){var contentsContainer=$$1('<div></div>').html(markup)[0];var childNodes=lists.from(contentsContainer.childNodes);var rng=this.wrapBodyInlineWithPara().deleteContents();return childNodes.reverse().map(function(childNode){return rng.insertNode(childNode)}).reverse()};WrappedRange.prototype.toString=function(){var nativeRng=this.nativeRange();return env.isW3CRangeSupport?nativeRng.toString():nativeRng.text};WrappedRange.prototype.getWordRange=function(findAfter){var endPoint=this.getEndPoint();if(!dom.isCharPoint(endPoint)){return this}
var startPoint=dom.prevPointUntil(endPoint,function(point){return!dom.isCharPoint(point)});if(findAfter){endPoint=dom.nextPointUntil(endPoint,function(point){return!dom.isCharPoint(point)})}
return new WrappedRange(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset)};WrappedRange.prototype.bookmark=function(editable){return{s:{path:dom.makeOffsetPath(editable,this.sc),offset:this.so},e:{path:dom.makeOffsetPath(editable,this.ec),offset:this.eo}}};WrappedRange.prototype.paraBookmark=function(paras){return{s:{path:lists.tail(dom.makeOffsetPath(lists.head(paras),this.sc)),offset:this.so},e:{path:lists.tail(dom.makeOffsetPath(lists.last(paras),this.ec)),offset:this.eo}}};WrappedRange.prototype.getClientRects=function(){var nativeRng=this.nativeRange();return nativeRng.getClientRects()};return WrappedRange}());var range={create:function(sc,so,ec,eo){if(arguments.length===4){return new WrappedRange(sc,so,ec,eo)}else if(arguments.length===2){ec=sc;eo=so;return new WrappedRange(sc,so,ec,eo)}else{var wrappedRange=this.createFromSelection();if(!wrappedRange&&arguments.length===1){wrappedRange=this.createFromNode(arguments[0]);return wrappedRange.collapse(dom.emptyPara===arguments[0].innerHTML)}
return wrappedRange}},createFromSelection:function(){var sc,so,ec,eo;if(env.isW3CRangeSupport){var selection=document.getSelection();if(!selection||selection.rangeCount===0){return null}else if(dom.isBody(selection.anchorNode)){return null}
var nativeRng=selection.getRangeAt(0);sc=nativeRng.startContainer;so=nativeRng.startOffset;ec=nativeRng.endContainer;eo=nativeRng.endOffset}else{var textRange=document.selection.createRange();var textRangeEnd=textRange.duplicate();textRangeEnd.collapse(!1);var textRangeStart=textRange;textRangeStart.collapse(!0);var startPoint=textRangeToPoint(textRangeStart,!0);var endPoint=textRangeToPoint(textRangeEnd,!1);if(dom.isText(startPoint.node)&&dom.isLeftEdgePoint(startPoint)&&dom.isTextNode(endPoint.node)&&dom.isRightEdgePoint(endPoint)&&endPoint.node.nextSibling===startPoint.node){startPoint=endPoint}
sc=startPoint.cont;so=startPoint.offset;ec=endPoint.cont;eo=endPoint.offset}
return new WrappedRange(sc,so,ec,eo)},createFromNode:function(node){var sc=node;var so=0;var ec=node;var eo=dom.nodeLength(ec);if(dom.isVoid(sc)){so=dom.listPrev(sc).length-1;sc=sc.parentNode}
if(dom.isBR(ec)){eo=dom.listPrev(ec).length-1;ec=ec.parentNode}else if(dom.isVoid(ec)){eo=dom.listPrev(ec).length;ec=ec.parentNode}
return this.create(sc,so,ec,eo)},createFromNodeBefore:function(node){return this.createFromNode(node).collapse(!0)},createFromNodeAfter:function(node){return this.createFromNode(node).collapse()},createFromBookmark:function(editable,bookmark){var sc=dom.fromOffsetPath(editable,bookmark.s.path);var so=bookmark.s.offset;var ec=dom.fromOffsetPath(editable,bookmark.e.path);var eo=bookmark.e.offset;return new WrappedRange(sc,so,ec,eo)},createFromParaBookmark:function(bookmark,paras){var so=bookmark.s.offset;var eo=bookmark.e.offset;var sc=dom.fromOffsetPath(lists.head(paras),bookmark.s.path);var ec=dom.fromOffsetPath(lists.last(paras),bookmark.e.path);return new WrappedRange(sc,so,ec,eo)}};function readFileAsDataURL(file){return $$1.Deferred(function(deferred){$$1.extend(new FileReader(),{onload:function(e){var dataURL=e.target.result;deferred.resolve(dataURL)},onerror:function(err){deferred.reject(err)}}).readAsDataURL(file)}).promise()}
function createImage(url){return $$1.Deferred(function(deferred){var $img=$$1('<img>');$img.one('load',function(){$img.off('error abort');deferred.resolve($img)}).one('error abort',function(){$img.off('load').detach();deferred.reject($img)}).css({display:'none'}).appendTo(document.body).attr('src',url)}).promise()}
var History=(function(){function History($editable){this.stack=[];this.stackOffset=-1;this.$editable=$editable;this.editable=$editable[0]}
History.prototype.makeSnapshot=function(){var rng=range.create(this.editable);var emptyBookmark={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:(rng?rng.bookmark(this.editable):emptyBookmark)}};History.prototype.applySnapshot=function(snapshot){if(snapshot.contents!==null){this.$editable.html(snapshot.contents)}
if(snapshot.bookmark!==null){range.createFromBookmark(this.editable,snapshot.bookmark).select()}};History.prototype.rewind=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}
this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])};History.prototype.reset=function(){this.stack=[];this.stackOffset=-1;this.$editable.html('');this.recordUndo()};History.prototype.undo=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}
if(this.stackOffset>0){this.stackOffset--;this.applySnapshot(this.stack[this.stackOffset])}};History.prototype.redo=function(){if(this.stack.length-1>this.stackOffset){this.stackOffset++;this.applySnapshot(this.stack[this.stackOffset])}};History.prototype.recordUndo=function(){this.stackOffset++;if(this.stack.length>this.stackOffset){this.stack=this.stack.slice(0,this.stackOffset)}
this.stack.push(this.makeSnapshot())};return History}());var Style=(function(){function Style(){}
Style.prototype.jQueryCSS=function($obj,propertyNames){if(env.jqueryVersion<1.9){var result_1={};$$1.each(propertyNames,function(idx,propertyName){result_1[propertyName]=$obj.css(propertyName)});return result_1}
return $obj.css(propertyNames)};Style.prototype.fromNode=function($node){var properties=['font-family','font-size','text-align','list-style-type','line-height'];var styleInfo=this.jQueryCSS($node,properties)||{};styleInfo['font-size']=parseInt(styleInfo['font-size'],10);return styleInfo};Style.prototype.stylePara=function(rng,styleInfo){$$1.each(rng.nodes(dom.isPara,{includeAncestor:!0}),function(idx,para){$$1(para).css(styleInfo)})};Style.prototype.styleNodes=function(rng,options){rng=rng.splitText();var nodeName=(options&&options.nodeName)||'SPAN';var expandClosestSibling=!!(options&&options.expandClosestSibling);var onlyPartialContains=!!(options&&options.onlyPartialContains);if(rng.isCollapsed()){return[rng.insertNode(dom.create(nodeName))]}
var pred=dom.makePredByNodeName(nodeName);var nodes=rng.nodes(dom.isText,{fullyContains:!0}).map(function(text){return dom.singleChildAncestor(text,pred)||dom.wrap(text,nodeName)});if(expandClosestSibling){if(onlyPartialContains){var nodesInRange_1=rng.nodes();pred=func.and(pred,function(node){return lists.contains(nodesInRange_1,node)})}
return nodes.map(function(node){var siblings=dom.withClosestSiblings(node,pred);var head=lists.head(siblings);var tails=lists.tail(siblings);$$1.each(tails,function(idx,elem){dom.appendChildNodes(head,elem.childNodes);dom.remove(elem)});return lists.head(siblings)})}else{return nodes}};Style.prototype.current=function(rng){var $cont=$$1(!dom.isElement(rng.sc)?rng.sc.parentNode:rng.sc);var styleInfo=this.fromNode($cont);try{styleInfo=$$1.extend(styleInfo,{'font-bold':document.queryCommandState('bold')?'bold':'normal','font-italic':document.queryCommandState('italic')?'italic':'normal','font-underline':document.queryCommandState('underline')?'underline':'normal','font-subscript':document.queryCommandState('subscript')?'subscript':'normal','font-superscript':document.queryCommandState('superscript')?'superscript':'normal','font-strikethrough':document.queryCommandState('strikethrough')?'strikethrough':'normal','font-family':document.queryCommandValue('fontname')||styleInfo['font-family']})}catch(e){}
if(!rng.isOnList()){styleInfo['list-style']='none'}else{var orderedTypes=['circle','disc','disc-leading-zero','square'];var isUnordered=$$1.inArray(styleInfo['list-style-type'],orderedTypes)>-1;styleInfo['list-style']=isUnordered?'unordered':'ordered'}
var para=dom.ancestor(rng.sc,dom.isPara);if(para&&para.style['line-height']){styleInfo['line-height']=para.style.lineHeight}else{var lineHeight=parseInt(styleInfo['line-height'],10)/parseInt(styleInfo['font-size'],10);styleInfo['line-height']=lineHeight.toFixed(1)}
styleInfo.anchor=rng.isOnAnchor()&&dom.ancestor(rng.sc,dom.isAnchor);styleInfo.ancestors=dom.listAncestor(rng.sc,dom.isEditable);styleInfo.range=rng;return styleInfo};return Style}());var Bullet=(function(){function Bullet(){}
Bullet.prototype.insertOrderedList=function(editable){this.toggleList('OL',editable)};Bullet.prototype.insertUnorderedList=function(editable){this.toggleList('UL',editable)};Bullet.prototype.indent=function(editable){var _this=this;var rng=range.create(editable).wrapBodyInlineWithPara();var paras=rng.nodes(dom.isPara,{includeAncestor:!0});var clustereds=lists.clusterBy(paras,func.peq2('parentNode'));$$1.each(clustereds,function(idx,paras){var head=lists.head(paras);if(dom.isLi(head)){_this.wrapList(paras,head.parentNode.nodeName)}else{$$1.each(paras,function(idx,para){$$1(para).css('marginLeft',function(idx,val){return(parseInt(val,10)||0)+25})})}});rng.select()};Bullet.prototype.outdent=function(editable){var _this=this;var rng=range.create(editable).wrapBodyInlineWithPara();var paras=rng.nodes(dom.isPara,{includeAncestor:!0});var clustereds=lists.clusterBy(paras,func.peq2('parentNode'));$$1.each(clustereds,function(idx,paras){var head=lists.head(paras);if(dom.isLi(head)){_this.releaseList([paras])}else{$$1.each(paras,function(idx,para){$$1(para).css('marginLeft',function(idx,val){val=(parseInt(val,10)||0);return val>25?val-25:''})})}});rng.select()};Bullet.prototype.toggleList=function(listName,editable){var _this=this;var rng=range.create(editable).wrapBodyInlineWithPara();var paras=rng.nodes(dom.isPara,{includeAncestor:!0});var bookmark=rng.paraBookmark(paras);var clustereds=lists.clusterBy(paras,func.peq2('parentNode'));if(lists.find(paras,dom.isPurePara)){var wrappedParas_1=[];$$1.each(clustereds,function(idx,paras){wrappedParas_1=wrappedParas_1.concat(_this.wrapList(paras,listName))});paras=wrappedParas_1}else{var diffLists=rng.nodes(dom.isList,{includeAncestor:!0}).filter(function(listNode){return!$$1.nodeName(listNode,listName)});if(diffLists.length){$$1.each(diffLists,function(idx,listNode){dom.replace(listNode,listName)})}else{paras=this.releaseList(clustereds,!0)}}
range.createFromParaBookmark(bookmark,paras).select()};Bullet.prototype.wrapList=function(paras,listName){var head=lists.head(paras);var last=lists.last(paras);var prevList=dom.isList(head.previousSibling)&&head.previousSibling;var nextList=dom.isList(last.nextSibling)&&last.nextSibling;var listNode=prevList||dom.insertAfter(dom.create(listName||'UL'),last);paras=paras.map(function(para){return dom.isPurePara(para)?dom.replace(para,'LI'):para});dom.appendChildNodes(listNode,paras);if(nextList){dom.appendChildNodes(listNode,lists.from(nextList.childNodes));dom.remove(nextList)}
return paras};Bullet.prototype.releaseList=function(clustereds,isEscapseToBody){var releasedParas=[];$$1.each(clustereds,function(idx,paras){var head=lists.head(paras);var last=lists.last(paras);var headList=isEscapseToBody?dom.lastAncestor(head,dom.isList):head.parentNode;var lastList=headList.childNodes.length>1?dom.splitTree(headList,{node:last.parentNode,offset:dom.position(last)+1},{isSkipPaddingBlankHTML:!0}):null;var middleList=dom.splitTree(headList,{node:head.parentNode,offset:dom.position(head)},{isSkipPaddingBlankHTML:!0});paras=isEscapseToBody?dom.listDescendant(middleList,dom.isLi):lists.from(middleList.childNodes).filter(dom.isLi);if(isEscapseToBody||!dom.isList(headList.parentNode)){paras=paras.map(function(para){return dom.replace(para,'P')})}
$$1.each(lists.from(paras).reverse(),function(idx,para){dom.insertAfter(para,headList)});var rootLists=lists.compact([headList,middleList,lastList]);$$1.each(rootLists,function(idx,rootList){var listNodes=[rootList].concat(dom.listDescendant(rootList,dom.isList));$$1.each(listNodes.reverse(),function(idx,listNode){if(!dom.nodeLength(listNode)){dom.remove(listNode,!0)}})});releasedParas=releasedParas.concat(paras)});return releasedParas};return Bullet}());var Typing=(function(){function Typing(){this.bullet=new Bullet()}
Typing.prototype.insertTab=function(rng,tabsize){var tab=dom.createText(new Array(tabsize+1).join(dom.NBSP_CHAR));rng=rng.deleteContents();rng.insertNode(tab,!0);rng=range.create(tab,tabsize);rng.select()};Typing.prototype.insertParagraph=function(editable){var rng=range.create(editable);rng=rng.deleteContents();rng=rng.wrapBodyInlineWithPara();var splitRoot=dom.ancestor(rng.sc,dom.isPara);var nextPara;if(splitRoot){if(dom.isEmpty(splitRoot)&&dom.isLi(splitRoot)){this.bullet.toggleList(splitRoot.parentNode.nodeName);return}else if(dom.isEmpty(splitRoot)&&dom.isPara(splitRoot)&&dom.isBlockquote(splitRoot.parentNode)){dom.insertAfter(splitRoot,splitRoot.parentNode);nextPara=splitRoot}else{nextPara=dom.splitTree(splitRoot,rng.getStartPoint());var emptyAnchors=dom.listDescendant(splitRoot,dom.isEmptyAnchor);emptyAnchors=emptyAnchors.concat(dom.listDescendant(nextPara,dom.isEmptyAnchor));$$1.each(emptyAnchors,function(idx,anchor){dom.remove(anchor)});if((dom.isHeading(nextPara)||dom.isPre(nextPara)||dom.isCustomStyleTag(nextPara))&&dom.isEmpty(nextPara)){nextPara=dom.replace(nextPara,'p')}}}else{var next=rng.sc.childNodes[rng.so];nextPara=$$1(dom.emptyPara)[0];if(next){rng.sc.insertBefore(nextPara,next)}else{rng.sc.appendChild(nextPara)}}
range.create(nextPara,0).normalize().select().scrollIntoView(editable)};return Typing}());var TableResultAction=function(startPoint,where,action,domTable){var _startPoint={'colPos':0,'rowPos':0};var _virtualTable=[];var _actionCellList=[];function setStartPoint(){if(!startPoint||!startPoint.tagName||(startPoint.tagName.toLowerCase()!=='td'&&startPoint.tagName.toLowerCase()!=='th')){console.error('Impossible to identify start Cell point.',startPoint);return}
_startPoint.colPos=startPoint.cellIndex;if(!startPoint.parentElement||!startPoint.parentElement.tagName||startPoint.parentElement.tagName.toLowerCase()!=='tr'){console.error('Impossible to identify start Row point.',startPoint);return}
_startPoint.rowPos=startPoint.parentElement.rowIndex}
function setVirtualTablePosition(rowIndex,cellIndex,baseRow,baseCell,isRowSpan,isColSpan,isVirtualCell){var objPosition={'baseRow':baseRow,'baseCell':baseCell,'isRowSpan':isRowSpan,'isColSpan':isColSpan,'isVirtual':isVirtualCell};if(!_virtualTable[rowIndex]){_virtualTable[rowIndex]=[]}
_virtualTable[rowIndex][cellIndex]=objPosition}
function getActionCell(virtualTableCellObj,resultAction,virtualRowPosition,virtualColPosition){return{'baseCell':virtualTableCellObj.baseCell,'action':resultAction,'virtualTable':{'rowIndex':virtualRowPosition,'cellIndex':virtualColPosition}}}
function recoverCellIndex(rowIndex,cellIndex){if(!_virtualTable[rowIndex]){return cellIndex}
if(!_virtualTable[rowIndex][cellIndex]){return cellIndex}
var newCellIndex=cellIndex;while(_virtualTable[rowIndex][newCellIndex]){newCellIndex++;if(!_virtualTable[rowIndex][newCellIndex]){return newCellIndex}}}
function addCellInfoToVirtual(row,cell){var cellIndex=recoverCellIndex(row.rowIndex,cell.cellIndex);var cellHasColspan=(cell.colSpan>1);var cellHasRowspan=(cell.rowSpan>1);var isThisSelectedCell=(row.rowIndex===_startPoint.rowPos&&cell.cellIndex===_startPoint.colPos);setVirtualTablePosition(row.rowIndex,cellIndex,row,cell,cellHasRowspan,cellHasColspan,!1);var rowspanNumber=cell.attributes.rowSpan?parseInt(cell.attributes.rowSpan.value,10):0;if(rowspanNumber>1){for(var rp=1;rp<rowspanNumber;rp++){var rowspanIndex=row.rowIndex+rp;adjustStartPoint(rowspanIndex,cellIndex,cell,isThisSelectedCell);setVirtualTablePosition(rowspanIndex,cellIndex,row,cell,!0,cellHasColspan,!0)}}
var colspanNumber=cell.attributes.colSpan?parseInt(cell.attributes.colSpan.value,10):0;if(colspanNumber>1){for(var cp=1;cp<colspanNumber;cp++){var cellspanIndex=recoverCellIndex(row.rowIndex,(cellIndex+cp));adjustStartPoint(row.rowIndex,cellspanIndex,cell,isThisSelectedCell);setVirtualTablePosition(row.rowIndex,cellspanIndex,row,cell,cellHasRowspan,!0,!0)}}}
function adjustStartPoint(rowIndex,cellIndex,cell,isSelectedCell){if(rowIndex===_startPoint.rowPos&&_startPoint.colPos>=cell.cellIndex&&cell.cellIndex<=cellIndex&&!isSelectedCell){_startPoint.colPos++}}
function createVirtualTable(){var rows=domTable.rows;for(var rowIndex=0;rowIndex<rows.length;rowIndex++){var cells=rows[rowIndex].cells;for(var cellIndex=0;cellIndex<cells.length;cellIndex++){addCellInfoToVirtual(rows[rowIndex],cells[cellIndex])}}}
function getDeleteResultActionToCell(cell){switch(where){case TableResultAction.where.Column:if(cell.isColSpan){return TableResultAction.resultAction.SubtractSpanCount}
break;case TableResultAction.where.Row:if(!cell.isVirtual&&cell.isRowSpan){return TableResultAction.resultAction.AddCell}else if(cell.isRowSpan){return TableResultAction.resultAction.SubtractSpanCount}
break}
return TableResultAction.resultAction.RemoveCell}
function getAddResultActionToCell(cell){switch(where){case TableResultAction.where.Column:if(cell.isColSpan){return TableResultAction.resultAction.SumSpanCount}else if(cell.isRowSpan&&cell.isVirtual){return TableResultAction.resultAction.Ignore}
break;case TableResultAction.where.Row:if(cell.isRowSpan){return TableResultAction.resultAction.SumSpanCount}else if(cell.isColSpan&&cell.isVirtual){return TableResultAction.resultAction.Ignore}
break}
return TableResultAction.resultAction.AddCell}
function init(){setStartPoint();createVirtualTable()}
this.getActionList=function(){var fixedRow=(where===TableResultAction.where.Row)?_startPoint.rowPos:-1;var fixedCol=(where===TableResultAction.where.Column)?_startPoint.colPos:-1;var actualPosition=0;var canContinue=!0;while(canContinue){var rowPosition=(fixedRow>=0)?fixedRow:actualPosition;var colPosition=(fixedCol>=0)?fixedCol:actualPosition;var row=_virtualTable[rowPosition];if(!row){canContinue=!1;return _actionCellList}
var cell=row[colPosition];if(!cell){canContinue=!1;return _actionCellList}
var resultAction=TableResultAction.resultAction.Ignore;switch(action){case TableResultAction.requestAction.Add:resultAction=getAddResultActionToCell(cell);break;case TableResultAction.requestAction.Delete:resultAction=getDeleteResultActionToCell(cell);break}
_actionCellList.push(getActionCell(cell,resultAction,rowPosition,colPosition));actualPosition++}
return _actionCellList};init()};TableResultAction.where={'Row':0,'Column':1};TableResultAction.requestAction={'Add':0,'Delete':1};TableResultAction.resultAction={'Ignore':0,'SubtractSpanCount':1,'RemoveCell':2,'AddCell':3,'SumSpanCount':4};var Table=(function(){function Table(){}
Table.prototype.tab=function(rng,isShift){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);var table=dom.ancestor(cell,dom.isTable);var cells=dom.listDescendant(table,dom.isCell);var nextCell=lists[isShift?'prev':'next'](cells,cell);if(nextCell){range.create(nextCell,0).select()}};Table.prototype.addRow=function(rng,position){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);var currentTr=$$1(cell).closest('tr');var trAttributes=this.recoverAttributes(currentTr);var html=$$1('<tr'+trAttributes+'></tr>');var vTable=new TableResultAction(cell,TableResultAction.where.Row,TableResultAction.requestAction.Add,$$1(currentTr).closest('table')[0]);var actions=vTable.getActionList();for(var idCell=0;idCell<actions.length;idCell++){var currentCell=actions[idCell];var tdAttributes=this.recoverAttributes(currentCell.baseCell);switch(currentCell.action){case TableResultAction.resultAction.AddCell:html.append('<td'+tdAttributes+'>'+dom.blank+'</td>');break;case TableResultAction.resultAction.SumSpanCount:if(position==='top'){var baseCellTr=currentCell.baseCell.parent;var isTopFromRowSpan=(!baseCellTr?0:currentCell.baseCell.closest('tr').rowIndex)<=currentTr[0].rowIndex;if(isTopFromRowSpan){var newTd=$$1('<div></div>').append($$1('<td'+tdAttributes+'>'+dom.blank+'</td>').removeAttr('rowspan')).html();html.append(newTd);break}}
var rowspanNumber=parseInt(currentCell.baseCell.rowSpan,10);rowspanNumber++;currentCell.baseCell.setAttribute('rowSpan',rowspanNumber);break}}
if(position==='top'){currentTr.before(html)}else{var cellHasRowspan=(cell.rowSpan>1);if(cellHasRowspan){var lastTrIndex=currentTr[0].rowIndex+(cell.rowSpan-2);$$1($$1(currentTr).parent().find('tr')[lastTrIndex]).after($$1(html));return}
currentTr.after(html)}};Table.prototype.addCol=function(rng,position){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);var row=$$1(cell).closest('tr');var rowsGroup=$$1(row).siblings();rowsGroup.push(row);var vTable=new TableResultAction(cell,TableResultAction.where.Column,TableResultAction.requestAction.Add,$$1(row).closest('table')[0]);var actions=vTable.getActionList();for(var actionIndex=0;actionIndex<actions.length;actionIndex++){var currentCell=actions[actionIndex];var tdAttributes=this.recoverAttributes(currentCell.baseCell);switch(currentCell.action){case TableResultAction.resultAction.AddCell:if(position==='right'){$$1(currentCell.baseCell).after('<td'+tdAttributes+'>'+dom.blank+'</td>')}else{$$1(currentCell.baseCell).before('<td'+tdAttributes+'>'+dom.blank+'</td>')}
break;case TableResultAction.resultAction.SumSpanCount:if(position==='right'){var colspanNumber=parseInt(currentCell.baseCell.colSpan,10);colspanNumber++;currentCell.baseCell.setAttribute('colSpan',colspanNumber)}else{$$1(currentCell.baseCell).before('<td'+tdAttributes+'>'+dom.blank+'</td>')}
break}}};Table.prototype.recoverAttributes=function(el){var resultStr='';if(!el){return resultStr}
var attrList=el.attributes||[];for(var i=0;i<attrList.length;i++){if(attrList[i].name.toLowerCase()==='id'){continue}
if(attrList[i].specified){resultStr+=' '+attrList[i].name+'=\''+attrList[i].value+'\''}}
return resultStr};Table.prototype.deleteRow=function(rng){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);var row=$$1(cell).closest('tr');var cellPos=row.children('td, th').index($$1(cell));var rowPos=row[0].rowIndex;var vTable=new TableResultAction(cell,TableResultAction.where.Row,TableResultAction.requestAction.Delete,$$1(row).closest('table')[0]);var actions=vTable.getActionList();for(var actionIndex=0;actionIndex<actions.length;actionIndex++){if(!actions[actionIndex]){continue}
var baseCell=actions[actionIndex].baseCell;var virtualPosition=actions[actionIndex].virtualTable;var hasRowspan=(baseCell.rowSpan&&baseCell.rowSpan>1);var rowspanNumber=(hasRowspan)?parseInt(baseCell.rowSpan,10):0;switch(actions[actionIndex].action){case TableResultAction.resultAction.Ignore:continue;case TableResultAction.resultAction.AddCell:var nextRow=row.next('tr')[0];if(!nextRow){continue}
var cloneRow=row[0].cells[cellPos];if(hasRowspan){if(rowspanNumber>2){rowspanNumber--;nextRow.insertBefore(cloneRow,nextRow.cells[cellPos]);nextRow.cells[cellPos].setAttribute('rowSpan',rowspanNumber);nextRow.cells[cellPos].innerHTML=''}else if(rowspanNumber===2){nextRow.insertBefore(cloneRow,nextRow.cells[cellPos]);nextRow.cells[cellPos].removeAttribute('rowSpan');nextRow.cells[cellPos].innerHTML=''}}
continue;case TableResultAction.resultAction.SubtractSpanCount:if(hasRowspan){if(rowspanNumber>2){rowspanNumber--;baseCell.setAttribute('rowSpan',rowspanNumber);if(virtualPosition.rowIndex!==rowPos&&baseCell.cellIndex===cellPos){baseCell.innerHTML=''}}else if(rowspanNumber===2){baseCell.removeAttribute('rowSpan');if(virtualPosition.rowIndex!==rowPos&&baseCell.cellIndex===cellPos){baseCell.innerHTML=''}}}
continue;case TableResultAction.resultAction.RemoveCell:continue}}
row.remove()};Table.prototype.deleteCol=function(rng){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);var row=$$1(cell).closest('tr');var cellPos=row.children('td, th').index($$1(cell));var vTable=new TableResultAction(cell,TableResultAction.where.Column,TableResultAction.requestAction.Delete,$$1(row).closest('table')[0]);var actions=vTable.getActionList();for(var actionIndex=0;actionIndex<actions.length;actionIndex++){if(!actions[actionIndex]){continue}
switch(actions[actionIndex].action){case TableResultAction.resultAction.Ignore:continue;case TableResultAction.resultAction.SubtractSpanCount:var baseCell=actions[actionIndex].baseCell;var hasColspan=(baseCell.colSpan&&baseCell.colSpan>1);if(hasColspan){var colspanNumber=(baseCell.colSpan)?parseInt(baseCell.colSpan,10):0;if(colspanNumber>2){colspanNumber--;baseCell.setAttribute('colSpan',colspanNumber);if(baseCell.cellIndex===cellPos){baseCell.innerHTML=''}}else if(colspanNumber===2){baseCell.removeAttribute('colSpan');if(baseCell.cellIndex===cellPos){baseCell.innerHTML=''}}}
continue;case TableResultAction.resultAction.RemoveCell:dom.remove(actions[actionIndex].baseCell,!0);continue}}};Table.prototype.createTable=function(colCount,rowCount,options){var tds=[];var tdHTML;for(var idxCol=0;idxCol<colCount;idxCol++){tds.push('<td>'+dom.blank+'</td>')}
tdHTML=tds.join('');var trs=[];var trHTML;for(var idxRow=0;idxRow<rowCount;idxRow++){trs.push('<tr>'+tdHTML+'</tr>')}
trHTML=trs.join('');var $table=$$1('<table>'+trHTML+'</table>');if(options&&options.tableClassName){$table.addClass(options.tableClassName)}
return $table[0]};Table.prototype.deleteTable=function(rng){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);$$1(cell).closest('table').remove()};return Table}());var KEY_BOGUS='bogus';var Editor=(function(){function Editor(context){var _this=this;this.context=context;this.$note=context.layoutInfo.note;this.$editor=context.layoutInfo.editor;this.$editable=context.layoutInfo.editable;this.options=context.options;this.lang=this.options.langInfo;this.editable=this.$editable[0];this.lastRange=null;this.style=new Style();this.table=new Table();this.typing=new Typing();this.bullet=new Bullet();this.history=new History(this.$editable);this.context.memo('help.undo',this.lang.help.undo);this.context.memo('help.redo',this.lang.help.redo);this.context.memo('help.tab',this.lang.help.tab);this.context.memo('help.untab',this.lang.help.untab);this.context.memo('help.insertParagraph',this.lang.help.insertParagraph);this.context.memo('help.insertOrderedList',this.lang.help.insertOrderedList);this.context.memo('help.insertUnorderedList',this.lang.help.insertUnorderedList);this.context.memo('help.indent',this.lang.help.indent);this.context.memo('help.outdent',this.lang.help.outdent);this.context.memo('help.formatPara',this.lang.help.formatPara);this.context.memo('help.insertHorizontalRule',this.lang.help.insertHorizontalRule);this.context.memo('help.fontName',this.lang.help.fontName);var commands=['bold','italic','underline','strikethrough','superscript','subscript','justifyLeft','justifyCenter','justifyRight','justifyFull','formatBlock','removeFormat','backColor'];for(var idx=0,len=commands.length;idx<len;idx++){this[commands[idx]]=(function(sCmd){return function(value){_this.beforeCommand();document.execCommand(sCmd,!1,value);_this.afterCommand(!0)}})(commands[idx]);this.context.memo('help.'+commands[idx],this.lang.help[commands[idx]])}
this.fontName=this.wrapCommand(function(value){return _this.fontStyling('font-family',"\'"+value+"\'")});this.fontSize=this.wrapCommand(function(value){return _this.fontStyling('font-size',value+'px')});for(var idx=1;idx<=6;idx++){this['formatH'+idx]=(function(idx){return function(){_this.formatBlock('H'+idx)}})(idx);this.context.memo('help.formatH'+idx,this.lang.help['formatH'+idx])}
this.insertParagraph=this.wrapCommand(function(){_this.typing.insertParagraph(_this.editable)});this.insertOrderedList=this.wrapCommand(function(){_this.bullet.insertOrderedList(_this.editable)});this.insertUnorderedList=this.wrapCommand(function(){_this.bullet.insertUnorderedList(_this.editable)});this.indent=this.wrapCommand(function(){_this.bullet.indent(_this.editable)});this.outdent=this.wrapCommand(function(){_this.bullet.outdent(_this.editable)});this.insertNode=this.wrapCommand(function(node){if(_this.isLimited($$1(node).text().length)){return}
var rng=_this.createRange();rng.insertNode(node);range.createFromNodeAfter(node).select()});this.insertText=this.wrapCommand(function(text){if(_this.isLimited(text.length)){return}
var rng=_this.createRange();var textNode=rng.insertNode(dom.createText(text));range.create(textNode,dom.nodeLength(textNode)).select()});this.pasteHTML=this.wrapCommand(function(markup){if(_this.isLimited(markup.length)){return}
var contents=_this.createRange().pasteHTML(markup);range.createFromNodeAfter(lists.last(contents)).select()});this.formatBlock=this.wrapCommand(function(tagName,$target){var onApplyCustomStyle=_this.options.callbacks.onApplyCustomStyle;if(onApplyCustomStyle){onApplyCustomStyle.call(_this,$target,_this.context,_this.onFormatBlock)}else{_this.onFormatBlock(tagName,$target)}});this.insertHorizontalRule=this.wrapCommand(function(){var hrNode=_this.createRange().insertNode(dom.create('HR'));if(hrNode.nextSibling){range.create(hrNode.nextSibling,0).normalize().select()}});this.lineHeight=this.wrapCommand(function(value){_this.style.stylePara(_this.createRange(),{lineHeight:value})});this.createLink=this.wrapCommand(function(linkInfo){var linkUrl=linkInfo.url;var linkText=linkInfo.text;var isNewWindow=linkInfo.isNewWindow;var rng=linkInfo.range||_this.createRange();var isTextChanged=rng.toString()!==linkText;if(typeof linkUrl==='string'){linkUrl=linkUrl.trim()}
if(_this.options.onCreateLink){linkUrl=_this.options.onCreateLink(linkUrl)}else{linkUrl=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(linkUrl)?linkUrl:'http://'+linkUrl}
var anchors=[];if(isTextChanged){rng=rng.deleteContents();var anchor=rng.insertNode($$1('<A>'+linkText+'</A>')[0]);anchors.push(anchor)}else{anchors=_this.style.styleNodes(rng,{nodeName:'A',expandClosestSibling:!0,onlyPartialContains:!0})}
$$1.each(anchors,function(idx,anchor){$$1(anchor).attr('href',linkUrl);if(isNewWindow){$$1(anchor).attr('target','_blank')}else{$$1(anchor).removeAttr('target')}});var startRange=range.createFromNodeBefore(lists.head(anchors));var startPoint=startRange.getStartPoint();var endRange=range.createFromNodeAfter(lists.last(anchors));var endPoint=endRange.getEndPoint();range.create(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset).select()});this.color=this.wrapCommand(function(colorInfo){var foreColor=colorInfo.foreColor;var backColor=colorInfo.backColor;if(foreColor){document.execCommand('foreColor',!1,foreColor)}
if(backColor){document.execCommand('backColor',!1,backColor)}});this.foreColor=this.wrapCommand(function(colorInfo){document.execCommand('styleWithCSS',!1,!0);document.execCommand('foreColor',!1,colorInfo)});this.insertTable=this.wrapCommand(function(dim){var dimension=dim.split('x');var rng=_this.createRange().deleteContents();rng.insertNode(_this.table.createTable(dimension[0],dimension[1],_this.options))});this.removeMedia=this.wrapCommand(function(){var $target=$$1(_this.restoreTarget()).parent();if($target.parent('figure').length){$target.parent('figure').remove()}else{$target=$$1(_this.restoreTarget()).detach()}
_this.context.triggerEvent('media.delete',$target,_this.$editable)});this.floatMe=this.wrapCommand(function(value){var $target=$$1(_this.restoreTarget());$target.toggleClass('note-float-left',value==='left');$target.toggleClass('note-float-right',value==='right');$target.css('float',value)});this.resize=this.wrapCommand(function(value){var $target=$$1(_this.restoreTarget());$target.css({width:value*100+'%',height:''})})}
Editor.prototype.initialize=function(){var _this=this;this.$editable.on('keydown',function(event){if(event.keyCode===key.code.ENTER){_this.context.triggerEvent('enter',event)}
_this.context.triggerEvent('keydown',event);if(!event.isDefaultPrevented()){if(_this.options.shortcuts){_this.handleKeyMap(event)}else{_this.preventDefaultEditableShortCuts(event)}}
if(_this.isLimited(1,event)){return!1}}).on('keyup',function(event){_this.context.triggerEvent('keyup',event)}).on('focus',function(event){_this.context.triggerEvent('focus',event)}).on('blur',function(event){_this.context.triggerEvent('blur',event)}).on('mousedown',function(event){_this.context.triggerEvent('mousedown',event)}).on('mouseup',function(event){_this.context.triggerEvent('mouseup',event)}).on('scroll',function(event){_this.context.triggerEvent('scroll',event)}).on('paste',function(event){_this.context.triggerEvent('paste',event)});this.$editable.html(dom.html(this.$note)||dom.emptyPara);this.$editable.on(env.inputEventName,func.debounce(function(){_this.context.triggerEvent('change',_this.$editable.html())},100));this.$editor.on('focusin',function(event){_this.context.triggerEvent('focusin',event)}).on('focusout',function(event){_this.context.triggerEvent('focusout',event)});if(!this.options.airMode){if(this.options.width){this.$editor.outerWidth(this.options.width)}
if(this.options.height){this.$editable.outerHeight(this.options.height)}
if(this.options.maxHeight){this.$editable.css('max-height',this.options.maxHeight)}
if(this.options.minHeight){this.$editable.css('min-height',this.options.minHeight)}}
this.history.recordUndo()};Editor.prototype.destroy=function(){this.$editable.off()};Editor.prototype.handleKeyMap=function(event){var keyMap=this.options.keyMap[env.isMac?'mac':'pc'];var keys=[];if(event.metaKey){keys.push('CMD')}
if(event.ctrlKey&&!event.altKey){keys.push('CTRL')}
if(event.shiftKey){keys.push('SHIFT')}
var keyName=key.nameFromCode[event.keyCode];if(keyName){keys.push(keyName)}
var eventName=keyMap[keys.join('+')];if(eventName){if(this.context.invoke(eventName)!==!1){event.preventDefault()}}else if(key.isEdit(event.keyCode)){this.afterCommand()}};Editor.prototype.preventDefaultEditableShortCuts=function(event){if((event.ctrlKey||event.metaKey)&&lists.contains([66,73,85],event.keyCode)){event.preventDefault()}};Editor.prototype.isLimited=function(pad,event){pad=pad||0;if(typeof event!=='undefined'){if(key.isMove(event.keyCode)||(event.ctrlKey||event.metaKey)||lists.contains([key.code.BACKSPACE,key.code.DELETE],event.keyCode)){return!1}}
if(this.options.maxTextLength>0){if((this.$editable.text().length+pad)>=this.options.maxTextLength){return!0}}
return!1};Editor.prototype.createRange=function(){this.focus();return range.create(this.editable)};Editor.prototype.saveRange=function(thenCollapse){this.lastRange=this.createRange();if(thenCollapse){this.lastRange.collapse().select()}};Editor.prototype.restoreRange=function(){if(this.lastRange){this.lastRange.select();this.focus()}};Editor.prototype.saveTarget=function(node){this.$editable.data('target',node)};Editor.prototype.clearTarget=function(){this.$editable.removeData('target')};Editor.prototype.restoreTarget=function(){return this.$editable.data('target')};Editor.prototype.currentStyle=function(){var rng=range.create();if(rng){rng=rng.normalize()}
return rng?this.style.current(rng):this.style.fromNode(this.$editable)};Editor.prototype.styleFromNode=function($node){return this.style.fromNode($node)};Editor.prototype.undo=function(){this.context.triggerEvent('before.command',this.$editable.html());this.history.undo();this.context.triggerEvent('change',this.$editable.html())};Editor.prototype.redo=function(){this.context.triggerEvent('before.command',this.$editable.html());this.history.redo();this.context.triggerEvent('change',this.$editable.html())};Editor.prototype.beforeCommand=function(){this.context.triggerEvent('before.command',this.$editable.html());this.focus()};Editor.prototype.afterCommand=function(isPreventTrigger){this.history.recordUndo();if(!isPreventTrigger){this.context.triggerEvent('change',this.$editable.html())}};Editor.prototype.tab=function(){var rng=this.createRange();if(rng.isCollapsed()&&rng.isOnCell()){this.table.tab(rng)}else{if(this.options.tabSize===0){return!1}
if(!this.isLimited(this.options.tabSize)){this.beforeCommand();this.typing.insertTab(rng,this.options.tabSize);this.afterCommand()}}};Editor.prototype.untab=function(){var rng=this.createRange();if(rng.isCollapsed()&&rng.isOnCell()){this.table.tab(rng,!0)}else{if(this.options.tabSize===0){return!1}}};Editor.prototype.wrapCommand=function(fn){var _this=this;return function(){_this.beforeCommand();fn.apply(_this,arguments);_this.afterCommand()}};Editor.prototype.insertImage=function(src,param){var _this=this;return createImage(src,param).then(function($image){_this.beforeCommand();if(typeof param==='function'){param($image)}else{if(typeof param==='string'){$image.attr('data-filename',param)}
$image.css('width',Math.min(_this.$editable.width(),$image.width()))}
$image.show();range.create(_this.editable).insertNode($image[0]);range.createFromNodeAfter($image[0]).select();_this.afterCommand()}).fail(function(e){_this.context.triggerEvent('image.upload.error',e)})};Editor.prototype.insertImages=function(files){var _this=this;$$1.each(files,function(idx,file){var filename=file.name;if(_this.options.maximumImageFileSize&&_this.options.maximumImageFileSize<file.size){_this.context.triggerEvent('image.upload.error',_this.lang.image.maximumFileSizeError)}else{readFileAsDataURL(file).then(function(dataURL){return _this.insertImage(dataURL,filename)}).fail(function(){_this.context.triggerEvent('image.upload.error')})}})};Editor.prototype.insertImagesOrCallback=function(files){var callbacks=this.options.callbacks;if(callbacks.onImageUpload){this.context.triggerEvent('image.upload',files)}else{this.insertImages(files)}};Editor.prototype.getSelectedText=function(){var rng=this.createRange();if(rng.isOnAnchor()){rng=range.createFromNode(dom.ancestor(rng.sc,dom.isAnchor))}
return rng.toString()};Editor.prototype.onFormatBlock=function(tagName,$target){tagName=env.isMSIE?'<'+tagName+'>':tagName;document.execCommand('FormatBlock',!1,tagName);if($target&&$target.length){var className=$target[0].className||'';if(className){var currentRange=this.createRange();var $parent=$$1([currentRange.sc,currentRange.ec]).closest(tagName);$parent.addClass(className)}}};Editor.prototype.formatPara=function(){this.formatBlock('P')};Editor.prototype.fontStyling=function(target,value){var rng=this.createRange();if(rng){var spans=this.style.styleNodes(rng);$$1(spans).css(target,value);if(rng.isCollapsed()){var firstSpan=lists.head(spans);if(firstSpan&&!dom.nodeLength(firstSpan)){firstSpan.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR;range.createFromNodeAfter(firstSpan.firstChild).select();this.$editable.data(KEY_BOGUS,firstSpan)}}}};Editor.prototype.unlink=function(){var rng=this.createRange();if(rng.isOnAnchor()){var anchor=dom.ancestor(rng.sc,dom.isAnchor);rng=range.createFromNode(anchor);rng.select();this.beforeCommand();document.execCommand('unlink');this.afterCommand()}};Editor.prototype.getLinkInfo=function(){var rng=this.createRange().expand(dom.isAnchor);var $anchor=$$1(lists.head(rng.nodes(dom.isAnchor)));var linkInfo={range:rng,text:rng.toString(),url:$anchor.length?$anchor.attr('href'):''};if($anchor.length){linkInfo.isNewWindow=$anchor.attr('target')==='_blank'}
return linkInfo};Editor.prototype.addRow=function(position){var rng=this.createRange(this.$editable);if(rng.isCollapsed()&&rng.isOnCell()){this.beforeCommand();this.table.addRow(rng,position);this.afterCommand()}};Editor.prototype.addCol=function(position){var rng=this.createRange(this.$editable);if(rng.isCollapsed()&&rng.isOnCell()){this.beforeCommand();this.table.addCol(rng,position);this.afterCommand()}};Editor.prototype.deleteRow=function(){var rng=this.createRange(this.$editable);if(rng.isCollapsed()&&rng.isOnCell()){this.beforeCommand();this.table.deleteRow(rng);this.afterCommand()}};Editor.prototype.deleteCol=function(){var rng=this.createRange(this.$editable);if(rng.isCollapsed()&&rng.isOnCell()){this.beforeCommand();this.table.deleteCol(rng);this.afterCommand()}};Editor.prototype.deleteTable=function(){var rng=this.createRange(this.$editable);if(rng.isCollapsed()&&rng.isOnCell()){this.beforeCommand();this.table.deleteTable(rng);this.afterCommand()}};Editor.prototype.resizeTo=function(pos,$target,bKeepRatio){var imageSize;if(bKeepRatio){var newRatio=pos.y/pos.x;var ratio=$target.data('ratio');imageSize={width:ratio>newRatio?pos.x:pos.y/ratio,height:ratio>newRatio?pos.x*ratio:pos.y}}else{imageSize={width:pos.x,height:pos.y}}
$target.css(imageSize)};Editor.prototype.hasFocus=function(){return this.$editable.is(':focus')};Editor.prototype.focus=function(){if(!this.hasFocus()){this.$editable.focus()}};Editor.prototype.isEmpty=function(){return dom.isEmpty(this.$editable[0])||dom.emptyPara===this.$editable.html()};Editor.prototype.empty=function(){this.context.invoke('code',dom.emptyPara)};return Editor}());var Clipboard=(function(){function Clipboard(context){this.context=context;this.$editable=context.layoutInfo.editable}
Clipboard.prototype.initialize=function(){this.$editable.on('paste',this.pasteByEvent.bind(this))};Clipboard.prototype.pasteByEvent=function(event){var clipboardData=event.originalEvent.clipboardData;if(clipboardData&&clipboardData.items&&clipboardData.items.length){var item=lists.head(clipboardData.items);if(item.kind==='file'&&item.type.indexOf('image/')!==-1){this.context.invoke('editor.insertImagesOrCallback',[item.getAsFile()])}
this.context.invoke('editor.afterCommand')}};return Clipboard}());var Dropzone=(function(){function Dropzone(context){this.context=context;this.$eventListener=$$1(document);this.$editor=context.layoutInfo.editor;this.$editable=context.layoutInfo.editable;this.options=context.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=$$1(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>','</div>'].join('')).prependTo(this.$editor)}
Dropzone.prototype.initialize=function(){if(this.options.disableDragAndDrop){this.documentEventHandlers.onDrop=function(e){e.preventDefault()};this.$eventListener=this.$dropzone;this.$eventListener.on('drop',this.documentEventHandlers.onDrop)}else{this.attachDragAndDropEvent()}};Dropzone.prototype.attachDragAndDropEvent=function(){var _this=this;var collection=$$1();var $dropzoneMessage=this.$dropzone.find('.note-dropzone-message');this.documentEventHandlers.onDragenter=function(e){var isCodeview=_this.context.invoke('codeview.isActivated');var hasEditorSize=_this.$editor.width()>0&&_this.$editor.height()>0;if(!isCodeview&&!collection.length&&hasEditorSize){_this.$editor.addClass('dragover');_this.$dropzone.width(_this.$editor.width());_this.$dropzone.height(_this.$editor.height());$dropzoneMessage.text(_this.lang.image.dragImageHere)}
collection=collection.add(e.target)};this.documentEventHandlers.onDragleave=function(e){collection=collection.not(e.target);if(!collection.length){_this.$editor.removeClass('dragover')}};this.documentEventHandlers.onDrop=function(){collection=$$1();_this.$editor.removeClass('dragover')};this.$eventListener.on('dragenter',this.documentEventHandlers.onDragenter).on('dragleave',this.documentEventHandlers.onDragleave).on('drop',this.documentEventHandlers.onDrop);this.$dropzone.on('dragenter',function(){_this.$dropzone.addClass('hover');$dropzoneMessage.text(_this.lang.image.dropImage)}).on('dragleave',function(){_this.$dropzone.removeClass('hover');$dropzoneMessage.text(_this.lang.image.dragImageHere)});this.$dropzone.on('drop',function(event){var dataTransfer=event.originalEvent.dataTransfer;event.preventDefault();if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){_this.$editable.focus();_this.context.invoke('editor.insertImagesOrCallback',dataTransfer.files)}else{$$1.each(dataTransfer.types,function(idx,type){var content=dataTransfer.getData(type);if(type.toLowerCase().indexOf('text')>-1){_this.context.invoke('editor.pasteHTML',content)}else{$$1(content).each(function(idx,item){_this.context.invoke('editor.insertNode',item)})}})}}).on('dragover',!1)};Dropzone.prototype.destroy=function(){var _this=this;Object.keys(this.documentEventHandlers).forEach(function(key){_this.$eventListener.off(key.substr(2).toLowerCase(),_this.documentEventHandlers[key])});this.documentEventHandlers={}};return Dropzone}());var CodeMirror;if(env.hasCodeMirror){if(env.isSupportAmd){require(['codemirror'],function(cm){CodeMirror=cm})}else{CodeMirror=window.CodeMirror}}
var CodeView=(function(){function CodeView(context){this.context=context;this.$editor=context.layoutInfo.editor;this.$editable=context.layoutInfo.editable;this.$codable=context.layoutInfo.codable;this.options=context.options}
CodeView.prototype.sync=function(){var isCodeview=this.isActivated();if(isCodeview&&env.hasCodeMirror){this.$codable.data('cmEditor').save()}};CodeView.prototype.isActivated=function(){return this.$editor.hasClass('codeview')};CodeView.prototype.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}
this.context.triggerEvent('codeview.toggled')};CodeView.prototype.activate=function(){var _this=this;this.$codable.val(dom.html(this.$editable,this.options.prettifyHtml));this.$codable.height(this.$editable.height());this.context.invoke('toolbar.updateCodeview',!0);this.$editor.addClass('codeview');this.$codable.focus();if(env.hasCodeMirror){var cmEditor_1=CodeMirror.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var server_1=new CodeMirror.TernServer(this.options.codemirror.tern);cmEditor_1.ternServer=server_1;cmEditor_1.on('cursorActivity',function(cm){server_1.updateArgHints(cm)})}
cmEditor_1.on('blur',function(event){_this.context.triggerEvent('blur.codeview',cmEditor_1.getValue(),event)});cmEditor_1.setSize(null,this.$editable.outerHeight());this.$codable.data('cmEditor',cmEditor_1)}else{this.$codable.on('blur',function(event){_this.context.triggerEvent('blur.codeview',_this.$codable.val(),event)})}};CodeView.prototype.deactivate=function(){if(env.hasCodeMirror){var cmEditor=this.$codable.data('cmEditor');this.$codable.val(cmEditor.getValue());cmEditor.toTextArea()}
var value=dom.value(this.$codable,this.options.prettifyHtml)||dom.emptyPara;var isChange=this.$editable.html()!==value;this.$editable.html(value);this.$editable.height(this.options.height?this.$codable.height():'auto');this.$editor.removeClass('codeview');if(isChange){this.context.triggerEvent('change',this.$editable.html(),this.$editable)}
this.$editable.focus();this.context.invoke('toolbar.updateCodeview',!1)};CodeView.prototype.destroy=function(){if(this.isActivated()){this.deactivate()}};return CodeView}());var EDITABLE_PADDING=24;var Statusbar=(function(){function Statusbar(context){this.$document=$$1(document);this.$statusbar=context.layoutInfo.statusbar;this.$editable=context.layoutInfo.editable;this.options=context.options}
Statusbar.prototype.initialize=function(){var _this=this;if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}
this.$statusbar.on('mousedown',function(event){event.preventDefault();event.stopPropagation();var editableTop=_this.$editable.offset().top-_this.$document.scrollTop();var onMouseMove=function(event){var height=event.clientY-(editableTop+EDITABLE_PADDING);height=(_this.options.minheight>0)?Math.max(height,_this.options.minheight):height;height=(_this.options.maxHeight>0)?Math.min(height,_this.options.maxHeight):height;_this.$editable.height(height)};_this.$document.on('mousemove',onMouseMove).one('mouseup',function(){_this.$document.off('mousemove',onMouseMove)})})};Statusbar.prototype.destroy=function(){this.$statusbar.off()};return Statusbar}());var Fullscreen=(function(){function Fullscreen(context){var _this=this;this.context=context;this.$editor=context.layoutInfo.editor;this.$toolbar=context.layoutInfo.toolbar;this.$editable=context.layoutInfo.editable;this.$codable=context.layoutInfo.codable;this.$window=$$1(window);this.$scrollbar=$$1('html, body');this.onResize=function(){_this.resizeTo({h:_this.$window.height()-_this.$toolbar.outerHeight()})}}
Fullscreen.prototype.resizeTo=function(size){this.$editable.css('height',size.h);this.$codable.css('height',size.h);if(this.$codable.data('cmeditor')){this.$codable.data('cmeditor').setsize(null,size.h)}};Fullscreen.prototype.toggle=function(){this.$editor.toggleClass('fullscreen');if(this.isFullscreen()){this.$editable.data('orgHeight',this.$editable.css('height'));this.$window.on('resize',this.onResize).trigger('resize');this.$scrollbar.css('overflow','hidden')}else{this.$window.off('resize',this.onResize);this.resizeTo({h:this.$editable.data('orgHeight')});this.$scrollbar.css('overflow','visible')}
this.context.invoke('toolbar.updateFullscreen',this.isFullscreen())};Fullscreen.prototype.isFullscreen=function(){return this.$editor.hasClass('fullscreen')};return Fullscreen}());var Handle=(function(){function Handle(context){var _this=this;this.context=context;this.$document=$$1(document);this.$editingArea=context.layoutInfo.editingArea;this.options=context.options;this.lang=this.options.langInfo;this.events={'summernote.mousedown':function(we,e){if(_this.update(e.target)){e.preventDefault()}},'summernote.keyup summernote.scroll summernote.change summernote.dialog.shown':function(){_this.update()},'summernote.disable':function(){_this.hide()},'summernote.codeview.toggled':function(){_this.update()}}}
Handle.prototype.initialize=function(){var _this=this;this.$handle=$$1(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',(this.options.disableResizeImage?'note-control-holder':'note-control-sizing'),' note-control-se"></div>',(this.options.disableResizeImage?'':'<div class="note-control-selection-info"></div>'),'</div>','</div>'].join('')).prependTo(this.$editingArea);this.$handle.on('mousedown',function(event){if(dom.isControlSizing(event.target)){event.preventDefault();event.stopPropagation();var $target_1=_this.$handle.find('.note-control-selection').data('target');var posStart_1=$target_1.offset();var scrollTop_1=_this.$document.scrollTop();var onMouseMove_1=function(event){_this.context.invoke('editor.resizeTo',{x:event.clientX-posStart_1.left,y:event.clientY-(posStart_1.top-scrollTop_1)},$target_1,!event.shiftKey);_this.update($target_1[0])};_this.$document.on('mousemove',onMouseMove_1).one('mouseup',function(e){e.preventDefault();_this.$document.off('mousemove',onMouseMove_1);_this.context.invoke('editor.afterCommand')});if(!$target_1.data('ratio')){$target_1.data('ratio',$target_1.height()/$target_1.width())}}});this.$handle.on('wheel',function(e){e.preventDefault();_this.update()})};Handle.prototype.destroy=function(){this.$handle.remove()};Handle.prototype.update=function(target){if(this.context.isDisabled()){return!1}
var isImage=dom.isImg(target);var $selection=this.$handle.find('.note-control-selection');this.context.invoke('imagePopover.update',target);if(isImage){var $image=$$1(target);var position=$image.position();var pos={left:position.left+parseInt($image.css('marginLeft'),10),top:position.top+parseInt($image.css('marginTop'),10)};var imageSize={w:$image.outerWidth(!1),h:$image.outerHeight(!1)};$selection.css({display:'block',left:pos.left,top:pos.top,width:imageSize.w,height:imageSize.h}).data('target',$image);var origImageObj=new Image();origImageObj.src=$image.attr('src');var sizingText=imageSize.w+'x'+imageSize.h+' ('+this.lang.image.original+': '+origImageObj.width+'x'+origImageObj.height+')';$selection.find('.note-control-selection-info').text(sizingText);this.context.invoke('editor.saveTarget',target)}else{this.hide()}
return isImage};Handle.prototype.hide=function(){this.context.invoke('editor.clearTarget');this.$handle.children().hide()};return Handle}());var defaultScheme='http://';var linkPattern=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;var AutoLink=(function(){function AutoLink(context){var _this=this;this.context=context;this.events={'summernote.keyup':function(we,e){if(!e.isDefaultPrevented()){_this.handleKeyup(e)}},'summernote.keydown':function(we,e){_this.handleKeydown(e)}}}
AutoLink.prototype.initialize=function(){this.lastWordRange=null};AutoLink.prototype.destroy=function(){this.lastWordRange=null};AutoLink.prototype.replace=function(){if(!this.lastWordRange){return}
var keyword=this.lastWordRange.toString();var match=keyword.match(linkPattern);if(match&&(match[1]||match[2])){var link=match[1]?keyword:defaultScheme+keyword;var node=$$1('<a />').html(keyword).attr('href',link)[0];this.lastWordRange.insertNode(node);this.lastWordRange=null;this.context.invoke('editor.focus')}};AutoLink.prototype.handleKeydown=function(e){if(lists.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){var wordRange=this.context.invoke('editor.createRange').getWordRange();this.lastWordRange=wordRange}};AutoLink.prototype.handleKeyup=function(e){if(lists.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){this.replace()}};return AutoLink}());var AutoSync=(function(){function AutoSync(context){var _this=this;this.$note=context.layoutInfo.note;this.events={'summernote.change':function(){_this.$note.val(context.invoke('code'))}}}
AutoSync.prototype.shouldInitialize=function(){return dom.isTextarea(this.$note[0])};return AutoSync}());var Placeholder=(function(){function Placeholder(context){var _this=this;this.context=context;this.$editingArea=context.layoutInfo.editingArea;this.options=context.options;this.events={'summernote.init summernote.change':function(){_this.update()},'summernote.codeview.toggled':function(){_this.update()}}}
Placeholder.prototype.shouldInitialize=function(){return!!this.options.placeholder};Placeholder.prototype.initialize=function(){var _this=this;this.$placeholder=$$1('<div class="note-placeholder">');this.$placeholder.on('click',function(){_this.context.invoke('focus')}).text(this.options.placeholder).prependTo(this.$editingArea);this.update()};Placeholder.prototype.destroy=function(){this.$placeholder.remove()};Placeholder.prototype.update=function(){var isShow=!this.context.invoke('codeview.isActivated')&&this.context.invoke('editor.isEmpty');this.$placeholder.toggle(isShow)};return Placeholder}());var Buttons=(function(){function Buttons(context){this.ui=$$1.summernote.ui;this.context=context;this.$toolbar=context.layoutInfo.toolbar;this.options=context.options;this.lang=this.options.langInfo;this.invertedKeyMap=func.invertObject(this.options.keyMap[env.isMac?'mac':'pc'])}
Buttons.prototype.representShortcut=function(editorMethod){var shortcut=this.invertedKeyMap[editorMethod];if(!this.options.shortcuts||!shortcut){return''}
if(env.isMac){shortcut=shortcut.replace('CMD','').replace('SHIFT','')}
shortcut=shortcut.replace('BACKSLASH','\\').replace('SLASH','/').replace('LEFTBRACKET','[').replace('RIGHTBRACKET',']');return' ('+shortcut+')'};Buttons.prototype.button=function(o){if(!this.options.tooltip&&o.tooltip){delete o.tooltip}
o.container=this.options.container;return this.ui.button(o)};Buttons.prototype.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.addTablePopoverButtons();this.fontInstalledMap={}};Buttons.prototype.destroy=function(){delete this.fontInstalledMap};Buttons.prototype.isFontInstalled=function(name){if(!this.fontInstalledMap.hasOwnProperty(name)){this.fontInstalledMap[name]=env.isFontInstalled(name)||lists.contains(this.options.fontNamesIgnoreCheck,name)}
return this.fontInstalledMap[name]};Buttons.prototype.isFontDeservedToAdd=function(name){var genericFamilies=['sans-serif','serif','monospace','cursive','fantasy'];name=name.toLowerCase();return((name!=='')&&this.isFontInstalled(name)&&($$1.inArray(name,genericFamilies)===-1))};Buttons.prototype.addToolbarButtons=function(){var _this=this;this.context.memo('button.style',function(){return _this.ui.buttonGroup([_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.magic),_this.options),tooltip:_this.lang.style.style,data:{toggle:'dropdown'}}),_this.ui.dropdown({className:'dropdown-style',items:_this.options.styleTags,template:function(item){if(typeof item==='string'){item={tag:item,title:(_this.lang.style.hasOwnProperty(item)?_this.lang.style[item]:item)}}
var tag=item.tag;var title=item.title;var style=item.style?' style="'+item.style+'" ':'';var className=item.className?' class="'+item.className+'"':'';return'<'+tag+style+className+'>'+title+'</'+tag+'>'},click:_this.context.createInvokeHandler('editor.formatBlock')})]).render()});var _loop_1=function(styleIdx,styleLen){var item=this_1.options.styleTags[styleIdx];this_1.context.memo('button.style.'+item,function(){return _this.button({className:'note-btn-style-'+item,contents:'<div data-value="'+item+'">'+item.toUpperCase()+'</div>',tooltip:item.toUpperCase(),click:_this.context.createInvokeHandler('editor.formatBlock')}).render()})};var this_1=this;for(var styleIdx=0,styleLen=this.options.styleTags.length;styleIdx<styleLen;styleIdx++){_loop_1(styleIdx,styleLen)}
this.context.memo('button.bold',function(){return _this.button({className:'note-btn-bold',contents:_this.ui.icon(_this.options.icons.bold),tooltip:_this.lang.font.bold+_this.representShortcut('bold'),click:_this.context.createInvokeHandlerAndUpdateState('editor.bold')}).render()});this.context.memo('button.italic',function(){return _this.button({className:'note-btn-italic',contents:_this.ui.icon(_this.options.icons.italic),tooltip:_this.lang.font.italic+_this.representShortcut('italic'),click:_this.context.createInvokeHandlerAndUpdateState('editor.italic')}).render()});this.context.memo('button.underline',function(){return _this.button({className:'note-btn-underline',contents:_this.ui.icon(_this.options.icons.underline),tooltip:_this.lang.font.underline+_this.representShortcut('underline'),click:_this.context.createInvokeHandlerAndUpdateState('editor.underline')}).render()});this.context.memo('button.clear',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.eraser),tooltip:_this.lang.font.clear+_this.representShortcut('removeFormat'),click:_this.context.createInvokeHandler('editor.removeFormat')}).render()});this.context.memo('button.strikethrough',function(){return _this.button({className:'note-btn-strikethrough',contents:_this.ui.icon(_this.options.icons.strikethrough),tooltip:_this.lang.font.strikethrough+_this.representShortcut('strikethrough'),click:_this.context.createInvokeHandlerAndUpdateState('editor.strikethrough')}).render()});this.context.memo('button.superscript',function(){return _this.button({className:'note-btn-superscript',contents:_this.ui.icon(_this.options.icons.superscript),tooltip:_this.lang.font.superscript,click:_this.context.createInvokeHandlerAndUpdateState('editor.superscript')}).render()});this.context.memo('button.subscript',function(){return _this.button({className:'note-btn-subscript',contents:_this.ui.icon(_this.options.icons.subscript),tooltip:_this.lang.font.subscript,click:_this.context.createInvokeHandlerAndUpdateState('editor.subscript')}).render()});this.context.memo('button.fontname',function(){var styleInfo=_this.context.invoke('editor.currentStyle');$$1.each(styleInfo['font-family'].split(','),function(idx,fontname){fontname=fontname.trim().replace(/['"]+/g,'');if(_this.isFontDeservedToAdd(fontname)){if($$1.inArray(fontname,_this.options.fontNames)===-1){_this.options.fontNames.push(fontname)}}});return _this.ui.buttonGroup([_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents('<span class="note-current-fontname"/>',_this.options),tooltip:_this.lang.font.name,data:{toggle:'dropdown'}}),_this.ui.dropdownCheck({className:'dropdown-fontname',checkClassName:_this.options.icons.menuCheck,items:_this.options.fontNames.filter(_this.isFontInstalled.bind(_this)),template:function(item){return'<span style="font-family: \''+item+'\'">'+item+'</span>'},click:_this.context.createInvokeHandlerAndUpdateState('editor.fontName')})]).render()});this.context.memo('button.fontsize',function(){return _this.ui.buttonGroup([_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',_this.options),tooltip:_this.lang.font.size,data:{toggle:'dropdown'}}),_this.ui.dropdownCheck({className:'dropdown-fontsize',checkClassName:_this.options.icons.menuCheck,items:_this.options.fontSizes,click:_this.context.createInvokeHandlerAndUpdateState('editor.fontSize')})]).render()});this.context.memo('button.color',function(){return _this.ui.buttonGroup({className:'note-color',children:[_this.button({className:'note-current-color-button',contents:_this.ui.icon(_this.options.icons.font+' note-recent-color'),tooltip:_this.lang.color.recent,click:function(e){var $button=$$1(e.currentTarget);_this.context.invoke('editor.color',{backColor:$button.attr('data-backColor'),foreColor:$button.attr('data-foreColor')})},callback:function($button){var $recentColor=$button.find('.note-recent-color');$recentColor.css('background-color','#FFFF00');$button.attr('data-backColor','#FFFF00')}}),_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents('',_this.options),tooltip:_this.lang.color.more,data:{toggle:'dropdown'}}),_this.ui.dropdown({items:['<div class="note-palette">','  <div class="note-palette-title">'+_this.lang.color.background+'</div>','  <div>','    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',_this.lang.color.transparent,'    </button>','  </div>','  <div class="note-holder" data-event="backColor"/>','</div>','<div class="note-palette">','  <div class="note-palette-title">'+_this.lang.color.foreground+'</div>','  <div>','    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',_this.lang.color.resetToDefault,'    </button>','  </div>','  <div class="note-holder" data-event="foreColor"/>','</div>'].join(''),callback:function($dropdown){$dropdown.find('.note-holder').each(function(idx,item){var $holder=$$1(item);$holder.append(_this.ui.palette({colors:_this.options.colors,eventName:$holder.data('event'),container:_this.options.container,tooltip:_this.options.tooltip}).render())})},click:function(event){var $button=$$1(event.target);var eventName=$button.data('event');var value=$button.data('value');if(eventName&&value){var key=eventName==='backColor'?'background-color':'color';var $color=$button.closest('.note-color').find('.note-recent-color');var $currentButton=$button.closest('.note-color').find('.note-current-color-button');$color.css(key,value);$currentButton.attr('data-'+eventName,value);_this.context.invoke('editor.'+eventName,value)}}})]}).render()});this.context.memo('button.ul',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.unorderedlist),tooltip:_this.lang.lists.unordered+_this.representShortcut('insertUnorderedList'),click:_this.context.createInvokeHandler('editor.insertUnorderedList')}).render()});this.context.memo('button.ol',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.orderedlist),tooltip:_this.lang.lists.ordered+_this.representShortcut('insertOrderedList'),click:_this.context.createInvokeHandler('editor.insertOrderedList')}).render()});var justifyLeft=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut('justifyLeft'),click:this.context.createInvokeHandler('editor.justifyLeft')});var justifyCenter=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut('justifyCenter'),click:this.context.createInvokeHandler('editor.justifyCenter')});var justifyRight=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut('justifyRight'),click:this.context.createInvokeHandler('editor.justifyRight')});var justifyFull=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut('justifyFull'),click:this.context.createInvokeHandler('editor.justifyFull')});var outdent=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut('outdent'),click:this.context.createInvokeHandler('editor.outdent')});var indent=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut('indent'),click:this.context.createInvokeHandler('editor.indent')});this.context.memo('button.justifyLeft',func.invoke(justifyLeft,'render'));this.context.memo('button.justifyCenter',func.invoke(justifyCenter,'render'));this.context.memo('button.justifyRight',func.invoke(justifyRight,'render'));this.context.memo('button.justifyFull',func.invoke(justifyFull,'render'));this.context.memo('button.outdent',func.invoke(outdent,'render'));this.context.memo('button.indent',func.invoke(indent,'render'));this.context.memo('button.paragraph',function(){return _this.ui.buttonGroup([_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.alignLeft),_this.options),tooltip:_this.lang.paragraph.paragraph,data:{toggle:'dropdown'}}),_this.ui.dropdown([_this.ui.buttonGroup({className:'note-align',children:[justifyLeft,justifyCenter,justifyRight,justifyFull]}),_this.ui.buttonGroup({className:'note-list',children:[outdent,indent]})])]).render()});this.context.memo('button.height',function(){return _this.ui.buttonGroup([_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.textHeight),_this.options),tooltip:_this.lang.font.height,data:{toggle:'dropdown'}}),_this.ui.dropdownCheck({items:_this.options.lineHeights,checkClassName:_this.options.icons.menuCheck,className:'dropdown-line-height',click:_this.context.createInvokeHandler('editor.lineHeight')})]).render()});this.context.memo('button.table',function(){return _this.ui.buttonGroup([_this.button({className:'dropdown-toggle',contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.table),_this.options),tooltip:_this.lang.table.table,data:{toggle:'dropdown'}}),_this.ui.dropdown({className:'note-table',items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>','</div>','<div class="note-dimension-display">1 x 1</div>'].join('')})],{callback:function($node){var $catcher=$node.find('.note-dimension-picker-mousecatcher');$catcher.css({width:_this.options.insertTableMaxSize.col+'em',height:_this.options.insertTableMaxSize.row+'em'}).mousedown(_this.context.createInvokeHandler('editor.insertTable')).on('mousemove',_this.tableMoveHandler.bind(_this))}}).render()});this.context.memo('button.link',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.link),tooltip:_this.lang.link.link+_this.representShortcut('linkDialog.show'),click:_this.context.createInvokeHandler('linkDialog.show')}).render()});this.context.memo('button.picture',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.picture),tooltip:_this.lang.image.image,click:_this.context.createInvokeHandler('imageDialog.show')}).render()});this.context.memo('button.video',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.video),tooltip:_this.lang.video.video,click:_this.context.createInvokeHandler('videoDialog.show')}).render()});this.context.memo('button.hr',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.minus),tooltip:_this.lang.hr.insert+_this.representShortcut('insertHorizontalRule'),click:_this.context.createInvokeHandler('editor.insertHorizontalRule')}).render()});this.context.memo('button.fullscreen',function(){return _this.button({className:'btn-fullscreen',contents:_this.ui.icon(_this.options.icons.arrowsAlt),tooltip:_this.options.fullscreen,click:_this.context.createInvokeHandler('fullscreen.toggle')}).render()});this.context.memo('button.codeview',function(){return _this.button({className:'btn-codeview',contents:_this.ui.icon(_this.options.icons.code),tooltip:_this.options.codeview,click:_this.context.createInvokeHandler('codeview.toggle')}).render()});this.context.memo('button.redo',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.redo),tooltip:_this.lang.history.redo+_this.representShortcut('redo'),click:_this.context.createInvokeHandler('editor.redo')}).render()});this.context.memo('button.undo',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.undo),tooltip:_this.lang.history.undo+_this.representShortcut('undo'),click:_this.context.createInvokeHandler('editor.undo')}).render()});this.context.memo('button.help',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.question),tooltip:_this.options.help,click:_this.context.createInvokeHandler('helpDialog.show')}).render()})};Buttons.prototype.addImagePopoverButtons=function(){var _this=this;this.context.memo('button.imageSize100',function(){return _this.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:_this.lang.image.resizeFull,click:_this.context.createInvokeHandler('editor.resize','1')}).render()});this.context.memo('button.imageSize50',function(){return _this.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:_this.lang.image.resizeHalf,click:_this.context.createInvokeHandler('editor.resize','0.5')}).render()});this.context.memo('button.imageSize25',function(){return _this.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:_this.lang.image.resizeQuarter,click:_this.context.createInvokeHandler('editor.resize','0.25')}).render()});this.context.memo('button.floatLeft',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.alignLeft),tooltip:_this.lang.image.floatLeft,click:_this.context.createInvokeHandler('editor.floatMe','left')}).render()});this.context.memo('button.floatRight',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.alignRight),tooltip:_this.lang.image.floatRight,click:_this.context.createInvokeHandler('editor.floatMe','right')}).render()});this.context.memo('button.floatNone',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.alignJustify),tooltip:_this.lang.image.floatNone,click:_this.context.createInvokeHandler('editor.floatMe','none')}).render()});this.context.memo('button.removeMedia',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.trash),tooltip:_this.lang.image.remove,click:_this.context.createInvokeHandler('editor.removeMedia')}).render()})};Buttons.prototype.addLinkPopoverButtons=function(){var _this=this;this.context.memo('button.linkDialogShow',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.link),tooltip:_this.lang.link.edit,click:_this.context.createInvokeHandler('linkDialog.show')}).render()});this.context.memo('button.unlink',function(){return _this.button({contents:_this.ui.icon(_this.options.icons.unlink),tooltip:_this.lang.link.unlink,click:_this.context.createInvokeHandler('editor.unlink')}).render()})};Buttons.prototype.addTablePopoverButtons=function(){var _this=this;this.context.memo('button.addRowUp',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.rowAbove),tooltip:_this.lang.table.addRowAbove,click:_this.context.createInvokeHandler('editor.addRow','top')}).render()});this.context.memo('button.addRowDown',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.rowBelow),tooltip:_this.lang.table.addRowBelow,click:_this.context.createInvokeHandler('editor.addRow','bottom')}).render()});this.context.memo('button.addColLeft',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.colBefore),tooltip:_this.lang.table.addColLeft,click:_this.context.createInvokeHandler('editor.addCol','left')}).render()});this.context.memo('button.addColRight',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.colAfter),tooltip:_this.lang.table.addColRight,click:_this.context.createInvokeHandler('editor.addCol','right')}).render()});this.context.memo('button.deleteRow',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.rowRemove),tooltip:_this.lang.table.delRow,click:_this.context.createInvokeHandler('editor.deleteRow')}).render()});this.context.memo('button.deleteCol',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.colRemove),tooltip:_this.lang.table.delCol,click:_this.context.createInvokeHandler('editor.deleteCol')}).render()});this.context.memo('button.deleteTable',function(){return _this.button({className:'btn-md',contents:_this.ui.icon(_this.options.icons.trash),tooltip:_this.lang.table.delTable,click:_this.context.createInvokeHandler('editor.deleteTable')}).render()})};Buttons.prototype.build=function($container,groups){for(var groupIdx=0,groupLen=groups.length;groupIdx<groupLen;groupIdx++){var group=groups[groupIdx];var groupName=$$1.isArray(group)?group[0]:group;var buttons=$$1.isArray(group)?((group.length===1)?[group[0]]:group[1]):[group];var $group=this.ui.buttonGroup({className:'note-'+groupName}).render();for(var idx=0,len=buttons.length;idx<len;idx++){var btn=this.context.memo('button.'+buttons[idx]);if(btn){$group.append(typeof btn==='function'?btn(this.context):btn)}}
$group.appendTo($container)}};Buttons.prototype.updateCurrentStyle=function($container){var _this=this;var $cont=$container||this.$toolbar;var styleInfo=this.context.invoke('editor.currentStyle');this.updateBtnStates($cont,{'.note-btn-bold':function(){return styleInfo['font-bold']==='bold'},'.note-btn-italic':function(){return styleInfo['font-italic']==='italic'},'.note-btn-underline':function(){return styleInfo['font-underline']==='underline'},'.note-btn-subscript':function(){return styleInfo['font-subscript']==='subscript'},'.note-btn-superscript':function(){return styleInfo['font-superscript']==='superscript'},'.note-btn-strikethrough':function(){return styleInfo['font-strikethrough']==='strikethrough'}});if(styleInfo['font-family']){var fontNames=styleInfo['font-family'].split(',').map(function(name){return name.replace(/[\'\"]/g,'').replace(/\s+$/,'').replace(/^\s+/,'')});var fontName_1=lists.find(fontNames,this.isFontInstalled.bind(this));$cont.find('.dropdown-fontname a').each(function(idx,item){var $item=$$1(item);var isChecked=($item.data('value')+'')===(fontName_1+'');$item.toggleClass('checked',isChecked)});$cont.find('.note-current-fontname').text(fontName_1).css('font-family',fontName_1)}
if(styleInfo['font-size']){var fontSize_1=styleInfo['font-size'];$cont.find('.dropdown-fontsize a').each(function(idx,item){var $item=$$1(item);var isChecked=($item.data('value')+'')===(fontSize_1+'');$item.toggleClass('checked',isChecked)});$cont.find('.note-current-fontsize').text(fontSize_1)}
if(styleInfo['line-height']){var lineHeight_1=styleInfo['line-height'];$cont.find('.dropdown-line-height li a').each(function(idx,item){var isChecked=($$1(item).data('value')+'')===(lineHeight_1+'');_this.className=isChecked?'checked':''})}};Buttons.prototype.updateBtnStates=function($container,infos){var _this=this;$$1.each(infos,function(selector,pred){_this.ui.toggleBtnActive($container.find(selector),pred())})};Buttons.prototype.tableMoveHandler=function(event){var PX_PER_EM=18;var $picker=$$1(event.target.parentNode);var $dimensionDisplay=$picker.next();var $catcher=$picker.find('.note-dimension-picker-mousecatcher');var $highlighted=$picker.find('.note-dimension-picker-highlighted');var $unhighlighted=$picker.find('.note-dimension-picker-unhighlighted');var posOffset;if(event.offsetX===undefined){var posCatcher=$$1(event.target).offset();posOffset={x:event.pageX-posCatcher.left,y:event.pageY-posCatcher.top}}else{posOffset={x:event.offsetX,y:event.offsetY}}
var dim={c:Math.ceil(posOffset.x/PX_PER_EM)||1,r:Math.ceil(posOffset.y/PX_PER_EM)||1};$highlighted.css({width:dim.c+'em',height:dim.r+'em'});$catcher.data('value',dim.c+'x'+dim.r);if(dim.c>3&&dim.c<this.options.insertTableMaxSize.col){$unhighlighted.css({width:dim.c+1+'em'})}
if(dim.r>3&&dim.r<this.options.insertTableMaxSize.row){$unhighlighted.css({height:dim.r+1+'em'})}
$dimensionDisplay.html(dim.c+' x '+dim.r)};return Buttons}());var Toolbar=(function(){function Toolbar(context){this.context=context;this.$window=$$1(window);this.$document=$$1(document);this.ui=$$1.summernote.ui;this.$note=context.layoutInfo.note;this.$editor=context.layoutInfo.editor;this.$toolbar=context.layoutInfo.toolbar;this.options=context.options;this.followScroll=this.followScroll.bind(this)}
Toolbar.prototype.shouldInitialize=function(){return!this.options.airMode};Toolbar.prototype.initialize=function(){var _this=this;this.options.toolbar=this.options.toolbar||[];if(!this.options.toolbar.length){this.$toolbar.hide()}else{this.context.invoke('buttons.build',this.$toolbar,this.options.toolbar)}
if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}
this.changeContainer(!1);this.$note.on('summernote.keyup summernote.mouseup summernote.change',function(){_this.context.invoke('buttons.updateCurrentStyle')});this.context.invoke('buttons.updateCurrentStyle');if(this.options.followingToolbar){this.$window.on('scroll resize',this.followScroll)}};Toolbar.prototype.destroy=function(){this.$toolbar.children().remove();if(this.options.followingToolbar){this.$window.off('scroll resize',this.followScroll)}};Toolbar.prototype.followScroll=function(){if(this.$editor.hasClass('fullscreen')){return!1}
var $toolbarWrapper=this.$toolbar.parent('.note-toolbar-wrapper');var editorHeight=this.$editor.outerHeight();var editorWidth=this.$editor.width();var toolbarHeight=this.$toolbar.height();$toolbarWrapper.css({height:toolbarHeight});var otherBarHeight=0;if(this.options.otherStaticBar){otherBarHeight=$$1(this.options.otherStaticBar).outerHeight()}
var currentOffset=this.$document.scrollTop();var editorOffsetTop=this.$editor.offset().top;var editorOffsetBottom=editorOffsetTop+editorHeight;var activateOffset=editorOffsetTop-otherBarHeight;var deactivateOffsetBottom=editorOffsetBottom-otherBarHeight-toolbarHeight;if((currentOffset>activateOffset)&&(currentOffset<deactivateOffsetBottom)){this.$toolbar.css({position:'fixed',top:otherBarHeight,width:editorWidth})}else{this.$toolbar.css({position:'relative',top:0,width:'100%'})}};Toolbar.prototype.changeContainer=function(isFullscreen){if(isFullscreen){this.$toolbar.prependTo(this.$editor)}else{if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}}};Toolbar.prototype.updateFullscreen=function(isFullscreen){this.ui.toggleBtnActive(this.$toolbar.find('.btn-fullscreen'),isFullscreen);this.changeContainer(isFullscreen)};Toolbar.prototype.updateCodeview=function(isCodeview){this.ui.toggleBtnActive(this.$toolbar.find('.btn-codeview'),isCodeview);if(isCodeview){this.deactivate()}else{this.activate()}};Toolbar.prototype.activate=function(isIncludeCodeview){var $btn=this.$toolbar.find('button');if(!isIncludeCodeview){$btn=$btn.not('.btn-codeview')}
this.ui.toggleBtn($btn,!0)};Toolbar.prototype.deactivate=function(isIncludeCodeview){var $btn=this.$toolbar.find('button');if(!isIncludeCodeview){$btn=$btn.not('.btn-codeview')}
this.ui.toggleBtn($btn,!1)};return Toolbar}());var LinkDialog=(function(){function LinkDialog(context){this.context=context;this.ui=$$1.summernote.ui;this.$body=$$1(document.body);this.$editor=context.layoutInfo.editor;this.options=context.options;this.lang=this.options.langInfo;context.memo('help.linkDialog.show',this.options.langInfo.help['linkDialog.show'])}
LinkDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor;var body=['<div class="form-group note-form-group">',"<label class=\"note-form-label\">"+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control  note-input" type="text" />','</div>','<div class="form-group note-form-group">',"<label class=\"note-form-label\">"+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />','</div>',!this.options.disableLinkTarget?$$1('<div/>').append(this.ui.checkbox({id:'sn-checkbox-open-in-new-window',text:this.lang.link.openInNewWindow,checked:!0}).render()).html():''].join('');var buttonClass='btn btn-primary note-btn note-btn-primary note-link-btn';var footer="<button type=\"submit\" href=\"#\" class=\""+buttonClass+"\" disabled>"+this.lang.link.insert+"</button>";this.$dialog=this.ui.dialog({className:'link-dialog',title:this.lang.link.insert,fade:this.options.dialogsFade,body:body,footer:footer}).render().appendTo($container)};LinkDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};LinkDialog.prototype.bindEnterKey=function($input,$btn){$input.on('keypress',function(event){if(event.keyCode===key.code.ENTER){event.preventDefault();$btn.trigger('click')}})};LinkDialog.prototype.toggleLinkBtn=function($linkBtn,$linkText,$linkUrl){this.ui.toggleBtn($linkBtn,$linkText.val()&&$linkUrl.val())};LinkDialog.prototype.showLinkDialog=function(linkInfo){var _this=this;return $$1.Deferred(function(deferred){var $linkText=_this.$dialog.find('.note-link-text');var $linkUrl=_this.$dialog.find('.note-link-url');var $linkBtn=_this.$dialog.find('.note-link-btn');var $openInNewWindow=_this.$dialog.find('input[type=checkbox]');_this.ui.onDialogShown(_this.$dialog,function(){_this.context.triggerEvent('dialog.shown');if(!linkInfo.url){linkInfo.url=linkInfo.text}
$linkText.val(linkInfo.text);var handleLinkTextUpdate=function(){_this.toggleLinkBtn($linkBtn,$linkText,$linkUrl);linkInfo.text=$linkText.val()};$linkText.on('input',handleLinkTextUpdate).on('paste',function(){setTimeout(handleLinkTextUpdate,0)});var handleLinkUrlUpdate=function(){_this.toggleLinkBtn($linkBtn,$linkText,$linkUrl);if(!linkInfo.text){$linkText.val($linkUrl.val())}};$linkUrl.on('input',handleLinkUrlUpdate).on('paste',function(){setTimeout(handleLinkUrlUpdate,0)}).val(linkInfo.url);if(!env.isSupportTouch){$linkUrl.trigger('focus')}
_this.toggleLinkBtn($linkBtn,$linkText,$linkUrl);_this.bindEnterKey($linkUrl,$linkBtn);_this.bindEnterKey($linkText,$linkBtn);var isChecked=linkInfo.isNewWindow!==undefined?linkInfo.isNewWindow:_this.context.options.linkTargetBlank;$openInNewWindow.prop('checked',isChecked);$linkBtn.one('click',function(event){event.preventDefault();deferred.resolve({range:linkInfo.range,url:$linkUrl.val(),text:$linkText.val(),isNewWindow:$openInNewWindow.is(':checked')});_this.ui.hideDialog(_this.$dialog)})});_this.ui.onDialogHidden(_this.$dialog,function(){$linkText.off('input paste keypress');$linkUrl.off('input paste keypress');$linkBtn.off('click');if(deferred.state()==='pending'){deferred.reject()}});_this.ui.showDialog(_this.$dialog)}).promise()};LinkDialog.prototype.show=function(){var _this=this;var linkInfo=this.context.invoke('editor.getLinkInfo');this.context.invoke('editor.saveRange');this.showLinkDialog(linkInfo).then(function(linkInfo){_this.context.invoke('editor.restoreRange');_this.context.invoke('editor.createLink',linkInfo)}).fail(function(){_this.context.invoke('editor.restoreRange')})};return LinkDialog}());var LinkPopover=(function(){function LinkPopover(context){var _this=this;this.context=context;this.ui=$$1.summernote.ui;this.options=context.options;this.events={'summernote.keyup summernote.mouseup summernote.change summernote.scroll':function(){_this.update()},'summernote.disable summernote.dialog.shown':function(){_this.hide()}}}
LinkPopover.prototype.shouldInitialize=function(){return!lists.isEmpty(this.options.popover.link)};LinkPopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:'note-link-popover',callback:function($node){var $content=$node.find('.popover-content,.note-popover-content');$content.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var $content=this.$popover.find('.popover-content,.note-popover-content');this.context.invoke('buttons.build',$content,this.options.popover.link)};LinkPopover.prototype.destroy=function(){this.$popover.remove()};LinkPopover.prototype.update=function(){if(!this.context.invoke('editor.hasFocus')){this.hide();return}
var rng=this.context.invoke('editor.createRange');if(rng.isCollapsed()&&rng.isOnAnchor()){var anchor=dom.ancestor(rng.sc,dom.isAnchor);var href=$$1(anchor).attr('href');this.$popover.find('a').attr('href',href).html(href);var pos=dom.posFromPlaceholder(anchor);this.$popover.css({display:'block',left:pos.left,top:pos.top})}else{this.hide()}};LinkPopover.prototype.hide=function(){this.$popover.hide()};return LinkPopover}());var ImageDialog=(function(){function ImageDialog(context){this.context=context;this.ui=$$1.summernote.ui;this.$body=$$1(document.body);this.$editor=context.layoutInfo.editor;this.options=context.options;this.lang=this.options.langInfo}
ImageDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor;var imageLimitation='';if(this.options.maximumImageFileSize){var unit=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024));var readableSize=(this.options.maximumImageFileSize/Math.pow(1024,unit)).toFixed(2)*1+' '+' KMGTP'[unit]+'B';imageLimitation="<small>"+(this.lang.image.maximumFileSize+' : '+readableSize)+"</small>"}
var body=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+'</label>','<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',imageLimitation,'</div>','<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+'</label>','<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />','</div>'].join('');var buttonClass='btn btn-primary note-btn note-btn-primary note-image-btn';var footer="<button type=\"submit\" href=\"#\" class=\""+buttonClass+"\" disabled>"+this.lang.image.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:body,footer:footer}).render().appendTo($container)};ImageDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};ImageDialog.prototype.bindEnterKey=function($input,$btn){$input.on('keypress',function(event){if(event.keyCode===key.code.ENTER){event.preventDefault();$btn.trigger('click')}})};ImageDialog.prototype.show=function(){var _this=this;this.context.invoke('editor.saveRange');this.showImageDialog().then(function(data){_this.ui.hideDialog(_this.$dialog);_this.context.invoke('editor.restoreRange');if(typeof data==='string'){_this.context.invoke('editor.insertImage',data)}else{_this.context.invoke('editor.insertImagesOrCallback',data)}}).fail(function(){_this.context.invoke('editor.restoreRange')})};ImageDialog.prototype.showImageDialog=function(){var _this=this;return $$1.Deferred(function(deferred){var $imageInput=_this.$dialog.find('.note-image-input');var $imageUrl=_this.$dialog.find('.note-image-url');var $imageBtn=_this.$dialog.find('.note-image-btn');_this.ui.onDialogShown(_this.$dialog,function(){_this.context.triggerEvent('dialog.shown');$imageInput.replaceWith($imageInput.clone().on('change',function(event){deferred.resolve(event.target.files||event.target.value)}).val(''));$imageBtn.click(function(event){event.preventDefault();deferred.resolve($imageUrl.val())});$imageUrl.on('keyup paste',function(){var url=$imageUrl.val();_this.ui.toggleBtn($imageBtn,url)}).val('');if(!env.isSupportTouch){$imageUrl.trigger('focus')}
_this.bindEnterKey($imageUrl,$imageBtn)});_this.ui.onDialogHidden(_this.$dialog,function(){$imageInput.off('change');$imageUrl.off('keyup paste keypress');$imageBtn.off('click');if(deferred.state()==='pending'){deferred.reject()}});_this.ui.showDialog(_this.$dialog)})};return ImageDialog}());var ImagePopover=(function(){function ImagePopover(context){var _this=this;this.context=context;this.ui=$$1.summernote.ui;this.editable=context.layoutInfo.editable[0];this.options=context.options;this.events={'summernote.disable':function(){_this.hide()}}}
ImagePopover.prototype.shouldInitialize=function(){return!lists.isEmpty(this.options.popover.image)};ImagePopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:'note-image-popover'}).render().appendTo(this.options.container);var $content=this.$popover.find('.popover-content,.note-popover-content');this.context.invoke('buttons.build',$content,this.options.popover.image)};ImagePopover.prototype.destroy=function(){this.$popover.remove()};ImagePopover.prototype.update=function(target){if(dom.isImg(target)){var pos=dom.posFromPlaceholder(target);var posEditor=dom.posFromPlaceholder(this.editable);this.$popover.css({display:'block',left:this.options.popatmouse?event.pageX-20:pos.left,top:this.options.popatmouse?event.pageY:Math.min(pos.top,posEditor.top)})}else{this.hide()}};ImagePopover.prototype.hide=function(){this.$popover.hide()};return ImagePopover}());var TablePopover=(function(){function TablePopover(context){var _this=this;this.context=context;this.ui=$$1.summernote.ui;this.options=context.options;this.events={'summernote.mousedown':function(we,e){_this.update(e.target)},'summernote.keyup summernote.scroll summernote.change':function(){_this.update()},'summernote.disable':function(){_this.hide()}}}
TablePopover.prototype.shouldInitialize=function(){return!lists.isEmpty(this.options.popover.table)};TablePopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:'note-table-popover'}).render().appendTo(this.options.container);var $content=this.$popover.find('.popover-content,.note-popover-content');this.context.invoke('buttons.build',$content,this.options.popover.table);if(env.isFF){document.execCommand('enableInlineTableEditing',!1,!1)}};TablePopover.prototype.destroy=function(){this.$popover.remove()};TablePopover.prototype.update=function(target){if(this.context.isDisabled()){return!1}
var isCell=dom.isCell(target);if(isCell){var pos=dom.posFromPlaceholder(target);this.$popover.css({display:'block',left:pos.left,top:pos.top})}else{this.hide()}
return isCell};TablePopover.prototype.hide=function(){this.$popover.hide()};return TablePopover}());var VideoDialog=(function(){function VideoDialog(context){this.context=context;this.ui=$$1.summernote.ui;this.$body=$$1(document.body);this.$editor=context.layoutInfo.editor;this.options=context.options;this.lang=this.options.langInfo}
VideoDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor;var body=['<div class="form-group note-form-group row-fluid">',"<label class=\"note-form-label\">"+this.lang.video.url+" <small class=\"text-muted\">"+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />','</div>'].join('');var buttonClass='btn btn-primary note-btn note-btn-primary note-video-btn';var footer="<button type=\"submit\" href=\"#\" class=\""+buttonClass+"\" disabled>"+this.lang.video.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:body,footer:footer}).render().appendTo($container)};VideoDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};VideoDialog.prototype.bindEnterKey=function($input,$btn){$input.on('keypress',function(event){if(event.keyCode===key.code.ENTER){event.preventDefault();$btn.trigger('click')}})};VideoDialog.prototype.createVideoNode=function(url){var ytRegExp=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var ytMatch=url.match(ytRegExp);var igRegExp=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/;var igMatch=url.match(igRegExp);var vRegExp=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/;var vMatch=url.match(vRegExp);var vimRegExp=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/;var vimMatch=url.match(vimRegExp);var dmRegExp=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var dmMatch=url.match(dmRegExp);var youkuRegExp=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var youkuMatch=url.match(youkuRegExp);var qqRegExp=/\/\/v\.qq\.com.*?vid=(.+)/;var qqMatch=url.match(qqRegExp);var qqRegExp2=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/;var qqMatch2=url.match(qqRegExp2);var mp4RegExp=/^.+.(mp4|m4v)$/;var mp4Match=url.match(mp4RegExp);var oggRegExp=/^.+.(ogg|ogv)$/;var oggMatch=url.match(oggRegExp);var webmRegExp=/^.+.(webm)$/;var webmMatch=url.match(webmRegExp);var $video;if(ytMatch&&ytMatch[1].length===11){var youtubeId=ytMatch[1];$video=$$1('<iframe>').attr('frameborder',0).attr('src','//www.youtube.com/embed/'+youtubeId).attr('width','640').attr('height','360')}else if(igMatch&&igMatch[0].length){$video=$$1('<iframe>').attr('frameborder',0).attr('src','https://instagram.com/p/'+igMatch[1]+'/embed/').attr('width','612').attr('height','710').attr('scrolling','no').attr('allowtransparency','true')}else if(vMatch&&vMatch[0].length){$video=$$1('<iframe>').attr('frameborder',0).attr('src',vMatch[0]+'/embed/simple').attr('width','600').attr('height','600').attr('class','vine-embed')}else if(vimMatch&&vimMatch[3].length){$video=$$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>').attr('frameborder',0).attr('src','//player.vimeo.com/video/'+vimMatch[3]).attr('width','640').attr('height','360')}else if(dmMatch&&dmMatch[2].length){$video=$$1('<iframe>').attr('frameborder',0).attr('src','//www.dailymotion.com/embed/video/'+dmMatch[2]).attr('width','640').attr('height','360')}else if(youkuMatch&&youkuMatch[1].length){$video=$$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>').attr('frameborder',0).attr('height','498').attr('width','510').attr('src','//player.youku.com/embed/'+youkuMatch[1])}else if((qqMatch&&qqMatch[1].length)||(qqMatch2&&qqMatch2[2].length)){var vid=((qqMatch&&qqMatch[1].length)?qqMatch[1]:qqMatch2[2]);$video=$$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>').attr('frameborder',0).attr('height','310').attr('width','500').attr('src','http://v.qq.com/iframe/player.html?vid='+vid+'&amp;auto=0')}else if(mp4Match||oggMatch||webmMatch){$video=$$1('<video controls>').attr('src',url).attr('width','640').attr('height','360')}else{return!1}
$video.addClass('note-video-clip');return $video[0]};VideoDialog.prototype.show=function(){var _this=this;var text=this.context.invoke('editor.getSelectedText');this.context.invoke('editor.saveRange');this.showVideoDialog(text).then(function(url){_this.ui.hideDialog(_this.$dialog);_this.context.invoke('editor.restoreRange');var $node=_this.createVideoNode(url);if($node){_this.context.invoke('editor.insertNode',$node)}}).fail(function(){_this.context.invoke('editor.restoreRange')})};VideoDialog.prototype.showVideoDialog=function(text){var _this=this;return $$1.Deferred(function(deferred){var $videoUrl=_this.$dialog.find('.note-video-url');var $videoBtn=_this.$dialog.find('.note-video-btn');_this.ui.onDialogShown(_this.$dialog,function(){_this.context.triggerEvent('dialog.shown');$videoUrl.val(text).on('input',function(){_this.ui.toggleBtn($videoBtn,$videoUrl.val())});if(!env.isSupportTouch){$videoUrl.trigger('focus')}
$videoBtn.click(function(event){event.preventDefault();deferred.resolve($videoUrl.val())});_this.bindEnterKey($videoUrl,$videoBtn)});_this.ui.onDialogHidden(_this.$dialog,function(){$videoUrl.off('input');$videoBtn.off('click');if(deferred.state()==='pending'){deferred.reject()}});_this.ui.showDialog(_this.$dialog)})};return VideoDialog}());var HelpDialog=(function(){function HelpDialog(context){this.context=context;this.ui=$$1.summernote.ui;this.$body=$$1(document.body);this.$editor=context.layoutInfo.editor;this.options=context.options;this.lang=this.options.langInfo}
HelpDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor;var body=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.9</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>','</p>'].join('');this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:body,callback:function($node){$node.find('.modal-body,.note-modal-body').css({'max-height':300,'overflow':'scroll'})}}).render().appendTo($container)};HelpDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};HelpDialog.prototype.createShortcutList=function(){var _this=this;var keyMap=this.options.keyMap[env.isMac?'mac':'pc'];return Object.keys(keyMap).map(function(key){var command=keyMap[key];var $row=$$1('<div><div class="help-list-item"/></div>');$row.append($$1('<label><kbd>'+key+'</kdb></label>').css({'width':180,'margin-right':10})).append($$1('<span/>').html(_this.context.memo('help.'+command)||command));return $row.html()}).join('')};HelpDialog.prototype.showHelpDialog=function(){var _this=this;return $$1.Deferred(function(deferred){_this.ui.onDialogShown(_this.$dialog,function(){_this.context.triggerEvent('dialog.shown');deferred.resolve()});_this.ui.showDialog(_this.$dialog)}).promise()};HelpDialog.prototype.show=function(){var _this=this;this.context.invoke('editor.saveRange');this.showHelpDialog().then(function(){_this.context.invoke('editor.restoreRange')})};return HelpDialog}());var AIR_MODE_POPOVER_X_OFFSET=20;var AirPopover=(function(){function AirPopover(context){var _this=this;this.context=context;this.ui=$$1.summernote.ui;this.options=context.options;this.events={'summernote.keyup summernote.mouseup summernote.scroll':function(){_this.update()},'summernote.disable summernote.change summernote.dialog.shown':function(){_this.hide()},'summernote.focusout':function(we,e){if(env.isFF){return}
if(!e.relatedTarget||!dom.ancestor(e.relatedTarget,func.eq(_this.$popover[0]))){_this.hide()}}}}
AirPopover.prototype.shouldInitialize=function(){return this.options.airMode&&!lists.isEmpty(this.options.popover.air)};AirPopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:'note-air-popover'}).render().appendTo(this.options.container);var $content=this.$popover.find('.popover-content');this.context.invoke('buttons.build',$content,this.options.popover.air)};AirPopover.prototype.destroy=function(){this.$popover.remove()};AirPopover.prototype.update=function(){var styleInfo=this.context.invoke('editor.currentStyle');if(styleInfo.range&&!styleInfo.range.isCollapsed()){var rect=lists.last(styleInfo.range.getClientRects());if(rect){var bnd=func.rect2bnd(rect);this.$popover.css({display:'block',left:Math.max(bnd.left+bnd.width/2,0)-AIR_MODE_POPOVER_X_OFFSET,top:bnd.top+bnd.height});this.context.invoke('buttons.updateCurrentStyle',this.$popover)}}else{this.hide()}};AirPopover.prototype.hide=function(){this.$popover.hide()};return AirPopover}());var POPOVER_DIST=5;var HintPopover=(function(){function HintPopover(context){var _this=this;this.context=context;this.ui=$$1.summernote.ui;this.$editable=context.layoutInfo.editable;this.options=context.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||'bottom';this.hints=$$1.isArray(this.hint)?this.hint:[this.hint];this.events={'summernote.keyup':function(we,e){if(!e.isDefaultPrevented()){_this.handleKeyup(e)}},'summernote.keydown':function(we,e){_this.handleKeydown(e)},'summernote.disable summernote.dialog.shown':function(){_this.hide()}}}
HintPopover.prototype.shouldInitialize=function(){return this.hints.length>0};HintPopover.prototype.initialize=function(){var _this=this;this.lastWordRange=null;this.$popover=this.ui.popover({className:'note-hint-popover',hideArrow:!0,direction:''}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find('.popover-content,.note-popover-content');this.$content.on('click','.note-hint-item',function(){_this.$content.find('.active').removeClass('active');$$1(_this).addClass('active');_this.replace()})};HintPopover.prototype.destroy=function(){this.$popover.remove()};HintPopover.prototype.selectItem=function($item){this.$content.find('.active').removeClass('active');$item.addClass('active');this.$content[0].scrollTop=$item[0].offsetTop-(this.$content.innerHeight()/2)};HintPopover.prototype.moveDown=function(){var $current=this.$content.find('.note-hint-item.active');var $next=$current.next();if($next.length){this.selectItem($next)}else{var $nextGroup=$current.parent().next();if(!$nextGroup.length){$nextGroup=this.$content.find('.note-hint-group').first()}
this.selectItem($nextGroup.find('.note-hint-item').first())}};HintPopover.prototype.moveUp=function(){var $current=this.$content.find('.note-hint-item.active');var $prev=$current.prev();if($prev.length){this.selectItem($prev)}else{var $prevGroup=$current.parent().prev();if(!$prevGroup.length){$prevGroup=this.$content.find('.note-hint-group').last()}
this.selectItem($prevGroup.find('.note-hint-item').last())}};HintPopover.prototype.replace=function(){var $item=this.$content.find('.note-hint-item.active');if($item.length){var node=this.nodeFromItem($item);this.lastWordRange.insertNode(node);range.createFromNode(node).collapse().select();this.lastWordRange=null;this.hide();this.context.triggerEvent('change',this.$editable.html(),this.$editable[0]);this.context.invoke('editor.focus')}};HintPopover.prototype.nodeFromItem=function($item){var hint=this.hints[$item.data('index')];var item=$item.data('item');var node=hint.content?hint.content(item):item;if(typeof node==='string'){node=dom.createText(node)}
return node};HintPopover.prototype.createItemTemplates=function(hintIdx,items){var hint=this.hints[hintIdx];return items.map(function(item,idx){var $item=$$1('<div class="note-hint-item"/>');$item.append(hint.template?hint.template(item):item+'');$item.data({'index':hintIdx,'item':item});return $item})};HintPopover.prototype.handleKeydown=function(e){if(!this.$popover.is(':visible')){return}
if(e.keyCode===key.code.ENTER){e.preventDefault();this.replace()}else if(e.keyCode===key.code.UP){e.preventDefault();this.moveUp()}else if(e.keyCode===key.code.DOWN){e.preventDefault();this.moveDown()}};HintPopover.prototype.searchKeyword=function(index,keyword,callback){var hint=this.hints[index];if(hint&&hint.match.test(keyword)&&hint.search){var matches=hint.match.exec(keyword);hint.search(matches[1],callback)}else{callback()}};HintPopover.prototype.createGroup=function(idx,keyword){var _this=this;var $group=$$1('<div class="note-hint-group note-hint-group-'+idx+'"/>');this.searchKeyword(idx,keyword,function(items){items=items||[];if(items.length){$group.html(_this.createItemTemplates(idx,items));_this.show()}});return $group};HintPopover.prototype.handleKeyup=function(e){var _this=this;if(!lists.contains([key.code.ENTER,key.code.UP,key.code.DOWN],e.keyCode)){var wordRange=this.context.invoke('editor.createRange').getWordRange();var keyword_1=wordRange.toString();if(this.hints.length&&keyword_1){this.$content.empty();var bnd=func.rect2bnd(lists.last(wordRange.getClientRects()));if(bnd){this.$popover.hide();this.lastWordRange=wordRange;this.hints.forEach(function(hint,idx){if(hint.match.test(keyword_1)){_this.createGroup(idx,keyword_1).appendTo(_this.$content)}});this.$content.find('.note-hint-item:first').addClass('active');if(this.direction==='top'){this.$popover.css({left:bnd.left,top:bnd.top-this.$popover.outerHeight()-POPOVER_DIST})}else{this.$popover.css({left:bnd.left,top:bnd.top+bnd.height+POPOVER_DIST})}}}else{this.hide()}}};HintPopover.prototype.show=function(){this.$popover.show()};HintPopover.prototype.hide=function(){this.$popover.hide()};return HintPopover}());var Context=(function(){function Context($note,options){this.ui=$$1.summernote.ui;this.$note=$note;this.memos={};this.modules={};this.layoutInfo={};this.options=options;this.initialize()}
Context.prototype.initialize=function(){this.layoutInfo=this.ui.createLayout(this.$note,this.options);this._initialize();this.$note.hide();return this};Context.prototype.destroy=function(){this._destroy();this.$note.removeData('summernote');this.ui.removeLayout(this.$note,this.layoutInfo)};Context.prototype.reset=function(){var disabled=this.isDisabled();this.code(dom.emptyPara);this._destroy();this._initialize();if(disabled){this.disable()}};Context.prototype._initialize=function(){var _this=this;var buttons=$$1.extend({},this.options.buttons);Object.keys(buttons).forEach(function(key){_this.memo('button.'+key,buttons[key])});var modules=$$1.extend({},this.options.modules,$$1.summernote.plugins||{});Object.keys(modules).forEach(function(key){_this.module(key,modules[key],!0)});Object.keys(this.modules).forEach(function(key){_this.initializeModule(key)})};Context.prototype._destroy=function(){var _this=this;Object.keys(this.modules).reverse().forEach(function(key){_this.removeModule(key)});Object.keys(this.memos).forEach(function(key){_this.removeMemo(key)});this.triggerEvent('destroy',this)};Context.prototype.code=function(html){var isActivated=this.invoke('codeview.isActivated');if(html===undefined){this.invoke('codeview.sync');return isActivated?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(isActivated){this.layoutInfo.codable.val(html)}else{this.layoutInfo.editable.html(html)}
this.$note.val(html);this.triggerEvent('change',html)}};Context.prototype.isDisabled=function(){return this.layoutInfo.editable.attr('contenteditable')==='false'};Context.prototype.enable=function(){this.layoutInfo.editable.attr('contenteditable',!0);this.invoke('toolbar.activate',!0);this.triggerEvent('disable',!1)};Context.prototype.disable=function(){if(this.invoke('codeview.isActivated')){this.invoke('codeview.deactivate')}
this.layoutInfo.editable.attr('contenteditable',!1);this.invoke('toolbar.deactivate',!0);this.triggerEvent('disable',!0)};Context.prototype.triggerEvent=function(){var namespace=lists.head(arguments);var args=lists.tail(lists.from(arguments));var callback=this.options.callbacks[func.namespaceToCamel(namespace,'on')];if(callback){callback.apply(this.$note[0],args)}
this.$note.trigger('summernote.'+namespace,args)};Context.prototype.initializeModule=function(key){var module=this.modules[key];module.shouldInitialize=module.shouldInitialize||func.ok;if(!module.shouldInitialize()){return}
if(module.initialize){module.initialize()}
if(module.events){dom.attachEvents(this.$note,module.events)}};Context.prototype.module=function(key,ModuleClass,withoutIntialize){if(arguments.length===1){return this.modules[key]}
this.modules[key]=new ModuleClass(this);if(!withoutIntialize){this.initializeModule(key)}};Context.prototype.removeModule=function(key){var module=this.modules[key];if(module.shouldInitialize()){if(module.events){dom.detachEvents(this.$note,module.events)}
if(module.destroy){module.destroy()}}
delete this.modules[key]};Context.prototype.memo=function(key,obj){if(arguments.length===1){return this.memos[key]}
this.memos[key]=obj};Context.prototype.removeMemo=function(key){if(this.memos[key]&&this.memos[key].destroy){this.memos[key].destroy()}
delete this.memos[key]};Context.prototype.createInvokeHandlerAndUpdateState=function(namespace,value){var _this=this;return function(event){_this.createInvokeHandler(namespace,value)(event);_this.invoke('buttons.updateCurrentStyle')}};Context.prototype.createInvokeHandler=function(namespace,value){var _this=this;return function(event){event.preventDefault();var $target=$$1(event.target);_this.invoke(namespace,value||$target.closest('[data-value]').data('value'),$target)}};Context.prototype.invoke=function(){var namespace=lists.head(arguments);var args=lists.tail(lists.from(arguments));var splits=namespace.split('.');var hasSeparator=splits.length>1;var moduleName=hasSeparator&&lists.head(splits);var methodName=hasSeparator?lists.last(splits):lists.head(splits);var module=this.modules[moduleName||'editor'];if(!moduleName&&this[methodName]){return this[methodName].apply(this,args)}else if(module&&module[methodName]&&module.shouldInitialize()){return module[methodName].apply(module,args)}};return Context}());$$1.fn.extend({summernote:function(){var type=$$1.type(lists.head(arguments));var isExternalAPICalled=type==='string';var hasInitOptions=type==='object';var options=$$1.extend({},$$1.summernote.options,hasInitOptions?lists.head(arguments):{});options.langInfo=$$1.extend(!0,{},$$1.summernote.lang['en-US'],$$1.summernote.lang[options.lang]);options.icons=$$1.extend(!0,{},$$1.summernote.options.icons,options.icons);options.tooltip=options.tooltip==='auto'?!env.isSupportTouch:options.tooltip;this.each(function(idx,note){var $note=$$1(note);if(!$note.data('summernote')){var context=new Context($note,options);$note.data('summernote',context);$note.data('summernote').triggerEvent('init',context.layoutInfo)}});var $note=this.first();if($note.length){var context=$note.data('summernote');if(isExternalAPICalled){return context.invoke.apply(context,lists.from(arguments))}else if(options.focus){context.invoke('editor.focus')}}
return this}});$$1.summernote=$$1.extend($$1.summernote,{version:'0.8.9',ui:ui,dom:dom,plugins:{},options:{modules:{'editor':Editor,'clipboard':Clipboard,'dropzone':Dropzone,'codeview':CodeView,'statusbar':Statusbar,'fullscreen':Fullscreen,'handle':Handle,'hintPopover':HintPopover,'autoLink':AutoLink,'autoSync':AutoSync,'placeholder':Placeholder,'buttons':Buttons,'toolbar':Toolbar,'linkDialog':LinkDialog,'linkPopover':LinkPopover,'imageDialog':ImageDialog,'imagePopover':ImagePopover,'tablePopover':TablePopover,'videoDialog':VideoDialog,'helpDialog':HelpDialog,'airPopover':AirPopover},buttons:{},lang:'en-US',followingToolbar:!0,otherStaticBar:'',toolbar:[['style',['style']],['font',['bold','underline','clear']],['fontname',['fontname']],['color',['color']],['para',['ul','ol','paragraph']],['table',['table']],['insert',['link','picture','video']],['view',['fullscreen','codeview','help']]],popatmouse:!0,popover:{image:[['imagesize',['imageSize100','imageSize50','imageSize25']],['float',['floatLeft','floatRight','floatNone']],['remove',['removeMedia']]],link:[['link',['linkDialogShow','unlink']]],table:[['add',['addRowDown','addRowUp','addColLeft','addColRight']],['delete',['deleteRow','deleteCol','deleteTable']]],air:[['color',['color']],['font',['bold','underline','clear']],['para',['ul','paragraph']],['table',['table']],['insert',['link','picture']]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:'bottom',tooltip:'auto',container:'body',maxTextLength:0,styleTags:['p','blockquote','pre','h1','h2','h3','h4','h5','h6'],fontNames:['Arial','Arial Black','Comic Sans MS','Courier New','Helvetica Neue','Helvetica','Impact','Lucida Grande','Tahoma','Times New Roman','Verdana'],fontSizes:['8','9','10','11','12','14','18','24','36'],colors:[['#000000','#424242','#636363','#9C9C94','#CEC6CE','#EFEFEF','#F7F7F7','#FFFFFF'],['#FF0000','#FF9C00','#FFFF00','#00FF00','#00FFFF','#0000FF','#9C00FF','#FF00FF'],['#F7C6CE','#FFE7CE','#FFEFC6','#D6EFD6','#CEDEE7','#CEE7F7','#D6D6E7','#E7D6DE'],['#E79C9C','#FFC69C','#FFE79C','#B5D6A5','#A5C6CE','#9CC6EF','#B5A5D6','#D6A5BD'],['#E76363','#F7AD6B','#FFD663','#94BD7B','#73A5AD','#6BADDE','#8C7BC6','#C67BA5'],['#CE0000','#E79439','#EFC631','#6BA54A','#4A7B8C','#3984C6','#634AA5','#A54A7B'],['#9C0000','#B56308','#BD9400','#397B21','#104A5A','#085294','#311873','#731842'],['#630000','#7B3900','#846300','#295218','#083139','#003163','#21104A','#4A1031']],lineHeights:['1.0','1.2','1.4','1.5','1.6','1.8','2.0','3.0'],tableClassName:'table table-bordered',insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:'text/html',htmlMode:!0,lineNumbers:!0},keyMap:{pc:{'ENTER':'insertParagraph','CTRL+Z':'undo','CTRL+Y':'redo','TAB':'tab','SHIFT+TAB':'untab','CTRL+B':'bold','CTRL+I':'italic','CTRL+U':'underline','CTRL+SHIFT+S':'strikethrough','CTRL+BACKSLASH':'removeFormat','CTRL+SHIFT+L':'justifyLeft','CTRL+SHIFT+E':'justifyCenter','CTRL+SHIFT+R':'justifyRight','CTRL+SHIFT+J':'justifyFull','CTRL+SHIFT+NUM7':'insertUnorderedList','CTRL+SHIFT+NUM8':'insertOrderedList','CTRL+LEFTBRACKET':'outdent','CTRL+RIGHTBRACKET':'indent','CTRL+NUM0':'formatPara','CTRL+NUM1':'formatH1','CTRL+NUM2':'formatH2','CTRL+NUM3':'formatH3','CTRL+NUM4':'formatH4','CTRL+NUM5':'formatH5','CTRL+NUM6':'formatH6','CTRL+ENTER':'insertHorizontalRule','CTRL+K':'linkDialog.show'},mac:{'ENTER':'insertParagraph','CMD+Z':'undo','CMD+SHIFT+Z':'redo','TAB':'tab','SHIFT+TAB':'untab','CMD+B':'bold','CMD+I':'italic','CMD+U':'underline','CMD+SHIFT+S':'strikethrough','CMD+BACKSLASH':'removeFormat','CMD+SHIFT+L':'justifyLeft','CMD+SHIFT+E':'justifyCenter','CMD+SHIFT+R':'justifyRight','CMD+SHIFT+J':'justifyFull','CMD+SHIFT+NUM7':'insertUnorderedList','CMD+SHIFT+NUM8':'insertOrderedList','CMD+LEFTBRACKET':'outdent','CMD+RIGHTBRACKET':'indent','CMD+NUM0':'formatPara','CMD+NUM1':'formatH1','CMD+NUM2':'formatH2','CMD+NUM3':'formatH3','CMD+NUM4':'formatH4','CMD+NUM5':'formatH5','CMD+NUM6':'formatH6','CMD+ENTER':'insertHorizontalRule','CMD+K':'linkDialog.show'}},icons:{'align':'note-icon-align','alignCenter':'note-icon-align-center','alignJustify':'note-icon-align-justify','alignLeft':'note-icon-align-left','alignRight':'note-icon-align-right','rowBelow':'note-icon-row-below','colBefore':'note-icon-col-before','colAfter':'note-icon-col-after','rowAbove':'note-icon-row-above','rowRemove':'note-icon-row-remove','colRemove':'note-icon-col-remove','indent':'note-icon-align-indent','outdent':'note-icon-align-outdent','arrowsAlt':'note-icon-arrows-alt','bold':'note-icon-bold','caret':'note-icon-caret','circle':'note-icon-circle','close':'note-icon-close','code':'note-icon-code','eraser':'note-icon-eraser','font':'note-icon-font','frame':'note-icon-frame','italic':'note-icon-italic','link':'note-icon-link','unlink':'note-icon-chain-broken','magic':'note-icon-magic','menuCheck':'note-icon-menu-check','minus':'note-icon-minus','orderedlist':'note-icon-orderedlist','pencil':'note-icon-pencil','picture':'note-icon-picture','question':'note-icon-question','redo':'note-icon-redo','square':'note-icon-square','strikethrough':'note-icon-strikethrough','subscript':'note-icon-subscript','superscript':'note-icon-superscript','table':'note-icon-table','textHeight':'note-icon-text-height','trash':'note-icon-trash','underline':'note-icon-underline','undo':'note-icon-undo','unorderedlist':'note-icon-unorderedlist','video':'note-icon-video'}}})})));Berry=function(options,target){this.destroy=function(){this.trigger('destroy');this.each(function(){if(typeof this.destroy==='function'){this.destroy()}});this.$el.empty();for(var i=this.fieldsets.length-1;i>=0;i--){$(this.fieldsets[i]).empty()}
if(typeof this.renderer.destroy==='function'){this.renderer.destroy()}
delete Berry.instances[this.options.name];this.trigger('destroyed')};this.toJSON=function(s,validate){if(typeof s==='string'&&s.length>0){this.attributes=this.find(s).getValue()}else{this.attributes=processMultiples.call(this,this.parsefields(this.options))}
if(validate||(typeof valid=='undefined'&&this.options.validate)||!this.valid){this.validate(!0)}
return this.attributes};var cloneMultiples=function(attributes,fields){this.each(function(attributes){if(this.multiple){var min=this.multiple.min||1;if(typeof attributes!=='undefined'){var items=Berry.search(attributes,this.getPath());var attcount=0;if(items!==null){attcount=items.length}
if(min<attcount){min=attcount}}
var status=!0;var root=this.fields;if(this.parent){root=this.parent.children}
if(root[this.name]){while(this.owner.find(this.getPath()).length<min&&status){status=this.clone()}}}},[attributes],fields);this.each(function(attributes){if(this.multiple){var min=this.multiple.min||1;if(typeof attributes!=='undefined'){var items=Berry.search(attributes,this.getPath());var attcount=0;if(items!==null){attcount=items.length}
if(min<attcount){min=attcount}}
var status=!0;var root=this.fields;if(this.parent){root=this.parent.children}
if(root[this.name]){while(this.owner.find(this.getPath()).length<min&&status){status=this.clone()}}}},[attributes],fields);return attributes};this.populate=function(attributes,fields){this.each(function(attributes){if(!this.isContainer){var temp=Berry.search(attributes,this.getPath());this.setValue(temp);this.trigger('change');this.toJSON()}},[attributes],fields)};this.each=function(toCall,args,fields){fields=(fields||this.fields);var c=!0;for(var i in fields){if(c!==!1){var field=fields[i];if(field.item&&field.isActive()){c=toCall.apply(field,args)}else if(!$.isEmptyObject(field.instances)){c=this.each(toCall,args,field.instances)}
if(!$.isEmptyObject(field.children)){c=this.each(toCall,args,field.children)}}else{break}}
if(c&&(typeof args!=='undefined')){return args}else{return c}};this.find=function(s,fields){var items=[];this.each(function(s,items){if(this.getPath()==s||this.name==s){items.push(this)}},[s,items],fields);if(items.length==0){return!1}
if(items.length>1||items[0].multiple){return items}
return items[0]};this.findByID=function(id,fields){var items=[];this.each(function(id,items){if(this.id==id){items.push(this)}},[id,items],fields);return items[0]};this.processfields=function(fields,target,parent){for(var i in fields){var state=this.createField(Berry.normalizeItem(fields[i],i,this.options.default),target,parent)}};this.createField=function(item,target,parent,insert){if(target[0]!==undefined){target=target[0]}
var field=addField.call(this,item,parent,target,insert);if(typeof field.fieldset==='undefined'){field.fieldset=target}
if(insert=='before'){$(target).before(field.render())}else if(insert=='after'){$(target).after(field.render())}else{if(field.type!=='fieldset'||field.isChild()||!this.sectionsEnabled){var cRow;if(typeof $(field.fieldset).children('.row').last().attr('id')!=='undefined'){cRow=rows[$(field.fieldset).children('.row').last().attr('id')]}
if(typeof cRow==='undefined'||(cRow.used+parseInt(field.columns,10)+parseInt(field.offset,10))>this.options.columns){var temp=Berry.getUID();cRow={};cRow.used=0;cRow.ref=$(Berry.render('berry_row',{id:temp}));rows[temp]=cRow;$(field.fieldset).append(cRow.ref)}
cRow.used+=parseInt(field.columns,10);cRow.used+=parseInt(field.offset,10);cRow.ref.append($('<div/>').addClass('col-md-'+field.columns).addClass('col-md-offset-'+field.offset).append(field.render()))}else{$(field.fieldset).append(field.render())}}
field.initialize();return field};var addField=function(item,parent,target,insert){var field=new Berry.types[item.type](item,this);field.parent=parent;var root=this.fields;if(parent!==null&&parent!==undefined){root=parent.children}
var exists=(root[field.name]!==undefined);if(field.isContainer){if(!exists){root[field.name]={isContainer:!0,multiple:field.multiple,hasChildren:!$.isEmptyObject(item.fields),instances:[]}}
var insertAt=root[field.name].instances.length;var targetId=$(target).attr('id');for(var j in root[field.name].instances){if(root[field.name].instances[j].id==targetId){insertAt=parseInt(j,10)+1;break}}
root[field.name].instances.splice(insertAt,0,field);var index=0;for(var k in root[field.name].instances){root[field.name].instances[k].instance_id=index++}}else{if(exists||field.multiple){if(root[field.name].isContainer){var temp=[];temp.push(root[field.name]);temp=root[field.name];root[field.name]={multiple:field.multiple,hasChildren:!$.isEmptyObject(item.fields),instances:[]};root[field.name].instances.push(temp)}else if(root[field.name]instanceof Berry.field){var temp=[];temp.push(root[field.name]);temp=root[field.name];root[field.name]={instances:[]};root[field.name].instances.push(temp)}
root[field.name].instances.push(field)}else{root[field.name]=field}}
return field};this.parsefields=function(options){var newAttributes={};this.each(function(newAttributes,options){if(this.isParsable){var root;if(this.isChild()&&(!options.flatten||typeof this.parent.multiple!=='undefined')){root=Berry.search(newAttributes,this.parent.getPath())}else{root=newAttributes}
if(!this.isContainer){var value=this.getValue();if(value===null){value=''}
if($.isArray(root)){if(!root[this.parent.instance_id]){root[this.parent.instance_id]={}}
root[this.parent.instance_id][this.name]=value}else{root[this.name]=value}}else{if(this.multiple){if(this.isChild()&&this.parent.multiple&&$.isArray(root)){if(typeof root[this.parent.instance_id]=='undefined'){root[this.parent.instance_id]={}}
root[this.parent.instance_id][this.name]=root[this.parent.instance_id][this.name]||[]}else{root[this.name]=root[this.name]||[]}}else if(!options.flatten){if(this.isChild()&&this.parent.multiple&&$.isArray(root)){if(typeof root[this.parent.instance_id]=='undefined'){root[this.parent.instance_id]={}}
root[this.parent.instance_id][this.name]={}}else{root[this.name]={}}}}}},[newAttributes,options]);return newAttributes};this.setActions=function(actions){if(!this.options.actionTarget){this.options.actionTarget=$('<div class="berry-actions" style="overflow:hidden;padding-bottom:10px"></div>');this.target.append(this.options.actionTarget)}
this.options.actionTarget.empty();if(actions){actions=containsKey(Berry.btn,actions);for(var action in actions){actions[action].form=this.options.name;var temp=$(Berry.render('berry__action',actions[action]));if(typeof actions[action].click==='function'){temp.click($.proxy(actions[action].click,this))}
this.options.actionTarget.append(temp)}}};var inflate=function(atts){var altered={};this.each(function(atts,altered){var val;if(this.isContainer){if(this.multiple){val=atts[this.name]||[]}else{val={}}}else{val=atts[this.name]}
if(this.isChild()){if(!this.parent.multiple){Berry.search(altered,this.parent.getPath())[this.name]=val}}else{altered[this.name]=val}},[atts,altered]);return altered};var processMultiples=function(attributes){var altered=$.extend(!0,{},attributes);this.each(function(attributes,altered){if(this.multiple&&this.toArray){var root=attributes;var temp=Berry.search(root,this.getPath());if(this.isChild()){root=Berry.search(altered,this.parent.getPath())}
root[this.name]={};for(var i in this.children){root[this.name][i]=$.pluck(temp,i)}}},[attributes,altered]);return altered};var importArrays=function(attributes){var altered=$.extend(!0,{},attributes);this.each(function(attributes,altered){if(this.isContainer&&this.multiple&&this.toArray){var target=Berry.search(altered,this.parent.getPath());var localAtts=target[this.name];var newAtts=[];var i=0;while(i>=0&&i<20){for(var j in localAtts){if(localAtts[j].length>i){newAtts[i]=newAtts[i]||{};newAtts[i][j]=localAtts[j][i]}else{i=-2;break}}
i++}
target[this.name]=newAtts}},[attributes,altered]);return altered};this.load=function(options){if(typeof options.attributes!=='undefined'){if(typeof options.attributes==='string'){$.ajax({url:this.options.attributes,method:'GET',success:$.proxy(function(data){this.options.attributes=data;options=this.options;if(options.flatten){options.attributes=inflate.call(this,options.attributes)}
this.populate(cloneMultiples.call(this,importArrays.call(this,options.attributes)))},this)})}else{if(options.flatten){options.attributes=inflate.call(this,options.attributes)}
this.populate(cloneMultiples.call(this,importArrays.call(this,options.attributes)))}}else{cloneMultiples.call(this)}
this.each(function(){if(!this.isContainer){this.trigger('change')}});if(options.autoFocus){this.each(function(){if(!this.isContainer){this.focus();return!1}})}
this.trigger('loaded')};this.$el=target;this.section_count=0;this.sectionsEnabled=!1;this.sections=[];this.sectionList=[];this.initialized=!1;var rows={};this.fieldsets=[];this.fields={};this.options=$.extend({name:Berry.getUID()},Berry.options,options);this.events=$.extend(!0,{},Berry.prototype.events);this.trigger('initialize');if(typeof this.$el==='undefined'){this.$el=$('<div/>')}
this.renderer=new Berry.renderers[this.options.renderer](this);this.target=this.renderer.render();if(this.options.legend&&this.options.legendTarget){this.options.legendTarget.append(this.options.legend)}
this.processfields(this.options.fields,this.target,null);this.setActions(this.options.actions);if(typeof this.renderer.initialize==='function'){this.renderer.initialize()}
this.$el.find('form').on('submit',$.proxy(function(){this.trigger('save')},this));if(typeof Berry.instances[this.options.name]!=='undefined'){Berry.instances[this.options.name].on('destroyed',$.proxy(function(){Berry.instances[this.options.name]=this;this.initialized=!0;this.load(this.options);this.trigger('initialized')},this));Berry.instances[this.options.name].destroy()}else{Berry.instances[this.options.name]=this;this.initialized=!0;this.load(this.options);this.trigger('initialized')}};Berry.normalizeItem=function(item,i,defaultItem){if(typeof item==='string'){item={type:item,label:i}}
if($.isArray(item)){item={options:item,label:i}}
item=$.extend({},defaultItem,item);if((typeof item.name==='undefined'||item.name.length===0)&&!item.isContainer){if(typeof item.label!=='undefined'&&!isNaN(parseFloat(i))){item.name=item.label.toLowerCase().split(' ').join('_')}else if(typeof item.id!=='undefined'){item.name=item.id}else{item.name=i.toLowerCase().split(' ').join('_')}}
if(typeof item.label==='undefined'&&item.label!==!1){item.label=i}
if(item.required){$.extend(item,{validate:{required:!0}})}else if(typeof item.validate!=='undefined'){item.required=item.validate.required}
if(typeof Berry.types[item.type]==='undefined'){var length=0;if(typeof item.choices!=='undefined'){length=item.choices.length}
if(typeof item.options!=='undefined'){length=item.options.length}
switch(length){case 0:if(typeof item.fields==='undefined'){item.type='text'}else{item.type='fieldset'}
break;case 2:item.falsestate=item.options[1].toLowerCase().split(' ').join('_');case 1:item.type='checkbox';item.truestate=item.options[0].toLowerCase().split(' ').join('_');break;case 3:case 4:item.type='radio';break;default:item.type='select'}}
return item};Berry.field=function(item,owner){this.children={};this.owner=owner;this.hidden=!1;this.item=$.extend(!0,{},this.defaults,item);this.owner.trigger('initializeField',{field:this});$.extend(this,this.owner.options,this.item);if(this.item.value!==0){if(typeof item.value==='function'){this.valueFunc=item.value;this.liveValue=function(){return this.valueFunc.call(this.owner.toJSON())};item.value=this.item.value=this.liveValue();this.owner.on('change',$.proxy(function(){this.set(this.liveValue())},this))}else if(typeof this.item.value==='string'&&this.item.value.indexOf('=')===0&&typeof math!=='undefined'){this.formula=this.item.value.substr(1);this.enabled=!1;this.liveValue=function(){try{var temp=math.eval(this.formula,this.owner.toJSON());if($.isNumeric(temp)){return temp.toFixed((this.item.precision||0))}
return temp}catch(e){return this.formula}};item.value=this.item.value=this.liveValue();this.owner.on('change',$.proxy(function(){this.set(this.liveValue())},this))}else{this.value=(item.value||this.value||item.default||'')}}else{this.value=0}
this.lastSaved=this.liveValue();this.id=(item.id||Berry.getUID());this.self=undefined;this.fieldset=undefined;if(typeof this.item.fieldset!=='object'){if(this.item.fieldset!==undefined&&$('.'+this.item.fieldset).length>0){this.fieldset=$('.'+this.item.fieldset)[0];this.owner.fieldsets.push(this.fieldset)}else{if(this.item.fieldset!==undefined&&$('[name='+this.item.fieldset+']').length>0){this.fieldset=$('[name='+this.item.fieldset+']')[0];this.owner.fieldsets.push(this.fieldset)}}}else{if(this.item.fieldset.length){this.fieldset=this.item.fieldset}}
this.val=function(value){if(typeof value!=='undefined'){this.set(value)}
return this.getValue()};this.columns=(this.columns||this.owner.options.columns);if(this.columns>this.owner.options.columns){this.columns=this.owner.options.columns}};$.extend(Berry.field.prototype,{type:'text',offset:0,version:'1.0',isContainer:!1,isParsable:!0,isVisible:!0,isEnabled:!0,instance_id:null,path:'',defaults:{},parent:null,getPath:function(force){var path='';if(this.parent!==null&&this.parent!==undefined){path=this.parent.getPath(force)+'.';if(this.parent.multiple||force){path+=this.parent.instance_id+'.'}}
return path+this.name},isActive:function(){return this.parent===null||this.parent.isEnabled!==!1},isChild:function(){return this.parent!==null},set:function(value){if(this.value!=value){this.setValue(value);this.trigger('change')}},revert:function(){this.item.value=this.lastSaved;this.setValue(this.lastSaved);return this},hasChildren:function(){return!$.isEmptyObject(this.children)},create:function(){return Berry.render('berry_'+(this.elType||this.type),this)},render:function(){if(typeof this.self==='undefined'){this.self=$(this.create()).attr('data-Berry',this.owner.options.name)}else{this.self.html($(this.create()).html())}
this.display=this.getDisplay();return this.self},getValue:function(){return this.$el.val()},toJSON:function(){this.value=this.getValue();this.lastSaved=this.value;this.display=this.getDisplay();return this.lastSaved},liveValue:function(){return this.value},setup:function(){this.$el=this.self.find('input');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));if(this.item.mask&&$.fn.mask){this.$el.mask(this.item.mask)}},initialize:function(){this.setup();if(typeof this.show!=='undefined'){this.isVisible=(typeof this.show=='undefined'||$.isEmptyObject(this.show));this.self.toggle(this.isVisible);this.showConditions=Berry.processConditions.call(this,this.show,function(bool,token){if(typeof bool=='boolean'){this.showConditions[token]=bool;this.isVisible=!0;for(var c in this.showConditions){if(!this.showConditions[c]){this.isVisible=!1;break}}
this.self.toggle(this.isVisible)}});if(typeof this.showConditions==='boolean'){this.self.toggle(this.showConditions);this.isVisible=this.showConditions;this.update({},!0)}}
if(typeof this.enabled!=='undefined'){this.enabledConditions=Berry.processConditions.call(this,this.enabled,function(bool,token){if(typeof bool=='boolean'){this.enabledConditions[token]=bool;this.isEnabled=!0;this.enable();for(var c in this.enabledConditions){if(!this.enabledConditions[c]){this.isEnabled=!1;this.disable();break}}}});if(typeof this.enabledConditions=='boolean'){this.isEnabled=this.enabledConditions;this.update({},!0)}}
if(typeof this.parsable!=='undefined'){this.parsableConditions=Berry.processConditions.call(this,this.parsable,function(bool,token){if(typeof bool=='boolean'){var temp=this.isParsable;this.parsableConditions[token]=bool;this.isParsable=!0;for(var c in this.parsableConditions){if(!this.parsableConditions[c]){this.isParsable=!1;break}}
if(temp!==this.isParsable){this.trigger('change')}}});if(typeof this.parsableConditions=='boolean'){this.isParsable=this.parsableConditions}}
this.owner.trigger('initializedField',{field:this})},on:function(topic,func){this.owner.on(topic+':'+this.name,func)},delay:function(topic,func){this.owner.delay(topic+':'+this.name,func)},trigger:function(topic){this.value=this.getValue();this.owner.trigger(topic+':'+this.name,{id:this.id,value:this.value,})},setValue:function(value){if(typeof value!=='object'){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;return this.$el.val(value)}
return this.value},update:function(item,silent){if(typeof item==='object'){$.extend(this.item,item)}
$.extend(this,this.item);this.setValue(this.value);this.render();this.setup();if(!silent){this.trigger('change')}},blur:function(){this.$el.blur()},focus:function(){this.$el.focus().val('').val(this.value)},disable:function(){this.$el.prop('disabled',!0)},enable:function(){this.$el.prop('disabled',!1)},satisfied:function(){return(typeof this.value!=='undefined'&&this.value!==null&&this.value!=='')},displayAs:function(){return this.lastSaved},getDisplay:function(){if(this.displayAs!==undefined){if(this.item.template!==undefined){this.display=this.displayAs();return Berry.render(this.item.template,this)}else{return this.displayAs()||this.item.default||this.item.value||'Empty'}}else{if(this.item.template!==undefined){return Berry.render(this.item.template,this)}else{return this.lastSaved||this.item.default||this.item.value||'Empty'}}},destroy:function(){if(this.$el){this.$el.off()}},});Berry.field.extend=function(protoProps){var parent=this;var child=function(){return parent.apply(this,arguments)};var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)$.extend(child.prototype,protoProps);return child};Berry.prototype.events={initialize:[]};Berry.prototype.addSub=function(topic,func){if(!this.events[topic]){this.events[topic]=[]}
var token=Berry.getUID();this.events[topic].push({token:token,func:func});return token};Berry.prototype.on=function(topic,func,context,execute){var eventSplitter=/\s+/;if(eventSplitter.test(topic)){var list=topic.split(eventSplitter);for(var t in list){if(typeof context!=='undefined'){this.addSub(list[t],$.proxy(func,context))}else{this.addSub(list[t],func)}}}else{if(typeof context!=='undefined'){this.lastToken=this.addSub(topic,$.proxy(func,context))}else{this.lastToken=this.addSub(topic,func)}}
if(execute){func.call(this,null,topic)}
return this};Berry.prototype.delay=function(topic,func,context,execute,delay){var temp=function(args,topic,token){clearTimeout(this.events[token].timer);this.events[token].timer=setTimeout($.proxy(function(){this.events[token].func.call(this)},context||this),(delay||250))};var eventSplitter=/\s+/;if(eventSplitter.test(topic)){var list=topic.split(eventSplitter);for(var t in list){this.lastToken=this.addSub(list[t],temp);this.events[this.lastToken]={func:func,timer:null}}}else{this.lastToken=this.addSub(topic,temp);this.events[this.lastToken]={func:func,timer:null}}
if(execute){func.call(context||this,null,topic)}
return this};Berry.prototype.off=function(token){for(var m in this.events){if(this.events[m]){for(var i=0,j=this.events[m].length;i<j;i++){if(this.events[m][i].token===token){this.events[m].splice(i,1);return token}}}}
return this};Berry.prototype.trigger=function(topic,args){if(this.events[topic]){var t=this.events[topic],len=t?t.length:0;while(len--){t[len].func.call(this,args,topic,t[len].token)}}
newtopic=topic.split(':')[0];if(newtopic!==topic){topic=newtopic;if(this.events[topic]){var t=this.events[topic],len=t?t.length:0;while(len--){t[len].func.call(this,args,topic,t[len].token)}}}
return this};Berries=Berry.instances={};Berry.counter=0;Berry.types={};Berry.options={errorClass:'has-error',errorTextClass:'font-xs.text-danger',inline:!1,modifiers:'',renderer:'base',flatten:!0,columns:12,autoDestroy:!0,autoFocus:!0,validate:!1,actions:['cancel','save']};Berry.register=function(elem){if(elem.extends&&typeof Berry.types[elem.extends]!=='undefined'){Berry.types[elem.type]=Berry.types[elem.extends].extend(elem)}else{Berry.types[elem.type]=Berry.field.extend(elem)}}
Berry.search=function(o,s){s=s.replace(/\[(\w+)\]/g,'.$1');var a=s.split('.');while(a.length){var n=a.shift();if(typeof o!=='undefined'&&o!==null&&typeof o!=='string'&&n in o){o=o[n]}}
return o}
Berry.collection=function(Berry){var collections={};this.events={initialize:[]};this.addSub=Berry.prototype.addSub;this.on=Berry.prototype.on;this.off=Berry.prototype.off;this.trigger=Berry.prototype.trigger;return{add:function(name,data){collections[name]=data},get:function(name){return collections[name]},update:function(name,data){collections[name]=data;this.trigger(name)}.bind(this),on:this.on.bind(this),off:this.off.bind(this)}}(Berry)
Berry.processOpts=function(item,object){if(typeof item.max!=='undefined'){item.min=(item.min||0);item.choices=(item.choices||[]);if(item.step!=0){if(item.min<=item.max){for(var i=item.min;i<=item.max;i=i+(item.step||1)){item.choices.push(i.toString())}}}}
if(typeof item.choices==='function'){item.options=item.choices.call(this,item)}
if(typeof item.choices!=='undefined'&&item.choices.length>0){if(typeof item.choices==='string'){item.optionPath=item.choices;if(typeof Berry.collection.get(item.optionPath)==='undefined'){Berry.collection.add(item.optionPath,[]);(function(object){$.ajax({url:item.optionPath,type:'get',success:function(data){Berry.collection.on(item.optionPath,function(item){item.waiting=!1;this.update({choices:Berry.collection.get(item.optionPath),options:Berry.collection.get(item.optionPath)},!0);if(this.parent&&this.parent.multiple){if(typeof this.owner!=='undefined'){this.update({value:Berry.search(this.owner.options.attributes,this.getPath())})}}}.bind(object,item))
Berry.collection.update(item.optionPath,data)}})}(object))
item.waiting=!0;item.options=[];return item}else{Berry.collection.on(item.optionPath,function(item,path){this.item.waiting=!1;this.update({choices:Berry.collection.get(path),options:Berry.collection.get(path)},!0);if(this.parent&&this.parent.multiple){if(typeof this.owner!=='undefined'){this.update({value:Berry.search(this.owner.options.attributes,this.getPath())})}}}.bind(object))
if(Berry.collection.get(item.optionPath).length){item.choices=Berry.collection.get(item.optionPath)}}}
if(typeof item.choices==='object'&&!$.isArray(item.choices)){for(var c in conditions){Berry.conditions[c].call(this,this.owner,conditions[c],function(bool,token){})}}
if(typeof item.choices==='object'){item.options=$.map(item.choices,function(value,index){return[value]})}}
if(typeof item.default!=='undefined'&&typeof item.options!=='undefined'&&item.options[0]!==item.default){item.options.unshift(item.default)}
if(typeof item.options!=='undefined'&&item.options.length>0){var set=!1;for(var o in item.options){var cOpt=item.options[o];if(typeof cOpt==='string'||typeof cOpt==='number'){cOpt={label:cOpt};if(item.value_key!=='index'){cOpt.value=cOpt.label}}
if(typeof item.value_key!=='undefined'&&item.value_key!==''){if(item.value_key==='index'){cOpt.value=o}else{cOpt.value=cOpt[item.value_key]}}
if(typeof cOpt.value==='undefined'){cOpt.value=cOpt.id}
if(typeof item.label_key!=='undefined'&&item.label_key!==''){cOpt.label=cOpt[item.label_key]}
if(typeof cOpt.label==='undefined'){cOpt.label=cOpt.label||cOpt.name||cOpt.title}
item.options[o]=cOpt;if(typeof item.value!=='undefined'&&item.value!==''){if(!$.isArray(item.value)){item.options[o].selected=(cOpt.value==item.value)}else{item.options[o].selected=($.inArray(cOpt.value,item.value)>-1)}}}}
return item}
Berry.getUID=function(){return'b'+(Berry.counter++)};Berry.render=function(name,data){return(templates[name]||templates.berry_text).render(data,templates)};Berry.register({type:'fieldset',getValue:function(){return null},create:function(){this.name=this.name||Berry.getUID();if(typeof this.multiple!=='undefined'){this.multiple.min=this.multiple.min||1;if(typeof this.multiple.max!=='undefined'){if(this.multiple.max>this.multiple.min){this.multiple.duplicate=!0}else if(this.multiple.min>this.multiple.max){this.multiple.min=this.multiple.max}}}
if(!this.isChild()){++this.owner.section_count;this.owner.sections.push(this);this.owner.sectionList.push({'index':this.owner.section_count,'text':this.item.legend||this.item.label,state:'disabled',completed:!1,active:!1,error:!1})}
this.owner.fieldsets.push($('[name="'+this.name+'"]')[0]);return this.owner.renderer.fieldset(this)},focus:function(){this.owner.each(function(){this.focus();return!1},{},this.children);return!1},setValue:function(value){return!0},setup:function(){if(this.fields!==undefined){return this.owner.processfields(this.fields,this.self,this)}},isContainer:!0});Berry.renderers={base:function(owner){this.owner=owner;this.initialize=function(){$(this.owner.$el).keydown($.proxy(function(event){switch(event.keyCode){case 27:$('#close').click();break;case 13:if(event.ctrlKey){this.owner.$el.find('[data-id=berry-submit]').click()}
break}},this))};this.fieldset=function(data){return Berry.render('berry_'+this.owner.options.renderer+'_fieldset',data)};this.destroy=function(){$(this.owner.$el).off();this.owner.$el.empty()};this.render=function(){this.owner.$el.html(Berry.render('berry_'+this.owner.options.renderer+'_form',this.owner.options));return this.owner.$el.find('form')}}};Berry.btn={save:{label:'Save',icon:'check',id:'berry-submit',modifier:'success pull-right',click:function(){if(this.options.autoDestroy){this.on('saved',this.destroy)}
this.trigger('save')}},cancel:{label:'Cancel',icon:'times',id:'berry-close',modifier:'default pull-left',click:function(){if(this.options.autoDestroy){this.destroy()}
this.trigger('cancel')}}};Berry.prototype.events.save=[{token:Berry.getUID(),func:function(){if(typeof this.options.action==='string'){if(this.validate()){this.trigger('saveing');$.ajax({url:this.options.action,data:this.toJSON(),method:this.options.method||'POST',success:$.proxy(function(data){this.trigger('saved',data)},this)})}}}}];function containsKey(l,k){var r={};for(var j in k){if(typeof l[k[j]]!=='undefined'){r[k[j]]=l[k[j]]}}return r}
Berry.prototype.sum=function(search){var inputs=this.toJSON(search);var val=0;if(typeof inputs==='object'){for(var i in inputs){val+=(parseInt(inputs[i],10)||0)}
return val}
return inputs};$((function($){$.fn.berry=function(options){return new Berry(options,this)}})(jQuery));$.pluck=function(arr,key){return $.map(arr,function(e){return e[key]})};Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){Berry.field.prototype.clone=function(options){var max=this.multiple.max;if(typeof max==='undefined'||max>this.parent.children[this.name].instances.length){var item=$.extend({},this.owner.options.default,this.item,{id:Berry.getUID(),name:this.name});this.owner.createField($.extend({},this.owner.options.default,this.item,{id:Berry.getUID(),name:this.name}),$(this.self),this.parent,'after');this.trigger('change');return!0}
return!1}
Berry.field.prototype.remove=function(){if((this.multiple.min||1)<this.owner.find(this.getPath()).length){$(this.self).empty().remove();this.trigger('dropped');var fields=this.owner.fields;if(this.isChild()){fields=this.parent.children}
fields[this.name].instances.splice(this.instance_id,1);var index=0;var instances=this.owner.find(this.getPath());for(var j in instances){instances[j].instance_id=index++}
this.trigger('change');return!0}
return!1}
this.on('initializedField',function(opts){if(opts.field.multiple&&opts.field.multiple.duplicate){opts.field.self.find('.duplicate').on('click',$.proxy(opts.field.clone,opts.field));opts.field.self.find('.remove').on('click',$.proxy(opts.field.remove,opts.field))}})}});Berry.processConditions=function(conditions,func){if(typeof conditions==='string'){if(conditions==='show'||conditions==='enabled'||conditions==='parsable'){conditions=this.item[conditions]}else if(conditions==='enable'){conditions=this.item.enable}}
if(typeof conditions==='boolean'){return conditions}
if(typeof conditions==='object'){var keys=[];for(var c in conditions){keys.push(Berry.conditions[c].call(this,this.owner,conditions[c],(func||conditions[c].callBack)))}
return keys}
return!0};Berry.conditions={requires:function(Berry,args,func){return Berry.on('change:'+args.name,$.proxy(function(args,local,topic,token){func.call(this,(local.value!==null&&local.value!==''),token)},this,args)).lastToken},not_matches:function(Berry,args,func){return Berry.on('change:'+args.name,$.proxy(function(args,local,topic,token){func.call(this,(args.value!==local.value),token)},this,args)).lastToken},matches:function(Berry,args,func){return Berry.on('change:'+args.name,$.proxy(function(args,local,topic,token){func.call(this,(args.value===local.value),token)},this,args)).lastToken},test:function(Berry,args,func){return Berry.on('change:'+this.name,$.proxy(function(args,local,topic,token){func.call(this,args(),token)},this,args)).lastToken},multiMatch:function(Berry,args,func){Berry.on('change:'+_.map(args,'name').join(' change:'),$.proxy(function(args,local,topic){func.call(this,function(args,form){var status=!1;for(var i in args){var val=args[i].value;var localval=form.toJSON()[args[i].name];if(typeof val=='object'&&localval!==null){status=(val.indexOf(localval)!==-1)}else{status=(val==localval)}
if(!status)break}
return status}(args,Berry),'mm')},this,args))
return'mm'}};Berry.prototype.valid=!0;Berry.prototype.validate=function(processed){if(!processed){this.toJSON()}
this.clearErrors();this.each(this.validateItem);return this.valid};Berry.prototype.validateItem=function(){this.owner.performValidate(this);this.owner.errors[this.item.name]=this.errors;this.owner.valid=this.valid&&this.owner.valid};Berry.prototype.performValidate=function(target,pValue){var item=target.item;var value=target.value;if(typeof pValue!=='undefined'){value=pValue}
target.valid=!0;target.errors='';if(typeof item.validate!=='undefined'&&typeof item.validate==='object'){for(var r in item.validate){if(!Berry.validations[r].method.call(target,value,item.validate[r])){if((typeof item.show==='undefined')||target.isVisible){target.valid=!1;var estring=Berry.validations[r].message;if(typeof item.validate[r]=='string'){estring=item.validate[r]}
target.errors=estring.replace('{{label}}',item.label).replace('{{value}}',value)}}
target.self.toggleClass(target.owner.options.errorClass,!target.valid);target.self.find('.'+target.owner.options.errorTextClass).html(target.errors)}}};Berry.prototype.errors={};Berry.prototype.clearErrors=function(){this.valid=!0;this.errors={};this.$el.find("."+this.options.errorClass).removeClass(this.options.errorClass).find("."+this.options.errorTextClass).html("")};Berry.regex={};Berry.regex.numeric=/^[0-9]+$/;Berry.regex.integer=/^\-?[0-9]+$/;Berry.regex.decimal=/^\-?[0-9]*\.?[0-9]+$/;Berry.regex.email=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i;Berry.regex.alpha=/^[a-z]+$/i;Berry.regex.alphaNumeric=/^[a-z0-9]+$/i;Berry.regex.alphaDash=/^[a-z0-9_-]+$/i;Berry.regex.natural=/^[0-9]+$/i;Berry.regex.naturalNoZero=/^[1-9][0-9]*$/i;Berry.regex.ip=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i;Berry.regex.base64=/[^a-zA-Z0-9\/\+=]/i;Berry.regex.url=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;Berry.regex.date=/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/;Berry.validations={required:{method:function(value,args){return this.satisfied()},message:'The {{label}} field is required.'},matches:{method:function(value,matchName){if(el==this.Berry[matchName]){return value===el.value}
return!1},message:'The {{label}} field does not match the {{value}} field.'},valid_email:{method:function(value){return(Berry.regex.email.test(value)||value==='')},message:'The {{label}} field must contain a valid email address.'},valid_emails:{method:function(value){var result=value.split(",");for(var i=0;i<result.length;i++){if(!Berry.regex.email.test(result[i])){return!1}}
return!0},message:'The {{label}} field must contain all valid email addresses.'},min_length:{method:function(value,length){if(!Berry.regex.numeric.test(length)){return!1}
return(value.length>=parseInt(length,10))},message:'The {{label}} field must be at least {{value}} characters in length.'},max_length:{method:function(value,length){if(!Berry.regex.numeric.test(length)){return!1}
return(value.length<=parseInt(length,10))},message:'The {{label}} field must not exceed {{value}} characters in length.'},exact_length:{method:function(value,length){if(!Berry.regex.numeric.test(length)){return!1}
return(value.length===parseInt(length,10))},message:'The {{label}} field must be exactly {{value}} characters in length.'},greater_than:{method:function(value,param){if(!Berry.regex.decimal.test(value)){return!1}
return(parseFloat(value)>parseFloat(param))},message:'The {{label}} field must contain a number greater than {{value}}.'},less_than:{method:function(value,param){if(!Berry.regex.decimal.test(value)){return!1}
return(parseFloat(value)<parseFloat(param))},message:'The {{label}} field must contain a number less than {{value}}.'},alpha:{method:function(value){return(Berry.regex.alpha.test(value)||value==='')},message:'The {{label}} field must only contain alphabetical characters.'},alpha_numeric:{method:function(value){return(Berry.regex.alphaNumeric.test(value)||value==='')},message:'The {{label}} field must only contain alpha-numeric characters.'},alpha_dash:{method:function(value){return(Berry.regex.alphaDash.test(value)||value==='')},message:'The {{label}} field must only contain alpha-numeric characters, underscores, and dashes.'},numeric:{method:function(value){return(Berry.regex.decimal.test(value)||value==='')},message:'The {{label}} field must contain only numbers.'},integer:{method:function(value){return(Berry.regex.integer.test(value)||value==='')},message:'The {{label}} field must contain an integer.'},decimal:{method:function(value){return(Berry.regex.decimal.test(value)||value==='')},message:'The {{label}} field must contain a decimal number.'},is_natural:{method:function(value){return(Berry.regex.natural.test(value)||value==='')},message:'The {{label}} field must contain only positive numbers.'},is_natural_no_zero:{method:function(value){return(Berry.regex.naturalNoZero.test(value)||value==='')},message:'The {{label}} field must contain a number greater than zero.'},valid_ip:{method:function(value){return(Berry.regex.ip.test(value)||value==='')},message:'The {{label}} field must contain a valid IP.'},valid_url:{method:function(value){return(Berry.regex.url.test(value)||value==='')},message:'The {{label}} field must contain a valid Url.'},valid_base64:{method:function(value){return(Berry.regex.base64.test(value)||value==='')},message:'The {{label}} field must contain a base64 string.'},date:{method:function(value,args){return(Berry.regex.date.test(value)||value==='')},message:'The {{label}} field should be in the format MM/DD/YYYY.'}};(function(b,$){b.register({type:'checkbox',defaults:{container:'span'},create:function(){this.checkStatus(this.value);return b.render('berry_checkbox',this)},checkStatus:function(value){if(value===!0||value==="true"||value===1||value==="1"||value==="on"||value==this.truestate){this.value=!0}else{this.value=!1}},setup:function(){this.$el=this.self.find('[type=checkbox]');this.$el.off();if(this.onchange!==undefined){this.on('change',this.onchange)}
this.$el.change($.proxy(function(){this.trigger('change')},this))},getValue:function(){if(this.$el.is(':checked')){return this.truestate||!0}else{if(typeof this.falsestate!=='undefined')return this.falsestate;return!1}},setValue:function(value){this.checkStatus(value);this.$el.prop('checked',this.value);this.value=value},displayAs:function(){for(var i in this.item.options){if(this.item.options[i].value==this.lastSaved){return this.item.options[i].name}}},focus:function(){this.$el.focus()},satisfied:function(){return this.$el.is(':checked')},})})(Berry,jQuery);(function(b,$){b.register({type:'radio',create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;return b.render('berry_'+(this.elType||this.type),this)},setup:function(){this.$el=this.self.find('[type=radio]');this.$el.off();if(this.onchange!==undefined){this.on('change',this.onchange)}
this.$el.change($.proxy(function(){this.trigger('change')},this))},getValue:function(){if(this.item.waiting){return this.value}
var selected=this.self.find('[type="radio"]:checked').data('label');for(var i in this.item.options){if(this.item.options[i].label==selected){return this.item.options[i].value}}},setValue:function(value){if(typeof value!=='object'&&this.item.waiting||(typeof _.findWhere(this.options,{value:value})!=='undefined'||typeof _.findWhere(this.options,{value:value+=''})!=='undefined'||typeof _.findWhere(this.options,{value:parseInt(value,10)})!=='undefined')){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;this.self.find('[value="'+this.value+'"]').prop('checked',!0)}},displayAs:function(){for(var i in this.item.options){if(this.item.options[i].value==this.lastSaved){return this.item.options[i].label}}},focus:function(){this.self.find('[type="radio"]:checked').focus()}})})(Berry,jQuery);(function(b,$){b.register({type:'select',create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;return b.render('berry_'+(this.elType||this.type),this)},setup:function(){this.$el=this.self.find('select');this.$el.off();this.setValue(this.value);if(this.onchange!==undefined){this.on('change',this.onchange)}
this.$el.change($.proxy(function(){this.trigger('change')},this))},displayAs:function(){var o=this.options;for(var i in o){if(o[i].value==this.lastSaved){return o[i].label}}},getValue:function(){if(this.item.waiting){return this.value}
return this.$el.val()},setValue:function(value){if(typeof value!=='object'&&this.item.waiting||(typeof _.findWhere(this.options,{value:value})!=='undefined'||typeof _.findWhere(this.options,{value:value+=''})!=='undefined'||typeof _.findWhere(this.options,{value:parseInt(value,10)})!=='undefined')){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;this.$el.val(value)}
return this.value}})})(Berry,jQuery);(function(b,$){b.register({type:'text'});b.register({type:'raw',setValue:function(value){if(typeof value!=='object'||this.item.template){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;if(this.item.template){this.value=Hogan.compile(this.item.template).render(this,templates)}
this.render()}
return this.value}});b.register({type:'password'});b.register({type:'date',setValue:function(value){if(typeof value!=='object'){if(typeof moment!=='undefined'){value=moment.utc(value).format('YYYY-MM-DD')}
if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;return this.$el.val(value)}
return this.value}});b.register({type:'range'});b.register({type:'hidden',create:function(){return'<div><input type="hidden"  name="'+this.name+'" value="'+this.value+'" /></div>'}});b.register({type:'url',defaults:{post:'<i class="fa fa-link"></i>',validate:{'valid_url':!0}}});b.register({type:'phone',defaults:{mask:'(999) 999-9999',post:'<i class="fa fa-phone"></i>',placeholder:'+1'},satisfied:function(){this.value=this.getValue();return(typeof this.value!=='undefined'&&this.value!==null&&this.value!=='')}});b.register({type:'color',defaults:{pre:'<i></i>',type:'text'},setValue:function(value){if(typeof value!=='object'){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;this.$el.parent().colorpicker('setValue',this.value)
return this.$el.val(value)}
return this.value},setup:function(){this.$el=this.self.find('input');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));this.$el.attr('type','text');this.$el.parent().colorpicker({format:'hex'}).on('changeColor',$.proxy(function(ev){this.trigger('change')},this))}});b.register({type:'email',defaults:{post:'<i class="fa fa-envelope"></i>',validate:{'valid_email':!0}}});b.register({type:'number',defaults:{elType:'text'},value:0,getValue:function(){var temp=this.$el.val();if(temp===''){return 0}else{if($.isNumeric(temp)){return parseFloat(temp,10)}}},satisfied:function(){return(typeof this.value!=='undefined'&&this.value!==null&&this.value!==''&&this.value!==0)}});b.register({type:'tags',defaults:{elType:'text'},setup:function(){this.$el=this.self.find('input');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));if($.fn.tagsInput){this.$el.tagsInput()}},setValue:function(value){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;this.$el.importTags(value);return this.$el.val(value)}})})(Berry,jQuery);(function(b,$){b.register({type:'textarea',default:{autosize:!0,advanced:!1},setup:function(){this.$el=this.self.find('textarea');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));if(this.item.advanced&&$.fn.htmlarea){this.$el.css({height:'300px'}).htmlarea({toolbar:(this.item.toolbar||[['bold','italic','underline'],['superscript','subscript'],['justifyleft','justifycenter','justifyright'],['indent','outdent'],['orderedList','unorderedList'],['link','unlink'],['horizontalrule']])});this.$el.on('change',$.proxy(function(){this.trigger('change')},this))}
if((this.autosize!==!1)&&$.fn.autosize){this.$el.autosize()}},setValue:function(value){if(typeof value!=='object'){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;this.$el.val(value)
if((this.autosize!==!1)&&$.fn.autosize){this.$el.trigger('autosize.resize')}
if(this.item.advanced&&$.fn.htmlarea){this.$el.htmlarea('updateHtmlArea',value)}}
return this.$el},focus:function(){this.$el.focus().val('').val(this.value);this.self.find('iframe').focus()}})})(Berry,jQuery);Berry.backbone=!0;Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if(typeof this.options.model!=='undefined'){this.on('save',function(){if(this.validate()){this.trigger('saveing');this.options.model.set(this.toJSON());this.trigger('saved')}
return this.valid});var list=this.options.model.schema;var returnArray={};var keys=this.options.fields;if(keys==='all'||typeof this.options.fields==='undefined'){this.options.fields=list}else{for(var key in keys){if(typeof keys[key]==='string'){if(typeof list[keys[key]]!=='undefined'){returnArray[keys[key]]=list[keys[key]]}}else{returnArray["key_"+key]=keys[key]}}
this.options.fields=returnArray}
if(typeof this.options.attributes==='undefined'||$.isEmptyObject(this.options.attributes)){this.options.attributes=this.options.model.toJSON();this.options.model.on('change',function(){for(var i in this.options.model.changed){var temp=this.find(i);if(temp&&!$.isArray(temp)){temp.set(this.options.model.changed[i])}}},this);this.on('destroy',function(){this.options.model.off('change',null,this)})}}}});Berry.register({type:'fieldset',getValue:function(){return null},create:function(){this.name=this.name||Berry.getUID();this.owner.fieldsets.push(this.name);if(!this.isChild()){++this.owner.section_count;this.owner.sections.push(this);this.owner.sectionList.push({'index':this.owner.section_count,'text':this.item.legend,state:'disabled',completed:!1,active:!1,error:!1})}
return this.owner.renderer.fieldset(this)},focus:function(){this.owner.each(function(){this.focus();return!1},{},this.children);return!1},setValue:function(value){return!0},setup:function(){if(typeof this.fields!=='undefined'){this.owner.processfields(this.fields,this.self,this)}},isContainer:!0});Berry.extract=!0;Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if(typeof this.options.template!=='undefined'){var myRegexp=/\{\{\{?(.[\s\S]*?)\}\}\}?/g;text=this.options.template;var tempdiv=text;var match=myRegexp.exec(text);this.options.fields=this.options.fields||{};while(match!=null){var splits=match[1].split(':{');var pre='{{';if(splits[0].substr(0,1)=='!'){splits[0]=splits[0].substr(1);pre+='!'}
if($.inArray(splits[0].substr(0,1),["^","#","/",">"])<0){var cobj={};if(splits.length>1){cobj=JSON.parse('{'+splits[1])}
this.options.fields[splits[0]]=$.extend(this.options.fields[splits[0]],cobj);tempdiv=tempdiv.replace(match[0],pre+(this.options.fields[splits[0]].name||splits[0].toLowerCase().split(' ').join('_'))+"}}")}
match=myRegexp.exec(text)}
this.options.template=Hogan.compile(tempdiv)}}});Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if((typeof this.$el=='undefined')||!this.$el.length){this.autoDestroy=!1;this.$el=$('<div/>');this.options.modal=(this.options.modal||{});this.options.modal.header_class=this.options.modal.header_class||'bg-success';this.ref=$(Berry.render('modal',this.options));$(this.ref).appendTo('body');this.options.legendTarget=this.ref.find('.modal-title');this.options.actionTarget=this.ref.find('.modal-footer');this.$el=this.ref.find('.modal-body');this.ref.modal(this.options.modal);this.ref.on('shown.bs.modal',$.proxy(function(){if(this.options.autoFocus){this.$el.find('.form-control:first').focus()}},this));this.on('cancel',$.proxy(function(){this.ref.modal('hide')},this));this.on('saved, close',$.proxy(function(){this.ref.modal('hide');this.closeAction='save'},this));this.ref.on('hidden.bs.modal',$.proxy(function(){this.closeAction=(this.closeAction||'cancel');this.destroy()},this));this.on('destroyed',$.proxy(function(){this.ref.modal('hide');this.trigger('completed')},this))}}});(function(b,$){b.register({type:'cselect',create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;if(this.reference){for(var i in this.options){this.options[i].image=this.options[i][this.reference]}}
return b.render('berry_'+(this.elType||this.type),this)},setup:function(){this.$el=this.self.find('.dropdown');this.$el.find('li > a').off();this.$el.find('li > a').on('click',$.proxy(function(e){this.$el.find('a').removeClass('list-group-item-success');$(e.target).closest('a').addClass('list-group-item-success');this.$el.find('button').html(_.findWhere(this.options,{value:$(e.target).closest('a').attr('data-value')}).label+' <span class="caret"></span>')
if(typeof this.onchange==='function'){this.onchange()}
this.trigger('change')},this))},getValue:function(){if(this.$el.find('.list-group-item-success').length){return this.$el.find('.list-group-item-success').attr('data-value')}else{return this.value}},setValue:function(val){if(this.$el.find('[data-value="'+val+'"]').length){this.value=val;return this.$el.find('[data-value="'+val+'"]').click()}else if(typeof val!=='object'&&val&&val.length){this.$el.find('a').removeClass('list-group-item-success');this.value=val;this.$el.find('button').html(val+' <span class="caret"></span>')}}})})(Berry,jQuery);(function(b,$){b.register({type:'ace',create:function(){return b.render('berry_ace',this)},setup:function(){this.$el=this.self.find('.formcontrol > div');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));this.editor=ace.edit(this.id+"container");this.editor.setTheme(this.item.theme||"ace/theme/chrome");this.editor.getSession().setMode({path:this.item.mode||"ace/mode/handlebars",inline:this.item.inlinemode})},setValue:function(value){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;this.editor.session.setValue(value);return this.$el},getValue:function(){return this.editor.getValue()},focus:function(){this.editor.focus()}})})(Berry,jQuery);(function(b,$){b.register({type:'base64',defaults:{elType:'file'},create:function(){return b.render('berry_text',this)},setup:function(){this.$el=this.self.find('input');this.$el.off();this.$el.on('change',_.partial(function(field,e){var files=this.files
if(window.FileReader){(function(fileToRead,field){var reader=new FileReader();reader.readAsDataURL(fileToRead);reader.onload=function(event){this.set(event.target.result)}.bind(field)
reader.onerror=function(evt){if(evt.target.error.name=="NotReadableError"){alert("Canno't read file !")}}})(files[0],field);e.currentTarget.value=''}else{alert('FileReader is not supported in this browser.')}},this))},setValue:function(value){if(typeof value!=='object'){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;return this.value}
return this.value},getValue:function(){return this.value}})})(Berry,jQuery);(function(b,$){b.register({type:'contenteditable',create:function(){return b.render('berry_contenteditable',this)},setup:function(){this.$el=this.self.find('.formcontrol > div');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.summernote({disableDragAndDrop:!0,dialogsInBody:!0,toolbar:[['style',['bold','italic','underline','clear']],['link',['linkDialogShow','unlink']],['font',['strikethrough','superscript','subscript']],['fontsize',['fontsize']],['color',['color']],['para',['ul','ol','paragraph']],['height',['height']],['view',['fullscreen']]]});this.$el.on('summernote.change',$.proxy(function(){this.trigger('change')},this))},setValue:function(value){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.$el.summernote('code',value)
this.value=value;return this.$el},getValue:function(){return this.$el.summernote('code')},satisfied:function(){this.value=this.getValue()
return(typeof this.value!=='undefined'&&this.value!==null&&this.value!==''&&this.value!=="<p><br></p>")},destroy:function(){this.$el.summernote('destroy');if(this.$el){this.$el.off()}}})})(Berry,jQuery);$(document).on('focusin',function(e){if($(e.target).closest(".note-editable").length){e.stopImmediatePropagation()}});$(document).on('click',function(e){if($(e.target).hasClass(".note-editor")){e.stopImmediatePropagation();$(e.target).find('.open').removeClass('open')}});(function(b,$){b.register({type:'custom_radio',create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;return b.render('berry_'+(this.elType||this.type),this)},defaults:{selectedClass:'btn-success',defaultClass:'btn-default',},setup:function(){this.$el=this.self.find('.custom-group');this.$el.children('.btn').off();this.$el.children('.btn').on('click',$.proxy(function(e){this.$el.children('.'+this.selectedClass).toggleClass(this.selectedClass+' '+this.defaultClass);$(e.target).closest('.btn').toggleClass(this.selectedClass+' '+this.defaultClass);if(typeof this.onchange==='function'){this.onchange()}
this.trigger('change')},this))},getValue:function(){return this.$el.children('.'+this.selectedClass).attr('data-value')},setValue:function(val){return this.$el.children('[data-value="'+val+'"]').click()}})})(Berry,jQuery);(function(b,$){b.register({type:'custom_select',create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;if(this.reference){for(var i in this.options){this.options[i].image=this.options[i][this.reference]}}
return b.render('berry_'+(this.elType||this.type),this)},setup:function(){this.$el=this.self.find('.list-group');this.$el.children('.list-group-item').off();this.$el.children('.list-group-item').on('click',$.proxy(function(e){this.$el.children('.list-group-item-success').removeClass('list-group-item-success');$(e.target).closest('.list-group-item').addClass('list-group-item-success');if(typeof this.onchange==='function'){this.onchange()}
this.trigger('change')},this))},getValue:function(){return this.$el.children('.list-group-item-success').attr('data-value')},setValue:function(val){return this.$el.children('[data-value="'+val+'"]').click()}})})(Berry,jQuery);(function(b,$){b.register({type:'dropdown',create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;return b.render('berry_'+(this.elType||this.type),this)},setup:function(){this.$el=this.self.find('.btn-group');this.$el.find('a').on('click',$.proxy(function(e){e.preventDefault();this.setValue($(e.target).data('value'));this.trigger('change');if(this.onchange!==undefined){this.onchange()}},this))},setValue:function(value){this.$el.find('ul').attr('data-value',value);return this.$el.find('button').html(this.displayAs(value)+' <span class="caret"></span>')},getValue:function(){return this.$el.find('ul').attr('data-value')},displayAs:function(value){for(var i in this.options){if(this.options[i].value==(value||this.value)){return this.options[i].label}}}})})(Berry,jQuery);(function(b,$){b.register({type:'grid_select',defaults:{select_class:"text-info",},create:function(){this.options=b.processOpts.call(this.owner,this.item,this).options;for(var i in this.options){this.options[i].image=this.options[i][(this.value_key||'value')]}
return b.render('berry_'+(this.elType||this.type),this)},setup:function(){this.$el=this.self.find('.list');this.$el.children('.col-md-3').off();this.$el.children('.col-md-3').on('click',$.proxy(function(e){this.$el.children('.'+this.select_class).removeClass(this.select_class);$(e.target).closest('.col-md-3').addClass(this.select_class);if(typeof this.onchange==='function'){this.onchange()}
this.trigger('change')},this))},getValue:function(){return this.$el.children('.'+this.select_class).attr('data-value')},setValue:function(val){return this.$el.children('[data-value="'+val+'"]').click()}})})(Berry,jQuery);(function(b,$){b.register({type:'image_picker',default:{autosize:!0,advanced:!1},setup:function(){this.$el=this.self.find('input');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));this.self.find('button,img').on('click',$.proxy(function(){this.modal=$().berry({legend:(this.label||"Choose One"),fields:{Image:{label:!1,value:this.value,options:this.options,choices:this.choices,value_key:this.value_key,label_key:this.label_key,root:this.path,type:'grid_select'}}}).on('save',function(){this.update({value:this.modal.fields.image.toJSON()})
this.modal.trigger('close')},this)},this))},setValue:function(value){if(this.value!=value){this.update({value:value})}}})})(Berry,jQuery);(function(b,$){b.register({type:'rateit',create:function(){return b.render('berry_rateit',this)},setup:function(){this.render();this.$el=this.self.find('.rateit');this.$el.rateit();this.$el.rateit('value',this.value);this.$el.bind('rated reset',$.proxy(function(e){this.$el.focus();this.trigger('change');if(this.onchange!==undefined){this.onchange()}},this))},setValue:function(value){this.value=value;return this.$el.rateit('value',value)},getValue:function(){return this.$el.rateit('value')},getDisplay:function(){for(var i in this.options){if(this.options[i].value==this.lastSaved){return this.options[i].label}}
var rstring="";for(var i=1;i<=this.value;i++){rstring+='<i class="fa fa-star"></i>'}
var temp=Math.floor(this.value);if(this.value-temp>=0.5){rstring+='<i class="fa fa-star-half-full"></i>'}
for(var i=Math.round(this.value);i<5;i++){rstring+='<i class="fa fa-star-o"></i>'}
return rstring}})})(Berry,jQuery);(function(b,$){b.register({type:'upload',defaults:{autosize:!0,advanced:!1},setup:function(){this.$el=this.self.find('form input');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.on('input',$.proxy(function(){this.trigger('change')},this));this.myDropzone=new Dropzone('#'+this.name,{method:'post',paramName:this.name,success:$.proxy(function(message,response){this.setValue(response);this.trigger('uploaded')},this)})},getValue:function(){return this.value},setValue:function(value){if(typeof this.lastSaved==='undefined'){this.lastSaved=value}
this.value=value;return this.$el},update:function(item,silent){if(typeof item==='object'){$.extend(this.item,item)}
$.extend(this,this.item);this.setValue(this.value);this.myDropzone.destroy();this.render();this.setup();if(!silent){this.trigger('change')}},render:function(){if(typeof this.self==='undefined'){this.self=$(this.create()).attr('data-Berry',this.owner.options.name)}else{this.self.find('div:first').replaceWith($(this.create()).html())}
this.display=this.getDisplay();return this.self}})})(Berry,jQuery);Berry.renderers.inline=function(owner){this.owner=owner;this.fieldset=function(data){Berry.render('berry_base_fieldset',data)};this.render=function(){return $('<div/>')}};Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if(this.options.renderer=='inline'){this.options.inline=!0;this.options.autoFocus=!1;this.options.default={hideLabel:!0,};this.on('initializeField',function(opts){opts.field.item.fieldset=this.$el.find('[data-inline="'+opts.field.item.name+'"]');if(opts.field.item.fieldset.length>1){var test=this.$el.find('[data-inline="'+opts.field.item.name+'"][id='+opts.field.item.id+']');if(test.length>0){opts.field.item.fieldset=test}}
if(opts.field.item.fieldset){$.extend(opts.field.item,opts.field.item.fieldset.data())}})}}});Berry.renderers.popins=function(owner){this.owner=owner;this.fieldset=function(data){Berry.render('berry_base_fieldset',data)};this.render=function(){return $('<div/>')};this.initialize=function(){this.owner.on('destroy',function(){$('.row.form-group[data-berry='+this.options.name+']').closest('.popover').remove()})
if(typeof this.owner.options.popins_template==='string'){this.owner.$el.html(Berry.render(this.owner.options.popins_template,{fields:_.toArray(this.owner.fields)}))}
this.owner.each(function(_this){_this.create(this)},[this]);$('body').off('click','.popoverCancel');$('body').on('click','.popoverCancel',function(){$('[data-popins]').popover('hide');var fl=Berry.instances[$(this).data('berry')];var field=fl.find($(this).data('name'));field.revert();$('[data-popins="'+$(this).data('name')+'"]').focus()});$('body').off('click','.popoverSave');$('body').on('click','.popoverSave',function(){var fl=Berry.instances[$(this).data('berry')];var name=$(this).data('name');var field=fl.find(name);$(field.self).find('.form-control').blur();fl.performValidate(field,field.getValue());if(field.valid){field.toJSON();fl.$el.find('[data-popins="'+name+'"]').focus().html(field.display).popover('hide');fl.trigger('updated');fl.trigger('save')}else{field.focus()}});$('body').keydown(function(event){switch(event.keyCode){case 27:$('.popover.in .popoverCancel').click();break;case 13:$('.popover.in .popoverSave').click();break}});this.owner.on('loaded',$.proxy(function(){this.owner.each(function(){this.owner.$el.find('[data-popins="'+this.name+'"]').html(this.display)})},this))}};Berry.renderers.popins.prototype.create=function(field){var target=field.owner.$el.find('[data-popins="'+field.name+'"]');var pOpts=$.extend({container:'#'+field.owner.$el.attr('id'),viewport:{selector:'#content',padding:20}},{title:'<div style="padding-left:0"><div class="btn-group pull-right"><div style="margin-left:2px;" class="btn-xs popoverCancel fa fa-times btn btn-danger" data-name="'+field.name+'" data-berry="'+field.owner.options.name+'"></div><div class="btn-xs fa fa-check btn btn-success popoverSave" data-name="'+field.name+'" data-berry="'+field.owner.options.name+'"></div></div></div>'+(field.prompt||field.label),content:field.self,html:!0,placement:'left auto',template:'<div class="popover berry"><div class="arrow"></div><h3 class="popover-title"></h3><div style="min-width:270px" class="popover-content"></div></div>'},field.owner.options.popins,field.popins);target.popover(pOpts);target.on('hidden.bs.popover',function(){$('.berry.popover').css({display:"none"})});target.on('show.bs.popover',function(){$('.popover.in .popoverCancel').click()});target.on('shown.bs.popover',function(){var field=Berry.instances[$('.berry.popover').find('.row').data('berry')].find($('.berry.popover').find('.row').attr('name'));field.initialize();field.focus()})};Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if(this.options.renderer=='popins'){this.options.default={hideLabel:!0};this.options.inline=!0;$.extend(this.options.default,{hideLabel:!0})}}});Berry.renderers.tabs=function(owner){this.owner=owner;this.fieldset=function(data){if(data.parent===null){return Berry.render('berry_tabs_fieldset',data)}
return Berry.render('berry_base_fieldset',data)};this.render=function(){this.owner.$el.html(Berry.render('berry_base_form',this.owner.options));return this.owner.$el.find('form')};this.initialize=function(){if(this.owner.options.tabsTarget){this.owner.on('destroy',function(){this.options.tabsTarget.empty()})}else{this.owner.options.tabsTarget=this.owner.$el}
this.owner.options.tabsTarget.prepend(Berry.render('berry_tabs',this.owner)).find('a:first').tab('show')}};Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if(this.options.renderer=='tabs'){this.sectionsEnabled=!0;this.options.modifiers+=" tab-content"}}});Berry.renderers.wizard=function(owner){this.owner=owner;this.fieldset=function(data){return Berry.render('berry_'+this.owner.options.renderer+'_fieldset',data)};this.render=function(){this.owner.$el.html(Berry.render('berry_'+this.owner.options.renderer+'_form',this.owner.options));return this.owner.$el.find('form')};this.$element=null;this.update=function(){this.$element.find('ul').html(Berry.render('berry_wizard_steps',this.owner));$('[data-id=berry-submit],[data-id=wizard-next]').hide();$('.step-pane').removeClass('active');$('#step'+(this.owner.currentSection+1)).addClass('active');if((this.owner.currentSection+1)!=this.owner.section_count){$('[data-id=wizard-next]').show()}else{$('[data-id=berry-submit]').show()}
if(this.owner.currentSection===0){$('[data-id=wizard-previous]').hide()}else{$('[data-id=wizard-previous]').show()}
this.$element.find('ul').first().attr('style','margin-left: 0');var totalWidth=0;this.$element.find('ul > li').each(function(){totalWidth+=$(this).outerWidth()});var containerWidth=0;if(this.$element.find('.actions').length){containerWidth=this.$element.width()-this.$element.find('.actions').first().outerWidth()}else{containerWidth=this.$element.width()}
if(totalWidth>containerWidth){var newMargin=totalWidth-containerWidth;this.$element.find('ul').first().attr('style','margin-left: -'+newMargin+'px');if(this.$element.find('li.'+this.owner.sectionList[this.owner.currentSection].state).first().position().left<200){newMargin+=this.$element.find('li.'+this.owner.sectionList[this.owner.currentSection].state).first().position().left-200;if(newMargin<1){this.$element.find('ul').first().attr('style','margin-left: 0')}else{this.$element.find('ul').first().attr('style','margin-left: -'+newMargin+'px')}}}};this.next=function(){this.owner.valid=!0;this.owner.toJSON();this.owner.each(this.owner.validateItem,null,this.owner.sections[this.owner.currentSection].children);if(this.owner.valid){if(this.owner.currentSection<(this.owner.section_count-1)){this.owner.sectionList[this.owner.currentSection].state='complete';this.owner.currentSection++;this.owner.clearErrors();this.owner.sectionList[this.owner.currentSection].state='active'}}else{this.owner.sectionList[this.owner.currentSection].state='error'}
this.update()};this.previous=function(){if(this.owner.currentSection>0){this.owner.sectionList[this.owner.currentSection].state='disabled';this.owner.currentSection--;this.owner.sectionList[this.owner.currentSection].state='active'}
this.update()};this.sectionClick=function(e){var clickedSection=parseInt($(e.currentTarget).data('target').replace('#step',''),10)-1;if(clickedSection<this.owner.currentSection){for(var i=clickedSection;i<=this.owner.currentSection;i++){this.owner.sectionList[i].state='disabled'}
this.owner.currentSection=clickedSection;this.owner.sectionList[this.owner.currentSection].state='active'}
this.update()};this.initialize=function(){this.owner.sectionList[0].state='active';this.owner.currentSection=0;if((this.owner.currentSection+1)==this.owner.section_count){$('[data-id=wizard-next]').hide()}else{$('[data-id=berry-submit]').hide()}
if(this.owner.currentSection===0){$('[data-id=wizard-previous]').hide()}else{$('[data-id=wizard-previous]').show()}
this.$element=this.owner.$el.find('.wizard');this.$element.find('ul').html(Berry.render('berry_wizard_steps',this.owner));$('#step1').addClass('active');$('body').on('click','.wizard li',$.proxy(this.sectionClick,this));$('body').on('click','[data-id=wizard-next]',$.proxy(this.next,this));$('body').on('click','[data-id=wizard-previous]',$.proxy(this.previous,this))}};Berry.btn.previous={'label':"Previous",'icon':'arrow-left','id':'wizard-previous','modifier':'danger pull-left'};Berry.btn.next={'label':"Next",'icon':'arrow-right','id':'wizard-next','modifier':'success pull-right'};Berry.btn.finish=$.extend({},Berry.btn.save,{label:'Finish'});Berry.prototype.events.initialize.push({token:Berry.getUID(),func:function(){if(this.options.renderer=='wizard'){this.sectionsEnabled=!0;this.options.actions=['finish','next','previous']}}});/*!
 * Datepicker for Bootstrap v1.6.1 (https://github.com/eternicode/bootstrap-datepicker)
 *
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */

/*! bootstrap-timepicker v0.5.2 
* http://jdewit.github.com/bootstrap-timepicker 
* Copyright (c) 2016 Joris de Wit and bootstrap-timepicker contributors 
* MIT License 
*/

/**
 * @license
 * =========================================================
 * bootstrap-datetimepicker.js
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Contributions:
 *  - Andrew Rowls
 *  - Thiago de Arruda
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================
 */

/*! version : 4.17.37
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
!function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],a);else if("object"==typeof exports)a(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";a(jQuery,moment)}}(function(a,b){"use strict";if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c=function(c,d){var e,f,g,h,i,j,k,l={},m=!0,n=!1,o=!1,p=0,q=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],r=["days","months","years","decades"],s=["top","bottom","auto"],t=["left","right","auto"],u=["default","top","bottom"],v={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},w={},x=function(a){var c,e,f,g,h,i=!1;return void 0!==b.tz&&void 0!==d.timeZone&&null!==d.timeZone&&""!==d.timeZone&&(i=!0),void 0===a||null===a?c=i?b().tz(d.timeZone).startOf("d"):b().startOf("d"):i?(e=b().tz(d.timeZone).utcOffset(),f=b(a,j,d.useStrict).utcOffset(),f!==e?(g=b().tz(d.timeZone).format("Z"),h=b(a,j,d.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+g,c=b(h,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict),c},y=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return-1!==i.indexOf("Y");case"M":return-1!==i.indexOf("M");case"d":return-1!==i.toLowerCase().indexOf("d");case"h":case"H":return-1!==i.toLowerCase().indexOf("h");case"m":return-1!==i.indexOf("m");case"s":return-1!==i.indexOf("s");default:return!1}},z=function(){return y("h")||y("m")||y("s")},A=function(){return y("y")||y("M")||y("d")},B=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",d.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(d.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",d.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},C=function(){var b=a("<tr>"),c=a("<tr>"),e=a("<tr>");return y("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:d.tooltips.pickHour}).attr("data-action","showHours"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(d.icons.down))))),y("m")&&(y("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:d.tooltips.pickMinute}).attr("data-action","showMinutes"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(d.icons.down))))),y("s")&&(y("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:d.tooltips.pickSecond}).attr("data-action","showSeconds"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(d.icons.down))))),h||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:d.tooltips.togglePeriod}))),e.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,e]))},D=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[C()];return y("h")&&e.push(b),y("m")&&e.push(c),y("s")&&e.push(d),e},E=function(){var b=[];return d.showTodayButton&&b.push(a("<td>").append(a("<a>").attr({"data-action":"today",title:d.tooltips.today}).append(a("<span>").addClass(d.icons.today)))),!d.sideBySide&&A()&&z()&&b.push(a("<td>").append(a("<a>").attr({"data-action":"togglePicker",title:d.tooltips.selectTime}).append(a("<span>").addClass(d.icons.time)))),d.showClear&&b.push(a("<td>").append(a("<a>").attr({"data-action":"clear",title:d.tooltips.clear}).append(a("<span>").addClass(d.icons.clear)))),d.showClose&&b.push(a("<td>").append(a("<a>").attr({"data-action":"close",title:d.tooltips.close}).append(a("<span>").addClass(d.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},F=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(B()),e=a("<div>").addClass("timepicker").append(D()),f=a("<ul>").addClass("list-unstyled"),g=a("<li>").addClass("picker-switch"+(d.collapse?" accordion-toggle":"")).append(E());return d.inline&&b.removeClass("dropdown-menu"),h&&b.addClass("usetwentyfour"),y("s")&&!h&&b.addClass("wider"),d.sideBySide&&A()&&z()?(b.addClass("timepicker-sbs"),"top"===d.toolbarPlacement&&b.append(g),b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))),"bottom"===d.toolbarPlacement&&b.append(g),b):("top"===d.toolbarPlacement&&f.append(g),A()&&f.append(a("<li>").addClass(d.collapse&&z()?"collapse in":"").append(c)),"default"===d.toolbarPlacement&&f.append(g),z()&&f.append(a("<li>").addClass(d.collapse&&A()?"collapse":"").append(e)),"bottom"===d.toolbarPlacement&&f.append(g),b.append(f))},G=function(){var b,e={};return b=c.is("input")||d.inline?c.data():c.find("input").data(),b.dateOptions&&b.dateOptions instanceof Object&&(e=a.extend(!0,e,b.dateOptions)),a.each(d,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(e[a]=b[c])}),e},H=function(){var b,e=(n||c).position(),f=(n||c).offset(),g=d.widgetPositioning.vertical,h=d.widgetPositioning.horizontal;if(d.widgetParent)b=d.widgetParent.append(o);else if(c.is("input"))b=c.after(o).parent();else{if(d.inline)return void(b=c.append(o));b=c,c.children().first().after(o)}if("auto"===g&&(g=f.top+1.5*o.height()>=a(window).height()+a(window).scrollTop()&&o.height()+c.outerHeight()<f.top?"top":"bottom"),"auto"===h&&(h=b.width()<f.left+o.outerWidth()/2&&f.left+o.outerWidth()>a(window).width()?"right":"left"),"top"===g?o.addClass("top").removeClass("bottom"):o.addClass("bottom").removeClass("top"),"right"===h?o.addClass("pull-right"):o.removeClass("pull-right"),"relative"!==b.css("position")&&(b=b.parents().filter(function(){return"relative"===a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a relative positioned container");o.css({top:"top"===g?"auto":e.top+c.outerHeight(),bottom:"top"===g?e.top+c.outerHeight():"auto",left:"left"===h?b===c?0:e.left:"auto",right:"left"===h?"auto":b.outerWidth()-c.outerWidth()-(b===c?0:e.left)})},I=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||c.trigger(a)},J=function(a){"y"===a&&(a="YYYY"),I({type:"dp.update",change:a,viewDate:f.clone()})},K=function(a){o&&(a&&(k=Math.max(p,Math.min(3,k+a))),o.find(".datepicker > div").hide().filter(".datepicker-"+q[k].clsName).show())},L=function(){var b=a("<tr>"),c=f.clone().startOf("w").startOf("d");for(d.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(f.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");o.find(".datepicker-days thead").append(b)},M=function(a){return d.disabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a){return d.enabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){return d.disabledHours[a.format("H")]===!0},P=function(a){return d.enabledHours[a.format("H")]===!0},Q=function(b,c){if(!b.isValid())return!1;if(d.disabledDates&&"d"===c&&M(b))return!1;if(d.enabledDates&&"d"===c&&!N(b))return!1;if(d.minDate&&b.isBefore(d.minDate,c))return!1;if(d.maxDate&&b.isAfter(d.maxDate,c))return!1;if(d.daysOfWeekDisabled&&"d"===c&&-1!==d.daysOfWeekDisabled.indexOf(b.day()))return!1;if(d.disabledHours&&("h"===c||"m"===c||"s"===c)&&O(b))return!1;if(d.enabledHours&&("h"===c||"m"===c||"s"===c)&&!P(b))return!1;if(d.disabledTimeIntervals&&("h"===c||"m"===c||"s"===c)){var e=!1;if(a.each(d.disabledTimeIntervals,function(){return b.isBetween(this[0],this[1])?(e=!0,!1):void 0}),e)return!1}return!0},R=function(){for(var b=[],c=f.clone().startOf("y").startOf("d");c.isSame(f,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");o.find(".datepicker-months td").empty().append(b)},S=function(){var b=o.find(".datepicker-months"),c=b.find("th"),g=b.find("tbody").find("span");c.eq(0).find("span").attr("title",d.tooltips.prevYear),c.eq(1).attr("title",d.tooltips.selectYear),c.eq(2).find("span").attr("title",d.tooltips.nextYear),b.find(".disabled").removeClass("disabled"),Q(f.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(f.year()),Q(f.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),g.removeClass("active"),e.isSame(f,"y")&&!m&&g.eq(e.month()).addClass("active"),g.each(function(b){Q(f.clone().month(b),"M")||a(this).addClass("disabled")})},T=function(){var a=o.find(".datepicker-years"),b=a.find("th"),c=f.clone().subtract(5,"y"),g=f.clone().add(6,"y"),h="";for(b.eq(0).find("span").attr("title",d.tooltips.prevDecade),b.eq(1).attr("title",d.tooltips.selectDecade),b.eq(2).find("span").attr("title",d.tooltips.nextDecade),a.find(".disabled").removeClass("disabled"),d.minDate&&d.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+g.year()),d.maxDate&&d.maxDate.isBefore(g,"y")&&b.eq(2).addClass("disabled");!c.isAfter(g,"y");)h+='<span data-action="selectYear" class="year'+(c.isSame(e,"y")&&!m?" active":"")+(Q(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(h)},U=function(){var a=o.find(".datepicker-decades"),c=a.find("th"),g=b({y:f.year()-f.year()%100-1}),h=g.clone().add(100,"y"),i=g.clone(),j="";for(c.eq(0).find("span").attr("title",d.tooltips.prevCentury),c.eq(2).find("span").attr("title",d.tooltips.nextCentury),a.find(".disabled").removeClass("disabled"),(g.isSame(b({y:1900}))||d.minDate&&d.minDate.isAfter(g,"y"))&&c.eq(0).addClass("disabled"),c.eq(1).text(g.year()+"-"+h.year()),(g.isSame(b({y:2e3}))||d.maxDate&&d.maxDate.isBefore(h,"y"))&&c.eq(2).addClass("disabled");!g.isAfter(h,"y");)j+='<span data-action="selectDecade" class="decade'+(g.isSame(e,"y")?" active":"")+(Q(g,"y")?"":" disabled")+'" data-selection="'+(g.year()+6)+'">'+(g.year()+1)+" - "+(g.year()+12)+"</span>",g.add(12,"y");j+="<span></span><span></span><span></span>",a.find("td").html(j),c.eq(1).text(i.year()+1+"-"+g.year())},V=function(){var b,c,g,h,i=o.find(".datepicker-days"),j=i.find("th"),k=[];if(A()){for(j.eq(0).find("span").attr("title",d.tooltips.prevMonth),j.eq(1).attr("title",d.tooltips.selectMonth),j.eq(2).find("span").attr("title",d.tooltips.nextMonth),i.find(".disabled").removeClass("disabled"),j.eq(1).text(f.format(d.dayViewHeaderFormat)),Q(f.clone().subtract(1,"M"),"M")||j.eq(0).addClass("disabled"),Q(f.clone().add(1,"M"),"M")||j.eq(2).addClass("disabled"),b=f.clone().startOf("M").startOf("w").startOf("d"),h=0;42>h;h++)0===b.weekday()&&(c=a("<tr>"),d.calendarWeeks&&c.append('<td class="cw">'+b.week()+"</td>"),k.push(c)),g="",b.isBefore(f,"M")&&(g+=" old"),b.isAfter(f,"M")&&(g+=" new"),b.isSame(e,"d")&&!m&&(g+=" active"),Q(b,"d")||(g+=" disabled"),b.isSame(x(),"d")&&(g+=" today"),(0===b.day()||6===b.day())&&(g+=" weekend"),c.append('<td data-action="selectDay" data-day="'+b.format("L")+'" class="day'+g+'">'+b.date()+"</td>"),b.add(1,"d");i.find("tbody").empty().append(k),S(),T(),U()}},W=function(){var b=o.find(".timepicker-hours table"),c=f.clone().startOf("d"),d=[],e=a("<tr>");for(f.hour()>11&&!h&&c.hour(12);c.isSame(f,"d")&&(h||f.hour()<12&&c.hour()<12||f.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(Q(c,"h")?"":" disabled")+'">'+c.format(h?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},X=function(){for(var b=o.find(".timepicker-minutes table"),c=f.clone().startOf("h"),e=[],g=a("<tr>"),h=1===d.stepping?5:d.stepping;f.isSame(c,"h");)c.minute()%(4*h)===0&&(g=a("<tr>"),e.push(g)),g.append('<td data-action="selectMinute" class="minute'+(Q(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(h,"m");b.empty().append(e)},Y=function(){for(var b=o.find(".timepicker-seconds table"),c=f.clone().startOf("m"),d=[],e=a("<tr>");f.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(Q(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},Z=function(){var a,b,c=o.find(".timepicker span[data-time-component]");h||(a=o.find(".timepicker [data-action=togglePeriod]"),b=e.clone().add(e.hours()>=12?-12:12,"h"),a.text(e.format("A")),Q(b,"h")?a.removeClass("disabled"):a.addClass("disabled")),c.filter("[data-time-component=hours]").text(e.format(h?"HH":"hh")),c.filter("[data-time-component=minutes]").text(e.format("mm")),c.filter("[data-time-component=seconds]").text(e.format("ss")),W(),X(),Y()},$=function(){o&&(V(),Z())},_=function(a){var b=m?null:e;return a?(a=a.clone().locale(d.locale),1!==d.stepping&&a.minutes(Math.round(a.minutes()/d.stepping)*d.stepping%60).seconds(0),void(Q(a)?(e=a,f=e.clone(),g.val(e.format(i)),c.data("date",e.format(i)),m=!1,$(),I({type:"dp.change",date:e.clone(),oldDate:b})):(d.keepInvalid||g.val(m?"":e.format(i)),I({type:"dp.error",date:a})))):(m=!0,g.val(""),c.data("date",""),I({type:"dp.change",date:!1,oldDate:b}),void $())},aa=function(){var b=!1;return o?(o.find(".collapse").each(function(){var c=a(this).data("collapse");return c&&c.transitioning?(b=!0,!1):!0}),b?l:(n&&n.hasClass("btn")&&n.toggleClass("active"),o.hide(),a(window).off("resize",H),o.off("click","[data-action]"),o.off("mousedown",!1),o.remove(),o=!1,I({type:"dp.hide",date:e.clone()}),g.blur(),l)):l},ba=function(){_(null)},ca={next:function(){var a=q[k].navFnc;f.add(q[k].navStep,a),V(),J(a)},previous:function(){var a=q[k].navFnc;f.subtract(q[k].navStep,a),V(),J(a)},pickerSwitch:function(){K(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));f.month(c),k===p?(_(e.clone().year(f.year()).month(f.month())),d.inline||aa()):(K(-1),V()),J("M")},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDecade:function(b){var c=parseInt(a(b.target).data("selection"),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDay:function(b){var c=f.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),_(c.date(parseInt(a(b.target).text(),10))),z()||d.keepOpen||d.inline||aa()},incrementHours:function(){var a=e.clone().add(1,"h");Q(a,"h")&&_(a)},incrementMinutes:function(){var a=e.clone().add(d.stepping,"m");Q(a,"m")&&_(a)},incrementSeconds:function(){var a=e.clone().add(1,"s");Q(a,"s")&&_(a)},decrementHours:function(){var a=e.clone().subtract(1,"h");Q(a,"h")&&_(a)},decrementMinutes:function(){var a=e.clone().subtract(d.stepping,"m");Q(a,"m")&&_(a)},decrementSeconds:function(){var a=e.clone().subtract(1,"s");Q(a,"s")&&_(a)},togglePeriod:function(){_(e.clone().add(e.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,e=a(b.target),f=e.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),e.is("span")?e.toggleClass(d.icons.time+" "+d.icons.date):e.find("span").toggleClass(d.icons.time+" "+d.icons.date)}},showPicker:function(){o.find(".timepicker > div:not(.timepicker-picker)").hide(),o.find(".timepicker .timepicker-picker").show()},showHours:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-hours").show()},showMinutes:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);h||(e.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),_(e.clone().hours(c)),ca.showPicker.call(l)},selectMinute:function(b){_(e.clone().minutes(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},selectSecond:function(b){_(e.clone().seconds(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},clear:ba,today:function(){var a=x();Q(a,"d")&&_(a)},close:aa},da=function(b){return a(b.currentTarget).is(".disabled")?!1:(ca[a(b.currentTarget).data("action")].apply(l,arguments),!1)},ea=function(){var b,c={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return g.prop("disabled")||!d.ignoreReadonly&&g.prop("readonly")||o?l:(void 0!==g.val()&&0!==g.val().trim().length?_(ga(g.val().trim())):d.useCurrent&&m&&(g.is("input")&&0===g.val().trim().length||d.inline)&&(b=x(),"string"==typeof d.useCurrent&&(b=c[d.useCurrent](b)),_(b)),o=F(),L(),R(),o.find(".timepicker-hours").hide(),o.find(".timepicker-minutes").hide(),o.find(".timepicker-seconds").hide(),$(),K(),a(window).on("resize",H),o.on("click","[data-action]",da),o.on("mousedown",!1),n&&n.hasClass("btn")&&n.toggleClass("active"),o.show(),H(),d.focusOnShow&&!g.is(":focus")&&g.focus(),I({type:"dp.show"}),l)},fa=function(){return o?aa():ea()},ga=function(a){return a=void 0===d.parseInputDate?b.isMoment(a)||a instanceof Date?b(a):x(a):d.parseInputDate(a),a.locale(d.locale),a},ha=function(a){var b,c,e,f,g=null,h=[],i={},j=a.which,k="p";w[j]=k;for(b in w)w.hasOwnProperty(b)&&w[b]===k&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in d.keyBinds)if(d.keyBinds.hasOwnProperty(b)&&"function"==typeof d.keyBinds[b]&&(e=b.split(" "),e.length===h.length&&v[j]===e[e.length-1])){for(f=!0,c=e.length-2;c>=0;c--)if(!(v[e[c]]in i)){f=!1;break}if(f){g=d.keyBinds[b];break}}g&&(g.call(l,o),a.stopPropagation(),a.preventDefault())},ia=function(a){w[a.which]="r",a.stopPropagation(),a.preventDefault()},ja=function(b){var c=a(b.target).val().trim(),d=c?ga(c):null;return _(d),b.stopImmediatePropagation(),!1},ka=function(){g.on({change:ja,blur:d.debug?"":aa,keydown:ha,keyup:ia,focus:d.allowInputToggle?ea:""}),c.is("input")?g.on({focus:ea}):n&&(n.on("click",fa),n.on("mousedown",!1))},la=function(){g.off({change:ja,blur:blur,keydown:ha,keyup:ia,focus:d.allowInputToggle?aa:""}),c.is("input")?g.off({focus:ea}):n&&(n.off("click",fa),n.off("mousedown",!1))},ma=function(b){var c={};return a.each(b,function(){var a=ga(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),Object.keys(c).length?c:!1},na=function(b){var c={};return a.each(b,function(){c[this]=!0}),Object.keys(c).length?c:!1},oa=function(){var a=d.format||"L LT";i=a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){var b=e.localeData().longDateFormat(a)||a;return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){return e.localeData().longDateFormat(a)||a})}),j=d.extraFormats?d.extraFormats.slice():[],j.indexOf(a)<0&&j.indexOf(i)<0&&j.push(i),h=i.toLowerCase().indexOf("a")<1&&i.replace(/\[.*?\]/g,"").indexOf("h")<1,y("y")&&(p=2),y("M")&&(p=1),y("d")&&(p=0),k=Math.max(p,k),m||_(e)};if(l.destroy=function(){aa(),la(),c.removeData("DateTimePicker"),c.removeData("date")},l.toggle=fa,l.show=ea,l.hide=aa,l.disable=function(){return aa(),n&&n.hasClass("btn")&&n.addClass("disabled"),g.prop("disabled",!0),l},l.enable=function(){return n&&n.hasClass("btn")&&n.removeClass("disabled"),g.prop("disabled",!1),l},l.ignoreReadonly=function(a){if(0===arguments.length)return d.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return d.ignoreReadonly=a,l},l.options=function(b){if(0===arguments.length)return a.extend(!0,{},d);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,d,b),a.each(d,function(a,b){if(void 0===l[a])throw new TypeError("option "+a+" is not recognized!");l[a](b)}),l},l.date=function(a){if(0===arguments.length)return m?null:e.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return _(null===a?null:ga(a)),l},l.format=function(a){if(0===arguments.length)return d.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+a);return d.format=a,i&&oa(),l},l.timeZone=function(a){return 0===arguments.length?d.timeZone:(d.timeZone=a,l)},l.dayViewHeaderFormat=function(a){if(0===arguments.length)return d.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return d.dayViewHeaderFormat=a,l},l.extraFormats=function(a){if(0===arguments.length)return d.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return d.extraFormats=a,j&&oa(),l},l.disabledDates=function(b){if(0===arguments.length)return d.disabledDates?a.extend({},d.disabledDates):d.disabledDates;if(!b)return d.disabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return d.disabledDates=ma(b),d.enabledDates=!1,$(),l},l.enabledDates=function(b){if(0===arguments.length)return d.enabledDates?a.extend({},d.enabledDates):d.enabledDates;if(!b)return d.enabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return d.enabledDates=ma(b),d.disabledDates=!1,$(),l},l.daysOfWeekDisabled=function(a){if(0===arguments.length)return d.daysOfWeekDisabled.splice(0);if("boolean"==typeof a&&!a)return d.daysOfWeekDisabled=!1,$(),l;if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(d.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||0>b||isNaN(b)?a:(-1===a.indexOf(b)&&a.push(b),a)},[]).sort(),d.useCurrent&&!d.keepInvalid){for(var b=0;!Q(e,"d");){if(e.add(1,"d"),7===b)throw"Tried 7 times to find a valid date";b++}_(e)}return $(),l},l.maxDate=function(a){if(0===arguments.length)return d.maxDate?d.maxDate.clone():d.maxDate;if("boolean"==typeof a&&a===!1)return d.maxDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(d.minDate&&b.isBefore(d.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+b.format(i));return d.maxDate=b,d.useCurrent&&!d.keepInvalid&&e.isAfter(a)&&_(d.maxDate),f.isAfter(b)&&(f=b.clone().subtract(d.stepping,"m")),$(),l},l.minDate=function(a){if(0===arguments.length)return d.minDate?d.minDate.clone():d.minDate;if("boolean"==typeof a&&a===!1)return d.minDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(d.maxDate&&b.isAfter(d.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+b.format(i));return d.minDate=b,d.useCurrent&&!d.keepInvalid&&e.isBefore(a)&&_(d.minDate),f.isBefore(b)&&(f=b.clone().add(d.stepping,"m")),$(),l},l.defaultDate=function(a){if(0===arguments.length)return d.defaultDate?d.defaultDate.clone():d.defaultDate;if(!a)return d.defaultDate=!1,l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!Q(b))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return d.defaultDate=b,(d.defaultDate&&d.inline||""===g.val().trim())&&_(d.defaultDate),l},l.locale=function(a){if(0===arguments.length)return d.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return d.locale=a,e.locale(d.locale),f.locale(d.locale),i&&oa(),o&&(aa(),ea()),l},l.stepping=function(a){return 0===arguments.length?d.stepping:(a=parseInt(a,10),(isNaN(a)||1>a)&&(a=1),d.stepping=a,l)},l.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return d.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&-1===b.indexOf(a.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return d.useCurrent=a,l},l.collapse=function(a){if(0===arguments.length)return d.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return d.collapse===a?l:(d.collapse=a,o&&(aa(),ea()),l)},l.icons=function(b){if(0===arguments.length)return a.extend({},d.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(d.icons,b),o&&(aa(),ea()),l},l.tooltips=function(b){if(0===arguments.length)return a.extend({},d.tooltips);if(!(b instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return a.extend(d.tooltips,b),o&&(aa(),ea()),l},l.useStrict=function(a){if(0===arguments.length)return d.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return d.useStrict=a,l},l.sideBySide=function(a){if(0===arguments.length)return d.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return d.sideBySide=a,o&&(aa(),ea()),l},l.viewMode=function(a){if(0===arguments.length)return d.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(-1===r.indexOf(a))throw new TypeError("viewMode() parameter must be one of ("+r.join(", ")+") value");return d.viewMode=a,k=Math.max(r.indexOf(a),p),K(),l},l.toolbarPlacement=function(a){if(0===arguments.length)return d.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===u.indexOf(a))throw new TypeError("toolbarPlacement() parameter must be one of ("+u.join(", ")+") value");return d.toolbarPlacement=a,o&&(aa(),ea()),l},l.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},d.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),-1===t.indexOf(b.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+t.join(", ")+")");d.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),-1===s.indexOf(b.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+s.join(", ")+")");d.widgetPositioning.vertical=b.vertical}return $(),l},l.calendarWeeks=function(a){if(0===arguments.length)return d.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return d.calendarWeeks=a,$(),l},l.showTodayButton=function(a){if(0===arguments.length)return d.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return d.showTodayButton=a,o&&(aa(),ea()),l},l.showClear=function(a){if(0===arguments.length)return d.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return d.showClear=a,o&&(aa(),ea()),l},l.widgetParent=function(b){if(0===arguments.length)return d.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return d.widgetParent=b,o&&(aa(),ea()),l},l.keepOpen=function(a){if(0===arguments.length)return d.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return d.keepOpen=a,l},l.focusOnShow=function(a){if(0===arguments.length)return d.focusOnShow;if("boolean"!=typeof a)throw new TypeError("focusOnShow() expects a boolean parameter");return d.focusOnShow=a,l},l.inline=function(a){if(0===arguments.length)return d.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return d.inline=a,l},l.clear=function(){return ba(),l},l.keyBinds=function(a){return d.keyBinds=a,l},l.getMoment=function(a){return x(a)},l.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return d.debug=a,l},l.allowInputToggle=function(a){if(0===arguments.length)return d.allowInputToggle;if("boolean"!=typeof a)throw new TypeError("allowInputToggle() expects a boolean parameter");return d.allowInputToggle=a,l},l.showClose=function(a){if(0===arguments.length)return d.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return d.showClose=a,l},l.keepInvalid=function(a){if(0===arguments.length)return d.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");return d.keepInvalid=a,l},l.datepickerInput=function(a){if(0===arguments.length)return d.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return d.datepickerInput=a,l},l.parseInputDate=function(a){if(0===arguments.length)return d.parseInputDate;if("function"!=typeof a)throw new TypeError("parseInputDate() sholud be as function");return d.parseInputDate=a,l},l.disabledTimeIntervals=function(b){if(0===arguments.length)return d.disabledTimeIntervals?a.extend({},d.disabledTimeIntervals):d.disabledTimeIntervals;if(!b)return d.disabledTimeIntervals=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return d.disabledTimeIntervals=b,$(),l},l.disabledHours=function(b){if(0===arguments.length)return d.disabledHours?a.extend({},d.disabledHours):d.disabledHours;if(!b)return d.disabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(d.disabledHours=na(b),d.enabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.enabledHours=function(b){if(0===arguments.length)return d.enabledHours?a.extend({},d.enabledHours):d.enabledHours;if(!b)return d.enabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(d.enabledHours=na(b),d.disabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.viewDate=function(a){if(0===arguments.length)return f.clone();if(!a)return f=e.clone(),l;if(!("string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return f=ga(a),J(),l},c.is("input"))g=c;else if(g=c.find(d.datepickerInput),0===g.size())g=c.find("input");else if(!g.is("input"))throw new Error('CSS class "'+d.datepickerInput+'" cannot be applied to non input element');if(c.hasClass("input-group")&&(n=0===c.find(".datepickerbutton").size()?c.find(".input-group-addon"):c.find(".datepickerbutton")),!d.inline&&!g.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e=x(),f=e.clone(),a.extend(!0,d,G()),l.options(d),oa(),ka(),g.prop("disabled")&&l.disable(),g.is("input")&&0!==g.val().trim().length?_(ga(g.val().trim())):d.defaultDate&&void 0===g.attr("placeholder")&&_(d.defaultDate),d.inline&&ea(),l};a.fn.datetimepicker=function(b){return this.each(function(){var d=a(this);d.data("DateTimePicker")||(b=a.extend(!0,{},a.fn.datetimepicker.defaults,b),d.data("DateTimePicker",c(d,b)))})},a.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(7,"d")):this.date(b.clone().add(this.stepping(),"m"))}},down:function(a){if(!a)return void this.show();var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(7,"d")):this.date(b.clone().subtract(this.stepping(),"m"))},"control up":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(1,"y")):this.date(b.clone().add(1,"h"))}},"control down":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(1,"y")):this.date(b.clone().subtract(1,"h"))}},left:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"d"))}},right:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"d"))}},pageUp:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}});if(!!!templates)var templates={};templates.berry__action=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<button data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" form=\"");t.b(t.v(t.f("form",c,p,0)));t.b("\" class=\"btn btn-");t.b(t.v(t.f("modifier",c,p,0)));if(!t.s(t.f("modifier",c,p,1),c,p,1,0,0,"")){t.b("default")};t.b("\" type=\"");t.b(t.v(t.f("type",c,p,0)));if(!t.s(t.f("type",c,p,1),c,p,1,0,0,"")){t.b("button")};t.b("\">");if(t.s(t.f("icon",c,p,1),c,p,0,152,183,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"fa fa-");t.b(t.v(t.f("icon",c,p,0)));t.b("\"></i> ")});c.pop()}t.b(t.t(t.f("label",c,p,0)));t.b("</button>");return t.fl()},partials:{},subs:{}});templates.berry__addons=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<span class=\"help-inline\"> ");t.b(t.t(t.f("help",c,p,0)));t.b("</span>");t.b("\n"+i);t.b("<span class=\"font-xs text-danger\" style=\"display:block;\"></span>");return t.fl()},partials:{},subs:{}});templates.berry__label=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(!t.s(t.f("hideLabel",c,p,1),c,p,1,0,0,"")){t.b("	");if(t.s(t.f("label",c,p,1),c,p,0,26,255,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<label for=\"");t.b(t.v(t.f("guid",c,p,0)));t.b("\" ");if(t.s(t.f("inline",c,p,1),c,p,0,59,82,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"text-align:left\"")});c.pop()}t.b(" class=\"control-label col-md-");if(t.s(t.f("inline",c,p,1),c,p,0,133,135,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("12")});c.pop()}if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("4")};t.b("\">");t.b("\n"+i);t.b("  ");t.b(t.t(t.f("label",c,p,0)));t.b(":");if(t.s(t.f("required",c,p,1),c,p,0,199,233,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"text-danger\">*</span>")});c.pop()}t.b("\n"+i);t.b("</label>")});c.pop()}t.b("\n"+i)};return t.fl()},partials:{},subs:{}});templates.berry_base_fieldset=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<fieldset data-type=\"fieldset\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,103,166,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" >");t.b("\n"+i);if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,216,428,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<hr>");t.b("\n"+i);t.b("<div class=\"btn-group actions\">");t.b("\n"+i);t.b("	<div class=\"duplicate add btn btn-white\"><i class=\"fa fa-plus text-success\"></i></div><div class=\"btn btn-white remove\"><i class=\"fa fa-minus text-danger\"></i></div>");t.b("\n"+i);t.b("</div>");t.b("\n"+i)});c.pop()}if(!t.s(t.f("hideLabel",c,p,1),c,p,1,0,0,"")){if(t.s(t.d("item.legend",c,p,1),c,p,0,483,517,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<legend>");t.b(t.t(t.d("item.legend",c,p,0)));t.b("</legend>")});c.pop()}t.b("\n"+i);if(!t.s(t.d("item.legend",c,p,1),c,p,1,0,0,"")){if(t.s(t.d("item.label",c,p,1),c,p,0,566,599,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<legend>");t.b(t.t(t.d("item.label",c,p,0)));t.b("</legend>")});c.pop()}t.b("\n"+i)}};t.b("<div style=\"position:relative;top:-20px\">");t.b(t.rp("<berry__addons0",c,p,""));t.b("</div>");t.b("\n"+i);t.b("</fieldset>");return t.fl()},partials:{"<berry__addons0":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_base_form=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<form id=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" ");if(!t.s(t.f("autocomplete",c,p,1),c,p,1,0,0,"")){t.b("autocomplete=\"false\"")};t.b(" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"berry ");if(!t.s(t.d("options.inline",c,p,1),c,p,1,0,0,"")){t.b(" smart-form-horizontal form-horizontal")};t.b(" ");t.b(t.v(t.f("modifiers",c,p,0)));t.b("\" ");if(t.s(t.f("action",c,p,1),c,p,0,207,226,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("action=\"");t.b(t.v(t.f("action",c,p,0)));t.b("\"")});c.pop()}t.b(" onsubmit=\"return false;\" ");if(t.s(t.f("method",c,p,1),c,p,0,274,293,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("method=\"");t.b(t.v(t.f("method",c,p,0)));t.b("\"")});c.pop()}t.b(">");if(!t.s(t.f("legendTarget",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("legend",c,p,1),c,p,0,333,362,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<legend>");t.b(t.t(t.f("legend",c,p,0)));t.b("</legend>")});c.pop()}};t.b("</form>");return t.fl()},partials:{},subs:{}});templates.berry_checkbox=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,62,125,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,231,381,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,416,558,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,429,475,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\" style=\"margin:0 0 5px\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\" style=\"margin:0 0 15px\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,593,646,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\" style=\"margin: -10px 0 5px;\"\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\" style=\"margin: -5px 0 10px\">")};t.b("\n"+i)};t.b("		<div class=\"checkbox\">");t.b("\n"+i);t.b("			<label class=\"");t.b(t.v(t.f("alt-display",c,p,0)));t.b("\">");t.b("\n"+i);t.b("				<input name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" type=\"checkbox\" ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("disabled")};t.b(" ");if(t.s(t.f("value",c,p,1),c,p,0,894,909,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=checked")});c.pop()}t.b(">");if(t.s(t.f("container",c,p,1),c,p,0,934,1020,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<");t.b(t.v(t.f("container",c,p,0)));t.b(" style=\"position:relative;display:inline-block\">");t.b(t.v(t.f("text",c,p,0)));t.b("</");t.b(t.v(t.f("container",c,p,0)));t.b(">")});c.pop()}t.b("\n"+i);t.b("			</label>");t.b("\n"+i);t.b("		</div>");t.b("\n"+i);t.b("	");if(t.s(t.f("post",c,p,1),c,p,0,1066,1121,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_radio=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,751,1062,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("			<div class=\"radio\">");t.b("\n"+i);t.b("				<label ");if(t.s(t.f("inline",c,p,1),c,p,0,797,817,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("class=\"radio-inline\"")});c.pop()}t.b(">");t.b("\n"+i);t.b("					<input data-label=\"");t.b(t.v(t.f("label",c,p,0)));t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("readonly")};t.b(" type=\"radio\" ");if(t.s(t.f("selected",c,p,1),c,p,0,962,977,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=checked")});c.pop()}t.b(" >");t.b("\n"+i);t.b("					");t.b(t.t(t.f("label",c,p,0)));if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("&nbsp;")};t.b("\n"+i);t.b("				</label>");t.b("\n"+i);t.b("			</div>");t.b("\n"+i)});c.pop()}t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1086,1141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1170,1176,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_raw=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix ");t.b(t.v(t.f("modifiers",c,p,0)));t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.f("label",c,p,1),c,p,0,87,236,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,100,151,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\" style=\"margin:0px 0px 15px\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\" style=\"margin:6px 0 15px\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\" style=\"margin:0px 0px 15px\">");t.b("\n"+i)};t.b("		<div ");if(t.s(t.f("alert",c,p,1),c,p,0,341,398,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("class=\"alert alert-");t.b(t.v(t.f("alert",c,p,0)));t.b("\" style=\"margin-bottom: 5px;\"")});c.pop()}t.b(">");t.b(t.t(t.f("value",c,p,0)));t.b("</div>");t.b("\n"+i);t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}}},subs:{}});templates.berry_row=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"></div>");return t.fl()},partials:{},subs:{}});templates.berry_select=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);t.b("			<select class=\"form-control\"  name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("readonly disabled=\"true\"")};t.b("  ");if(t.s(t.f("multiple_enable",c,p,1),c,p,0,859,867,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("multiple")});c.pop()}t.b(" >");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,905,1017,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				<option ");if(t.s(t.f("selected",c,p,1),c,p,0,931,950,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("selected='selected'")});c.pop()}t.b(" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\">");t.b("\n"+i);t.b("					");t.b(t.t(t.f("label",c,p,0)));t.b("\n"+i);t.b("				</option>");t.b("\n"+i)});c.pop()}t.b("			</select>");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1054,1109,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1138,1144,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_text=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,675,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group col-xs-12\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("    ");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,705,730,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);t.b("		<input ");if(!t.s(t.f("autocomplete",c,p,1),c,p,1,0,0,"")){t.b("autocomplete=\"off\"")};t.b(" class=\"form-control\" ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("readonly")};t.b(" ");if(t.s(t.f("maxLength",c,p,1),c,p,0,882,907,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("maxlength=\"");t.b(t.v(t.f("maxLength",c,p,0)));t.b("\"")});c.pop()}if(t.s(t.f("min",c,p,1),c,p,0,929,943,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" min=\"");t.b(t.v(t.f("min",c,p,0)));t.b("\"")});c.pop()}if(t.s(t.f("max",c,p,1),c,p,0,959,973,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" max=\"");t.b(t.v(t.f("max",c,p,0)));t.b("\"")});c.pop()}t.b(" placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\" type=\"");t.b(t.v(t.f("elType",c,p,0)));if(!t.s(t.f("elType",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("type",c,p,0)))};t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" id=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" />");t.b("\n"+i);t.b("    ");if(t.s(t.f("post",c,p,1),c,p,0,1124,1179,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("    ");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1210,1216,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_textarea=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.f("label",c,p,1),c,p,0,229,426,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,242,316,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,278,302,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,375,399,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,486,510,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">");t.b("\n"+i)};t.b("		<textarea class=\"form-control\"  ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("readonly")};t.b(" ");if(t.s(t.f("maxLength",c,p,1),c,p,0,622,647,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("maxlength=\"");t.b(t.v(t.f("maxLength",c,p,0)));t.b("\"")});c.pop()}t.b(" style=\"width:100%;height:auto;min-height:20px\" rows=\"");t.b(t.v(t.f("rows",c,p,0)));if(!t.s(t.f("rows",c,p,1),c,p,1,0,0,"")){t.b("3")};t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" id=\"");t.b(t.v(t.f("guid",c,p,0)));t.b("\" placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\">");t.b(t.v(t.f("content",c,p,0)));t.b(t.v(t.f("value",c,p,0)));t.b("</textarea>");t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"			"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry__popins=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("hideLabel",c,p,1),c,p,0,14,325,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-lg-4\" style=\"padding-left:0\">");t.b("\n"+i);t.b("	<div class=\"btn-group pull-right\">");t.b("\n"+i);t.b("		<div style=\"margin-left:2px;\" class=\"popoverCancel fa fa-times btn btn-danger\" data-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"></div>");t.b("\n"+i);t.b("		<div style=\"width: 37px;\" class=\"fa fa-check btn btn-success popoverSave\" data-name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"></div>");t.b("\n"+i);t.b("	</div>");t.b("\n"+i);t.b("</div>");t.b("\n"+i)});c.pop()}return t.fl()},partials:{},subs:{}});templates.berry_popins_fieldset=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<tr>");t.b("\n"+i);t.b("			<td width=\"35%\">");t.b(t.v(t.f("label",c,p,0)));t.b("</td>");t.b("\n"+i);t.b("			<td width=\"65%\"><a href=\"javascript:void(0)\" class=\"popins\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">-empty-</a></td>");t.b("\n"+i);t.b("		</tr>");return t.fl()},partials:{},subs:{}});templates.berry_popins_form=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<table id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"table table-bordered table-striped\" style=\"clear: both\">");t.b("\n"+i);t.b("	<tbody>");t.b("\n"+i);if(t.s(t.f("fields",c,p,1),c,p,0,105,703,"{{ }}")){t.rs(c,p,function(c,p,t){if(!t.s(t.f("isContainer",c,p,1),c,p,1,0,0,"")){t.b("		<tr>");t.b("\n"+i);t.b("			<td width=\"50%\">");t.b(t.v(t.f("label",c,p,0)));t.b("</td>");t.b("\n"+i);t.b("			<td width=\"50%\"><a href=\"javascript:void(0)\" data-popins=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b(t.v(t.f("display",c,p,0)));if(!t.s(t.f("display",c,p,1),c,p,1,0,0,"")){t.b("-empty-")};t.b("</a></td>");t.b("\n"+i);t.b("		</tr>");t.b("\n"+i)};if(t.s(t.f("isContainer",c,p,1),c,p,0,334,684,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("instances",c,p,1),c,p,0,351,667,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("		<tr>");t.b("\n"+i);t.b("			<td width=\"50%\"><b>");t.b(t.v(t.f("legend",c,p,0)));if(!t.s(t.f("legend",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("label",c,p,0)))};t.b("</b></td>");t.b("\n"+i);t.b("			<td width=\"50%\"></td>");t.b("\n"+i);t.b("		</tr>");t.b("\n"+i);if(t.s(t.f("fields",c,p,1),c,p,0,478,653,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("		<tr>");t.b("\n"+i);t.b("			<td width=\"50%\">");t.b(t.v(t.f("label",c,p,0)));t.b("</td>");t.b("\n"+i);t.b("			<td width=\"50%\"><a href=\"javascript:void(0)\" data-popins=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b(t.v(t.f("display",c,p,0)));if(!t.s(t.f("display",c,p,1),c,p,1,0,0,"")){t.b("-empty-")};t.b("</a></td>");t.b("\n"+i);t.b("		</tr>");t.b("\n"+i)});c.pop()}});c.pop()}});c.pop()}});c.pop()}t.b("	</tbody>");t.b("\n"+i);t.b("</table>");return t.fl()},partials:{},subs:{}});templates.berry_tabs=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.d("sectionList.0",c,p,1),c,p,0,18,186,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<ul class=\"nav nav-tabs\" style=\"margin-bottom:15px\">");t.b("\n"+i);if(t.s(t.f("sectionList",c,p,1),c,p,0,89,163,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<li>");t.b("\n"+i);t.b("		<a href=\"#tab");t.b(t.v(t.f("index",c,p,0)));t.b("\" data-toggle=\"tab\">");t.b(t.t(t.f("text",c,p,0)));t.b("</a>");t.b("\n"+i);t.b("	</li>");t.b("\n"+i)});c.pop()}t.b("</ul>");t.b("\n"+i)});c.pop()}return t.fl()},partials:{},subs:{}});templates.berry_wizard_fieldset=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"step-pane\" id=\"step");t.b(t.v(t.d("owner.section_count",c,p,0)));t.b("\">");t.b("\n"+i);t.b("	<h3><strong>Step ");t.b(t.v(t.d("owner.section_count",c,p,0)));t.b(" </strong>");if(t.s(t.d("item.legend",c,p,1),c,p,0,124,142,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" - ");t.b(t.v(t.d("item.legend",c,p,0)))});c.pop()}t.b("</h3>");t.b("\n"+i);t.b("	<!-- wizard form starts here -->");t.b("\n"+i);t.b("	<fieldset data-type=\"fieldset\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,288,351,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" >");t.b("\n"+i);if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,402,554,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("		<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("		<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}t.b("	</fieldset>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{},subs:{}});templates.berry_wizard_form=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"berry-wizard\">");t.b("\n"+i);t.b("	<div class=\"wizard\">");t.b("\n"+i);t.b("		<ul>");t.b("\n"+i);t.b("		</ul>");t.b("\n"+i);t.b("	</div>");t.b("\n"+i);t.b("	<div class=\"step-content\">");t.b("\n"+i);t.b(t.rp("<berry_base_form0",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry_base_form0":{name:"berry_base_form",partials:{},subs:{}}},subs:{}});templates.berry_wizard_steps=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");if(t.s(t.f("sectionList",c,p,1),c,p,0,16,156,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<li data-target=\"#step");t.b(t.v(t.f("index",c,p,0)));t.b("\" class=\"");t.b(t.v(t.f("state",c,p,0)));t.b("\" >");t.b("\n"+i);t.b("	<span class=\"badge\">");t.b(t.v(t.f("index",c,p,0)));t.b("</span>");t.b("\n"+i);t.b("		");t.b(t.v(t.f("text",c,p,0)));t.b("\n"+i);t.b("	<span class=\"chevron\"></span>");t.b("\n"+i);t.b("</li>");t.b("\n"+i)});c.pop()}return t.fl()},partials:{},subs:{}});templates.berry_ace=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.f("label",c,p,1),c,p,0,84,281,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,97,171,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,133,157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,230,254,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,341,365,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">");t.b("\n"+i)};t.b("		<div class=\"formcontrol\"><div placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\" style=\"min-height: 250px;outline:none;border:solid 1px #cbd5dd;");if(!t.s(t.f("unstyled",c,p,1),c,p,1,0,0,"")){t.b("background:#fff;padding:10px")};t.b("\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("container\"></div></div>");t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"			"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_contenteditable=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"clearfix form-group\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.f("label",c,p,1),c,p,0,80,277,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,93,167,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,129,153,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,226,250,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\" ");if(t.s(t.f("advanced",c,p,1),c,p,0,337,361,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("style=\"padding:0px 13px\"")});c.pop()}t.b(">");t.b("\n"+i)};t.b("		<div class=\"formcontrol\" style=\"height:auto\"><div placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\" style=\"outline:none;border:solid 1px #cbd5dd;");if(!t.s(t.f("unstyled",c,p,1),c,p,1,0,0,"")){t.b("background:#fff;padding:10px")};t.b("\">");t.b(t.v(t.f("content",c,p,0)));t.b(t.v(t.f("value",c,p,0)));t.b("</div></div>");t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"			"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_croppie=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		<input ");if(!t.s(t.f("autocomplete",c,p,1),c,p,1,0,0,"")){t.b("autocomplete=\"off\"")};t.b(" class=\"form-control\" style=\"display:none\" ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("readonly")};t.b(" ");if(t.s(t.f("maxLength",c,p,1),c,p,0,737,762,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("maxlength=\"");t.b(t.v(t.f("maxLength",c,p,0)));t.b("\"")});c.pop()}if(t.s(t.f("min",c,p,1),c,p,0,784,798,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" min=\"");t.b(t.v(t.f("min",c,p,0)));t.b("\"")});c.pop()}if(t.s(t.f("max",c,p,1),c,p,0,814,828,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" max=\"");t.b(t.v(t.f("max",c,p,0)));t.b("\"")});c.pop()}t.b(" placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\" type=\"file\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" id=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" />");t.b("\n"+i);t.b("		<span class=\"btn btn-default\">Select File</span>");t.b("\n"+i);t.b("    <div class=\"croppie\" style=\"height:150px;margin-bottom: 50px;margin-top:10px\"></div>");t.b("\n");t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_cselect=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"				"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,248,407,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("				<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,445,549,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				");if(t.s(t.f("inline",c,p,1),c,p,0,461,484,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("				");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("				<div class=\"col-md-12\">");t.b("\n"+i)};t.b("\n"+i);t.b("					<div class=\"dropdown\">");t.b("\n"+i);t.b("						<button class=\"btn btn-default dropdown-toggle\" type=\"button\" id=\"dropdownMenu1\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">");t.b("\n"+i);t.b("							");if(t.s(t.f("value",c,p,1),c,p,0,817,826,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("value",c,p,0)))});c.pop()}if(!t.s(t.f("value",c,p,1),c,p,1,0,0,"")){t.b("Choose")};t.b("\n"+i);t.b("							<span class=\"caret\"></span>");t.b("\n"+i);t.b("						</button>");t.b("\n"+i);t.b("						<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenu1\">");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,1004,1126,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("												<li><a href=\"javascript:void(0);\" ");if(t.s(t.f("value",c,p,1),c,p,0,1061,1083,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\"")});c.pop()}t.b(">");t.b(t.t(t.f("label",c,p,0)));t.b("</a></li>");t.b("\n"+i)});c.pop()}t.b("						</ul>");t.b("\n"+i);t.b("					</div>");t.b("\n"+i);t.b("						");t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"					"));t.b("				</div>");t.b("\n"+i);t.b("			</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_custom_radio=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);t.b("			<div class=\"custom-group\"  name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" style=\"max-height:200px;overflow-y:scroll;\">");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,842,1035,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				<a href=\"javascript:void(0);\" class=\"btn");if(!t.s(t.f("selected",c,p,1),c,p,1,0,0,"")){t.b(" ");t.b(t.v(t.f("defaultClass",c,p,0)))};if(t.s(t.f("selected",c,p,1),c,p,0,943,961,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.f("selectedClass",c,p,0)))});c.pop()}t.b("\" data-value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\">");t.b("\n"+i);t.b("					");t.b(t.t(t.f("label",c,p,0)));t.b("\n"+i);t.b("				</a>&nbsp;");t.b("\n"+i)});c.pop()}t.b("			</div>");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1069,1124,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1153,1159,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_custom_select=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);t.b("			<div class=\"list-group\"  name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" style=\"max-height:200px;overflow-y:scroll;\">");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,840,1169,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				<a href=\"javascript:void(0);\" class=\"list-group-item ");if(t.s(t.f("selected",c,p,1),c,p,0,911,934,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("list-group-item-success")});c.pop()}t.b("\" ");if(t.s(t.f("value",c,p,1),c,p,0,959,981,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\"")});c.pop()}t.b(">");t.b("\n"+i);t.b("					");if(t.s(t.f("image",c,p,1),c,p,0,1008,1135,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img src=\"");t.b(t.v(t.f("root",c,p,0)));t.b(t.v(t.f("image",c,p,0)));t.b("\" alt=\"contact\" class=\"img-rounded avatar hidden-phone\" style=\"margin-right: 14px;max-width: 45px;\">")});c.pop()}t.b(t.t(t.f("label",c,p,0)));t.b("\n"+i);t.b("				</a>");t.b("\n"+i)});c.pop()}t.b("			</div>");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1203,1258,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1287,1293,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_dropdown=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n");t.b("\n"+i);t.b("			<!-- Single button -->");t.b("\n"+i);t.b("			<div class=\"btn-group btn-block\">");t.b("\n"+i);t.b("				<button type=\"button\" class=\"btn btn-default btn-block dropdown-toggle\" data-toggle=\"dropdown\">");t.b("\n"+i);t.b("					");t.b(t.v(t.f("value",c,p,0)));t.b(" <span class=\"caret\"></span>");t.b("\n"+i);t.b("				</button>");t.b("\n"+i);t.b("				<ul class=\"dropdown-menu\" data-value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" role=\"menu\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,1056,1126,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("						<li><a data-value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" href=\"#\">");t.b(t.v(t.f("label",c,p,0)));t.b("</a></li>");t.b("\n"+i)});c.pop()}t.b("				</ul>");t.b("\n"+i);t.b("			</div>");t.b("\n");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1171,1226,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1255,1261,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_grid_select=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12 \">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,593,666,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,694,719,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);t.b("			<div name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" style=\"max-height:400px;overflow-y:scroll;margin:0 -5px -10px;color:#fefefe\" class=\"list\">");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,867,1294,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				<div data-title=\"");t.b(t.v(t.f("label",c,p,0)));t.b("\" class=\"col-md-3 ");if(t.s(t.f("selected",c,p,1),c,p,0,929,945,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("select_class",c,p,0)))});c.pop()}t.b("\" ");if(t.s(t.f("value",c,p,1),c,p,0,970,992,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\"")});c.pop()}t.b(">");t.b("\n"+i);t.b("					<div style=\"border:solid 3px;height:85px;margin:5px -10px;padding:1px;border-radius:5px;text-align:center\">");t.b("\n"+i);t.b("						");if(t.s(t.f("image",c,p,1),c,p,0,1133,1257,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img src=\"");t.b(t.v(t.f("root",c,p,0)));t.b(t.v(t.f("image",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("label",c,p,0)));t.b("\" class=\"img-rounded avatar hidden-phone\" style=\"max-width:100%;max-height:100%\">")});c.pop()}t.b("\n"+i);t.b("					</div>");t.b("\n"+i);t.b("				</div>");t.b("\n"+i)});c.pop()}t.b("			</div>");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1328,1383,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1412,1418,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_image_picker=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"");if(!t.s(t.f("size",c,p,1),c,p,1,0,0,"")){t.b(" form-group ")};if(t.s(t.f("size",c,p,1),c,p,0,51,67,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("col-sm-");t.b(t.v(t.f("size",c,p,0)));t.b(" ")});c.pop()}t.b(" clearfix");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,122,185,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,291,441,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(!t.s(t.f("size",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("label",c,p,1),c,p,0,487,582,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,500,523,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)}};t.b("	");if(t.s(t.f("size",c,p,1),c,p,0,663,668,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div>")});c.pop()}t.b("\n"+i);t.b("		<input placeholder=\"Enter image url here or...\" type=\"hidden\" name=\"imgUrl\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\">");t.b("\n"+i);t.b("	    ");if(!t.s(t.f("value",c,p,1),c,p,1,0,0,"")){t.b("<button type=\"button\" class=\"btn btn-default\">Select Image</button>")};t.b("\n"+i);t.b("	    ");if(t.s(t.f("value",c,p,1),c,p,0,883,1000,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img class=\"thumbnail pull-left\" style=\"max-width:100%;max-height:200px\" ");if(t.s(t.f("value",c,p,1),c,p,0,966,989,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("src=\"");t.b(t.v(t.f("path",c,p,0)));t.b(t.v(t.f("value",c,p,0)));t.b("\"")});c.pop()}t.b(">")});c.pop()}t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_radio_collection=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n");t.b("\n"+i);t.b("			<table class=\"table table-striped\">");t.b("\n"+i);t.b("				<thead>");t.b("\n"+i);t.b("				<tr>");t.b("\n"+i);t.b("					<th></th>");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,829,859,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("					<th>");t.b(t.v(t.f("label",c,p,0)));t.b("</th>");t.b("\n"+i)});c.pop()}t.b("				</tr>");t.b("\n");t.b("\n"+i);t.b("				</thead>");t.b("\n"+i);t.b("				<tbody>");t.b("\n"+i);if(t.s(t.f("labels",c,p,1),c,p,0,923,1303,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("				<tr>");t.b("\n"+i);t.b("					<td>");t.b("\n"+i);t.b("						<label ");if(t.s(t.f("inline",c,p,1),c,p,0,967,987,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("class=\"radio-inline\"")});c.pop()}t.b(">");t.b("\n"+i);t.b("							");t.b(t.t(t.f("name",c,p,0)));if(!t.s(t.f("name",c,p,1),c,p,1,0,0,"")){t.b("&nbsp;")};t.b("\n"+i);t.b("						</label>");t.b("\n"+i);t.b("					</td>");t.b("\n");t.b("\n"+i);if(t.s(t.f("options",c,p,1),c,p,0,1086,1277,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("					<td>");t.b("\n"+i);t.b("						<input data-label=\"");t.b(t.v(t.f("label",c,p,0)));t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" ");if(!t.s(t.f("isEnabled",c,p,1),c,p,1,0,0,"")){t.b("readonly")};t.b(" type=\"radio\" ");if(t.s(t.f("selected",c,p,1),c,p,0,1230,1245,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked=checked")});c.pop()}t.b(" >");t.b("\n"+i);t.b("					</td>");t.b("\n"+i)});c.pop()}t.b("				</tr>");t.b("\n"+i)});c.pop()}t.b("		</tbody>");t.b("\n"+i);t.b("			</table>");t.b("\n");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,1350,1405,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1434,1440,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_rateit=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"row clearfix form-group ");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,73,136,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,242,392,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(t.s(t.f("label",c,p,1),c,p,0,427,522,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,440,463,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)};t.b("		");if(t.s(t.f("pre",c,p,1),c,p,0,592,665,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\"><span class=\"input-group-addon\">");t.b(t.t(t.f("pre",c,p,0)));t.b("</span>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("pre",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("post",c,p,1),c,p,0,693,718,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"input-group\">")});c.pop()}};t.b("\n"+i);t.b("		<!--input type=\"range\" min=\"0\" max=\"5\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" step=\"0.5\" id=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n"+i);t.b("		<div class=\"rateit\" data-rateit-backingfld=\"#");t.b(t.v(t.f("name",c,p,0)));t.b("\"></div-->");t.b("\n"+i);t.b("			<div class=\"rateit\"></div>");t.b("\n"+i);t.b("		");if(t.s(t.f("post",c,p,1),c,p,0,928,983,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"input-group-addon\">");t.b(t.t(t.f("post",c,p,0)));t.b("</span></div>")});c.pop()}t.b("\n"+i);t.b("		");if(!t.s(t.f("post",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("pre",c,p,1),c,p,0,1012,1018,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>")});c.pop()}};t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.berry_tabs_fieldset=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"tab-pane\" id=\"tab");t.b(t.v(t.d("owner.section_count",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry_base_fieldset0",c,p,"	"));t.b("</div>");return t.fl()},partials:{"<berry_base_fieldset0":{name:"berry_base_fieldset",partials:{},subs:{}}},subs:{}});templates.berry_upload=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"");if(!t.s(t.f("size",c,p,1),c,p,1,0,0,"")){t.b(" form-group ")};if(t.s(t.f("size",c,p,1),c,p,0,51,67,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("col-sm-");t.b(t.v(t.f("size",c,p,0)));t.b(" ")});c.pop()}t.b(" clearfix");t.b(t.v(t.f("modifiers",c,p,0)));t.b(" ");if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,122,185,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("dupable\" data-min=\"");t.b(t.v(t.d("multiple.min",c,p,0)));t.b("\" data-max=\"");t.b(t.v(t.d("multiple.max",c,p,0)))});c.pop()}t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\">");t.b("\n"+i);t.b(t.rp("<berry__label0",c,p,"	"));if(t.s(t.d("multiple.duplicate",c,p,1),c,p,0,291,441,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	<div class=\"duplicate add btn btn-default\"><i class=\"fa fa-plus\"></i></div>");t.b("\n"+i);t.b("	<div class=\"btn btn-default remove\"><i class=\"fa fa-minus\"></i></div>");t.b("\n"+i)});c.pop()}if(!t.s(t.f("size",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("label",c,p,1),c,p,0,487,582,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("	");if(t.s(t.f("inline",c,p,1),c,p,0,500,523,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"col-md-12\">")});c.pop()}t.b("\n"+i);t.b("	");if(!t.s(t.f("inline",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"col-md-8\">")};t.b("\n"+i)});c.pop()}if(!t.s(t.f("label",c,p,1),c,p,1,0,0,"")){t.b("	<div class=\"col-md-12\">");t.b("\n"+i)}};t.b("	");if(t.s(t.f("size",c,p,1),c,p,0,663,668,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div>")});c.pop()}t.b("\n"+i);t.b("		<form action=\"");t.b(t.v(t.f("path",c,p,0)));t.b("\" method=\"post\" class=\"dz-square dropzone clickable\" id=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"></form>");t.b("\n"+i);t.b(t.rp("<berry__addons1",c,p,"		"));t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{"<berry__label0":{name:"berry__label",partials:{},subs:{}},"<berry__addons1":{name:"berry__addons",partials:{},subs:{}}},subs:{}});templates.modal=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div class=\"modal fade\" id=\"myModal");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-update=\"");t.b(t.v(t.f("update",c,p,0)));t.b("\" data-append=\"");t.b(t.v(t.f("append",c,p,0)));t.b("\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">");t.b("\n"+i);t.b("	<div class=\"modal-dialog\">");t.b("\n"+i);t.b("		<div class=\"modal-content\">");t.b("\n"+i);t.b("			<div class=\"modal-header ");t.b(t.v(t.d("modal.header_class",c,p,0)));t.b("\">");t.b("\n"+i);t.b("				<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>");t.b("\n"+i);t.b("				<h4 class=\"modal-title\" id=\"myModalLabel\">");if(t.s(t.f("icon",c,p,1),c,p,0,437,468,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"fa fa-");t.b(t.v(t.f("icon",c,p,0)));t.b("\"></i> ")});c.pop()}t.b(t.t(t.f("title",c,p,0)));t.b("&nbsp;</h4>");t.b("\n"+i);t.b("			</div>");t.b("\n"+i);t.b("			<div class=\"modal-body\">");t.b("\n"+i);t.b("				");t.b(t.t(t.f("body",c,p,0)));t.b("\n"+i);t.b("			</div>");t.b("\n"+i);t.b("			<div class=\"modal-footer\">");t.b("\n"+i);t.b("				");t.b(t.t(t.f("footer",c,p,0)));t.b("\n"+i);t.b("			</div>");t.b("\n"+i);t.b("		</div>");t.b("\n"+i);t.b("	</div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{},subs:{}});function berryTable(e){function t(){return d.render()}function i(t,i){var s=this.files;window.FileReader?(!function(i){var s=new FileReader;s.readAsText(i),s.onload=function(i){var s=i.target.result,n=CSVToArray(s),a=!0;$("#myModal").remove();var o=$(templates.modal.render({title:"Importing CSV ",footer:'<div class="btn btn-danger" data-dismiss="modal">Cancel</div>',body:'<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 0%"><span class="sr-only">50% Complete</span></div></div><div class="status">Validating Items...</div>'}));o.modal(),o.on("hidden.bs.modal",function(){this.importing=!1}.bind(this));var r=n.length-1,l=2*r,d=[];this.importing=!0,n[0]=_.map(n[0],function(t){var i=_.findWhere(e.schema,{label:t});return i=null==i?t:i.name});for(var h=1;h<n.length;h++){if(!this.importing)return!1;if(n[0].length==n[h].length){var c={};for(var f in n[0])c[n[0][f]]=n[h][f];if(a=t.validate(c),!a)break;d.push(a)}else r--;o.find(".progress-bar").width(h/l*100+"%")}if(!a)return o.find(".btn").html("Done"),void o.find(".status").html('<div class="alert alert-danger">Error(s) in row '+h+", failed to validate!<ul><li>"+_.filter(t.errors,function(e){return e.length}).join("</li><li>")+"</li></div>");o.find(".status").html("Adding Items...");for(var h=0;h<d.length;h++){if(!this.importing)return!1;t.add(d[h]),o.find(".progress-bar").width((h+r)/l*100+"%")}o.find(".status").html('<div class="alert alert-success">Successfully processed file, '+r+" rows were added!</div>"),o.find(".btn").toggleClass("btn-danger btn-success").html("Done"),o.find(".progress").hide(),"undefined"!=typeof t.options.defaultSort&&(t.models=_.sortBy(t.models,function(e){return e.attributes[this.options.defaultSort]}.bind(t)).reverse()),"function"==typeof t.options.onBulkLoad&&t.options.onBulkLoad()},s.onerror=function(e){"NotReadableError"==e.target.error.name&&alert("Canno't read file !")}}(s[0]),i.currentTarget.value=""):alert("FileReader is not supported in this browser.")}function s(t){if(this.$el=t,this.options.columns&&this.$el.on("click",".columnEnables label",function(e){e.stopPropagation(),_.findWhere(this.summary.items,{id:e.currentTarget.dataset.field}).isEnabled=e.currentTarget.childNodes[0].checked,this.draw()}.bind(this)),this.$el.on("change",".csvFileInput",_.partial(i,this)),this.$el.on("change",".sortBy",function(e){""!==$(e.currentTarget).val()&&(r.call(this,(_.findWhere(this.options.filterFields,{id:$(e.currentTarget).val()})||{search:!0}).search),this.draw())}.bind(this)),this.$el.on("click",".reverse",function(){r.call(this,this.options.sort),this.draw()}.bind(this)),this.$el.on("click",".filterForm",function(){this.$el.find('[name="search"]').val(""),$().berry({legend:"Filter By",name:"modal_filter"+this.options.id,attributes:this.filterValues,disableMath:!0,suppress:!0,fields:e.filterFields}).on("save",function(){this.filterValues=Berries["modal_filter"+this.options.id].toJSON(),this.draw(),Berries["modal_filter"+this.options.id].trigger("close")},this)}.bind(this)),this.$el.on("click",'[name="bt-upload"]',function(){this.$el.find(".csvFileInput").click()}.bind(this)),this.$el.on("click",'[data-event="delete"]',function(e){$(e.target).closest(".dropdown-menu").toggle();var t=_.findWhere(this.models,{id:e.currentTarget.dataset.id});confirm("Are you sure you want to delete? \nThis operation can not be undone.\n\n"+_.values(t.attributes).join("\n"))&&("function"==typeof this.options.delete&&this.options.delete(t),t.delete(),this.draw(),this.updateCount(_.where(this.models,{checked:!0}).length))}.bind(this)),this.$el.on("click",'[data-event="delete_all"]',function(){var e=_.where(this.models,{checked:!0});e.length&&confirm("Are you sure you want to delete "+e.length+" records? \nThis operation can not be undone.\n\n")&&(_.each(e,function(e){"function"==typeof this.options.delete&&this.options.delete(e),e.delete()}.bind(this)),this.draw(),this.updateCount(_.where(this.models,{checked:!0}).length))}.bind(this)),this.$el.on("click","[data-event].custom-event-all",function(e){e.stopPropagation();var t=_.findWhere(this.options.events,{name:e.target.dataset.event});"undefined"!=typeof t&&"function"==typeof t.callback&&(t.multiEdit&&_.where(this.models,{checked:!0}).length>1?_.each(_.where(this.models,{checked:!0}),function(e){t.callback(e)}):t.callback(_.where(this.models,{checked:!0})[0]),"function"==typeof t.complete&&t.complete(_.where(this.models,{checked:!0}),this))}.bind(this)),this.$el.on("click","[data-event].custom-event-collection",function(e){e.stopPropagation();var t=_.findWhere(this.options.events,{name:e.target.dataset.event});"undefined"!=typeof t&&"function"==typeof t.callback&&t.callback.call(this,this.models)}.bind(this)),this.$el.on("click",'[data-event="edit_all"]',function(e){e.stopPropagation(),"undefined"!=typeof this.options.multiEdit&&0!==this.options.multiEdit.length&&_.where(this.models,{checked:!0}).length>1?this.editCommon():$().berry($.extend(!0,{},{name:"modal",legend:'<i class="fa fa-pencil-square-o"></i> Edit',model:_.where(this.models,{checked:!0})[0]},this.options.berry||{})).on("saved",function(){"function"==typeof this.options.edit&&this.options.edit(_.where(this.models,{checked:!0})[0]),"function"==typeof this.options.editComplete&&this.options.editComplete(_.where(this.models,{checked:!0}),this),this.draw()},this)}.bind(this)),this.$el.on("change",'[name="count"]',function(t){e.count=parseInt($(t.currentTarget).val(),10),this.draw()}.bind(this)),this.$el.on("input",'[name="search"]',_.debounce(function(){this.draw()}.bind(this),300)),t.find(".filter").length&&(this.filter=t.find(".filter").berry({name:"filter"+this.options.id,renderer:"inline",disableMath:!0,suppress:!0,fields:e.filterFields}).on("change",function(){this.$el.find('[name="search"]').val(""),this.filterValues=this.filter.toJSON(),this.draw()},this),h.call(this.filter,this.defaults)),this.updateCount=function(e){this.summary.checked_count=e,this.summary.multi_checked=e>1;var t=this.$el.find('[data-event="select_all"].fa');e>0&&e==this.models.length?t.attr("class","fa fa-2x fa-check-square-o"):0==e?t.attr("class","fa fa-2x fa-square-o"):t.attr("class","fa fa-2x fa-minus-square-o")},this.$el.on("click",'[data-event="select_all"]',function(){var e=_.where(this.models,{checked:!0});e.length||0==this.models.length?_.each(e,function(e){e.toggle(!1)}):_.each(this.filtered,function(e){e.toggle(!0)}),e=_.where(this.models,{checked:!0}),this.updateCount(e.length)}.bind(this)),e.data)for(var s in e.data)this.models.push(new tableModel(this,e.data[s]).on("check",function(){this.owner.updateCount(_.where(this.owner.models,{checked:!0}).length),this.owner.$el.find('[name="events"]').html(templates.events.render(this.owner.summary,templates))}));"undefined"!=typeof this.options.defaultSort&&(this.models=_.sortBy(this.models,function(e){return e.attributes[this.options.defaultSort]}.bind(this)).reverse()),this.$el.on("click","[data-page]",o.bind(this)),e.sort&&this.$el.on("click","[data-sort]",function(e){e.stopPropagation(),e.preventDefault();var t=_.findWhere(this.options.filterFields,{name:$(e.currentTarget).data("sort")}).search;this.options.reverse&&this.options.sort==t?r.call(this,!0):r.call(this,t),this.draw()}.bind(this)),this.$el.on("click",'[name="reset-search"]',function(){this.$el.find('[name="search"]').val(""),r.call(this,!0),this.filter&&h.call(this.filter,this.defaults),this.filterValues={},this.draw()}.bind(this)),this.$el.on("click",'[name="bt-download"]',function(){this.getCSV()}.bind(this)),this.$el.find('[data-event="add"]').on("click",function(){var t=_.findWhere(this.options.events,{name:"add"});"undefined"!=typeof t&&"function"==typeof t.callback?t.callback.call(this):$().berry($.extend(!0,{},{name:"modal",legend:'<i class="fa fa-pencil-square-o"></i> Create New',fields:e.schema},e.berry||{})).on("save",function(){if(Berries.modal.validate()){var e=new tableModel(this,Berries.modal.toJSON()).on("check",function(){this.updateCount(_.where(this.models,{checked:!0}).length),this.$el.find('[name="events"]').html(templates.events.render(this.summary,templates))}.bind(this));this.models.push(e),"undefined"!=typeof this.options.defaultSort&&(this.models=_.sortBy(this.models,function(e){return e.attributes[this.options.defaultSort]}.bind(this)).reverse()),this.draw(),this.updateCount(this.summary.checked_count),"function"==typeof this.options.add&&this.options.add(e),"undefined"!=typeof Berries.modal&&Berries.modal.trigger("cancel")}},this)}.bind(this)),this.draw()}this.version="0.1.0",e=$.extend(!0,{filter:!0,sort:!0,search:!0,download:!0,upload:!0,columns:!0,id:Berry.getUID()},e),e.events=_.map(e.events,function(e){return $.extend(!0,{global:!1},e)});var n=!1;if(window.localStorage&&e.name)try{n=JSON.parse(localStorage.getItem("bt_"+e.name))}catch(a){}e.item_template=e.item_template?Hogan.compile(e.item_template):window.outerWidth>767||0==window.outerWidth?templates.table_row:templates.mobile_row,this.filterValues={},this.draw=function(){_.each(this.summary.items,function(e){this.$el.find(".filter #"+e.id+",[data-sort="+e.id+"]").toggle(e.isEnabled)}.bind(this)),e.search=this.filterValues,_.each(e.search,function(t,i){t||0===t||delete e.search[i]});var t=e.pagebuffer||2;this.$el.find('[name="search"]').length&&this.$el.find('[name="search"]').val().length?this.searchAll(this.$el.find('[name="search"]').val()):this.search(e);var i={};e.pagecount=Math.ceil(this.lastGrabbed/e.count),i.pages=[],e.page>e.pagecount&&(e.page=e.pagecount||1);var s=this.lastGrabbed>e.count*e.page?e.count*e.page:this.lastGrabbed,n=$('<tbody class="list-group">'),a=Hogan.compile(e.item_template.render(l,templates));_.each(this.grab(e),function(e){new viewitem({model:e,container:n,view:a})});var o=(this.$el.find(".list-group").empty().replaceWith(n),e.page-t);1>o&&(o=1);var r=e.page+t;r>e.pagecount&&(r=e.pagecount);for(var d=o;r>=d;d++){var h={name:d};e.page==d&&(h.active="active"),i.pages.push(h)}i.size=this.lastGrabbed,i.last=s,i.first=e.count*(e.page-1)+1,i.multiPage=r>o,i.isFirst=1==e.page,i.isLast=e.page==e.pagecount,i.showLast=e.pagecount==r,i.showFirst=1==o,i.checked_count=_.where(this.models,{checked:!0}).length,i.entries=_.map(e.entries,function(t){return{value:t,selected:t==e.count}},e),this.renderObj=i,this.$el.find(".paginate-footer").html(templates.table_footer.render(this.renderObj,templates)),this.summary.checked_count=_.where(this.models,{checked:!0}).length,this.summary.multi_checked=this.summary.checked_count>1,this.$el.find('[name="events"]').html(templates.events.render(this.summary,templates)),this.fixStyle(),window.localStorage&&e.name&&localStorage.setItem("bt_"+e.name,JSON.stringify(this.state.get()))},this.drawHead=function(){};var o=function(t){t.stopPropagation(),t.preventDefault(),"inc"==$(t.currentTarget).data("page")?(e.page++,e.page>e.pagecount&&(e.page=e.pagecount)):"dec"==$(t.currentTarget).data("page")?(e.page--,e.page<1&&(e.page=1)):e.page=$(t.currentTarget).data("page")||e.pagecount,this.draw()},r=function(t,i){if(1==t)this.$el.find(".reverse, [data-sort]").removeClass("text-primary").find("i").attr("class","fa fa-sort text-muted"),this.$el.find(".sortBy").val("true"),e.reverse=!1;else{e.reverse="undefined"==typeof i?e.sort==t?!e.reverse:!1:i;var s=this.$el.find(".reverse, [data-sort="+_.findWhere(this.options.filterFields,{search:t}).id+"]");"undefined"!=typeof s&&(e.reverse?s.find("i").attr("class","fa fa-sort-asc"):s.find("i").attr("class","fa fa-sort-desc"),s.siblings("[data-sort]").removeClass("text-primary"),s.siblings("[data-sort]").find("i").attr("class","fa fa-sort text-muted"),s.addClass("text-primary"))}e.sort=t},e=$.extend({count:e.count||25,page:1,sort:"createdAt",reverse:!1},e);self=this,e.schema=_.map(e.schema,function(e){return Berry.processOpts(e,{update:function(e){this.item.choices=e.choices,this.item.options=e.choices;var t=this.self.options.schema;_.each(this.self.models,function(e){e.schema=t,e.pat()}),this.self.draw()}.bind({item:e,self:self})})}),"undefined"!=typeof e.filters&&(e.filters=_.map(e.filters,Berry.processOpts)),e.filterFields=_.map($.extend(!0,{},e.filters||e.schema),function(e){switch(e=Berry.normalizeItem(e),name=e.name,e.value="",e.type){case"checkbox":e.choices=[{label:"False",value:"false"},{label:e.truestate||"True",value:e.truestate||"true"}],"undefined"!=typeof e.falsestate&&(e.choices[0].label=e.falsestate,e.choices[0].value=e.falsestate);case"radio":e.type="select";case"select":e.default={},e.default[e.label_key||"label"]="No Filter",e.default[e.value_key||"value"]="","index"==e.value_key&&delete e.value_key;break;case"hidden":break;default:e.type="text"}return e.options&&(e.options=_.map(e.options,function(e){return _.omit(e,"selected")})),e.id=e.id||Berry.getUID(),e.search=e.name,e.name=e.id,e.show={},e.enabled=!0,e.help="",e}),"object"==typeof e.columns&&(e.filterFields=_.filter(e.filterFields,function(t){return _.contains(e.columns,t.name)||_.contains(e.columns,t.id)}));var l={start:"{{",end:"}}",checked_count:0,multi_checked:!1,multiEdit:!!e.multiEdit,items:_.map(e.filterFields,function(t){var i=t.search||t.label.split(" ").join("_").toLowerCase();if(t.template)i=t.template.replace(/{{value}}/gi,"{{attributes."+i+"}}");else switch(t.type){case"date":i='<span data-moment="{{attributes.'+i+'}}" data-format="L"></span>';break;case"select":i=e.inlineEdit?'<span data-popins="'+i+'"></span>':"{{display."+i+"}}";break;case"color":i='<div class="btn btn-default" style="background-color:{{attributes.'+i+'}}">{{attributes.'+i+"}}</div> {{attributes."+i+"}}";break;default:i=e.inlineEdit?'<span data-popins="'+i+'"></span>':"{{attributes."+i+"}}"}return{isEnabled:"undefined"==typeof t.showColumn||t.showColumn,label:t.label,name:i,cname:t.name||t.label.split(" ").join("_").toLowerCase(),id:t.id,visible:!("hidden"==t.type)}})};e.hasActions=!!(e.edit||e.delete||e.events),"undefined"==typeof e.hasEdit&&(e.hasEdit=!!e.edit),"undefined"==typeof e.hasDelete&&(e.hasDelete=!!e.delete),e.entries=e.entries||[25,50,100],l.options=e,l.showAdd=!!e.add||e.showAdd,this.defaults={},_.map(e.filterFields,function(e){switch(e.type){case"text":e.value="";break;case"checkbox":e.value="false";case"radio":e.value="";case"select":e.value=""}this.defaults[e.name]=e.value}.bind(this)),this.summary=l;var d;d=Hogan.compile(e.template?Hogan.compile(e.template).render(l,templates):window.outerWidth>767||0==window.outerWidth?templates.table.render(l,templates):templates.mobile_table.render(l,templates));var h=function(e){this.each(function(e){this.isContainer||this.setValue(Berry.search(e,this.getPath()))},[e],this.fields)};this.validate=function(t){var i=!1,s=this.$el.find(".hiddenForm").berry({fields:e.schema,attributes:t});return s.validate()?i=s.toJSON():(this.errors=s.errors,console.log("Model not valid")),s.destroy(),i},this.add=function(t){var i=new tableModel(this,t).on("check",function(){this.owner.updateCount(_.where(this.owner.models,{checked:!0}).length),this.owner.$el.find('[name="events"]').html(templates.events.render(this.owner.summary,templates))}),s=this.$el.find(".hiddenForm").berry({fields:e.schema,model:i});return s.validate()?(this.models.push(i),this.draw(),this.updateCount(this.summary.checked_count),"function"==typeof this.options.add&&this.options.add(i)):console.log("Model not valid"),s.destroy(),i},this.search=function(e){var t=_.sortBy(this.models,function(t){return t.attributes[e.sort]});e.reverse||(t=t.reverse()),filterMap=this.filterMap,t=_.filter(t,function(t){var i=$.isEmptyObject(e.search);for(var s in e.search){var n;if(n=_.where(e.filterFields,{id:s})[0]&&"undefined"==typeof _.where(e.filterFields,{id:s})[0].options?$.score((t.display[this.filterMap[s]]+"").replace(/\s+/g," ").toLowerCase(),(e.search[s]+"").toLowerCase())>.4:t.display[this.filterMap[s]]+""==e.search[s]+""||t.attributes[this.filterMap[s]]+""==e.search[s]+"",i=n,!i)break}return i}),this.lastGrabbed=t.length,this.filtered=t},this.find=function(e){var t=_.keys(e);return _.filter(this.models,function(i){return _.isEqual(e,_.pick(i.attributes,t))})},this.searchAll=function(t){e.sort=null,this.$el.find("[data-sort]").removeClass("text-primary"),this.$el.find("[data-sort]").find("i").attr("class","fa fa-sort text-muted"),this.filter&&h.call(this.filter,this.defaults),t=t.toLowerCase(),_.map(this.models,function(i){i.score=0;for(var s in e.filterFields)i.score+=$.score((i.display[e.filterFields[s].search]+"").replace(/\s+/g," ").toLowerCase(),t)}),this.filtered=_.filter(_.sortBy(this.models,"score"),function(e){return e.score>0}).reverse(),this.lastGrabbed=this.filtered.length},this.fixStyle=function(){if(this.options.autoSize)try{var e=this.$el.find(".table-container > div"),t=this.$el.find(".table-container > table tr th:visible"),i=this.$el.find(".list-group-row th");this.$el.find(".table-container table").removeClass("table-fixed"),e.css("width","auto"),e.css("minWidth","auto"),t.css("width","auto"),t.css("minWidth","85px"),this.$el.find(".table-container > table tr th.select-column").css("minWidth","60px"),this.$el.find(".table-container > table tr th.select-column").css("width","60px"),i.css("width","auto"),i.css("minWidth","auto"),e.css("height",$(window).height()-e.offset().top-(88+this.options.autoSize)+"px"),_.each(i,function(e,i){"undefined"!=typeof t[i]?(e.style.display="table-cell",t[i].offsetWidth>e.offsetWidth?($(e).css("width",t[i].offsetWidth+"px"),$(e).css("minWidth",t[i].offsetWidth+"px"),$(t[i]).css("width",t[i].offsetWidth+"px"),$(t[i]).css("minWidth",t[i].offsetWidth+"px")):($(t[i]).css("width",t[i].offsetWidth+"px"),$(t[i]).css("minWidth",t[i].offsetWidth+"px"),$(e).css("width",t[i].offsetWidth+"px"),$(e).css("minWidth",t[i].offsetWidth+"px"))):e.style.display="none"}.bind(this)),this.$el.find(".table-container table").addClass("table-fixed");var s=this.$el.find(".table-container > div table")[0].offsetWidth;this.$el.find(".table-container > table")[0].offsetWidth>s&&(s=this.$el.find(".table-container > table")[0].offsetWidth),e.css("width",s+"px"),e.css("minWidth",s+"px"),s>this.$el.find(".table-container")[0].offsetWidth?this.$el.find(".table-container").css("overflow","auto"):this.$el.find(".table-container").css("overflow","hidden")}catch(n){}},this.grab=function(e){return this.filtered.slice(e.count*(e.page-1),e.count*(e.page-1)+e.count)},this.editCommon=function(){if("undefined"!=typeof this.options.multiEdit&&0!=this.options.multiEdit.length){var e=_.where(this.models,{checked:!0});if(0!=e.length){var t=_.map(e,function(e){return e.attributes}),i=_.filter(this.options.multiEdit,function(e){return 1==_.unique(_.pluck(t,e)).length});if(0==i.length)$(templates.modal.render({title:"Common Field Editor ",footer:'<div class="btn btn-danger" data-dismiss="modal">Done</div>',body:'<div class="alert alert-warning">No eligible fields have been found for editing.</div>'})).modal();else{var s=_.filter(this.options.schema,function(e){return i.indexOf(e.name)>=0});$().berry({legend:"("+e.length+") Common Field Editor",fields:s,attributes:$.extend(!0,{},_.pick(e[0].attributes,i))}).on("save",function(){var t=this.toJSON();_.map(e,function(e){e.set($.extend(!0,{},e.attributes,t))}),this.trigger("close")}).on("close",function(){this.draw(),"function"==typeof this.options.editComplete&&this.options.editComplete(_.where(this.models,{checked:!0}),this)},this)}}}},this.destroy=function(){this.$el.find(".list-group").empty(),this.$el.off(),this.$el.empty()},this.state={get:function(){var t={count:this.options.count,page:this.options.page};return this.$el.find('[name="search"]').length&&this.$el.find('[name="search"]').val().length?t.search=this.$el.find('[name="search"]').val():(t.sort=e.sort,t.reverse=e.reverse,"undefined"!=typeof this.filter&&(t.filters={},_.each(this.options.filterFields,function(e){t.filters[e.search]=this[e.id]}.bind(this.filter.toJSON())))),t.columns=_.map(_.pluck(_.filter(this.summary.items,function(e){return e.isEnabled}),"id"),function(e){return _.findWhere(this.options.filterFields,{id:e}).search}.bind(this)),t}.bind(this),set:function(t){"undefined"!=typeof t.columns&&t.columns.length&&(this.summary.items=_.map(this.summary.items,function(e){return e.isEnabled=_.contains(t.columns,this.filterMap[e.cname]),e}),this.$el.find('.columnEnables [type="checkbox"]').each(function(){this.checked=!1}),e.columns&&_.each(t.columns,function(e){var t=this.$el.find('.columnEnables [data-field="'+_.findWhere(this.options.filterFields,{search:e}).id+'"] [type="checkbox"]');t.length&&(t[0].checked=!0)}.bind(this))),"undefined"!=typeof t.filters&&(this.filterValues={},_.each(t.filters,function(e,t){this.filterValues[_.findWhere(this.options.filterFields,{search:t}).id]=e}.bind(this))),"undefined"!=typeof t.sort&&r.call(this,t.sort||e.sort,t.reverse),"undefined"!=typeof this.filter&&h.call(this.filter,this.filterValues),"undefined"!=typeof t.search&&""!==t.search&&this.$el.find('[name="search"]').val(t.search),this.options.page=t.page||this.options.page,this.options.count=t.count||this.options.count,this.draw()}.bind(this)},this.models=[],this.options=e,this.filterMap={},_.map(e.filterFields,function(e){this.filterMap[e.id]=e.search}.bind(this));$(e.container).html(t.call(this)),s.call(this,$(e.container)),this.getCSV=function(e){var t=this.filterMap;csvify(_.map(this.filtered,function(e){return e.attributes}),_.map(_.filter(this.summary.items,function(e){return e.isEnabled}),function(e){return{label:e.label,name:t[e.cname]}}),e||this.options.title)},this.$el.find('[name="search"]').focus(),this.$el.find(".table-container > div").css("overflow","auto"),$(window).on("resize orientationChange",this.fixStyle.bind(this)),n&&this.state.set(n)}function CSVToArray(e,n){n=n||",";for(var t=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),r=[[]],l=null;l=t.exec(e);){var i=l[1];i.length&&i!==n&&r.push([]);var a;a=l[2]?l[2].replace(new RegExp('""',"g"),'"'):l[3],r[r.length-1].push(a)}return r}!function(e){e.score=function(n,t,r){if(r=r||0,0===t.length)return.9;if(t.length>n.length)return 0;for(var l=t.length;l>0;l--){var i=t.substring(0,l),a=n.indexOf(i);if(!(0>a||a+t.length>n.length+r)){var u=n.substring(a+i.length),s=null;s=l>=t.length?"":t.substring(l);var c=e.score(u,s,r+a);if(c>0){var o=n.length-u.length;if(0!==a){var h=n.charCodeAt(a-1);if(32==h||9==h)for(var g=a-2;g>=0;g--)h=n.charCodeAt(g),o-=32==h||9==h?1:.15;else o-=a}return o+=c*u.length,o/=n.length}}}return 0}}(jQuery),csvify=function(e,n,t){var r='"'+_.pluck(n,"label").join('","')+'"\n';this.labels=_.pluck(n,"name");var l=_.zipObject(this.labels,_.map(this.labels,function(){return""}));r+=_.map(e,function(e){return JSON.stringify(_.values(_.extend(l,_.pick(e,this.labels))))},this).join("\n").replace(/(^\[)|(\]$)/gm,"").split('"').join("");var i=document.createElement("a");i.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(r)),i.setAttribute("download",(t||"berryTable")+".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)};function tableModel(t,e){this.owner=t,this.id=Berry.getUID(),this.attributes={},this.display={},this.attribute_history=[],this.schema=t.options.schema;var i=function(){_.each(this.schema,function(t){if("undefined"!=typeof t.options){var e;if("undefined"!=typeof t.value_key)if("index"==t.value_key)e=t.options[this.attributes[t.name]];else{var i={};i[t.value_key]=this.attributes[t.name],e=_.findWhere(t.options,i),$.isNumeric(this.attributes[t.name])&&(i[t.value_key]=parseInt(this.attributes[t.name]),"undefined"==typeof e&&(e=_.findWhere(t.options,i)),"undefined"==typeof e&&(e=_.findWhere(t.options,i)))}else e=_.findWhere(t.options,{value:this.attributes[t.name]}),"undefined"==typeof e&&(e=_.findWhere(t.options,{id:this.attributes[t.name]})),$.isNumeric(this.attributes[t.name])&&("undefined"==typeof e&&(e=_.findWhere(t.options,{value:parseInt(this.attributes[t.name],10)})),"undefined"==typeof e&&(e=_.findWhere(t.options,{id:parseInt(this.attributes[t.name],10)})));this.display[t.name]="object"==typeof e?e[t.label_key]||e.label||e.name:this.attributes[t.name]}else this.display[t.name]=t.template?Hogan.compile(t.template).render(this):this.attributes[t.name]}.bind(this))};this.set=function(t){this.attribute_history.push($.extend(!0,{},this.attributes)),this.attributes=t,i.call(this)},this.pat=function(){i.call(this)},this.checked=!1,this.toggle=function(){this.checked="bool"==typeof state?state:!this.checked,this.trigger("check")},$.extend(!0,this.attributes,e),i.call(this),this.toJSON=function(){return this.attributes},this.undo=function(){this.attribute_history.length&&(this.attributes=this.attribute_history.pop(),i.call(this),this.owner.draw())},this.delete=function(){this.owner.models.splice(_.indexOf(_.pluck(this.owner.models,"id"),this.id),1)},this.events={initialize:[]},this.addSub=Berry.prototype.addSub,this.on=Berry.prototype.on,this.off=Berry.prototype.off,this.trigger=Berry.prototype.trigger}function viewitem(t){this.update=function(){"undefined"!=typeof this.berry&&this.berry.destroy(),this.$el.find("[data-event]").off(),this.$el.off(),"undefined"!=typeof this.model.owner.options.preDraw&&this.model.owner.options.preDraw(this.model),this.$el.replaceWith(this.setElement(t.view.render(this.model,templates)).$el),this.$el.find("[data-popins]").length>0&&(this.berry=this.$el.berry({popins:{container:"#first",viewport:{selector:"body",padding:20}},renderer:"popins",model:this.model})),"function"==typeof this.model.owner.options.click&&this.$el.on("click",function(t){"undefined"==typeof t.target.dataset.event&&this.model.owner.options.click(this.model,this)}.bind(this)),this.$el.find("[data-event].custom-event").on("click",$.proxy(function(t){t.stopPropagation(),$(t.target).closest(".dropdown-menu").toggle();var e=_.findWhere(this.model.owner.options.events,{name:t.target.dataset.event});"undefined"!=typeof e&&"function"==typeof e.callback&&e.callback(this.model)},this)),this.$el.find(".btn-group > .dropdown-toggle").on("click",function(t){t.stopPropagation(),$(this).next(".dropdown-menu").toggle()}),this.$el.find('[data-event="edit"]').on("click",$.proxy(function(t){t.stopPropagation(),$(t.target).closest(".dropdown-menu").toggle(),this.edit()},this)),this.edit=function(){$().berry($.extend(!0,{},{name:"modal",legend:'<i class="fa fa-pencil-square-o"></i> Edit',model:this.model},this.model.owner.options.berry||{})).on("saved",function(){"function"==typeof this.model.owner.options.edit&&this.model.owner.options.edit(this.model),this.update()},this)},this.$el.find('[data-event="mark"]').on("click",$.proxy(function(t){t.stopPropagation(),this.model.toggle(t.currentTarget.checked)},this)),this.$el.find("[data-moment]").each(function(){$(this).html(moment.utc($(this).data("moment")).format($(this).data("format")))}),this.$el.find(".sparkline").each(function(){$(this).peity($(this).data("type"),{radius:$(this).data("radius")})})},this.setElement=function(t){return this.$el=$(t),this},this.model=t.model,this.model.on("check",this.update.bind(this)),this.$el=$("<tr>"),t.container&&t.container.append(this.$el),this.model.on("change",this.update,this),this.model.on("destroy",$.proxy(function(){this.$el.fadeOut("fast",$.proxy(function(){this.remove()},this))},this)),this.update()}if(!templates)var templates={};templates.events=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b("<div>"),a.b("\n"+e),a.b('	<span class="hidden-xs">'),a.b("\n"+e),a.s(a.d("options.hasDelete",t,n,1),t,n,0,55,245,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<a href="javascript:void(0);" data-event="delete_all" class="btn btn-danger '),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.b('" style="margin-right:15px"><i class="fa fa-times"></i> Delete</a>'),a.b("\n"+e)}),t.pop()),a.b('	<div class="btn-group"role="group" aria-label="...">'),a.b("\n"),a.b("\n"+e),a.b("	    "),a.s(a.d("options.hasEdit",t,n,1),t,n,0,348,607,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<a href="javascript:void(0);" data-event="edit_all" class="btn btn-primary '),e.s(e.f("checked_count",t,n,1),t,n,1,0,0,"")||e.b("disabled"),e.s(e.f("multiEdit",t,n,1),t,n,1,0,0,"")||e.s(e.f("multi_checked",t,n,1),t,n,0,499,507,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),e.b('" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-pencil"></i> Edit</a>')}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.events",t,n,1),t,n,0,653,942,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("	    	"),a.s(a.f("global",t,n,1),t,n,1,0,0,"")||(a.b('<a href="javascript:void(0);" data-event="'),a.b(a.v(a.f("name",t,n,0))),a.b('" class="custom-event-all btn btn-default '),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.s(a.f("multiEdit",t,n,1),t,n,1,0,0,"")||a.s(a.f("multi_checked",t,n,1),t,n,0,839,847,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),a.b('" data-id="'),a.b(a.v(a.f("start",t,n,0))),a.b("id"),a.b(a.v(a.f("end",t,n,0))),a.b('">'),a.b(a.t(a.f("label",t,n,0))),a.b("</a>")),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b("	</span>"),a.b("\n"+e),a.b('	<div class="btn-group visible-xs">'),a.b("\n"+e),a.b('		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'),a.b("\n"+e),a.b('			<i class="fa fa-cogs"></i> <span class="caret"></span>'),a.b("\n"+e),a.b("		</button>"),a.b("\n"+e),a.b('		<ul class="dropdown-menu">'),a.b("\n"+e),a.b("				"),a.s(a.d("options.hasEdit",t,n,1),t,n,0,1270,1525,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<li  class=" '),e.s(e.f("checked_count",t,n,1),t,n,1,0,0,"")||e.b("disabled"),e.s(e.f("multiEdit",t,n,1),t,n,1,0,0,"")||e.s(e.f("multi_checked",t,n,1),t,n,0,1359,1367,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),e.b('"><a href="javascript:void(0);" data-event="edit_all" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-pencil"></i> Edit</a></li> ')}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.events",t,n,1),t,n,0,1570,1858,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("					"),a.s(a.f("global",t,n,1),t,n,1,0,0,"")||(a.b('<li class="'),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.s(a.f("multiEdit",t,n,1),t,n,1,0,0,"")||a.s(a.f("multi_checked",t,n,1),t,n,0,1674,1682,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("disabled")}),t.pop()),a.b('"><a href="javascript:void(0);" data-event="'),a.b(a.v(a.f("name",t,n,0))),a.b('" class="custom-event-all" data-id="'),a.b(a.v(a.f("start",t,n,0))),a.b("id"),a.b(a.v(a.f("end",t,n,0))),a.b('">'),a.b(a.t(a.f("label",t,n,0))),a.b("</a></li>")),a.b("\n"+e)}),t.pop()),a.s(a.d("options.hasDelete",t,n,1),t,n,0,1904,2144,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('					<li role="separator" class="divider"></li>'),a.b("\n"+e),a.b('					<li class=" '),a.s(a.f("checked_count",t,n,1),t,n,1,0,0,"")||a.b("disabled"),a.b('"><a href="javascript:void(0);" data-event="delete_all" style="margin-right:15px"><i class="fa fa-times"></i> Delete</a></li>'),a.b("\n"+e)}),t.pop()),a.b("		</ul>"),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b("	"),a.s(a.f("checked_count",t,n,1),t,n,0,2202,2315,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<h5 class="range label label-info checked_count" style="margin:7px 15px;">'),e.b(e.v(e.f("checked_count",t,n,0))),e.b(" item(s) selected</h5>")}),t.pop()),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{},subs:{}}),templates.mobile_head=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<div style="clear:both;">'),a.b("\n"),a.b("\n"+e),a.s(a.d("options.sort",t,n,1),t,n,0,46,1261,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("\n"+e),a.b('  <div class="row" style="margin-bottom:10px">'),a.b("\n"),a.b("\n"+e),a.b('    <div class="col-xs-6">'),a.b("\n"+e),a.s(a.d("options.filter",t,n,1),t,n,0,146,494,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("\n"+e),a.b('      <div name="reset-search" style="position:relative" class="btn btn-default" data-toggle="tooltip" data-placement="left" title="Clear Filters">'),a.b("\n"+e),a.b('        <i class="fa fa-filter"></i>'),a.b("\n"+e),a.b('        <i class="fa fa-times text-danger" style="position: absolute;right: 5px;"></i>'),a.b("\n"+e),a.b("      </div>    "),a.b("\n"),a.b("\n"+e),a.b('    <div class="btn btn-info filterForm">Filter</div>'),a.b("\n"+e)}),t.pop()),a.b("    </div>"),a.b("\n"+e),a.b('    <div class="col-xs-6">'),a.b("\n"+e),a.b("    		"),a.s(a.d("options.search",t,n,1),t,n,0,577,661,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<input type="text" name="search" class="form-control" style="" placeholder="Search">')}),t.pop()),a.b("\n"+e),a.b("        </div>"),a.b("\n"+e),a.b("    </div>"),a.b("\n"+e),a.b('    <div class="input-group">'),a.b("\n"+e),a.b('      <span class="" style="display: table-cell;width: 1%;white-space: nowrap;vertical-align: middle;padding-right:5px">'),a.b("\n"+e),a.b('        <button class="btn btn-default reverse" type="button" tabindex="-1"><i class="fa fa-sort text-muted"></i></button>'),a.b("\n"+e),a.b("      </span>"),a.b("\n"+e),a.b('        <select class="form-control sortBy">'),a.b("\n"+e),a.b("          <option value=true>None</option>"),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,1103,1220,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,1128,1197,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('              <option value="'),a.b(a.v(a.f("id",t,n,0))),a.b('">'),a.b(a.v(a.f("label",t,n,0))),a.b("</option>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("        <select>"),a.b("\n"+e),a.b("    </div>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{},subs:{}}),templates.mobile_row=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<tr><td colspan="100%" class="filterable">		'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,70,497,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<div data-event="mark" style="text-align:left;padding:0;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">'),a.b("\n"+e),a.b('	<span class="text-muted fa '),a.b(a.v(a.f("start",t,n,0))),a.b("#checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-check-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b(" "),a.b(a.v(a.f("start",t,n,0))),a.b("^checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b('" style="margin:6px; cursor:pointer;font-size:24px"></span>'),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e)}),t.pop()),a.b(" <div>"),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,540,740,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b(" 	"),a.s(a.f("visible",t,n,1),t,n,0,555,725,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.s(e.f("isEnabled",t,n,1),t,n,0,569,711,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b('<div class="row" style="min-width:85px"><span class="col-sm-3"><b>'),e.b(e.v(e.f("label",t,n,0))),e.b('</b></span><span class="col-sm-9 col-xs-12">'),e.b(e.t(e.f("name",t,n,0))),e.b("</span></div>")}),t.pop())}),t.pop()),a.b("\n"+e)}),t.pop()),a.b(" 	</div>"),a.b("\n"+e),a.b("</td></tr>"),a.fl()},partials:{},subs:{}}),templates.mobile_table=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<div class="well table-well">'),a.b("\n"+e),a.b('	<div style="height:40px;">'),a.b("\n"+e),a.b('    <div name="events" class=" pull-left" style="margin-bottom:10px;width:62%" ></div>'),a.b("\n"),a.b("\n"+e),a.b('		<input type="file" class="csvFileInput" accept=".csv" style="display:none">'),a.b("\n"),a.b("\n"+e),a.b('		<div class="hiddenForm" style="display:none"></div>'),a.b("\n"+e),a.b('		<div class="btn-group pull-right" style="margin-bottom:10px" role="group" aria-label="...">'),a.b("\n"+e),a.s(a.f("showAdd",t,n,1),t,n,0,388,489,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div data-event="add" class="btn btn-success"><i class="fa fa-pencil-square-o"></i> New</div>'),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.s(a.d("options.events",t,n,1),t,n,0,526,678,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("				"),a.s(a.f("global",t,n,1),t,n,0,542,663,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<div class="btn btn-default custom-event-collection" data-event="'),e.b(e.v(e.f("name",t,n,0))),e.b('" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('">'),e.b(e.t(e.f("label",t,n,0))),e.b("</div>")}),t.pop()),a.b("\n"+e)}),t.pop()),a.s(a.d("options.download",t,n,1),t,n,0,722,885,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-download" data-toggle="tooltip" data-placement="left" title="Download"><i class="fa fa-download"></i></div>'),a.b("\n"+e)}),t.pop()),a.s(a.d("options.upload",t,n,1),t,n,0,929,1086,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-upload" data-toggle="tooltip" data-placement="left" title="Upload"><i class="fa fa-upload"></i></div>'),a.b("\n"+e)}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.columns",t,n,1),t,n,0,1131,1892,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn-group columnEnables" data-toggle="tooltip" data-placement="left" title="Display Columns">'),a.b("\n"+e),a.b('			  <button class="btn btn-default dropdown-toggle" type="button" id="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">'),a.b("\n"+e),a.b('			    <i class="fa fa-list"></i>'),a.b("\n"+e),a.b('			    <span class="caret"></span>'),a.b("\n"+e),a.b("			  </button>"),a.b("\n"+e),a.b('			  <ul class="dropdown-menu pull-right" style="padding-top:10px" aria-labelledby="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('">'),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,1611,1857,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,1630,1837,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			    <li><label data-field="'),a.b(a.v(a.f("id",t,n,0))),a.b('" style="width:100%;font-weight:normal"><input type="checkbox" '),a.s(a.f("isEnabled",t,n,1),t,n,0,1744,1761,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('checked="checked"')}),t.pop()),a.b(' style="margin: 5px 0 5px 15px;"> '),a.b(a.v(a.f("label",t,n,0))),a.b("</label></li>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("			  </ul>"),a.b("\n"+e),a.b("			</div>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("		</div>"),a.b("\n"),a.b("\n"),a.b("\n"+e),a.b("	</div>	"),a.b("\n"+e),a.b(a.rp("<mobile_head0",t,n,"			")),a.b("\n"),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,1979,2086,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('  <div style="padding: 16px 0 0 15px;"><i data-event="select_all" class="fa fa-2x fa-square-o"></i></div>'),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b('	<div class="table-container" style="width:100%;overflow:auto">'),a.b("\n"),a.b("\n"+e),a.b('	<div style="min-height:100px">'),a.b("\n"+e),a.b('		<table class="table '),a.s(a.d("options.noborder",t,n,1),t,n,1,0,0,"")||a.b("table-bordered"),a.b(' table-striped table-hover dataTable" style="margin-bottom:0px">'),a.b("\n"+e),a.b('			<tbody class="list-group">'),a.b("\n"+e),a.b("				<tr><td>"),a.b("\n"+e),a.b('					<div class="alert alert-info" role="alert">You have no items.</div>'),a.b("\n"+e),a.b("				</td></tr>"),a.b("\n"+e),a.b("			</tbody>"),a.b("\n"),a.b("\n"+e),a.b("		</table>"),a.b("\n"+e),a.b("	</div>"),a.b("\n"),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b('	<div class="paginate-footer" style="overflow:hidden;margin-top:10px"></div>'),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{"<mobile_head0":{name:"mobile_head",partials:{},subs:{}}},subs:{}}),templates.table=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<div class="well table-well">'),a.b("\n"+e),a.b('	<div style="height:40px">'),a.b("\n"+e),a.b('		<div name="events" class=" pull-left" style="margin-bottom:10px;width:62%" ></div>'),a.b("\n"),a.b("\n"+e),a.b('		<input type="file" class="csvFileInput" accept=".csv" style="display:none">'),a.b("\n"),a.b("\n"+e),a.b('		<div class="hiddenForm" style="display:none"></div>'),a.b("\n"+e),a.b('		<div class="btn-group pull-right" style="margin-bottom:10px;margin-left:10px" role="group" aria-label="...">'),a.b("\n"+e),a.s(a.f("showAdd",t,n,1),t,n,0,402,503,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div data-event="add" class="btn btn-success"><i class="fa fa-pencil-square-o"></i> New</div>'),a.b("\n"+e)}),t.pop()),a.s(a.d("options.events",t,n,1),t,n,0,540,703,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("				"),a.s(a.f("global",t,n,1),t,n,0,556,688,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<div class="btn btn-default custom-event-collection '),e.b(e.v(e.f("global",t,n,0))),e.b('" data-event="'),e.b(e.v(e.f("name",t,n,0))),e.b('" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('">'),e.b(e.t(e.f("label",t,n,0))),e.b("</div>")}),t.pop()),a.b("\n"+e)}),t.pop()),a.s(a.d("options.download",t,n,1),t,n,0,747,910,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-download" data-toggle="tooltip" data-placement="left" title="Download"><i class="fa fa-download"></i></div>'),a.b("\n"+e)}),t.pop()),a.s(a.d("options.upload",t,n,1),t,n,0,954,1111,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn btn-default hidden-xs" name="bt-upload" data-toggle="tooltip" data-placement="left" title="Upload"><i class="fa fa-upload"></i></div>'),a.b("\n"+e)}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.d("options.columns",t,n,1),t,n,0,1156,1903,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<div class="btn-group columnEnables" data-toggle="tooltip" data-placement="left" title="Display Columns">'),a.b("\n"+e),a.b('			  <button class="btn btn-default dropdown-toggle" type="button" id="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">'),a.b("\n"+e),a.b('			    <i class="fa fa-list"></i>'),a.b("\n"+e),a.b('			    <span class="caret"></span>'),a.b("\n"+e),a.b("			  </button>"),a.b("\n"+e),a.b('			  <ul class="dropdown-menu pull-right" style="padding-top:10px;padding-left:10px" aria-labelledby="enables_'),a.b(a.v(a.d("options.id",t,n,0))),a.b('">'),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,1654,1868,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,1673,1848,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			    <li><label data-field="'),a.b(a.v(a.f("id",t,n,0))),a.b('" style="width:100%;font-weight:normal"><input type="checkbox" '),a.s(a.f("isEnabled",t,n,1),t,n,0,1787,1804,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('checked="checked"')}),t.pop()),a.b("> "),a.b(a.v(a.f("label",t,n,0))),a.b("</label></li>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("			  </ul>"),a.b("\n"+e),a.b("			</div>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("		</div>"),a.b("\n"),a.b("\n"+e),a.b("		"),a.s(a.d("options.search",t,n,1),t,n,0,1956,2086,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<input type="text" name="search" class="form-control pull-right" style="max-width:300px; margin-bottom:10px" placeholder="Search">')}),t.pop()),a.b("\n"),a.b("\n"+e),a.b("	</div>	"),a.b("\n"),a.b("\n"+e),a.s(a.d("options.autoSize",t,n,1),t,n,1,0,0,"")||(a.b('	<div class="paginate-footer hidden-xs" style="overflow:hidden;margin-top:10px;clear:both"></div>'),a.b("\n"+e)),a.b("\n"+e),a.b('	<div class="table-container" style="width:100%;overflow:auto">'),a.b("\n"+e),a.s(a.d("options.autoSize",t,n,1),t,n,0,2348,2515,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<table class="table '),a.s(a.d("options.noborder",t,n,1),t,n,1,0,0,"")||a.b("table-bordered"),a.b('" style="margin-bottom:0px">'),a.b("\n"+e),a.b('	<thead class="head">'),a.b("\n"+e),a.b(a.rp("<table_head0",t,n,"	")),a.b("	</thead>"),a.b("\n"+e),a.b("	</table>"),a.b("\n"+e)}),t.pop()),a.b("\n"),a.b("\n"+e),a.b('	<div style="min-height:100px">'),a.b("\n"+e),a.b('		<table class="table '),a.s(a.d("options.noborder",t,n,1),t,n,1,0,0,"")||a.b("table-bordered"),a.b(' table-striped table-hover dataTable" style="margin-bottom:0px;'),a.s(a.d("options.autoSize",t,n,1),t,n,0,2733,2751,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("margin-top: -19px;")}),t.pop()),a.b('">'),a.b("\n"+e),a.s(a.d("options.autoSize",t,n,1),t,n,1,0,0,"")||(a.b('			<thead class="head">'),a.b("\n"+e),a.b(a.rp("<table_head1",t,n,"			")),a.b("			</thead>"),a.b("\n"+e)),a.s(a.d("options.autoSize",t,n,1),t,n,0,2901,3181,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("			<thead>"),a.b("\n"+e),a.b('						<tr  class="list-group-row">'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,2981,3041,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <th style="width:60px" class="select-column"></th>'),a.b("\n"+e)}),t.pop()),a.s(a.f("items",t,n,1),t,n,0,3082,3151,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,3099,3134,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<th  style="min-width:85px">'),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("		</tr>"),a.b("\n"+e),a.b("		</thead>"),a.b("\n"+e)}),t.pop()),a.b('			<tbody class="list-group">'),a.b("\n"+e),a.b("				<tr><td>"),a.b("\n"+e),a.b('					<div class="alert alert-info" role="alert">You have no items.</div>'),a.b("\n"+e),a.b("				</td></tr>"),a.b("\n"+e),a.b("			</tbody>"),a.b("\n"),a.b("\n"+e),a.b("		</table>"),a.b("\n"+e),a.b("	</div>"),a.b("\n"),a.b("\n"+e),a.b("	</div>"),a.b("\n"+e),a.b('	<div class="paginate-footer" style="overflow:hidden;margin-top:10px"></div>'),a.b("\n"+e),a.b("</div>"),a.fl()},partials:{"<table_head0":{name:"table_head",partials:{},subs:{}},"<table_head1":{name:"table_head",partials:{},subs:{}}},subs:{}}),templates.table_footer=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b("<div>"),a.b("\n"+e),a.s(a.f("multiPage",t,n,1),t,n,0,21,930,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('	<nav class="pull-right" style="margin-left: 10px;">'),a.b("\n"+e),a.s(a.f("size",t,n,1),t,n,0,85,910,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('		<ul class="pagination" style="margin:0">'),a.b("\n"+e),a.s(a.f("isFirst",t,n,1),t,n,1,0,0,"")||(a.b("			"),a.s(a.f("showFirst",t,n,1),t,n,1,0,0,"")||a.b('<li class="pagination-first"><a data-page="1" href="javascript:void(0);" aria-label="First"><span aria-hidden="true">&laquo;</span></a></li>'),a.b("\n"+e),a.b('			<li><a data-page="dec" href="javascript:void(0);" aria-label="Previous"><span aria-hidden="true">&lsaquo;</span></a></li>'),a.b("\n"+e)),a.s(a.f("pages",t,n,1),t,n,0,471,571,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('				<li class="'),a.b(a.v(a.f("active",t,n,0))),a.b('"><a data-page="'),a.b(a.v(a.f("name",t,n,0))),a.b('" href="javascript:void(0);">'),a.b(a.v(a.f("name",t,n,0))),a.b("</a></li>"),a.b("\n"+e)}),t.pop()),a.s(a.f("isLast",t,n,1),t,n,1,0,0,"")||(a.b('			<li><a data-page="inc" href="javascript:void(0);" aria-label="Next"><span aria-hidden="true">&rsaquo;</span></a></li>'),a.b("\n"+e),a.b("			"),a.s(a.f("showLast",t,n,1),t,n,1,0,0,"")||a.b('<li class="pagination-last"><a data-page="" href="javascript:void(0);" aria-label="Last"><span aria-hidden="true">&raquo;</span></a></li>'),a.b("\n"+e)),a.b("\n"+e),a.b("		</ul>"),a.b("\n"+e)}),t.pop()),a.b("	</nav>"),a.b("\n"),a.b("\n"+e)}),t.pop()),a.b('	<h5 class="range badge '),a.s(a.f("size",t,n,1),t,n,1,0,0,"")||a.b("alert-danger"),a.b(' pull-left" style="margin-right:15px;">'),a.s(a.f("size",t,n,1),t,n,0,1048,1097,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b("Showing "),e.b(e.v(e.f("first",t,n,0))),e.b(" to "),e.b(e.v(e.f("last",t,n,0))),e.b(" of "),e.b(e.v(e.f("size",t,n,0))),e.b(" results")}),t.pop()),a.s(a.f("size",t,n,1),t,n,1,0,0,"")||a.b("No matching results"),a.b("</h5>"),a.b("\n"+e),a.s(a.d("entries.length",t,n,1),t,n,0,1170,1540,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('		<span class="pull-left">'),a.b("\n"+e),a.b('			<select class="form-control" style="display:inline-block;width:auto;min-width:50px" name="count">'),a.b("\n"+e),a.b('			<option value="10000">All</option>'),a.b("\n"+e),a.s(a.f("entries",t,n,1),t,n,0,1352,1450,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('			<option value="'),a.b(a.v(a.f("value",t,n,0))),a.b('" '),a.s(a.f("selected",t,n,1),t,n,0,1395,1414,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('selected="selected"')}),t.pop()),a.b(">"),a.b(a.v(a.f("value",t,n,0))),a.b("</option>"),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.b("			</select>"),a.b("\n"+e),a.b('			<span class="hidden-xs">results per page</span>'),a.b("\n"+e),a.b("		</span>"),a.b("\n"+e)}),t.pop()),a.b("</div>"),a.fl()},partials:{},subs:{}}),templates.table_head=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<tr style="cursor:pointer" class="noselect table-sort">'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,83,240,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <th style="width: 60px;min-width:60px;padding: 0 0 0 20px;" class="select-column"><i data-event="select_all" class="fa fa-2x fa-square-o"></i></th>'),a.b("\n"+e)}),t.pop()),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,279,499,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,296,482,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <th data-sort="'),a.b(a.v(a.f("cname",t,n,0))),a.b('"><h6 style="margin: 2px;font-size:13px;white-space: nowrap">'),a.s(a.d("options.sort",t,n,1),t,n,0,403,441,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<i class="fa fa-sort text-muted"></i> ')}),t.pop()),a.b(a.v(a.f("label",t,n,0))),a.b("</h6></th>"),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("  </tr>"),a.b("\n"+e),a.s(a.d("options.filter",t,n,1),t,n,0,539,1040,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('  <tr class="filter">'),a.b("\n"+e),a.b("    "),a.s(a.d("options.hasActions",t,n,1),t,n,0,589,868,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("<td>"),a.b("\n"+e),a.b('    <div name="reset-search" style="position:relative" class="btn" data-toggle="tooltip" data-placement="left" title="Clear Filters">'),a.b("\n"+e),a.b('      <i class="fa fa-filter"></i>'),a.b("\n"+e),a.b('      <i class="fa fa-times text-danger" style="position: absolute;right: 5px;"></i>'),a.b("\n"+e),a.b("    </div>"),a.b("\n"+e),a.b("    </td>")}),t.pop()),a.b("\n"),a.b("\n"+e),a.s(a.f("items",t,n,1),t,n,0,907,1019,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.s(a.f("visible",t,n,1),t,n,0,924,1002,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b('    <td data-inline="'),a.b(a.v(a.f("cname",t,n,0))),a.b('" style="min-width:85px" id="'),a.b(a.v(a.f("id",t,n,0))),a.b('"></td>'),a.b("\n"+e)}),t.pop())}),t.pop()),a.b("  </tr>"),a.b("\n"+e)}),t.pop()),a.fl()},partials:{},subs:{}}),templates.table_row=new Hogan.Template({code:function(t,n,e){var a=this;return a.b(e=e||""),a.b('<tr class="filterable">		'),a.b("\n"+e),a.s(a.d("options.hasActions",t,n,1),t,n,0,50,1280,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("\n"+e),a.b('	<td data-event="mark" style="width: 60px;min-width:60px;text-align:left;padding:0;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">'),a.b("\n"+e),a.b('<!-- 		<div class="btn-group">'),a.b("\n"+e),a.b('		  <button type="button" class="btn btn-xs btn-info go">Actions</button>'),a.b("\n"+e),a.b('		  <button type="button" class="btn btn-xs btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'),a.b("\n"+e),a.b('		    <span class="caret"></span>'),a.b("\n"+e),a.b('		    <span class="sr-only">Toggle Dropdown</span>'),a.b("\n"+e),a.b("		  </button>"),a.b("\n"+e),a.b('		  <ul class="dropdown-menu dropdown-menu-right">'),a.b("\n"+e),a.b("		    "),a.s(a.d("options.hasEdit",t,n,1),t,n,0,698,821,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<li><a href="javascript:void(0);" data-event="edit" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-pencil"></i> Edit</a></li>')}),t.pop()),a.b("\n"+e),a.b("		    "),a.s(a.d("options.hasDelete",t,n,1),t,n,0,870,996,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.b('<li><a href="javascript:void(0);" data-event="delete" data-id="'),e.b(e.v(e.f("start",t,n,0))),e.b("id"),e.b(e.v(e.f("end",t,n,0))),e.b('"><i class="fa fa-times"></i> Delete</a></li>')}),t.pop()),a.b("\n"+e),a.b("		  </ul>"),a.b("\n"+e),a.b("		</div> -->"),a.b("\n"+e),a.b('		<span class="text-muted fa '),a.b(a.v(a.f("start",t,n,0))),a.b("#checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-check-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b(" "),a.b(a.v(a.f("start",t,n,0))),a.b("^checked"),a.b(a.v(a.f("end",t,n,0))),a.b("fa-square-o"),a.b(a.v(a.f("start",t,n,0))),a.b("/checked"),a.b(a.v(a.f("end",t,n,0))),a.b('" style="margin:6px 0 6px 20px; cursor:pointer;font-size:24px"></span>'),a.b("\n"+e),a.b("   	</td>"),a.b("\n"),a.b("\n"+e)}),t.pop()),a.s(a.f("items",t,n,1),t,n,0,1315,1413,"{{ }}")&&(a.rs(t,n,function(t,n,a){a.b("	"),a.s(a.f("visible",t,n,1),t,n,0,1329,1399,"{{ }}")&&(a.rs(t,n,function(t,n,e){e.s(e.f("isEnabled",t,n,1),t,n,0,1343,1385,"{{ }}")&&(e.rs(t,n,function(t,n,e){e.b('<td style="min-width:85px">'),e.b(e.t(e.f("name",t,n,0))),e.b("</td>")}),t.pop())}),t.pop()),a.b("\n"+e)}),t.pop()),a.b("</tr>"),a.fl()},partials:{},subs:{}});if(!!!templates)var templates={};templates.cobler_conditional=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div>");t.b("\n"+i);t.b("<div class=\"col-md-6\" style=\"padding-right: 5px;\">");t.b("\n"+i);t.b("	<div class=\"well arrow_box arrow_box_bottom\">");t.b("\n"+i);t.b("		<h4>If <span style=\"font-size:55%;color:#888\">Lead Search meets the following criteria</span></h4>");t.b("\n"+i);if(t.s(t.f("conditions",c,p,1),c,p,0,222,294,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("		 <div class=\"condition-item\"><b>");t.b(t.v(t.f("condition",c,p,0)));t.b(":</b> ");t.b(t.v(t.f("value",c,p,0)));t.b("</div>");t.b("\n"+i)});c.pop()}t.b("	</div>");t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<div class=\"col-md-6\">");t.b("\n"+i);t.b("	<div class=\"well arrow_box arrow_box_left\">");t.b("\n"+i);t.b("		<h4>Then</h4>");t.b("\n"+i);if(t.s(t.f("actions",c,p,1),c,p,0,423,494,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("		 <div class=\"condition-item\"><b>");t.b(t.v(t.f("action",c,p,0)));t.b(":</b> ");t.b(t.v(t.f("subject",c,p,0)));t.b("</div>");t.b("\n"+i)});c.pop()}t.b("	</div>");t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<style>");t.b("\n"+i);t.b(".condition-item{");t.b("\n"+i);t.b("	line-height: 25px;");t.b("\n"+i);t.b("	border-top:dashed 1px #eee;");t.b("\n"+i);t.b("}");t.b("\n"+i);t.b(".arrow_box {");t.b("\n"+i);t.b("	position: relative;");t.b("\n"+i);t.b("	background: #fff;");t.b("\n"+i);t.b("	border: 4px solid #ccc;");t.b("\n"+i);t.b("	color:#666;");t.b("\n"+i);t.b("}");t.b("\n");t.b("\n"+i);t.b(".arrow_box h4{");t.b("\n"+i);t.b("color: #999;");t.b("\n"+i);t.b("font-size: 20px;");t.b("\n"+i);t.b("line-height: 20px;");t.b("\n"+i);t.b("font-weight: bold;");t.b("\n");t.b("\n"+i);t.b("}");t.b("\n"+i);t.b(".arrow_box:after, .arrow_box:before {");t.b("\n"+i);t.b("	border: solid transparent;");t.b("\n"+i);t.b("	content: \" \";");t.b("\n"+i);t.b("	height: 0;");t.b("\n"+i);t.b("	width: 0;");t.b("\n"+i);t.b("	position: absolute;");t.b("\n"+i);t.b("	pointer-events: none;");t.b("\n"+i);t.b("}");t.b("\n");t.b("\n");t.b("\n"+i);t.b(".arrow_box_bottom:after, .arrow_box_bottom:before {");t.b("\n"+i);t.b("	top: 100%;");t.b("\n"+i);t.b("	left: 50%;");t.b("\n"+i);t.b("}");t.b("\n");t.b("\n"+i);t.b(".arrow_box_bottom:after {");t.b("\n"+i);t.b("	border-color: rgba(136, 183, 213, 0);");t.b("\n"+i);t.b("	border-top-color: #fff;");t.b("\n"+i);t.b("	border-width: 18px;");t.b("\n"+i);t.b("	margin-left: -18px;");t.b("\n"+i);t.b("}");t.b("\n"+i);t.b(".arrow_box_bottom:before {");t.b("\n"+i);t.b("	border-color: rgba(194, 225, 245, 0);");t.b("\n"+i);t.b("	border-top-color: #ccc;");t.b("\n"+i);t.b("	border-width: 24px;");t.b("\n"+i);t.b("	margin-left: -24px;");t.b("\n"+i);t.b("}");t.b("\n");t.b("\n"+i);t.b(".arrow_box_left:after, .arrow_box_left:before {");t.b("\n"+i);t.b("	left: -28px;");t.b("\n"+i);t.b("	top: 55px;");t.b("\n"+i);t.b("}");t.b("\n");t.b("\n"+i);t.b(".arrow_box_left:after {");t.b("\n"+i);t.b("	border-color: rgba(136, 183, 213, 0);");t.b("\n"+i);t.b("	border-left-color: #fff;");t.b("\n"+i);t.b("	border-width: 18px;");t.b("\n"+i);t.b("	margin-top: -18px;");t.b("\n"+i);t.b("}");t.b("\n"+i);t.b(".arrow_box_left:before {");t.b("\n"+i);t.b("	border-color: rgba(194, 225, 245, 0);");t.b("\n"+i);t.b("	border-left-color: #aec;");t.b("\n"+i);t.b("	border-width: 24px;");t.b("\n"+i);t.b("	margin-top: -24px;");t.b("\n"+i);t.b("}");t.b("\n");t.b("\n"+i);t.b("</style>");t.b("\n");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{},subs:{}});templates.cobler_controls=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<!--a class=\"btn btn-danger\" id=\"removeactive\" href=\"javascript:void(0)\" style=\"display:inline-block;float:right;margin-bottom:5px;margin-top:-10px\" <i class=\"fa fa-times\"></i> Remove</a-->");t.b("\n"+i);t.b("<a class=\"btn btn-primary tooltips\" id=\"showwidgets\" href=\"javascript:void(0)\" style=\"margin-bottom:5px;margin-top:-10px;display:none\" data-original-title=\"Add Field\"><i class=\"fa fa-th\"></i></a>");t.b("\n"+i);t.b("<ul id=\"cb-source\" class=\"ui-sortable list-group\" style=\"display: block;\">");t.b("\n"+i);t.b("</ul>");t.b("\n"+i);t.b("<header class=\"panel-heading bg-white\" style=\"overflow:hidden;display:none\">");t.b("\n"+i);t.b("</header>");t.b("\n"+i);t.b("<div class=\"panel-body\" style=\"padding:0\">");t.b("\n"+i);t.b("	<div id=\"cb-form\" style=\"overflow-y: scroll;overflow-x: hidden;position: absolute;left: 15px;right: 15px;bottom: 0;top: 100px;\"></div>");t.b("\n"+i);t.b("</div>");return t.fl()},partials:{},subs:{}});templates.cobler_element=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<li data-name=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\" class=\"");if(t.s(t.f("contentFields",c,p,1),c,p,0,50,56,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("noveil")});c.pop()}t.b(" pull-");t.b(t.v(t.d("attributes.width",c,p,0)));if(t.s(t.d("attributes.width",c,p,1),c,p,0,121,125,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("left")});c.pop()}t.b(" width");t.b(t.v(t.d("attributes.width",c,p,0)));t.b("\" style=\"position: relative; display: block;\" id=\"");t.b(t.v(t.f("uuid",c,p,0)));t.b("\">");t.b("\n"+i);t.b("	<div class=\"cobler-li-content\"></div>");t.b("\n"+i);t.b("	<div class=\"btn-group actions\" style=\"opacity:.6\">");t.b("\n"+i);t.b("		<span class=\"remove-item btn btn-danger fa fa-trash-o\" data-title=\"Remove\"></span>");t.b("\n"+i);t.b("		<span class=\"duplicate-item btn btn-default fa fa-copy\" data-title=\"Duplicate\"></span>");t.b("\n"+i);t.b("	</div>");t.b("\n"+i);t.b("</li>");return t.fl()},partials:{},subs:{}});templates.cobler_init=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<div id=\"cb-starter\">");t.b("\n"+i);t.b("	To Begin click on or drag a WIDGET from the right and drop it on ME! <i class=\"fa fa-arrow-right\"></i> ");t.b("\n"+i);t.b("</div>");t.b("\n"+i);t.b("<div id=\"cb-content\" class=\"form-horizontal\"></div>");return t.fl()},partials:{},subs:{}});templates.cobler_widget=new Hogan.Template({code:function(c,p,i){var t=this;t.b(i=i||"");t.b("<li data-name=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\" class=\"list-group-item\" style=\"position: relative;\">");t.b("\n"+i);t.b("	");if(t.s(t.f("icon",c,p,1),c,p,0,88,129,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<i class=\"fa fa-");t.b(t.v(t.f("icon",c,p,0)));t.b(" icon-muted\"></i>")});c.pop()}t.b("&nbsp;");t.b(t.t(t.f("display",c,p,0)));t.b("\n"+i);t.b("</li>");return t.fl()},partials:{},subs:{}});/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
;(function(){function n(n,t){return n.set(t[0],t[1]),n}function t(n,t){return n.add(t),n}function r(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function e(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function i(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function o(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function f(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function c(n,t){return!(null==n||!n.length)&&-1<d(n,t,0)}function a(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function l(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function s(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function h(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function p(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function _(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function v(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function g(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function d(n,t,r){if(t===t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=g(n,b,r);return n}function y(n,t,r,e){--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function b(n){return n!==n}function x(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:P}function j(n){return function(t){return null==t?F:t[n]}}function w(n){return function(t){return null==n?F:n[t]}}function m(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function A(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==F&&(r=r===F?i:r+i)}return r}function E(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function O(n,t){return l(t,function(t){return[t,n[t]]})}function S(n){return function(t){return n(t)}}function I(n,t){return l(t,function(t){return n[t]})}function R(n,t){return n.has(t)}function z(n,t){for(var r=-1,e=n.length;++r<e&&-1<d(t,n[r],0););return r}function W(n,t){for(var r=n.length;r--&&-1<d(t,n[r],0););return r}function B(n){return"\\"+Tn[n]}function L(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function U(n,t){return function(r){return n(t(r))}}function C(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&"__lodash_placeholder__"!==o||(n[r]="__lodash_placeholder__",i[u++]=r)}return i}function D(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function M(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function T(n){if(Bn.test(n)){for(var t=zn.lastIndex=0;zn.test(n);)++t;n=t}else n=tt(n);return n}function $(n){return Bn.test(n)?n.match(zn)||[]:n.split("")}var F,N=1/0,P=NaN,Z=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],q=/\b__p\+='';/g,V=/\b(__p\+=)''\+/g,K=/(__e\(.*?\)|\b__t\))\+'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,J=RegExp(G.source),Y=RegExp(H.source),Q=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,nn=/<%=([\s\S]+?)%>/g,tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rn=/^\w*$/,en=/^\./,un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,on=/[\\^$.*+?()[\]{}|]/g,fn=RegExp(on.source),cn=/^\s+|\s+$/g,an=/^\s+/,ln=/\s+$/,sn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,hn=/\{\n\/\* \[wrapped with (.+)\] \*/,pn=/,? & /,_n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vn=/\\(\\)?/g,gn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dn=/\w*$/,yn=/^[-+]0x[0-9a-f]+$/i,bn=/^0b[01]+$/i,xn=/^\[object .+?Constructor\]$/,jn=/^0o[0-7]+$/i,wn=/^(?:0|[1-9]\d*)$/,mn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,An=/($^)/,kn=/['\n\r\u2028\u2029\\]/g,En="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",On="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+En,Sn="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",In=RegExp("['\u2019]","g"),Rn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),zn=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+Sn+En,"g"),Wn=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",On].join("|"),"g"),Bn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ln=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Un="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Cn={};Cn["[object Float32Array]"]=Cn["[object Float64Array]"]=Cn["[object Int8Array]"]=Cn["[object Int16Array]"]=Cn["[object Int32Array]"]=Cn["[object Uint8Array]"]=Cn["[object Uint8ClampedArray]"]=Cn["[object Uint16Array]"]=Cn["[object Uint32Array]"]=!0,Cn["[object Arguments]"]=Cn["[object Array]"]=Cn["[object ArrayBuffer]"]=Cn["[object Boolean]"]=Cn["[object DataView]"]=Cn["[object Date]"]=Cn["[object Error]"]=Cn["[object Function]"]=Cn["[object Map]"]=Cn["[object Number]"]=Cn["[object Object]"]=Cn["[object RegExp]"]=Cn["[object Set]"]=Cn["[object String]"]=Cn["[object WeakMap]"]=!1;var Dn={};Dn["[object Arguments]"]=Dn["[object Array]"]=Dn["[object ArrayBuffer]"]=Dn["[object DataView]"]=Dn["[object Boolean]"]=Dn["[object Date]"]=Dn["[object Float32Array]"]=Dn["[object Float64Array]"]=Dn["[object Int8Array]"]=Dn["[object Int16Array]"]=Dn["[object Int32Array]"]=Dn["[object Map]"]=Dn["[object Number]"]=Dn["[object Object]"]=Dn["[object RegExp]"]=Dn["[object Set]"]=Dn["[object String]"]=Dn["[object Symbol]"]=Dn["[object Uint8Array]"]=Dn["[object Uint8ClampedArray]"]=Dn["[object Uint16Array]"]=Dn["[object Uint32Array]"]=!0,Dn["[object Error]"]=Dn["[object Function]"]=Dn["[object WeakMap]"]=!1;var Mn,Tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$n=parseFloat,Fn=parseInt,Nn=typeof global=="object"&&global&&global.Object===Object&&global,Pn=typeof self=="object"&&self&&self.Object===Object&&self,Zn=Nn||Pn||Function("return this")(),qn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vn=qn&&typeof module=="object"&&module&&!module.nodeType&&module,Kn=Vn&&Vn.exports===qn,Gn=Kn&&Nn.process;n:{try{Mn=Gn&&Gn.binding&&Gn.binding("util");break n}catch(n){}Mn=void 0}var Hn=Mn&&Mn.isArrayBuffer,Jn=Mn&&Mn.isDate,Yn=Mn&&Mn.isMap,Qn=Mn&&Mn.isRegExp,Xn=Mn&&Mn.isSet,nt=Mn&&Mn.isTypedArray,tt=j("length"),rt=w({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),et=w({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),ut=w({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),it=function w(En){function On(n){if(xu(n)&&!af(n)&&!(n instanceof Mn)){if(n instanceof zn)return n;if(ci.call(n,"__wrapped__"))return Pe(n)}return new zn(n)}function Sn(){}function zn(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=F}function Mn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Tn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Nn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Pn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function qn(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Pn;++t<r;)this.add(n[t])}function Vn(n){this.size=(this.__data__=new Nn(n)).size}function Gn(n,t){var r,e=af(n),u=!e&&cf(n),i=!e&&!u&&sf(n),o=!e&&!u&&!i&&gf(n),u=(e=e||u||i||o)?E(n.length,ri):[],f=u.length;for(r in n)!t&&!ci.call(n,r)||e&&("length"==r||i&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Re(r,f))||u.push(r);return u}function tt(n){var t=n.length;return t?n[cr(0,t-1)]:F}function ot(n,t){return Te(Mr(n),gt(t,0,n.length))}function ft(n){return Te(Mr(n))}function ct(n,t,r){(r===F||hu(n[t],r))&&(r!==F||t in n)||_t(n,t,r)}function at(n,t,r){var e=n[t];ci.call(n,t)&&hu(e,r)&&(r!==F||t in n)||_t(n,t,r)}function lt(n,t){for(var r=n.length;r--;)if(hu(n[r][0],t))return r;return-1}function st(n,t,r,e){return oo(n,function(n,u,i){t(e,n,r(n),i)}),e}function ht(n,t){return n&&Tr(t,Lu(t),n)}function pt(n,t){return n&&Tr(t,Uu(t),n)}function _t(n,t,r){"__proto__"==t&&Ei?Ei(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function vt(n,t){for(var r=-1,e=t.length,u=Hu(e),i=null==n;++r<e;)u[r]=i?F:Wu(n,t[r]);return u}function gt(n,t,r){return n===n&&(r!==F&&(n=n<=r?n:r),t!==F&&(n=n>=t?n:t)),n}function dt(n,t,r,e,i,o){var f,c=1&t,a=2&t,l=4&t;if(r&&(f=i?r(n,e,i,o):r(n)),f!==F)return f;if(!bu(n))return n;if(e=af(n)){if(f=Ee(n),!c)return Mr(n,f)}else{var s=yo(n),h="[object Function]"==s||"[object GeneratorFunction]"==s;if(sf(n))return Wr(n,c);if("[object Object]"==s||"[object Arguments]"==s||h&&!i){if(f=a||h?{}:Oe(n),!c)return a?Fr(n,pt(f,n)):$r(n,ht(f,n))}else{if(!Dn[s])return i?n:{};f=Se(n,s,dt,c)}}if(o||(o=new Vn),i=o.get(n))return i;o.set(n,f);var a=l?a?ye:de:a?Uu:Lu,p=e?F:a(n);return u(p||n,function(e,u){p&&(u=e,e=n[u]),at(f,u,dt(e,t,r,u,n,o))}),f}function yt(n){var t=Lu(n);return function(r){return bt(r,n,t)}}function bt(n,t,r){var e=r.length;if(null==n)return!e;for(n=ni(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===F&&!(u in n)||!i(o))return!1}return!0}function xt(n,t,r){if(typeof n!="function")throw new ei("Expected a function");return jo(function(){n.apply(F,r)},t)}function jt(n,t,r,e){var u=-1,i=c,o=!0,f=n.length,s=[],h=t.length;if(!f)return s;r&&(t=l(t,S(r))),e?(i=a,o=!1):200<=t.length&&(i=R,o=!1,t=new qn(t));n:for(;++u<f;){var p=n[u],_=null==r?p:r(p),p=e||0!==p?p:0;if(o&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function wt(n,t){var r=!0;return oo(n,function(n,e,u){return r=!!t(n,e,u)}),r}function mt(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===F?o===o&&!Au(o):r(o,f)))var f=o,c=i}return c}function At(n,t){var r=[];return oo(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function kt(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Ie),u||(u=[]);++i<o;){var f=n[i];0<t&&r(f)?1<t?kt(f,t-1,r,e,u):s(u,f):e||(u[u.length]=f)}return u}function Et(n,t){return n&&co(n,t,Lu)}function Ot(n,t){return n&&ao(n,t,Lu)}function St(n,t){return f(t,function(t){return gu(n[t])})}function It(n,t){t=Rr(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[$e(t[r++])];return r&&r==e?n:F}function Rt(n,t,r){return t=t(n),af(n)?t:s(t,r(n))}function zt(n){if(null==n)n=n===F?"[object Undefined]":"[object Null]";else if(ki&&ki in ni(n)){var t=ci.call(n,ki),r=n[ki];try{n[ki]=F;var e=!0}catch(n){}var u=si.call(n);e&&(t?n[ki]=r:delete n[ki]),n=u}else n=si.call(n);return n}function Wt(n,t){return n>t}function Bt(n,t){return null!=n&&ci.call(n,t)}function Lt(n,t){return null!=n&&t in ni(n)}function Ut(n,t,r){for(var e=r?a:c,u=n[0].length,i=n.length,o=i,f=Hu(i),s=1/0,h=[];o--;){var p=n[o];o&&t&&(p=l(p,S(t))),s=Mi(p.length,s),f[o]=!r&&(t||120<=u&&120<=p.length)?new qn(o&&p):F}var p=n[0],_=-1,v=f[0];n:for(;++_<u&&h.length<s;){var g=p[_],d=t?t(g):g,g=r||0!==g?g:0;if(v?!R(v,d):!e(h,d,r)){for(o=i;--o;){var y=f[o];if(y?!R(y,d):!e(n[o],d,r))continue n}v&&v.push(d),h.push(g)}}return h}function Ct(n,t,r){var e={};return Et(n,function(n,u,i){t(e,r(n),u,i)}),e}function Dt(n,t,e){return t=Rr(t,n),n=2>t.length?n:It(n,vr(t,0,-1)),t=null==n?n:n[$e(Ge(t))],null==t?F:r(t,n,e)}function Mt(n){return xu(n)&&"[object Arguments]"==zt(n)}function Tt(n){return xu(n)&&"[object ArrayBuffer]"==zt(n)}function $t(n){return xu(n)&&"[object Date]"==zt(n)}function Ft(n,t,r,e,u){if(n===t)t=!0;else if(null==n||null==t||!xu(n)&&!xu(t))t=n!==n&&t!==t;else n:{var i=af(n),o=af(t),f=i?"[object Array]":yo(n),c=o?"[object Array]":yo(t),f="[object Arguments]"==f?"[object Object]":f,c="[object Arguments]"==c?"[object Object]":c,a="[object Object]"==f,o="[object Object]"==c;if((c=f==c)&&sf(n)){if(!sf(t)){t=!1;break n}i=!0,a=!1}if(c&&!a)u||(u=new Vn),t=i||gf(n)?_e(n,t,r,e,Ft,u):ve(n,t,f,r,e,Ft,u);else{if(!(1&r)&&(i=a&&ci.call(n,"__wrapped__"),f=o&&ci.call(t,"__wrapped__"),i||f)){n=i?n.value():n,t=f?t.value():t,u||(u=new Vn),t=Ft(n,t,r,e,u);break n}if(c)t:if(u||(u=new Vn),i=1&r,f=de(n),o=f.length,c=de(t).length,o==c||i){for(a=o;a--;){var l=f[a];if(!(i?l in t:ci.call(t,l))){t=!1;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=!0,u.set(n,t),u.set(t,n);for(var s=i;++a<o;){var l=f[a],h=n[l],p=t[l];if(e)var _=i?e(p,h,l,t,n,u):e(h,p,l,n,t,u);if(_===F?h!==p&&!Ft(h,p,r,e,u):!_){c=!1;break}s||(s="constructor"==l)}c&&!s&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!(typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)&&(c=!1)),u.delete(n),u.delete(t),t=c}}else t=!1;else t=!1}}return t}function Nt(n){return xu(n)&&"[object Map]"==yo(n)}function Pt(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=ni(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){var f=r[u],c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===F&&!(c in n))return!1}else{if(f=new Vn,e)var s=e(a,l,c,n,t,f);if(s===F?!Ft(l,a,3,e,f):!s)return!1}}return!0}function Zt(n){return!(!bu(n)||li&&li in n)&&(gu(n)?_i:xn).test(Fe(n))}function qt(n){return xu(n)&&"[object RegExp]"==zt(n)}function Vt(n){return xu(n)&&"[object Set]"==yo(n)}function Kt(n){return xu(n)&&yu(n.length)&&!!Cn[zt(n)]}function Gt(n){return typeof n=="function"?n:null==n?Nu:typeof n=="object"?af(n)?Xt(n[0],n[1]):Qt(n):Vu(n)}function Ht(n){if(!Le(n))return Ci(n);var t,r=[];for(t in ni(n))ci.call(n,t)&&"constructor"!=t&&r.push(t);return r}function Jt(n,t){return n<t}function Yt(n,t){var r=-1,e=pu(n)?Hu(n.length):[];return oo(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Qt(n){var t=me(n);return 1==t.length&&t[0][2]?Ue(t[0][0],t[0][1]):function(r){return r===n||Pt(r,n,t)}}function Xt(n,t){return We(n)&&t===t&&!bu(t)?Ue($e(n),t):function(r){var e=Wu(r,n);return e===F&&e===t?Bu(r,n):Ft(t,e,3)}}function nr(n,t,r,e,u){n!==t&&co(t,function(i,o){if(bu(i)){u||(u=new Vn);var f=u,c=n[o],a=t[o],l=f.get(a);if(l)ct(n,o,l);else{var l=e?e(c,a,o+"",n,t,f):F,s=l===F;if(s){var h=af(a),p=!h&&sf(a),_=!h&&!p&&gf(a),l=a;h||p||_?af(c)?l=c:_u(c)?l=Mr(c):p?(s=!1,l=Wr(a,!0)):_?(s=!1,l=Lr(a,!0)):l=[]:wu(a)||cf(a)?(l=c,cf(c)?l=Ru(c):(!bu(c)||r&&gu(c))&&(l=Oe(a))):s=!1}s&&(f.set(a,l),nr(l,a,r,e,f),f.delete(a)),ct(n,o,l)}}else f=e?e(n[o],i,o+"",n,t,u):F,f===F&&(f=i),ct(n,o,f)},Uu)}function tr(n,t){var r=n.length;if(r)return t+=0>t?r:0,Re(t,r)?n[t]:F}function rr(n,t,r){var e=-1;return t=l(t.length?t:[Nu],S(je())),n=Yt(n,function(n){return{a:l(t,function(t){return t(n)}),b:++e,c:n}}),A(n,function(n,t){var e;n:{e=-1;for(var u=n.a,i=t.a,o=u.length,f=r.length;++e<o;){var c=Ur(u[e],i[e]);if(c){e=e>=f?c:c*("desc"==r[e]?-1:1);break n}}e=n.b-t.b}return e})}function er(n,t){return ur(n,t,function(t,r){return Bu(n,r)})}function ur(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=It(n,o);r(f,o)&&pr(i,Rr(o,n),f)}return i}function ir(n){return function(t){return It(t,n)}}function or(n,t,r,e){var u=e?y:d,i=-1,o=t.length,f=n;for(n===t&&(t=Mr(t)),r&&(f=l(n,S(r)));++i<o;)for(var c=0,a=t[i],a=r?r(a):a;-1<(c=u(f,a,c,e));)f!==n&&wi.call(f,c,1),wi.call(n,c,1);return n}function fr(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Re(u)?wi.call(n,u,1):mr(n,u)}}}function cr(n,t){return n+zi(Fi()*(t-n+1))}function ar(n,t){var r="";if(!n||1>t||9007199254740991<t)return r;do t%2&&(r+=n),(t=zi(t/2))&&(n+=n);while(t);return r}function lr(n,t){return wo(Ce(n,t,Nu),n+"")}function sr(n){return tt(Du(n))}function hr(n,t){var r=Du(n);return Te(r,gt(t,0,r.length))}function pr(n,t,r,e){if(!bu(n))return n;t=Rr(t,n);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=$e(t[u]),a=r;if(u!=o){var l=f[c],a=e?e(l,c,f):F;a===F&&(a=bu(l)?l:Re(t[u+1])?[]:{})}at(f,c,a),f=f[c]}return n}function _r(n){return Te(Du(n))}function vr(n,t,r){var e=-1,u=n.length;for(0>t&&(t=-t>u?0:u+t),r=r>u?u:r,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Hu(u);++e<u;)r[e]=n[e+t];return r}function gr(n,t){var r;return oo(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function dr(n,t,r){var e=0,u=null==n?e:n.length;if(typeof t=="number"&&t===t&&2147483647>=u){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!Au(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return yr(n,t,Nu,r)}function yr(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!==t,f=null===t,c=Au(t),a=t===F;u<i;){var l=zi((u+i)/2),s=r(n[l]),h=s!==F,p=null===s,_=s===s,v=Au(s);(o?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):p||v?0:e?s<=t:s<t)?u=l+1:i=l}return Mi(i,4294967294)}function br(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!hu(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function xr(n){return typeof n=="number"?n:Au(n)?P:+n}function jr(n){if(typeof n=="string")return n;if(af(n))return l(n,jr)+"";if(Au(n))return uo?uo.call(n):"";var t=n+"";return"0"==t&&1/n==-N?"-0":t}function wr(n,t,r){var e=-1,u=c,i=n.length,o=!0,f=[],l=f;if(r)o=!1,u=a;else if(200<=i){if(u=t?null:po(n))return D(u);o=!1,u=R,l=new qn}else l=t?[]:f;n:for(;++e<i;){var s=n[e],h=t?t(s):s,s=r||0!==s?s:0;if(o&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue n;t&&l.push(h),f.push(s)}else u(l,h,r)||(l!==f&&l.push(h),f.push(s))}return f}function mr(n,t){return t=Rr(t,n),n=2>t.length?n:It(n,vr(t,0,-1)),null==n||delete n[$e(Ge(t))]}function Ar(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?vr(n,e?0:i,e?i+1:u):vr(n,e?i+1:0,e?u:i)}function kr(n,t){var r=n;return r instanceof Mn&&(r=r.value()),h(t,function(n,t){return t.func.apply(t.thisArg,s([n],t.args))},r)}function Er(n,t,r){var e=n.length;if(2>e)return e?wr(n[0]):[];for(var u=-1,i=Hu(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=jt(i[u]||o,n[f],t,r));return wr(kt(i,1),t,r)}function Or(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;)r(o,n[e],e<i?t[e]:F);return o}function Sr(n){return _u(n)?n:[]}function Ir(n){return typeof n=="function"?n:Nu}function Rr(n,t){return af(n)?n:We(n,t)?[n]:mo(zu(n))}function zr(n,t,r){var e=n.length;return r=r===F?e:r,!t&&r>=e?n:vr(n,t,r)}function Wr(n,t){if(t)return n.slice();var r=n.length,r=yi?yi(r):new n.constructor(r);return n.copy(r),r}function Br(n){var t=new n.constructor(n.byteLength);return new di(t).set(new di(n)),t}function Lr(n,t){return new n.constructor(t?Br(n.buffer):n.buffer,n.byteOffset,n.length)}function Ur(n,t){if(n!==t){var r=n!==F,e=null===n,u=n===n,i=Au(n),o=t!==F,f=null===t,c=t===t,a=Au(t);if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Cr(n,t,r,e){var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Di(i-o,0),l=Hu(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<o;)(e||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l}function Dr(n,t,r,e){var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Di(i-f,0),s=Hu(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++o<f;)(e||u<i)&&(s[l+r[o]]=n[u++]);return s}function Mr(n,t){var r=-1,e=n.length;for(t||(t=Hu(e));++r<e;)t[r]=n[r];return t}function Tr(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):F;c===F&&(c=n[f]),u?_t(r,f,c):at(r,f,c)}return r}function $r(n,t){return Tr(n,vo(n),t)}function Fr(n,t){return Tr(n,go(n),t)}function Nr(n,t){return function(r,u){var i=af(r)?e:st,o=t?t():{};return i(r,n,je(u,2),o)}}function Pr(n){return lr(function(t,r){var e=-1,u=r.length,i=1<u?r[u-1]:F,o=2<u?r[2]:F,i=3<n.length&&typeof i=="function"?(u--,i):F;for(o&&ze(r[0],r[1],o)&&(i=3>u?F:i,u=1),t=ni(t);++e<u;)(o=r[e])&&n(t,o,e,i);return t})}function Zr(n,t){return function(r,e){if(null==r)return r;if(!pu(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=ni(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function qr(n){return function(t,r,e){var u=-1,i=ni(t);e=e(t);for(var o=e.length;o--;){var f=e[n?o:++u];if(!1===r(i[f],f,i))break}return t}}function Vr(n,t,r){function e(){return(this&&this!==Zn&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=1&t,i=Hr(n);return e}function Kr(n){return function(t){t=zu(t);var r=Bn.test(t)?$(t):F,e=r?r[0]:t.charAt(0);return t=r?zr(r,1).join(""):t.slice(1),e[n]()+t}}function Gr(n){return function(t){return h($u(Tu(t).replace(In,"")),n,"")}}function Hr(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=io(n.prototype),t=n.apply(r,t);return bu(t)?t:r}}function Jr(n,t,e){function u(){for(var o=arguments.length,f=Hu(o),c=o,a=xe(u);c--;)f[c]=arguments[c];return c=3>o&&f[0]!==a&&f[o-1]!==a?[]:C(f,a),o-=c.length,o<e?fe(n,t,Xr,u.placeholder,F,f,c,F,F,e-o):r(this&&this!==Zn&&this instanceof u?i:n,this,f)}var i=Hr(n);return u}function Yr(n){return function(t,r,e){var u=ni(t);if(!pu(t)){var i=je(r,3);t=Lu(t),r=function(n){return i(u[n],n,u)}}return r=n(t,r,e),-1<r?u[i?t[r]:r]:F}}function Qr(n){return ge(function(t){var r=t.length,e=r,u=zn.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if(typeof i!="function")throw new ei("Expected a function");if(u&&!o&&"wrapper"==be(i))var o=new zn([],!0)}for(e=o?e:r;++e<r;)var i=t[e],u=be(i),f="wrapper"==u?_o(i):F,o=f&&Be(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?o[be(f[0])].apply(o,f[3]):1==i.length&&Be(i)?o[u]():o.thru(i);return function(){var n=arguments,e=n[0];if(o&&1==n.length&&af(e))return o.plant(e).value();for(var u=0,n=r?t[u].apply(this,n):e;++u<r;)n=t[u].call(this,n);return n}})}function Xr(n,t,r,e,u,i,o,f,c,a){function l(){for(var d=arguments.length,y=Hu(d),b=d;b--;)y[b]=arguments[b];if(_){var x,j=xe(l),b=y.length;for(x=0;b--;)y[b]===j&&++x}if(e&&(y=Cr(y,e,u,_)),i&&(y=Dr(y,i,o,_)),d-=x,_&&d<a)return j=C(y,j),fe(n,t,Xr,l.placeholder,r,y,j,f,c,a-d);if(j=h?r:this,b=p?j[n]:n,d=y.length,f){x=y.length;for(var w=Mi(f.length,x),m=Mr(y);w--;){var A=f[w];y[w]=Re(A,x)?m[A]:F}}else v&&1<d&&y.reverse();return s&&c<d&&(y.length=c),this&&this!==Zn&&this instanceof l&&(b=g||Hr(b)),b.apply(j,y)}var s=128&t,h=1&t,p=2&t,_=24&t,v=512&t,g=p?F:Hr(n);return l}function ne(n,t){return function(r,e){return Ct(r,n,t(e))}}function te(n,t){return function(r,e){var u;if(r===F&&e===F)return t;if(r!==F&&(u=r),e!==F){if(u===F)return e;typeof r=="string"||typeof e=="string"?(r=jr(r),e=jr(e)):(r=xr(r),e=xr(e)),u=n(r,e)}return u}}function re(n){return ge(function(t){return t=l(t,S(je())),lr(function(e){var u=this;return n(t,function(n){return r(n,u,e)})})})}function ee(n,t){t=t===F?" ":jr(t);var r=t.length;return 2>r?r?ar(t,n):t:(r=ar(t,Ri(n/T(t))),Bn.test(t)?zr($(r),0,n).join(""):r.slice(0,n))}function ue(n,t,e,u){function i(){for(var t=-1,c=arguments.length,a=-1,l=u.length,s=Hu(l+c),h=this&&this!==Zn&&this instanceof i?f:n;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++t];return r(h,o?e:this,s)}var o=1&t,f=Hr(n);return i}function ie(n){return function(t,r,e){e&&typeof e!="number"&&ze(t,r,e)&&(r=e=F),t=Eu(t),r===F?(r=t,t=0):r=Eu(r),e=e===F?t<r?1:-1:Eu(e);var u=-1;r=Di(Ri((r-t)/(e||1)),0);for(var i=Hu(r);r--;)i[n?r:++u]=t,t+=e;return i}}function oe(n){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=Iu(t),r=Iu(r)),n(t,r)}}function fe(n,t,r,e,u,i,o,f,c,a){var l=8&t,s=l?o:F;o=l?F:o;var h=l?i:F;return i=l?F:i,t=(t|(l?32:64))&~(l?64:32),4&t||(t&=-4),u=[n,t,u,h,s,i,o,f,c,a],r=r.apply(F,u),Be(n)&&xo(r,u),r.placeholder=e,De(r,n,t)}function ce(n){var t=Xu[n];return function(n,r){if(n=Iu(n),r=null==r?0:Mi(Ou(r),292)){var e=(zu(n)+"e").split("e"),e=t(e[0]+"e"+(+e[1]+r)),e=(zu(e)+"e").split("e");return+(e[0]+"e"+(+e[1]-r))}return t(n)}}function ae(n){return function(t){var r=yo(t);return"[object Map]"==r?L(t):"[object Set]"==r?M(t):O(t,n(t))}}function le(n,t,r,e,u,i,o,f){var c=2&t;if(!c&&typeof n!="function")throw new ei("Expected a function");var a=e?e.length:0;if(a||(t&=-97,e=u=F),o=o===F?o:Di(Ou(o),0),f=f===F?f:Ou(f),a-=u?u.length:0,64&t){var l=e,s=u;e=u=F}var h=c?F:_o(n);return i=[n,t,r,e,u,l,s,i,o,f],h&&(r=i[1],n=h[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&i[7].length<=h[8]||384==n&&h[7].length<=h[8]&&8==r,131>t||e)&&(1&n&&(i[2]=h[2],t|=1&r?0:4),(r=h[3])&&(e=i[3],i[3]=e?Cr(e,r,h[4]):r,i[4]=e?C(i[3],"__lodash_placeholder__"):h[4]),(r=h[5])&&(e=i[5],i[5]=e?Dr(e,r,h[6]):r,i[6]=e?C(i[5],"__lodash_placeholder__"):h[6]),(r=h[7])&&(i[7]=r),128&n&&(i[8]=null==i[8]?h[8]:Mi(i[8],h[8])),null==i[9]&&(i[9]=h[9]),i[0]=h[0],i[1]=t),n=i[0],t=i[1],r=i[2],e=i[3],u=i[4],f=i[9]=i[9]===F?c?0:n.length:Di(i[9]-a,0),!f&&24&t&&(t&=-25),De((h?lo:xo)(t&&1!=t?8==t||16==t?Jr(n,t,f):32!=t&&33!=t||u.length?Xr.apply(F,i):ue(n,t,r,e):Vr(n,t,r),i),n,t)}function se(n,t,r,e){return n===F||hu(n,ii[r])&&!ci.call(e,r)?t:n}function he(n,t,r,e,u,i){return bu(n)&&bu(t)&&(i.set(t,n),nr(n,t,F,he,i),i.delete(t)),n}function pe(n){return wu(n)?F:n}function _e(n,t,r,e,u,i){var o=1&r,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;if((c=i.get(n))&&i.get(t))return c==t;var c=-1,a=!0,l=2&r?new qn:F;for(i.set(n,t),i.set(t,n);++c<f;){var s=n[c],h=t[c];if(e)var p=o?e(h,s,c,t,n,i):e(s,h,c,n,t,i);if(p!==F){if(p)continue;a=!1;break}if(l){if(!_(t,function(n,t){if(!R(l,t)&&(s===n||u(s,n,r,e,i)))return l.push(t)})){a=!1;break}}else if(s!==h&&!u(s,h,r,e,i)){a=!1;break}}return i.delete(n),i.delete(t),a}function ve(n,t,r,e,u,i,o){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":if(n.byteLength!=t.byteLength||!i(new di(n),new di(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return hu(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=L;case"[object Set]":if(f||(f=D),n.size!=t.size&&!(1&e))break;return(r=o.get(n))?r==t:(e|=2,o.set(n,t),t=_e(f(n),f(t),e,u,i,o),o.delete(n),t);case"[object Symbol]":if(eo)return eo.call(n)==eo.call(t)}return!1}function ge(n){return wo(Ce(n,F,Ve),n+"")}function de(n){return Rt(n,Lu,vo)}function ye(n){return Rt(n,Uu,go)}function be(n){for(var t=n.name+"",r=Ji[t],e=ci.call(Ji,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function xe(n){return(ci.call(On,"placeholder")?On:n).placeholder}function je(){var n=On.iteratee||Pu,n=n===Pu?Gt:n;return arguments.length?n(arguments[0],arguments[1]):n}function we(n,t){var r=n.__data__,e=typeof t;return("string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t)?r[typeof t=="string"?"string":"hash"]:r.map}function me(n){for(var t=Lu(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u===u&&!bu(u)]}return t}function Ae(n,t){var r=null==n?F:n[t];return Zt(r)?r:F}function ke(n,t,r){t=Rr(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=$e(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&yu(u)&&Re(o,u)&&(af(n)||cf(n)))}function Ee(n){var t=n.length,r=n.constructor(t);return t&&"string"==typeof n[0]&&ci.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Oe(n){return typeof n.constructor!="function"||Le(n)?{}:io(bi(n))}function Se(r,e,u,i){var o=r.constructor;switch(e){case"[object ArrayBuffer]":return Br(r);case"[object Boolean]":case"[object Date]":return new o(+r);case"[object DataView]":return e=i?Br(r.buffer):r.buffer,new r.constructor(e,r.byteOffset,r.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Lr(r,i);case"[object Map]":return e=i?u(L(r),1):L(r),h(e,n,new r.constructor);case"[object Number]":case"[object String]":return new o(r);case"[object RegExp]":return e=new r.constructor(r.source,dn.exec(r)),e.lastIndex=r.lastIndex,e;case"[object Set]":return e=i?u(D(r),1):D(r),h(e,t,new r.constructor);case"[object Symbol]":return eo?ni(eo.call(r)):{}}}function Ie(n){return af(n)||cf(n)||!!(mi&&n&&n[mi])}function Re(n,t){return t=null==t?9007199254740991:t,!!t&&(typeof n=="number"||wn.test(n))&&-1<n&&0==n%1&&n<t}function ze(n,t,r){if(!bu(r))return!1;var e=typeof t;return!!("number"==e?pu(r)&&Re(t,r.length):"string"==e&&t in r)&&hu(r[t],n)}function We(n,t){if(af(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!Au(n))||(rn.test(n)||!tn.test(n)||null!=t&&n in ni(t))}function Be(n){var t=be(n),r=On[t];return typeof r=="function"&&t in Mn.prototype&&(n===r||(t=_o(r),!!t&&n===t[0]))}function Le(n){var t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||ii)}function Ue(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==F||n in ni(r)))}}function Ce(n,t,e){return t=Di(t===F?n.length-1:t,0),function(){for(var u=arguments,i=-1,o=Di(u.length-t,0),f=Hu(o);++i<o;)f[i]=u[t+i];for(i=-1,o=Hu(t+1);++i<t;)o[i]=u[i];return o[t]=e(f),r(n,this,o)}}function De(n,t,r){var e=t+"";t=wo;var u,i=Ne;return u=(u=e.match(hn))?u[1].split(pn):[],r=i(u,r),(i=r.length)&&(u=i-1,r[u]=(1<i?"& ":"")+r[u],r=r.join(2<i?", ":" "),e=e.replace(sn,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Me(n){var t=0,r=0;return function(){var e=Ti(),u=16-(e-r);if(r=e,0<u){if(800<=++t)return arguments[0]}else t=0;return n.apply(F,arguments)}}function Te(n,t){var r=-1,e=n.length,u=e-1;for(t=t===F?e:t;++r<t;){var e=cr(r,u),i=n[e];n[e]=n[r],n[r]=i}return n.length=t,n}function $e(n){if(typeof n=="string"||Au(n))return n;var t=n+"";return"0"==t&&1/n==-N?"-0":t}function Fe(n){if(null!=n){try{return fi.call(n)}catch(n){}return n+""}return""}function Ne(n,t){return u(Z,function(r){var e="_."+r[0];t&r[1]&&!c(n,e)&&n.push(e)}),n.sort()}function Pe(n){if(n instanceof Mn)return n.clone();var t=new zn(n.__wrapped__,n.__chain__);return t.__actions__=Mr(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Ze(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Ou(r),0>r&&(r=Di(e+r,0)),g(n,je(t,3),r)):-1}function qe(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==F&&(u=Ou(r),u=0>r?Di(e+u,0):Mi(u,e-1)),g(n,je(t,3),u,!0)}function Ve(n){return(null==n?0:n.length)?kt(n,1):[]}function Ke(n){return n&&n.length?n[0]:F}function Ge(n){var t=null==n?0:n.length;return t?n[t-1]:F}function He(n,t){return n&&n.length&&t&&t.length?or(n,t):n}function Je(n){return null==n?n:Ni.call(n)}function Ye(n){if(!n||!n.length)return[];var t=0;return n=f(n,function(n){if(_u(n))return t=Di(n.length,t),!0}),E(t,function(t){return l(n,j(t))})}function Qe(n,t){if(!n||!n.length)return[];var e=Ye(n);return null==t?e:l(e,function(n){return r(t,F,n)})}function Xe(n){return n=On(n),n.__chain__=!0,n}function nu(n,t){return t(n)}function tu(){return this}function ru(n,t){return(af(n)?u:oo)(n,je(t,3))}function eu(n,t){return(af(n)?i:fo)(n,je(t,3))}function uu(n,t){return(af(n)?l:Yt)(n,je(t,3))}function iu(n,t,r){return t=r?F:t,t=n&&null==t?n.length:t,le(n,128,F,F,F,F,t)}function ou(n,t){var r;if(typeof t!="function")throw new ei("Expected a function");return n=Ou(n),function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=F),r}}function fu(n,t,r){return t=r?F:t,n=le(n,8,F,F,F,F,F,t),n.placeholder=fu.placeholder,n}function cu(n,t,r){return t=r?F:t,n=le(n,16,F,F,F,F,F,t),n.placeholder=cu.placeholder,n}function au(n,t,r){function e(t){var r=c,e=a;return c=a=F,_=t,s=n.apply(e,r)}function u(n){var r=n-p;return n-=_,p===F||r>=t||0>r||g&&n>=l}function i(){var n=Jo();if(u(n))return o(n);var r,e=jo;r=n-_,n=t-(n-p),r=g?Mi(n,l-r):n,h=e(i,r)}function o(n){return h=F,d&&c?e(n):(c=a=F,s)}function f(){var n=Jo(),r=u(n);if(c=arguments,a=this,p=n,r){if(h===F)return _=n=p,h=jo(i,t),v?e(n):s;if(g)return h=jo(i,t),e(p)}return h===F&&(h=jo(i,t)),s}var c,a,l,s,h,p,_=0,v=!1,g=!1,d=!0;if(typeof n!="function")throw new ei("Expected a function");return t=Iu(t)||0,bu(r)&&(v=!!r.leading,l=(g="maxWait"in r)?Di(Iu(r.maxWait)||0,t):l,d="trailing"in r?!!r.trailing:d),f.cancel=function(){h!==F&&ho(h),_=0,c=p=a=h=F},f.flush=function(){return h===F?s:o(Jo())},f}function lu(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;return i.has(u)?i.get(u):(e=n.apply(this,e),r.cache=i.set(u,e)||i,e)}if(typeof n!="function"||null!=t&&typeof t!="function")throw new ei("Expected a function");return r.cache=new(lu.Cache||Pn),r}function su(n){if(typeof n!="function")throw new ei("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function hu(n,t){return n===t||n!==n&&t!==t}function pu(n){return null!=n&&yu(n.length)&&!gu(n)}function _u(n){return xu(n)&&pu(n)}function vu(n){if(!xu(n))return!1;var t=zt(n);return"[object Error]"==t||"[object DOMException]"==t||typeof n.message=="string"&&typeof n.name=="string"&&!wu(n)}function gu(n){return!!bu(n)&&(n=zt(n),"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function du(n){return typeof n=="number"&&n==Ou(n)}function yu(n){return typeof n=="number"&&-1<n&&0==n%1&&9007199254740991>=n}function bu(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function xu(n){return null!=n&&typeof n=="object"}function ju(n){return typeof n=="number"||xu(n)&&"[object Number]"==zt(n)}function wu(n){return!(!xu(n)||"[object Object]"!=zt(n))&&(n=bi(n),null===n||(n=ci.call(n,"constructor")&&n.constructor,typeof n=="function"&&n instanceof n&&fi.call(n)==hi))}function mu(n){return typeof n=="string"||!af(n)&&xu(n)&&"[object String]"==zt(n)}function Au(n){return typeof n=="symbol"||xu(n)&&"[object Symbol]"==zt(n)}function ku(n){if(!n)return[];if(pu(n))return mu(n)?$(n):Mr(n);if(Ai&&n[Ai]){n=n[Ai]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return t=yo(n),("[object Map]"==t?L:"[object Set]"==t?D:Du)(n)}function Eu(n){return n?(n=Iu(n),n===N||n===-N?1.7976931348623157e308*(0>n?-1:1):n===n?n:0):0===n?n:0}function Ou(n){n=Eu(n);var t=n%1;return n===n?t?n-t:n:0}function Su(n){return n?gt(Ou(n),0,4294967295):0}function Iu(n){if(typeof n=="number")return n;if(Au(n))return P;if(bu(n)&&(n=typeof n.valueOf=="function"?n.valueOf():n,n=bu(n)?n+"":n),typeof n!="string")return 0===n?n:+n;n=n.replace(cn,"");var t=bn.test(n);return t||jn.test(n)?Fn(n.slice(2),t?2:8):yn.test(n)?P:+n}function Ru(n){return Tr(n,Uu(n))}function zu(n){return null==n?"":jr(n)}function Wu(n,t,r){return n=null==n?F:It(n,t),n===F?r:n}function Bu(n,t){return null!=n&&ke(n,t,Lt)}function Lu(n){return pu(n)?Gn(n):Ht(n)}function Uu(n){if(pu(n))n=Gn(n,!0);else if(bu(n)){var t,r=Le(n),e=[];for(t in n)("constructor"!=t||!r&&ci.call(n,t))&&e.push(t);n=e}else{if(t=[],null!=n)for(r in ni(n))t.push(r);n=t}return n}function Cu(n,t){if(null==n)return{};var r=l(ye(n),function(n){return[n]});return t=je(t),ur(n,r,function(n,r){return t(n,r[0])})}function Du(n){return null==n?[]:I(n,Lu(n))}function Mu(n){return Nf(zu(n).toLowerCase())}function Tu(n){return(n=zu(n))&&n.replace(mn,rt).replace(Rn,"")}function $u(n,t,r){return n=zu(n),t=r?F:t,t===F?Ln.test(n)?n.match(Wn)||[]:n.match(_n)||[]:n.match(t)||[]}function Fu(n){return function(){return n}}function Nu(n){return n}function Pu(n){return Gt(typeof n=="function"?n:dt(n,1))}function Zu(n,t,r){var e=Lu(t),i=St(t,e);null!=r||bu(t)&&(i.length||!e.length)||(r=t,t=n,n=this,i=St(t,Lu(t)));var o=!(bu(r)&&"chain"in r&&!r.chain),f=gu(n);return u(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Mr(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,s([this.value()],arguments))})}),n}function qu(){}function Vu(n){return We(n)?j($e(n)):ir(n)}function Ku(){return[]}function Gu(){return!1}En=null==En?Zn:it.defaults(Zn.Object(),En,it.pick(Zn,Un));var Hu=En.Array,Ju=En.Date,Yu=En.Error,Qu=En.Function,Xu=En.Math,ni=En.Object,ti=En.RegExp,ri=En.String,ei=En.TypeError,ui=Hu.prototype,ii=ni.prototype,oi=En["__core-js_shared__"],fi=Qu.prototype.toString,ci=ii.hasOwnProperty,ai=0,li=function(){var n=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),si=ii.toString,hi=fi.call(ni),pi=Zn._,_i=ti("^"+fi.call(ci).replace(on,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vi=Kn?En.Buffer:F,gi=En.Symbol,di=En.Uint8Array,yi=vi?vi.f:F,bi=U(ni.getPrototypeOf,ni),xi=ni.create,ji=ii.propertyIsEnumerable,wi=ui.splice,mi=gi?gi.isConcatSpreadable:F,Ai=gi?gi.iterator:F,ki=gi?gi.toStringTag:F,Ei=function(){try{var n=Ae(ni,"defineProperty");return n({},"",{}),n}catch(n){}}(),Oi=En.clearTimeout!==Zn.clearTimeout&&En.clearTimeout,Si=Ju&&Ju.now!==Zn.Date.now&&Ju.now,Ii=En.setTimeout!==Zn.setTimeout&&En.setTimeout,Ri=Xu.ceil,zi=Xu.floor,Wi=ni.getOwnPropertySymbols,Bi=vi?vi.isBuffer:F,Li=En.isFinite,Ui=ui.join,Ci=U(ni.keys,ni),Di=Xu.max,Mi=Xu.min,Ti=Ju.now,$i=En.parseInt,Fi=Xu.random,Ni=ui.reverse,Pi=Ae(En,"DataView"),Zi=Ae(En,"Map"),qi=Ae(En,"Promise"),Vi=Ae(En,"Set"),Ki=Ae(En,"WeakMap"),Gi=Ae(ni,"create"),Hi=Ki&&new Ki,Ji={},Yi=Fe(Pi),Qi=Fe(Zi),Xi=Fe(qi),no=Fe(Vi),to=Fe(Ki),ro=gi?gi.prototype:F,eo=ro?ro.valueOf:F,uo=ro?ro.toString:F,io=function(){function n(){}return function(t){return bu(t)?xi?xi(t):(n.prototype=t,t=new n,n.prototype=F,t):{}}}();On.templateSettings={escape:Q,evaluate:X,interpolate:nn,variable:"",imports:{_:On}},On.prototype=Sn.prototype,On.prototype.constructor=On,zn.prototype=io(Sn.prototype),zn.prototype.constructor=zn,Mn.prototype=io(Sn.prototype),Mn.prototype.constructor=Mn,Tn.prototype.clear=function(){this.__data__=Gi?Gi(null):{},this.size=0},Tn.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},Tn.prototype.get=function(n){var t=this.__data__;return Gi?(n=t[n],"__lodash_hash_undefined__"===n?F:n):ci.call(t,n)?t[n]:F},Tn.prototype.has=function(n){var t=this.__data__;return Gi?t[n]!==F:ci.call(t,n)},Tn.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Gi&&t===F?"__lodash_hash_undefined__":t,this},Nn.prototype.clear=function(){this.__data__=[],this.size=0},Nn.prototype.delete=function(n){var t=this.__data__;return n=lt(t,n),!(0>n)&&(n==t.length-1?t.pop():wi.call(t,n,1),--this.size,!0)},Nn.prototype.get=function(n){var t=this.__data__;return n=lt(t,n),0>n?F:t[n][1]},Nn.prototype.has=function(n){return-1<lt(this.__data__,n)},Nn.prototype.set=function(n,t){var r=this.__data__,e=lt(r,n);return 0>e?(++this.size,r.push([n,t])):r[e][1]=t,this},Pn.prototype.clear=function(){this.size=0,this.__data__={hash:new Tn,map:new(Zi||Nn),string:new Tn}},Pn.prototype.delete=function(n){return n=we(this,n).delete(n),this.size-=n?1:0,n},Pn.prototype.get=function(n){return we(this,n).get(n)},Pn.prototype.has=function(n){return we(this,n).has(n)},Pn.prototype.set=function(n,t){var r=we(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},qn.prototype.add=qn.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},qn.prototype.has=function(n){return this.__data__.has(n)},Vn.prototype.clear=function(){this.__data__=new Nn,this.size=0},Vn.prototype.delete=function(n){var t=this.__data__;return n=t.delete(n),this.size=t.size,n},Vn.prototype.get=function(n){return this.__data__.get(n)},Vn.prototype.has=function(n){return this.__data__.has(n)},Vn.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Nn){var e=r.__data__;if(!Zi||199>e.length)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Pn(e)}return r.set(n,t),this.size=r.size,this};var oo=Zr(Et),fo=Zr(Ot,!0),co=qr(),ao=qr(!0),lo=Hi?function(n,t){return Hi.set(n,t),n}:Nu,so=Ei?function(n,t){return Ei(n,"toString",{configurable:!0,enumerable:!1,value:Fu(t),writable:!0})}:Nu,ho=Oi||function(n){return Zn.clearTimeout(n)},po=Vi&&1/D(new Vi([,-0]))[1]==N?function(n){return new Vi(n)}:qu,_o=Hi?function(n){return Hi.get(n)}:qu,vo=Wi?function(n){return null==n?[]:(n=ni(n),f(Wi(n),function(t){return ji.call(n,t)}))}:Ku,go=Wi?function(n){for(var t=[];n;)s(t,vo(n)),n=bi(n);return t}:Ku,yo=zt;(Pi&&"[object DataView]"!=yo(new Pi(new ArrayBuffer(1)))||Zi&&"[object Map]"!=yo(new Zi)||qi&&"[object Promise]"!=yo(qi.resolve())||Vi&&"[object Set]"!=yo(new Vi)||Ki&&"[object WeakMap]"!=yo(new Ki))&&(yo=function(n){var t=zt(n);if(n=(n="[object Object]"==t?n.constructor:F)?Fe(n):"")switch(n){case Yi:return"[object DataView]";case Qi:return"[object Map]";case Xi:return"[object Promise]";case no:return"[object Set]";case to:return"[object WeakMap]"}return t});var bo=oi?gu:Gu,xo=Me(lo),jo=Ii||function(n,t){return Zn.setTimeout(n,t)},wo=Me(so),mo=function(n){n=lu(n,function(n){return 500===t.size&&t.clear(),n});var t=n.cache;return n}(function(n){var t=[];return en.test(n)&&t.push(""),n.replace(un,function(n,r,e,u){t.push(e?u.replace(vn,"$1"):r||n)}),t}),Ao=lr(function(n,t){return _u(n)?jt(n,kt(t,1,_u,!0)):[]}),ko=lr(function(n,t){var r=Ge(t);return _u(r)&&(r=F),_u(n)?jt(n,kt(t,1,_u,!0),je(r,2)):[]}),Eo=lr(function(n,t){var r=Ge(t);return _u(r)&&(r=F),_u(n)?jt(n,kt(t,1,_u,!0),F,r):[]}),Oo=lr(function(n){var t=l(n,Sr);return t.length&&t[0]===n[0]?Ut(t):[]}),So=lr(function(n){var t=Ge(n),r=l(n,Sr);return t===Ge(r)?t=F:r.pop(),r.length&&r[0]===n[0]?Ut(r,je(t,2)):[]}),Io=lr(function(n){var t=Ge(n),r=l(n,Sr);return(t=typeof t=="function"?t:F)&&r.pop(),r.length&&r[0]===n[0]?Ut(r,F,t):[]}),Ro=lr(He),zo=ge(function(n,t){var r=null==n?0:n.length,e=vt(n,t);return fr(n,l(t,function(n){return Re(n,r)?+n:n}).sort(Ur)),e}),Wo=lr(function(n){return wr(kt(n,1,_u,!0))}),Bo=lr(function(n){var t=Ge(n);return _u(t)&&(t=F),wr(kt(n,1,_u,!0),je(t,2))}),Lo=lr(function(n){var t=Ge(n),t=typeof t=="function"?t:F;return wr(kt(n,1,_u,!0),F,t)}),Uo=lr(function(n,t){return _u(n)?jt(n,t):[]}),Co=lr(function(n){return Er(f(n,_u))}),Do=lr(function(n){var t=Ge(n);return _u(t)&&(t=F),Er(f(n,_u),je(t,2))}),Mo=lr(function(n){var t=Ge(n),t=typeof t=="function"?t:F;return Er(f(n,_u),F,t)}),To=lr(Ye),$o=lr(function(n){var t=n.length,t=1<t?n[t-1]:F,t=typeof t=="function"?(n.pop(),t):F;return Qe(n,t)}),Fo=ge(function(n){function t(t){return vt(t,n)}var r=n.length,e=r?n[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof Mn&&Re(e)?(u=u.slice(e,+e+(r?1:0)),u.__actions__.push({func:nu,args:[t],thisArg:F}),new zn(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(F),n})):this.thru(t)}),No=Nr(function(n,t,r){ci.call(n,r)?++n[r]:_t(n,r,1)}),Po=Yr(Ze),Zo=Yr(qe),qo=Nr(function(n,t,r){ci.call(n,r)?n[r].push(t):_t(n,r,[t])}),Vo=lr(function(n,t,e){var u=-1,i=typeof t=="function",o=pu(n)?Hu(n.length):[];return oo(n,function(n){o[++u]=i?r(t,n,e):Dt(n,t,e)}),o}),Ko=Nr(function(n,t,r){_t(n,r,t)}),Go=Nr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Ho=lr(function(n,t){if(null==n)return[];var r=t.length;return 1<r&&ze(n,t[0],t[1])?t=[]:2<r&&ze(t[0],t[1],t[2])&&(t=[t[0]]),rr(n,kt(t,1),[])}),Jo=Si||function(){return Zn.Date.now()},Yo=lr(function(n,t,r){var e=1;if(r.length)var u=C(r,xe(Yo)),e=32|e;return le(n,e,t,r,u)}),Qo=lr(function(n,t,r){var e=3;if(r.length)var u=C(r,xe(Qo)),e=32|e;return le(t,e,n,r,u)}),Xo=lr(function(n,t){return xt(n,1,t)}),nf=lr(function(n,t,r){return xt(n,Iu(t)||0,r)});lu.Cache=Pn;var tf=lr(function(n,t){t=1==t.length&&af(t[0])?l(t[0],S(je())):l(kt(t,1),S(je()));var e=t.length;return lr(function(u){for(var i=-1,o=Mi(u.length,e);++i<o;)u[i]=t[i].call(this,u[i]);return r(n,this,u)})}),rf=lr(function(n,t){return le(n,32,F,t,C(t,xe(rf)))}),ef=lr(function(n,t){return le(n,64,F,t,C(t,xe(ef)))}),uf=ge(function(n,t){return le(n,256,F,F,F,t)}),of=oe(Wt),ff=oe(function(n,t){return n>=t}),cf=Mt(function(){return arguments}())?Mt:function(n){return xu(n)&&ci.call(n,"callee")&&!ji.call(n,"callee")},af=Hu.isArray,lf=Hn?S(Hn):Tt,sf=Bi||Gu,hf=Jn?S(Jn):$t,pf=Yn?S(Yn):Nt,_f=Qn?S(Qn):qt,vf=Xn?S(Xn):Vt,gf=nt?S(nt):Kt,df=oe(Jt),yf=oe(function(n,t){return n<=t}),bf=Pr(function(n,t){if(Le(t)||pu(t))Tr(t,Lu(t),n);else for(var r in t)ci.call(t,r)&&at(n,r,t[r])}),xf=Pr(function(n,t){Tr(t,Uu(t),n)}),jf=Pr(function(n,t,r,e){Tr(t,Uu(t),n,e)}),wf=Pr(function(n,t,r,e){Tr(t,Lu(t),n,e)}),mf=ge(vt),Af=lr(function(n){return n.push(F,se),r(jf,F,n)}),kf=lr(function(n){return n.push(F,he),r(Rf,F,n)}),Ef=ne(function(n,t,r){n[t]=r},Fu(Nu)),Of=ne(function(n,t,r){ci.call(n,t)?n[t].push(r):n[t]=[r]},je),Sf=lr(Dt),If=Pr(function(n,t,r){nr(n,t,r)}),Rf=Pr(function(n,t,r,e){nr(n,t,r,e)}),zf=ge(function(n,t){var r={};if(null==n)return r;var e=!1;t=l(t,function(t){return t=Rr(t,n),e||(e=1<t.length),t}),Tr(n,ye(n),r),e&&(r=dt(r,7,pe));for(var u=t.length;u--;)mr(r,t[u]);return r}),Wf=ge(function(n,t){return null==n?{}:er(n,t)}),Bf=ae(Lu),Lf=ae(Uu),Uf=Gr(function(n,t,r){return t=t.toLowerCase(),n+(r?Mu(t):t)}),Cf=Gr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Df=Gr(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Mf=Kr("toLowerCase"),Tf=Gr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),$f=Gr(function(n,t,r){return n+(r?" ":"")+Nf(t)}),Ff=Gr(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Nf=Kr("toUpperCase"),Pf=lr(function(n,t){try{return r(n,F,t)}catch(n){return vu(n)?n:new Yu(n)}}),Zf=ge(function(n,t){return u(t,function(t){t=$e(t),_t(n,t,Yo(n[t],n))}),n}),qf=Qr(),Vf=Qr(!0),Kf=lr(function(n,t){return function(r){return Dt(r,n,t)}}),Gf=lr(function(n,t){return function(r){return Dt(n,r,t)}}),Hf=re(l),Jf=re(o),Yf=re(_),Qf=ie(),Xf=ie(!0),nc=te(function(n,t){return n+t},0),tc=ce("ceil"),rc=te(function(n,t){return n/t},1),ec=ce("floor"),uc=te(function(n,t){return n*t},1),ic=ce("round"),oc=te(function(n,t){return n-t},0);return On.after=function(n,t){if(typeof t!="function")throw new ei("Expected a function");return n=Ou(n),function(){if(1>--n)return t.apply(this,arguments)}},On.ary=iu,On.assign=bf,On.assignIn=xf,On.assignInWith=jf,On.assignWith=wf,On.at=mf,On.before=ou,On.bind=Yo,On.bindAll=Zf,On.bindKey=Qo,On.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return af(n)?n:[n]},On.chain=Xe,On.chunk=function(n,t,r){if(t=(r?ze(n,t,r):t===F)?1:Di(Ou(t),0),r=null==n?0:n.length,!r||1>t)return[];for(var e=0,u=0,i=Hu(Ri(r/t));e<r;)i[u++]=vr(n,e,e+=t);return i},On.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},On.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Hu(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return s(af(r)?Mr(r):[r],kt(t,1))},On.cond=function(n){var t=null==n?0:n.length,e=je();return n=t?l(n,function(n){if("function"!=typeof n[1])throw new ei("Expected a function");return[e(n[0]),n[1]]}):[],lr(function(e){for(var u=-1;++u<t;){var i=n[u];if(r(i[0],this,e))return r(i[1],this,e)}})},On.conforms=function(n){return yt(dt(n,1))},On.constant=Fu,On.countBy=No,On.create=function(n,t){var r=io(n);return null==t?r:ht(r,t)},On.curry=fu,On.curryRight=cu,On.debounce=au,On.defaults=Af,On.defaultsDeep=kf,On.defer=Xo,On.delay=nf,On.difference=Ao,On.differenceBy=ko,On.differenceWith=Eo,On.drop=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===F?1:Ou(t),vr(n,0>t?0:t,e)):[]},On.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===F?1:Ou(t),t=e-t,vr(n,0,0>t?0:t)):[]},On.dropRightWhile=function(n,t){return n&&n.length?Ar(n,je(t,3),!0,!0):[]},On.dropWhile=function(n,t){return n&&n.length?Ar(n,je(t,3),!0):[]},On.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&typeof r!="number"&&ze(n,t,r)&&(r=0,e=u),u=n.length,r=Ou(r),0>r&&(r=-r>u?0:u+r),e=e===F||e>u?u:Ou(e),0>e&&(e+=u),e=r>e?0:Su(e);r<e;)n[r++]=t;return n},On.filter=function(n,t){return(af(n)?f:At)(n,je(t,3))},On.flatMap=function(n,t){return kt(uu(n,t),1)},On.flatMapDeep=function(n,t){return kt(uu(n,t),N)},On.flatMapDepth=function(n,t,r){return r=r===F?1:Ou(r),kt(uu(n,t),r)},On.flatten=Ve,On.flattenDeep=function(n){return(null==n?0:n.length)?kt(n,N):[]},On.flattenDepth=function(n,t){return null!=n&&n.length?(t=t===F?1:Ou(t),kt(n,t)):[]},On.flip=function(n){return le(n,512)},On.flow=qf,On.flowRight=Vf,On.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},On.functions=function(n){return null==n?[]:St(n,Lu(n))},On.functionsIn=function(n){return null==n?[]:St(n,Uu(n))},On.groupBy=qo,On.initial=function(n){return(null==n?0:n.length)?vr(n,0,-1):[]},On.intersection=Oo,On.intersectionBy=So,On.intersectionWith=Io,On.invert=Ef,On.invertBy=Of,On.invokeMap=Vo,On.iteratee=Pu,On.keyBy=Ko,On.keys=Lu,On.keysIn=Uu,On.map=uu,On.mapKeys=function(n,t){var r={};return t=je(t,3),Et(n,function(n,e,u){_t(r,t(n,e,u),n)}),r},On.mapValues=function(n,t){var r={};return t=je(t,3),Et(n,function(n,e,u){_t(r,e,t(n,e,u))}),r},On.matches=function(n){return Qt(dt(n,1))},On.matchesProperty=function(n,t){return Xt(n,dt(t,1))},On.memoize=lu,On.merge=If,On.mergeWith=Rf,On.method=Kf,On.methodOf=Gf,On.mixin=Zu,On.negate=su,On.nthArg=function(n){return n=Ou(n),lr(function(t){return tr(t,n)})},On.omit=zf,On.omitBy=function(n,t){return Cu(n,su(je(t)))},On.once=function(n){return ou(2,n)},On.orderBy=function(n,t,r,e){return null==n?[]:(af(t)||(t=null==t?[]:[t]),r=e?F:r,af(r)||(r=null==r?[]:[r]),rr(n,t,r))},On.over=Hf,On.overArgs=tf,On.overEvery=Jf,On.overSome=Yf,On.partial=rf,On.partialRight=ef,On.partition=Go,On.pick=Wf,On.pickBy=Cu,On.property=Vu,On.propertyOf=function(n){return function(t){return null==n?F:It(n,t)}},On.pull=Ro,On.pullAll=He,On.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?or(n,t,je(r,2)):n},On.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?or(n,t,F,r):n},On.pullAt=zo,On.range=Qf,On.rangeRight=Xf,On.rearg=uf,On.reject=function(n,t){return(af(n)?f:At)(n,su(je(t,3)))},On.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=je(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return fr(n,u),r},On.rest=function(n,t){if(typeof n!="function")throw new ei("Expected a function");return t=t===F?t:Ou(t),lr(n,t)},On.reverse=Je,On.sampleSize=function(n,t,r){return t=(r?ze(n,t,r):t===F)?1:Ou(t),(af(n)?ot:hr)(n,t)},On.set=function(n,t,r){return null==n?n:pr(n,t,r)},On.setWith=function(n,t,r,e){return e=typeof e=="function"?e:F,null==n?n:pr(n,t,r,e)},On.shuffle=function(n){return(af(n)?ft:_r)(n)},On.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r&&typeof r!="number"&&ze(n,t,r)?(t=0,r=e):(t=null==t?0:Ou(t),r=r===F?e:Ou(r)),vr(n,t,r)):[]},On.sortBy=Ho,On.sortedUniq=function(n){return n&&n.length?br(n):[]},On.sortedUniqBy=function(n,t){return n&&n.length?br(n,je(t,2)):[]},On.split=function(n,t,r){return r&&typeof r!="number"&&ze(n,t,r)&&(t=r=F),r=r===F?4294967295:r>>>0,r?(n=zu(n))&&(typeof t=="string"||null!=t&&!_f(t))&&(t=jr(t),!t&&Bn.test(n))?zr($(n),0,r):n.split(t,r):[]},On.spread=function(n,t){if(typeof n!="function")throw new ei("Expected a function");return t=null==t?0:Di(Ou(t),0),lr(function(e){var u=e[t];return e=zr(e,0,t),u&&s(e,u),r(n,this,e)})},On.tail=function(n){var t=null==n?0:n.length;return t?vr(n,1,t):[]},On.take=function(n,t,r){return n&&n.length?(t=r||t===F?1:Ou(t),vr(n,0,0>t?0:t)):[]},On.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===F?1:Ou(t),t=e-t,vr(n,0>t?0:t,e)):[]},On.takeRightWhile=function(n,t){return n&&n.length?Ar(n,je(t,3),!1,!0):[]},On.takeWhile=function(n,t){return n&&n.length?Ar(n,je(t,3)):[]},On.tap=function(n,t){return t(n),n},On.throttle=function(n,t,r){var e=!0,u=!0;if(typeof n!="function")throw new ei("Expected a function");return bu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),au(n,t,{leading:e,maxWait:t,trailing:u})},On.thru=nu,On.toArray=ku,On.toPairs=Bf,On.toPairsIn=Lf,On.toPath=function(n){return af(n)?l(n,$e):Au(n)?[n]:Mr(mo(zu(n)))},On.toPlainObject=Ru,On.transform=function(n,t,r){var e=af(n),i=e||sf(n)||gf(n);if(t=je(t,4),null==r){var o=n&&n.constructor;r=i?e?new o:[]:bu(n)&&gu(o)?io(bi(n)):{}}return(i?u:Et)(n,function(n,e,u){return t(r,n,e,u)}),r},On.unary=function(n){return iu(n,1)},On.union=Wo,On.unionBy=Bo,On.unionWith=Lo,On.uniq=function(n){return n&&n.length?wr(n):[]},On.uniqBy=function(n,t){return n&&n.length?wr(n,je(t,2)):[]},On.uniqWith=function(n,t){return t=typeof t=="function"?t:F,n&&n.length?wr(n,F,t):[]},On.unset=function(n,t){return null==n||mr(n,t)},On.unzip=Ye,On.unzipWith=Qe,On.update=function(n,t,r){return null==n?n:pr(n,t,Ir(r)(It(n,t)),void 0)},On.updateWith=function(n,t,r,e){return e=typeof e=="function"?e:F,null!=n&&(n=pr(n,t,Ir(r)(It(n,t)),e)),n},On.values=Du,On.valuesIn=function(n){return null==n?[]:I(n,Uu(n))},On.without=Uo,On.words=$u,On.wrap=function(n,t){return rf(Ir(t),n)},On.xor=Co,On.xorBy=Do,On.xorWith=Mo,On.zip=To,On.zipObject=function(n,t){return Or(n||[],t||[],at)},On.zipObjectDeep=function(n,t){return Or(n||[],t||[],pr)},On.zipWith=$o,On.entries=Bf,On.entriesIn=Lf,On.extend=xf,On.extendWith=jf,Zu(On,On),On.add=nc,On.attempt=Pf,On.camelCase=Uf,On.capitalize=Mu,On.ceil=tc,On.clamp=function(n,t,r){return r===F&&(r=t,t=F),r!==F&&(r=Iu(r),r=r===r?r:0),t!==F&&(t=Iu(t),t=t===t?t:0),gt(Iu(n),t,r)},On.clone=function(n){return dt(n,4)},On.cloneDeep=function(n){return dt(n,5)},On.cloneDeepWith=function(n,t){return t=typeof t=="function"?t:F,dt(n,5,t)},On.cloneWith=function(n,t){return t=typeof t=="function"?t:F,dt(n,4,t)},On.conformsTo=function(n,t){return null==t||bt(n,t,Lu(t))},On.deburr=Tu,On.defaultTo=function(n,t){return null==n||n!==n?t:n},On.divide=rc,On.endsWith=function(n,t,r){n=zu(n),t=jr(t);var e=n.length,e=r=r===F?e:gt(Ou(r),0,e);return r-=t.length,0<=r&&n.slice(r,e)==t},On.eq=hu,On.escape=function(n){return(n=zu(n))&&Y.test(n)?n.replace(H,et):n},On.escapeRegExp=function(n){return(n=zu(n))&&fn.test(n)?n.replace(on,"\\$&"):n},On.every=function(n,t,r){var e=af(n)?o:wt;return r&&ze(n,t,r)&&(t=F),e(n,je(t,3))},On.find=Po,On.findIndex=Ze,On.findKey=function(n,t){return v(n,je(t,3),Et)},On.findLast=Zo,On.findLastIndex=qe,On.findLastKey=function(n,t){return v(n,je(t,3),Ot)},On.floor=ec,On.forEach=ru,On.forEachRight=eu,On.forIn=function(n,t){return null==n?n:co(n,je(t,3),Uu)},On.forInRight=function(n,t){return null==n?n:ao(n,je(t,3),Uu)},On.forOwn=function(n,t){return n&&Et(n,je(t,3))},On.forOwnRight=function(n,t){return n&&Ot(n,je(t,3))},On.get=Wu,On.gt=of,On.gte=ff,On.has=function(n,t){return null!=n&&ke(n,t,Bt)},On.hasIn=Bu,On.head=Ke,On.identity=Nu,On.includes=function(n,t,r,e){return n=pu(n)?n:Du(n),r=r&&!e?Ou(r):0,e=n.length,0>r&&(r=Di(e+r,0)),mu(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<d(n,t,r)},On.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Ou(r),0>r&&(r=Di(e+r,0)),d(n,t,r)):-1},On.inRange=function(n,t,r){return t=Eu(t),r===F?(r=t,t=0):r=Eu(r),n=Iu(n),n>=Mi(t,r)&&n<Di(t,r)},On.invoke=Sf,On.isArguments=cf,On.isArray=af,On.isArrayBuffer=lf,On.isArrayLike=pu,On.isArrayLikeObject=_u,On.isBoolean=function(n){return!0===n||!1===n||xu(n)&&"[object Boolean]"==zt(n)},On.isBuffer=sf,On.isDate=hf,On.isElement=function(n){return xu(n)&&1===n.nodeType&&!wu(n)},On.isEmpty=function(n){if(null==n)return!0;if(pu(n)&&(af(n)||typeof n=="string"||typeof n.splice=="function"||sf(n)||gf(n)||cf(n)))return!n.length;var t=yo(n);if("[object Map]"==t||"[object Set]"==t)return!n.size;if(Le(n))return!Ht(n).length;for(var r in n)if(ci.call(n,r))return!1;return!0},On.isEqual=function(n,t){return Ft(n,t)},On.isEqualWith=function(n,t,r){var e=(r=typeof r=="function"?r:F)?r(n,t):F;return e===F?Ft(n,t,F,r):!!e},On.isError=vu,On.isFinite=function(n){return typeof n=="number"&&Li(n)},On.isFunction=gu,On.isInteger=du,On.isLength=yu,On.isMap=pf,On.isMatch=function(n,t){return n===t||Pt(n,t,me(t))},On.isMatchWith=function(n,t,r){return r=typeof r=="function"?r:F,Pt(n,t,me(t),r)},On.isNaN=function(n){return ju(n)&&n!=+n},On.isNative=function(n){if(bo(n))throw new Yu("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Zt(n)},On.isNil=function(n){return null==n},On.isNull=function(n){return null===n},On.isNumber=ju,On.isObject=bu,On.isObjectLike=xu,On.isPlainObject=wu,On.isRegExp=_f,On.isSafeInteger=function(n){return du(n)&&-9007199254740991<=n&&9007199254740991>=n},On.isSet=vf,On.isString=mu,On.isSymbol=Au,On.isTypedArray=gf,On.isUndefined=function(n){return n===F},On.isWeakMap=function(n){return xu(n)&&"[object WeakMap]"==yo(n)},On.isWeakSet=function(n){return xu(n)&&"[object WeakSet]"==zt(n)},On.join=function(n,t){return null==n?"":Ui.call(n,t)},On.kebabCase=Cf,On.last=Ge,On.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==F&&(u=Ou(r),u=0>u?Di(e+u,0):Mi(u,e-1)),t===t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=g(n,b,u,!0);return n},On.lowerCase=Df,On.lowerFirst=Mf,On.lt=df,On.lte=yf,On.max=function(n){return n&&n.length?mt(n,Nu,Wt):F},On.maxBy=function(n,t){return n&&n.length?mt(n,je(t,2),Wt):F},On.mean=function(n){return x(n,Nu)},On.meanBy=function(n,t){return x(n,je(t,2))},On.min=function(n){return n&&n.length?mt(n,Nu,Jt):F},On.minBy=function(n,t){return n&&n.length?mt(n,je(t,2),Jt):F},On.stubArray=Ku,On.stubFalse=Gu,On.stubObject=function(){return{}},On.stubString=function(){return""},On.stubTrue=function(){return!0},On.multiply=uc,On.nth=function(n,t){return n&&n.length?tr(n,Ou(t)):F},On.noConflict=function(){return Zn._===this&&(Zn._=pi),this},On.noop=qu,On.now=Jo,On.pad=function(n,t,r){n=zu(n);var e=(t=Ou(t))?T(n):0;return!t||e>=t?n:(t=(t-e)/2,ee(zi(t),r)+n+ee(Ri(t),r))},On.padEnd=function(n,t,r){n=zu(n);var e=(t=Ou(t))?T(n):0;return t&&e<t?n+ee(t-e,r):n},On.padStart=function(n,t,r){n=zu(n);var e=(t=Ou(t))?T(n):0;return t&&e<t?ee(t-e,r)+n:n},On.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),$i(zu(n).replace(an,""),t||0)},On.random=function(n,t,r){if(r&&typeof r!="boolean"&&ze(n,t,r)&&(t=r=F),r===F&&(typeof t=="boolean"?(r=t,t=F):typeof n=="boolean"&&(r=n,n=F)),n===F&&t===F?(n=0,t=1):(n=Eu(n),t===F?(t=n,n=0):t=Eu(t)),n>t){var e=n;n=t,t=e}return r||n%1||t%1?(r=Fi(),Mi(n+r*(t-n+$n("1e-"+((r+"").length-1))),t)):cr(n,t)},On.reduce=function(n,t,r){var e=af(n)?h:m,u=3>arguments.length;return e(n,je(t,4),r,u,oo)},On.reduceRight=function(n,t,r){var e=af(n)?p:m,u=3>arguments.length;return e(n,je(t,4),r,u,fo)},On.repeat=function(n,t,r){return t=(r?ze(n,t,r):t===F)?1:Ou(t),ar(zu(n),t)},On.replace=function(){var n=arguments,t=zu(n[0]);return 3>n.length?t:t.replace(n[1],n[2])},On.result=function(n,t,r){t=Rr(t,n);var e=-1,u=t.length;for(u||(u=1,n=F);++e<u;){var i=null==n?F:n[$e(t[e])];i===F&&(e=u,i=r),n=gu(i)?i.call(n):i}return n},On.round=ic,On.runInContext=w,On.sample=function(n){return(af(n)?tt:sr)(n)},On.size=function(n){if(null==n)return 0;if(pu(n))return mu(n)?T(n):n.length;var t=yo(n);return"[object Map]"==t||"[object Set]"==t?n.size:Ht(n).length},On.snakeCase=Tf,On.some=function(n,t,r){var e=af(n)?_:gr;return r&&ze(n,t,r)&&(t=F),e(n,je(t,3))},On.sortedIndex=function(n,t){return dr(n,t)},On.sortedIndexBy=function(n,t,r){return yr(n,t,je(r,2))},On.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=dr(n,t);if(e<r&&hu(n[e],t))return e}return-1},On.sortedLastIndex=function(n,t){return dr(n,t,!0)},On.sortedLastIndexBy=function(n,t,r){return yr(n,t,je(r,2),!0)},On.sortedLastIndexOf=function(n,t){if(null==n?0:n.length){var r=dr(n,t,!0)-1;if(hu(n[r],t))return r}return-1},On.startCase=$f,On.startsWith=function(n,t,r){return n=zu(n),r=null==r?0:gt(Ou(r),0,n.length),t=jr(t),n.slice(r,r+t.length)==t},On.subtract=oc,On.sum=function(n){return n&&n.length?k(n,Nu):0},On.sumBy=function(n,t){return n&&n.length?k(n,je(t,2)):0},On.template=function(n,t,r){var e=On.templateSettings;r&&ze(n,t,r)&&(t=F),n=zu(n),t=jf({},t,e,se),r=jf({},t.imports,e.imports,se);var u,i,o=Lu(r),f=I(r,o),c=0;r=t.interpolate||An;var a="__p+='";r=ti((t.escape||An).source+"|"+r.source+"|"+(r===nn?gn:An).source+"|"+(t.evaluate||An).source+"|$","g");var l="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,o,f,l){return e||(e=o),a+=n.slice(c,l).replace(kn,B),r&&(u=!0,a+="'+__e("+r+")+'"),f&&(i=!0,a+="';"+f+";\n__p+='"),e&&(a+="'+((__t=("+e+"))==null?'':__t)+'"),c=l+t.length,t}),a+="';",(t=t.variable)||(a="with(obj){"+a+"}"),a=(i?a.replace(q,""):a).replace(V,"$1").replace(K,"$1;"),a="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+a+"return __p}",t=Pf(function(){return Qu(o,l+"return "+a).apply(F,f)}),t.source=a,vu(t))throw t;return t},On.times=function(n,t){if(n=Ou(n),1>n||9007199254740991<n)return[];var r=4294967295,e=Mi(n,4294967295);for(t=je(t),n-=4294967295,e=E(e,t);++r<n;)t(r);return e},On.toFinite=Eu,On.toInteger=Ou,On.toLength=Su,On.toLower=function(n){return zu(n).toLowerCase()},On.toNumber=Iu,On.toSafeInteger=function(n){return n?gt(Ou(n),-9007199254740991,9007199254740991):0===n?n:0},On.toString=zu,On.toUpper=function(n){return zu(n).toUpperCase()},On.trim=function(n,t,r){return(n=zu(n))&&(r||t===F)?n.replace(cn,""):n&&(t=jr(t))?(n=$(n),r=$(t),t=z(n,r),r=W(n,r)+1,zr(n,t,r).join("")):n},On.trimEnd=function(n,t,r){return(n=zu(n))&&(r||t===F)?n.replace(ln,""):n&&(t=jr(t))?(n=$(n),t=W(n,$(t))+1,zr(n,0,t).join("")):n},On.trimStart=function(n,t,r){return(n=zu(n))&&(r||t===F)?n.replace(an,""):n&&(t=jr(t))?(n=$(n),t=z(n,$(t)),zr(n,t).join("")):n},On.truncate=function(n,t){var r=30,e="...";if(bu(t))var u="separator"in t?t.separator:u,r="length"in t?Ou(t.length):r,e="omission"in t?jr(t.omission):e;n=zu(n);var i=n.length;if(Bn.test(n))var o=$(n),i=o.length;if(r>=i)return n;if(i=r-T(e),1>i)return e;if(r=o?zr(o,0,i).join(""):n.slice(0,i),u===F)return r+e;if(o&&(i+=r.length-i),_f(u)){if(n.slice(i).search(u)){var f=r;for(u.global||(u=ti(u.source,zu(dn.exec(u))+"g")),u.lastIndex=0;o=u.exec(f);)var c=o.index;r=r.slice(0,c===F?i:c)}}else n.indexOf(jr(u),i)!=i&&(u=r.lastIndexOf(u),-1<u&&(r=r.slice(0,u)));return r+e},On.unescape=function(n){return(n=zu(n))&&J.test(n)?n.replace(G,ut):n},On.uniqueId=function(n){var t=++ai;return zu(n)+t},On.upperCase=Ff,On.upperFirst=Nf,On.each=ru,On.eachRight=eu,On.first=Ke,Zu(On,function(){var n={};return Et(On,function(t,r){ci.call(On.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),On.VERSION="4.17.4",u("bind bindKey curry curryRight partial partialRight".split(" "),function(n){On[n].placeholder=On}),u(["drop","take"],function(n,t){Mn.prototype[n]=function(r){r=r===F?1:Di(Ou(r),0);var e=this.__filtered__&&!t?new Mn(this):this.clone();return e.__filtered__?e.__takeCount__=Mi(r,e.__takeCount__):e.__views__.push({size:Mi(r,4294967295),type:n+(0>e.__dir__?"Right":"")}),e},Mn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),u(["filter","map","takeWhile"],function(n,t){var r=t+1,e=1==r||3==r;Mn.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:je(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),u(["head","last"],function(n,t){var r="take"+(t?"Right":"");Mn.prototype[n]=function(){return this[r](1).value()[0]}}),u(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Mn.prototype[n]=function(){return this.__filtered__?new Mn(this):this[r](1)}}),Mn.prototype.compact=function(){return this.filter(Nu)},Mn.prototype.find=function(n){return this.filter(n).head()},Mn.prototype.findLast=function(n){return this.reverse().find(n)},Mn.prototype.invokeMap=lr(function(n,t){return typeof n=="function"?new Mn(this):this.map(function(r){return Dt(r,n,t)})}),Mn.prototype.reject=function(n){return this.filter(su(je(n)))},Mn.prototype.slice=function(n,t){n=Ou(n);var r=this;return r.__filtered__&&(0<n||0>t)?new Mn(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==F&&(t=Ou(t),r=0>t?r.dropRight(-t):r.take(t-n)),r)},Mn.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Mn.prototype.toArray=function(){return this.take(4294967295)},Et(Mn.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=On[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(On.prototype[t]=function(){function t(n){return n=u.apply(On,s([n],f)),e&&h?n[0]:n}var o=this.__wrapped__,f=e?[1]:arguments,c=o instanceof Mn,a=f[0],l=c||af(o);l&&r&&typeof a=="function"&&1!=a.length&&(c=l=!1);var h=this.__chain__,p=!!this.__actions__.length,a=i&&!h,c=c&&!p;return!i&&l?(o=c?o:new Mn(this),o=n.apply(o,f),o.__actions__.push({func:nu,args:[t],thisArg:F}),new zn(o,h)):a&&c?n.apply(this,f):(o=this.thru(t),a?e?o.value()[0]:o.value():o)})}),u("pop push shift sort splice unshift".split(" "),function(n){var t=ui[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);On.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(af(u)?u:[],n)}return this[r](function(r){return t.apply(af(r)?r:[],n)})}}),Et(Mn.prototype,function(n,t){var r=On[t];if(r){var e=r.name+"";(Ji[e]||(Ji[e]=[])).push({name:t,func:r})}}),Ji[Xr(F,2).name]=[{name:"wrapper",func:F}],Mn.prototype.clone=function(){var n=new Mn(this.__wrapped__);return n.__actions__=Mr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Mr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Mr(this.__views__),n},Mn.prototype.reverse=function(){if(this.__filtered__){var n=new Mn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},Mn.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=af(t),u=0>r,i=e?t.length:0;n=i;for(var o=this.__views__,f=0,c=-1,a=o.length;++c<a;){var l=o[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=Mi(n,f+s);break;case"takeRight":f=Di(f,n-s)}}if(n={start:f,end:n},o=n.start,f=n.end,n=f-o,o=u?f:o-1,f=this.__iteratees__,c=f.length,a=0,l=Mi(n,this.__takeCount__),!e||!u&&i==n&&l==n)return kr(t,this.__actions__);e=[];n:for(;n--&&a<l;){for(o+=r,u=-1,i=t[o];++u<c;){var h=f[u],s=h.type,h=(0,h.iteratee)(i);if(2==s)i=h;else if(!h){if(1==s)continue n;break n}}e[a++]=i}return e},On.prototype.at=Fo,On.prototype.chain=function(){return Xe(this)},On.prototype.commit=function(){return new zn(this.value(),this.__chain__)},On.prototype.next=function(){this.__values__===F&&(this.__values__=ku(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?F:this.__values__[this.__index__++]}},On.prototype.plant=function(n){for(var t,r=this;r instanceof Sn;){var e=Pe(r);e.__index__=0,e.__values__=F,t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},On.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Mn?(this.__actions__.length&&(n=new Mn(this)),n=n.reverse(),n.__actions__.push({func:nu,args:[Je],thisArg:F}),new zn(n,this.__chain__)):this.thru(Je)},On.prototype.toJSON=On.prototype.valueOf=On.prototype.value=function(){return kr(this.__wrapped__,this.__actions__)},On.prototype.first=On.prototype.head,Ai&&(On.prototype[Ai]=tu),On}();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Zn._=it,define(function(){return it})):Vn?((Vn.exports=it)._=it,qn._=it):Zn._=it}).call(this);_.findWhere=_.find;_.where=_.filter;_.pluck=_.map;_.contains=_.includes;"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Emitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=!0,a=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){s.value.apply(this,i)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++){if(n[i]===t){n.splice(i,1);break}}return this}}]),e}(),Dropzone=function(){function C(e,t){var n,i,r;if(_classCallCheck(this,C),(n=_possibleConstructorReturn(this,_getPrototypeOf(C).call(this))).element=e,n.version=C.version,n.defaultOptions.previewTemplate=n.defaultOptions.previewTemplate.replace(/\n*/g,""),n.clickableElements=[],n.listeners=[],n.files=[],"string"==typeof n.element&&(n.element=document.querySelector(n.element)),!n.element||null==n.element.nodeType)throw new Error("Invalid dropzone element.");if(n.element.dropzone)throw new Error("Dropzone already attached.");C.instances.push(_assertThisInitialized(n)),n.element.dropzone=_assertThisInitialized(n);var o=null!=(r=C.optionsForElement(n.element))?r:{};if(n.options=C.extend({},n.defaultOptions,o,null!=t?t:{}),n.options.forceFallback||!C.isBrowserSupported())return _possibleConstructorReturn(n,n.options.fallback.call(_assertThisInitialized(n)));if(null==n.options.url&&(n.options.url=n.element.getAttribute("action")),!n.options.url)throw new Error("No URL provided.");if(n.options.acceptedFiles&&n.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(n.options.uploadMultiple&&n.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return n.options.acceptedMimeTypes&&(n.options.acceptedFiles=n.options.acceptedMimeTypes,delete n.options.acceptedMimeTypes),null!=n.options.renameFilename&&(n.options.renameFile=function(e){return n.options.renameFilename.call(_assertThisInitialized(n),e.name,e)}),n.options.method=n.options.method.toUpperCase(),(i=n.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==n.options.previewsContainer&&(n.options.previewsContainer?n.previewsContainer=C.getElement(n.options.previewsContainer,"previewsContainer"):n.previewsContainer=n.element),n.options.clickable&&(!0===n.options.clickable?n.clickableElements=[n.element]:n.clickableElements=C.getElements(n.options.clickable,"clickable")),n.init(),n}return _inherits(C,Emitter),_createClass(C,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e;this.element.className="".concat(this.element.className," dz-browser-not-supported");var t=!0,n=!1,i=void 0;try{for(var r,o=this.element.getElementsByTagName("div")[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(/(^| )dz-message($| )/.test(a.className)){(e=a).className="dz-message";break}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}e||(e=C.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var l=e.getElementsByTagName("span")[0];return l&&(null!=l.textContent?l.textContent=this.options.dictFallbackMessage:null!=l.innerText&&(l.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;null==t&&null==n?(t=r.srcWidth,n=r.srcHeight):null==t?t=n*o:null==n&&(n=t/o);var a=(t=Math.min(t,r.srcWidth))/(n=Math.min(n,r.srcHeight));if(r.srcWidth>t||r.srcHeight>n)if("crop"===i)a<o?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*a):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/a);else{if("contain"!==i)throw new Error("Unknown resizeMethod '".concat(i,"'"));a<o?n=t/o:t=n*o}return r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=n,r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:function(){},dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:function(){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var n=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){t.previewElement=C.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement);var e=!0,i=!1,r=void 0;try{for(var o,a=t.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;l.textContent=t.name}}catch(e){i=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}var s=!0,u=!1,c=void 0;try{for(var d,p=t.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)(l=d.value).innerHTML=this.filesize(t.size)}catch(e){u=!0,c=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}this.options.addRemoveLinks&&(t._removeLink=C.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),t.previewElement.appendChild(t._removeLink));var h=function(e){return e.preventDefault(),e.stopPropagation(),t.status===C.UPLOADING?C.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(t)}):n.options.dictRemoveFileConfirmation?C.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(t)}):n.removeFile(t)},f=!0,v=!1,m=void 0;try{for(var y,g=t.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){y.value.addEventListener("click",h)}}catch(e){v=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(v)throw m}}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var n=!0,i=!1,r=void 0;try{for(var o,a=e.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.alt=e.name,l.src=t}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);var n=!0,i=!1,r=void 0;try{for(var o,a=e.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.textContent=t}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t){if(e.previewElement){var n=!0,i=!1,r=void 0;try{for(var o,a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;"PROGRESS"===l.nodeName?l.value=t:l.style.width="".concat(t,"%")}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,o=n;r<o.length;r++){var a=o[r];for(var l in a){var s=a[l];e[l]=s}}return e}}]),_createClass(C,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(t){return this.files.filter(function(e){return e.status===t}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(C.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(C.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(C.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===C.UPLOADING||e.status===C.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var s=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(C.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){!function l(){return s.hiddenFileInput&&s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput),s.hiddenFileInput=document.createElement("input"),s.hiddenFileInput.setAttribute("type","file"),(null===s.options.maxFiles||1<s.options.maxFiles)&&s.hiddenFileInput.setAttribute("multiple","multiple"),s.hiddenFileInput.className="dz-hidden-input",null!==s.options.acceptedFiles&&s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles),null!==s.options.capture&&s.hiddenFileInput.setAttribute("capture",s.options.capture),s.hiddenFileInput.style.visibility="hidden",s.hiddenFileInput.style.position="absolute",s.hiddenFileInput.style.top="0",s.hiddenFileInput.style.left="0",s.hiddenFileInput.style.height="0",s.hiddenFileInput.style.width="0",C.getElement(s.options.hiddenInputContainer,"hiddenInputContainer").appendChild(s.hiddenFileInput),s.hiddenFileInput.addEventListener("change",function(){var e=s.hiddenFileInput.files;if(e.length){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;s.addFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}return s.emit("addedfiles",e),l()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;var e=!0,t=!1,n=void 0;try{for(var i,r=this.events[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.on(o,this.options[o])}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.on("uploadprogress",function(){return s.updateTotalUploadProgress()}),this.on("removedfile",function(){return s.updateTotalUploadProgress()}),this.on("canceled",function(e){return s.emit("complete",e)}),this.on("complete",function(e){if(0===s.getAddedFiles().length&&0===s.getUploadingFiles().length&&0===s.getQueuedFiles().length)return setTimeout(function(){return s.emit("queuecomplete")},0)});function a(e){var t;return(t=e).dataTransfer.types&&t.dataTransfer.types.some(function(e){return"Files"==e})&&(e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1)}return this.listeners=[{element:this.element,events:{dragstart:function(e){return s.emit("dragstart",e)},dragenter:function(e){return a(e),s.emit("dragenter",e)},dragover:function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",a(e),s.emit("dragover",e)},dragleave:function(e){return s.emit("dragleave",e)},drop:function(e){return a(e),s.drop(e)},dragend:function(e){return s.emit("dragend",e)}}}],this.clickableElements.forEach(function(t){return s.listeners.push({element:t,events:{click:function(e){return t===s.element&&e.target!==s.element&&!C.elementInside(e.target,s.element.querySelector(".dz-message"))||s.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,C.instances.splice(C.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,n=0;if(this.getActiveFiles().length){var i=!0,r=!1,o=void 0;try{for(var a,l=this.getActiveFiles()[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;t+=s.upload.bytesSent,n+=s.upload.total}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>".concat(this.options.dictFallbackText,"</p>")),n+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var i=C.createElement(n);return"FORM"!==this.element.tagName?(t=C.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i}},{key:"getExistingFallback",value:function(){for(var e=function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(/(^| )fallback($| )/.test(a.className))return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}},t=0,n=["div","form"];t<n.length;t++){var i,r=n[t];if(i=e(this.element.getElementsByTagName(r)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(i){return function(){var e=[];for(var t in i.events){var n=i.events[t];e.push(i.element.addEventListener(t,n,!1))}return e}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(i){return function(){var e=[];for(var t in i.events){var n=i.events[t];e.push(i.element.removeEventListener(t,n,!1))}return e}()})}},{key:"disable",value:function(){var t=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(e){return t.cancelUpload(e)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(0<e){for(var i=["tb","gb","mb","kb","b"],r=0;r<i.length;r++){var o=i[r];if(Math.pow(this.options.filesizeBase,4-r)/10<=e){t=e/Math.pow(this.options.filesizeBase,4-r),n=o;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(e){return e.items})){this.emit("paste",e);var t=e.clipboardData.items;return t.length?this._addFilesFromItems(t):void 0}}},{key:"handleFiles",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.addFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_addFilesFromItems",value:function(s){var u=this;return function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=s[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a,l=r.value;null!=l.webkitGetAsEntry&&(a=l.webkitGetAsEntry())?a.isFile?e.push(u.addFile(l.getAsFile())):a.isDirectory?e.push(u._addFilesFromDirectory(a,a.name)):e.push(void 0):null!=l.getAsFile&&(null==l.kind||"file"===l.kind)?e.push(u.addFile(l.getAsFile())):e.push(void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}()}},{key:"_addFilesFromDirectory",value:function(e,s){function t(t){return __guardMethod__(console,"log",function(e){return e.log(t)})}var u=this,n=e.createReader();return function l(){return n.readEntries(function(e){if(0<e.length){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.isFile?a.file(function(e){if(!u.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(s,"/").concat(e.name),u.addFile(e)}):a.isDirectory&&u._addFilesFromDirectory(a,"".concat(s,"/").concat(a.name))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}l()}return null},t)}()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):C.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(t){var n=this;t.upload={uuid:C.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t)},this.files.push(t),t.status=C.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){e?(t.accepted=!1,n._errorProcessing([t],e)):(t.accepted=!0,n.options.autoQueue&&n.enqueueFile(t)),n._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.enqueueFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==C.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=C.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var t=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var n=this._thumbnailQueue.shift();return this.createThumbnail(n,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(e){return t.emit("thumbnail",n,e),t._processingThumbnail=!1,t._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===C.UPLOADING&&this.cancelUpload(e),this.files=without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t=!0,n=!1,i=void 0;try{for(var r,o=this.files.slice()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.status===C.UPLOADING&&!e||this.removeFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"resizeImage",value:function(r,e,t,n,o){var a=this;return this.createThumbnail(r,e,t,n,!0,function(e,t){if(null==t)return o(r);var n=a.options.resizeMimeType;null==n&&(n=r.type);var i=t.toDataURL(n,a.options.resizeQuality);return"image/jpeg"!==n&&"image/jpg"!==n||(i=ExifRestore.restore(r.dataURL,i)),o(C.dataURItoBlob(i))})}},{key:"createThumbnail",value:function(e,t,n,i,r,o){var a=this,l=new FileReader;l.onload=function(){e.dataURL=l.result,"image/svg+xml"!==e.type?a.createThumbnailFromUrl(e,t,n,i,r,o):null!=o&&o(l.result)},l.readAsDataURL(e)}},{key:"displayExistingFile",value:function(t,e,n,i,r){var o=this,a=!(4<arguments.length&&void 0!==r)||r;if(this.emit("addedfile",t),this.emit("complete",t),a){t.dataURL=e,this.createThumbnailFromUrl(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,function(e){o.emit("thumbnail",t,e),n&&n()},i)}else this.emit("thumbnail",t,e),n&&n()}},{key:"createThumbnailFromUrl",value:function(o,a,l,s,t,u,e){var c=this,d=document.createElement("img");return e&&(d.crossOrigin=e),d.onload=function(){var e=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&t&&(e=function(e){return EXIF.getData(d,function(){return e(EXIF.getTag(this,"Orientation"))})}),e(function(e){o.width=d.width,o.height=d.height;var t=c.options.resize.call(c,o,a,l,s),n=document.createElement("canvas"),i=n.getContext("2d");switch(n.width=t.trgWidth,n.height=t.trgHeight,4<e&&(n.width=t.trgHeight,n.height=t.trgWidth),e){case 2:i.translate(n.width,0),i.scale(-1,1);break;case 3:i.translate(n.width,n.height),i.rotate(Math.PI);break;case 4:i.translate(0,n.height),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n.width);break;case 7:i.rotate(.5*Math.PI),i.translate(n.height,-n.width),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n.height,0)}drawImageIOSFix(i,d,null!=t.srcX?t.srcX:0,null!=t.srcY?t.srcY:0,t.srcWidth,t.srcHeight,null!=t.trgX?t.trgX:0,null!=t.trgY?t.trgY:0,t.trgWidth,t.trgHeight);var r=n.toDataURL("image/png");if(null!=u)return u(r,n)})},null!=u&&(d.onerror=u),d.src=o.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(e<=t)){var i=this.getQueuedFiles();if(0<i.length){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.processing=!0,a.status=C.UPLOADING,this.emit("processing",a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(t){return this.files.filter(function(e){return e.xhr===t}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===C.UPLOADING){var t=this._getFilesWithXhr(e.xhr),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.status=C.CANCELED}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}void 0!==e.xhr&&e.xhr.abort();var l=!0,s=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var p=c.value;this.emit("canceled",p)}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==C.ADDED&&e.status!==C.QUEUED||(e.status=C.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"!=typeof e)return e;for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(s){var u=this;this._transformFiles(s,function(e){if(u.options.chunking){var t=e[0];s[0].upload.chunked=u.options.chunking&&(u.options.forceChunking||t.size>u.options.chunkSize),s[0].upload.totalChunkCount=Math.ceil(t.size/u.options.chunkSize)}if(s[0].upload.chunked){var r=s[0],o=e[0];r.upload.chunks=[];var i=function(){for(var e=0;void 0!==r.upload.chunks[e];)e++;if(!(e>=r.upload.totalChunkCount)){0;var t=e*u.options.chunkSize,n=Math.min(t+u.options.chunkSize,r.size),i={name:u._getParamName(0),data:o.webkitSlice?o.webkitSlice(t,n):o.slice(t,n),filename:r.upload.filename,chunkIndex:e};r.upload.chunks[e]={file:r,index:e,dataBlock:i,status:C.UPLOADING,progress:0,retries:0},u._uploadData(s,[i])}};if(r.upload.finishedChunkUpload=function(e){var t=!0;e.status=C.SUCCESS,e.dataBlock=null,e.xhr=null;for(var n=0;n<r.upload.totalChunkCount;n++){if(void 0===r.upload.chunks[n])return i();r.upload.chunks[n].status!==C.SUCCESS&&(t=!1)}t&&u.options.chunksUploaded(r,function(){u._finished(s,"",null)})},u.options.parallelChunkUploads)for(var n=0;n<r.upload.totalChunkCount;n++)i();else i()}else{for(var a=[],l=0;l<s.length;l++)a[l]={name:u._getParamName(l),data:e[l],filename:s[l].upload.filename};u._uploadData(s,a)}})}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(t,e){var n=this,i=new XMLHttpRequest,r=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){l.value.xhr=i}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}t[0].upload.chunked&&(t[0].upload.chunks[e[0].chunkIndex].xhr=i);var u=this.resolveOption(this.options.method,t),c=this.resolveOption(this.options.url,t);i.open(u,c,!0),i.timeout=this.resolveOption(this.options.timeout,t),i.withCredentials=!!this.options.withCredentials,i.onload=function(e){n._finishedUploading(t,i,e)},i.ontimeout=function(){n._handleUploadError(t,i,"Request timedout after ".concat(n.options.timeout," seconds"))},i.onerror=function(){n._handleUploadError(t,i)},(null!=i.upload?i.upload:i).onprogress=function(e){return n._updateFilesUploadProgress(t,i,e)};var d={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var p in this.options.headers&&C.extend(d,this.options.headers),d){var h=d[p];h&&i.setRequestHeader(p,h)}var f=new FormData;if(this.options.params){var v=this.options.params;for(var m in"function"==typeof v&&(v=v.call(this,t,i,t[0].upload.chunked?this._getChunk(t[0],i):null)),v){var y=v[m];f.append(m,y)}}var g=!0,b=!1,k=void 0;try{for(var w,F=t[Symbol.iterator]();!(g=(w=F.next()).done);g=!0){var z=w.value;this.emit("sending",z,i,f)}}catch(e){b=!0,k=e}finally{try{g||null==F.return||F.return()}finally{if(b)throw k}}this.options.uploadMultiple&&this.emit("sendingmultiple",t,i,f),this._addFormElementData(f);for(var x=0;x<e.length;x++){var E=e[x];f.append(E.name,E.data,E.filename)}this.submitRequest(i,f,t)}},{key:"_transformFiles",value:function(n,i){for(var e=this,r=[],o=0,t=function(t){e.options.transformFile.call(e,n[t],function(e){r[t]=e,++o===n.length&&i(r)})},a=0;a<n.length;a++)t(a)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t=!0,n=!1,i=void 0;try{for(var r,o=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,l=a.getAttribute("name"),s=a.getAttribute("type");if(s=s&&s.toLowerCase(),null!=l)if("SELECT"===a.tagName&&a.hasAttribute("multiple")){var u=!0,c=!1,d=void 0;try{for(var p,h=a.options[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var f=p.value;f.selected&&e.append(l,f.value)}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}else(!s||"checkbox"!==s&&"radio"!==s||a.checked)&&e.append(l,a.value)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var i;if(void 0!==n){if(i=100*n.loaded/n.total,e[0].upload.chunked){var r=e[0],o=this._getChunk(r,t);o.progress=i,o.total=n.total,o.bytesSent=n.loaded;r.upload.progress=0,r.upload.total=0;for(var a=r.upload.bytesSent=0;a<r.upload.totalChunkCount;a++)void 0!==r.upload.chunks[a]&&void 0!==r.upload.chunks[a].progress&&(r.upload.progress+=r.upload.chunks[a].progress,r.upload.total+=r.upload.chunks[a].total,r.upload.bytesSent+=r.upload.chunks[a].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount}else{var l=!0,s=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var p=c.value;p.upload.progress=i,p.upload.total=n.total,p.upload.bytesSent=n.loaded}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}}var h=!0,f=!1,v=void 0;try{for(var m,y=e[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var g=m.value;this.emit("uploadprogress",g,g.upload.progress,g.upload.bytesSent)}}catch(e){f=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(f)throw v}}}else{var b=!0,k=!0,w=!(i=100),F=void 0;try{for(var z,x=e[Symbol.iterator]();!(k=(z=x.next()).done);k=!0){var E=z.value;100===E.upload.progress&&E.upload.bytesSent===E.upload.total||(b=!1),E.upload.progress=i,E.upload.bytesSent=E.upload.total}}catch(e){w=!0,F=e}finally{try{k||null==x.return||x.return()}finally{if(w)throw F}}if(b)return;var C=!0,_=!1,S=void 0;try{for(var D,T=e[Symbol.iterator]();!(C=(D=T.next()).done);C=!0){var L=D.value;this.emit("uploadprogress",L,i,L.upload.bytesSent)}}catch(e){_=!0,S=e}finally{try{C||null==T.return||T.return()}finally{if(_)throw S}}}}},{key:"_finishedUploading",value:function(e,t,n){var i;if(e[0].status!==C.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(e){n=e,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,i,n):this._handleUploadError(e,t,i)}}},{key:"_handleUploadError",value:function(e,t,n){if(e[0].status!==C.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(e[0],t);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[i.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t){e.send(t)}},{key:"_finished",value:function(e,t,n){var i=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;s.status=C.SUCCESS,this.emit("success",s,t,n),this.emit("complete",s)}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,n){var i=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;s.status=C.ERROR,this.emit("error",s,t,n),this.emit("complete",s)}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),C}();Dropzone.initClass(),Dropzone.version="5.7.0",Dropzone.options={},Dropzone.optionsForElement=function(e){return e.getAttribute("id")?Dropzone.options[camelize(e.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var s;if(document.querySelectorAll)s=document.querySelectorAll(".dropzone");else{s=[];var e=function(l){return function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=l[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;/(^| )dropzone($| )/.test(a.className)?e.push(s.push(a)):e.push(void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}()};e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=s[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;!1!==Dropzone.optionsForElement(a)?e.push(new Dropzone(a)):e.push(void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var t=!0,n=!1,i=void 0;try{for(var r,o=Dropzone.blacklistedBrowsers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.test(navigator.userAgent)&&(e=!1)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}else e=!1;else e=!1;return e},Dropzone.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0,a=t.length,l=0<=a;l?o<=a:a<=o;l?o++:o--)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})};var without=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},camelize=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};Dropzone.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},Dropzone.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},Dropzone.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},Dropzone.getElements=function(e,t){var n,i;if(e instanceof Array){i=[];try{var r=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)n=l.value,i.push(this.getElement(n,t))}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}}catch(e){i=null}}else if("string"==typeof e){var u=!0,c=!(i=[]),d=void 0;try{for(var p,h=document.querySelectorAll(e)[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)n=p.value,i.push(n)}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},Dropzone.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},Dropzone.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var n=e.type,i=n.replace(/\/.*$/,""),r=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if("."===(u=u.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(u.toLowerCase(),e.name.length-u.length))return!0}else if(/\/\*$/.test(u)){if(i===u.replace(/\/.*$/,""))return!0}else if(n===u)return!0}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new Dropzone(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var r=i.getImageData(1,0,1,t).data,o=0,a=t,l=t;o<l;){0===r[4*(l-1)+3]?a=l:o=l,l=a+o>>1}var s=l/t;return 0==s?1:s},drawImageIOSFix=function(e,t,n,i,r,o,a,l,s,u){var c=detectVerticalSquash(t);return e.drawImage(t,n,i,r,o,a,l,s,u/c)},ExifRestore=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,r="",o=void 0,a=void 0,l=void 0,s="",u=0;o=(n=e[u++])>>2,a=(3&n)<<4|(i=e[u++])>>4,l=(15&i)<<2|(r=e[u++])>>6,s=63&r,isNaN(i)?l=s=64:isNaN(r)&&(s=64),t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(s),n=i=r="",o=a=l=s="",u<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),r=this.exifManipulation(t,i);return"data:image/jpeg;base64,".concat(this.encode64(r))}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),a=i.slice(r),l=o;return l=(l=l.concat(t)).concat(a)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);n.push(r),t=i}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",r=void 0,o=void 0,a="",l=0,s=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(l++))<<2|(r=this.KEY_STR.indexOf(e.charAt(l++)))>>4,n=(15&r)<<4|(o=this.KEY_STR.indexOf(e.charAt(l++)))>>2,i=(3&o)<<6|(a=this.KEY_STR.indexOf(e.charAt(l++))),s.push(t),64!==o&&s.push(n),64!==a&&s.push(i),t=n=i="",r=o=a="",l<e.length;);return s}}]),e}();ExifRestore.initClass();var contentLoaded=function(t,n){function i(e){if("readystatechange"!==e.type||"complete"===o.readyState)return("load"===e.type?t:o)[s](u+e.type,i,!1),!r&&(r=!0)?n.call(t,e.type||e):void 0}var r=!1,e=!0,o=t.document,a=o.documentElement,l=o.addEventListener?"addEventListener":"attachEvent",s=o.addEventListener?"removeEventListener":"detachEvent",u=o.addEventListener?"":"on";if("complete"!==o.readyState){if(o.createEventObject&&a.doScroll){try{e=!t.frameElement}catch(e){}e&&!function t(){try{a.doScroll("left")}catch(e){return void setTimeout(t,50)}return i("poll")}()}return o[l](u+"DOMContentLoaded",i,!1),o[l](u+"readystatechange",i,!1),t[l](u+"load",i,!1)}};function __guard__(e,t){return null!=e?t(e):void 0}function __guardMethod__(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);var gform=function(optionsIn,el){"use strict";this.fieldMethods=_.reduce(gform.field,(result,method,key)=>{result[key]=method(this);return result},{})
this.fieldAttr=(attr,field,...rest)=>(field[attr]||gform.types[field.type||'text'][attr])
this.call=(method,field,...rest)=>{field=field||this;let actor=field[method]||gform.types[field.type||'text'][method];return(typeof actor=='function')?actor.call(field,...rest):actor};this.bind=(method,field,...rest)=>((field[method]==Object.prototype[method])?gform.types[field.type||'text'][method]:field.method).bind(field,...rest);this.updateActions=function(am){const{array,id,instances,container}=am;const{max=5,min}=array;var testFunc=function(selector,status,button){gform.toggleClass(button.querySelector(selector),'hidden',status)}
if(array.duplicate.enable=="auto"){_.each(container.querySelectorAll('.gform_isArray'),testFunc.bind(null,'[data-ref='+id+'].actions .gform-add',(instances.length>=max)))}
if(array.remove.enable=="auto"){_.each(container.querySelectorAll('.gform_isArray'),testFunc.bind(null,'[data-ref='+id+'].actions .gform-minus',!(instances.length>min)))}
if(array.append.enable=="auto"){testFunc.call(null,'[data-id='+id+'].gform-append',(instances.length>=(max||5)),container)}}
var data=_.merge({},optionsIn)
var sections=[];this.methods=data.methods||{};this.eventBus=new gform.eventBus({owner:'form',item:'field',handlers:data.events||{}},this)
this.on=this.eventBus.on;this.dispatch=this.eventBus.dispatch;this.valid=!0;this.trigger=function(a,b,c){if(typeof a=='string'){a=[a]}
var events=_.extend([],a);if(typeof b=='object'&&'owner' in b&&b.owner instanceof gform){_.each(a,function(item){if(item.indexOf(':')=='-1'){events.unshift(item+':'+b.name)
events.unshift(item+':'+b.path)
events.unshift(item+':'+b.relative)
var search=b;while('parent' in search&&!(search.parent instanceof gform)&&typeof search.parent!=='undefined'&&search.parent!==!1){search=search.parent;events.push(item+':'+search.name)
events.push(item+':'+search.path)
events.push(item+':'+search.relative)}}}.bind(this))}
this.dispatch(_.uniq(events),b,c)}.bind(this)
this.errors={};this.popin=function(){}
this.on('reset',function(e){e.form.set(e.form.options.data)});this.on('clear',function(e){e.form.set()});if(typeof data.collections=='object'){this.collections=data.collections}else{this.collections=gform.collections}
this.options={fields:[],legend:'',strict:!0,data:'search',columns:gform.columns,name:gform.getUID(),...this.options,...data,default:{...this.options.default,...data.default}};if(typeof this.options.onSet=='function'){data=this.options.onSet(data)}
if('actions' in this.options&&_.isArray(this.options.actions))this.options.fields=(this.options.fields||[]).concat(this.options.actions);if(typeof this.options.data=='string'){if(typeof window.location[this.options.data]!=='undefined'){this.options.data=window.location[this.options.data].substr(1).split('&').map(function(val){return val.split('=')}).reduce(function(total,current){total[current[0]]=decodeURIComponent(current[1]);return total},{})}else{gform.ajax({path:(this.options.rootpath||'')+this.options.data,success:function(data){this.set(data)}.bind(this)})}}
if(this.options.sections){_.each(_.filter(this.options.fields,{type:'fieldset'}),function(item,i){item.index=i;item.section=!0;item.id=item.id||gform.getUID();return item})}
this.attach=(el)=>{switch(typeof el){case 'undefined':for(let i=0;i<sections.length;i++){this.el.removeChild(sections[i])}
break;case 'string':el=document.querySelector(el+'');case 'object':if(!el instanceof Node||this.el==el)!1;this.el=el
for(let i=0;i<sections.length;i++){this.el.appendChild(sections[i])}
this.container=this.el.querySelector('form')||this.el;break}}
this.attach(el||data.el);this.add=(field)=>{this._items.push(this.fieldMethods.cultivate({data:this.options.data,},field));this.reflow()}
this.trigger('initialize',this);var create=function(){if(typeof this.el=='undefined'){this.options.renderer='modal';this.el=gform.create(gform.render(this.options.template||'modal_container',this.options))
this.on('close',function(e){if(typeof e.field=='undefined'){e.form.modal('hide')}});document.addEventListener('keyup',function(e){if(e.key==="Escape"){this.trigger('cancel',this)}}.bind(this))}
if(this.options.clear&&!(this.options.renderer=='modal')){this.el.innerHTML="";_.each(gform.create('<div>'+gform.render(this.options.sections+'_container',this.options)+'</div>').childNodes,(a,b,node)=>{sections.push(node[0]);this.el.appendChild(node[0])})}
this.container=this.el.querySelector('form')||this.el;this.rowManager=gform.rowManager(this);this._items=_.map(this.options.fields,this.fieldMethods.cultivate.bind(null,{data:this.options.data}))
Object.defineProperty(this,'items',{get:()=>{return this._items}})
Object.keys(gform.iterators).forEach(i=>{this.items[i]=gform.iterators[i].bind(this)})
Object.defineProperty(this,'fields',{get:()=>{return _.reduce(this._items,(fields,item)=>{if(item instanceof gform.arrayManager){fields=fields.concat(item.instances)}else{fields.push(item)}
return fields},[])}})
gform.each.call(this,gform.addConditions)
gform.each.call(this,function(field){field.owner.trigger('change',field)})}
this.infoEl=gform.create(gform.render('_tooltip'))
this.infoEl.querySelector('.info-close').addEventListener('click',function(e){this.el.removeChild(this.infoEl)
this.popper.destroy()
this.popper=null}.bind(this));this.popper=null;['toJSON','toString','reflow','find','filter'].map((method)=>{this[method]=gform[method].bind(this)})
this.restore=create.bind(this);this.get=this.toJSON;this.set=function(name,value){if(typeof this.options.onSet=='function'){value=this.options.onSet(value)}
if(typeof name=='string'){this.find(name).set(value)}
if(typeof name=='object'){_.each(name,function(item,index){var field=this.find(index);if(typeof field!=='undefined'&&field.fillable){if(field.array&&_.isArray(item)){var list=this.filter({array:{ref:field.array.ref}},1)
if(list.length>1){_.each(list.slice(1),function(field){var index=_.findIndex(field.parent.fields,{id:field.id});field.parent.fields.splice(index,1)})}
if(_.isArray(item)){field.set(item[0])}
var attr={};attr[field.name]=item;gform.inflate.call(this.owner||this,attr,field,_.findIndex(field.parent.fields,{id:field.id}),field.parent.fields);field.operator.reflow()}else{if(typeof field!=='undefined'){field.set(item)}}}}.bind(this))}
if(name==null){gform.each.call(this,function(field){field.set('')})}
this.trigger('set');return this}.bind(this),this.isActive=!1;Object.defineProperty(this,"active",{get:()=>(this.isActive),enumerable:!0});this.destroy=function(){this.isActive=!1;this.trigger(['close','destroy']);this.el.removeEventListener('click',this.listener)
gform.each.call(this,(field)=>{if(typeof gform.types[field.type].destroy=="function")gform.types[field.type].destroy.call(field)})
while(!!sections.length){let section=sections.pop();if(this.el.contains(section))this.el.removeChild(section)}
delete gform.instances[this.options.name];this.trigger('destroyed');delete this.eventBus;return this};if(!this.options.private){if(typeof gform.instances[this.options.name]!=='undefined'&&gform.instances[this.options.name]!==this){gform.instances[this.options.name].destroy()}
gform.instances[this.options.name]=this}
create.call(this)
var tabs=this.el.querySelector('ul.tabs')
if(tabs!==null){tabs.addEventListener('click',function(e){if(e.target.nodeName=='LI'){e.preventDefault();gform.removeClass(this.el.querySelector('ul.tabs .active'),'active')
gform.removeClass(this.el.querySelector('.tab-pane.active'),'active')
gform.addClass(e.target,'active')
gform.addClass(this.el.querySelector(e.target.parentElement.attributes.href.value),'active')}}.bind(this))}
if(this.options.autoFocus&&this.fields.length){var field=this.find({visible:!0})
if(field){window.setTimeout(gform.types[this.find({visible:!0}).type].focus.bind(this.find({visible:!0})),0)}}
this.listener=function(e){var field;var target=e.target;var activeField=gform.iterators.find.call(this,{id:document.activeElement.id});if(activeField!==null&&e.detail===0&&!e.pointerType){if(activeField.am instanceof gform.arrayManager){target=activeField.el.querySelector('.gform-add')||activeField.am.el.querySelector('.gform-append')}else{let index=activeField.parent.fields.indexOf(activeField);if(index>=0&&typeof activeField.parent.fields[index+1]!=='undefined')activeField.parent.fields[index+1].focus()}}
if(e.target.classList.value.indexOf('gform-')<0&&e.target.parentElement.classList.value.indexOf('gform-')>=0){target=e.target.parentElement}
if(typeof target.dataset.id!=='undefined'){field=gform.iterators.find.call(this,{id:target.dataset.id},10)||!1;if(typeof field=='undefined'){console.error('Field not found with id:'+target.dataset.id);return!1}}
if(target.classList.contains('gform-add')){e.stopPropagation();e.preventDefault();var newField=field.am.addField(null,field);if(newField.array.duplicate.clone==!0){newField.set(field.get())}
if(newField.owner.fieldAttr('base',newField)=="section"&&"fields" in newField&&newField.fields.length){_.each(newField.fields,(field)=>field.trigger(['change','input'],field))}
field.am.reflow();gform.types[newField.type].focus.call(newField)}
if(target.classList.contains('gform-minus')){e.stopPropagation();e.preventDefault();field.am.removeField(field)}
if(target.classList.contains('gform-append')){e.stopPropagation();e.preventDefault();var newField=field.addField();if(!newField)return;this.trigger('appended',newField);field.reflow();gform.types[newField.type].focus.call(newField)}
if(target.classList.contains('gform-info')){e.stopPropagation();e.preventDefault();if(field.infoEl){var show=!0;if(this.popper!==null){show=(this.popper.state.elements.reference!=target)
this.el.removeChild(this.infoEl)
this.popper.destroy()
this.popper=null}
if(show){this.infoEl.querySelector('.tooltip-body').innerHTML=gform.render('_info',field);this.popper=Popper.createPopper(e.target,this.infoEl,{placement:'top-end',modifiers:[{name:'offset',options:{offset:[0,8]}}]});this.el.appendChild(this.infoEl)}}}}.bind(this)
this.el.addEventListener('click',this.listener)
this.trigger('initialized',this);this.isActive=!0;this.reflow();return this}
gform.types={'arrayManager':{show:function(state){this.el.style.display=state?"block":"none"}},'input':{base:'input',defaults:{},resetValue:()=>{return""},row:function(){return'<div></div>'},array:{template:(data)=>{var tempEl=document.createElement("span");tempEl.setAttribute("id","el_"+(data||this).id);gform.addClass(tempEl,gform.columnClasses[(data||this).columns])
gform.addClass(tempEl,gform.offsetClasses[(data||this).offset])
tempEl.innerHTML=gform.m(`
              <div data-id="{{id}}" class="col-xs-12">
                {{#array}}{{#append.enable}}<button data-id="{{id}}" class="btn btn-success gform-append float-right">{{append.label}}{{^append.label}}Add{{/append.label}}</button>{{/append.enable}}{{/array}}
                {{#array.legend}}<legend>{{array.legend}}</legend>{{/array.legend}}
                <div class="array_container"></div>
                {{#array}}{{^append.enable}}<button data-id="{{id}}" class="create btn btn-success gform-append">{{append.label}}{{^append.label}}Add a {{name}}{{/append.label}}</button>{{/append.enable}}{{/array}}
                </div>`,data||this)
return tempEl},max:5,min:1,container:".array_container",duplicate:{enable:'auto'},remove:{enable:'auto'},append:{enable:!1}},setup:function(){this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info')},setLabel:function(){gform.toggleClass(this.labelEl,'required',this.required)
if(this.label!==!1&&typeof this.labelEl!=='undefined'&&this.labelEl!==null){this.labelEl.innerHTML=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this)+this.suffix}},create:function(){var tempEl=document.createElement("span");tempEl.setAttribute("id","el_"+this.id);gform.addClass(tempEl,gform.columnClasses[this.columns])
gform.addClass(tempEl,gform.offsetClasses[this.offset])
gform.toggleClass(tempEl,'gform_isArray',!!this.array)
tempEl.innerHTML=this.render();return tempEl},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+_.escape(this.value)+'"')},destroy:function(){this.el.removeEventListener('change',this.onchangeEvent);this.el.removeEventListener('input',this.onchangeEvent)},initialize:function(){this.onchangeEvent=function(input){this.value=this.get();if(this.el.querySelector('.count')!=null){var text=(this.value+"").length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}
gform.types[this.type].setup.call(this);this.parent.trigger(['change'],this,{input:this.value});if(input){this.parent.trigger(['input'],this,{input:this.value})}}.bind(this)
this.input=this.input||!1;this.el.addEventListener('input',this.onchangeEvent.bind(null,!0));this.el.addEventListener('change',this.onchangeEvent.bind(null,!1));gform.types[this.type].setup.call(this)},update:function(item,silent){var oldDiv=this.el;if(typeof item!=='undefined'&&(typeof item.options!=='undefined'||typeof item.max!=='undefined'||typeof item.action!=='undefined')&&typeof this.mapOptions!=='undefined'){delete this.mapOptions;this.item=_.defaults({},item,this.item);this.options=_.extend([],this.item.options);this.max=this.item.max;this.min=this.item.min;this.path=this.item.path;this.action=this.item.action}
if(typeof item==='object'){_.extend(this,item);this.item=_.extend(this.item,item)}
this.destroy();this.el=gform.types[this.type].create.call(this);if(oldDiv.parentNode!==null)oldDiv.parentNode.replaceChild(this.el,oldDiv);this.owner.call('initialize',this);this.owner.call('show',this,this.visible);this.owner.call('edit',this,this.editable);if(!silent){this.parent.trigger(['change'],this)}},get:function(){return('el' in this)?this.el.querySelector('input[name="'+this.name+'"]').value:this.internalValue},set:function(value){if('el' in this)this.el.querySelector('input[name="'+this.name+'"]').value=value},toString:function(name,report){if(!report){return'<dt>'+this.label+'</dt> <dd>'+(this.value||'<span class="text-muted">(empty)</span>')+'</dd><hr>'}else{return this.value}},display:function(){return(typeof this.value!=='undefined'&&this.value!=='')?this.value:'(empty)'},satisfied:function(value){value=value||this.value;if(_.isArray(value)){return!!value.length}
return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='number'&&isNaN(value)))},edit:function(state){this.editable=state;this.el.querySelector('[name="'+this.name+'"]').disabled=!state},show:function(state){this.el.style.display=state?"block":"none"},find:function(){return this},focus:function(timeout){window.setTimeout(()=>{if(this.el.querySelector('input[name="'+this.name+'"]')!==null&&typeof this.el.querySelector('input[name="'+this.name+'"]').focus=="function"){this.el.querySelector('input[name="'+this.name+'"]').focus();var temp=this.value;this.set('',!0);this.set(temp)}},timeout||0)}},'bool':{base:'bool',resetValue:function(){return this.options[0]||!1},setup:function(){this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info')},display:function(){return((_.find(this.options,{value:this.value})||{label:''}).label||this.value)},defaults:{options:[!1,!0],format:{value:function(e){return e.value}}},render:function(){if(!this.strict&&this.options[0]==!1&&this.options[1]==!0){this.value=(!!this.value)}
if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getoptions()
if(typeof this.options[0].value=='undefined'){this.options[0].value=!1;this.options[0].selected=(this.value==!1)}
if(typeof this.options[1].value=='undefined'){this.options[1].value=!0;this.options[1].selected=(this.value==!0)}
this.update()}.bind(this))}
this.options=this.mapOptions.getoptions()
if(typeof this.options[0].value=='undefined'){this.options[0].value=!1;this.options[0].selected=(this.value==!1)}
if(typeof this.options[1].value=='undefined'||(this.options[0].value==''&&this.options[1].value=='')){this.options[1].value=!0;this.options[1].selected=(this.value==!0)}
return gform.render(this.type,this)},setLabel:function(){var label=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);if(this.required){label+=this.requiredText+this.suffix}
var labelEl=this.el.querySelector('label[for='+this.name+']');if(labelEl!==null){labelEl.innerHTML=label}},initialize:function(){this.onchangeEvent=function(input){this.value=this.get();(_.find(this.options,{selected:!0})||{selected:null}).selected=!1;(_.find(this.options,{value:this.value})||this.options[0]||{value:""}).selected=!0;gform.types[this.type].setup.call(this);this.parent.trigger(input?'change':'input',this,{input:this.value})}.bind(this)
this.el.addEventListener('input',this.onchangeEvent.bind(null,!0));this.el.addEventListener('change',this.onchangeEvent.bind(null,!1));gform.types[this.type].setup.call(this)},set:function(value){if('el' in this)this.el.querySelector('input[name="'+this.name+'"]').checked=(value==this.options[1].value)},edit:function(state){this.editable=state;this.el.querySelector('[name="'+this.name+'"]').disabled=!state},show:function(state){this.el.style.display=state?"block":"none"},get:function(){return('el' in this)?this.options[this.el.querySelector('input[name="'+this.name+'"]').checked?1:0].value:this.initialValue},satisfied:function(value){value=value||this.value;return value==this.options[1].value},toString:function(name,report){if(!report){return'<dt>'+(this.label||this.name)+'</dt> <dd>'+(this.display||'<span class="text-muted">(empty)</span>')+'</dd><hr>'}else{return this.value}}},'collection':{base:'collection',defaults:{format:{label:'{{{label}}}',value:function(item){if(item.value!=='undefined'){return item.value}else{return(item.label||item.index).toLowerCase().split(' ').join('_')}}}},resetValue:()=>{return(this.multiple)?[]:null},toString:function(name,report){if(!report){if(this.multiple){if(this.value.length){return _.reduce(this.value,function(returnVal,item){var lookup=_.find(this.list,{value:item});if(typeof lookup!=='undefined'){returnVal+='<dd>'+lookup.label+'</dd>'}
return returnVal}.bind(this),'<dt>'+this.label+'</dt> ')+'<hr>'}else{return'<dt>'+this.label+'</dt> <dd><span class="text-muted">(no selection)</span></dd><hr>'}}else{return'<dt>'+this.label+'</dt> <dd>'+((_.find(this.list,{value:this.value})||{label:""}).label||'<span class="text-muted">(no selection)</span>')+'</dd><hr>'}}else{if(this.multiple){if(this.value.length){return _.reduce(this.value,function(returnVal,item){var lookup=_.find(this.list,{value:item});if(typeof lookup!=='undefined'){returnVal.push(lookup.label)}
return returnVal}.bind(this),[])+'<hr>'}else{return''}}else{return(_.find(this.list,{value:this.value})||{label:""}).label}}},display:function(){if(this.multiple){if(this.value.length){return'<ul>'+_.reduce(this.value,function(returnVal,item){var lookup=_.find(this.list,{value:item});if(typeof lookup!=='undefined'){returnVal+='<li>'+lookup.label+'</li>'}
return returnVal}.bind(this),'')+'</ul>'}else{return'(no selection)'}}else{return((_.find(this.list,{value:this.value})||{label:""}).label||'(no selection)')}},render:function(){if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getobject()
this.list=this.mapOptions.getoptions();if(!this.mapOptions.waiting){if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}
_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;(_.find(this.list,{value:this.value})||{value:""}).selected=!0}}
this.update()}.bind(this))
this.mapOptions.on('collection',function(e){e.field.field.owner.trigger("collection",e.field.field)})}
this.options=this.mapOptions.getobject();this.list=this.mapOptions.getoptions();if(!this.mapOptions.waiting){if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{var search=_.find(this.list,{value:this.value});if(typeof search=='undefined'){if(this.other||!1){this.value='other'}else{}}
if((this.other||!1)&&typeof _.find(this.list,{value:'other'})=='undefined'){this.options.push({label:"Other",value:'other',})}(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;(_.find(this.list,{value:this.value})||{value:""}).selected=!0}}
return gform.render(this.type,this)},setup:function(){if(this.multiple&&typeof this.limit!=='undefinded'){if(this.get().length>=this.limit){this.maxSelected=!0;_.each(this.el.querySelector('select').options,function(item){item.disabled=!item.selected})}else if(this.maxSelected){this.maxSelected=!1;_.each(this.el.querySelector('select').options,function(item){item.disabled=!1})}
if(this.el.querySelector('.count')!=null){var text=this.get().length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}}
this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info')},initialize:function(){this.el.addEventListener('change',function(){this.value=this.get();if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}
_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;(_.find(this.list,{value:this.value})||{value:""}).selected=!0}
if(this.el.querySelector('.count')!=null){var text=this.value.length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}
gform.types[this.type].setup.call(this);this.parent.trigger(['change','input'],this,{input:this.value})}.bind(this));gform.types[this.type].set.call(this,this.value);gform.types[this.type].setup.call(this)},get:function(){if(!('el' in this))return this.internalValue;var value=this.el.querySelector('select').value;var search=_.find(this.list,{i:parseInt(value,10)});if(typeof search=='undefined'){if(this.other){value="other"}else{value=null}}else{value=search.value}
if(this.multiple){var that=this;value=_.transform(this.el.querySelector('select').options,function(orig,opt){if(opt.selected){var option=_.find(that.list,{i:parseInt(opt.value)});if(typeof option!=='undefined'){orig.push(option.value)}}},[])}
return value},set:function(value){if(this.multiple){if(!_.isArray(value)){value=[value]}
if(typeof this.limit!=='undefinded'&&(value.length>this.limit)){return!0}
if('el' in this)
_.each(this.el.querySelector('select').options,function(option){var search=_.find(this.list,{i:parseInt(option.value)})
option.selected=(typeof search!=='undefined'&&value.indexOf(search.value)>=0)}.bind(this))}else{var search=_.find(this.list,{value:value});if('el' in this){if(typeof search!=='undefined'){this.el.querySelector('select').value=search.i}else{this.el.querySelector('select').value=null}}}
if(typeof gform.types[this.type].setup=='function'&&('el' in this)){gform.types[this.type].setup.call(this)}},focus:function(){var search=this.name;if(this.multiple){search+='[]'}
this.el.querySelector('[name="'+search+'"]').focus()},edit:function(state){this.editable=state;var search=this.name;if(this.multiple){search+='[]'}
if(typeof this.mapOptions!=='undefined'&&this.mapOptions.waiting){this.el.querySelector('[name="'+search+'"]').disabled=!this.editable}else{this.el.querySelector('[name="'+search+'"]').disabled=!this.editable}},show:function(state){this.el.style.display=state?"block":"none"}},'section':{array:{template:(data)=>{var tempEl=document.createElement("span");tempEl.setAttribute("id","el_"+(data||this).id);gform.addClass(tempEl,gform.columnClasses[(data||this).columns])
gform.addClass(tempEl,gform.offsetClasses[(data||this).offset])
tempEl.innerHTML=gform.m(`
            <fieldset data-id="{{id}}" class="col-xs-12">
              {{#array}}{{#append.enable}}<button data-id="{{id}}" class="btn btn-success gform-append float-right">{{append.label}}{{^append.label}}Add{{/append.label}}</button>{{/append.enable}}{{/array}}
              {{#array.label}}<legend>{{array.label}}</legend>{{/array.label}}
              <div class="array_container"></div>
              {{#array}}{{#append.enable}}<button data-id="{{id}}" class="create btn btn-success gform-append">{{append.label}}{{^append.label}}Click here to create {{name}}{{/append.label}}</button>{{/append.enable}}{{/array}}
              </fieldset>`,data||this)
return tempEl},max:20,min:1,container:".array_container",duplicate:{enable:'auto'},remove:{enable:'auto'},append:{enable:!1}},resetValue:()=>{return{}},base:'section',filter:function(search,depth){return gform.filter.call(this,search,depth)},setLabel:function(){var label=gform.renderString(this.item.label||this.label,this);if(this.required){label+=this.requiredText+this.suffix}
var labelEl=this.el.querySelector('fieldset#'+this.id+'>legend,fieldset#'+this.id+'>label')
if(labelEl!==null){labelEl.innerHTML=label}
this.label=label},create:function(){var tempEl=gform.create(this.render());gform.addClass(tempEl,gform.columnClasses[this.columns])
gform.addClass(tempEl,gform.offsetClasses[this.offset])
gform.toggleClass(tempEl,'gform_isArray',!!this.array)
return tempEl},initialize:function(){this.rowManager=gform.rowManager(this);this.initialValue=this.value
Object.defineProperty(this,"value",{get:function(){return this.get()},enumerable:!0});gform.types[this.type].setLabel.call(this)},render:function(){if(this.section){return gform.render(this.owner.options.sections+'_fieldset',this)}else{return gform.render('_fieldset',this)}},update:function(item,silent){if(typeof item==='object'){_.extend(this.item,item)}
var oldDiv=this.el;this.destroy();this.el=gform.types[this.type].create.call(this);oldDiv.parentNode.replaceChild(this.el,oldDiv);this.owner.call('initialize',this);this.owner.call('show',this,this.visible);this.owner.call('edit',this,this.editable);this.container=this.el.querySelector('fieldset')||this.el||null;this.reflow(this);if(!silent){this.parent.trigger(['change'],this)}},get:function(name){if(typeof name!=='undefined'){return gform.toJSON.call(this,name)}
return _.selectPath(gform.toJSON.call(this),this.map)},toString:function(name,report){if(!report){return gform.m('<h4>{{#label}}{{{label}}}{{/label}}</h4><hr><dl style="margin-left:10px">{{{value}}}</dl>',{label:this.label,value:gform.toString.call(this,name)})}else{return gform.toString.call(this,name,report)}},display:function(){return'<div class="list-group-item ">'+this.toString()+'</div>'},set:function(value){if(value==null||value==''){gform.each.call(this,function(field){field.set('')})
this.update({},!0)}else{_.each(value,function(item,index){var field=this.find(index);if(field.array&&_.isArray(item)){var list=this.filter({array:{ref:field.array.ref}},1)
if(list.length>1){_.each(list.slice(1),function(field){var index=_.findIndex(field.parent.fields,{id:field.id});field.parent.fields.splice(index,1)})}
var testFunc=function(selector,status,button){gform.toggleClass(button.querySelector(selector),'hidden',status)}
if(_.isArray(item)){field.set(item[0])}
var attr={};attr[field.name]=item;gform.inflate.call(this.owner,attr,field,_.findIndex(field.parent.fields,{id:field.id}),field.parent.fields);var fieldCount=this.filter({array:{ref:field.array.ref}},1).length
field.operator.reflow()}else{if(typeof field!=='undefined'){field.set(item)}}}.bind(this))}
this.render();return!0},find:function(name){return gform.find.call(this,name)},reflow:function(options){gform.reflow.call(this,options)},focus:function(){if(typeof this.fields!=='undefined'&&this.fields.length){gform.types[this.fields[0].type].focus.call(this.fields[0])}},satisfied:function(value){value=value||this.get();return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='object'&&_.isEmpty(value)))},trigger:function(a,b,c){if(typeof a=='string'){a=[a]}
var events=_.extend([],a);_.each(a,function(item){if(item.indexOf(':')=='-1'){events.unshift(item+':'+this.name)}}.bind(this))
this.parent.trigger(_.uniq(events),b||this,c)},show:function(state){if(this.owner.options.sections&&this.section){return!0}
this.el.style.display=state?"block":"none"}},'button':{base:'button',resetValue:()=>{return""},setLabel:function(){var label=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);if(this.required){label+=this.requiredText+this.suffix}
var labelEl=this.el;if(labelEl!==null){labelEl.innerHTML=label}},toString:function(){return''},defaults:{parse:!1,columns:2,target:".gform-footer",map:!1},create:function(){var tempEl=gform.create(this.render());tempEl.setAttribute("id","el_"+this.id);return tempEl},initialize:function(){this.action=this.action||(this.label||'').toLowerCase().split(' ').join('_'),this.onclickEvent=function(){if(this.editable){this.parent.trigger('click',this,{action:this.action});this.parent.trigger(this.action,this)}}.bind(this)
this.el.addEventListener('click',this.onclickEvent);gform.types[this.type].setLabel.call(this)},render:function(){return gform.render('button',this)},satisfied:function(value){return this.editable&&this.visible},update:function(item,silent){if(typeof item==='object'){_.extend(this,this.item,item)}
var oldDiv=this.el;this.destroy();this.el=gform.types[this.type].create.call(this);oldDiv.parentNode.replaceChild(this.el,oldDiv);this.owner.call('initialize',this);this.owner.call('show',this,this.visible);this.owner.call('edit',this,this.editable)},destroy:function(){this.el.removeEventListener('click',this.onclickEvent)},get:function(name){return null},set:function(value){},edit:function(state){this.editable=state;this.el.disabled=!state;gform.toggleClass(this.el,'disabled',!state)},show:function(state){this.el.style.display=state?"block":"none"},focus:function(){this.el.focus()}}};gform.types.text=gform.types.password=gform.types.color=gform.types.input;gform.types.number=_.extend({},gform.types.input,{get:function(){return('el' in this)?parseFloat(this.el.querySelector('input[name="'+this.name+'"]').value,10):this.internalValue},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+this.value+'"')},});gform.types.hidden=_.extend({},gform.types.input,{defaults:{columns:!1},toString:function(name,report){if(!report){return''}else{return this.value}}});gform.types.output=_.extend({},gform.types.input,{defaults:{parse:!1},focus:function(){},toString:function(name,report){if(!report){return''}else{return this.value}},display:function(){return gform.renderString((this.format||{}).value||'{{{value}}}',_.pick(this,"value",'name','id','inline','valid','map','path','parsable','reportable','visible','parent','owner','data','editable','parent','fillable','array','columns','offset','ischild','pre','post'))},render:function(){return gform.render(this.type,this)},get:function(){return this.value},set:function(value){this.internalValue=value;if('el' in this)this.el.querySelector('output').innerHTML=this.display},});gform.types.email=_.extend({},gform.types.input,{defaults:{validate:[{type:'valid_email'}]}});gform.types.textarea=_.extend({},gform.types.input,{set:function(value){this.el.querySelector('textarea[name="'+this.name+'"]').value=value},get:function(){return('el' in this)?this.el.querySelector('textarea[name="'+this.name+'"]').value:this.internalValue},render:function(){return gform.render(this.type,this).split('></textarea>').join('>'+_.escape(this.value)+'</textarea>')},focus:function(timeout){window.setTimeout(function(){if(this.el.querySelector('textarea[name="'+this.name+'"]')!==null&&typeof this.el.querySelector('textarea[name="'+this.name+'"]').focus=="function"){this.el.querySelector('textarea[name="'+this.name+'"]').focus();var temp=this.value;this.set('');this.set(temp)}}.bind(this),timeout||0)}});gform.types['switch']=gform.types.checkbox=_.extend({},gform.types.input,gform.types.bool);gform.types.select=_.extend({},gform.types.input,gform.types.collection,{render:function(){if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getobject()
this.list=this.mapOptions.getoptions()
if((this.other||!1)&&typeof _.find(this.list,{value:'other'})=='undefined'){this.options.push({label:"Other",value:'other'})
this.list.push({label:"Other",value:'other'})}
if(typeof this.placeholder=='string'){this.options.unshift({label:this.placeholder,value:'',i:-1,editable:!1,visible:!1,selected:!0})
this.list.unshift({label:this.placeholder,value:'',i:-1,editable:!1,visible:!1,selected:!0})}
if(!this.mapOptions.waiting){if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}
_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;var search=_.find(this.list,{value:this.value});if(typeof search=='undefined'){if(typeof this.placeholder=='string'){this.value=''}else{this.value=(this.list[0]||{value:""}).value
if(this.list.length){this.list[0].selected=!0}}}else{search.selected=!0}}}
this.update()}.bind(this))
this.mapOptions.on('collection',function(e){e.field.field.owner.trigger("collection",e.field.field)})}
this.options=this.mapOptions.getobject();this.list=this.mapOptions.getoptions()
if(typeof this.placeholder=='string'){this.options.unshift({label:this.placeholder,value:'',i:-1,editable:!1,visible:!1,selected:!0})
this.list.unshift({label:this.placeholder,value:'',i:-1,editable:!1,visible:!1,selected:!0})}
if(!this.mapOptions.waiting){if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{if((this.other||!1)&&typeof _.find(this.list,{value:'other'})=='undefined'){this.options.push({label:"Other",value:'other'})
this.list.push({label:"Other",value:'other'})}(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;var search=_.find(this.list,{value:this.value});if(typeof search=='undefined'){if(this.other||!1){this.value='other'}else{if(typeof this.placeholder=='string'){this.value=''}else{this.value=(this.list[0]||{value:""}).value
if(this.list.length){this.list[0].selected=!0}}}}else{search.selected=!0}}}
return gform.render('select',this)}});gform.types.range=_.extend({},gform.types.input,gform.types.collection,{get:function(){return('el' in this)?(this.el.querySelector('[type=range]')||{value:''}).value:this.internalValue},set:function(value){this.el.querySelector('[type=range]').value=value}});gform.types.radio=_.extend({},gform.types.input,gform.types.collection,{setup:function(){if(this.multiple&&typeof this.limit!=='undefinded'){if(this.get().length>=this.limit){this.maxSelected=!0;_.each(this.el.querySelectorAll('[type=checkbox]'),function(item){item.disabled=!item.checked})}else if(this.maxSelected){this.maxSelected=!1;_.each(this.el.querySelectorAll('[type=checkbox]'),function(item){item.disabled=!1})}
if(this.el.querySelector('.count')!=null){var text=this.get().length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}}
this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info')},render:function(){if(typeof this.item.size!=='undefined'){this.size=Math.floor(((gform.columns||12)/this.item.size))}
if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getobject()
this.list=this.mapOptions.getoptions()
if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}
_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;(_.find(this.list,{value:this.value})||{value:""}).selected=!0}
this.update()}.bind(this))
this.mapOptions.on('collection',function(e){e.field.field.owner.trigger("collection",e.field.field)})}
this.options=this.mapOptions.getobject();this.list=this.mapOptions.getoptions()
if(!this.mapOptions.waiting){if(this.multiple){if(!_.isArray(this.value)){this.value=[this.value]}(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;_.each(this.value,function(value){(_.find(this.list,{value:value})||{selected:null}).selected=!0}.bind(this))}else{var search=_.find(this.list,{value:this.value});if(typeof search=='undefined'){if(this.other||!1){this.value='other'}else{}}
if((this.other||!1)&&typeof _.find(this.list,{value:'other'})=='undefined'){this.options.push({label:"Other",value:'other',})}(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;(_.find(this.list,{value:this.value})||{value:""}).selected=!0}}
return gform.render(this.type,this)},get:function(){if(!('el' in this)){return this.internalValue};if(this.multiple){var that=this;return _.transform(this.el.querySelectorAll('[type="checkbox"]:checked'),function(value,item){value.push(_.find(that.list,{i:parseInt(item.value)}).value).bind},[])}else{return(_.find(this.list,{i:parseInt((this.el.querySelector('[type="radio"]:checked')||{value:null}).value)})||{value:''}).value}},set:function(value){if(this.multiple){if(!_.isArray(value)){value=[value]}
if(typeof this.limit!=='undefinded'&&(value.length>this.limit)){return!0}
_.each(this.el.querySelectorAll('[type=checkbox]'),function(option){var search=_.find(this.list,{i:parseInt(option.value)})
option.selected=(typeof search!=='undefined'&&value.indexOf(search.value)>=0);option.checked=(typeof search!=='undefined'&&value.indexOf(search.value)>=0)}.bind(this))}else{(this.el.querySelector('[value="'+(_.find(this.list,{value:this.value})||{i:''}).i+'"]')||{}).checked=!1
var option=_.find(this.list,{value:value});if(typeof option!=='undefined'){var el=this.el.querySelector('[value="'+option.i+'"]');if(el!==null){value=value;el.checked='checked'}}else{value=this.default||null
var option=_.find(this.list,{value:value});if(typeof option=='undefined'&&typeof this.defaultIndex!=='undefined'){option=_.find(this.list,{index:''+this.defaultIndex})}
if(typeof option!=='undefined'){var el=this.el.querySelector('[value="'+option.i+'"]');if(el!==null){el.checked='checked'}}}}
if(typeof gform.types[this.type].setup=='function'){gform.types[this.type].setup.call(this)}},edit:function(state){this.editable=state;_.each(this.el.querySelectorAll('input'),function(item){item.disabled=!state})},focus:function(){this.el.querySelector('[type="radio"],[type="checkbox"]').focus()}});gform.types.scale=_.extend({},gform.types.radio);gform.types.checkboxes=_.extend({},gform.types.radio,{multiple:!0});gform.types._grid_row=_.extend({},gform.types.hidden,{toString:function(name,report){if(!report){if(this.multiple){if(this.value.length){return _.reduce(this.value,function(returnVal,item){var lookup=_.find(this.list,{value:item});if(typeof lookup!=='undefined'){returnVal+='<span>'+lookup.label+'</span>'}
return returnVal}.bind(this),'<tr><td style="width:20%">'+this.label+'</td><td>')+'</td><tr>'}else{return'<tr><td style="width:20%">'+this.label+'</td> <td><span class="text-muted">(no selection)</span></td></tr>'}}else{return'<tr><td style="width:20%">'+this.label+'</td> <td>'+((_.find(this.parent.list,{value:this.parent.value[this.name]})||{label:""}).label||'<span class="text-muted">(no selection)</span>')+'</td></tr>'}}else{if(this.multiple){if(this.value.length){return _.reduce(this.value,function(returnVal,item){var lookup=_.find(this.list,{value:item});if(typeof lookup!=='undefined'){returnVal.push(lookup.label)}
return returnVal}.bind(this),[])+'<hr>'}else{return''}}else{return(_.find(this.list,{value:this.value})||{label:""}).label}}},})
gform.types.grid=_.extend({},gform.types.input,gform.types.section,gform.types.collection,{toString:function(name,report){if(!report){return'<dt>'+this.label+'</dt><dd><table class="table table-bordered">'+gform.toString.call(this,name)+'</table></dd><hr>'}else{return gform.toString.call(this,name,report)}},render:function(){if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getobject()
this.list=this.mapOptions.getoptions()
this.update()}.bind(this))}
this.options=this.mapOptions.getobject()
this.list=this.mapOptions.getoptions()
this.fields=_.map(this.fields,function(field){return _.assignIn({name:(gform.renderString(field.label)||'').toLowerCase().split(' ').join('_'),id:gform.getUID(),label:field.id||field.name,},field)})
return gform.render(this.type,this)},setup:function(){if(this.multiple&&typeof this.limit!=='undefinded'){_.each(this.fields,function(field){var value=this.value[field.name]||[];if(value.length>=this.limit){field.maxSelected=!0;_.each(this.el.querySelectorAll('[type=checkbox][name="'+field.id+'"]'),function(item){item.disabled=!item.checked})}else if(field.maxSelected){field.maxSelected=!1;_.each(this.el.querySelectorAll('[type=checkbox][name="'+field.id+'"]'),function(item){item.disabled=!1})}}.bind(this))}else{_.each(this.fields,function(field){var el=this.el.querySelector('[name="'+field.id+'"][value="'+(this.value[field.name]||'')+'"]');if(el!==null){el.checked='checked'}}.bind(this))}
this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info')},initialize:function(){this.el.addEventListener('change',function(){this.value=this.get();gform.types[this.type].setup.call(this);this.parent.trigger(['change','input'],this,{input:this.value})}.bind(this));gform.types[this.type].setup.call(this);this.rows=[];this.fields=_.map(this.fields,function(item){item.type='_grid_row';return item})
gform.types[this.type].setLabel.call(this)},get:function(){if(!('el' in this)){return this.internalValue};if(this.multiple){return _.transform(this.fields,function(result,field){result[field.name]=_.transform(this.el.querySelectorAll('[type="checkbox"][name="'+field.id+'"]:checked'),function(value,item){value.push(item.value)},[])}.bind(this),{})}else{return _.transform(this.fields,function(result,field){result[field.name]=(this.el.querySelector('[type="radio"][name="'+field.id+'"]:checked')||{value:''}).value}.bind(this),{})}},set:function(value){if(this.multiple){_.each(this.fields,function(value,field){if(typeof this.limit!=='undefinded'&&value!=null&&(value.length>this.limit)){return!0}
_.each(this.el.querySelectorAll('[name="'+field.id+'"][type=checkbox]'),function(value,option){option.checked=(value.indexOf(option.value)>=0)}.bind(this,value[field.name]))}.bind(this,value))}else{_.each(this.fields,function(field){var el=this.el.querySelector('[name="'+field.id+'"][value="'+value[field.name]+'"]');if(el!==null){el.checked='checked'}}.bind(this))}
this.internalValue=value;gform.types.grid.setup.call(this)},focus:function(){this.el.querySelector('[name="'+this.fields[0].id+'"]').focus()}});gform.types.fieldset=_.extend({},gform.types.input,gform.types.section,{});gform.types.template=_.extend({},gform.types.input,gform.types.section,{array:{columns:-1,template:(data)=>{return gform.create(gform.render('template',data))},container:".col-xs-12",rowClass:"list-group",max:5,min:1,duplicate:{enable:!0},remove:{enable:!0},append:{enable:!0},sortable:{enable:!0}},setLabel:function(){var label=gform.renderString(this.item.label||this.label,this);if(this.required){label+=this.requiredText+this.suffix}
var labelEl=this.el.querySelector('fieldset#'+this.id+'>legend,fieldset#'+this.id+'>label')
if(labelEl!==null){labelEl.innerHTML=label}
this.label=label;this.render()},edit:function(e){if(e===this||(!e.target.classList.contains('gform-minus')&&!e.target.classList.contains('gform-add')&&!e.target.parentNode.classList.contains('gform-minus')&&!e.target.parentNode.classList.contains('gform-add'))){this.modalEl=gform.create(gform.render("modal_container",{body:'<div class="gform-modal_body"></div>',footer:gform.render('child_modal_footer'),legend:this.label,name:"preview"}))
this.container.addEventListener('click',this.owner.listener)
this.modalEl.querySelector('.gform-modal_body').appendChild(this.container);this.modal=gform.prototype.modal.bind(this);this.modal();this.find({visible:!0}).focus(this.owner.modalDelay);this.modalEl.querySelector('.done').addEventListener('click',()=>{this.render();this.modal("hide")});this.modalEl.querySelector('.gform-footer .gform-minus').addEventListener('click',function(e){this.modal('hide');this.modalEl.querySelector('.gform-modal_body').removeChild(this.container);this.container.removeEventListener('click',this.owner.listener)
this.am.removeField(this)}.bind(this))}},create:function(){var tempEl=gform.create('<div class="list-group-item"></div>');gform.addClass(tempEl,'gform-edit');tempEl.setAttribute("id","el_"+this.id);this.container=gform.create('<fieldset></fieldset>');tempEl.removeEventListener('click',gform.types.template.edit.bind(this))
tempEl.addEventListener('click',gform.types.template.edit.bind(this))
this.render(tempEl);return tempEl},focus:function(e){this.owner.call('edit',this)},render:function(el){el=el||this.el;while(el.firstElementChild){el.removeChild(el.firstElementChild)}
switch(typeof this.format.template){case 'string':el.innerHTML=gform.renderString(this.format.template,this);break;case 'function':el.innerHTML=this.format.template.call(null,this);break;default:el.innerHTML=gform.render('template_item',this)}
return el},display:function(){return gform.renderString((this.format.template||'<div><h3>{{{label}}}</h3><dl class="dl-horizontal">{{#_items}}<dt>{{{label}}}</dt><dd>{{{display}}}</dd>{{/_items}}</dl></div>'),_.pick(this,"value",'label','name','id','inline','valid','map','path','parsable','reportable','visible','parent','editable','parent','fillable','array','columns','offset','ischild','pre','post','_items'))}})
gform.types.table=_.extend({},gform.types.input,gform.types.section,{array:{template:(data)=>{return gform.create(gform.render('table',{ref:data.id,labels:_.map(data.field.fields,item=>(item.array)?item.array.label||item.label:item.label||item.name),...data.field}))},container:"table",rowTemplate:"<table><tbody></tbody></table>",rowSelector:"tbody",rowClass:"table-row",max:20,min:0,duplicate:{enable:!1},remove:{enable:!1},append:{enable:!0},sortable:{enable:!0}},edit:function(e){if(e===this||!e.target.classList.contains('gform-minus')&&!e.target.classList.contains('gform-add')){this.modalEl=gform.create(gform.render("modal_container",{body:'<div class="gform-modal_body"></div>',footer:gform.render('child_modal_footer'),legend:this.label,name:"preview"}))
this.container.addEventListener('click',this.owner.listener)
this.modalEl.querySelector('.gform-modal_body').appendChild(this.container);this.modal=gform.prototype.modal.bind(this);this.modal();this.find({visible:!0}).focus(this.owner.modalDelay);this.modalEl.querySelector('.done').addEventListener('click',()=>{this.action='done';this.modal("hide")});this.modalEl.querySelector('.gform-footer .gform-minus').addEventListener('click',()=>{this.action='remove';this.modal('hide')});$(this.modalEl).on('hidden.bs.modal',function(e){console.log(this.action)
switch(this.action){case 'remove':this.modalEl.querySelector('.gform-modal_body').removeChild(this.container);this.container.removeEventListener('click',this.owner.listener)
this.am.removeField(this);break;case 'done':case 'closed':default:this.render()}}.bind(this))}},create:function(){var tempEl=document.createElement("tr");gform.addClass(tempEl,'gform-edit');tempEl.setAttribute("id","el_"+this.id);this.container=gform.create('<fieldset></fieldset>');tempEl.removeEventListener('click',gform.types.table.edit.bind(this))
tempEl.addEventListener('click',gform.types.table.edit.bind(this))
this.render(tempEl);return tempEl},focus:function(e){this.owner.call('edit',this)},render:function(el){el=el||this.el;while(el.firstElementChild){el.removeChild(el.firstElementChild)}
el.innerHTML="";_.reduce(this._items,(el,field)=>{var renderable="";if(typeof(this.value||{})[field.name]!=='undefined'&&(this.value||{})[field.name]!==''){renderable=(this.value||{})[field.name]}else if(typeof field.value!=='undefined'&&field.value!==''){renderable=field.value}
var cellText=document.createTextNode(renderable);if(typeof field.display!=='undefined'){if(typeof field.display=='string'){cellText=gform.create(field.display)}else if(typeof field.display=='function'){cellText=gform.create(field.display.call(this))}}
var cell=document.createElement("td");if(typeof field.array!=='undefined'){cell.setAttribute("id",field.array.ref)}
cell.appendChild(cellText);el.appendChild(cell);return el},el)}})
gform.types.custom_radio=_.extend({},gform.types.input,gform.types.collection,{set:function(value){var target=this.el.querySelector('[data-value="'+value+'"]');if(target!==null){target.click()}},defaults:{selectedClass:'btn btn-success',defaultClass:'btn btn-default',},get:function(){if(!('el' in this)){return this.internalValue};return(this.el.querySelector('.'+this.selectedClass.split(' ').join('.'))||({dataset:{value:""}})).dataset.value},toggle:function(e){var elem=this.el.querySelector('.'+this.selectedClass.split(' ').join('.'));gform.toggleClass(elem,this.selectedClass,!1)
gform.toggleClass(elem,this.defaultClass,!0)
gform.toggleClass(e.target,this.defaultClass,!1)
gform.toggleClass(e.target,this.selectedClass,!0)
this.owner.trigger('change',this);this.owner.trigger('input',this)},initialize:function(){var anchors=this.el.querySelectorAll('a');for(const anchor of anchors){anchor.removeEventListener('click',gform.types[this.type].toggle.bind(this));anchor.addEventListener('click',gform.types[this.type].toggle.bind(this))}
gform.types[this.type].setLabel.call(this)}});gform.m=function(n,t,e,r){var i,o=gform.m,a="";function f(n,t){return n=null!=(n=n[(t=t.pop?t:t.split(".")).shift()])?n:"",0 in t?f(n,t):n}t=Array.isArray(t)?t:t?[t]:[],t=r?0 in t?[]:[1]:t;for(i=0;i<t.length;i++){var s,l="",p=0,g="object"==typeof t[i]?t[i]:{};(g=Object.assign({},e,g))[""]={"":t[i]},n.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,function(n,t,e,r,i,c,u){p?l+=p&&!i||1<p?n:t:(a+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,function(n,t,e,r,i,c){return t?f(g,t):r?f(g,c):i?o(f(g,c),g):e?"":new Option(f(g,c)).innerHTML}),s=c),i?--p||(u=f(g,u),/^f/.test(typeof u)?a+=u.call(g,l,function(n){return o(n,g)}):a+=o(l,u,g,s),l=""):++p})}return a}
gform.render=function(template,options){return gform.renderString(gform.stencils[template||'text']||gform.stencils.text,_.extend({},gform.stencils,options))}
gform.create=function(text,selector){return document.createRange().createContextualFragment(text).querySelector(selector||'*')||document.createRange().createContextualFragment(text).firstChild}
gform.renderString=function(string,options){return gform.m(string||'',_.extend({math:function(ms,render){return math.eval(render(ms),_.omit(this,'toString'))},moment:function(name,render){var parts=name.split('|')
var date=moment(render(parts.shift()));return(parts[0]=="fromNow")?date.fromNow():date.format(parts[0])}},this.methods,options))}
gform.addClass=function(elem,classes){if(typeof classes!=='undefined'&&classes.length&&typeof elem!=='undefined'&&!!elem){elem.className=_.chain(elem.className).split(/[\s]+/).union(classes.split(' ')).join(' ').value()}};gform.hasClass=function(elem,classes){if(typeof classes!=='undefined'&&classes.length&&typeof elem!=='undefined'&&!!elem){return(elem.className.indexOf(classes)!==-1)}};gform.removeClass=function(elem,classes){if(typeof classes!=='undefined'&&classes.length&&typeof elem!=='undefined'&&!!elem){elem.className=_.chain(elem.className).split(/[\s]+/).difference(classes.split(' ')).join(' ').value()}};gform.toggleClass=function(elem,classes,status){if(status){gform.addClass(elem,classes)}else{gform.removeClass(elem,classes)}};gform.ajax=function(options){var request=new XMLHttpRequest();request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200){try{options.success(JSON.parse(request.response))}catch(e){options.success(_.pick(request,'statusText','responseText'))}}else{if(typeof options.error=='function'){options.error(request.responseText)}}}}
request.open(options.verb||'GET',options.path);request.send()}
gform.patch=function(object,patch,action){if(!_.isArray(patch)){patch=[patch]}
return _.reduce(patch,function(original,task){if(typeof task.map!=="string"||original==null){return original}
var stack=_.toPath(task.map);var object=original;while(stack.length>1){var target=stack.shift();if(typeof object[target]!=='object'){if(isFinite(stack[0])){if(!_.isArray(object[target])){object[target]=[]}}else{object[target]={}}}
if(object[target]!=null){object=object[target]}}
var target=stack.shift()
if(task.action=="delete"){if(_.isArray(object)){object.splice(target,1)}else{delete object[target];object=_.compact(object)}}else{let value=('toJSON' in task)?task.toJSON:task.value;if(target)
object[target]=('toJSON' in task)?task.toJSON:task.value;if(object[target]==null)delete object[target]}
return original},object||{})}
_.mixin({score:function(base,abbr,offset){offset=offset||0;if(abbr.length===0)return 0.9;if(abbr.length>base.length)return 0.0;for(var i=abbr.length;i>0;i--){var sub_abbr=abbr.substring(0,i);var index=base.indexOf(sub_abbr);if(index<0)continue;if(index+abbr.length>base.length+offset)continue;var next_string=base.substring(index+sub_abbr.length);var next_abbr=null;if(i>=abbr.length){next_abbr=''}else{next_abbr=abbr.substring(i)}
var remaining_score=_.score(next_string,next_abbr,offset+index);if(remaining_score>0){var score=base.length-next_string.length;if(index!==0){var c=base.charCodeAt(index-1);if(c==32||c==9){for(var j=(index-2);j>=0;j--){c=base.charCodeAt(j);score-=((c==32||c==9)?1:0.15)}}else{score-=index}}
score+=remaining_score*next_string.length;score/=base.length;return(score)}}
return(!1)},selectPath:function(object,path){return _.property(path)(object)
if(typeof object=='undefined')return undefined;var obj=object;if(typeof object.toJSON=="function"){obj=object.toJSON()}else{obj=_.extend({},obj)}
return _.reduce(_.toPath(path),(i,map)=>{if(typeof i=='object'&&i!==null){return i[map]}else{return undefined}},obj)}});gform.eventBus=function(options,owner){this.options=options||{owner:'form',item:'field'};this.owner=owner||this;this.on=function(event,handler,ref){if(typeof event!='undefined'){var events=event.split(/(?:,| )+/);_.each(events,function(ref,event){this.handlers[event]=this.handlers[event]||[];if(typeof handler=='function'){this.handlers[event].push(handler);if(typeof ref=='object'){ref.push(handler)}}else{if(typeof this.owner.methods[handler]=='function'){this.handlers[event].push(this.owner.methods[handler])}}}.bind(this,ref))}
return this.owner}.bind(this);if(_.isArray(options.handlers)){this.handlers={};_.each(options.handlers,function(item){if(item!==null&&'event' in item&&'handler' in item)this.on(item.event,item.handler)}.bind(this))}else{this.handlers=_.extend({},options.handlers)}
_.each(this.handlers,function(a,b,c){if(typeof a=='function'){c[b]=[a]}else if(typeof a=='string'){if(typeof this[a]=='function'){c[b]=[this[a]]}else{if(typeof this.owner[a]=='function'){c[b]=[this.owner[a]]}else{if('methods' in this.owner&&typeof this.owner.methods[a]=='function'){c[b]=[this.owner.methods[a]]}else{if(typeof window[a]=='function'){c[b]=[window[a]]}else{c[b]=null}}}}}}.bind(this))
this.dispatch=function(e,f,a){a=a||{};a[this.options.owner]=this.owner;if(typeof f!=='undefined'){a[this.options.item]=f}
a.default=!0;a.continue=!0;a.preventDefault=function(){this.default=!1}.bind(a)
a.stopPropagation=function(){this.continue=!1}.bind(a)
var events=[];if(typeof e=='string'){events.push(e)}else{events=events.concat(e)}
_.each(events,function(args,event){args.event=event;var f=function(handler){if(a.continue){if(typeof handler=='function'){handler.call(owner,args)}}}.bind(this)
if(event in this.handlers){_.each(this.handlers[event],f);_.each(this.handlers['&'],f)}
_.each(this.handlers['*'],f)}.bind(this,a))
return a}.bind(this)}
gform.collectionManager=function(refObject){var collections={...refObject};var map=refObject||{};var configuration={};var add=(options,data)=>{let name;if(typeof options=='object'){({name,path,method}=options)}else{name=options;options={name:options}}
if(!(name in configuration)){Object.defineProperty(map,name,{get:()=>{return collections[name]},set:value=>{collections[name]=value;eventBus.dispatch(name,collections[name]);eventBus.dispatch('change',name)},enumerable:!0})}
if(typeof method=='function'){map[name]=method.call()}
configuration[name]=options;map[name]=data;if(typeof path=='string'){gform.ajax({path:path,success:data=>{update(name,data)}})}}
var update=(options,data)=>{let name;if(typeof options=='object'){({name,path,method}=options)}else{name=options}
if(!(name in configuration)){add(options,data)}else{if(typeof data!=='undefined'){map[name]=data}}}
var self={add:add,get:name=>(typeof name=='undefined')?collections:map[name],update:update,};var eventBus=new gform.eventBus({owner:'manager',item:'collection',handlers:{}},self);self.on=eventBus.on;_.each(Object.keys(collections),name=>{add(name,collections[name])});return self}
gform.VERSION='0.0.2.0';gform.i=0;gform.getUID=function(){return'f'+(gform.i++)};gform.about=function(){return _.extend({version:gform.VERSION},gform.THEME,{types:_.keys(gform.types)})};gform.each=function(func){_.each(this.fields,function(field){func(field);if('fields' in field){gform.each.call(field,func)}})}
gform.reduce=function(func,object,filter){var object=object||{};_.reduce(this.filter(filter,1),function(object,field){var temp=func(object,field);if('fields' in field){temp=gform.reduce.call(field,func,temp,filter)}
return temp},object)
return object}
gform.iterators={reduce:function(func,object,filter){var object=object||{};if(!("_items" in this)||!this._items.length)return object;_.reduce(gform.iterators.filter.call(this,filter,{depth:1,stopOnFail:!0}),function(object,item){return func(object,item)},object)
return object},filter:function(search,options){var{depth=10,stopOnFail=!1}=options||{};var temp=[];if(typeof search=='string'){search={name:search}}
depth--;temp=_.reduce(this._items,(temp,item)=>{if(!_.isMatch(item,search)&&stopOnFail){return temp}
if(_.isMatch(item,search)){temp.push(item)}
if(!!depth&&item instanceof gform.arrayManager){temp=_.reduce(item.instances,function(temp,instance){if(!stopOnFail||_.isMatch(instance,search)){temp=temp.concat(gform.iterators.filter.call(instance,search,{depth:depth,stopOnFail:stopOnFail}))}
return temp},temp)}else{}
if(!!depth&&('_items' in item)&&item._items.length){temp=temp.concat(gform.iterators.filter.call(item,search,{depth:depth,stopOnFail:stopOnFail}))}
return temp},temp)
return temp},find:function(search,depth){var temp=null;if(typeof search=='string'){search={name:search}}
var depth=(depth||10);depth--;temp=_.reduce(this._items,(temp,item)=>{if(temp!==null)return temp;if(_.isMatch(item,search)){return item}
if(item instanceof gform.arrayManager){temp=_.reduce(item.instances,function(temp,instance){if(temp!==null)return temp;if(_.isMatch(instance,search)){temp=instance}else{temp=gform.iterators.find.call(instance,search,depth)}
return temp},temp)}
if(!!depth&&('_items' in item)&&item._items.length){temp=gform.iterators.find.call(item,search,depth)}
return temp},temp)
return temp}}
gform.find=function(oname,depth){var name;var temp;if(typeof oname=='string'){name=oname.split('.');temp=_.find(this.fields,{name:name.shift()})}else if(typeof oname=='number'){}else if(typeof oname=='object'){return gform.filter.call(this,oname,depth)[0]||!1}
if(typeof temp!=='undefined'){if('find' in temp){if(temp.name==oname||typeof oname=='number'){return temp}
return temp.find(name.join('.'))}else{return temp}}else{if(typeof this.parent!=='undefined'&&typeof this.parent.find=='function'){return this.parent.find(oname)}}}
gform.filter=function(search,depth){var temp=[];if(typeof search=='string'){search={name:search}}
var depth=(depth||10);depth--;_.each(this['fields'],function(depth,field){if(_.isMatch(field,search)){temp.push(field)}
if(!!depth&&('fields' in field)){temp=temp.concat(gform.filter.call(field,search,depth))}}.bind(null,depth))
return temp}
gform.collections=new gform.collectionManager()
gform.instances={};gform.prototype.options={autoFocus:!0,rootpath:'',actions:[{type:'cancel'},{type:'save'}],rowClass:'row',default:{type:'text',suffix:':',requiredText:'<span style="color:red">*</span>',validate:[],valid:!0,parsable:!0,reportable:!0,visible:!0,editable:!0,fillable:!0,array:!1},clear:!0,sections:'',}
gform.toJSON=function(name){if(typeof name=='string'&&name.length>0){var field=this.find({map:name},_.toPath(name).length)
if(!field){field=this.find({name:name},_.toPath(name).length)
if(!field){return undefined}}
return field.get()}
let obj={};if(typeof name=='boolean'&&name){obj=this.options.data}
if(typeof name=='object'){obj=name}
return gform.iterators.reduce.call(this,gform.patch,obj,{parsable:!0})}
gform.toString=function(name,report){if(!report){if(typeof name=='string'&&name.length>0){name=name.split('.');return _.find(this.fields,{name:name.shift()}).toString(name.join('.'))}
var obj="";_.each(this.fields,function(field){if(field.reportable){obj+=field.toString()}})
return obj}else{if(typeof name=='string'&&name.length>0){name=name.split('.');return _.find(this.fields,{name:name.shift()}).toString(name.join('.'),report)}
var obj={};_.each(this.fields,function(field){if(field.visible||field.reportable){if(field.array){obj[field.name]=obj[field.name]||[];obj[field.name].push(field.toString(name,!0))}else{obj[field.name]=field.toString(name,!0)}}})
return obj}}
gform.addConditions=function(field){gform.processConditions.call(field,field.show,function(result){var events=(this.visible!==result);this.visible=result;gform.types[this.type].show.call(this,this.visible);if(events&&this.owner.isActive){(this.am||this.owner).reflow();this.owner.trigger('change',this)}})
gform.processConditions.call(field,field.edit,function(result){this.editable=result;this.owner.call('edit',this,this.editable)})
if(!('parse' in field)){field.parse=field.show}
gform.processConditions.call(field,field.parse,function(result){this.parsable=result})
if(!('report' in field)){field.report=field.show}
gform.processConditions.call(field,field.report,function(result){this.reportable=result})
if(field.required){gform.processConditions.call(field,field.required,function(result){if(this.required!==result){this.required=result;gform.types[this.type].setLabel.call(this)}})}}
gform.mapOptions=function(optgroup,value,count,collections,waitlist){waitlist=waitlist||[];if(optgroup.owner instanceof gform){this.owner=optgroup.owner;this.field=optgroup}
this.collections=collections;this.eventBus=new gform.eventBus({owner:'field',item:'option'},this)
this.optgroup=_.extend({},optgroup);count=count||0;var format=this.optgroup.format;function pArray(opts){return _.map(opts,function(item){if(typeof item==='object'&&item.type=='optgroup'){item.map=new gform.mapOptions(_.extend({format:format,owner:this.owner},item),value,count,this.collections,waitlist);item.map.on('*',function(e){this.eventBus.dispatch(e.event)}.bind(this))
item.id=gform.getUID();gform.processConditions.call(this.owner,item.edit,function(id,result,e){_.find(this.optgroup.options,{id:id}).editable=result
this.eventBus.dispatch('change')}.bind(this,item.id))
gform.processConditions.call(this.owner,item.show,function(id,result,e,){_.find(this.optgroup.options,{id:id}).visible=result
this.eventBus.dispatch('change')}.bind(this,item.id))
count+=item.map.getoptions().length;return item}else{var option=_.extend({},item)
option.data=item;if(typeof item==='string'||typeof item==='number'||typeof item=='boolean'){option.label=option.value=item}
option.index=item.index||""+count;if(typeof format!=='undefined'){option=_.reduce(['label','display','value'],function(option,prop){if(prop in format){if(prop in option){option.original=option.original||{};option.original[prop]=option[prop]}
option[prop]=(typeof format[prop]=='string')?gform.renderString(format[prop],option):(typeof format[prop]=='function')?format[prop].call(this,option):option[prop]}
return option}.bind(this),option)}
if(option.value==value||(typeof value!=='undefined'&&value!==null&&value.length&&(value.indexOf(option.value)>=0))){option.selected=!0}
count+=1;option.i=count;return option}''}.bind(this))}
this.optgroup.options=this.optgroup.options||[];switch(typeof this.optgroup.options){case 'string':this.optgroup.path=this.optgroup.path||this.optgroup.options;this.optgroup.options=[]
break;case 'function':this.optgroup.action=this.optgroup.options;this.optgroup.options=[]
break}
if('max' in this.optgroup&&this.optgroup.max!==''){for(var i=(this.optgroup.min||0);i<=this.optgroup.max;i=i+(this.optgroup.step||1)){this.optgroup.options.push(""+i)}}
if(typeof this.optgroup.action=='function'){this.optgroup.options=this.optgroup.options.concat(pArray.call(this,this.optgroup.action.call(this)))}
if(_.isArray(this.optgroup.options)){this.optgroup.options=pArray.call(this,this.optgroup.options)}
if(_.isString(this.optgroup.path)&&this.optgroup.path){this.collections.on(this.optgroup.path,function(e){this.optgroup.options=pArray.call(this.optgroup.map,e.collection);if(waitlist.indexOf(e.event)>=0){delete waitlist[waitlist.indexOf(e.event)]}
this.eventBus.dispatch('change')}.bind(this))
if(!this.collections.get(this.optgroup.path)||this.collections.get(this.optgroup.path)=='waiting'){if(waitlist.indexOf(this.optgroup.path)==-1){waitlist.push(this.optgroup.path)}
if(this.collections.get(this.optgroup.path)!=='waiting'){this.collections.add(this.optgroup.path,'waiting')
gform.ajax({path:(this.owner.options.rootpath||'')+this.optgroup.path,success:function(data){this.collections.update(this.optgroup.path,data)
if(waitlist.indexOf(this.optgroup.path)>=0){delete waitlist[waitlist.indexOf(this.optgroup.path)]}
this.eventBus.dispatch('collection');this.eventBus.dispatch('change',)}.bind(this)})}}else{this.optgroup.options=pArray.call(this.optgroup.map,this.collections.get(this.optgroup.path))}}
var response={getobject:function(){var temp={};temp=_.map(this.optgroup.options,function(item){item.visible=('visible' in item)?item.visible:!0
item.editable=('editable' in item)?item.editable:!0
if('map' in item){item.options=item.map.getoptions();return{optgroup:{label:item.label||'',visible:item.visible,editable:item.editable,options:item.map.getoptions()}}}else{return item}})
return temp}.bind(this),getoptions:function(search){var temp=[];_.each(this.optgroup.options,function(item){item.visible=('visible' in item)?item.visible:!0
item.editable=('editable' in item)?item.editable:!0
if('map' in item){temp=temp.concat(item.map.getoptions())}else{temp.push(item)}})
if(typeof search!=='undefined'){return _.find(temp,search)}
return temp}.bind(this),on:this.eventBus.on,handlers:this.handlers,optgroup:this.optgroup}
Object.defineProperty(response,"waiting",{get:function(){return _.compact(waitlist).length>0}});return response}
gform.arrayManager=function(field){_.reduce(['reflow','find','filter'],(manager,prop)=>{if(prop in gform.types[field.type]){manager[prop]=gform.types[field.type][prop].bind(manager)}
return manager},this)
this.field=field;this.name=field.name;this.owner=field.owner;this.array=field.array;this.target=field.target;this.parent=field.parent;this.type='arrayManager'
this.array.min=(this.array.min==0)?(this.field.required)?1:0:this.array.min||1;this.parsable=!0;this.reportable=!0;this.editable=!0;this.visible=!0;_.reduce(['show','parse','edit'],attr=>{let val=undefined;if(typeof this.field.item.array=='object'){val=(attr in this.field.item.array)?this.field.item.array[attr]:undefined}
if(typeof val=='undefined')val=(attr in this.field.item)?this.field.item[attr]:(attr=="show")?true:undefined;if(typeof val!=='undefined')this[attr]=val},this)
this.focus=function(){};this.satisfied=function(){var value=value||this.get();return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='object'&&_.isEmpty(value)))}
this.fields=[];this.instances=[];this.id=gform.getUID();this.el=gform.types[this.field.type].array.template(this);this.container=gform.types[field.type].array.container||this.el;if(typeof gform.types[field.type].array.container=='string'){this.container=this.el.querySelector(gform.types[this.field.type].array.container)}
this.rowManager=gform.rowManager(this);this.reflow=gform.reflow.bind(this)
Object.defineProperty(this,"display",{get:function(){return _.reduce(this.instances,(displayResult,instance)=>{displayResult+=('<div>'+instance.display+'</div>');return displayResult},'<div>')+'</div>'},enumerable:!0});Object.defineProperty(this,"label",{get:function(){return this.internalLabel||this.field.array.label||this.field.label},set:function(value){this.internalLabel=value},enumerable:!0});gform.addConditions.call(this.owner,this);Object.defineProperty(this,"map",{get:function(){if(this.field.item.map===!1){return this.field.item.map}
var map='';if(this.field.ischild){map=this.field.parent.map+'.'}
map+=this.field.name
return this.field.item.map||map},});Object.defineProperty(this,"toJSON",{get:function(){return this.get()},enumerable:!0});if(typeof gform.types[field.type].row=="function"){}
this.get=function(){let temp=_.map(_.reduce(this.instances,function(temp,instance){if(_.isMatch(instance,{parsable:!0})){temp.push(instance)}
return temp},[]),instance=>instance.get())
if(typeof this.array.filter!=='undefined'&&this.array.filter!=!1){if(typeof this.array.filter=='function'){temp=_.filter(temp,this.array.filter)}else{temp=(this.array.filter.length)?_.filter(temp,i=>i&&(!this.array.filter.includes(i))):_.compact(temp)}}
return(temp.length>0)?temp:this.array.default||undefined}
this.addField=function(options,field){if(typeof field=="undefined"){field=this.field}
if(!field.editable||this.instances.length>=(field.array.max||5)){return!1}
var index=(_.findIndex(this.instances,{id:field.id})+1)||this.instances.length;var newField=field.owner.fieldMethods.cultivate({...options,index:index},this.field)
this.instances.splice(index,0,newField)
gform.addConditions.call(field.owner,newField);gform.each.call(newField,gform.addConditions)
_.each(_.filter(this.instances,function(o){return(o.name==field.name)&&(typeof o.array!=="undefined")&&!!o.array}),function(item,index){item.index=index;gform.types[item.type].setLabel.call(item)})
newField.parent.trigger(['change','input','create','inserted'],newField)
gform.each.call(newField,function(field){field.parent.trigger(['change'],field)})
return newField}
this.removeField=function(field){var fieldCount=this.instances.length
if(field.editable&&fieldCount>(field.array.min||0)){if(typeof field.eventlist!=='undefined'){_.each(field.owner.eventBus.handlers,function(event,index,events){_.each(event,function(handler,a,b,c){_.each(field.eventlist,function(a,b,search){if(handler==search){delete b[a]}}.bind(null,a,b))})
events[index]=_.compact(events[index])})}
var index=_.findIndex(this.instances,{id:field.id});this.instances[index].el.parentElement.removeChild(this.instances[index].el)
this.instances.splice(index,1);field.am.reflow();_.each(_.filter(this.instances,function(o){return(o.name==field.name)&&(typeof o.array!=="undefined")&&!!o.array}),function(item,index){item.index=index;gform.types[item.type].setLabel.call(item)})
field.parent.trigger(['change','input','removed'],field)
fieldCount--}else{if(field.editable)field.set(null);field.parent.trigger(['input'],field)}}}
gform.field={cultivate:function(form){return(options,field)=>{options={parent:form,owner:form,el:null,instance:null,data:undefined,am:null,...options}
field=form.fieldMethods.normalize(options,field);field.owner=form;if(typeof options.data=='object'&&options.data!==null&&field.name in options.data){options.data=options.data[field.name]}else{delete options.data;if(form.options.strict==!1){if(typeof form.options.data=='object'&&field.name in form.options.data){options.data=form.options.data[field.name]}}}
if(field.array&&!field.am){let am=new gform.arrayManager(field);field.am=am;if(typeof options.data=="object"){_.each(options.data,(data,i)=>{am.addField({...options,data:{[field.name]:data},index:i},field)})}
let index=am.instances.length;while(index<field.array.min){am.addField({...options,data:((options.data||{})[field.name]||[])[index]||(gform.types[field.type].base=='section')?{}:"",index:index},field);index++}
return am}
if(typeof form.options.data=='object'&&'data' in form.options.data){Object.defineProperty(field,"data",{get:()=>{return form.options.data.data},enumerable:!0})}
field=_.reduce(['value','label','placeholder','help','info','pre','post'],(field,attr)=>{if(typeof field[attr]=='string'&&field.raw!==!0){field[attr]=gform.renderString((typeof field.item[attr]=='string')?field.item[attr]:field[attr],field)}
return field},field)
if(typeof field.item.value==='function'||(typeof field.item.method==='string'&&typeof field.owner.methods[field.item.method]=='function')){field.derivedValue=(e)=>{field.set((field.owner.methods[field.item.method]||field.item.value).call(null,{form:field.owner,field:field,initial:field,...e}),!1)
return field.internalValue}}else if(typeof field.item.value==='string'&&field.item.value.indexOf('=')===0){field.derivedValue=()=>{const data=field.owner.get();field.formula=gform.renderString(field.item.value.substr(1),data)
try{if(field.formula.length){if(typeof math!=='undefined'){var result=math.eval(field.formula,data);if(typeof result=='object'&&'entries' in result){result=_.last(result.entries);if(typeof result._data=='object')result=result._data}
field.formula=_.isFinite(result)?result.toFixed((field.item.precision||0)):_.isArray(result)?result:''}}}catch(e){field.formula=''}
return field.formula}}
field.trigger=(gform.types[field.type].trigger)?gform.types[field.type].trigger.bind(field):field.parent.trigger;field.set=(value,silent)=>{if(typeof value=='undefined'&&typeof field.derivedValue=='function'){value=field.derivedValue({initial:field,form:field.owner,field:field})}
if('fields' in field&&typeof value=='object'){value=_.pick(value,_.map(field.fields,"name"))}
if(field.internalValue!=value||value==null){if(!gform.types[field.type].set.call(field,value)){field.internalValue=value;if(!silent){field.trigger(['change'],field)}}}
return field.internalValue}
if(field.fillable){if(typeof field.derivedValue=='function'){field.value=field.owner.call('resetValue',field);field.value=field.derivedValue({initial:field});field.owner.on('input initialized',(e)=>{e.initial=field;var oldv=field.value;var newv=field.derivedValue(e);if(newv!=oldv&&e.default){field.set.call(null,newv);if(e.field!==field&&e.continue){e.form.trigger("input",field)}}})}else{field.value=('data' in options&&typeof options.data!=='undefined')?options.data:(("value" in field)?field.value:(("value" in field.item)?field.item.value:form.call('resetValue',field)))}
options.data=('data' in options)?options.data:field.value}
if(field.multiple&&field.value==null)field.value=[]
field.internalValue=field.value;Object.defineProperty(field,"value",{get:()=>field.internalValue,set:val=>{if(field.internalValue!==val){field.set(val,!0)}},enumerable:!0});Object.defineProperty(field,"active",{get:()=>(field.isActive&&field.editable&&field.visible&&field.parent.active),enumerable:!0});Object.defineProperty(field,"display",{get:()=>{if('display' in field.item&&typeof field.item.display=='function'){return field.display.call(field)}
if('display' in gform.types[field.type]){return gform.types[field.type].display.call(field)}
return field.toString()},enumerable:!0});Object.defineProperty(field,"sibling",{get:()=>{return field.am instanceof gform.arrayManager},enumerable:!0});Object.defineProperty(field,"isSatisfied",{get:()=>field.satisfied(field.get()),});Object.defineProperty(field,"path",{get:()=>{let path='/';if(field.ischild){path=field.parent.path+'.'}
path+=field.name
if(field.array){path+='.'+field.id}
return path}});Object.defineProperty(field,"map",{get:()=>{if(field.item.map===!1){return field.item.map}
let map='';if(field.ischild){map=field.parent.map+'.'}
map+=field.name
if(field.array){map+='.'+field.index}
return field.item.map||map},});Object.defineProperty(field,"source",{get:()=>{if(field.item.source===!1){return field.item.source}
var source='';if(field.ischild){source=field.parent.source+'.'}
source+=field.name
if(field.array){source+='.'+field.index}
return field.item.source||source||field.map},});Object.defineProperty(field,"relative",{get:()=>{var path='/';if(field.ischild){path=field.parent.relative+'.'}
path+=field.name
return path}});field.columns=_.min([field.columns,form.options.columns]);field=_.reduce(['get','toString','satisfied','render','update','destroy','focus','reflow','find','filter'],(field,prop)=>{if((!(prop in field)||(field[prop]==Object.prototype[prop]))&&prop in gform.types[field.type]){field[prop]=form.bind(prop,field)}
return field},field)
Object.defineProperty(field,"toJSON",{get:()=>{return field.get()},enumerable:!0});field.el=form.call('create',field);switch(typeof field.container){case "string":field.container=field.el.querySelector(field.container);break;case "undefined":field.container=field.el.querySelector('fieldset')||field.el||null;break}
if(field.section)form.el.querySelector('.'+form.options.sections+'-content').appendChild(field.el);form.call('initialize',field)
field.isActive=!0;if(_.isArray(field.item.data)){field.meta=field.item.data;_.each(field.meta,function(meta){if(typeof meta.key=='string'&&meta.key!==""&&!(meta.key in field)){Object.defineProperty(field,meta.key,{get:function(key,field){return _.find(field.meta,{key:key}).value}.bind(null,meta.key,field),set:function(key,field,value){_.find(field.meta,{key:key}).value=value;field.parent.trigger(meta.key,field)}.bind(null,i.key,field),configurable:!0,enumerable:!0})}})}
if(field.fields){field._items=_.map(field.fields,form.fieldMethods.cultivate.bind(null,{data:options.data,parent:field}))
Object.defineProperty(field,'items',{get:()=>{return field._items}})
Object.keys(gform.iterators).forEach(i=>{field.items[i]=gform.iterators[i].bind(field)})
Object.defineProperty(field,'fields',{get:()=>_.reduce(field._items,(fields,item)=>{if(item instanceof gform.arrayManager){fields=fields.concat(item.instances)}else{fields.push(item)}
return fields},[])})
gform.each.call(field,function(field){field.owner.trigger('change',field)})}
return field}},normalize:function(form){return(options,field)=>{var parent=options.parent||form;if(!('type' in field)||!(field.type in gform.types)){let old=field.type||"Undefined";field.type=((field.columns==0)?'hidden':(('options' in field)?'select':(form.options.default.type||'text')));console.warn('Field type "'+old+'" not supported - using '+field.type+" "+((field.columns==0)?"(columns set to 0)":(('options' in field)?'(default collection)':'(default)'))+' instead')}
field.item=_.clone(field);const{index,id,...rest}=field;field={id:gform.getUID(),index:options.index||index||field.instance||0,label:field.legend||field.title||(gform.types[field.type]||gform.types.text).defaults.label||field.name,parent:parent,columns:options.columns||form.options.columns,offset:options.offset||gform.offset||0,ischild:!(parent instanceof gform),format:{},...form.options.default,...(gform.types[field.type]||gform.types.text).defaults,...rest,}
if(field.array){if(typeof field.array!=='object'){field.array={}}
field.array=_.defaultsDeep(field.array,(gform.types[field.type]||{}).array,{max:5,min:1,duplicate:{enable:'auto'},remove:{enable:'auto'},append:{enable:!0}})}
if(!('multiple' in field))field.multiple=('limit' in field&&field.limit>1);field.name=(field.name||(gform.renderString(field.legend||field.label||field.title,field)||'').toLowerCase().split(' ').join('_')||field.id)+'';return field}}};gform.rowManager=(options)=>{let rows=options.rows||[]
let columns=gform.prototype.options.columns||12
let{rowClass,rowTemplate,container,rowSelector}={rowClass:'row',rowTemplate:'<div></div>',container:gform.create(gform.renderString('<div></div>',options)),...(options.owner||options).call('array',options.field),...options};const get=options=>{if(options.forceRow)return add(options);let row=_.findLast(rows,{container:options._target})||add(options);if(columns!==-1&&(row.used+options.size)>columns)row=add(options);return row}
const add=options=>{let cRow={ref:gform.create(rowTemplate,rowSelector),id:gform.getUID(),used:0,container:options._target};cRow.ref.setAttribute("id",cRow.id);gform.addClass(cRow.ref,rowClass)
Object.defineProperty(cRow,"field",{set:field=>{if(field.el instanceof Node){((typeof rowSelector=='undefined')?cRow.ref:cRow.ref.querySelector(rowSelector)||cRow.ref).appendChild(field.el)
cRow.used+=field.columns;cRow.used+=field.offset}else{console.warn('Field element must be a node')}}});rows.push(cRow);cRow.container.appendChild(cRow.ref);return cRow}
const clear=options=>{_.each(rows,cRow=>{if(typeof cRow!=='undefined'){try{cRow.container.removeChild(cRow.ref)}catch(e){}}})
container=(typeof options=='object'&&'container' in options)?options.container:container
rows=[]}
const insert=field=>{if(!field.visible)return;if('target' in field&&(!('am' in field)||typeof field.am==='undefined')){field._target=(typeof field.target=='function')?field.target.call(field):field.target;if(typeof field._target=='string'){field._target=field.owner.el.querySelector(field._target)}
field._target=((field._target)instanceof Node)?(field._target):container}else{field._target=container}
field.columns=('columns' in field)?parseInt(field.columns,10):gform.prototype.options.columns;field.offset=parseInt(field.offset,10)||0;let size=(field.columns+field.offset);if(columns!==-1){if(size>columns){console.warn('Requested size "'+size+'" exceeds row size');if(field.columns>columns){console.warn('Requested columns "'+field.columns+'" exceeds row size, using column size of '+columns);field.columns=columns;size=(field.columns+field.offset)}
if(size>columns){console.warn('Requested offset of '+field.offset+' pushes size over maximum row size of '+columns+' using offset of '+(columns-field.columns));field.offset=(columns-field.columns);size=(field.columns+field.offset)}}}
let row=get({size:size,...field});row.field=field}
let api={get:get,add:add,clear:clear,insert:insert};Object.defineProperty(api,"rows",{get:()=>rows});Object.defineProperty(api,"status",{get:()=>{return{rows:rows,rowClass:rowClass,rowTemplate:rowTemplate,container:container,rowSelector:rowSelector}},set:(status)=>{if(status.container)container=status.container;if(status.rowClass)rowClass=status.rowClass;if(status.rowTemplate)rowTemplate=status.rowTemplate;if(status.rowSelector)rowSelector=status.rowSelector}});return api}
gform.reflow=function(options){if(typeof this.rowManager=='object'){let tempel=document.activeElement;if(!(document.activeElement instanceof HTMLBodyElement)){(this.owner||this).activeEl=document.activeElement}
this.rowManager.clear(options);let result=_.reduce(this._items||this.instances,(error,item)=>{if('am' in item&&typeof item.am!=='undefined'){this.rowManager.insert(item)
item.owner.updateActions(item.am)}else{this.rowManager.insert(item)}
error=gform.reflow.call(item)
return error},!1)
var temp=(this.owner||this).find({id:((this.owner||this).activeEl||{id:''}).id});if(temp)temp.focus();return result}}
gform.processConditions=function(conditions,func){if(typeof conditions==='string'){if(conditions==='show'||conditions==='edit'||conditions==='parse'){conditions=this.item[conditions]}
if(typeof conditions=='string'&&conditions.indexOf('method:')==0){if(typeof this.owner.methods!=='undefined'&&typeof this.owner.methods[conditions.split('method:')[1]]=='function'){func.call(this,this.owner.methods[conditions.split('method:')[1]].call(null,{form:this.owner,field:this}),{form:this.owner,field:this})}}}
if(typeof conditions==='boolean'){func.call(this,conditions,{form:this.owner,field:this})}
if(typeof conditions==='function'){func.call(this,conditions.call(null,{form:this.owner,field:this}),{form:this.owner,field:this})}
if(typeof conditions==='object'){var callback=function(rules,func,e){func.call(this,gform._rules.call(this,rules),e)}.bind(this,conditions,func)
gform._subscribeByName.call(this,conditions,callback)}
return!0};gform._subscribeByName=function(conditions,callback){if(!(this.owner instanceof gform))return;for(var i in conditions){if(typeof conditions[i].conditions=='object'){gform._subscribeByName.call(this,conditions[i].conditions,callback)}else{var temp=this.parent.find((conditions[i].name||this.name));if((conditions[i].name||this.name).indexOf('/')!==0&&typeof temp!=='undefined'){this.eventlist=this.eventlist||[];this.owner.on('change:'+temp.path,callback,this.eventlist)}else{this.owner.on('change:'+(conditions[i].name||this.name),callback)}}}}
gform._rules=function(rules,op){var op=op||'and';return _.reduce(rules,function(result,rule){var s;if(typeof rule.conditions!=='undefined'){s=gform._rules.call(this,rule.conditions,rule.op)}else{s=gform.conditions[rule.type](this,rule)}
if(op=='or'){return result||s}else{return result&&s}}.bind(this),(op=='and'))}
gform.conditions={requires:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
return looker.satisfied()},not_matches:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
var val=args[args.attribute||'value'];var localval=looker[args.attribute||'value'];if(typeof val=="object"&&val!==null&&localval!==null){return(val.indexOf(localval)==-1)}else{return(val!==localval)}},test:function(field,args){return args.test.call(this,field,args)},contains:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
var val=args.value;var targetField=looker;var localval=null;if(typeof targetField!=='undefined'){if(targetField.array!=!1){localval=field.parent.find(args.name).parent.get()[args.name]}else{localval=targetField.value}}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}
if(typeof val=="object"&&val!==null&&localval!==null){if(typeof localval=='object'){return(_.intersection(val,localval).length>0)}else if(typeof localval=='string'){return _.some(val,function(filter){return(localval.indexOf(filter)>=0)})}}else{return(typeof localval!=='undefined'&&localval.indexOf(val)!==-1)}},matches:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
var val=args[args.attribute||'value'];var localval=looker[args.attribute||'value'];if(typeof val=="object"&&val!==null&&localval!==null){return(val.indexOf(localval)!==-1)}else{return(val==localval)}},matches_bool:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
var val=args[args.attribute||'value'];var localval=looker[args.attribute||'value'];return(val=="false"||!val)==(localval=="false"||!localval)},matches_numeric:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
var val=args[args.attribute||'value'];var localval=parseInt(looker[args.attribute||'value']);if(typeof val=="object"&&val!==null&&localval!==null){return(_.map(val,function(vals){return parseInt(vals)}).indexOf(localval)!==-1)}else{return(parseInt(val)==localval)}},numeric:function(field,args){var looker;if(typeof args.name!=='undefined'&&!!args.name){var matches=field.parent.filter({name:args.name,parsable:!0},args.depth||10);if(matches.length>0){looker=matches[0]}else if(field.name==args.name){looker=field}else{looker=field.parent.find(args.name)||field.owner.filter({path:args.name},args.depth||10)[0];if(typeof looker=='undefined'){return!1}}}else{looker=field}
var val=args[args.attribute||'value'];var localval=parseInt(looker[args.attribute||'value']);if(!(gform.regex.decimal.test(value)||value==='')){return'{{label}} must contain only numbers'}
args.min=(typeof this.min=='number')?this.min:(typeof args.min=='number')?args.min:null
if(args.min!==null&&parseFloat(value)<parseFloat(args.min)){return'{{label}} must contain a number not less than {{args.min}} '}
args.max=(typeof this.max=='number')?this.max:(typeof args.max=='number')?args.max:null
if(args.max!==null&&parseFloat(value)>parseFloat(args.max)){return'{{label}} must contain a number not more than {{args.max}}'}
if(typeof val=="object"&&val!==null&&localval!==null){return(_.map(val,function(vals){return parseInt(vals)}).indexOf(localval)!==-1)}else{return(parseInt(val)==localval)}}};gform.prototype.validate=function(force){this.valid=!0;_.each(this.fields,gform.validateItem.bind(null,force))
if(!this.valid){this.trigger('invalid',{errors:this.errors})}else{this.trigger('valid')}
this.trigger('validation');return this.valid};gform.prototype.clearValidation=function(){this.valid=!0;_.each(this.filter({valid:!1}),(field)=>{field.valid=!0;field.errors='';gform.handleError(field)})
return this.valid};gform.handleError=gform.update;gform.validateItem=function(force,item){var value=item.get();if(force||!item.valid||item.required||item.satisfied(value)){item.valid=!0;item.errors='';if(item.parsable&&typeof item.validate==='object'){var errors=[];if(item.required){var type=(item.satisfied(item.get())?!1:'{{label}} is required')
if(type){errors.push(gform.renderString(item.required.message||type,{label:item.label,value:value,args:item.required}))}}
if(!errors.length){errors=gform.validation.call(item,item.validate)}
errors=_.compact(errors);if((typeof item.display==='undefined')||item.visible){item.valid=!errors.length;item.errors=errors.join('<br>')
gform.handleError(item)}}}
if(item.parsable){if(typeof item.fields!=='undefined'){_.each(item.fields,gform.validateItem.bind(null,force))}}
if(item.errors){item.owner.trigger('invalid:'+item.name,{errors:item.errors})}else{item.owner.trigger('valid:'+item.name)}
item.owner.errors[item.name]=item.errors;item.owner.errors=_.pickBy(item.owner.errors);item.owner.valid=item.valid&&item.owner.valid};gform.validation=function(rules,op){var op=op||'and';var value=this.get();var errors=_.map(rules,function(v,it){if(typeof it.type=='string'){if(typeof it.conditions=='undefined'||gform._rules.call(this,it.conditions)){var type=v[it.type].call(this,value,it);if(type){return gform.renderString(it.message||type,{label:this.label,value:value,args:it})}}}else if(typeof it.tests!=='undefined'){return gform.validation.call(this,it.tests,it.op).join('<br>')}}.bind(this,gform.validations))
if(op=='and'||_.compact(errors).length==rules.length){return errors}else{return[]}}
gform.regex={numeric:/^[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]*$/,url:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,date:/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/,email:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i};gform.validations={none:function(value){return!1},required:function(value){return(this.satisfied(value)?!1:'{{label}} is required')},unique:function(value){return(this.parent.get()[this.name].indexOf(this.value)==this.index?!1:'{{label}} is a duplicate')},pattern:function(value,args){var r=args.regex;if(typeof r=='string'){if(typeof gform.regex[r]!=='undefined'){r=gform.regex[r]}else{r=new RegExp(args.regex,args.flags)}}
return r.test(value)||value===''?!1:args.message},custom:function(value,args){if(typeof args.test==='function'||(typeof args.test==='string'&&typeof this.owner.methods[args.test]=='function')){args.test=this.owner.methods[args.test]||args.test}
args.field=this;args.form=this.owner;args.value=value
return args.test.call(null,args)},matches:function(value,args){if(typeof args.name!=='undefined'){var temp=this.parent.find(args.name);if(typeof temp=='undefined'){return"Matching field not defined"}
args.label=temp.label;args.value=temp.get();return(value==args.value?!1:'"{{label}}" does not match the "{{args.label}}" field')}else if(typeof args.value!=='undefined'){if(_.isArray(args.value)){return(args.value.indexOf(value)!==-1?!1:'"{{label}}" does not match "{{args.value}}"')}else{return(value==args.value?!1:'"{{label}}" does not match "{{args.value}}"')}}},date:function(value){return gform.regex.date.test(value)||value===''?!1:'{{label}} should be in the format MM/DD/YYYY'},valid_url:function(value){return gform.regex.url.test(value)||value===''?!1:'{{label}} must contain a valid Url'},valid_email:function(value){return gform.regex.email.test(value)||value===''?!1:'{{label}} must contain a valid email address'},length:function(value,args){if(!gform.regex.numeric.test(args.max)&&!gform.regex.numeric.test(args.min)){return'Invalid length requirement'}
if(typeof args.max=='number'&&typeof args.min=='number'&&args.min==args.max){if(args.min==value.length){return!1}else{return'{{label}} must be exactly '+args.min+' characters in length'}}
if(typeof args.max=='number'&&value.length>args.max){return'{{label}} must not exceed '+args.max+' characters in length'}
if(typeof args.min=='number'&&value.length>0&&value.length<args.min){return'{{label}} must be at least '+args.min+' characters in length'}
return!1},numeric:function(value,args){if(!(gform.regex.decimal.test(value)||value==='')){return'{{label}} must contain only numbers'}
args.min=(typeof parseFloat(this.min)=='number')?parseFloat(this.min):(typeof parseFloat(args.min)=='number')?parseFloat(args.min):null
if(args.min!==null&&parseFloat(value)<parseFloat(args.min)){return'{{label}} must contain a number not less than {{args.min}} '}
args.max=(typeof parseFloat(this.max)=='number')?parseFloat(this.max):(typeof parseFloat(args.max)=='number')?parseFloat(this.max):null
if(args.max!==null&&parseFloat(value)>parseFloat(args.max)){return'{{label}} must contain a number not more than {{args.max}}'}}};gform.stencils={_style:`.array_container + button.create {
		display: none;

	  }

	  .array_container:empty + button.create{
		display: inline-block;
	  }
	  .array_container .actions {
		margin-bottom: -15px;
	}
	.array_container fieldset > .actions {
		margin-bottom: 0;
	}
	.gform_isArray > fieldset:before {
		content: "";
		border: dashed 1px #102e7946;
		border-right:0px;
		width:10px;
		position: absolute;
		bottom: 1px;
		left: 7px;
		top: 2px;
	  }
	  fieldset:disabled .actions{
		display:none;
	  }

	  fieldset fieldset {
		margin-left: 10px !important;
	  }
	.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control,form[disabled] .form-control {
		cursor: not-allowed;
		background-color: #eee;
		opacity: 1
	}
input + .falseLabel {
	display: inline;
}
input + .falseLabel+ .trueLabel {
	display: none;
}
input:checked + .falseLabel + .trueLabel {
	display: inline;
}
input:checked + .falseLabel {
	display: none;
}
.combobox-container .form-control[contenteditable="false"]
{
	background: #eee;
}
.combobox-selected .caret {
	display: none;
}
/* :not doesn't work in IE8 */
.combobox-container:not(.combobox-selected) .fa-times {
	display: none;
}
.combobox-list {
	max-height: 300px;
	overflow-y: auto;
	width: 100%;
}
.combobox-container .form-control{
	overflow: hidden;white-space: nowrap;position: absolute;width:auto;right:37px;left:0;
}

.combobox-container .dropdown-toggle{
	height: 34px;position: relative;border-left: solid 1px #ccc;width: 38px;
}
@media (min-width: 992px) {
	.row .col-md-Infinity:first-child{margin-left: 15px;}
	.col-md-Infinity{display:inline-block;padding:0 20px 0 0}
}

@media (max-width: 991px) {
	.row .col-md-Infinity:first-child{margin-top: 5px !important;}
	.row .col-md-Infinity{margin-left: 15px;}
}
/* The switch - the box around the slider */
.switch {
	position: relative;
	display: inline-block;
	width: 4rem;
	height: 2.2rem;
	margin: .5em;
}

/* Hide default HTML checkbox */
.switch input {
	opacity: 0;
	width: 0;
	height: 0;
}

/* The slider */
.switch .slider {
	position: absolute;
	cursor: pointer;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: #ccc;
	-webkit-transition: 0.2s;
	transition: 0.2s;
	border: solid 0.1rem #c8c8c8;
}

.switch .slider:before {
	position: absolute;
	content: "";
	height: 1.8rem;
	width: 1.8rem;
	left: 0.1rem;
	bottom: 0.1rem;
	background-color: white;
	-webkit-transition: 0.2s;
	transition: 0.2s;
}

input:checked + .slider {
	background-color: #1690d8;
}

input:focus + .slider {
	border-color: #1690d8;
	box-shadow: 0 0 0 0.125em rgba(50, 115, 220, 0.25);
}

input:checked + .slider:before {
	-webkit-transform: translateX(1.8rem);
	-ms-transform: translateX(1.8rem);
	transform: translateX(1.8rem);
}
input:disabled + .slider {
	background-color: #ddd;
}
/* Rounded sliders */
.switch .slider.round {
	border-radius: 2rem;
}

.switch .slider.round:before {
	border-radius: 50%;
}

.gform-info {
	position:absolute;
	right:10px;
	cursor: pointer;
	font-weight: bold;
	width: 2.2rem;
	height: 2.2rem;
	margin-right: 0.5rem;
	line-height: 2.2rem;
	color: #fff;
	text-align: center;
	background: rgba(0, 0, 0, 0.38);
	border-radius: 50%;
  }
  .gform-info:after {
	content: "?";
  }
  .gform-info:hover {
	box-shadow: 0px 0px 2px #000;
  }
  
  .info-close {
	float: right;
	cursor: pointer;
	border: solid 1px;
	border-radius: 0.5rem;
	font-weight: bold;
	padding: 0 0.7rem;
  }
  .info-close:after {
	content: "X";
  }
  #tooltip {
	background-color: #333;
	color: #fff;
	padding: 5px 10px;
	border-radius: 4px;
	font-size: 13px;
	max-width: 400px;
  }
  #tooltip .title {
	font-weight: bold;
	margin-right: 40px;
  }
  
  #tooltip hr,
  #tooltip .gform-add, #tooltip .gform-minus {
	display: none;
  }

.gform-append{
	margin-bottom:5px;
}











  #arrow,
  #arrow::before {
	position: absolute;
	width: 8px;
	height: 8px;
	z-index: -1;
  }
  
  #arrow::before {
	content: "";
	transform: rotate(45deg);
	background: #333;
  }
 

  





  
  	label.required:after,
	legend.required:after {
		content: "*";
		color: #f00;
	}

	html,body{
		-webkit-overflow-scrolling : touch !important;
		overflow: auto !important;
		height: 100% !important;
	}
	@media print {
		body {
			height: auto !important;
		}
	}

	.table>tbody.table-row+tbody.table-row{border-top:1px}
`,_container:`<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform {{modifiers}}{{#horizontal}} form-horizontal{{/horizontal}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>{{^legendTarget}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/legendTarget}}</form><div class="gform-footer"></div>`,text:`<div class="row clearfix form-group {{modifiers}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12">
	{{/label}}
		{{#pre}}<div class="input-group col-xs-12"><span class="input-group-addon">{{{pre}}}</span>{{/pre}}
    {{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}
		<input {{^autocomplete}}autocomplete="off"{{/autocomplete}} class="form-control" {{^editable}}readonly disabled{{/editable}} {{#limit}}maxlength="{{limit}}"{{/limit}} min="{{min}}" {{#max}} max="{{max}}"{{/max}} {{#step}} step="{{step}}"{{/step}} placeholder="{{placeholder}}" type="{{elType}}{{^elType}}{{type}}{{/elType}}" name="{{name}}" id="{{id}}" value="" />
		{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}
    {{^post}}{{#pre}}</div>{{/pre}}{{/post}}
		{{#limit}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/limit}}

		{{>_addons}}
		{{>_actions}}
	</div>
</div>`,output:`
<div class="row">
<div>
		{{>_label}}
		
	<div class="col-xs-12">
    <output name="{{name}}" id="{{id}}">{{{display}}}{{^display}}&nbsp;{{/display}}</output>
		{{>_addons}}
		{{>_actions}} 
		</div>
    </div>
    </div>
`,grid:`<div class="row">
<fieldset id="{{id}}" name="{{name}}" class="row"  style="margin-bottom:20px">
    {{>_label}}
	<div class="col-xs-12">
    	<table class="table table-striped" style="margin-bottom:0">
			<thead>
				<tr>
					<th></th>
					{{#options}}
					<th><label>{{label}}</label></th>
					{{/options}}
				</tr>
			</thead>
			<tbody>
			{{#fields}}
				<tr>
					<td><label style="font-weight: 500;" for="{{id}}">{{{label}}}</label></td>
					{{#options}}
					<td>
					{{#multiple}}
						<div><input name="{{id}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{value}}"/>
					{{/multiple}}
					{{^multiple}}
						<input style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{value}}" type="radio">
					{{/multiple}}
					</td>
					{{/options}}
				</tr>
				{{/fields}}
			</tbody>
		</table>
		{{>_addons}}
		{{>_actions}}
	</div>
</fieldset>
</div>`,switch:`<div class="row clearfix {{modifiers}} {{#array}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/array}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12" style="margin:0 0 5px">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8" style="margin:0 0 15px">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12">
	{{/label}}
	<div>
	<span class="falseLabel">{{{options.0.label}}} </span>
		<label class="switch">
		<input name="{{name}}" type="checkbox" {{^editable}}disabled{{/editable}} {{#options.1.selected}}checked=checked{{/options.1.selected}} value="{{value}}" id="{{id}}" />
		<span class="slider round"></span>
		</label>
		<span class="trueLabel">{{{options.1.label}}}</span>
		</div>
		{{>_addons}}
		{{>_actions}}
	</div>
</div>`,hidden:`<input type="hidden" name="{{name}}" value="{{value}}" />{{>_addons}}`,textarea:`<div class="row clearfix form-group {{modifiers}} {{#array}}isArray" data-min="{{array.min}}" data-max="{{array.max}}{{/array}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}
	{{#horizontal}}<div class="col-md-8" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>
	{{/label}}
		<textarea class="form-control"  {{^editable}}readonly disabled{{/editable}} {{#limit}}maxlength="{{limit}}"{{/limit}} style="width:100%;height:auto;min-height:20px" rows="{{size}}{{^size}}3{{/size}}" name="{{name}}" id="{{id}}" placeholder="{{placeholder}}"></textarea>
		{{#limit}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/limit}}
		{{>_addons}}
			{{>_actions}}
	</div>
</div>`,contenteditable:`<div class="row clearfix form-group {{modifiers}} {{#array}}isArray" data-min="{{array.min}}" data-max="{{array.max}}{{/array}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}
	{{#horizontal}}<div class="col-md-8" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>
	{{/label}}

		<div class="formcontrol" style="height:auto" id={{id}}><div placeholder="{{placeholder}}" style="outline:none;border:solid 1px #cbd5dd;{{^unstyled}}background:#fff;padding:10px{{/unstyled}}" name="{{name}}">{{content}}{{value}}</div></div>
		{{#limit}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/limit}}
		{{>_addons}}
			{{>_actions}}
	</div>
</div>`,select:`<div class="row clearfix form-group {{modifiers}} {{#size}}size={{size}}{{/size}} {{#array}}isArray" data-min="{{array.min}}" data-max="{{array.max}}{{/array}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12">
	{{/label}}		
	{{#limit}}{{#multiple}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/multiple}}{{/limit}}

		{{#pre}}<div class="input-group"><span class="input-group-addon">{{{pre}}}</span>{{/pre}} 
		{{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}
		{{#mapOptions.waiting}}<i class="fa fa-spinner fa-spin" style="font-size:20px;position:absolute;top:7px;left:22px;color:#666"></i>{{/mapOptions.waiting}}
			<select class="form-control test"  {{#multiple}}multiple=multiple{{/multiple}} {{#size}}size={{size}}{{/size}}  name="{{name}}{{#multiple}}[]{{/multiple}}" value="{{value}}" id="{{id}}" />
			{{#options}}
			{{^optgroup}}
			{{#visible}}<option {{#selected}}selected='selected'{{/selected}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}} value="{{i}}">{{{label}}}</option>{{/visible}}
			{{/optgroup}}
			{{#optgroup}}
			{{#visible}}{{#optgroup.label}}
			<optgroup label="{{label}}" data-id="{{optgroup.id}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}">
			{{/optgroup.label}}
					{{#options}}
					{{#visible}}<option data-id="{{optgroup.id}}" {{#selected}}selected='selected'{{/selected}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}  value="{{i}}">{{{label}}}</option>{{/visible}}
					{{/options}}
					{{#optgroup.label}}
			</optgroup>
			{{/optgroup.label}}{{/visible}}
			{{/optgroup}}
			{{/options}}
			</select>
		{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}
		{{^post}}{{#pre}}</div>{{/pre}}{{/post}}
		{{>_addons}}
		{{>_actions}}
	</div>
</div>`,radio:`<div class="row clearfix form-group {{modifiers}} {{#array}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/array}}" name="{{name}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12 {{#size}}row{{/size}}" {{#size}}style="padding-top: 5px;"{{/size}}>{{/horizontal}}
	{{#horizontal}}<div class="col-md-8 {{#size}}row{{/size}}" {{#size}}style="padding-top: 5px;"{{/size}}>{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12" {{#size}}style="padding-top: 5px;"{{/size}}>
	{{/label}}
	{{#limit}}{{#multiple}}<small class="count text-muted" style="display:block;text-align:left">0/{{limit}}</small>{{/multiple}}{{/limit}}

			{{#options}}
				{{^optgroup}}

					{{#multiple}}
					<div class="checkbox {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>
						<label class="noselect"><input name="{{name}}_{{value}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{i}}"/> {{{label}}}</label>
					</div>
					{{/multiple}}
					{{^multiple}}
					<div class="radio {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>
						<label {{^horizontal}}class="radio-inline"{{/horizontal}}><input style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{i}}" type="radio"><span class="noselect" style="font-weight:normal">{{{label}}}{{^label}}&nbsp;{{/label}}</span></label>        
					</div>
					{{/multiple}}

				{{/optgroup}}
			{{#optgroup}}
			{{#optgroup.label}}
			<b class="text-muted" data-id="{{optgroup.id}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}">{{label}}</b>
			{{/optgroup.label}}
					{{#options}}

					{{#multiple}}
					<div class="checkbox {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>
						<label class="noselect"><input data-id="{{optgroup.id}}" name="{{name}}_{{value}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{i}}"/> {{{label}}}</label>
					</div>
					{{/multiple}}
					{{^multiple}}
					<div class="radio {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>
						<label {{^horizontal}}class="radio-inline"{{/horizontal}}><input data-id="{{optgroup.id}}" style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{i}}" type="radio"><span class="noselect" style="font-weight:normal">{{{label}}}{{^label}}&nbsp;{{/label}}</span></label>        
					</div>
					{{/multiple}}

					{{/options}}

			{{/optgroup}}
			{{/options}}






		{{>_addons}}
		{{>_actions}}
	</div>
</div>`,custom_radio:`<div class="row clearfix form-group {{modifiers}} {{#multiple.duplicate}}dupable" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/multiple.duplicate}}" name="{{name}}" data-type="{{type}}">
{{>_label}}
{{#multiple.duplicate}}
<div class="duplicate add btn btn-default"><i class="fa fa-plus"></i></div>
<div class="btn btn-default remove"><i class="fa fa-minus"></i></div>
{{/multiple.duplicate}}
{{#label}}
{{^horizontal}}<div class="col-md-12">{{/horizontal}}
{{#horizontal}}<div class="col-md-8">{{/horizontal}}
{{/label}}
{{^label}}
<div class="col-md-12">
{{/label}}
	{{#pre}}<div class="input-group"><span class="input-group-addon">{{{pre}}}</span>{{/pre}}
	{{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}
		<div class="custom-group"  name="{{name}}" style="max-height:200px;overflow-y:scroll;">
		{{#options}}
			<a href="javascript:void(0);" class="{{^selected}} {{defaultClass}}{{/selected}}{{#selected}} {{selectedClass}}{{/selected}}" data-value="{{value}}">
				{{{label}}}
			</a>&nbsp;
		{{/options}}
		</div>
	{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}
	{{^post}}{{#pre}}</div>{{/pre}}{{/post}}
	{{>_addons}}
	{{>_actions}}
</div>
</div>`,fieldset_array:'<div><div class="col-xs-12">{{#array}}{{#append.enable}}<button data-ref="{{ref}}" data-parent="{{parent.id}}" class="gform-append btn btn-info btn-xs pull-right">{{{append.label}}}{{^append.label}}<i class="fa fa-plus"></i> Add {{{label}}}{{/append.label}}</button>{{/append.enable}}{{/array}}<legend>{{label}}</legend><div class="list-group gform-template_row"></div></div></div>',_fieldset:`<div class="row"><fieldset data-type="fieldset" style="" name="{{name}}" id="{{id}}" class="{{modifiers}}" >
{{#array}}
<div data-name="{{name}}" data-ref="{{am.id}}" class="btn-group hidden-print actions">
	{{#remove.enable}}
	<div data-id="{{id}}" class="btn btn-white gform-minus">{{{remove.label}}}{{^remove.label}}<i data-id="{{id}}"  class="fa fa-minus text-danger"></i>{{/remove.label}}</div>
	{{/remove.enable}}
	{{#duplicate.enable}}
	<div data-id="{{id}}" class="gform-add btn btn-white">{{{duplicate.label}}}{{^duplicate.label}}<i data-id="{{id}}"  class="fa fa-plus text-success"></i>{{/duplicate.label}}</div>
	{{/duplicate.enable}}
</div>
{{^section}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/section}}
{{/array}}
{{^section}}{{#label}}<legend>{{{label}}}</legend>{{/label}}{{/section}}
<div style="position:relative;top:-20px">{{>_addons}}</div>
</fieldset></div>`,_actions:`{{#array}}
	<div data-name="{{name}}" data-ref="{{am.id}}" data-parent="{{parent.id}}" class="btn-group hidden-print actions pull-right">
	{{#remove.enable}}
	<div data-id="{{id}}" class="btn btn-white gform-minus">{{{remove.label}}}{{^remove.label}}<i class="fa fa-minus text-danger"></i>{{/remove.label}}</div>
	{{/remove.enable}}
	{{#duplicate.enable}}
	<div data-id="{{id}}" class="gform-add btn btn-white">{{{duplicate.label}}}{{^duplicate.label}}<i class="fa fa-plus text-success"></i>{{/duplicate.label}}</div>
	{{/duplicate.enable}}

	</div>
	{{/array}}`,_tooltip:`<div id="tooltip" role="tooltip">
<span class="info-close"></span>
<div class="tooltip-body"></div>
<div id="arrow" data-popper-arrow></div>
</div>`,_info:`<div>
<div class="title">More&nbsp;Information</div>
<hr>
  <div>{{info}}</div>
</div> `,_label:`
	{{^hideLabel}}
    {{#label}}
	<label for="{{name}}" {{^horizontal}}style="text-align:left"{{/horizontal}} class="control-label {{^horizontal}}col-md-12{{/horizontal}}{{#horizontal}}col-md-4{{/horizontal}}">{{{label}}}{{#required}}{{{requiredText}}}{{/required}}{{suffix}}</label>{{/label}}
{{#info}}<b class="gform-info" data-id="{{id}}"></b>{{/info}}
{{/hideLabel}}
    `,_addons:`<span class="help-inline"> {{{help}}}</span>
<span class="font-xs text-danger" style="display:block;"></span>`,checkbox:`<div class="row clearfix {{modifiers}} {{#array}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/array}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12" style="margin:0 0 5px">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8" style="margin:0 0 15px">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12" style="margin: -10px 0 5px;"">
	{{/label}}
		<div class="checkbox">
			<label class="{{alt-display}}" for="{{id}}">
				<input name="{{name}}" id="{{id}}" type="checkbox" {{^editable}}disabled{{/editable}} {{#options.1.selected}}checked=checked{{/options.1.selected}}>{{^format.display}}<span class="falseLabel">{{{options.0.label}}}</span><span class="trueLabel">{{{options.1.label}}}</span>{{/format.display}}{{format.display}}&nbsp;
			</label>
		</div>
	{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}
		{{>_addons}}
		{{>_actions}}
	</div>
</div>`,scale:`
<div class="row clearfix form-group {{modifiers}} {{#multiple.duplicate}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/multiple.duplicate}}" name="{{name}}" data-type="{{type}}">
	{{>_label}}
	{{>_actions}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12">
	{{/label}}
			<table class="table table-striped">
				<thead>
				<tr>
					{{#format.low}}<th></th>{{/format.low}}
					{{#options}}
					<th><label for="{{name}}_{{i}}">{{{label}}}</label></th>
					{{/options}}
					{{#format.high}}<th></th>{{/format.high}}
				</tr>
				</thead>
				<tbody>
				<tr>
					{{#format.low}}<td><label style="font-weight: 500;" for="{{name}}_1">{{{format.low}}}</label></td>{{/format.low}}
					{{#options}}
					<td>
						<input data-label="{{label}}" id="{{name}}_{{i}}" name="{{id}}" value="{{i}}" {{^editable}}readonly disabled{{/editable}} type="radio" {{#selected}}checked=checked{{/selected}} >
					</td>
					{{/options}}
					{{#format.high}}<td><label style="font-weight: 500;" for="{{name}}_{{options.length}}">{{{format.high}}}</label></td>{{/format.high}}
				</tr>
		</tbody>
			</table>
		{{>_addons}}
	</div>
</div>`,button:`<button class="btn btn-default hidden-print {{modifiers}}" type="button" style="margin:0 15px">{{{label}}}</button>`,tab_container:`
<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform tab-content {{#horizontal}} smart-form-horizontal form-horizontal{{/horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>{{^legendTarget}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/legendTarget}}    
	<ul class="nav nav-tabs" style="margin-bottom:15px">
		{{#fields}}
			{{#section}}
			<li {{^index}}class="active"{{/index}}>
				<a href="#tabs{{id}}" data-toggle="tab">{{{legend}}}</a>
			</li>
			{{/section}}		
		{{/fields}}
	</ul></form>
	</form><div class="gform-footer"></div>`,tab_fieldset:`{{#section}}<div class="tab-pane {{^index}}active{{/index}} " id="tabs{{id}}">{{/section}}{{>_fieldset}}{{#section}}</div>{{/section}}`,modal_container:`<div class="modal fade gform {{modifiers}} {{#horizontal}} form-horizontal{{/horizontal}}" id="myModal" name="modal_{{name}}" data-update="{{update}}" data-append="{{append}}" {{#focus}}tabindex="-1"{{/focus}} role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header {{modal.header_class}}">
				<button type="button" class="close" data-action="kill" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">{{#icon}}<i class="fa fa-{{icon}}"></i> {{/icon}}{{{title}}}{{{legend}}}&nbsp;</h4>
			</div>
			<div class="modal-body">
				{{{body}}}
				{{^sections}}
				<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform {{#options.horizontal}} smart-form-horizontal form-horizontal{{/options.horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}></form>
				{{/sections}}
				{{#sections}}
				<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform tab-content {{#options.horizontal}} smart-form-horizontal form-horizontal{{/options.horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>   
				<ul class="nav nav-tabs" style="margin-bottom:15px">
					{{#fields}}
					{{#section}}
					<li {{^index}}class="active"{{/index}}>
						<a href="#tabs{{id}}" data-toggle="tab">{{{legend}}}</a>
					</li>
					{{/section}}		
					{{/fields}}
				</ul></form>
				{{/sections}}
				
			</div>
			<div class="modal-footer gform-footer">
				{{{footer}}}
			</div>
		</div>
	</div>
</div>
`,modal_fieldset:`{{>_fieldset}}`,child_modal_footer:`<button type="button" class="btn btn-danger hidden-print pull-left gform-minus"><i class="fa fa-times"></i> Delete</button><button class="btn btn-default hidden-print done" style="margin:0 15px"><i class="fa fa-check"></i> Done</button>`,template:'<div><div class="col-xs-12">{{#array}}{{#append.enable}}<button data-ref="{{am.id}}" class="gform-append btn btn-info btn-xs pull-right">{{{append.label}}}{{^append.label}}<i class="fa fa-plus"></i> Add {{{label}}}{{/append.label}}</button>{{/append.enable}}<legend>{{label}}</legend>{{/array}}</div></div>',template_item:`<div style="position:relative;top: -6px;">{{>_actions}}</div><div class="gform-template_container">{{{format.template}}}{{^format.template}}{{{display}}}{{/format.template}}</div>`,table:'<div><div class="col-xs-12" style="overflow:scroll">{{#array}}<legend>{{{label}}}</legend>{{#append.enable}}<button type="button" data-id="{{ref}}"  class="gform-append btn btn-info btn-xs" style="top: -10px;position: relative;">{{{append.label}}}{{^append.label}}<i class="fa fa-plus"></i> Add {{{label}}}{{/append.label}}</button>{{/append.enable}}{{/array}}<table class="table table-bordered table-striped table-hover table-fixed {{#array.sortable.enable}}sortable{{/array.sortable.enable}}"><thead>{{#labels}}<th>{{{.}}}</th>{{/labels}}</thead></table></div></div>'};gform.columnClasses=_.map(new Array(13),function(item,i){return'col-xs-12 col-sm-'+i})
gform.offsetClasses=_.map(new Array(13),function(item,i){return'col-xs-offset-0 col-sm-offset-'+i})
gform.prototype.options.inline=!0;gform.prototype.options.columns=12;gform.prototype.options.default.suffix="";gform.handleError=function(field){var error_container=field.el.querySelector('.font-xs.text-danger')
if(!field.valid){field.el.classList.add('has-error');if(!!error_container)error_container.innerHTML=field.errors}else{field.el.classList.remove('has-error');if(!!error_container)error_container.innerHTML=''}}
gform.types.reset=_.defaultsDeep({toString:function(){return''}},gform.types.button,{defaults:{"label":"<i class=\"fa fa-times\"></i> Reset","action":"reset","modifiers":"btn btn-default"}});gform.types.cancel=_.defaultsDeep({toString:function(){return''}},gform.types.button,{defaults:{"label":"<i class=\"fa fa-times\"></i> Cancel","action":"cancel","modifiers":"btn btn-danger"}});gform.types.save=_.defaultsDeep({toString:function(){return''}},gform.types.button,{defaults:{"label":"<i class=\"fa fa-check\"></i> Save","action":"save","modifiers":"btn btn-success"}});gform.types.clear=_.defaultsDeep({toString:function(){return''}},gform.types.button,{defaults:{"label":"<i class=\"fa fa-times\"></i> Clear","action":"clear","modifiers":"btn btn-warning"}});gform.types.color=_.extend({},gform.types.input,{defaults:{pre:'<i style="display: block;width:20px;height:20px;margin: 0 -5px;background-color:{{value}}"></i>',elType:'text',value:"#000000"},toString:function(name,display){this.value=this.get();if(!display){return'<dt>'+this.label+'</dt> <dd><div style="white-space:nowrap"><span style="width:20px;height:20px;display: inline-block;top: 5px;position: relative;background:'+this.value+';"></span> '+(this.value||'<span class="text-muted">(empty)</span>')+'</div></dd><hr>'}else{return this.value}},set:function(value){if('el' in this){this.el.querySelector('input[name="'+this.name+'"]').value=value;this.el.querySelector('.input-group-addon i').style.backgroundColor=value}},initialize:function(){this.onchangeEvent=function(input){this.value=this.get();if(this.el.querySelector('.count')!=null){var text=this.value.length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}
gform.types[this.type].setup.call(this);this.owner.trigger('change',this,{input:this.value});if(input){this.owner.trigger('input',this,{input:this.value})}}.bind(this)
this.el.addEventListener('input',this.onchangeEvent.bind(null,!0));this.el.querySelector('.input-group-addon i').addEventListener('click',function(){this.focus()}.bind(this));$(this.el.querySelector('input[name="'+this.name+'"]')).attr('type','text');this.el.querySelector('.input-group-addon i').style.backgroundColor=this.get()
$(this.el.querySelector('input[name="'+this.name+'"]')).colorpicker({format:'hex',container:$(this.el).find('.input-group')}).on('changeColor',function(ev){this.el.querySelector('.input-group-addon i').style.backgroundColor=this.get()
this.parent.trigger('change',this);this.parent.trigger('input',this)}.bind(this));gform.types[this.type].setLabel.call(this)}});gform.types.contentEditable=gform.types.summernote=_.extend({},gform.types.input,{render:function(){return gform.render('contenteditable',this).split('value=""').join('value="'+_.escape(this.value)+'"')},set:function(value){this.$el.summernote('code',value)},get:function(){return this.$el.summernote('code')},initialize:function(){this.$el=$(this.el).find('.formcontrol > div');this.$el.off();if(this.onchange!==undefined){this.$el.on('input',this.onchange)}
this.$el.summernote({disableDragAndDrop:!0,dialogsInBody:!0,toolbar:this.item.toolbar||[['style',['bold','italic','underline','clear']],['link',['linkDialogShow','unlink']],['font',['strikethrough','superscript','subscript']],['fontsize',['fontsize']],['color',['color']],['para',['ul','ol','paragraph']],['height',['height']],['view',['fullscreen']]]});this.$el.on('summernote.change',function(){this.owner.trigger('change',this);this.owner.trigger('input',this)}.bind(this));gform.types[this.type].setLabel.call(this)},satisfied:function(value){this.value=this.get()
return(typeof this.value!=='undefined'&&this.value!==null&&this.value!==''&&this.value!=="<p><br></p>")},destroy:function(){this.$el.summernote('destroy');if(this.$el){this.$el.off()}}});$(document).on('focusin',function(e){if($(e.target).closest(".note-editable").length){e.stopImmediatePropagation()}});$(document).on('click',function(e){if($(e.target).hasClass(".note-editor")){e.stopImmediatePropagation();$(e.target).find('.open').removeClass('open')}});gform.types.email=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-envelope"></i>',validate:[{type:'valid_email'}]}});gform.types.url=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-link"></i>',validate:[{type:'valid_url'}]}});gform.types.tel=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-phone"></i>',placeholder:'+1'}});gform.types.password=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-lock"></i>'}});gform.types.address=_.extend({},gform.types.input,gform.types.section,{defaults:{fields:[{type:"text",name:'street',label:"Street Address",validate:[{type:"length",max:"255"}]},{type:"text",name:'line2',label:"Address line 2",validate:[{type:"length",max:"150"}]},{type:"text",name:'city',label:"City",validate:[{type:"length",max:"255"}],columns:6},{type:"text",name:'state',label:"State/Province/Region",validate:[{type:"length",max:"255"}],columns:6},{type:"text",name:'zip',label:"Postal/Zip Code",validate:[{type:"length",max:"15"}],columns:6},{type:"select",name:'country',options:'../data/countries.json',format:{label:'{{name}}',value:'{{code}}'},label:"Country",validate:[{type:"length",max:"15"}],columns:6}]}});gform.THEME={'bootstrap':'0.0.4.2'}
gform.types.datetime=_.extend({},gform.types.input,{defaults:{format:{input:"MM/DD/YYYY h:mm A"},elType:'text'},initialize:function(){this.onchangeEvent=function(){this.value=this.get();this.parent.trigger(['change','input'],this,{input:this.value})}.bind(this)
var $el=$(this.el.querySelector('input[name="'+this.name+'"]'));$el.datetimepicker({format:this.format.input})
$el.on("dp.change",this.onchangeEvent.bind(null,!0));gform.types[this.type].setLabel.call(this)}});gform.types.date=_.extend({},gform.types.datetime,{defaults:{format:{input:"MM/DD/YYYY"},elType:'text'},})
gform.types.time=_.extend({},gform.types.datetime,{defaults:{format:{input:"h:mm A"},elType:'text'}})
gform.prototype.modalDelay=475;gform.prototype.modal=function(data){var el=this.modalEl||this.el;if(!document.body.contains(el)){document.body.appendChild(el);el.querySelector('.close').addEventListener('click',function(){(this.owner||this).trigger('closed',this)}.bind(this))}
if(typeof this.modalManager=='undefined'){this.modalManager=$(el).modal(data)
$(el).on('hidden.bs.modal',function(e){if(this.active){this.trigger("cancel",this)}}.bind(this))}else(this.modalManager=$(el).modal(data))
return this}
document.body.appendChild(gform.create('<style>'+gform.render('_style',{},'all')+'</style>'));gform.stencils.smallcombo=`
<div class="row clearfix form-group {{modifiers}}" data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12">
	{{/label}}
	<div class="combobox-container">
		<div class="input-group" style="width:100%" contentEditable="false"> 
		{{#pre}}<span class="input-group-addon">{{{pre}}}</span>{{/pre}}
        <div style="" {{^autocomplete}}autocomplete="off"{{/autocomplete}} class="form-control {{^editable}}readonly disabled{{/editable}}" {{^editable}}readonly disabled{{/editable}} {{#limit}}maxlength="{{limit}}"{{/limit}}{{#min}} min="{{min}}"{{/min}}{{#max}} max="{{max}}"{{/max}} {{#step}} step="{{step}}"{{/step}} placeholder="{{placeholder}}" {{#editable}}contentEditable{{/editable}} type="smallcombo" data-type="{{elType}}{{^elType}}{{type}}{{/elType}}" name="{{name}}" id="{{name}}" value="{{value}}" ></div>
        <ul class="combobox-list dropdown-menu"></ul>
        <span class="input-group-addon dropdown-toggle" style="" data-dropdown="dropdown"> <span class="caret" data-dropdown="dropdown"></span> <span data-dropdown="" class="fa fa-times"></span> </span> 
		</div>
        </div>
		{{>_addons}}
		{{>_actions}}
	</div>
</div>`;gform.types.smallcombo=_.extend({},gform.types.input,{base:"collection",destroy:function(){this.el.removeEventListener('change',this.onchangeEvent);this.el.removeEventListener('input',this.onchangeEvent);this.combo.removeEventListener('blur',this.handleBlur)},satisfied:function(value){value=value||this.value;if(this.strict){value=(_.find(this.options,{value:value})||{value:""}).value}
if(_.isArray(value)){return!!value.length}
return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='number'&&isNaN(value)))},toString:function(name,display){if(!display){if(typeof this.combo!=='undefined'){return'<dt>'+this.label+'</dt> <dd>'+(this.combo.innerText||'(empty)')+'</dd><hr>'}else{return'<dt>'+this.label+'</dt> <dd>'+(this.get()||'(empty)')+'</dd><hr>'}}else{if(typeof this.combo!=='undefined'){return this.combo.innerText}else{return this.get()}}},focus:function(){if(!this.active)return;var node=this.el.querySelector('[type=smallcombo]');if(node!==null){node.focus();if(node.textContent=='')return;var sel=window.getSelection();var focus=sel.focusNode;if(focus!==null){var range=document.createRange();range.selectNode(focus);range.collapse(!1);sel.removeAllRanges();sel.addRange(range)}}},render:function(){if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getoptions()
if(this.shown){this.renderMenu()}
if(typeof this.value!=='undefined'){gform.types[this.type].set.call(this,this.value)}}.bind(this))}
this.options=this.mapOptions.getoptions();this.value=this.value||"";return gform.render('smallcombo',this)},get:function(){if(this.strict){return(_.find(this.options,{value:this.value})||{value:""}).value}else{return this.value}},set:function(value,silent,input){value=(typeof value=="string")?value.replace((/  |\r\n|\n|\r/gm),""):value
var item=_.find(this.options,{value:value})||_.find(this.options,{label:value})
if(typeof item!=='undefined'){if(!input){this.combo.innerText=item.label;gform.addClass(this.el.querySelector('.combobox-container'),'combobox-selected')}
this.internalValue=item.value}else{if(this.combo.innerHTML!==value){this.combo.innerHTML=value;this.focus()}
this.internalValue=value||"";if(typeof value=='undefined'||(typeof value!=='undefined'&&this.combo.innerText!==value)){this.combo.innerText=this.value||"";this.trigger(['undefined'],this)}
gform.toggleClass(this.el.querySelector('.combobox-container'),'combobox-selected',this.value!=="")}
gform.types[this.type].setLabel.call(this);if(!silent){this.parent.trigger(['change'],this)}},edit:function(state){this.editable=state;this.el.querySelector('.form-control').setAttribute("contenteditable",state?"true":"false");gform.toggleClass(this.el,'disabled',!state)},initialize:function(){this.onchangeEvent=function(input){_.throttle(this.renderMenu,100).call(this);this.set(this.combo.innerText,!1,!0);this.parent.trigger(['input'],this,{input:this.value})}.bind(this)
gform.types[this.type].setup.call(this);this.processOptions=function(item){item.visible=('visible' in item)?item.visible:!0
item.editable=('editable' in item)?item.editable:!0
if(typeof item.optgroup!=='undefined'){if(typeof item.optgroup.options!=='undefined'&&item.optgroup.options.length){_.each(item.optgroup.options,this.processOptions.bind(this))}}else{if(this.filter!==!1&&(this.combo.innerText==""||_.score(item.label.toLowerCase(),this.combo.innerText.toLowerCase())>.6)){var li=document.createElement("li");li.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{i}}" class="dropdown-item">{{{display}}}{{^display}}{{{label}}}{{/display}}</a>',item);this.menu.appendChild(li);item.filter=!0}else{item.filter=!1}}}
this.renderMenu=function(){if(!this.active)return;this.menu.style.display='none';this.shown=!1;this.menu.innerHTML="";this.options=this.mapOptions.getoptions();_.each(this.options,this.processOptions.bind(this))
var first=this.menu.querySelector('li');if(first!==null){gform.addClass(first,'active')
this.menu.style.display='block';this.shown=!0}
if(typeof this.search=='string'){gform.ajax({path:gform.renderString(this.search,{search:this.combo.innerText}),success:function(data){index=this.options.length;this.options=this.options.concat(_.map(data,function(option){option.i=(option.i||(++index));if(typeof this.format!=='undefined'){if(typeof this.format.label!=='undefined'){option.label=gform.renderString(this.format.label,option)}
if(typeof this.format.display!=='undefined'){option.display=gform.renderString(this.format.display,option)}
if(typeof this.format.value=='string'){option.value=gform.renderString(this.format.value,option)}else if(typeof this.format.value=='function'){option.value=this.format.value.call(this,option)}}
option.visible=('visible' in option)?option.visible:!0
option.editable=('editable' in option)?option.editable:!0
if(!this.filter||this.combo.innerText==""||_.score(option.label.toLowerCase(),this.combo.innerText.toLowerCase())>.1){var li=document.createElement("li");li.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{i}}" class="dropdown-item">{{{display}}}{{^display}}{{{label}}}{{/display}}</a>',option);this.menu.appendChild(li);option.filter=!0}
return option}.bind(this)))
if(typeof this.custom=='object'){this.menu.style.display='block';this.shown=!0;var li=document.createElement("li");li.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{custom.name}}" class="dropdown-item">{{{custom.display}}}</a>',this);this.menu.appendChild(li)}
var first=this.menu.querySelector('li');if(first!==null){gform.addClass(first,'active')
this.menu.style.display='block';this.shown=!0}else{this.internalValue=null}
this.parent.trigger(['change'],this,{input:this.value})}.bind(this)})}else{if(typeof this.custom=='object'){this.menu.style.display='block';this.shown=!0;var li=document.createElement("li");li.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{custom.name}}" class="dropdown-item">{{{custom.display}}}</a>',this);this.menu.appendChild(li)}}}
this.shown=!1;this.input=this.input||!1;this.menu=this.el.querySelector('ul')
this.combo=this.el.querySelector('.form-control');this.set=gform.types[this.type].set.bind(this);this.select=function(index){if(!isNaN(parseInt(index))){var item=_.find(this.options,{i:parseInt(index)})
this.set(item.value);this.parent.trigger(['input'],this,{input:this.value});this.menu.style.display='none';this.shown=!1;gform.types.smallcombo.focus.call(this)}else{if(typeof this.custom=='object'&&this.custom.name==index){if(typeof this.custom.action=='function'){this.custom.action.call(this,{form:this.owner,field:this,event:this.custom.name})}
this.parent.trigger(index,this)}}}
$(this.el).on('click',".dropdown-item",function(e){if(e.currentTarget.dataset.editable!="false"&&e.currentTarget.dataset.editable!=!1)this.select(e.currentTarget.dataset.index);e.stopPropagation()}.bind(this))
this.el.addEventListener('mouseup',function(e){if(typeof e.target.dataset.dropdown!=="undefined"&&this.editable){e.stopPropagation();if(this.el.querySelector('.combobox-selected')!==null){this.set();this.parent.trigger(['input'],this,{input:""});this.renderMenu()}else{if(this.shown){this.menu.style.display='none';this.shown=!1}else{this.renderMenu()}}
gform.types.smallcombo.focus.call(this)}
this.mousedropdown=!1}.bind(this))
let field=this;this.el.addEventListener('focusin',()=>{if(!field.active)field.el.querySelector('.form-control').blur()})
this.el.addEventListener('mousedown',function(e){if(typeof e.target.dataset.dropdown!=="undefined"){this.mousedropdown=!0}}.bind(this))
this.el.addEventListener('keydown',function(e){if(!this.shown){if(e.keyCode==40){this.renderMenu()}
if(e.keyCode==13){e.preventDefault()}
return}
switch(e.keyCode){case 9:case 13:e.preventDefault();let activeEl=this.menu.querySelector('li.active a');if(activeEl!==null){this.select(activeEl.dataset.index)}
break;case 27:e.preventDefault();this.menu.style.display='none';this.shown=!1;break;case 38:e.preventDefault();var active=this.menu.querySelector('.active');gform.removeClass(active,'active');prev=active.previousElementSibling;if(!prev){var list=this.menu.querySelectorAll('li');prev=list[list.length-1]}
gform.addClass(prev,'active')
var active=$(this.menu).find('.active');if(active.length){var top=active.position().top;var bottom=top+active.height();var scrollTop=$(this.menu).scrollTop();var menuHeight=$(this.menu).height();if(bottom>menuHeight){$(this.menu).scrollTop(scrollTop+bottom-menuHeight)}else if(top<0){$(this.menu).scrollTop(scrollTop+top)}}
break;case 40:e.preventDefault();var active=this.menu.querySelector('.active');gform.removeClass(active,'active');next=active.nextElementSibling;if(!next){next=this.menu.querySelector('li')}
gform.addClass(next,'active')
var active=$(this.menu.querySelector('.active'));if(active.length){var top=active.position().top;var bottom=top+active.height();var scrollTop=$(this.menu).scrollTop();var menuHeight=$(this.menu).height();if(bottom>menuHeight){$(this.menu).scrollTop(scrollTop+bottom-menuHeight)}else if(top<0){$(this.menu).scrollTop(scrollTop+top)}}
break}
e.stopPropagation()}.bind(this))
$(this.menu).on('mouseenter','li',function(e){this.mousedover=!0;if(this.menu.querySelector('.active')!==null){gform.removeClass(this.menu.querySelector('.active'),'active')}
gform.addClass(e.currentTarget,'active')}.bind(this))
$(this.menu).on('mouseleave','li',function(e){this.mousedover=!1}.bind(this))
this.handleBlur=function(e){var input=document.createElement("input");input.value=this.combo.innerText;this.combo.innerHTML=input.value
if(!(gform.hasClass(e.relatedTarget,'dropdown-item')||gform.hasClass(e.relatedTarget,'dropdown-toggle')||this.mousedropdown)){if(this.shown){var list=_.filter(this.options,{filter:!0});if(this.strict){if(list.length==1){this.set(list[0].value)}else{list=_.filter(this.options,{label:this.combo.innerText});if(list.length){this.set(list[0].value)}}}else{this.set(this.combo.innerText)}
if(!this.mousedover&&this.shown){setTimeout(function(){this.menu.style.display='none';this.shown=!1}.bind(this),200)}
this.parent.trigger(['input'],this,{input:this.value});this.menu.style.display='none';this.shown=!1}else{}
if(this.strict){let updateVal=this.value||this.combo.innerText;this.set(updateVal);let newVal=gform.types[this.type].get.call(this)
this.set(newVal)
if(updateVal!==newVal)this.parent.trigger(['input'],this,{input:newVal})}else{if(typeof _.find(this.options,{value:this.value})!=="undefined"){this.set(this.value)}else{this.parent.trigger(['undefined'],this)}}}}.bind(this);this.combo.addEventListener('blur',this.handleBlur)
this.options=this.mapOptions.getoptions();if(typeof this.search=='string'){gform.ajax({path:gform.renderString(this.search,{value:this.value}),success:function(data){index=this.options.length;this.options=this.options.concat(_.map(data,function(option){option.index=(option.index||(++index))+"";if(typeof this.format!=='undefined'){if(typeof this.format.label!=='undefined'){option.label=gform.renderString(this.format.label,option)}
if(typeof this.format.display!=='undefined'){option.display=gform.renderString(this.format.display,option)}
if(typeof this.format.value=='string'){option.value=gform.renderString(this.format.value,option)}else if(typeof this.format.value=='function'){option.value=this.format.value.call(this,option)}}
option.visible=('visible' in option)?option.visible:!0
option.editable=('editable' in option)?option.editable:!0
if(this.combo.innerText==""||_.score(option.label.toLowerCase(),this.combo.innerText.toLowerCase())>.1){var li=document.createElement("li");li.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{i}}" class="dropdown-item">{{{display}}}{{^display}}{{{label}}}{{/display}}</a>',option);this.menu.appendChild(li)}
return option}.bind(this)))
if(typeof this.value!=='undefined'){this.set(this.value)}
this.parent.trigger(['options'],this)}.bind(this)})}else{if(typeof this.value!=='undefined'){this.set(this.value)}}
this.el.addEventListener('input',this.onchangeEvent.bind(null,!0))}});GrapheneDataGrid=function(options){if(typeof options.collections=='object'){this.collections=options.collections}else{this.collections=gform.collections}
this.methods=options.methods||{};var actions=[{type:"danger",name:'delete',min:1,label:'<i class="fa fa-times"></i> Delete'},'|',{type:"primary",name:'edit',min:1,label:'<i class="fa fa-pencil"></i> Edit'},'|',{type:"success",name:'create',min:0,label:'<i class="fa fa-pencil-square-o"></i> New'}];this.resource=options.resource;this.eventBus=new gform.eventBus({owner:'grid',item:'model',handlers:options.events||{}},this)
this.on=this.eventBus.on;this.trigger=this.eventBus.dispatch;options=_.extend({filter:!0,actions:[{'name':'create'},'|',{'name':'edit'},'|',{'name':'delete'}],sort:!0,search:!0,download:!0,upload:!0,columns:!0,id:gform.getUID()},options);if(typeof options.actions=='object'&&options.actions.length){options.actions=_.map(options.actions,function(event){var temp=_.find(actions,{name:event.name})
if(typeof temp!=='undefined'){event=_.defaultsDeep(event,temp)}
return event})}else{options.actions=!1}
var loaded=!1;if(window.localStorage&&options.name){try{loaded=JSON.parse(localStorage.getItem('dg_'+options.name))}catch(e){}}
if(typeof options.item_template!=='string'){if(window.outerWidth>767||window.outerWidth==0){options.item_template=gform.stencils.data_grid_row}else{this.mobile=!0;options.item_template=gform.stencils.mobile_row}}
this.toJSON=function(){return _.map(this.getModels(),'attributes')}
this.filterValues={};this.draw=function(){_.each(this.summary.items,function(item){this.$el.find('.filter #'+item.id+',[data-sort='+item.id+']').toggle(item.isEnabled)}.bind(this))
options.search=this.filterValues;_.each(options.search,function(item,index){if(!item&&(item!==0)){delete options.search[index]}});var pagebuffer=options.pagebuffer||2;if(this.$el.find('[name="search"]').length&&this.$el.find('[name="search"]').val().length){this.searchAll(this.$el.find('[name="search"]').val())}else{this.search(options)}
var renderObj={};options.pagecount=Math.ceil(this.lastGrabbed/options.count);renderObj.pages=[];if(options.page>options.pagecount){options.page=options.pagecount||1}
var showing=(this.lastGrabbed>(options.count*options.page))?(options.count*options.page):this.lastGrabbed;var fragment=document.createDocumentFragment();_.each(this.grab(options),function(model){fragment.appendChild(model.draw())});var target=this.$el[0].querySelector('.list-group');if(target!==null){target.innerHTML='';target.appendChild(fragment)}
var startpage=options.page-pagebuffer;if(startpage<1){startpage=1}
var endpage=options.page+pagebuffer;if(endpage>options.pagecount){endpage=options.pagecount}
for(var i=startpage;i<=endpage;i++){var page={name:i};if(options.page==i){page.active='active'}
renderObj.pages.push(page)}
renderObj.size=this.lastGrabbed;renderObj.last=showing;renderObj.first=((options.count*(options.page-1))+1);renderObj.multiPage=(endpage>startpage);renderObj.isFirst=(options.page==1);renderObj.isLast=(options.page==options.pagecount);renderObj.showLast=(options.pagecount==endpage);renderObj.showFirst=(startpage==1);renderObj.checked_count=this.getSelected().length;renderObj.entries=_.map(options.entries,function(item){return{value:item,selected:(item==options.count)}},options)
this.renderObj=renderObj;this.updateCount();this.$el.find('.paginate-footer').html(gform.render('data_grid_footer',this.renderObj));this.fixStyle();if(window.localStorage&&options.name){localStorage.setItem('dg_'+options.name,JSON.stringify(this.state.get()))}}
var changePage=function(e){e.stopPropagation();switch(e.currentTarget.dataset.page){case 'inc':options.page++;if(options.page>options.pagecount){options.page=options.pagecount}
break;case 'dec':options.page--;if(options.page<1){options.page=1}
break;default:options.page=e.currentTarget.dataset.page||options.pagecount}
this.draw()}
var processSort=function(sortField,reverse){if(typeof sortField=='undefined'||sortField==!0){this.$el.find('.reverse, [data-sort]').removeClass('text-primary').find('i').attr('class','fa fa-sort text-muted')
this.$el.find('.sortBy').val('true');options.reverse=!1}else{if(typeof reverse=='undefined'){if(options.sort==sortField){options.reverse=!options.reverse}else{options.reverse=!1}}else{options.reverse=reverse}
var current=this.$el.find('.reverse, [data-sort='+_.find(this.options.filterFields,{search:sortField}).id+']')
if(typeof current!=='undefined'){if(options.reverse){current.find('i').attr('class','fa fa-sort-asc')}else{current.find('i').attr('class','fa fa-sort-desc')}
current.siblings('[data-sort]').removeClass('text-primary');current.siblings('[data-sort]').find('i').attr('class','fa fa-sort text-muted');current.addClass('text-primary')}}
options.sort=sortField;this.draw()}.bind(this)
var options=_.extend({count:options.count||25,page:1,sort:'createdAt',reverse:!1},options);options.schema=options.schema||options.form.fields;options.filterFields=_.map(_.extend({},options.schema),function(val){val=_.omit(gform.field.normalize(new gform({options:{default:{type:'text'}}})).call(null,{},val),'parent','columns');name=val.name;val.value='';switch(val.type){case 'checkbox':val.format={label:"{{label}}"}
var temp=new gform.mapOptions(val)
val.options=temp.getoptions();val.options=_.defaults(val.options,[{label:'False',value:'false'},{label:'True',value:'true'}])
case 'radio':case 'smallcombo':val.type='select';case 'select':val.placeholder=!1;val.multiple=!1;var temp=_.pick(val,['options','max','min','path','format'])
val=_.omit(val,['options','max','min','path','format'])
temp.type='optgroup';val.options=[{type:'optgroup',options:[{label:'No Filter',value:''}],format:{label:"{{label}}"}},temp]
break;case 'fieldset':val.type='text';if(!val.template){val.template=_.map(val.fields,function(field){return'{{attributes.'+val.name+'.'+field.name+'}}'})
val.template=val.template.join('<br>')}
val=_.omit(val,['fields'])
break;case 'smallcombo':case 'hidden':break;default:val.type='text'}
if(val.options&&typeof val.options=='object'){val.options=_.map(val.options,function(item){if(typeof item=='object'){return _.omit(item,'selected')}else{return item}})}else{}
val.id=val.id||gform.getUID();val.search=val.name;val.name=val.id;val.show=[];val.edit=[];val.show=[];delete val.delete;delete val.size;delete val.pre;delete val.opst;val.edit=!0;val.help='';val.array=!1;return val});if(typeof options.columns=='object'){options.filterFields=_.filter(options.filterFields,function(item){return(_.includes(options.columns,item.name)||_.includes(options.columns,item.id))})}
var summary={'[[':'{{',']]':'}}',checked_count:0,'items':_.map(options.filterFields,function(val){var name=(val.search||val.label.split(' ').join('_').toLowerCase());if(val.template){name=val.template}else{name='{{display.'+name+'}}'}
return{'isEnabled':(typeof val.showColumn=='undefined'||val.showColumn),'label':val.label,'name':name,'cname':(val.name||val.label.split(' ').join('_').toLowerCase()),'id':val.id,'visible':!(val.type=='hidden')}})};options.entries=options.entries||[25,50,100];summary.options=options;this.summary=summary;var template;if(options.template){template=template=gform.renderString(options.template,summary)}else{if(!this.mobile){template=gform.render('data_grid',summary)}else{template=gform.render('mobile_data_grid',summary)}}
var actions={'create':function(){var fields=options.schema;if(typeof options.create=='object'){fields=options.create.fields}
new gform({name:'modal',data:options.defaultData||{},table:this,collections:this.collections,methods:this.methods,events:(options.create||options.form||{}).events,actions:[{type:'cancel',modifiers:"btn btn-danger pull-left"},{type:'save'},{type:'hidden',name:"_method",value:"create",parse:function(){return!1}}],legend:'<i class="fa fa-pencil-square-o"></i> Create New',fields:fields}).on('save',function(e){if(e.form.validate(!0)){this.add(e.form.get(),{validate:!1})
e.form.trigger('close')}}.bind(this)).on('cancel',function(e){e.form.trigger('close')}).modal()},'edit':function(){if(this.getSelected().length>1){if(typeof this.options.multiEdit=='undefined'||this.options.multiEdit.length==0){return}
var selectedModels=this.getSelected();if(selectedModels.length==0){return}
var temp=_.map(selectedModels,function(item){return item.attributes})
var common_fields=_.filter(this.options.multiEdit,function(item){return _.uniq(_.map(temp,item)).length==1});var newSchema=_.filter(this.options.schema,function(item){return common_fields.indexOf(item.name)>=0})
if(newSchema.length>0){new gform({collections:this.collections,methods:this.methods,events:(options.edit||options.form||{}).events,legend:'('+selectedModels.length+') Common Field Editor',actions:[{type:'cancel',modifiers:"btn btn-danger pull-left"},{type:'save'},{type:'hidden',name:"_method",value:"edit",parse:function(){return!1}}],fields:newSchema,data:_.extend({},_.pick(selectedModels[0].attributes,common_fields))}).on('save',function(selectedModels,e){if(e.form.validate(!0)){var newValues=e.form.get();_.map(selectedModels,function(model){model.update(newValues);this.eventBus.dispatch('model:edited',model)}.bind(this))
e.form.trigger('close')}}.bind(this,selectedModels)).on('close',function(){this.draw();this.eventBus.dispatch('edited')}.bind(this)).on('cancel',function(e){e.form.trigger('close')}).modal()}else{$(gform.render('modal_container',{title:"Common Field Editor ",footer:'<div class="btn btn-danger" style="margin-right:20px" data-dismiss="modal">Done</div>',body:'<div class="alert alert-warning">No eligible fields have been found for editing.</div>'})).modal()}}else{var fields=options.schema;if(typeof options.edit=='object'){fields=options.edit.fields}
new gform({collections:this.collections,methods:this.methods,events:(options.edit||options.form||{}).events,name:'modal',actions:[{type:'cancel',modifiers:"btn btn-danger pull-left"},{type:'save'},{type:'hidden',name:"_method",value:"edit",parse:function(){return!1}}],legend:'<i class="fa fa-pencil-square-o"></i> Edit',data:this.getSelected()[0].attributes,fields:fields}).on('save',function(e){if(e.form.validate(!0)){this.getSelected()[0].set(e.form.toJSON());this.eventBus.dispatch('edited')
this.eventBus.dispatch('model:edited',this.getSelected()[0])
this.draw();e.form.trigger('close')}}.bind(this)).on('cancel',function(e){e.form.trigger('close')}).modal()}},'delete':function(){var checked_models=this.getSelected()
if(checked_models.length){if(confirm("Are you sure you want to delete "+checked_models.length+" records? \nThis operation can not be undone.\n\n")){_.each(checked_models,function(item){item.delete();this.eventBus.dispatch('model:deleted',item)}.bind(this))
this.eventBus.dispatch('deleted')
this.draw()}}},'mark':function(e){e.model.toggle()}}
function handleFiles(table,e){var files=this.files
if(window.FileReader){(function(fileToRead){var reader=new FileReader();reader.readAsText(fileToRead);reader.onload=function(event){var csv=event.target.result;var temp=_.csvToArray(csv);var valid=!0;var ref=$(gform.render('modal_container',{title:"Importing CSV ",footer:'<div class="btn btn-danger" data-dismiss="modal">Cancel</div>',body:'<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 0%"><span class="sr-only">50% Complete</span></div></div><div class="status">Validating Items...</div>'}));ref.modal();ref.on('hidden.bs.modal',function(){this.importing=!1}.bind(this));var itemCount=temp.length;var totalProgress=itemCount*2;var items=[];this.importing=!0;var keys=_.map(temp[0],function(item,key){var search=_.find(options.schema,{label:key});return((search==null)?{name:key,label:key}:search)})
for(var i=0;i<temp.length;i++){if(!this.importing)return!1;if(keys.length==_.values(temp[i]).length){var newtemp={};_.each(keys,function(key){newtemp[key.name]=temp[i][key.label]||""})
valid=table.validate(newtemp);if(!valid){break}
items.push(valid)}else{itemCount--}
ref.find('.progress-bar').width((i/totalProgress)*100+'%')}
if(valid){ref.find('.status').html('Adding Items...');for(var i=0;i<items.length;i++){if(!this.importing)return!1;table.add(items[i],{draw:!1});ref.find('.progress-bar').width(((i+itemCount)/totalProgress)*100+'%')}}else{ref.find('.btn').html('Done');ref.find('.status').html('<div class="alert alert-danger">Error(s) in row '+i+', failed to validate!<ul><li>'+_.filter(table.errors,function(item){return item}).join('</li><li>')+'</li></div>')
return}
ref.find('.status').html('<div class="alert alert-success">Successfully processed file, '+itemCount+' rows were added!</div>')
ref.find('.btn').toggleClass('btn-danger btn-success').html('Done');ref.find('.progress').hide();if(typeof table.options.sortBy!=='undefined'){table.models=_.sortBy(table.models,function(obj){return obj.attributes[this.options.sortBy]}.bind(table)).reverse()}
if(typeof table.options.onBulkLoad=='function'){table.options.onBulkLoad()}}
reader.onerror=function(evt){if(evt.target.error.name=="NotReadableError"){alert("Canno't read file !")}}})(files[0]);e.currentTarget.value=''}else{alert('FileReader is not supported in this browser.')}
table.draw()}
function onload($el){this.$el=$el;if($el.find('.filter').length){this.filter=new gform({actions:[],collections:this.collections,name:'filter'+this.options.id,clear:!1,fields:options.filterFields,default:{target:function(){return'[name="'+this.name+'"],[data-inline="'+this.name+'"]'},hideLabel:!0,type:'text',format:{label:'{{label}}',value:'{{value}}'}}},$el.find('.filter')[0]).on('input',function(){this.$el.find('[name="search"]').val('');this.filterValues=this.filter.toJSON();this.draw()}.bind(this));this.filter.set()}
this.checkForm=new gform(_.assign({},{collections:this.collections,name:'internal'+this.options.id,fields:options.schema},options.form||{})).on('change',function(){_.each(this.models,function(model){model.update(null,!0)})}.bind(this))
this.updateCount=function(count){var count=count||this.getSelected().length;this.summary.checked_count=count;if(!this.mobile){this.$el.find('[name="actions"]').html(gform.render('actions',this.summary))}
_.each(this.$el.find('.grid-action'),function(i){var event=_.assign({max:10000,min:0},_.find(this.options.actions,{name:i.dataset.event}))
if(this.summary.checked_count>=event.min&&this.summary.checked_count<=event.max){gform.removeClass(i,'disabled')}else{gform.addClass(i,'disabled')}}.bind(this))
this.$el.find('[name="count"]').html(gform.render('count',this.summary));var checkbox=this.$el.find('[name="select_all"].fa');if(count>0&&count==this.getModels().length){checkbox.attr('class','fa fa-2x fa-check-square-o')}else if(count==0){checkbox.attr('class','fa fa-2x fa-square-o')}else{checkbox.attr('class','fa fa-2x fa-minus-square-o')}}
this.load=function(data){_.each(this.models,function(model){model.delete()})
this.models=[];if(data){for(var i in data){this.models.push(new gridModel(this,data[i],{'*':[function(e){e.model.owner.eventBus.dispatch('model:'+e.event,e.model)}],'check':[function(e){e.model.owner.draw()}]}))}}
if(typeof this.options.sortBy!=='undefined'){this.models=_.sortBy(this.models,function(obj){return obj.attributes[this.options.sortBy]}.bind(this)).reverse()}
this.draw()}
this.view=gform.renderString(options.item_template,summary)
this.$el.on('change','.csvFileInput',_.partial(handleFiles,this));this.$el.on('click','[name="bt-upload"]',function(){this.$el.find('.csvFileInput').click()}.bind(this));this.$el.on('click','[name="bt-download"]',this.getCSV.bind(this));this.$el.on('click','[data-page]',changePage.bind(this));this.$el.on('click','.columnEnables label',function(e){e.stopPropagation();_.find(this.summary.items,{id:e.currentTarget.dataset.field}).isEnabled=e.currentTarget.childNodes[0].checked;this.view=gform.renderString(options.item_template,summary)
this.draw()}.bind(this));this.$el.on('click','.grid-row',function(e){this.eventBus.dispatch('click',_.find(this.models,{id:e.currentTarget.dataset.id}))}.bind(this));this.$el.on('change','[name="count"]',function(e){options.count=parseInt(e.currentTarget.value,10);this.draw()}.bind(this))
this.$el.on('input','[name="search"]',_.debounce(function(e){this.draw()}.bind(this),300));this.$el.on('click','[name="select_all"]',function(e){var checked_models=this.getSelected();if(checked_models.length||this.getModels().length==0){_.each(checked_models,function(item){item.toggle(!1,!0)})}else{_.each(this.filtered,function(item){item.toggle(!0,!0)})}
this.draw()}.bind(this));this.$el.on('click','[name="reset-search"]',function(){this.$el.find('[name="search"]').val('');if(this.filter){this.filter.set()}
this.filterValues={};processSort()}.bind(this));this.dispatch=function(event,atts){if(typeof atts=="undefined"){atts={event:event}}
_.each(this.getSelected(),function(model){this.eventBus.dispatch('model:'+atts.event,model)}.bind(this))
var model;if(typeof atts.id!=='undefined'){model=_.find(this.models,{id:atts.id})}
var result=this.eventBus.dispatch(event,model,atts)
if(result.default&&typeof actions[event]!=='undefined'){actions[event].call(this,result)}}
this.$el.on('click','[data-event]',function(e){e.stopPropagation();e.preventDefault();var atts=_.assign({},e.currentTarget.dataset);this.dispatch(atts.event,atts)}.bind(this));this.$el.on('click','[data-sort]',function(e){e.stopPropagation();e.preventDefault();var sortField=_.find(this.options.filterFields,{name:e.currentTarget.dataset.sort}).search;if(this.options.reverse&&this.options.sort==sortField){processSort()}else{processSort(sortField)}}.bind(this))
this.$el.on('change','.sortBy',function(e){if(e.currentTarget.value!==''){processSort((_.find(this.options.filterFields,{id:e.currentTarget.value})||{search:!0}).search)}}.bind(this));this.$el.on('click','.filterForm',function(e){this.$el.find('[name="search"]').val('');new gform({collections:this.collections,legend:"Filter By",name:'modal_filter'+this.options.id,data:this.filterValues,fields:options.filterFields}).on('save',function(){this.filterValues=gform.instances['modal_filter'+this.options.id].toJSON();this.draw();gform.instances['modal_filter'+this.options.id].trigger('close')}.bind(this)).modal()}.bind(this));this.$el.on('click','.reverse',function(e){processSort(this.options.sort)}.bind(this));this.load(options.data)}
this.validate=function(item){var status=!1;var tempForm=new gform({collections:this.collections,fields:options.schema,methods:this.methods});tempForm.set(item);if(tempForm.validate()){status=tempForm.toJSON()}else{this.errors=tempForm.errors;console.log('Model not valid')}
tempForm.destroy();return status}
this.add=function(item,config){config=config||{validate:!1,silent:!1}
var newModel=new gridModel(this,item,{'*':[function(e){e.model.owner.eventBus.dispatch('model:'+e.event,e.model)}],'check':[function(e){e.model.owner.draw()}]})
if(config.validate==!1||this.validate(item)){this.models.push(newModel);if(typeof this.options.sortBy!=='undefined'){this.models=_.sortBy(this.models,function(obj){return obj.attributes[this.options.sortBy]}.bind(this)).reverse()}
if(config.draw!==!1){this.draw()}
if(config.silent!==!0){this.eventBus.dispatch('created',newModel)
this.eventBus.dispatch('model:created',newModel)}}else{return!1}
return newModel}
this.search=function(options){var ordered=_.sortBy(this.getModels(),function(obj){return obj.attributes[options.sort]});if(!options.reverse){ordered=ordered.reverse()}
filterMap=this.filterMap;ordered=_.filter(ordered,function(anyModel){var keep=_.isEmpty(options.search);for(var filter in options.search){var temp;if(_.filter(options.filterFields,{id:filter})[0]&&typeof _.filter(options.filterFields,{id:filter})[0].options=='undefined'){temp=(_.score((anyModel.display[this.filterMap[filter]]+'').replace(/\s+/g," ").toLowerCase(),(options.search[filter]+'').toLowerCase())>0.40)}else{temp=(anyModel.display[this.filterMap[filter]]+''==options.search[filter]+'')||(anyModel.attributes[this.filterMap[filter]]+''==options.search[filter]+'')||(typeof anyModel.attributes[this.filterMap[filter]]=="object"&&(anyModel.attributes[this.filterMap[filter]].indexOf(options.search[filter])!=-1||anyModel.attributes[this.filterMap[filter]].indexOf(options.search[filter]+"")!=-1))}
keep=temp;if(!keep){break}}
return keep})
this.lastGrabbed=ordered.length;this.filtered=ordered}
this.find=function(search){var keys=_.keys(search)
return _.filter(this.getModels(),function(anyModel){return _.isEqual(search,_.pick(anyModel.attributes,keys))})}
this.searchAll=function(search){options.sort=null;this.$el.find('[data-sort]').removeClass('text-primary');this.$el.find('[data-sort]').find('i').attr('class','fa fa-sort text-muted');if(this.filter){this.filter.set()}
search=search.toLowerCase()
_.map(this.getModels(),function(model){model.score=0;for(var filter in options.filterFields){model.score+=_.score((model.display[options.filterFields[filter].search]+'').replace(/\s+/g," ").toLowerCase(),search)}})
this.filtered=_.filter(_.sortBy(this.getModels(),'score'),function(model){return(model.score>0)}).reverse();this.lastGrabbed=this.filtered.length}
this.fixStyle=function(){if(this.options.autoSize){try{var container=this.$el.find('.table-container > div');var headers=this.$el.find('.table-container > table tr th:visible');var columns=this.$el.find('.list-group-row th');this.$el.find('.table-container table').removeClass('table-fixed')
container.css('width','auto')
container.css('minWidth','auto')
headers.css('width','auto')
headers.css('minWidth','85px')
this.$el.find('.table-container > table tr th.select-column').css('minWidth','60px')
this.$el.find('.table-container > table tr th.select-column').css('width','60px')
columns.css('width','auto')
columns.css('minWidth','auto')
container.css('height',$(window).height()-container.offset().top-(88+this.options.autoSize)+'px');_.each(columns,function(column,index){if(typeof headers[index]!=='undefined'){column.style.display='table-cell';if(headers[index].offsetWidth>column.offsetWidth){$(column).css('width',headers[index].offsetWidth+'px');$(column).css('minWidth',headers[index].offsetWidth+'px');$(headers[index]).css('width',headers[index].offsetWidth+'px')
$(headers[index]).css('minWidth',headers[index].offsetWidth+'px')}else{$(headers[index]).css('width',headers[index].offsetWidth+'px')
$(headers[index]).css('minWidth',headers[index].offsetWidth+'px')
$(column).css('width',headers[index].offsetWidth+'px');$(column).css('minWidth',headers[index].offsetWidth+'px')}}else{column.style.display='none'}}.bind(this))
this.$el.find('.table-container table').addClass('table-fixed')
var target=this.$el.find('.table-container > div table')[0].offsetWidth;if(this.$el.find('.table-container > table')[0].offsetWidth>target){target=this.$el.find('.table-container > table')[0].offsetWidth}
container.css('width',target+'px')
container.css('minWidth',target+'px')
if(target>this.$el.find('.table-container')[0].offsetWidth){this.$el.find('.table-container').css('overflow','auto')}else{this.$el.find('.table-container').css('overflow','hidden')}}catch(e){}}}
this.visible=[];this.grab=function(options){_.each(this.visible,function(item){item.visible=!1})
var temp=this.filtered.slice((options.count*(options.page-1)),(options.count*(options.page-1))+options.count)
this.visible=temp
_.each(this.visible,function(item){item.visible=!0})
return temp};this.getModels=function(search){var search=search||{deleted:!1};return _.filter(this.models,search)}
this.getSelected=function(){return this.getModels({checked:!0,deleted:!1})}
this.destroy=function(){this.$el.find('.list-group').empty();this.$el.off();this.$el.empty()}
this.state={get:function(){var temp={count:this.options.count,page:this.options.page};if(this.$el.find('[name="search"]').length&&this.$el.find('[name="search"]').val().length){temp.search=this.$el.find('[name="search"]').val()}else{temp.sort=options.sort;temp.reverse=options.reverse;if(typeof this.filter!=='undefined'){temp.filters={};_.each(this.options.filterFields,function(item){temp.filters[item.search]=this[item.id]}.bind(this.filter.toJSON()))}}
temp.columns=_.map(_.map(_.filter(this.summary.items,function(item){return item.isEnabled}),'id'),function(id){return _.find(this.options.filterFields,{id:id}).search}.bind(this))
return temp}.bind(this),set:function(settings){if(typeof settings.columns!=='undefined'&&settings.columns.length){this.summary.items=_.map(this.summary.items,function(item){item.isEnabled=_.includes(settings.columns,this.filterMap[item.cname])
return item})
this.view=gform.renderString(options.item_template,summary)
this.$el.find('.columnEnables [type="checkbox"]').each(function(e){this.checked=!1})
if(options.columns){_.each(settings.columns,function(item){var temp=this.$el.find('.columnEnables [data-field="'+_.find(this.options.filterFields,{search:item}).id+'"] [type="checkbox"]');if(temp.length)temp[0].checked=!0}.bind(this))}}
if(typeof settings.filters!=='undefined'){this.filterValues={};_.each(settings.filters,function(item,index){this.filterValues[_.find(this.options.filterFields,{search:index}).id]=item}.bind(this))}
if(typeof settings.sort!=='undefined'){processSort(settings.sort||options.sort,settings.reverse)}
if(typeof this.filter!=='undefined'){this.filter.set(this.filterValues)
this.filterValues=this.filter.toJSON()}
if(typeof settings.search!=='undefined'&&settings.search!==''){this.$el.find('[name="search"]').val(settings.search)}
this.options.page=settings.page||this.options.page;this.options.count=settings.count||this.options.count;this.draw()}.bind(this)}
this.models=[];this.options=options;this.filterMap={}
_.map(options.filterFields,function(item){this.filterMap[item.id]=item.search}.bind(this));this.getCSV=function(title){if(typeof title!=="string"){title=this.options.title}
_.csvify(_.map(this.filtered,function(item){return item.attributes}),_.map(_.filter(this.summary.items,function(item){return item.isEnabled}),function(filterMap,item){return{label:item.label,name:filterMap[item.cname]}}.bind(null,this.filterMap)),title)}
var container=options.el;if(typeof options.el=='string'){container=document.querySelector(container)}
if(container!==null){container.innerHTML=gform.renderString(template,summary);onload.call(this,$(container))}
this.$el.find('[name="search"]').focus();this.$el.find('.table-container > div').css('overflow','auto');$(window).on('resize orientationChange',this.fixStyle.bind(this));if(loaded){this.state.set(loaded)}}
GrapheneDataGrid.version='0.0.4.2';_.mixin({score:function(base,abbr,offset){offset=offset||0;if(abbr.length===0)return 0.9;if(abbr.length>base.length)return 0.0;for(var i=abbr.length;i>0;i--){var sub_abbr=abbr.substring(0,i);var index=base.indexOf(sub_abbr);if(index<0)continue;if(index+abbr.length>base.length+offset)continue;var next_string=base.substring(index+sub_abbr.length);var next_abbr=null;if(i>=abbr.length){next_abbr=''}else{next_abbr=abbr.substring(i)}
var remaining_score=_.score(next_string,next_abbr,offset+index);if(remaining_score>0){var score=base.length-next_string.length;if(index!==0){var c=base.charCodeAt(index-1);if(c==32||c==9){for(var j=(index-2);j>=0;j--){c=base.charCodeAt(j);score-=((c==32||c==9)?1:0.15)}}else{score-=index}}
score+=remaining_score*next_string.length;score/=base.length;return(score)}}
return(!1)},processCsvLine:function(text){var re_valid=/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/;var re_value=/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g;if(!re_valid.test(text))return null;var a=[];text.replace(re_value,function(m0,m1,m2,m3){if(m1!==undefined)a.push(m1.replace(/\\'/g,"'"));else if(m2!==undefined)a.push(m2.replace(/\\"/g,'"'));else if(m3!==undefined)a.push(m3);return''});if(/,\s*$/.test(text))a.push('');return a},csvToArray:function(csvString,options){options=options||{skip:0}
var csvRowArray=csvString.split(/\n/).slice(options.skip);var headerCellArray=_.processCsvLine(csvRowArray.shift());return _.map(csvRowArray,function(row){return _.zipObject(headerCellArray,_.processCsvLine(row))})},csvify:function(data,columns,title){var csv='"'+_.map(columns,'label').join('","')+'"\n';labels=_.map(columns,'name')
var empty=_.zipObject(labels,_.map(labels,function(){return''}))
csv+=_.map(data,function(d){return JSON.stringify(_.map(_.values(_.extend(empty,_.pick(d,labels))),function(item){if(typeof item=='string'){return item.split('"').join('""')}else{return _.isArray(item)?item.join():item}}))},this).join('\n').replace(/(^\[)|(\]$)/mg,'')
var link=document.createElement("a");link.setAttribute("href",'data:text/csv;charset=utf-8,'+encodeURIComponent(csv));link.setAttribute("download",(title||"GrapheneDataGrid")+".csv");document.body.appendChild(link);link.click();document.body.removeChild(link);return(!0)}});var CSVParser=(function(){"use strict";function captureFields(fields){if(this.options.ignoreEmpty===!1||fields.some(function(field){return field.length!==0})){this.rows.push(fields)}}
function Parser(data,options){var defaultOptions={"fieldSeparator":",","strict":!0,"ignoreEmpty":!0};if(options===undefined)options={};this.options={};Object.keys(defaultOptions).forEach(function(key){this.options[key]=options[key]===undefined?defaultOptions[key]:options[key]},this);this.rows=[];this.data=data}
Parser.prototype.toString=function toString(){return"[object CSVParser]"};Parser.prototype.numberOfRows=function numberOfRows(){return this.rows.length};Parser.prototype.parse=function parse(){var regexString=("(\\"+this.options.fieldSeparator+"|\\r?\\n|\\r|^)"+"(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|"+"([^\"\\"+this.options.fieldSeparator+"\\r\\n]*))");var objPattern=new RegExp(regexString,"gi");var doubleQuotePattern=new RegExp("\"\"","g");var fields=[];var arrMatches=null;var strMatchedDelimiter,strMatchedValue;while(arrMatches=objPattern.exec(this.data)){strMatchedDelimiter=arrMatches[1];if(strMatchedDelimiter.length&&(strMatchedDelimiter!=this.options.fieldSeparator)){captureFields.apply(this,[fields]);fields=[]}
if(arrMatches[2]){strMatchedValue=arrMatches[2].replace(doubleQuotePattern,"\"")}else{strMatchedValue=arrMatches[3]}
fields.push(strMatchedValue)}
captureFields.apply(this,[fields]);if(this.options.strict===!0&&!this.rows.every(function(row){return(row.length===this.length)},this.rows[0])){throw new Error("Invalid CSV data. Strict mode requires all rows to have the same number of fields. You can override this by passing `strict: false` in the CSVParser options")}};return Parser})();function gridModel(owner,initial,events){this.visible=!1;this.owner=owner;this.id=gform.getUID();this.attributes={};this.display={};this.attribute_history=[];this.schema=owner.options.schema;this.iswaiting;this.row=document.createElement('tr');this.row.setAttribute('data-id',this.id);this.row.setAttribute("class",'filterable grid-row'+(this.iswaiting?" warning":""));this.waiting=function(state){if(typeof state!=='undefined'){this.iswaiting=state;this.row.setAttribute("class",'filterable grid-row'+(this.iswaiting?" warning":""));this.draw()}
return this.iswaiting}
this.draw=function(){if(this.visible){this.dispatch('draw')
var temp=gform.renderString(this.owner.view,this);if(this.row.innerHTML!=temp){this.row.innerHTML=temp}
this.dispatch('drawn')}
return this.row}
this.eventBus=new gform.eventBus({owner:'model',item:'model',handlers:events||{}},this)
this.on=this.eventBus.on;this.dispatch=this.eventBus.dispatch;var processAtts=function(){_.each(this.schema,function(item){var options;var temp=_.find(this.owner.checkForm.fields,{name:item.name})
searchables=this.attributes[item.name];if(typeof this.attributes[item.name]!=="object")searchables=[searchables]
this.display[item.name]=_.reduce(searchables,function(display,search){if(display.length)display+="\r\n"
if(typeof item.options!=='undefined'){options=_.find(temp.mapOptions.getoptions(),{value:search+""});if(typeof options=='undefined'&&_.isFinite(search)){options=_.find(temp.mapOptions.getoptions(),{value:parseInt(search)})}
if(typeof options=='undefined'){options=_.find(temp.mapOptions.getoptions(),{value:search})}}
if(typeof options!=='undefined'){display+=options.label}
if(item.template){display+=gform.renderString(item.template,this)}else{if(typeof display=='undefined'||display=="")display+=(typeof search!=='undefined')?search:''}
return display},"")}.bind(this))}
this.set=function(newAtts,silent){if(typeof newAtts!=='undefined'&&newAtts!==null){this.attribute_history.push(_.extend({},this.attributes));this.attributes=newAtts}
processAtts.call(this);this.draw();if(!silent){this.dispatch('set')}}
this.update=function(newAtts,silent){this.set(_.assign(this.attributes,newAtts),silent)}
this.checked=!1;this.deleted=!1;this.toggle=function(state,silent){if(typeof state==='boolean'){this.checked=state}else{this.checked=!this.checked}
this.draw();if(!silent){this.dispatch('check')}}
this.set(initial)
processAtts.call(this);this.toJSON=function(){return this.attributes}
this.undo=function(){if(this.deleted){this.deleted=!1}else{if(this.attribute_history.length){this.attributes=this.attribute_history.pop();processAtts.call(this)}else{this.deleted=!0}}
this.owner.draw()}
this.delete=function(){this.deleted=!0}};gform.stencils.actions=`
<table style="width:100%">
<thead>
<tr>
<th>
<div class="btn-group pull-left" style="white-space: nowrap; font-size: 0;" role="group" aria-label="...">

{{#options.actions}}
{{#name}}
<a href="javascript:void(0);" style="display: inline-block;font-size: 14px;float: none;clear: none;" data-event="{{name}}" class="grid-action disabled btn btn-{{type}}{{^type}}default{{/type}}">{{{label}}}</a>
{{/name}}

{{^name}}
</div>
</th>
<th style="width:100%">
<div class="btn-group pull-{{^align}}left{{/align}}{{align}}" style="margin-left:15px;white-space: nowrap; font-size: 0;" role="group" aria-label="...">

{{/name}}
{{/options.actions}}
</div>
</th>
</tr>
</thead>
</table>`
gform.stencils.count=`{{#checked_count}}<h5 class="range label label-info checked_count" style="margin:7px 0">{{checked_count}} item(s) selected</h5>{{/checked_count}}`;gform.stencils.mobile_head=`
<div style="clear:both;">

  {{#options.sort}}

  <div class="row" style="margin-bottom:10px">

    <div class="col-xs-6">
    {{#options.filter}}

      <div name="reset-search" style="position:relative" class="btn btn-default" data-toggle="tooltip" data-placement="left" title="Clear Filters">
        <i class="fa fa-filter"></i>
        <i class="fa fa-times text-danger" style="position: absolute;right: 5px;"></i>
      </div>    

    <div class="btn btn-info filterForm">Filter</div>
  {{/options.filter}}
    </div>
    <div class="col-xs-6">
    		{{#options.search}}<input type="text" name="search" class="form-control" style="" placeholder="Search">{{/options.search}}
        </div>
    </div>
    <div class="input-group">
      <span class="" style="display: table-cell;width: 1%;white-space: nowrap;vertical-align: middle;padding-right:5px">
        <button class="btn btn-default reverse" type="button" tabindex="-1"><i class="fa fa-sort text-muted"></i></button>
      </span>
        <select class="form-control sortBy">
          <option value=true>None</option>
          {{#items}}
            {{#visible}}
              <option value="{{id}}">{{label}}</option>
            {{/visible}}
          {{/items}}
        <select>
    </div>
  {{/options.sort}}

</div>
`
gform.stencils.mobile_row=`<tr><td colspan="100%" class="filterable">		
{{^options.hideCheck}}

<div data-event="mark" data-id="{{[[}}id{{]]}}"  style="text-align:left;padding:0;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">
<span class="text-muted fa {{[[}}#iswaiting{{]]}}fa-spinner fa-spin {{[[}}/iswaiting{{]]}} {{[[}}^iswaiting{{]]}} {{[[}}#checked{{]]}}fa-check-square-o{{[[}}/checked{{]]}} {{[[}}^checked{{]]}}fa-square-o{{[[}}/checked{{]]}}{{[[}}/iswaiting{{]]}}" style="margin:6px; cursor:pointer;font-size:24px"></span>
</div>
  {{/options.hideCheck}}
<div>
{{#items}}
{{#visible}}{{#isEnabled}}<div class="row" style="min-width:85px"><span class="col-sm-3"><b>{{label}}</b></span><span class="col-sm-9 col-xs-12">{{{name}}}</span></div>{{/isEnabled}}{{/visible}}
{{/items}}
</div>
</td></tr>`
gform.stencils.mobile_data_grid=`<div class="well table-well">
<div style="height:40px;">
  <div name="actions" class=" pull-left" style="margin-bottom:10px;width:62%" ></div>

  <input type="file" class="csvFileInput" accept=".csv" style="display:none">

  <div class="hiddenForm" style="display:none"></div>
  <div class="btn-group pull-right" style="margin-bottom:10px" role="group" aria-label="...">
    {{#showAdd}}
    <div data-event="add" class="btn btn-success"><i class="fa fa-pencil-square-o"></i> New</div>
    {{/showAdd}}

    {{#options.actions}}
      {{#global}}<div class="btn btn-default custom-event" data-event="{{name}}" data-id="{{[[}}id{{]]}}">{{{label}}}</div>{{/global}}
    {{/options.actions}}
    {{#options.download}}
    <div class="btn btn-default hidden-xs" name="bt-download" data-toggle="tooltip" data-placement="left" title="Download"><i class="fa fa-download"></i></div>
    {{/options.download}}
    {{#options.upload}}
    <div class="btn btn-default hidden-xs" name="bt-upload" data-toggle="tooltip" data-placement="left" title="Upload"><i class="fa fa-upload"></i></div>
    {{/options.upload}}


    {{#options.columns}}
    <div class="btn-group columnEnables" data-toggle="tooltip" data-placement="left" title="Display Columns">
      <button class="btn btn-default dropdown-toggle" type="button" id="enables_{{options.id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
        <i class="fa fa-list"></i>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu pull-right" style="padding-top:10px" aria-labelledby="enables_{{options.id}}">
        {{#items}}
        {{#visible}}
        <li><label data-field="{{id}}" style="width:100%;font-weight:normal"><input type="checkbox" {{#isEnabled}}checked="checked"{{/isEnabled}} style="margin: 5px 0 5px 15px;"> {{label}}</label></li>
        {{/visible}}
        {{/items}}
      </ul>
    </div>
    {{/options.columns}}

  </div>


</div>	
    {{>mobile_head}}


{{^options.hideCheck}}
<div style="padding: 16px 0 0 15px;"><i name="select_all" class="fa fa-2x fa-square-o"></i></div>
{{/options.hideCheck}}

<div class="table-container" style="width:100%;overflow:auto">

<div style="min-height:100px">
  <table class="table {{^options.noborder}}table-bordered{{/options.noborder}} table-striped table-hover dataTable" style="margin-bottom:0px">
    <tbody class="list-group">
      <tr><td colspan="100">
        <div class="alert alert-info" role="alert">You have no items.</div>
      </td></tr>
    </tbody>

  </table>
</div>

</div>
<div class="paginate-footer" style="overflow:hidden;margin-top:10px"></div>
</div>`
gform.stencils.data_grid=`<div class="well table-well">
<input type="file" class="csvFileInput" accept=".csv" style="display:none">
<div class="hiddenForm" style="display:none"></div>

<div style="overflow:hidden">
  <div name="actions" class=" pull-left" style="margin-bottom:10px;" ></div>
</div>	
<div>

  <div class="btn-group pull-right" style="margin-bottom:10px;margin-left:10px" role="group" aria-label="...">

    {{#options.download}}
    <div class="btn btn-default hidden-xs" name="bt-download" data-toggle="tooltip" data-placement="left" title="Download"><i class="fa fa-download"></i></div>
    {{/options.download}}
    {{#options.upload}}
    <div class="btn btn-default hidden-xs" name="bt-upload" data-toggle="tooltip" data-placement="left" title="Upload"><i class="fa fa-upload"></i></div>
    {{/options.upload}}


    {{#options.columns}}
    <div class="btn-group columnEnables" data-toggle="tooltip" data-placement="left" title="Display Columns">
      <button class="btn btn-default dropdown-toggle" type="button" id="enables_{{options.id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
        <i class="fa fa-list"></i>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu pull-right" style="padding-top:10px;padding-left:10px" aria-labelledby="enables_{{options.id}}">
        {{#items}}
        {{#visible}}
        <li><label data-field="{{id}}" style="width:100%;font-weight:normal"><input type="checkbox" {{#isEnabled}}checked="checked"{{/isEnabled}}> {{label}}</label></li>
        {{/visible}}
        {{/items}}
      </ul>
    </div>
    {{/options.columns}}
  </div>
  {{#options.search}}<input type="text" name="search" class="form-control pull-right" style="max-width:300px; margin-bottom:10px" placeholder="Search">{{/options.search}}

  <span name="count"></span>
</div>

{{^options.autoSize}}
<div class="paginate-footer hidden-xs" style="overflow:hidden;margin-top:10px;clear:both"></div>
{{/options.autoSize}}

<div class="table-container" style="width:100%;overflow:auto">
{{#options.autoSize}}
<table class="table {{^options.noborder}}table-bordered{{/options.noborder}}" style="margin-bottom:0px">
<thead class="head">
{{>data_grid_head}}
</thead>
</table>
{{/options.autoSize}}


<div style="min-height:100px">
  <table class="table {{^options.noborder}}table-bordered{{/options.noborder}} table-striped table-hover dataTable" style="margin-bottom:0px;{{#options.autoSize}}margin-top: -19px;{{/options.autoSize}}">
    {{^options.autoSize}}
    <thead class="head">
    {{>data_grid_head}}
    </thead>
    {{/options.autoSize}}
{{#options.autoSize}}
    <thead>
          <tr  class="list-group-row">
              {{^options.hideCheck}}
  <th style="width:60px" class="select-column"></th>
  {{/options.hideCheck}}
        {{#items}}
  {{#visible}}
<th  style="min-width:85px">
  {{/visible}}
  {{/items}}
  </tr>
  </thead>
{{/options.autoSize}}
    <tbody class="list-group">
      <tr><td colspan="100">
        <div class="alert alert-info" role="alert">You have no items.</div>
      </td></tr>
    </tbody>

  </table>
</div>

</div>
<div class="paginate-footer" style="overflow:hidden;margin-top:10px"></div>
</div>`
gform.stencils.data_grid_footer=`<div>
{{#multiPage}}
<nav class="pull-right" style="margin-left: 10px;">
{{#size}}
  <ul class="pagination" style="margin:0">
    {{^isFirst}}
    {{^showFirst}}<li class="pagination-first"><a data-page="1" href="javascript:void(0);" aria-label="First"><span aria-hidden="true">&laquo;</span></a></li>{{/showFirst}}
    <li><a data-page="dec" href="javascript:void(0);" aria-label="Previous"><span aria-hidden="true">&lsaquo;</span></a></li>
    {{/isFirst}}
    {{#pages}}
      <li class="{{active}}"><a data-page="{{name}}" href="javascript:void(0);">{{name}}</a></li>
    {{/pages}}
    {{^isLast}}
    <li><a data-page="inc" href="javascript:void(0);" aria-label="Next"><span aria-hidden="true">&rsaquo;</span></a></li>
    {{^showLast}}<li class="pagination-last"><a data-page="" href="javascript:void(0);" aria-label="Last"><span aria-hidden="true">&raquo;</span></a></li>{{/showLast}}
    {{/isLast}}

  </ul>
{{/size}}
</nav>

{{/multiPage}}	
<h5 class="range badge {{^size}}alert-danger{{/size}} pull-left" style="margin-right:15px;">{{#size}}Showing {{first}} to {{last}} of {{size}} results{{/size}}{{^size}}No matching results{{/size}}</h5>
  {{#entries.length}}
  <span class="pull-left">
    <select class="form-control" style="display:inline-block;width:auto;min-width:50px" name="count">
    <option value="10000">All</option>
    {{#entries}}
    <option value="{{value}}" {{#selected}}selected="selected"{{/selected}}>{{value}}</option>
    {{/entries}}

    </select>
    <span class="hidden-xs">results per page</span>
  </span>
  {{/entries.length}}
</div>`
gform.stencils.data_grid_head=`  <tr style="cursor:pointer" class="noselect table-sort">
{{^options.hideCheck}}
<th style="width: 60px;min-width:60px;padding: 0 0 0 20px;" class="select-column"><i name="select_all" class="fa fa-2x fa-square-o"></i></th>
{{/options.hideCheck}}

{{#items}}
{{#visible}}
<th {{#options.sort}}data-sort="{{cname}}"{{/options.sort}}><h6 style="margin: 2px;font-size:13px;white-space: nowrap">{{#options.sort}}<i class="fa fa-sort text-muted"></i> {{/options.sort}}{{{label}}}</h6></th>
{{/visible}}
{{/items}}
</tr>
{{#options.filter}}
<tr class="filter">
{{^options.hideCheck}}<td>
<div name="reset-search" style="position:relative" class="btn" data-toggle="tooltip" data-placement="left" title="Clear Filters">
  <i class="fa fa-filter"></i>
  <i class="fa fa-times text-danger" style="position: absolute;right: 5px;"></i>
</div>
</td>{{/options.hideCheck}}

{{#items}}
{{#visible}}
<td data-inline="{{cname}}" style="min-width:85px" id="{{id}}"></td>
{{/visible}}
{{/items}}
</tr>
{{/options.filter}}`
gform.stencils.data_grid_row=`{{^options.hideCheck}}

<td data-event="mark" data-id="{{[[}}id{{]]}}" style="width: 60px;min-width:60px;text-align:left;padding:0;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">
  <span class="text-muted fa {{[[}}#iswaiting{{]]}}fa-spinner fa-spin {{[[}}/iswaiting{{]]}} {{[[}}^iswaiting{{]]}} {{[[}}#checked{{]]}}fa-check-square-o{{[[}}/checked{{]]}} {{[[}}^checked{{]]}}fa-square-o{{[[}}/checked{{]]}}{{[[}}/iswaiting{{]]}} " style="margin:6px 0 6px 20px; cursor:pointer;font-size:24px"></span>
   </td>

  {{/options.hideCheck}}
{{#items}}
{{#visible}}{{#isEnabled}}<td style="min-width:85px">{{{name}}}</td>{{/isEnabled}}{{/visible}}
{{/items}}`;!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):function(){var n=t.Ractive,i=e();t.Ractive=i,i.noConflict=function(){return t.Ractive=n,i}}()}(this,function(){"use strict";function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function e(e){for(var n=[],i=arguments.length-1;i-->0;)n[i]=arguments[i+1];for(var r=0;r<n.length;r++){var s=n[r];for(var a in s)a in e||!t(s,a)||(e[a]=s[a])}return e}function n(e){void 0===e&&(e={});var n=[];for(var i in e)t(e,i)&&n.push([i,e[i]]);return n}function i(t,e){return null===t&&null===e?!0:o(t)||o(e)?!1:t===e}function r(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(t){return t&&"[object Object]"===Ba.call(t)}function a(t){return!(!t||!o(t)&&!u(t))}function o(t){return"object"==typeof t}function u(t){return"function"==typeof t}function h(t){return"string"==typeof t}function l(t){return"number"==typeof t}function c(){}function f(t,e){return t.replace(/%s/g,function(){return e.shift()})}function d(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];throw t=f(t,e),new Error(t)}function p(){Na.DEBUG&&Wa.apply(null,arguments)}function m(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];t=f(t,e),Ga(t,e)}function v(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];t=f(t,e),so[t]||(so[t]=!0,Ga(t,e))}function g(){Na.DEBUG&&m.apply(null,arguments)}function y(){Na.DEBUG&&v.apply(null,arguments)}function b(t,e,n){var i=w(t,e,n);return i?i[t][n]:null}function w(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function x(t,e,n,i){if(t===e)return null;if(i){var r=b("interpolators",n,i);if(r)return r(t,e)||null;d(lo(i,"interpolator"))}return co.number(t,e)||co.array(t,e)||co.object(t,e)||null}function _(t){return h(t)?t.replace(mo,"\\$&"):t}function k(t){return t?t.replace(fo,".$1"):""}function E(t){var e,n=[];for(t=k(t);e=po.exec(t);){var i=e.index+e[1].length;n.push(t.substr(0,i)),t=t.substr(i+1)}return n.push(t),n}function A(t){return h(t)?t.replace(vo,"$1$2"):t}function C(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function S(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function O(t,e){var n;if(!Ka(t)||!Ka(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function j(t){return h(t)?[t]:void 0===t?[]:t}function N(t){return t[t.length-1]}function T(t,e){if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}function V(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=t.concat.apply([],t),i=n.length;i--;){var r=n.indexOf(n[i]);~r&&i>r&&n.splice(i,1)}return n}function P(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function M(t,e){for(var n=t.length,i=0;n>i;i++){var r=e(t[i]);if(r)return r}}function I(t,e,n){var i=t,r=e;n&&(i=i.map(n),r=r.map(n));var s=i.length,a={},o=0;return i.map(function(t){var e,n=o;do{if(e=r.indexOf(t,n),-1===e)return-1;n=e+1}while(a[e]===!0&&s>n);return e===o&&(o+=1),a[e]=!0,e})}function R(t,e){if(!/this/.test(t.toString()))return t;var n=go.call(t,e);for(var i in t)n[i]=t[i];return n}function B(t,e,n){return n&&u(e)&&t.parent&&t.parent.isRoot?(t.boundValue||(t.boundValue=R(e._r_unbound||e,t.parent.ractive)),t.boundValue):e}function K(t){t.updateFromBindings(!0)}function L(t){for(var e=t.length;e--;)if(t[e].bound){var n=t[e].owner;if(n){var i="checked"===n.name?n.node.checked:n.node.value;return{value:i}}}}function D(t){if(t){var e=yo[t];yo[t]=[];for(var n=e.length;n--;)e[n]();var i=bo[t];for(bo[t]=[],n=i.length;n--;)i[n].model.register(i[n].item)}else D("early"),D("mark")}function F(t,e,n,i){t.shuffling=!0;for(var r=e.length;r--;){var s=e[r];r!==s&&r in t.childByKey&&t.childByKey[r].rebind(~s?t.joinKey(s):void 0,t.childByKey[r],!i)}var a=t.source().length!==t.source().value.length;for(t.links.forEach(function(t){return t.shuffle(e)}),n||D("early"),r=t.deps.length;r--;)t.deps[r].shuffle&&t.deps[r].shuffle(e);t[n?"marked":"mark"](),n||D("mark"),a&&t.notifyUpstream(),t.shuffling=!1}function z(){Eo.push(ko=[])}function U(){var t=Eo.pop();return ko=Eo[Eo.length-1],t}function $(t){ko&&ko.push(t)}function q(t){t.bind()}function H(t){t.cancel()}function Z(t){t.destroyed()}function W(t){t.handleChange()}function G(t){t.mark()}function Q(t){t.mark(!0)}function Y(t){t.marked()}function J(t){t.markedAll()}function X(t){t.render()}function tt(t){t.shuffled()}function et(t){t.teardown()}function nt(t){t.unbind()}function it(t){t.unrender()}function rt(t){t.update()}function st(t){return t.toString()}function at(t){return t.toString(!0)}function ot(t,e,n,i){var r=t.r||t;if(!r||!h(r))return e;if("."===r||"@"===r[0]||(e||n).isKey||(e||n).isKeypath)return e;var s=r.split("/"),a=E(s[s.length-1]),o=a[a.length-1],u=e||n;u&&1===a.length&&o!==u.key&&i&&(a=ut(o,i)||a);for(var l=a.length,c=!0,f=!1;u&&l--;)u.shuffling&&(f=!0),a[l]!=u.key&&(c=!1),u=u.parent;return!e&&c&&f?n:e&&!c&&f?n:e}function ut(t,e){for(;e;){var n=e.aliases;if(n&&n[t]){for(var i=(e.owner.iterations?e.owner:e).owner.template.z,r=0;r<i.length;r++)if(i[r].n===t){var s=i[r].x;if(!s.r)return!1;var a=s.r.split("/");return E(a[a.length-1])}return}e=e.componentParent||e.parent}}function ht(t,e){void 0===e&&(e=0);for(var n=new Array(e);e--;)n[e]="_"+e;return new Function([],"return function ("+n.join(",")+"){return("+t+");};")()}function lt(t,e){return So[t]?So[t]:So[t]=Ie(t,e)}function ct(t){if(t){var e=t.e;e&&Ra(e).forEach(function(t){So[t]||(So[t]=e[t])})}}function ft(t){if(!t.matchString("="))return null;var e=t.pos;t.sp();var n=t.matchPattern(Ou);if(!n)return t.pos=e,null;if(!t.matchPattern(ju))return null;var i=t.matchPattern(Ou);return i?(t.sp(),t.matchString("=")?[n,i]:(t.pos=e,null)):(t.pos=e,null)}function dt(t){var e;return(e=t.matchPattern(Nu))?{t:iu,v:e}:null}function pt(t){return t.replace(Tu,"\\$&")}function mt(t,e){return t.search(Vu[e.join()]||(Vu[e.join()]=new RegExp(e.map(pt).join("|"))))}function vt(t){return t.replace(Bu,function(t,e){var n;return n="#"!==e[0]?Iu[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?Lu(yt(n)):t})}function gt(t){return t.replace(zu,"&amp;").replace(Du,"&lt;").replace(Fu,"&gt;")}function yt(t){return t?10===t?32:128>t?t:159>=t?Ru[t-128]:55296>t?t:57343>=t?Uu:65535>=t?t:Ku?t>=65536&&131071>=t?t:t>=131072&&196607>=t?t:Uu:Uu:Uu}function bt(t){var e;return(e=t.matchPattern(Hu))?{t:Jo,v:e}:null}function wt(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:nu,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:nu,v:"false"}):null}function xt(t){return function(e){for(var n,i='"',r=!1;!r;)n=e.matchPattern(Zu)||e.matchPattern(Wu)||e.matchString(t),n?i+='"'===n?'\\"':"\\'"===n?"'":n:(n=e.matchPattern(Gu),n?i+="\\u"+("000"+n.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}}function _t(t){var e=t.pos,n=t.matchString("'")||t.matchString('"');if(n){var i=("'"===n?Qu:Yu)(t);return t.matchString(n)?{t:Xo,v:i}:(t.pos=e,null)}return null}function kt(t){return JSON.parse('"'+t.replace(Xu,Et)+'"')}function Et(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f"}}function At(t){if(!t.matchString("`"))return null;for(var e,n="",i=!1,r=[];!i;)if(e=t.matchPattern(Ju)||t.matchPattern(Wu)||t.matchString("$")||t.matchString('"'))if('"'===e)n+='\\"';else if("\\`"===e)n+="`";else if("$"===e)if(t.matchString("{")){r.push({t:Xo,v:kt(n)}),n="",t.sp();var s=Kt(t);s||t.error("Expected valid expression"),r.push({t:lu,x:s}),t.sp(),t.matchString("}")||t.error("Expected closing '}' after interpolated expression")}else n+="$";else n+=e;else e=t.matchPattern(Gu),e?n+="\\u"+("000"+e.charCodeAt(1).toString(16)).slice(-4):i=!0;if(n.length&&r.push({t:Xo,v:kt(n)}),t.matchString("`")||t.error("Expected closing '`'"),1===r.length)return r[0];for(var a,o=r.pop();a=r.pop();)o={t:fu,s:"+",o:[a,o]};return{t:lu,x:o}}function Ct(t){var e;return(e=_t(t))?rh.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=bt(t))?e.v:(e=t.matchPattern(th))?e:null}function St(t){var e,n=t.pos;t.sp();var i="'"!==t.nextChar()&&'"'!==t.nextChar();i&&(e=t.matchPattern(eh));var r=e?Kt(t):Ct(t);if(null===r)return t.pos=n,null;if(t.sp(),i&&(","===t.nextChar()||"}"===t.nextChar())){e||th.test(r)||t.error("Expected a valid reference, but found '"+r+"' instead.");var s={t:su,k:r,v:{t:au,n:r}};return e&&(s.p=!0),s}if(!t.matchString(":"))return t.pos=n,null;t.sp();var a=Kt(t);return null===a?(t.pos=n,null):{t:su,k:r,v:a}}function Ot(t){var e=t.pos,n=St(t);if(null===n)return null;var i=[n];if(t.matchString(",")){var r=Ot(t);return r?i.concat(r):(t.pos=e,null)}return i}function jt(t){var e=t.pos;if(t.sp(),!t.matchString("{"))return t.pos=e,null;var n=Ot(t);return t.sp(),t.matchString("}")?{t:eu,m:n}:(t.pos=e,null)}function Nt(t){var e=t.pos;if(t.sp(),!t.matchString("["))return t.pos=e,null;var n=Lt(t,!0);return t.matchString("]")?{t:tu,m:n}:(t.pos=e,null)}function Tt(t){return bt(t)||wt(t)||_t(t)||At(t)||jt(t)||Nt(t)||dt(t)}function Vt(t){var e,n,i,r,s,a=t.pos;e=t.matchPattern(oh)||"",n=!e&&t.relaxedNames&&t.matchPattern(ih)||t.matchPattern(nh);var o=e.length+(n&&n.length||0);if("@."===e&&(e="@",n=n?"this."+n:"this"),!n&&e&&(n=e,e=""),!n)return null;if("@"===e)if(uh.test(n))if(!~n.indexOf("event")&&!~n.indexOf("node")||t.inEvent){if(~n.indexOf("context"))return t.pos=t.pos-(n.length-7),{t:lu,x:{t:au,n:"@context"}}}else t.error("@event and @node are only valid references within an event directive");else t.error("Unrecognized special reference @"+n);if(!e&&!t.relaxedNames&&ah.test(n))return t.pos=a,null;if(!e&&sh.test(n))return i=sh.exec(n)[0],t.pos=a+i.length,{t:ru,v:i};if(r=(e||"")+k(n),t.matchString("("))if(s=r.lastIndexOf("."),-1!==s&&"]"!==n[n.length-1])if(0===s)r=".",t.pos=a;else{var u=r.length;r=r.substr(0,s),t.pos=a+(o-(u-s))}else t.pos-=1;return{t:au,n:r.replace(/^this\./,"./").replace(/^this$/,".")}}function Pt(t){if(!t.matchString("("))return null;t.sp();var e=Kt(t);return e||t.error($u),t.sp(),t.matchString(")")||t.error(qu),{t:lu,x:e}}function Mt(t){return Tt(t)||Vt(t)||Pt(t)}function It(t){if(t.strictRefinement||t.sp(),t.matchString(".")){t.sp();var e=t.matchPattern(th);if(e)return{t:ou,n:e};t.error("Expected a property name")}if(t.matchString("[")){t.sp();var n=Kt(t);return n||t.error($u),t.sp(),t.matchString("]")||t.error("Expected ']'"),{t:ou,x:n}}return null}function Rt(t){var e=Mt(t);if(!e)return null;for(;e;){var n=It(t);if(n)e={t:uu,x:e,r:n};else{if(!t.matchString("("))break;t.sp();var i=Lt(t,!0);t.sp(),t.matchString(")")||t.error(qu),e={t:du,x:e},i&&(e.o=i)}}return e}function Bt(t){var e=dh(t);if(!e)return null;var n=t.pos;if(t.sp(),!t.matchString("?"))return t.pos=n,e;t.sp();var i=Kt(t);i||t.error($u),t.sp(),t.matchString(":")||t.error('Expected ":"'),t.sp();var r=Kt(t);return r||t.error($u),{t:cu,o:[e,i,r]}}function Kt(t){if(t.allowExpressions===!1){var e=Vt(t);return t.sp(),e}return Bt(t)}function Lt(t,e){var n,i=[],r=t.pos;do{t.sp(),e&&(n=t.matchPattern(eh));var s=Kt(t);if(null===s&&i.length)t.error($u);else if(null===s)return t.pos=r,null;n&&(s.p=!0),i.push(s),t.sp()}while(t.matchString(","));return i}function Dt(t,e){var n=t.pos,i=Kt(t);if(!i){var r=t.matchPattern(/^(\w+)/);return r?{t:au,n:r}:null}for(var s=0;s<e.length;s+=1)if(t.remaining().substr(0,e[s].length)===e[s])return i;return t.pos=n,Vt(t)}function Ft(t){function e(t){for(var e=[],n=a-1;n>=0;n--)e.push("x$"+n);return e.length?"(function(){var "+e.join(",")+";return("+t+");})()":t}function n(t){if(h(t))return t;switch(t.t){case nu:case ru:case Jo:case iu:return t.v;case Xo:return JSON.stringify(String(t.v));case tu:return t.m&&zt(t.m)?"[].concat("+r(t.m,"[","]",n)+")":"["+(t.m?t.m.map(n).join(","):"")+"]";case eu:return t.m&&zt(t.m)?"Object.assign({},"+r(t.m,"{","}",i)+")":"{"+(t.m?t.m.map(function(t){return t.k+":"+n(t.v)}).join(","):"")+"}";case hu:return("typeof"===t.s?"typeof ":t.s)+n(t.o);case fu:return n(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+n(t.o[1]);case du:if(t.o&&zt(t.o)){var e=a++;return"(x$"+e+"="+n(t.x)+").apply(x$"+e+","+n({t:tu,m:t.o})+")"}return n(t.x)+"("+(t.o?t.o.map(n).join(","):"")+")";case lu:return"("+n(t.x)+")";case uu:return n(t.x)+n(t.r);case ou:return t.n?"."+t.n:"["+n(t.x)+"]";case cu:return n(t.o[0])+"?"+n(t.o[1])+":"+n(t.o[2]);case au:return"_"+s.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}function i(t){return t.p?n(t.k):t.k+":"+n(t.v)}function r(t,e,n,i){var r=t.reduce(function(t,r){return r.p?t.str+=""+(t.open?n+",":t.str.length?",":"")+i(r):t.str+=""+(t.str.length?t.open?",":","+e:e)+i(r),t.open=!r.p,t},{open:!1,str:""});return r.open&&(r.str+=n),r.str}var s,a=0;Ut(t,s=[]);var o=n(t);return{r:s,s:e(o)}}function zt(t){for(var e=0;e<t.length;e++)if(t[e].p)return!0;return!1}function Ut(t,e){t.t===au&&h(t.n)&&(~e.indexOf(t.n)||e.unshift(t.n));var n=t.o||t.m;if(n)if(s(n))Ut(n,e);else for(var i=n.length;i--;)Ut(n[i],e);t.k&&t.t===su&&!h(t.k)&&Ut(t.k,e),t.x&&Ut(t.x,e),t.r&&Ut(t.r,e),t.v&&Ut(t.v,e)}function $t(t,e){var n;if(t){for(;t.t===lu&&t.x;)t=t.x;if(t.t===au){var i=t.n;~i.indexOf("@context")?e.x=Ft(t):e.r=t.n}else(n=qt(t))?e.rx=n:e.x=Ft(t);return e}}function qt(t){for(var e,n=[];t.t===uu&&t.r.t===ou;)e=t.r,e.x?e.x.t===au?n.unshift(e.x):n.unshift(Ft(e.x)):n.unshift(e.n),t=t.x;return t.t!==au?null:{r:t.n,m:n}}function Ht(t){for(var e=[],n=0,i=0;i<t.length;i++)"-"===t[i]&&"\\"!==t[i-1]&&(e.push(t.substring(n,i).replace(Ah,"")),n=i+1);return e.push(t.substring(n).replace(Ah,"")),e}function Zt(t){var e,n,i,r;if(t.sp(),e=t.matchPattern(ph),!e)return null;for(i=e.length,n=0;n<t.tags.length;n++)~(r=e.indexOf(t.tags[n].open))&&i>r&&(i=r);return i<e.length&&(t.pos-=e.length-i,e=e.substr(0,i),!e)?null:{n:e}}function Wt(t){var e=t.pos;if(/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.sp(),!t.matchString("="))return t.pos=e,null;t.sp();var n=t.pos,i=t.sectionDepth,r=Yt(t,"'")||Yt(t,'"')||Qt(t);return null===r&&t.error("Expected valid attribute value"),t.sectionDepth!==i&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),r.length?1===r.length&&h(r[0])?vt(r[0]):r:""}function Gt(t){var e,n,i=t.pos;if(e=t.matchPattern(_h),!e)return null;var r=e,s=t.tags.map(function(t){return t.open});return-1!==(n=mt(r,s))&&(e=e.substr(0,n),t.pos=i+e.length),e}function Qt(t){t.inAttribute=!0;for(var e=[],n=ne(t)||Gt(t);n;)e.push(n),n=ne(t)||Gt(t);return e.length?(t.inAttribute=!1,e):null}function Yt(t,e){var n=t.pos;if(!t.matchString(e))return null;t.inAttribute=e;for(var i=[],r=ne(t)||Jt(t,e);null!==r;)i.push(r),r=ne(t)||Jt(t,e);return t.matchString(e)?(t.inAttribute=!1,i):(t.pos=n,null)}function Jt(t,e){var n=t.remaining(),i=t.tags.map(function(t){return t.open});i.push(e);var r=mt(n,i);return-1===r&&t.error("Quoted attribute value must have a closing quote"),r?(t.pos+=r,n.substr(0,r)):null}function Xt(t){var e,n,i=Zt(t,!1);if(!i)return null;if(n=xh[i.n])i.t=n.t,n.v&&(i.v=n.v),delete i.n,t.sp(),"="===t.nextChar()&&(i.f=Wt(t));else if(e=yh.exec(i.n))i.n=e[1],i.t=Eu,ee(t,i);else if(e=bh.exec(i.n))i.n=e[1],i.t=Au,ee(t,i),i.v="in-out"===e[2]?"t0":"in"===e[2]?"t1":"t2";else if(e=vh.exec(i.n))i.n=Ht(e[1]),i.t=ku,t.matchString("(")&&(i.a=Ft({t:tu,m:Lt(t)}),t.matchString(")")||t.error("Expected closing ')'")),t.inEvent=!0,te(t,i)?gh.test(i.f)&&(t.pos-=i.f.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, complete, detach, insert, destruct, attachchild, detachchild)")):ee(t,i,!0),t.inEvent=!1;else if(e=wh.exec(i.n)){var r="bind"===e[2];i.n=r?e[3]:e[1],i.t=$o,ee(t,i,!1,!0),!i.f&&r&&(i.f=[{t:Mo,r:e[3]}])}else{t.sp();var s="="===t.nextChar()?Wt(t):null;if(i.f=null!=s?s:i.f,t.sanitizeEventAttributes&&mh.test(i.n))return{exclude:!0};i.f=i.f||(""===i.f?"":0),i.t=$o}return i}function te(t,e){var n=t.pos;t.matchString("=")||t.error("Missing required directive arguments");var i=t.matchString("'")||t.matchString('"');t.sp();var r=t.matchPattern(kh);if(void 0!==r)if(i){if(t.sp(),t.matchString(i))return(e.f=r)||!0;t.pos=n}else{if(t.matchPattern(Eh))return(e.f=r)||!0;t.pos=n}else t.pos=n}function ee(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),t.sp(),!t.matchString("="))return void(n&&t.error("Missing required directive arguments"));t.sp();var r=t.matchString('"')||t.matchString("'"),s=t.spreadArgs;t.spreadArgs=!0,t.inUnquotedAttribute=!r;var a=i?Dt(t,[r||" ","/",">"]):{m:Lt(t),t:tu};if(t.inUnquotedAttribute=!1,t.spreadArgs=s,r&&(t.sp(),t.matchString(r)!==r&&t.error("Expected matching quote '"+r+"'")),i){var o={t:Mo};$t(a,o),e.f=[o]}else e.f=Ft(a)}function ne(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=ie(t,t.tags[n]))return e;return t.inTag&&!t.inAttribute&&(e=Xt(t))?(t.sp(),e):void 0}function ie(t,e){var n,i,r,s=t.pos;if(t.matchString("\\"+e.open)){if(0===s||"\\"!==t.str[s-1])return e.open}else if(!t.matchString(e.open))return null;if(n=ft(t))return t.matchString(e.close)?(e.open=n[0],e.close=n[1],t.sortMustacheTags(),Ch):null;if(t.sp(),t.matchString("/")){t.pos-=1;var a=t.pos;if(dt(t))t.pos=a;else{if(t.pos=a-e.close.length,t.inAttribute)return t.pos=s,null;t.error("Attempted to close a section that wasn't open")}}for(r=0;r<e.readers.length;r+=1)if(i=e.readers[r],n=i(t,e))return e.isStatic&&(n.s=1),t.includeLinePositions&&(n.q=t.getLinePos(s)),n;return t.pos=s,null}function re(t,e){var n=Kt(t);if(!n)return null;t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");var i={t:Io};return $t(n,i),i}function se(t,e){if(!t.matchString("&"))return null;t.sp();var n=Kt(t);if(!n)return null;t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'");var i={t:Io};return $t(n,i),i}function ae(t){var e,n=[],i=t.pos;if(t.sp(),e=oe(t)){for(e.x=$t(e.x,{}),n.push(e),t.sp();t.matchString(",");)e=oe(t),e||t.error("Expected another alias."),e.x=$t(e.x,{}),n.push(e),t.sp();return n}return t.pos=i,null}function oe(t){var e=t.pos;t.sp();var n=Kt(t,[]);if(!n)return t.pos=e,null;t.sp(),t.matchPattern(Oh),t.sp();var i=t.matchPattern(Sh);return i?{n:i,x:n}:(t.pos=e,null)}function ue(t,e){var n,i=t.matchString(">")||t.matchString("yield"),r={t:">"===i?Do:Zo};if(!i)return null;if(t.sp(),">"===i||!(n=t.matchString("with"))){t.relaxedNames=t.strictRefinement=!0;var s=Kt(t);if(t.relaxedNames=t.strictRefinement=!1,!s&&">"===i)return null;s&&($t(s,r),t.sp(),">"!==i&&(n=t.matchString("with")))}if(t.sp(),n||">"===i){if(n=ae(t),n&&n.length)r.z=n;else{var a=Kt(t);a&&(r.c={},$t(a,r.c))}">"===i||r.c||r.z||t.error("Expected a context or one or more aliases")}return t.sp(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r}function he(t,e){if(!t.matchString("!"))return null;var n=t.remaining().indexOf(e.close);return-1!==n?(t.pos+=n+e.close.length,{t:Fo}):void 0}function le(t,e){var n,i,r=t.pos;try{n=Dt(t,[e.close])}catch(s){i=s}if(!n){if("!"===t.str.charAt(r))return t.pos=r,null;if(i)throw i}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!n)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}var a={t:Mo};return $t(n,a),a}function ce(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(t.sp(),!t.matchString("/"))return t.pos=n,null;t.sp();var i=t.remaining(),r=i.indexOf(e.close);if(-1!==r){var s={t:Ko,r:i.substr(0,r).split(" ")[0]};return t.pos+=r,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s}return t.pos=n,null}function fe(t,e,n){var i=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(jh[n]))return t.pos=i,null;var r={t:Nh[n]};if("elseif"===n)r.x=Kt(t);else if("catch"===n||"then"===n){var s=t.matchPattern(th);s&&(r.n=s)}return t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r}function de(t,e){var n,i,r,s,a,o,u,h,l,c,f,d,p,m=!1,v=t.pos;if(t.matchString("^")){if(t.matchString("^/"))return t.pos=v,null;i={t:Ro,f:[],n:mu}}else{if(!t.matchString("#"))return null;i={t:Ro,f:[]},t.matchString("partial")&&(t.pos=v-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(o=t.matchString("await"))?(c=o,i.t=Yo):(o=t.matchPattern(Mh))&&(c=o,i.n=Th[o])}if(t.sp(),"with"===o){var g=ae(t);g&&(m=!0,i.z=g,i.t=Qo)}else if("each"===o){var y=oe(t);y&&(i.z=[{n:y.n,x:{r:"."}}],n=y.x)}if(!m){if(n||(n=Kt(t)),n||t.error("Expected expression"),"each"===o&&t.matchString(",")){var b=ae(t);b&&(i.z&&b.unshift(i.z[0]),i.z=b)}if("each"!==o&&o||!(l=t.matchPattern(Vh)))"await"===o&&t.matchString("then")&&(t.sp(),f=!0,p=t.matchPattern(th),p||(p=!0));else{var w;(w=t.matchPattern(Ph))?i.i=l+","+w:i.i=l}!o&&n.n&&(c=n.n)}t.sp(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,s=i.f;var x;do if(x=t.pos,r=ce(t,e))c&&r.r!==c&&(o?(t.pos=x,t.error("Expected "+e.open+"/"+c+e.close)):r.r&&t.warn("Expected "+e.open+"/"+c+e.close+" but found "+e.open+"/"+r.r+e.close)),t.sectionDepth-=1,h=!0;else if(!m&&((r=fe(t,e,"elseif"))||(r=fe(t,e,"else"))||"await"===o&&((r=fe(t,e,"then"))||(r=fe(t,e,"catch"))))){if(i.n===mu&&t.error("{{else}} not allowed in {{#unless}}"),a&&(r.t===bu?t.error("there can only be one {{else}} block, at the end of a section"):r.t===wu&&t.error("illegal {{elseif...}} after {{else}}")),!u&&(p||!f)&&!d)if("await"===o){var _={f:s};i.f=[_],p?(_.t=xu,p!==!0&&(_.n=p)):_.t=Ro}else u=[];var k={t:Ro,f:s=[]};r.t===bu?("await"===o?(i.f.push(k),k.t=bu):(k.n=mu,u.push(k)),a=!0):r.t===wu?(k.n=pu,$t(r.x,k),u.push(k)):r.t===xu?(a&&t.error("{{then}} block must appear before any {{else}} block"),d&&t.error("{{then}} block must appear before any {{catch}} block"),f&&t.error("there can only be one {{then}} block per {{#await}}"),k.t=xu,f=!0,r.n&&(k.n=r.n),i.f.push(k)):r.t===_u&&(a&&t.error("{{catch}} block must appear before any {{else}} block"),d&&t.error("there can only be one {{catch}} block per {{#await}}"),k.t=_u,d=!0,k.n=r.n,i.f.push(k))}else{if(r=t.read(el),!r)break;s.push(r)}while(!h);if(u&&(i.l=u),m||$t(n,i),"await"===o&&(p||!f)&&!d&&!a){var E={f:i.f};i.f=[E],p?(E.t=xu,p!==!0&&(E.n=p)):E.t=Ro}return i.f.length||delete i.f,i}function pe(t){var e=t.pos;if(t.textOnlyMode||!t.matchString(Ih))return null;var n=t.remaining(),i=n.indexOf(Rh);-1===i&&t.error("Illegal HTML - expected closing comment sequence ('-->')");var r=n.substr(0,i);t.pos+=i+3;var s={t:Fo,c:r};return t.includeLinePositions&&(s.q=t.getLinePos(e)),s}function me(t){var e,n,i,r,s;for(e=1;e<t.length;e+=1)n=t[e],i=t[e-1],r=t[e-2],h(n)&&ve(i)&&h(r)&&Kh.test(r)&&Bh.test(n)&&(t[e-2]=r.replace(Kh,"\n"),t[e]=n.replace(Bh,"")),ge(n)&&h(i)&&Kh.test(i)&&h(n.f[0])&&Bh.test(n.f[0])&&(t[e-1]=i.replace(Kh,"\n"),n.f[0]=n.f[0].replace(Bh,"")),h(n)&&ge(i)&&(s=N(i.f),h(s)&&Kh.test(s)&&Bh.test(n)&&(i.f[i.f.length-1]=s.replace(Kh,"\n"),t[e]=n.replace(Bh,"")));return t}function ve(t){return t.t===Fo||t.t===zo}function ge(t){return(t.t===Ro||t.t===Bo)&&t.f}function ye(t,e,n){var i;e&&(i=t[0],h(i)&&(i=i.replace(e,""),i?t[0]=i:t.shift())),n&&(i=N(t),h(i)&&(i=i.replace(n,""),i?t[t.length-1]=i:t.pop()))}function be(t,e,n,i,r,s){if(!h(t)){var a,o,u,l,c,f,d;for(me(t),a=t.length;a--;)o=t[a],o.exclude?t.splice(a,1):e&&o.t===Fo&&t.splice(a,1);for(ye(t,i?Dh:null,r?Fh:null),a=t.length;a--;){if(o=t[a],f=d=!1,o.f){var p=o.t===Lo&&(s[o.e.toLowerCase()]||s[o.e]);c=n||p,!n&&p&&ye(o.f,zh,Uh),c||(u=t[a-1],l=t[a+1],(!u||h(u)&&Fh.test(u))&&(f=!0),(!l||h(l)&&Dh.test(l))&&(d=!0)),be(o.f,e,c,f,d,s)}o.l&&(be(o.l,e,n,f,d,s),o.l.forEach(function(t){return t.l=1}),o.l.unshift(a+1,0),t.splice.apply(t,o.l),delete o.l),o.m&&(be(o.m,e,n,f,d,s),o.m.length<1&&delete o.m)}for(a=t.length;a--;)h(t[a])&&(h(t[a+1])&&(t[a]=t[a]+t[a+1],t.splice(a+1,1)),n||(t[a]=t[a].replace(Lh," ")),""===t[a]&&t.splice(a,1))}}function we(t){var e,n=t.pos;return t.matchString("</")?(e=t.matchPattern($h))?t.inside&&e!==t.inside?(t.pos=n,null):{t:qo,e:e}:(t.pos-=2,void t.error("Illegal closing tag")):null}function xe(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}function _e(t){var e,n,i,r,s,a,o,u,l,c,f,d=t.pos;if(t.inside||t.inAttribute||t.textOnlyMode)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;var p={};if(t.includeLinePositions&&(p.q=t.getLinePos(d)),t.matchString("!"))return p.t=Go,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),p.a=t.matchPattern(/^(.+?)>/),p;if(f=t.matchString("#"))t.sp(),p.t=Uo,p.n=t.matchPattern(Hh);else if(p.t=Lo,p.e=t.matchPattern(qh),!p.e)return null;for(Zh.test(t.nextChar())||t.error("Illegal tag name"),t.sp(),t.inTag=!0;e=ne(t);)e!==!1&&(p.m||(p.m=[]),p.m.push(e)),t.sp();if(t.inTag=!1,t.sp(),t.matchString("/")&&(n=!0),!t.matchString(">"))return null;var m=(p.e||p.n).toLowerCase(),v=t.preserveWhitespace;if(!n&&(f||!Mu[p.e.toLowerCase()])){f||(t.elementStack.push(m),m in t.interpolate&&(t.inside=m)),i=[],r=Pa(null);do{if(u=t.pos,l=t.remaining(),!l){if("script"===t.inside){o=!0;break}t.error("Missing end "+(t.elementStack.length>1?"tags":"tag")+" ("+t.elementStack.reverse().map(function(t){return"</"+t+">"}).join("")+")")}if(f||ke(m,l))if(!f&&(c=we(t))){o=!0;var g=c.e.toLowerCase();if(g!==m&&(t.pos=u,!~t.elementStack.indexOf(g))){var y="Unexpected closing tag";Mu[g.toLowerCase()]&&(y+=" (<"+g+"> is a void element - it cannot contain children)"),t.error(y)}}else if(f&&Ee(t,p.n))o=!0;else{var b={open:t.standardDelimiters[0],close:t.standardDelimiters[1]};ce(t,b)||Ae(t,b)?(o=!0,t.pos=u):(a=t.read(nl))?(r[a.n]&&(t.pos=u,t.error("Duplicate partial definition")),be(a.f,t.stripComments,v,!v,!v,t.whiteSpaceElements),r[a.n]=a.f,s=!0):(a=t.read(el))?i.push(a):o=!0}else o=!0}while(!o);i.length&&(p.f=i),s&&(p.p=r),t.elementStack.pop()}if(t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(m))return Wh;if(p.m&&"input"!==m&&"select"!==m&&"textarea"!==m&&"option"!==m){for(var w,x,_,k,E,A=p.m,C=0;C<A.length;)E=A[C],E.t===$o?0!==E.n.indexOf("class-")||E.f?0===E.n.indexOf("style-")&&h(E.f)?((x||(x=[])).push(xe(E.n.slice(6))+": "+E.f+";"),A.splice(C,1)):"class"===E.n&&h(E.f)?((w||(w=[])).push(E.f),A.splice(C,1)):"style"===E.n&&h(E.f)?((x||(x=[])).push(E.f+";"),A.splice(C,1)):"class"===E.n?(_=E,C++):"style"===E.n?(k=E,C++):!~E.n.indexOf(":")&&"value"!==E.n&&"contenteditable"!==E.n&&h(E.f)?(E.g=1,C++):C++:((w||(w=[])).push(E.n.slice(6)),A.splice(C,1)):C++;w?_&&h(_.f)?_.f+=" "+w.join(" "):A.unshift({t:$o,n:"class",f:w.join(" "),g:1}):_&&h(_.f)&&(_.g=1),x?k&&h(k.f)?k.f+="; "+x.join(" "):A.unshift({t:$o,n:"style",f:x.join(" "),g:1}):k&&h(k.f)&&(k.g=1)}return p}function ke(t,e){var n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),i=Gh[t];return n&&i?!~i.indexOf(n[1].toLowerCase()):!0}function Ee(t,e){var n=t.pos;return t.matchString("</")?(t.matchString("#"),t.sp(),t.matchString(e)?(t.sp(),t.matchString(">")?!0:(t.pos=n,null)):(t.pos=n,null)):null}function Ae(t,e){var n=t.pos;if(t.matchString(e.open))return t.matchPattern(Qh)?!0:void(t.pos=n)}function Ce(t){var e,n,i,r=t.remaining();return t.textOnlyMode?(n=t.tags.map(function(t){return t.open}),n=n.concat(t.tags.map(function(t){return"\\"+t.open})),e=mt(r,n)):(i=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=r.indexOf(i):(n=t.tags.map(function(t){return t.open}),n=n.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0?n.push('"',"'","=","<",">","`"):t.inAttribute?n.push(t.inAttribute):n.push(i),e=mt(r,n))),e?(-1===e&&(e=r.length),t.pos+=e,t.inside&&"textarea"!==t.inside||t.textOnlyMode?r.substr(0,e):vt(r.substr(0,e))):null}function Se(t){var e,n,i=t.pos,r=t.standardDelimiters;if(!t.matchString(r[0]))return null;if(!t.matchPattern(Yh))return t.pos=i,null;var s=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/);s||t.error("expected legal partial name"),t.sp(),t.matchString(r[1])||t.error("Expected closing delimiter '"+r[1]+"'");var a=[],o=r[0],u=r[1];do(e=ce(t,{open:o,close:u}))?("partial"!==e.r&&t.error("Expected "+o+"/partial"+u),n=!0):(e=t.read(el),e||t.error("Expected "+o+"/partial"+u),a.push(e));while(!n);return{t:Wo,n:s,f:a}}function Oe(t){for(var e=[],n=Pa(null),i=!1,r=t.preserveWhitespace;t.pos<t.str.length;){var s=t.pos,a=void 0,o=void 0;(o=t.read(nl))?(n[o.n]&&(t.pos=s,t.error("Duplicated partial definition")),be(o.f,t.stripComments,r,!r,!r,t.whiteSpaceElements),n[o.n]=o.f,i=!0):(a=t.read(el))?e.push(a):t.error("Unexpected template content")}var u={v:Oo,t:e};return i&&(u.p=n),u}function je(t,e){Ra(t).forEach(function(n){if(Ne(n,t))return Te(t,e);var i=t[n];Ve(i)&&je(i,e)})}function Ne(t,e){return"s"===t&&Ka(e.r)}function Te(t,e){var n=t.s,i=t.r;e[n]||(e[n]=ht(n,i.length))}function Ve(t){return Ka(t)||s(t)}function Pe(t,e){return new sl(t,e||{}).result}function Me(t,e,n){t||d("Missing Ractive.parse - cannot parse "+e+". "+n)}function Ie(t,e){return Me(ht,"new expression function",ol),ht(t,e)}function Re(t,e){Me(Pe,'compution string "${str}"',ul);var n=Pe(t,{expression:!0});return function(){return n.e.apply(e,n.r.map(function(t){return e.get(t)}))}}function Be(t,e,n){var i,r,s,a,l;return u(n)&&(i=R(n,t),s=n.toString(),a=!0),h(n)&&(i=Re(n,t),s=n),o(n)&&(h(n.get)?(i=Re(n.get,t),s=n.get):u(n.get)?(i=R(n.get,t),s=n.get.toString(),a=!0):d("`%s` computation must have a `get()` method",e),u(n.set)&&(r=R(n.set,t),l=n.set.toString())),{getter:i,setter:r,getterString:s,setterString:l,getterUseStack:a}}function Ke(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.outrosComplete=!0,t.parent&&!t.parent.outrosComplete?t.parent.decrementOutros(t):t.detachNodes()),t.intros.length||t.totalChildren||(u(t.callback)&&t.callback(),t.parent&&!t.notifiedTotal&&(t.notifiedTotal=!0,t.parent.decrementTotal())))}function Le(t){var e=t.detachQueue,n=De(t);if(n.length){var i,r,s=e.length,a=0,o=t.detachQueue=[];t:for(;s--;){for(i=e[s].node,a=n.length;a--;)if(r=n[a].element.node,r===i||r.contains(i)||i.contains(r)){o.push(e[s]);continue t}e[s].detach()}}else t.detachNodes()}function De(t,e){var n=e;if(n){for(var i=t.children.length;i--;)n=De(t.children[i],n);return t.outros.length&&(n=n.concat(t.outros)),n}n=[];for(var r=t;r.parent;)r=r.parent;return De(r,n)}function Fe(t){t.dispatch()}function ze(){var t=fl.immediateObservers;fl.immediateObservers=[],t.forEach(Fe);var e,n=fl.fragments.length;for(t=fl.fragments,fl.fragments=[];n--;)e=t[n],e.update();fl.transitionManager.ready(),t=fl.deferredObservers,fl.deferredObservers=[],t.forEach(Fe);var i=fl.tasks;for(fl.tasks=[],n=0;n<i.length;n+=1)i[n]();return fl.fragments.length||fl.immediateObservers.length||fl.deferredObservers.length||fl.tasks.length?ze():void 0}function Ue(){dl.start();var t,e,n=performance.now();for(t=0;t<pl.length;t+=1)e=pl[t],e.tick(n)||pl.splice(t--,1);dl.end(),pl.length?requestAnimationFrame(Ue):ml=!1}function $e(e,n){var i={};if(!n)return e;n+=".";for(var r in e)t(e,r)&&(i[n+r]=e[r]);return i}function qe(t){var e;return yl[t]||(e=t?t+".":"",yl[t]=function(n,i){var r;return h(n)?(r={},r[e+n]=i,r):o(n)?e?$e(n,t):n:void 0}),yl[t]}function He(t){for(var e=[],n=0;n<t.length;n++)e[n]=(t.childByKey[n]||{}).value;return e}function Ze(t){for(var e=t;e&&!e.context&&!e.aliases;)e=e.parent;return e}function We(e,n){var i=e;if("."===n)return e.findContext();if("~"===n[0])return e.ractive.viewmodel.joinAll(E(n.slice(2)));if("."===n[0]||"^"===n[0]){for(var r=e,s=n.split("/"),a="^^"===s[0];r&&!r.context;)r=Ge(r);for(var o=r&&r.context;r&&"^^"===s[0];){for(s.shift(),r=r.isIteration?r.parent.parent:Ge(r);r&&!r.context;)r=Ge(r);o=r&&r.context}if(!o&&a)throw new Error("Invalid context parent reference ('"+n+"'). There is not context at that level.");for(;"."===s[0]||".."===s[0];){var h=s.shift();".."===h&&(o=o.parent)}return n=s.join("/"),"."===n[0]&&(n=n.slice(1)),o.joinAll(E(n))}var l=E(n);if(l.length){var c=l.shift();if("@"===c[0]){if("@this"===c||"@"===c)return e.ractive.viewmodel.getRactiveModel().joinAll(l);if("@index"===c||"@key"===c){l.length&&Ye(c);var f=Qe(e);return f&&f["get"+("i"===c[1]?"Index":"Key")]()}if("@last"===c){var d=Qe(e);return d&&d.parent.getLast()}if("@global"===c)return El.joinAll(l);if("@shared"===c)return kl.joinAll(l);if("@keypath"===c||"@rootpath"===c){for(var p="r"===n[1]?e.ractive.root:null,m=e;m&&(!m.context||m.isRoot&&m.ractive.component&&(p||!m.ractive.isolated));)m=m.isRoot?m.componentParent:m.parent;return m.getKeypath(p)}if("@context"===c)return new Al(e.getContext());if("@local"===c)return e.getContext()._data.joinAll(l);if("@style"===c)return e.ractive.constructor._cssModel.joinAll(l);if("@helpers"===c)return e.ractive.viewmodel.getHelpers().joinAll(l);throw new Error("Invalid special reference '"+c+"'")}if(c&&!l.length){var v=e.ractive.viewmodel.getHelpers();if(v.has(c))return v.joinKey(c)}var y=Ze(e);if(y)if(y.context){if(y=y.context,y.has(c))return y.joinKey(c).joinAll(l)}else y=e.findContext();else y=e.findContext();for(var b,w=!1,x=e.ractive.warnAboutAmbiguity,_=0;e;){if(e.isIteration&&(c===e.parent.keyRef?b=e.getKey():c===e.parent.indexRef&&(b=e.getIndex()),b&&l.length&&Ye(c)),!b&&e.aliases&&t(e.aliases,c)&&(b=e.aliases[c]),!b&&e.context&&e.context.has(c)&&(b=e.context.joinKey(c),w?x&&g("'"+n+"' resolved but is ambiguous and will create a mapping to a parent component."):x&&_&&g("'"+n+"' resolved but is ambiguous.")),b)return w&&(b=i.ractive.viewmodel.createLink(c,b,c,{implicit:!0})),l.length>0&&u(b.joinAll)&&(b=b.joinAll(l)),b;e.context&&!e.aliases&&(_=1),(e.componentParent||!e.parent&&e.ractive.component)&&!e.ractive.isolated?(e=e.componentParent||e.ractive.component.up,w=!0):e=e.parent}var k=i.ractive;return k.resolveInstanceMembers&&"data"!==c&&c in k?k.viewmodel.getRactiveModel().joinKey(c).joinAll(l):(x&&g("'"+n+"' is ambiguous and did not resolve."),y.joinKey(c).joinAll(l))}}function Ge(t){return t&&(!t.ractive.isolated&&t.componentParent||t.parent)}function Qe(t){for(var e,n=t;!n.isIteration&&(e=Ge(n));)n=e;return n.isIteration&&n}function Ye(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function Je(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];var i=t.fragment||t._fakeFragment||(t._fakeFragment=new Ol(t));return i.getContext.apply(i,e)}function Xe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.ctx||(this.ctx=new Sl.Context(this)),t.unshift(Pa(this.ctx)),Va.apply(null,t)}function tn(t){for(var e=t;e&&!e.context;)e=e.parent;return e?e:t&&t.ractive.fragment}function en(t,e){var n=Nl,i=e&&e.deep,r=e&&e.shuffle,s=dl.start();e&&"keep"in e&&(Nl=e.keep);for(var a=t.length;a--;){var o=t[a][0],u=t[a][1],h=t[a][2];if(!o)throw dl.end(),new Error("Failed to set invalid keypath '"+h+"'");if(i)sn(o,u);else if(r){var l=u,c=o.get();if(l||(l=c),void 0===c)o.set(l);else{if(!Ka(c)||!Ka(l))throw dl.end(),new Error("You cannot merge an array with a non-array");var f=an(r);o.merge(l,f)}}else o.set(u)}return dl.end(),Nl=n,s}function nn(t,e,n,i){if(!n&&("."===e[0]||"^"===e[1]))return g("Attempted to set a relative keypath from a non-relative context. You can use a context object to set relative keypaths."),[];var r=E(e),s=n||t.viewmodel;return Tl.test(e)?s.findMatches(r):s===t.viewmodel?!t.component||t.isolated||s.has(r[0])||"@"===e[0]||!e[0]||i?[s.joinAll(r)]:[We(t.fragment||new Ol(t),e)]:[s.joinAll(r)]}function rn(e,n,i,r){var a=[];if(s(n)){var o=function(i){t(n,i)&&a.push.apply(a,nn(e,i,null,r).map(function(t){return[t,n[i],i]}))};for(var u in n)o(u)}else a.push.apply(a,nn(e,n,null,r).map(function(t){return[t,i,n]}));return a}function sn(e,n){var i=e.get(!1,Vl);if(null==i||!o(n))return e.set(n);if(!o(i))return e.set(n);for(var r in n)t(n,r)&&sn(e.joinKey(r),n[r])}function an(t){if(t===!0)return null;if(u(t))return t;if(h(t))return Pl[t]||(Pl[t]=function(e){return e[t]});throw new Error("If supplied, options.compare must be a string, function, or true")}function on(t,e,n,i){if(!h(e)||!r(n))throw new Error("Bad arguments");var s=rn(t,e,n,i&&i.isolated);return en(s.map(function(t){var e=t[0],n=t[1],i=e.get();if(!r(n)||!r(i))throw new Error(Ml);return[e,i+n]}))}function un(t,e,n){var i=l(e)?e:1,r=o(e)?e:n;return on(this,t,i,r)}function hn(t){var e=Promise.resolve(t);return Ma(e,"stop",{value:c}),e}function ln(t,e){t=t||{};var n;return t.easing&&(n=u(t.easing)?t.easing:e.easing[t.easing]),{easing:n||Il,duration:"duration"in t?t.duration:400,complete:t.complete||c,step:t.step||c,interpolator:t.interpolator}}function cn(t,e,n,r){r=ln(r,t);var s=e.get();if(i(s,n))return r.complete(r.to),hn(n);var a=x(s,n,t,r.interpolator);return a?e.animate(s,n,r,a):(dl.start(),e.set(n),dl.end(),hn(n))}function fn(t,e,n){if(o(t)){var i=Ra(t);throw new Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+i.map(function(e){return"'"+e+"': "+t[e]}).join("\n  ")+"\n}, {...}), do\n\n"+i.map(function(e){return"ractive.animate('"+e+"', "+t[e]+", {...});"}).join("\n")+"\n")}return cn(this,this.viewmodel.joinAll(E(t)),e,n)}function dn(t,e){t.event&&t._eventQueue.push(t.event),t.event=e}function pn(t){t._eventQueue.length?t.event=t._eventQueue.pop():t.event=null}function mn(t,e){var n=e?Rl:Bl;if(n[t])return n[t];var i=t.split("."),r=[],s=!1;e&&(i.unshift("this"),s=!0);for(var a=Math.pow(2,i.length)-(e?1:0),o=0;a>o;o++){for(var u=[],h=0;h<i.length;h++)u.push(1&o>>h?"*":i[h]);r.unshift(u.join("."))}return s&&(i.length>2?r.push.apply(r,mn(t,!1)):(r.push("*"),r.push(t))),n[t]=r,r}function vn(t,e,n,i){if(void 0===i&&(i=[]),e){n.name=e,i.unshift(n);var r=t._nsSubs?mn(e,!0):["*",e];return gn(t,r,n,i,!0)}}function gn(t,e,n,i,r){void 0===r&&(r=!1);var s=!0;if(r||t._nsSubs){dn(t,n);for(var a=e.length;a--;)e[a]in t._subs&&(s=yn(t,t._subs[e[a]],n,i)&&s);pn(t)}if(t.parent&&s){if(r&&t.component){var o=t.component.name+"."+e[e.length-1];e=mn(o,!1),n&&!n.component&&(n.component=t)}s=gn(t.parent,e,n,i)}return s}function yn(t,e,n,i){var r=null,s=!1;e=e.slice();for(var a=0,o=e.length;o>a;a+=1)e[a].off||e[a].handler.apply(t,i)!==!1||(s=!0);return n&&s&&(r=n.event)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!s}function bn(t,e){return t[e._guid]||(t[e._guid]=[])}function wn(t,e){var n=bn(t.queue,e);for(t.hook.fire(e);n.length;)wn(t,n.shift());delete t.queue[e._guid]}function xn(t,e){void 0===e&&(e=null);var n=[];return _n(t,e,n),n}function _n(t,e,n){t.isAnchor?e&&t.name!==e||n.push(t):t.items?t.items.forEach(function(t){return _n(t,e,n)}):t.iterations?t.iterations.forEach(function(t){return _n(t,e,n)}):t.fragment&&!t.component&&_n(t.fragment,e,n)}function kn(t,e){void 0===e&&(e=null);var n=xn(t.fragment,e),i={},r=t._children.byName;n.forEach(function(t){var e=t.name;e in i||(i[e]=0);var n=i[e],s=(r[e]||[])[n];s&&s.lastBound!==t&&(s.lastBound&&s.lastBound.removeChild(s),t.addChild(s)),i[e]++})}function En(t){t.instance.fragment.rendered&&(t.shouldDestroy=!0,t.instance.unrender()),t.instance.el=null}function An(t,e){void 0===e&&(e={});var n,i=this._children;if(t.parent&&t.parent!==this)throw new Error("Instance "+t._guid+" is already attached to a different instance "+t.parent._guid+". Please detach it from the other instance using detachChild first.");if(t.parent)throw new Error("Instance "+t._guid+" is already attached to this instance.");var r={instance:t,ractive:this,name:e.name||t.constructor.name||"Ractive",target:e.target||!1,bubble:Cn,findNextNode:Sn};if(r.nameOption=e.name,r.target){var s;(s=i.byName[r.target])||(s=[],this.set("@this.children.byName."+r.target,s)),n=e.prepend?0:void 0!==e.insertAt?e.insertAt:s.length}else r.up=this.fragment,r.external=!0;t.parent=this,t.root=this.root,t.component=r,i.push(r);var a=dl.start(),o=t.viewmodel.getRactiveModel();return o.joinKey("parent",{lastLink:!1}).link(this.viewmodel.getRactiveModel()),o.joinKey("root",{lastLink:!1}).link(this.root.viewmodel.getRactiveModel()),Fl.attachchild.fire(t),r.target?(En(r),this.splice("@this.children.byName."+r.target,n,0,r),kn(this,r.target)):t.isolated||t.viewmodel.attached(this.fragment),dl.end(),a.ractive=t,a.then(function(){return t})}function Cn(){dl.addFragment(this.instance.fragment)}function Sn(){return this.anchor?this.anchor.findNextNode():void 0}function On(t,e){this.computed[t]=e,(h(e)||u(e))&&(e=this.computed[t]={get:e});var n=E(t);if(!~t.indexOf("*")){var i=n.pop();return this.viewmodel.joinAll(n).compute(i,e)}e.pattern=new RegExp("^"+n.map(function(t){return t.replace(/\*\*/g,"(.+)").replace(/\*/g,"((?:\\\\.|[^\\.])+)")}).join("\\.")+"$")}function jn(t,e){var n=dl.start(),i=On.call(this,t,e);if(i){var r=E(t);1!==r.length||i.isReadonly||i.set(this.viewmodel.value[r[0]]);var s=r.reduce(function(t,e){return t&&t.childByKey[e]},this.viewmodel);s&&(s.rebind(i,s,!1),s.parent&&delete s.parent.childByKey[s.key],D())}return dl.end(),n}function Nn(){return this.isDetached?this.el:(this.el&&T(this.el.__ractive_instances__,this),this.el=this.fragment.detach(),this.isDetached=!0,Fl.detach.fire(this),this.el)}function Tn(t){for(var e,n,i=this._children,r=i.length;r--;)if(i[r].instance===t){n=r,e=i[r];break}if(!e||t.parent!==this)throw new Error("Instance "+t._guid+" is not attached to this instance.");var s=dl.start();e.anchor&&e.anchor.removeChild(e),t.isolated||t.viewmodel.detached(),i.splice(n,1),e.target&&(this.splice("@this.children.byName."+e.target,i.byName[e.target].indexOf(e),1),kn(this,e.target));var a=t.viewmodel.getRactiveModel();return a.joinKey("parent",{lastLink:!1}).unlink(),a.joinKey("root",{lastLink:!1}).link(a),t.root=t,t.parent=null,t.component=null,Fl.detachchild.fire(t),dl.end(),s.ractive=t,s.then(function(){return t})}function Vn(t,e){var n=this;if(void 0===e&&(e={}),!this.rendered)throw new Error("Cannot call ractive.find('"+t+"') unless instance is rendered to the DOM");var i=this.fragment.find(t,e);if(i)return i;if(e.remote)for(var r=0;r<this._children.length;r++)if(n._children[r].instance.fragment.rendered&&(i=n._children[r].instance.find(t,e)))return i}function Pn(t,e){if(void 0===e&&(e={}),!this.rendered)throw new Error("Cannot call ractive.findAll('"+t+"', ...) unless instance is rendered to the DOM");return Ka(e.result)||(e.result=[]),this.fragment.findAll(t,e),e.remote&&this._children.forEach(function(n){!n.target&&n.instance.fragment&&n.instance.fragment.rendered&&n.instance.findAll(t,e)}),e.result}function Mn(t,e){return!e&&o(t)&&(e=t,t=""),e=e||{},Ka(e.result)||(e.result=[]),this.fragment.findAllComponents(t,e),e.remote&&this._children.forEach(function(n){!n.target&&n.instance.fragment&&n.instance.fragment.rendered&&(t&&n.name!==t||e.result.push(n.instance),n.instance.findAllComponents(t,e))}),e.result}function In(t,e){var n=this;void 0===e&&(e={}),o(t)&&(e=t,t="");var i=this.fragment.findComponent(t,e);if(i)return i;if(e.remote){if(!t&&this._children.length)return this._children[0].instance;for(var r=0;r<this._children.length;r++)if(!n._children[r].target){if(n._children[r].name===t)return n._children[r].instance;if(i=n._children[r].instance.findComponent(t,e))return i}}}function Rn(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function Bn(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function Kn(t,e,n){for(void 0===e&&(e=!0);t&&(t.type!==Lo||n&&t.name!==n)&&(!e||t.type!==Ho&&t.type!==Uo);)t=t.owner?t.owner:t.component?t.containerFragment||t.component.up:t.parent?t.parent:t.up?t.up:void 0;return t}function Ln(t,e,n){var i=[],r=Dn(t,e,n);if(!r)return null;var s=r.length-2-r[1],a=Math.min(t,r[0]),o=a+r[1];i.startIndex=a;var u;for(u=0;a>u;u+=1)i.push(u);for(;o>u;u+=1)i.push(-1);for(;t>u;u+=1)i.push(u+s);return 0!==s?i.touchedFrom=r[0]:i.touchedFrom=t,i}function Dn(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t+Math.max(n[0],-t)),void 0===n[0]&&(n[0]=0);n.length<2;)n.push(t-n[0]);return l(n[1])||(n[1]=t-n[0]),n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":return t?[t-1,1]:[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}function Fn(t){function e(t){for(var e=[],i=arguments.length-1;i-->0;)e[i]=arguments[i+1];return n(this.viewmodel.joinAll(E(t)),e)}function n(e,n){var i=e.get();if(!Ka(i)){if(void 0===i){i=[];var r=zl[t].apply(i,n),s=dl.start().then(function(){return r});return e.set(i),dl.end(),s}throw new Error("shuffle array method "+t+" called on non-array at "+e.getKeypath())}var a=Ln(i.length,t,n),o=zl[t].apply(i,n),u=dl.start().then(function(){return o});return u.result=o,a?e.shuffle?e.shuffle(a):e.mark():e.set(o),dl.end(),u}return{path:e,model:n}}function zn(t,e,n){e.parent&&e.parent.wrapper&&e.parent.adapt();var i=dl.start();return e.mark(n&&n.force),e.notifyUpstream(),dl.end(),Fl.update.fire(t,e),i}function Un(t,e){var n,i;return h(t)?(i=E(t),n=e):n=t,zn(this,i?this.viewmodel.joinAll(i):this.viewmodel,n)}function $n(e,n,i){var r=[];if(s(n))for(var a in n)t(n,a)&&r.push([qn(e,a).model,n[a]]);else r.push([qn(e,n).model,i]);return r}function qn(t,e){var n=t.fragment;return h(e)?{model:We(n,e),instance:n.ractive}:{model:n.findContext(),instance:e}}function Hn(t,e){return t.events&&t.events.find&&t.events.find(function(t){return~t.template.n.indexOf(e)})}function Zn(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];var i;if(e[0]instanceof Yl){var r=e.shift();i=Pa(r),Va(i,r)}else i=!o(e[0])||null!==e[0]&&e[0].constructor!==Object?Yl.forRactive(this):Yl.forRactive(this,e.shift());return vn(this,t,i,e)}function Wn(t,e){if(!h(t))return this.viewmodel.get(!0,t);var n,i=E(t),r=i[0];return this.viewmodel.has(r)||this.component&&!this.isolated&&(n=We(this.fragment||new Ol(this),r)),n=this.viewmodel.joinAll(i),n.get(!0,e)}function Gn(t){h(t)&&hc&&(t=hc.call(document,t));var e;if(t){if(t._ractive)return t._ractive.proxy.getContext();if((e=t.__ractive_instances__)&&1===e.length)return Je(e[0])}}function Qn(t,e){return t?(h(t)&&(t=this.find(t,e)),Gn(t)):Je(this)}function Yn(){return to.createDocumentFragment()}function Jn(t){var e;if(t&&"boolean"!=typeof t){if(!Xa||!to||!t)return null;if(t.nodeType)return t;if(h(t)){if(e=to.getElementById(t),!e&&to.querySelector)try{e=to.querySelector(t)}catch(n){}if(e&&e.nodeType)return e}return t[0]&&t[0].nodeType?t[0]:null}}function Xn(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function ti(t){return null==t||l(t)&&isNaN(t)||!t.toString?"":""+t}function ei(t){return ti(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function ni(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=Jn(t),e=Jn(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,ii(this)}function ii(t){Fl.insert.fire(t),t.findAllComponents("*").forEach(function(t){ii(t.instance)})}function ri(t,e,n){var i,r=n&&(n.ractive||n.instance)||this,s=E(t);!r.viewmodel.has(s[0])&&r.component&&(i=We(r.component.up,s[0]),i=i.joinAll(s.slice(1)));var a=i||r.viewmodel.joinAll(s),o=this.viewmodel.joinAll(E(e),{lastLink:!1});if(si(a,o)||si(o,a))throw new Error("A keypath cannot be linked to itself.");var u=dl.start();return o.link(a,n&&n.keypath||t),dl.end(),u}function si(t,e){for(var n=e;n;){if(n===t||n.owner===t)return!0;n=n.target||n.parent}}function ai(t,e){var n=e&&t.model?t.model.get():t.newValue;t.oldValue=t.oldFn?t.oldFn.call(t.oldContext,void 0,n,t.keypath):n}function oi(t,e,n){var i=t.oldValues;t.oldFn?(n||(t.oldValues={}),Ra(e).forEach(function(n){var r=[i[n],e[n],n],s=t.pattern.exec(n);s&&r.push.apply(r,s.slice(1)),t.oldValues[n]=t.oldFn.apply(t.oldContext,r)})):n?Ra(e).forEach(function(t){return i[t]=e[t]}):t.oldValues=e}function ui(){return-1}function hi(t,e,n){var i,r,a=this,o=[];s(t)?(i=t,r=e||{}):u(t)?(i={"":t},r=e||{}):(i={},i[t]=e,r=n||{});var h=!1;return Ra(i).forEach(function(t){var e=i[t],n=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return h?void 0:e.apply(this,t)},s=t.split(" ");s.length>1&&(s=s.filter(function(t){return t})),s.forEach(function(t){r.keypath=t;var e=li(a,t,n,r);e&&o.push(e)})}),this._observers.push.apply(this._observers,o),{cancel:function(){return o.forEach(function(t){return t.cancel()})},isSilenced:function(){return h},silence:function(){return h=!0},resume:function(){return h=!1}}}function li(t,e,n,i){var r=E(e),s=r.indexOf("*");~s||(s=r.indexOf("**")),i.fragment=i.fragment||t.fragment;var a;if(i.fragment?~r[0].indexOf(".*")?(a=i.fragment.findContext(),s=0,r[0]=r[0].slice(1)):a=0===s?i.fragment.findContext():We(i.fragment,r[0]):a=t.viewmodel.joinKey(r[0]),a||(a=t.viewmodel.joinKey(r[0])),~s){var o=r.indexOf("**");return~o&&(o+1!==r.length||~r.indexOf("*"))?void y("Recursive observers may only specify a single '**' at the end of the path."):(a=a.joinAll(r.slice(1,s)),new wc(t,a,r.slice(s),n,i))}return a=a.joinAll(r.slice(1)),i.array?new _c(t,a,n,i):new gc(t,a,n,i)}function ci(t,e,n){return s(t)||u(t)?(n=Va(e||{},Ec),this.observe(t,n)):(n=Va(n||{},Ec),this.observe(t,e,n))}function fi(t,e){var n=this;if(t){var i=t.split(" ").map(Ac).filter(Cc);i.forEach(function(t){var i=n._subs[t];if(i&&e){var r=i.find(function(t){return t.callback===e});r&&(T(i,r),r.off=!0,t.indexOf(".")&&n._nsSubs--)}else i&&(t.indexOf(".")&&(n._nsSubs-=i.length),i.length=0)})}else this._subs={};return this}function di(e,n){var i=this,r=o(e)?e:{};h(e)&&(r[e]=n);var s=!1,a=[],u=function(e){var n=r[e],o=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return s?void 0:n.apply(this,t)},u={callback:n,handler:o};if(t(r,e)){var h=e.split(" ").map(Ac).filter(Cc);h.forEach(function(t){(i._subs[t]||(i._subs[t]=[])).push(u),t.indexOf(".")&&i._nsSubs++,a.push([t,u])})}};for(var l in r)u(l);return{cancel:function(){return a.forEach(function(t){return i.off(t[0],t[1].callback)})},isSilenced:function(){return s},silence:function(){return s=!0},resume:function(){return s=!1}}}function pi(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function mi(t,e){void 0===e&&(e={});var n=E(t);if(this.viewmodel.has(n[0])){var i=this.viewmodel.joinAll(n);if(!i.isLink)return;for(;(i=i.target)&&e.canonical!==!1&&i.isLink;);if(i)return{ractive:i.root.ractive,keypath:i.getKeypath()}}}function vi(t){Nc.push(t),Tc=!0}function gi(t){var e=bi();e&&(t||Tc)&&(Pc?e.styleSheet.cssText=yi(null):e.innerHTML=yi(null),Tc=!1)}function yi(t){var e=t?Nc.filter(function(e){return~t.indexOf(e.id)}):Nc;return e.forEach(function(t){return t.applied=!0}),e.reduce(function(t,e){return""+(t?t+"\n\n/* {"+e.id+"} */\n"+e.styles:"")},jc)}function bi(){return to&&!Vc&&(Vc=to.createElement("style"),Vc.type="text/css",Vc.setAttribute("data-ractive-css",""),to.getElementsByTagName("head")[0].appendChild(Vc),Pc=!!Vc.styleSheet),Vc}function wi(t,e,n){void 0===n&&(n=[]);var i=[],r=function(t){return t.replace(Bc,function(t,e){return i[e]})};return t=t.replace(Rc,function(t){return"\x00"+(i.push(t)-1)}).replace(Ic,""),n.forEach(function(e){t=t.replace(e,function(t){return"\x00"+(i.push(t)-1)})}),e(t,r)}function xi(t){return t.trim()}function _i(t){return t.str}function ki(t,e){for(var n,i=[];n=Dc.exec(t);)i.push({str:n[0],base:n[1],modifiers:n[2]});for(var r=i.map(_i),s=[],a=i.length;a--;){var o=r.slice(),u=i[a];o[a]=u.base+e+u.modifiers||"";var h=r.slice();h[a]=e+" "+h[a],s.push(o.join(" "),h.join(" "))}return s.join(", ")}function Ei(t,e){var n,i='[data-ractive-css~="{'+e+'}"]';return n=zc.test(t)?t.replace(zc,i):wi(t,function(t,e){return t=t.replace(Kc,function(t,e){if(Fc.test(e))return t;var n=e.split(",").map(xi),r=n.map(function(t){return ki(t,i)}).join(", ")+" ";return t.replace(e,r)}),e(t)},[Lc])}function Ai(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function Ci(){return Ai()+Ai()+"-"+Ai()+"-"+Ai()+"-"+Ai()+"-"+Ai()+Ai()+Ai()}function Si(t,e,n){var i=o(t)?e:n,r=this._cssModel;r.locked=!0;var s=en(rn({viewmodel:r},t,e,!0),i);r.locked=!1;var a=dl.start();return this.extensions.forEach(function(t){var e=t._cssModel;e.mark(),e.downstreamChanged("",1)}),dl.end(),Oi(this,!i||i.apply!==!1),s.then(function(){return a})}function Oi(t,e){var n=ji(t),i=t.extensions.map(function(t){return Oi(t,!1)}).reduce(function(t,e){return e||t},!1);if(e&&(n||i)){var r=t._cssDef;(!r||r&&r.applied)&&gi(!0)}return n||i}function ji(t){var e=t.css;if(u(e)){var n=t._cssDef,i=Ti(t,e),r=n.transform?Ei(i,n.id):i;if(n.styles!==r)return n.styles=r,!0}}function Ni(t){for(var e=t,n=[];e;)e.prototype.cssId&&n.push(e.prototype.cssId),e=e.Parent;return n}function Ti(t,e){if(h(e))return e;var n=t.cssData,i=t._cssModel,r=function(t){return i.joinAll(E(t)).get()};r.__proto__=n;var s=e.call(t,r);return h(s)?s:""}function Vi(t,e,n){var i=t.css===!0?"":h(t.css)&&!$c.test(t.css)?Jn(t.css)||t.css:t.css,r=i,s=t.cssId||Ci();o(i)?(i="textContent"in i?i.textContent:i.innerHTML,r=i):u(i)&&(r=i,i=Ti(e,i));var a={transform:!t.noCssTransform};Ma(e,"_cssDef",{configurable:!0,value:a}),Ma(e,"css",{get:function(){return r},set:function(t){r=t;var n=Ti(e,r),i=a.styles;a.styles=a.transform?Ei(n,s):n,a.applied&&i!==a.styles&&gi(!0)}}),a.styles=a.transform?Ei(i,s):i,a.id=n.cssId=s,e._cssIds.push(s),vi(e._cssDef)}function Pi(t){t&&t.constructor!==Object&&(u(t)||(o(t)?g("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"):d("data option must be an object or a function, `"+t+"` is not valid")))}function Mi(){return{}}function Ii(t,e){Pi(e);var n=u(t);e||n||(e=Mi);var i=u(e);return n||i?function(){var r=i?Ri(e,this):e,s=n?Ri(t,this):t;return Bi(r,s)}:Bi(e,t)}function Ri(t,e){var n=t.call(e);if(n)return o(n)||d("Data function must return an object"),n.constructor!==Object&&y("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Bi(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Ki(t){var e=t._config.template;if(e&&e.fn){var n=Li(t,e.fn);return n!==e.result?(e.result=n,n):void 0}}function Li(t,e){return e.call(t,{fromId:hl.fromId,isParsed:hl.isParsed,parse:function(e,n){return void 0===n&&(n=hl.getParseOptions(t)),hl.parse(e,n)}})}function Di(t,e){return h(t)?t=Fi(t,e):(zi(t),ct(t)),t}function Fi(t,e){return"#"===t[0]&&(t=hl.fromId(t)),hl.parseFor(t,e)}function zi(t){if(void 0==t)throw new Error("The template cannot be "+t+".");if(!l(t.v))throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==Oo)throw new Error("Mismatched template version (expected "+Oo+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}function Ui(e,n,i){if(n)for(var r in n)(i||!t(e,r))&&(e[r]=n[r])}function $i(t,e,n){function i(){var t=qi(i._parent,e),r="_super"in this,s=this._super;this._super=t;var a=n.apply(this,arguments);return r?this._super=s:delete this._super,a}return/_super/.test(n)?(i._parent=t,i._method=n,i):n}function qi(t,e){if(e in t){var n=t[e];return u(n)?n:function(){return n}}return c}function Hi(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function Zi(t,e,n){if(e in t){if(n in t)throw new Error(Hi(e,n,!0));g(Hi(e,n)),t[n]=t[e]}}function Wi(t){Zi(t,"beforeInit","onconstruct"),Zi(t,"init","onrender"),Zi(t,"complete","oncomplete"),Zi(t,"eventDefinitions","events"),Ka(t.adaptors)&&Zi(t,"adaptors","adapt")}function Gi(e,n,i,r,s){Wi(r);for(var a in r)if(t(nf,a)){var o=r[a];"el"!==a&&u(o)?g(a+" is a Ractive option that does not expect a function and will be ignored","init"===e?i:null):i[a]=o}if(i.append&&i.enhance)throw new Error("Cannot use append and enhance at the same time");Jc.forEach(function(t){t[e](n,i,r,s)}),Mc[e](n,i,r,s),Zc[e](n,i,r,s),qc[e](n,i,r,s),Qi(n.prototype,i,r)}function Qi(e,n,i){for(var r in i)if(!rf[r]&&t(i,r)){var s=i[r];u(s)&&((r in Rp||"on"===r.slice(0,2)&&r.slice(2)in Fl&&r in n)&&!af.test(s.toString())&&g("Overriding Ractive prototype function '"+r+"' without calling the '"+af+"' method can be very dangerous."),s=$i(e,r,s)),n[r]=s}}function Yi(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function Ji(t){t.deps.length||t.refs||t.links.length||t.teardown()}function Xi(t){t.base&&t.base.unregister(t.proxy),t.models&&t.models.forEach(function(e){e.unregister&&e.unregister(t)})}function tr(t){var e,n,i=t.deps.length;for(e=0;i>e;e++)n=t.deps[e],n.pathChanged&&n.pathChanged(),n.fragment&&n.fragment.pathModel&&n.fragment.pathModel.applyValue(t.getKeypath());for(i=t.children.length,e=0;i>e;e++)tr(t.children[e])}function er(t,e){return e.r?We(t,e.r):e.x?new pf(t,e.x):e.rx?new gf(t,e.rx):void 0}function nr(t,e,n){void 0===n&&(n={});for(var i=0;i<t.length;i++)if(!n[t[i].n]){var r=er(e,t[i].x);n[t[i].n]=r,r.reference()}return n}function ir(t){return h(t)?wi(t,function(t,e){return t.split(";").filter(function(t){return!!t.trim()}).map(e).reduce(function(t,e){var n=e.indexOf(":"),i=e.substr(0,n).trim();return t[i]=e.substr(n+1).trim(),t},{})}):{}}function rr(t){for(var e=t.split(xf),n=e.length;n--;)e[n]||e.splice(n,1);return e}function sr(t){var e=t.element,n=t.name;if("value"===n){if(t.interpolator&&(t.interpolator.bound=!0),"select"===e.name&&"value"===n)return e.getAttribute("multiple")?ar:or;if("textarea"===e.name)return cr;if(null!=e.getAttribute("contenteditable"))return ur;if("input"===e.name){var i=e.getAttribute("type");if("file"===i)return c;if("radio"===i&&e.binding&&"name"===e.binding.attribute.name)return hr;if(~_f.indexOf(i))return cr}return lr}var r=e.node;if(t.isTwoway&&"name"===n){if("radio"===r.type)return fr;if("checkbox"===r.type)return dr}if("style"===n)return pr;if(0===n.indexOf("style-"))return mr;if("class"===n&&(!r.namespaceURI||r.namespaceURI===lc))return vr;if(0===n.indexOf("class-"))return gr;if(t.isBoolean){var s=e.getAttribute("type");return!t.interpolator||"checked"!==n||"checkbox"!==s&&"radio"!==s||(t.interpolator.bound=!0),yr}return t.namespace&&t.namespace!==t.node.namespaceURI?wr:br}function ar(t){var e=this.getValue();Ka(e)||(e=[e]);var n=this.node.options,i=n.length;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var r=n[i],s=r._ractive?r._ractive.value:r.value;r.selected=S(e,s)}}function or(t){var e=this.getValue();if(!this.locked){this.node._ractive.value=e;var n=this.node.options,i=n.length,r=!1;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var s=n[i],a=s._ractive?s._ractive.value:s.value;if(s.disabled&&s.selected&&(r=!0),a==e)return void(s.selected=!0)}r||(this.node.selectedIndex=-1)}}function ur(t){var e=this.getValue();this.locked||(t?this.node.innerHTML="":this.node.innerHTML=void 0===e?"":e)}function hr(t){var e=this.node,n=e.checked,i=this.getValue();return t?e.checked=!1:(e.value=this.node._ractive.value=i,e.checked=this.element.compare(i,this.element.getAttribute("name")),void(n&&!e.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())))}function lr(t){if(!this.locked)if(t)this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null;else{var e=this.getValue();this.node.value=this.node._ractive.value=e,this.node.setAttribute("value",ti(e))}}function cr(t){if(!this.locked)if(t)this.node._ractive.value="",this.node.removeAttribute("value");else{var e=this.getValue();this.node._ractive.value=e,this.node.value=ti(e),this.node.setAttribute("value",ti(e))}}function fr(t){t?this.node.checked=!1:this.node.checked=this.element.compare(this.getValue(),this.element.binding.getValue())}function dr(t){var e=this,n=e.element,i=e.node,r=n.binding,s=this.getValue(),a=n.getAttribute("value");if(Ka(s)){for(var o=s.length;o--;)if(n.compare(a,s[o]))return void(r.isChecked=i.checked=!0);r.isChecked=i.checked=!1}else r.isChecked=i.checked=n.compare(s,a)}function pr(t){for(var e=t?{}:ir(this.getValue()||""),n=this.node.style,i=Ra(e),r=this.previous||[],s=0;s<i.length;){if(i[s]in n){var a=e[i[s]].replace("!important","");n.setProperty(i[s],a,a.length!==e[i[s]].length?"important":"")}s++}for(s=r.length;s--;)!~i.indexOf(r[s])&&r[s]in n&&n.setProperty(r[s],"","");this.previous=i}function mr(t){if(this.style||(this.style=xe(this.name.substr(6))),!t||this.node.style.getPropertyValue(this.style)===this.last){var e=t?"":ti(this.getValue()),n=e.replace("!important","");this.node.style.setProperty(this.style,n,n.length!==e.length?"important":""),this.last=this.node.style.getPropertyValue(this.style)}}function vr(t){var e=t?[]:rr(ti(this.getValue())),n=this.node.className;n=void 0!==n.baseVal?n.baseVal:n;var i=rr(n),r=this.previous||[],s=e.concat(i.filter(function(t){return!~r.indexOf(t)})).join(" ");s!==n&&(h(this.node.className)?this.node.className=s:this.node.className.baseVal=s),this.previous=e}function gr(t){var e=this.name.substr(6),n=this.node.className;n=void 0!==n.baseVal?n.baseVal:n;var i=rr(n),r=t?!1:this.getValue();this.inlineClass||(this.inlineClass=e),r&&!~i.indexOf(e)?i.push(e):!r&&~i.indexOf(e)&&i.splice(i.indexOf(e),1),h(this.node.className)?this.node.className=i.join(" "):this.node.className.baseVal=i.join(" ")}function yr(t){if(!this.locked)if(t)this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName);else if(this.useProperty)this.node[this.propertyName]=this.getValue();else{var e=this.getValue();e?this.node.setAttribute(this.propertyName,h(e)?e:""):this.node.removeAttribute(this.propertyName)}}function br(t){t?this.node.getAttribute(this.name)===this.value&&this.node.removeAttribute(this.name):(this.value=ti(this.getString()),this.node.setAttribute(this.name,this.value))}function wr(t){t?this.value===this.node.getAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1))&&this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):(this.value=ti(this.getString()),this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),this.value))}function xr(){return Af}function _r(t,e){if(Sf.test(t))return[];var n=e?"svg":"div";return t?(Ef.innerHTML="<"+n+" "+t+"></"+n+">")&&P(Ef.childNodes[0].attributes):[]}function kr(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function Er(t,e){for(var n="xmlns:"+e;t;){if(t.hasAttribute&&t.hasAttribute(n))return t.getAttribute(n);t=t.parentNode}return vc[e]}function Ar(){return Of}function Cr(t,e,n){0===e?t.value=!0:"true"===e?t.value=!0:"false"===e||"0"===e?t.value=!1:t.value=e;var i=t.element[t.flag];return t.element[t.flag]=t.value,n&&!t.element.attributes.binding&&i!==t.value&&t.element.recreateTwowayBinding(),t.value}function Sr(t){of.call(this,t)}function Or(){var t=this;return this.torndown?(g("ractive.teardown() was called on a Ractive instance that was already torn down"),Promise.resolve()):(this.shouldDestroy=!0,jr(this,function(){return t.fragment.rendered?t.unrender():Promise.resolve()}))}function jr(t,e){t.torndown=!0,t.fragment.unbind(),t._observers.slice().forEach(H),t.el&&t.el.__ractive_instances__&&T(t.el.__ractive_instances__,t);var n=e();return Fl.teardown.fire(t),n.then(function(){Fl.destruct.fire(t),t.viewmodel.teardown()}),n}function Nr(t,e){if(t.applyValue=function(t){this.parent.value[e]=t,t&&t.viewmodel?(this.link(t.viewmodel.getRactiveModel(),e),this._link.markedAll()):(this.link(Pa(Ao),e),this._link.markedAll())},"root"===e){var n=t.mark;t.mark=function(t){this._marking||(this._marking=!0,n.apply(this,t),this._marking=!1)}}return t.applyValue(t.parent.ractive[e],e),t._link.set=function(e){return t.applyValue(e)},t._link.applyValue=function(e){return t.applyValue(e)},t._link}function Tr(t,e){t._link&&t._link.implicit&&t._link.isDetached()&&t.attach(e);for(var n in t.childByKey)if(n in t.value)Tr(t.childByKey[n],e);else if(!t.childByKey[n]._link||t.childByKey[n]._link.isDetached()){var i=We(e,n);i&&t.childByKey[n].link(i,n,{implicit:!0})}}function Vr(t){t._link&&t._link.implicit&&t.unlink();for(var e in t.childByKey)Vr(t.childByKey[e])}function Pr(t,e,i){var r=(t.constructor["_"+i]||[]).concat(n(e[i]||[])),s="on"===i?"once":i+"Once";r.forEach(function(e){var n=e[0],r=e[1];u(r)?t[i](n,r):o(r)&&u(r.handler)&&t[r.once?s:i](n,r.handler,Pa(r))})}function Mr(e,n){Na.DEBUG&&Qa(),Rr(e),Br(e),Pr(e,n,"on"),!t(n,"delegate")&&e.parent&&e.parent.delegate!==e.delegate&&(e.delegate=!1),Ka(n.use)&&e.use.apply(e,n.use.filter(function(t){return t.construct})),Fl.construct.fire(e,n);for(var i=If.length;i--;){var r=If[i];e[r]=Va(Pa(e.constructor[r]||null),n[r])}for(i=Rf.length;i--;){var s=Rf[i];e[s]=Va(Pa(e.constructor.prototype[s]),n[s])}e._attributePartial&&(e.partials["extra-attributes"]=e._attributePartial,delete e._attributePartial);var a=new Mf({adapt:Ir(e,e.adapt,n),data:Hc.init(e.constructor,e,n),ractive:e});e.adapt=a.adaptors,e.viewmodel=a;for(var o in e.computed)On.call(e,o,e.computed[o])}function Ir(t,e,n){function i(e){return h(e)&&(e=b("adaptors",t,e),e||d(lo(e,"adaptor"))),e}e=e.map(i);var r=j(n.adapt).map(i),s=[e,r];return t.parent&&!t.isolated&&s.push(t.parent.viewmodel.adaptors),V.apply(null,s)}function Rr(t){t._guid="r-"+Bf++,t._subs=Pa(null),t._nsSubs=0,t._config={},t.event=null,t._eventQueue=[],t._observers=[],t._children=[],t._children.byName={},t.children=t._children,t.component||(t.root=t,t.parent=t.container=null)}function Br(t){var e=t.component,n=t.constructor.attributes;if(n&&e){var i=e.template,r=i.m?i.m.slice():[],s=r.filter(function(t){return t.t===$o}).map(function(t){return t.n});n.required.forEach(function(t){~s.indexOf(t)||g("Component '"+e.name+"' requires attribute '"+t+"' to be provided")});for(var a=n.optional.concat(n.required),o=[],u=r.length;u--;){var h=r[u];h.t!==$o||~a.indexOf(h.n)?n.mapAll||h.t!==Eu&&h.t!==Au&&h.t!==Cu||o.unshift(r.splice(u,1)[0]):n.mapAll?o.unshift({t:$o,n:h.n,f:[{t:Mo,r:"~/"+h.n}]}):o.unshift(r.splice(u,1)[0])}o.length&&(e.template={t:i.t,e:i.e,f:i.f,m:r,p:i.p}),t._attributePartial=o}}function Kr(t){this.item&&this.removeChild(this.item);var e=t.instance;t.anchor=this,t.up=this.up,t.name=t.nameOption||this.name,this.name=t.name,e.isolated||e.viewmodel.attached(this.up),this.rendered&&Dr(this,t)}function Lr(t){this.item===t&&(Fr(this,t),this.name=this.template.n)}function Dr(t,e){if(t.rendered){e.shouldDestroy=!1,e.up=t.up,t.item=e,t.instance=e.instance;var n=t.up.findNextNode(t);e.instance.fragment.rendered&&e.instance.unrender(),e.partials=e.instance.partials,e.instance.partials=Va(Pa(e.partials),e.partials,t._partials),e.instance.fragment.unbind(),e.instance.fragment.componentParent=t.up,e.instance.fragment.bind(e.instance.viewmodel),t.attributes.forEach(q),t.eventHandlers.forEach(q),t.attributes.forEach(X),t.eventHandlers.forEach(X);var i=t.up.findParentNode();Js(e.instance,i,i.contains(n)?n:null,t.occupants),e.lastBound!==t&&(e.lastBound=t)}}function Fr(t,e){t.rendered&&(e.shouldDestroy=!0,e.instance.unrender(),t.eventHandlers.forEach(it),t.attributes.forEach(it),t.eventHandlers.forEach(nt),t.attributes.forEach(nt),e.instance.el=e.instance.anchor=null,e.instance.fragment.componentParent=null,e.up=null,e.anchor=null,t.item=null,t.instance=null)}function zr(){var t=Lf;Lf=[],t.forEach(kn)}function Ur(t,e,n,i){void 0===i&&(i={}),e&&e.f&&e.f.s&&(t.fn=lt(e.f.s,e.f.r.length),i.register===!0&&(t.models=$r(t,e,n,i)))}function $r(t,e,n,i){return void 0===i&&(i={}),e.f.r.map(function(e,r){var s;return i.specialRef&&(s=i.specialRef(e,r))?s:(s=We(n,e),i.register===!0&&s.register(t),s)})}function qr(t,e){e&&e.f&&e.f.s&&(t.models&&t.models.forEach(function(e){e&&e.unregister&&e.unregister(t)}),t.models=null)}function Hr(){this._ractive.binding.handleChange()}function Zr(t,e,n){var i=t+"-bindingGroup";return e[i]||(e[i]=new Wf(i,e,n))}function Wr(){var t=this,e=this.bindings.filter(function(t){return t.node&&t.node.checked}).map(function(t){return t.element.getAttribute("value")}),n=[];return e.forEach(function(e){t.bindings[0].arrayContains(n,e)||n.push(e)}),n}function Gr(){Hr.call(this);var t=this._ractive.binding.model.get();this.value=void 0==t?"":t}function Qr(t){var e;return function(){var n=this;e&&clearTimeout(e),e=setTimeout(function(){var t=n._ractive.binding;t.rendered&&Hr.call(n),e=null},t)}}function Yr(t){return t.selectedOptions?P(t.selectedOptions):t.options?P(t.options).filter(function(t){return t.selected}):[]}function Jr(t){return id[t]||(id[t]=[])}function Xr(){var t=this.bindings.filter(function(t){return t.node.checked});return t.length>0?t[0].element.getAttribute("value"):void 0}function ts(t){return t&&t.template.f&&1===t.template.f.length&&!t.template.f[0].s?t.template.f[0].t===Mo?!0:(t.template.f[0].t===Io&&g("It is not possible create a binding using a triple mustache."),!1):!1}function es(t){var e=t.name,n=t.attributeByName;if("input"===e||"textarea"===e||"select"===e||n.contenteditable){var i=ts(n.value),r=ts(n.contenteditable),s=t.getAttribute("contenteditable");if((s||r)&&i)return Jf;if("input"===e){var a=t.getAttribute("type");if("radio"===a){var o=ts(n.name),u=ts(n.checked);return o&&u?(g("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),sd):o?sd:u?rd:null}if("checkbox"===a){var h=ts(n.name),l=ts(n.checked);return h&&l?Zf:h?Yf:l?Zf:null}return"file"===a&&i?td:"number"===a&&i?nd:"range"===a&&i?nd:i?Xf:null}return"select"===e&&i?t.getAttribute("multiple")?ed:ad:"textarea"===e&&i?Xf:null}}function ns(t){var e=t.attributeByName.name;return"radio"===t.getAttribute("type")&&(e||{}).interpolator&&t.getAttribute("value")===e.interpolator.model.get()}function is(t){var e=t.toString();return e?" "+e:""}function rs(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return fc;var n=t.parent;return n?"foreignobject"===n.name?lc:n.node.namespaceURI:t.ractive.el.namespaceURI}function ss(t){for(var e,n=t.type,i=t.currentTarget,r=i._ractive&&i._ractive.proxy,s=t.target,a=!0;a&&s&&s!==i;){var o=s._ractive&&s._ractive.proxy;if(o&&o.up.delegate===r&&as(t,s,i)&&(e=o.listeners&&o.listeners[n]))for(var u=e.length,h=0;u>h;h++)a=e[h].call(s,t)!==!1&&a;s=s.parentNode||s.correspondingUseElement}return a}function as(t,e,n){if(hd&&t instanceof hd)for(var i=e;i&&i!==n;){if(i.disabled)return!1;i=i.parentNode||i.correspondingUseElement}return!0}function os(t){var e,n=this,i=this._ractive.proxy;if(i.listeners&&(e=i.listeners[t.type]))for(var r=e.length,s=0;r>s;s++)e[s].call(n,t)}function us(){var t=this._ractive.proxy;dl.start(),t.formBindings.forEach(hs),dl.end()}function hs(t){t.model.set(t.resetValue)}function ls(t,e,n,i){if(n){var r=n[0];if(r&&3===r.nodeType){var s=r.nodeValue.indexOf(i);n.shift(),0===s?r.nodeValue.length!==i.length&&n.unshift(r.splitText(i.length)):r.nodeValue=i}else r=t.node=to.createTextNode(i),n[0]?e.insertBefore(r,n[0]):e.appendChild(r);t.node=r}else t.node||(t.node=to.createTextNode(i)),e.appendChild(t.node)}function cs(t){_d.call(this,t)}function fs(t){t.sp();var e=Ct(t);if(!e)return null;var n={key:e};if(t.sp(),!t.matchString(":"))return null;t.sp();var i=t.read();return i?(n.value=i.v,n):null}function ds(t,e){var n=new Vd(t,{values:e});return n.result}function ps(t){var e=t.template.f,n=t.element.instance.viewmodel,i=n.value;if(1===e.length&&e[0].t===Mo){var r=er(t.up,e[0]),s=r.get(!1);e[0].s?!o(s)||e[0].x?n.joinKey(E(t.name)).set(s):g("Cannot copy non-computed object value from static mapping '"+t.name+"'"):(t.model=r,t.link=n.createLink(t.name,r,e[0].r,{mapping:!0}),void 0===s&&!r.isReadonly&&t.name in i&&r.set(i[t.name])),r!==t.model&&r.unregister()}else t.boundFragment=new Op({owner:t,template:e}).bind(),t.model=n.joinKey(E(t.name)),t.model.set(t.boundFragment.valueOf()),t.boundFragment.bubble=function(){Op.prototype.bubble.call(t.boundFragment),dl.scheduleTask(function(){t.boundFragment.update(),t.model.set(t.boundFragment.valueOf())})}}function ms(t,n,i){var r=vs(t,n,i||{});if(r)return r;if(r=hl.fromId(n,{noThrow:!0})){var s=hl.parseFor(r,t);return s.p&&e(t.partials,s.p),t.partials[n]=s.t}}function vs(e,n,i){var r=bs(n,i.owner);if(r)return r;var s=w("partials",e,n);if(s){r=s.partials[n];var a;if(u(r)){if(a=r,a.styleSet)return a;a=r.bind(s),a.isOwner=t(s.partials,n),r=a.call(e,hl)}if(!r&&""!==r)return void g(ho,n,"partial","partial",{ractive:e});if(!hl.isParsed(r)){var o=hl.parseFor(r,s);o.p&&g("Partials ({{>%s}}) cannot contain nested inline partials",n,{ractive:e});var h=a?s:gs(s,n);h.partials[n]=r=o.t}return a&&(r._fn=a),r.v?r.t:r}}function gs(e,n){return t(e.partials,n)?e:ys(e.constructor,n)}function ys(e,n){return e?t(e.partials,n)?e:ys(e.Parent,n):void 0}function bs(e,n){if(n){if(n.template&&n.template.p&&!Ka(n.template.p)&&t(n.template.p,e))return n.template.p[e];if(n.up&&n.up.owner)return bs(e,n.up.owner)}}function ws(t){cs.call(this,t);var e=t.template;e.t===Zo?this.yielder=1:e.t===Lo&&(this.type=Do,this.macro=t.macro)}function xs(t,e){t.partial=e,_s(t);var n={owner:t,template:t.partial};t.yielder&&(n.ractive=t.container.parent),t.fn&&(n.cssIds=t.fn._cssIds);var i=t.fragment=new Op(n);t.template.z&&(i.aliases=nr(t.template.z,t.containerFragment||t.up))}function _s(t){t.template.c&&(t.partial=[{t:Ro,n:gu,f:t.partial}],Va(t.partial[0],t.template.c),t.yielder&&(t.partial[0].y=t))}function ks(t,e,n){var i=e;return Ka(i)?t.partial=i:i&&o(i)?Ka(i.t)?t.partial=i.t:h(i.template)&&(t.partial=Ss(i.template,i.template,t.ractive).t):u(i)&&i.styleSet?(t.fn=i,t.fragment&&(t.fragment.cssIds=i._cssIds)):null!=i&&(i=ms(t.ractive,""+i,t.containerFragment||t.up),i?(t.name=e,i.styleSet?(t.fn=i,t.fragment&&(t.fragment.cssIds=i._cssIds)):t.partial=i):n?t.partial=Ss(""+e,""+e,t.ractive).t:t.name=e),t.partial}function Es(t){if(ks(this,t,!0),!this.initing){if(this.dirtyTemplate=!0,this.fnTemplate=this.partial,!this.updating){var e=dl.start();return this.bubble(),dl.end(),e}this.bubble(),dl.promise()}}function As(t,e){var n=this.fragment.aliases||(this.fragment.aliases={});e?n[e]=this._data.joinAll(E(t)):n[t]=this._data}function Cs(e){var n=e.fn,i=e.fragment,r=e.template=Va({},e.template),s=e.handle=i.getContext({proxy:e,aliasLocal:As,name:e.template.e||e.name,attributes:{},setTemplate:Es.bind(e),template:r});if(r.p||(r.p={}),r.p=s.partials=Va({},r.p),t(r.p,"content")||(r.p.content=r.f||[]),Ka(n.attributes)){e._attrs={};var a=function(){this.dirty=!0,e.dirtyAttrs=!0,e.bubble()};if(Ka(r.m)){var o=r.m;r.p[Rd]=r.m=o.filter(function(t){return!~n.attributes.indexOf(t.n)}),o.filter(function(t){return~n.attributes.indexOf(t.n)}).forEach(function(t){var n=new Op({template:t.f,owner:e});n.bubble=a,n.findFirstNode=c,e._attrs[t.n]=n})}else r.p[Rd]=[]}else r.p[Rd]=r.m;e._attrs&&(Ra(e._attrs).forEach(function(t){e._attrs[t].bind()}),e.refreshAttrs()),e.initing=1,e.proxy=n(s,s.attributes)||{},e.partial||(e.partial=[]),e.fnTemplate=e.partial,e.initing=0,_s(e),i.resetTemplate(e.partial)}function Ss(t,e,n){var i;try{i=hl.parse(e,hl.getParseOptions(n))}catch(r){g("Could not parse partial from expression '"+t+"'\n"+r.message)}return i||{t:[]}}function Os(t){var e,n,i=t;t:for(;i;){for(n=0;!n&&i;){if(i.owner.type===Lo&&(n=i.owner),i.owner.ractive&&i.owner.ractive.delegate===!1)break t;i=i.parent||i.componentParent}if(n.delegate===!1)break t;for(e=n.delegate||n;i&&!i.iterations;){if(i.owner.ractive&&i.owner.ractive.delegate===!1)break t;i=i.parent||i.componentParent}}return e}function js(t,e,n){for(var i=e.length,r=t;i>r;r++)if(~e[r]&&n[r]&&n[r].rendered)return r}function Ns(t,e,n,i){var r=t.context?Vs(t,e,n):void 0;e.key=n,e.index=i,e.context=r,t.source&&(e.lastValue=r&&r.get()),e.idxModel&&e.idxModel.applyValue(i),e.keyModel&&e.keyModel.applyValue(n),e.pathModel&&(e.pathModel.context=r,e.pathModel.applyValue(r.getKeypath())),e.rootModel&&(e.rootModel.context=r,e.rootModel.applyValue(r.getKeypath(e.ractive.root)));var s=e.aliases;t.aliases&&t.aliases.forEach(function(t){"."===t.x.r?s[t.n]=r:"@index"===t.x.r?s[t.n]=e.getIndex():"@key"===t.x.r?s[t.n]=e.getKey():"@keypath"===t.x.r?s[t.n]=e.getKeypath():"@rootpath"===t.x.r&&(s[t.n]=e.getKeypath(!0))})}function Ts(t,e){return e===!0?t.context.get().slice():t.context.get().map(function(t){return e.reduce(function(t,e){return t&&t[e]},t)})}function Vs(t,e,n){if(t.source){var i,r=t.source.model.get();if(r.indexOf&&~(i=r.indexOf(t.context.joinKey(n).get())))return t.source.model.joinKey(i)}return t.context.joinKey(n)}function Ps(t){return!t||Ka(t)&&0===t.length||s(t)&&0===Ra(t).length}function Ms(t,e){return e||Ka(t)?vu:a(t)?yu:void 0===t?null:pu}function Is(t,e){var n=t.up.findNextNode(t);if(n){var i=Yn();e.render(i),n.parentNode.insertBefore(i,n)}else e.render(t.up.findParentNode())}function Rs(){Zd=!to[Wd]}function Bs(){Zd=!1}function Ks(){Zd=!0}function Ls(t){return t?(ip.test(t)&&(t="-"+t),t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""}function Ds(e,n,i){for(var r=n;r;){if(t(r,e)&&(void 0===i||i?r.rendering:r.unrendering))return r[e];r=r.component&&r.component.ractive}return n[e]}function Fs(t,e){var n=[];if(null==t||""===t)return n;var i,r,s;xp&&(r=_p[e.tagName])?(i=zs("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(s=i.options[i.selectedIndex])):e.namespaceURI===fc?(i=zs("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):"TEXTAREA"===e.tagName?(i=tc("div"),"undefined"!=typeof i.textContent?i.textContent=t:i.innerHTML=t):(i=zs(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(s=i.options[i.selectedIndex]));for(var a;a=i.firstChild;)n.push(a),i.removeChild(a);var o;if("SELECT"===e.tagName)for(o=n.length;o--;)n[o]!==s&&(n[o].selected=!1);return n}function zs(t){return kp[t]||(kp[t]=tc(t))}function Us(e,n){var i,r=w("components",e,n);if(r&&(i=r.components[n],i&&!i.isInstance&&!i.then)){var s=i.bind(r);if(s.isOwner=t(r.components,n),i=s(),!i)return void g(ho,n,"component","component",{ractive:e});h(i)&&(i=Us(e,i)),i._fn=s,r.components[n]=i}return i}function $s(t,e){var n=e.template.p||{},i=e.template.e,r=Va({},e,{template:{t:Lo,e:i},macro:function(r){r.setTemplate(n["async-loading"]||[]),t.then(function(t){e.up.ractive.components[i]=t,n["async-loaded"]?(r.partials.component=[e.template],r.setTemplate(n["async-loaded"])):r.setTemplate([e.template])},function(t){n["async-failed"]?(r.aliasLocal("error","error"),r.set("@local.error",t),r.setTemplate(n["async-failed"])):r.setTemplate([])})}});return new ws(r)}function qs(t,e,n){var i=t.f.find(function(t){return t.t===e});return i?i.n?[{t:19,n:54,f:i.f||[],z:[{n:i.n,x:{r:"__await."+n}}]}]:i.f||[]:[]}function Hs(t){var e=t.template,n=qs(e,xu,"value"),i=qs(e,_u,"error"),r=qs(e,Ro),s=qs(e,bu),a=Va({},t,{template:{t:Lo,m:[{t:$o,n:"for",f:[{t:Mo,r:e.r,rx:e.rx,x:e.x}]}]},macro:function(t,e){function a(e){e["for"]&&u(e["for"].then)?(t.setTemplate(r),e["for"].then(function(e){t.set("@local.value",e),t.setTemplate(n)},function(e){t.set("@local.error",e),t.setTemplate(i)})):void 0===e["for"]?t.setTemplate(s):(t.set("@local.value",e["for"]),t.setTemplate(n))}return t.aliasLocal("__await"),a(e),{update:a}}});return a.macro.attributes=["for"],new ws(a)}function Zs(t){if(h(t.template))return new qd(t);var e,n,i=t.template.t;if(i===Lo)return n=t.template.e,e=w("partials",t.up.ractive,n),e&&(e=e.partials[n],e.styleSet)?(t.macro=e,new ws(t)):(e=Us(t.up.ractive,n))?u(e.then)?$s(e,t):new Kf(t,e):new(e=Sp[n.toLowerCase()]||ud)(t);var r;if(i===$o){var s=t.owner;(!s||s.type!==Uo&&s.type!==Ho&&s.type!==Lo)&&(s=Kn(t.up)),t.element=s,r=s.type===Ho||s.type===Uo?Pd:jf}else r=Cp[i];if(!r)throw new Error("Unrecognised item type "+i);return new r(t)}function Ws(t,e,n,i){return void 0===i&&(i=0),t.map(function(t){if(t.type===Po)return t.template;if(t.fragment)return t.fragment.iterations?t.fragment.iterations.map(function(t){return Ws(t.items,e,n,i)}).join(""):Ws(t.fragment.items,e,n,i);var r=n+"-"+i++,s=t.model||t.newModel;return e[r]=s?s.wrapper?s.wrapperValue:s.get():void 0,"${"+r+"}"}).join("")}function Gs(t){var e,n=tn(this);if(t){if(this.rootModel)return this.rootModel;this.rootModel=new Bd(this.context.getKeypath(this.ractive.root),this.context,this.ractive.root),e=this.rootModel}else{if(this.pathModel)return this.pathModel;this.pathModel=new Bd(this.context.getKeypath(),this.context),e=this.pathModel}return n&&n.context&&n.getKeypath(t).registerChild(e),e}function Qs(t,e,n){var i=t.viewmodel.computed;if(i)for(var r in i)r in t.viewmodel.value&&i[r]&&!i[r].isReadonly&&i[r].set(t.viewmodel.value[r]);Xc.init(t.constructor,t,e),Fl.config.fire(t),Fl.init.begin(t);var s=t.fragment=Ys(t,n);if(s&&s.bind(t.viewmodel),Fl.init.end(t),Pr(t,e,"observe"),Ka(e.use)&&t.use.apply(t,e.use.filter(function(t){return!t.construct})),s){var a=t.el=t.target=Jn(t.el||t.target);if(a&&!t.component){var o=t.render(a,t.append);Na.DEBUG_PROMISES&&o["catch"](function(e){throw y("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),g("An error happened during rendering",{ractive:t}),p(e),e})}}}function Ys(t,e){if(void 0===e&&(e={}),t.template){var n=[].concat(t.constructor._cssIds||[],e.cssIds||[]);return new Op({owner:t,template:t.template,cssIds:n})}}function Js(t,e,n,i){t.rendering=!0;var r=dl.start();if(dl.scheduleTask(function(){return Fl.render.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(t.destroyed&&(t.destroyed=!1,t.fragment=Ys(t).bind(t.viewmodel)),n=Jn(n)||t.anchor,t.el=t.target=e,t.anchor=n,t.cssId&&gi(),e)if((e.__ractive_instances__||(e.__ractive_instances__=[])).push(t),n){var s=to.createDocumentFragment();t.fragment.render(s),e.insertBefore(s,n)}else t.fragment.render(e,i);return dl.end(),t.rendering=!1,r.then(function(){t.torndown||Fl.complete.fire(t)})}function Xs(t,e){if(this.torndown)return g("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();if(t=Jn(t)||this.el,!this.append&&t){var n=t.__ractive_instances__;n&&n.forEach(et),this.enhance||(t.innerHTML="")}var i=this.enhance?P(t.childNodes):null,r=Js(this,t,e,i);if(i)for(;i.length;)t.removeChild(i.pop());return r}function ta(t){if(t=t||{},!o(t))throw new Error("The reset method takes either no arguments, or an object containing new data");t=Hc.init(this.constructor,this,{data:t});var e=dl.start(),n=this.viewmodel.wrapper;n&&n.reset?n.reset(t)===!1&&this.viewmodel.set(t):this.viewmodel.set(t);for(var i,r=Xc.reset(this),s=r.length;s--;)if(Np.indexOf(r[s])>-1){i=!0;break}return i&&(Fl.unrender.fire(this),this.fragment.resetTemplate(this.template),Fl.render.fire(this),Fl.complete.fire(this)),dl.end(),Fl.reset.fire(this,t),e}function ea(t,e,n,i){t.forEach(function(t){if(t.type===Do&&(t.refName===e||t.name===e))return t.inAttribute=n,void i.push(t);if(t.fragment)ea(t.fragment.iterations||t.fragment.items,e,n,i);else if(Ka(t.items))ea(t.items,e,n,i);else if(t.type===Ho&&t.instance){if(t.instance.partials[e])return;ea(t.instance.fragment.items,e,n,i)}t.type===Lo&&Ka(t.attributes)&&ea(t.attributes,e,!0,i)})}function na(t,e){var n=[];ea(this.fragment.items,t,!1,n);var i=dl.start();return this.partials[t]=e,n.forEach(W),dl.end(),i}function ia(t){Zc.init(null,this,{template:t});var e=this.transitionsEnabled;this.transitionsEnabled=!1;var n=this.component;n&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1);var i=dl.start();this.fragment.unbind().unrender(!0),this.fragment=new Op({template:this.template,root:this,owner:this});var r=Yn();return this.fragment.bind(this.viewmodel).render(r),n&&!n.external?this.fragment.findParentNode().insertBefore(r,n.findNextNode()):this.el.insertBefore(r,this.anchor),dl.end(),this.transitionsEnabled=e,i}function ra(t,e,n){var i=this,r=o(t)?e:n;return en(rn(i,t,e,r&&r.isolated),r)}function sa(t,e,n){var i=l(e)?-e:-1,r=o(e)?e:n;return on(this,t,i,r)}function aa(t,e){if(!h(t))throw new TypeError(uo);return en(nn(this,t,null,e&&e.isolated).map(function(t){return[t,!t.get()]}),e)}function oa(){var t=[this.cssId].concat(this.findAllComponents().map(function(t){return t.cssId})),e=Ra(t.reduce(function(t,e){return t[e]=!0,t},{}));return yi(e)}function ua(){return this.fragment.toString(!0)}function ha(){return this.fragment.toString(!1)}function la(t,e,n){e instanceof HTMLElement||s(e)&&(n=e),e=e||this.event.node,e&&e._ractive||d("No node was supplied for transition "+t),n=n||{};var i=e._ractive.proxy,r=new yp({owner:i,up:i.up,name:t,params:n});r.bind();var a=dl.start();return dl.registerTransition(r),dl.end(),a.then(function(){return r.unbind()}),a}function ca(t){var e=dl.start();return this.viewmodel.joinAll(E(t),{lastLink:!1}).unlink(),dl.end(),e}function fa(){if(!this.fragment.rendered)return g("ractive.unrender() was called on a Ractive instance that was not rendered"),Promise.resolve();this.unrendering=!0;var t=dl.start();Fl.unrendering.fire(this);var e=!this.component||(this.component.anchor||{}).shouldDestroy||this.component.shouldDestroy||this.shouldDestroy;return this.fragment.unrender(e),e&&(this.destroyed=!0),T(this.el.__ractive_instances__,this),Fl.unrender.fire(this),dl.end(),this.unrendering=!1,t}function da(t,e){var n=dl.start();return t?this.viewmodel.joinAll(E(t)).updateFromBindings(e!==!1):this.viewmodel.updateFromBindings(!0),dl.end(),n}function pa(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return e.forEach(function(e){e({proto:t,Ractive:t.constructor.Ractive,instance:t})}),this}function ma(t){return t&&t instanceof this}function va(t){return this._cssModel.joinAll(E(t)).get()}function ga(t,e){if(Bp.find(function(e){return e.id===t}))throw new Error("Extra styles with the id '"+t+"' have already been added.");Bp.push({id:t,css:e}),this.css||Object.defineProperty(this,"css",{configurable:!1,writable:!1,value:ya}),this._cssDef||(Object.defineProperty(this,"_cssDef",{configurable:!0,writable:!1,value:{transform:!1,id:"Ractive.addStyle"}}),vi(this._cssDef)),ji(this),gi(!0)}function ya(t){return Bp.map(function(e){return"\n/* ---- extra style "+e.id+" */\n"+(u(e.css)?e.css(t):e.css)}).join("")}function ba(t){return!!Bp.find(function(e){return e.id===t})}function wa(t,e,n){var i=o(t)?e:n,r=kl;return en(rn({viewmodel:r},t,e,!0),i)}function xa(t){return kl.joinAll(E(t)).get()}function _a(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return e.forEach(function(e){u(e)&&e({proto:t.prototype,Ractive:t.Ractive,instance:t})}),this}function ka(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.length?t.reduce(Aa,this):Aa(this)}function Ea(t,e){return void 0===e&&(e={}),Aa(this,e,t)}function Aa(t,e,i){void 0===e&&(e={});var r,s=u(i)&&i;if(e.prototype instanceof Na)throw new Error("Ractive no longer supports multiple inheritance.");if(s){if(!(s.prototype instanceof t))throw new Error("Only classes that inherit the appropriate prototype may be used with extend");if(!Kp.test(s.toString()))throw new Error("Only classes that call super in their constructor may be used with extend");r=s.prototype}else s=function(t){return this instanceof s?(Mr(this,t||{}),void Qs(this,t||{},{})):new s(t)},r=Pa(t.prototype),r.constructor=s,s.prototype=r;if(Ia(s,{defaults:{value:r},extend:{value:ka,writable:!0,configurable:!0},extendWith:{value:Ea,writable:!0,configurable:!0},extensions:{value:[]},use:{value:_a},isInstance:{value:ma},Parent:{value:t},Ractive:{value:Na},styleGet:{value:va.bind(s),configurable:!0},styleSet:{value:Si.bind(s),configurable:!0}}),Xc.extend(t,r,e,s),s._on=(t._on||[]).concat(n(e.on)),s._observe=(t._observe||[]).concat(n(e.observe)),t.extensions.push(s),e.attributes){var a;a=Ka(e.attributes)?{optional:e.attributes,required:[]}:e.attributes,Ka(a.required)||(a.required=[]),Ka(a.optional)||(a.optional=[]),s.attributes=a}return Hc.extend(t,r,e,s),Ma(s,"helpers",{writable:!0,value:r.helpers}),Ka(e.use)&&s.use.apply(s,e.use),s}function Ca(t,e){if(!u(t))throw new Error("The macro must be a function");return Va(t,e),Ia(t,{extensions:{value:[]},_cssIds:{value:[]},cssData:{value:Va(Pa(this.cssData),t.cssData||{})},styleGet:{value:va.bind(t)},styleSet:{value:Si.bind(t)}}),Ma(t,"_cssModel",{value:new Uc(t)}),t.css&&Vi(t,t,t),this.extensions.push(t),t}function Sa(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map(_).join(".")}function Oa(t){return E(t).map(A)}function ja(t,e,n){return b(e,n,t)}function Na(t){return this instanceof Na?(Mr(this,t||{}),void Qs(this,t||{},{})):new Na(t)}Object.assign||(Object.assign=function(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=e.length,s=0;r>s;s++){var a=e[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i});var Ta=Object,Va=Ta.assign,Pa=Ta.create,Ma=Ta.defineProperty,Ia=Ta.defineProperties,Ra=Ta.keys,Ba=Object.prototype.toString,Ka=Array.isArray;if(Array.prototype.find||Ma(Array.prototype,"find",{value:function(e,n){if(null===this||void 0===this)throw new TypeError("Array.prototype.find called on null or undefined");if(!u(e))throw new TypeError(e+" is not a function");for(var i=Object(this),r=i.length>>>0,s=0;r>s;s++)if(t(i,s)&&e.call(n,i[s],s,i))return i[s];return void 0},configurable:!0,writable:!0}),"undefined"!=typeof window&&window.Node&&window.Node.prototype&&!window.Node.prototype.contains&&(Node.prototype.contains=function(t){var e=this;if(!t)throw new TypeError("node required");do if(e===t)return!0;while(t=t&&t.parentNode);return!1}),"undefined"!=typeof window&&window.performance&&!window.performance.now){window.performance=window.performance||{};var La=Date.now();window.performance.now=function(){return Date.now()-La}}if("undefined"!=typeof window&&!window.Promise){var Da={},Fa={},za={},Ua=window.Promise=function(t){var e,n,i=[],r=[],s=Da,a=function(t){return function(a){s===Da&&(e=a,s=t,n=qa(s===Fa?i:r,e),$a(n))}},o=a(Fa),h=a(za);try{t(o,h)}catch(l){h(l)}return{then:function(t,e){var a=new Ua(function(o,h){var l=function(t,e,n){u(t)?e.push(function(e){try{Ha(a,t(e),o,h)}catch(n){h(n)}}):e.push(n)};l(t,i,o),l(e,r,h),s!==Da&&$a(n)});return a},"catch":function(t){return this.then(null,t)}}};Ua.all=function(t){return new Ua(function(e,n){var i,r,s=[];if(!t.length)return void e(s);var a=function(t,r){t&&u(t.then)?t.then(function(t){s[r]=t,--i||e(s)},n):(s[r]=t,--i||e(s))};for(i=r=t.length;r--;)a(t[r],r)})},Ua.resolve=function(t){return new Ua(function(e){e(t)})},Ua.reject=function(t){return new Ua(function(e,n){n(t)})};var $a=function(t){setTimeout(t,0)},qa=function(t,e){return function(){for(var n=void 0;n=t.shift();)n(e)}},Ha=function(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Ua)e.then(n,i);else if(e&&(o(e)||u(e))){try{r=e.then}catch(s){return void i(s)}if(u(r)){var a,h=function(e){a||(a=!0,Ha(t,e,n,i))},l=function(t){a||(a=!0,i(t))};try{r.call(e,h,l)}catch(s){if(!a)return i(s),void(a=!0)}}else n(e)}else n(e)}}if(!("undefined"==typeof window||window.requestAnimationFrame&&window.cancelAnimationFrame)){var Za=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(0,16-(e-Za)),i=window.setTimeout(function(){t(e+n)},n);return Za=e+n,i},window.cancelAnimationFrame=function(t){clearTimeout(t)}}var Wa,Ga,Qa,Ya={el:void 0,append:!1,delegate:!0,enhance:!1,template:null,allowExpressions:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,contextLines:0,data:Pa(null),helpers:Pa(null),computed:Pa(null),syncComputedChildren:!1,resolveInstanceMembers:!1,warnAboutAmbiguity:!1,adapt:[],isolated:!0,twoway:!0,lazy:!1,noIntro:!1,noOutro:!1,transitionsEnabled:!0,complete:void 0,nestedTransitions:!0,css:null,noCssTransform:!1},Ja={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},Xa="undefined"!=typeof window?window:null,to=Xa?document:null,eo=!!to,no="undefined"!=typeof console&&u(console.warn)&&u(console.warn.apply),io=to?to.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,ro=["o","ms","moz","webkit"],so={};if(no){var ao=["%cRactive.js %c0.10.4 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],oo="You're running Ractive 0.10.4 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://ractive.js.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Qa=function(){if(Na.WELCOME_MESSAGE===!1)return void(Qa=c);var t="WELCOME_MESSAGE"in Na?Na.WELCOME_MESSAGE:oo,e=!!console.groupCollapsed;e&&console.groupCollapsed.apply(console,ao),console.log(t),e&&console.groupEnd(ao),Qa=c},Ga=function(t,e){if(Qa(),o(e[e.length-1])){var n=e.pop(),i=n?n.ractive:null;if(i){var r;i.component&&(r=i.component.name)&&(t="<"+r+"> "+t);var s;(s=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(s)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Wa=function(){console.log.apply(console,arguments)}}else Ga=Wa=Qa=c;var uo="Bad arguments",ho='A function was specified for "%s" %s, but no %s was returned',lo=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://ractive.js.org/integrations/#"+e+"s"},co={number:function(t,e){if(!r(t)||!r(e))return null;t=+t,e=+e;var n=e-t;return n?function(e){return t+e*n}:function(){return t}},array:function(t,e){var n,i;if(!Ka(t)||!Ka(e))return null;var r=[],s=[];for(i=n=Math.min(t.length,e.length);i--;)s[i]=x(t[i],e[i]);for(i=n;i<t.length;i+=1)r[i]=t[i];for(i=n;i<e.length;i+=1)r[i]=e[i];return function(t){for(var e=n;e--;)r[e]=s[e](t);return r}},object:function(e,n){if(!s(e)||!s(n))return null;var i=[],r={},a={},o=function(s){t(e,s)&&(t(n,s)?(i.push(s),a[s]=x(e[s],n[s])||function(){return n[s]}):r[s]=e[s])};for(var u in e)o(u);for(var h in n)t(n,h)&&!t(e,h)&&(r[h]=n[h]);var l=i.length;return function(t){for(var e=l;e--;){var n=i[e];r[n]=a[n](t)}return r}}},fo=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,po=/([^\\](?:\\\\)*)\./,mo=/\\|\./g,vo=/((?:\\)+)\1|\\(\.)/g,go=Function.prototype.bind,yo={early:[],mark:[]},bo={early:[],mark:[]},wo={virtual:!1},xo=function(t){this.deps=[],this.children=[],this.childByKey={},this.links=[],this.bindings=[],t&&(this.parent=t,this.root=t.root)},_o=xo.prototype;_o.addShuffleTask=function(t,e){void 0===e&&(e="early"),yo[e].push(t)},_o.addShuffleRegister=function(t,e){void 0===e&&(e="early"),bo[e].push({model:this,item:t})},_o.downstreamChanged=function(){},_o.findMatches=function(t){var e,n,i=t.length,r=[this],s=function(){var i=t[n];"*"===i?(e=[],r.forEach(function(t){e.push.apply(e,t.getValueChildren(t.get()))})):e=r.map(function(t){return t.joinKey(i)}),r=e};for(n=0;i>n;n+=1)s();return e},_o.getKeypath=function(t){if(t!==this.ractive&&this._link)return this._link.target.getKeypath(t);if(!this.keypath){var e=this.parent&&this.parent.getKeypath(t);this.keypath=e?this.parent.getKeypath(t)+"."+_(this.key):_(this.key)}return this.keypath},_o.getValueChildren=function(t){var e,n=this;Ka(t)?(e=[],"length"in this&&this.length!==t.length&&e.push(this.joinKey("length")),t.forEach(function(t,i){e.push(n.joinKey(i))})):s(t)||u(t)?e=Ra(t).map(function(t){return n.joinKey(t)}):null!=t&&(e=[]);var i=this.computed;return i&&e.push.apply(e,Ra(i).map(function(t){return n.joinKey(t)})),e},_o.getVirtual=function(t){var e=this,n=this.get(t,{virtual:!1});if(s(n)){for(var i=Ka(n)?[]:Pa(null),r=Ra(n),a=r.length;a--;){var o=e.childByKey[r[a]];o?o._link?i[r[a]]=o._link.getVirtual():i[r[a]]=o.getVirtual():i[r[a]]=n[r[a]]}for(a=this.children.length;a--;){var u=e.children[a];u.key in i||!u._link||(i[u.key]=u._link.getVirtual())}if(this.computed)for(r=Ra(this.computed),a=r.length;a--;)i[r[a]]=e.computed[r[a]].get();return i}return n},_o.has=function(t){var e=this;if(this._link)return this._link.has(t);var n=this.get(!1,wo);if(!n)return!1;if(t=A(t),(u(n)||s(n))&&t in n)return!0;var i=this.computed;return i&&t in this.computed?!0:(i=this.root.ractive&&this.root.ractive.computed,i&&Ra(i).forEach(function(t){return i[t].pattern&&i[t].pattern.test(e.getKeypath())?!0:void 0}),!1)},_o.joinAll=function(t,e){for(var n=this,i=0;i<t.length;i+=1){if(e&&e.lastLink===!1&&i+1===t.length&&n.childByKey[t[i]]&&n.childByKey[t[i]]._link)return n.childByKey[t[i]];n=n.joinKey(t[i],e)}return n},_o.notifyUpstream=function(t){for(var e=this,n=this.parent,i=t||[this.key];n;)n.patterns&&n.patterns.forEach(function(t){return t.notify(i.slice())}),i.unshift(n.key),n.links.forEach(function(t){return t.notifiedUpstream(i,e.root)}),n.deps.forEach(function(t){return t.handleChange(i)}),n.downstreamChanged(t),n=n.parent},_o.rebind=function(t,e,n){var i=this;this._link&&this._link.rebind(t,e,!1);for(var r=this.deps.length;r--;)i.deps[r].rebind&&i.deps[r].rebind(t,e,n);for(r=this.links.length;r--;){var s=i.links[r];s.owner&&s.owner._link&&s.relinking(t,n)}for(r=this.children.length;r--;){var a=i.children[r];a.rebind(t?t.joinKey(a.key):void 0,a,n)}for(r=this.bindings.length;r--;)i.bindings[r].rebind(t,e,n)},_o.reference=function(){"refs"in this?this.refs++:this.refs=1},_o.register=function(t){this.deps.push(t)},_o.registerLink=function(t){C(this.links,t)},_o.registerPatternObserver=function(t){(this.patterns||(this.patterns=[])).push(t),this.register(t)},_o.registerTwowayBinding=function(t){this.bindings.push(t)},_o.unreference=function(){"refs"in this&&this.refs--},_o.unregister=function(t){T(this.deps,t)},_o.unregisterLink=function(t){T(this.links,t)},_o.unregisterPatternObserver=function(t){T(this.patterns,t),this.unregister(t)},_o.unregisterTwowayBinding=function(t){T(this.bindings,t)},_o.updateFromBindings=function(t){for(var e=this,n=this.bindings.length;n--;){var i=e.bindings[n].getValue();i!==e.value&&e.set(i)}if(!this.bindings.length){var r=L(this.deps);r&&r.value!==this.value&&this.set(r.value)}t&&(this.children.forEach(K),this.links.forEach(K),this._link&&this._link.updateFromBindings(t))};var ko,Eo=[],Ao={key:"@missing",animate:c,applyValue:c,get:c,getKeypath:function(){return this.key},joinAll:function(){return this},joinKey:function(){return this},mark:c,registerLink:c,shufle:c,set:c,unregisterLink:c};Ao.parent=Ao;var Co=function(e){function n(t,n,i,r){e.call(this,t),this.owner=n,this.target=i,this.key=void 0===r?n.key:r,n&&n.isLink&&(this.sourcePath=n.sourcePath+"."+this.key),i&&i.registerLink(this),t&&(this.isReadonly=t.isReadonly),this.isLink=!0}e&&(n.__proto__=e);var i=n.prototype=Object.create(e&&e.prototype);return i.constructor=n,i.animate=function(t,e,n,i){return this.target.animate(t,e,n,i)},i.applyValue=function(t){this.boundValue&&(this.boundValue=null),this.target.applyValue(t)},i.attach=function(t){var e=We(t,this.key);e?this.relinking(e,!1):this.owner.unlink()},i.detach=function(){this.relinking(Ao,!1)},i.get=function(t,e){void 0===e&&(e={}),t&&($(this),e.unwrap="unwrap"in e?e.unwrap:!0);var n="shouldBind"in e?e.shouldBind:!0;return e.shouldBind=this.mapping&&this.target.parent&&this.target.parent.isRoot,B(this,this.target.get(!1,e),n)},i.getKeypath=function(t){return t&&t!==this.root.ractive?this.target.getKeypath(t):e.prototype.getKeypath.call(this,t)},i.handleChange=function(){this.deps.forEach(W),this.links.forEach(W),this.notifyUpstream()},i.isDetached=function(){return this.virtual&&this.target===Ao},i.joinKey=function(e){if(void 0===e||""===e)return this;if(!t(this.childByKey,e)){var i=new n(this,this,this.target.joinKey(e),e);this.children.push(i),this.childByKey[e]=i}return this.childByKey[e]},i.mark=function(t){this.target.mark(t)},i.marked=function(){this.boundValue&&(this.boundValue=null),this.links.forEach(Y),this.deps.forEach(W)},i.markedAll=function(){this.children.forEach(J),this.marked()},i.notifiedUpstream=function(t,e){var n=this;if(this.links.forEach(function(e){return e.notifiedUpstream(t,n.root)}),this.deps.forEach(W),t&&this.rootLink&&this.root!==e){var i=t.slice(1);i.unshift(this.key),this.notifyUpstream(i)}},i.relinked=function(){this.target.registerLink(this),this.children.forEach(function(t){return t.relinked()})},i.relinking=function(t,e){var n=this;this.rootLink&&this.sourcePath&&(t=ot(this.sourcePath,t,this.target)),t&&this.target!==t&&(this.target&&this.target.unregisterLink(this),this.target=t,this.children.forEach(function(n){n.relinking(t.joinKey(n.key),e)}),this.rootLink&&this.addShuffleTask(function(){n.relinked(),e||(n.markedAll(),n.notifyUpstream())}))},i.set=function(t){this.boundValue&&(this.boundValue=null),this.target.set(t)},i.shuffle=function(t){this.shuffling||(this.target.shuffling?F(this,t,!0):this.target.shuffle?this.target.shuffle(t):this.target.mark())},i.source=function(){return this.target.source?this.target.source():this.target},i.teardown=function(){this._link&&this._link.teardown(),this.target.unregisterLink(this),this.children.forEach(et)},n}(xo);xo.prototype.link=function(t,e,n){var i=this._link||new Co(this.parent,this,t,this.key);return i.implicit=n&&n.implicit,i.mapping=n&&n.mapping,i.sourcePath=e,i.rootLink=!0,this._link&&this._link.relinking(t,!1),this.rebind(i,this,!1),D(),this._link=i,i.markedAll(),this.notifyUpstream(),i},xo.prototype.unlink=function(){if(this._link){var t=this._link;this._link=void 0,t.rebind(this,t,!1),D(),t.teardown(),this.notifyUpstream()}};var So=Pa(null),Oo=4,jo=/^\s+/,No=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}};No.prototype=Error.prototype;var To=function(t,e){var n,i=0;this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=i+t.length+1;return i=e,e},0),this.init&&this.init(t,e);for(var r=[];this.pos<this.str.length&&(n=this.read());)r.push(n);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(r,e):r};To.prototype={read:function(t){var e,n,i=this;t||(t=this.converters);var r=this.pos,s=t.length;for(e=0;s>e;e+=1)if(i.pos=r,n=t[e](i))return n;return null},getContextMessage:function(t,e){var n=this.getLinePos(t),i=n[0],r=n[1];if(-1===this.options.contextLines)return[i,r,e+" at line "+i+" character "+r];var s=this.lines[i-1],a="",o="";if(this.options.contextLines){var u=i-1-this.options.contextLines<0?0:i-1-this.options.contextLines;a=this.lines.slice(u,i-1-u).join("\n").replace(/\t/g,"  "),o=this.lines.slice(i,i+this.options.contextLines).join("\n").replace(/\t/g,"  "),a&&(a+="\n"),o&&(o="\n"+o)}var h=0,l=a+s.replace(/\t/g,function(t,e){return r>e&&(h+=1),"  "})+"\n"+new Array(r+h).join(" ")+"^----"+o;return[i,r,e+" at line "+i+" character "+r+":\n"+l]},getLinePos:function(t){for(var e=this,n=0,i=0;t>=this.lineEnds[n];)i=e.lineEnds[n],n+=1;var r=t-i;return[n+1,r+1,t]},error:function Fp(t){var e=this.getContextMessage(this.pos,t),n=e[0],i=e[1],r=e[2],Fp=new No(r);throw Fp.line=n,Fp.character=i,Fp.shortMessage=t,Fp},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},sp:function(){this.matchPattern(jo)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)},warn:function(t){var e=this.getContextMessage(this.pos,t)[2];g(e)}},To.extend=function(e){var n=this,i=function(t,e){To.call(this,t,e)};i.prototype=Pa(n.prototype);for(var r in e)t(e,r)&&(i.prototype[r]=e[r]);return i.extend=To.extend,i};var Vo,Po=1,Mo=2,Io=3,Ro=4,Bo=5,Ko=6,Lo=7,Do=8,Fo=9,zo=10,Uo=11,$o=13,qo=14,Ho=15,Zo=16,Wo=17,Go=18,Qo=19,Yo=55,Jo=20,Xo=21,tu=22,eu=23,nu=24,iu=25,ru=26,su=27,au=30,ou=31,uu=32,hu=33,lu=34,cu=35,fu=36,du=40,pu=50,mu=51,vu=52,gu=53,yu=54,bu=60,wu=61,xu=62,_u=63,ku=70,Eu=71,Au=72,Cu=73,Su=74,Ou=/^[^\s=]+/,ju=/^\s+/,Nu=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Tu=/[-\/\\^$*+?.()|[\]{}]/g,Vu={},Pu={allowfullscreen:1,async:1,autofocus:1,autoplay:1,checked:1,compact:1,controls:1,declare:1,"default":1,defaultchecked:1,defaultmuted:1,defaultselected:1,defer:1,disabled:1,enabled:1,formnovalidate:1,hidden:1,indeterminate:1,inert:1,ismap:1,itemscope:1,loop:1,multiple:1,muted:1,nohref:1,noresize:1,noshade:1,novalidate:1,nowrap:1,open:1,pauseonexit:1,readonly:1,required:1,reversed:1,scoped:1,seamless:1,selected:1,sortable:1,translate:1,truespeed:1,typemustmatch:1,visible:1},Mu={area:1,base:1,br:1,col:1,command:1,doctype:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},Iu={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Ru=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Bu=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Ra(Iu).join("|")+"));?","g"),Ku=u(String.fromCodePoint),Lu=Ku?String.fromCodePoint:String.fromCharCode,Du=/</g,Fu=/>/g,zu=/&/g,Uu=65533,$u="Expected a JavaScript expression",qu="Expected closing paren",Hu=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Zu=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Wu=/^\\(?:[`'"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Gu=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,Qu=xt('"'),Yu=xt("'"),Ju=/^[^`"\\\$]+?(?:(?=[`"\\\$]))/,Xu=/[\r\n\t\b\f]/g,th=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,eh=/^\s*\.{3}/,nh=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,ih=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*(?:\.(?:[a-zA-Z_$][-\/a-zA-Z_$0-9]*))*/,rh=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,sh=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,ah=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,oh=/^(?:\@\.|\@|~\/|(?:\^\^\/(?:\^\^\/)*(?:\.\.\/)*)|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,uh=/^(key|index|keypath|rootpath|this|global|shared|context|event|node|local|style|helpers|last)/,hh=function(t,e){return function(n){var i;return(i=e(n))?i:n.matchString(t)?(n.sp(),i=Kt(n),i||n.error($u),{s:t,o:i,t:hu}):null}};!function(){var t,e,n,i,r="! ~ + - typeof".split(" ");for(i=Rt,t=0,e=r.length;e>t;t+=1)n=hh(r[t],i),i=n;Vo=i}();var lh,ch=Vo,fh=function(t,e){return function(n){if(n.inUnquotedAttribute&&(">"===t||"/"===t))return e(n);var i,r,s;if(r=e(n),!r)return null;while(!0){if(i=n.pos,n.sp(),!n.matchString(t))return n.pos=i,r;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,r;if(n.sp(),s=e(n),!s)return n.pos=i,r;r={t:fu,s:t,o:[r,s]}}}};!function(){var t,e,n,i,r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");for(i=ch,t=0,e=r.length;e>t;t+=1)n=fh(r[t],i),i=n;lh=i}();var dh=lh,ph=/^[^\s"'>\/=(]+/,mh=/^on/,vh=/^on-([a-zA-Z\*\.$_]((?:[a-zA-Z\*\.$_0-9\-]|\\-)+))$/,gh=/^(?:change|reset|teardown|update|construct|config|init|render|complete|unrender|detach|insert|destruct|attachchild|detachchild)$/,yh=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,bh=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,wh=/^((bind|class)-(([-a-zA-Z0-9_])+))$/,xh={lazy:{t:Cu,v:"l"},twoway:{t:Cu,v:"t"},"no-delegation":{t:Su}},_h=/^[^\s"'=<>\/`]+/,kh=/^[^\s"'=<>@\[\]()]*/,Eh=/^\s+/,Ah=/\\/g,Ch={t:zo,exclude:!0},Sh=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Oh=/^as/i,jh={"else":/^\s*else\s*/,elseif:/^\s*elseif\s+/,then:/^\s*then\s*/,"catch":/^\s*catch\s*/},Nh={"else":bu,elseif:wu,then:xu,"catch":_u},Th={each:vu,"if":pu,"with":yu,unless:mu},Vh=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Ph=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Mh=new RegExp("^("+Ra(Th).join("|")+")\\b"),Ih="<!--",Rh="-->",Bh=/^[ \t\f\r\n]*\r?\n/,Kh=/\r?\n[ \t\f\r\n]*$/,Lh=/[ \t\f\r\n]+/g,Dh=/^[ \t\f\r\n]+/,Fh=/[ \t\f\r\n]+$/,zh=/^(?:\r\n|\r|\n)/,Uh=/(?:\r\n|\r|\n)$/,$h=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,qh=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Hh=/^[a-zA-Z_$][-a-zA-Z0-9_$]*/,Zh=/^[\s\n\/>]/,Wh={exclude:!0},Gh={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]},Qh=/^\s*(elseif|else|then|catch)\s*/,Yh=/^\s*#\s*partial\s+/,Jh={},Xh=[ue,se,de,le,he],tl=[re],el=[ne,pe,_e,Ce],nl=[Se],il={pre:1,script:1,style:1,textarea:1},rl={textarea:!0,script:!0,style:!0,template:!0},sl=To.extend({init:function(t,e){var n=e.tripleDelimiters||Jh.defaults.tripleDelimiters,i=e.staticDelimiters||Jh.defaults.staticDelimiters,r=e.staticTripleDelimiters||Jh.defaults.staticTripleDelimiters;this.standardDelimiters=e.delimiters||Jh.defaults.delimiters,this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Xh},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:tl},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Xh},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:tl}],this.contextLines=e.contextLines||Jh.defaults.contextLines,this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate=Va({},rl,Jh.defaults.interpolate,e.interpolate),e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=e.stripComments!==!1,this.preserveWhitespace=o(e.preserveWhitespace)?!1:e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions,this.textOnlyMode=e.textOnlyMode,this.csp=e.csp,this.allowExpressions=e.allowExpressions,e.expression&&(this.converters=[Kt]),e.attributes&&(this.inTag=!0),this.whiteSpaceElements=Va({},e.preserveWhitespace,il)},postProcess:function(t,e){if(e.expression){var n=Ft(t[0]);return n.e=ht(n.s,n.r.length),n}if(!t.length)return{t:[],v:Oo};if(this.sectionDepth>0&&this.error("A section was left open"),be(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace,this.whiteSpaceElements),this.csp!==!1){var i={};je(t[0].t,i),Ra(i).length&&(t[0].e=i)}return t[0]},converters:[Oe],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}}),al=["delimiters","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","interpolate","preserveWhitespace","sanitize","stripComments","contextLines","allowExpressions","attributes"],ol="Either preparse or use a ractive runtime source that includes the parser. ",ul="Either include a version of Ractive that can parse or convert your computation strings to functions.",hl={fromId:function(t,e){if(!to){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}t&&(t=t.replace(/^#/,""));var n;if(!(n=to.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML},isParsed:function(t){return!h(t)},getParseOptions:function(t){return t.defaults&&(t=t.defaults),al.reduce(function(e,n){return e[n]=t[n],e},{})},parse:function(t,e){Me(Pe,"template",ol);var n=Pe(t,e);return ct(n),n},parseFor:function(t,e){return this.parse(t,this.getParseOptions(e))}},ll=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,e&&e.addChild(this)},cl=ll.prototype;cl.add=function(t){var e=t.isIntro?this.intros:this.outros;t.starting=!0,e.push(t)},cl.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},cl.decrementOutros=function(){this.outroChildren-=1,Ke(this)},cl.decrementTotal=function(){this.totalChildren-=1,Ke(this)},cl.detachNodes=function(){for(var t=this,e=this.detachQueue.length,n=0;e>n;n++)t.detachQueue[n].detach();e=this.children.length;for(var i=0;e>i;i++)t.children[i].detachNodes();this.detachQueue=[]},cl.ready=function(){this.detachQueue.length&&Le(this)},cl.remove=function(t){var e=t.isIntro?this.intros:this.outros;T(e,t),Ke(this)},cl.start=function(){this.children.forEach(function(t){return t.start()}),this.intros.concat(this.outros).forEach(function(t){return t.start()}),this.ready=!0,Ke(this)};var fl,dl={active:function(){return!!fl},start:function(){var t,e=new Promise(function(e){return t=e});return fl={previousBatch:fl,transitionManager:new ll(t,fl&&fl.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],promise:e},e},end:function(){ze(),fl.previousBatch||fl.transitionManager.start(),fl=fl.previousBatch},addFragment:function(t){C(fl.fragments,t)},addFragmentToRoot:function(t){if(fl){for(var e=fl;e.previousBatch;)e=e.previousBatch;C(e.fragments,t)}},addObserver:function(t,e){fl?C(e?fl.deferredObservers:fl.immediateObservers,t):t.dispatch()},registerTransition:function(t){t._manager=fl.transitionManager,fl.transitionManager.add(t)},detachWhenReady:function(t){fl.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(fl){for(n=fl;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()},promise:function(){if(!fl)return Promise.resolve();for(var t=fl;t.previousBatch;)t=t.previousBatch;return t.promise||Promise.resolve()}},pl=[],ml=!1,vl=function(t){this.duration=t.duration,this.step=t.step,this.complete=t.complete,this.easing=t.easing,this.start=performance.now(),this.end=this.start+this.duration,this.running=!0,pl.push(this),ml||requestAnimationFrame(Ue)},gl=vl.prototype;gl.tick=function(t){if(!this.running)return!1;if(t>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;var e=t-this.start,n=this.easing(e/this.duration);return this.step&&this.step(n),!0},gl.stop=function(){this.abort&&this.abort(),this.running=!1};var yl={},bl={},wl=function(e){function n(t,n){e.call(this,t),this.ticker=null,t&&(this.key=A(n),this.isReadonly=t.isReadonly,t.value&&(this.value=t.value[this.key],Ka(this.value)&&(this.length=this.value.length),this.adapt()))}e&&(n.__proto__=e);var s=n.prototype=Object.create(e&&e.prototype);return s.constructor=n,s.adapt=function(){var t=this,e=this.root.adaptors,n=e.length;if(this.rewrap=!1,0!==n){var i=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,r=this.root.ractive,s=this.getKeypath();if(this.wrapper){var a=this.wrapperValue===i?!1:!this.wrapper.reset||this.wrapper.reset(i)===!1;if(!a)return delete this.newWrapperValue,void(this.value=this.wrapper.get());if(this.wrapper.teardown(),delete this.wrapper,delete this.wrapperValue,void 0!==this.value){var o=this.parent.value||this.parent.createBranch(this.key);o[this.key]!==i&&(o[this.key]=i),this.value=i}}var u;for(u=0;n>u;u+=1){var h=e[u];if(h.filter(i,s,r)){t.wrapper=h.wrap(r,i,s,qe(s)),t.wrapperValue=i,t.wrapper.__model=t,t.value=t.wrapper.get();break}}}},s.animate=function(t,e,n,i){var r=this;this.ticker&&this.ticker.stop();var s,a=new Promise(function(t){return s=t});return this.ticker=new vl({duration:n.duration,easing:n.easing,step:function(t){var e=i(t);r.applyValue(e),n.step&&n.step(t,e)},complete:function(){r.applyValue(e),n.complete&&n.complete(e),r.ticker=null,s(e)}}),a.stop=this.ticker.stop,a},s.applyValue=function(t,e){if(void 0===e&&(e=!0),!i(t,this.value)){if(this.boundValue&&(this.boundValue=null),this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.wrapper&&(this.newWrapperValue=this.value),this.adapt();else if(this.wrapper)this.newWrapperValue=t,this.adapt();else{var n=this.parent.value||this.parent.createBranch(this.key);if(!a(n))return void g("Attempted to set a property of a non-object '"+this.getKeypath()+"'");n[this.key]=t,this.value=t,this.adapt()}Ka(t)?(this.length=t.length,this.isArray=!0):this.isArray=!1,this.links.forEach(W),this.children.forEach(G),this.deps.forEach(W),e&&this.notifyUpstream(),this.parent.isArray&&("length"===this.key?this.parent.length=t:this.parent.joinKey("length").mark())}},s.compute=function(t,e){var n=this.computed||(this.computed={});return n[t]?(n[t].signature=Be(this.root.ractive,t,e),n[t].mark()):n[t]=new bl.Computation(this,Be(this.root.ractive,t,e),t),n[t]},s.createBranch=function(t){var e=r(t)?[]:{};return this.applyValue(e,!1),e},s.get=function(t,e){return this._link?this._link.get(t,e):(t&&$(this),e&&e.virtual?this.getVirtual(!1):B(this,(e&&"unwrap"in e?e.unwrap!==!1:t)&&this.wrapper?this.wrapperValue:this.value,!e||e.shouldBind!==!1))},s.joinKey=function(e,i){var r=this;if(this._link)return!i||i.lastLink===!1||void 0!==e&&""!==e?this._link.joinKey(e):this;if(void 0===e||""===e)return this;var s;if(s=t(this.childByKey,e)?this.childByKey[e]:this.computed&&this.computed[e],!s){var a;if(this.isRoot&&this.ractive&&(a=this.ractive.computed[e]))s=this.compute(e,a);else if(!this.isRoot&&this.root.ractive){var o=this.root.ractive.computed;for(var u in o)a=o[u],a.pattern&&a.pattern.test(r.getKeypath()+"."+e)&&(s=r.compute(e,a))}}return s||(s=new n(this,e),this.children.push(s),this.childByKey[e]=s),!s._link||i&&i.lastLink===!1?s:s._link},s.mark=function(t){if(this._link)return this._link.mark(t);var e=this.value,n=this.retrieve();(t||!i(n,e))&&(this.value=n,this.boundValue&&(this.boundValue=null),(e!==n||this.rewrap)&&(this.wrapper&&(this.newWrapperValue=n),this.adapt()),Ka(n)?(this.length=n.length,this.isArray=!0):this.isArray=!1,this.children.forEach(t?Q:G),this.links.forEach(Y),this.deps.forEach(W))},s.merge=function(t,e){var n=I(this.value===t?He(this):this.value,t,e);this.parent.value[this.key]=t,this.shuffle(n,!0)},s.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},s.set=function(t){this.ticker&&this.ticker.stop(),this.applyValue(t)},s.shuffle=function(t,e){F(this,t,!1,e)},s.source=function(){return this},s.teardown=function(){var t=this;this._link&&(this._link.teardown(),this._link=null),this.children.forEach(et),this.wrapper&&this.wrapper.teardown(),this.computed&&Ra(this.computed).forEach(function(e){return t.computed[e].teardown()})},n}(xo),xl={},_l=function(t){function e(e,n){t.call(this,null,"@"+n),this.key="@"+n,this.value=e,this.isRoot=!0,this.root=this,this.adaptors=[]}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getKeypath=function(){return this.key},n.retrieve=function(){return this.value},e}(wl),kl=new _l(xl,"shared"),El=new _l("undefined"!=typeof global?global:window,"global"),Al=function(t){this.context=t},Cl=Al.prototype;Cl.get=function(){return this.context},Cl.getKeypath=function(){return"@context"};var Sl={},Ol=function(t){this.ractive=t};Ol.prototype.findContext=function(){return this.ractive.viewmodel};var jl=Ol.prototype;jl.getContext=Xe,jl.find=jl.findComponent=jl.findAll=jl.findAllComponents=c;var Nl=!1,Tl=/\*/,Vl={virtual:!1},Pl={},Ml="Cannot add to a non-numeric value",Il=Ja.linear,Rl={},Bl={},Kl=function(t){this.event=t,this.method="on"+t};Kl.prototype.fire=function(t,e){var n=Je(t),i=this.method;t[i]&&(e?t[i](n,e):t[i](n)),vn(t,this.event,n,e?[e,t]:[t])};var Ll=function(t){this.hook=new Kl(t),this.inProcess={},this.queue={}},Dl=Ll.prototype;Dl.begin=function(t){this.inProcess[t._guid]=!0},Dl.end=function(t){var e=t.parent;e&&this.inProcess[e._guid]?bn(this.queue,e).push(t):wn(this,t),delete this.inProcess[t._guid]};var Fl={};["construct","config","attachchild","detach","detachchild","insert","complete","reset","render","unrendering","unrender","teardown","destruct","update"].forEach(function(t){Fl[t]=new Kl(t)}),Fl.init=new Ll("init");var zl=Array.prototype,Ul=Fn("push").model,$l=Fn("pop").model,ql=Fn("shift").model,Hl=Fn("unshift").model,Zl=Fn("sort").model,Wl=Fn("splice").model,Gl=Fn("reverse").model,Ql=function(t){function e(e){t.call(this,null,null),this.isRoot=!0,this.root=this,this.value={},this.ractive=e.ractive,this.adaptors=[],this.context=e.context}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getKeypath=function(){return"@context.data"},n.rebound=function(){},e}(wl),Yl=function(t,e){this.fragment=t,this.element=e||Kn(t),this.node=this.element&&this.element.node,this.ractive=t.ractive,this.root=this},Jl=Yl.prototype,Xl={decorators:{},_data:{}};Xl.decorators.get=function(){var t={};return this.element?(this.element.decorators.forEach(function(e){return t[e.name]=e.handle}),t):t},Xl._data.get=function(){return this.model||(this.root.model=new Ql({ractive:this.ractive,context:this.root}))},Jl.add=function(t,e,n){var i=l(e)?+e:1,s=o(e)?e:n;return en($n(this,t,i).map(function(t){var e=t[0],n=t[1],i=e.get();if(!r(n)||!r(i))throw new Error("Cannot add non-numeric value");return[e,i+n]}),s)},Jl.animate=function(t,e,n){var i=qn(this,t).model;return cn(this.ractive,i,e,n)},Jl.get=function(t){if(!t)return this.fragment.findContext().get(!0);var e=qn(this,t),n=e.model;return n?n.get(!0):void 0},Jl.getParent=function(t){var e=this.fragment;return e.context?e=tn(e.parent||t&&e.componentParent):(e=tn(e.parent||t&&e.componentParent),e&&(e=tn(e.parent||t&&e.componentParent))),e&&e!==this.fragment?e.getContext():void 0},Jl.hasListener=function(t,e){var n,i=this.fragment.owner.component?this.fragment.owner:this.element||this.fragment.owner;do{if(n=i.component||i,n.template.t===Lo&&Hn(n,t))return!0;i=i.up&&i.up.owner,i&&i.component&&(i=i.component)}while(i&&e)},Jl.link=function(t,e){var n=qn(this,t).model,i=qn(this,e).model,r=dl.start();return i.link(n,t),dl.end(),r},Jl.listen=function(t,e){var n=this.element;return n.on(t,e),{cancel:function(){n.off(t,e)}}},Jl.observe=function(t,e,n){return void 0===n&&(n={}),s(t)&&(n=e||{}),n.fragment=this.fragment,this.ractive.observe(t,e,n)},Jl.observeOnce=function(t,e,n){return void 0===n&&(n={}),s(t)&&(n=e||{}),n.fragment=this.fragment,this.ractive.observeOnce(t,e,n)},Jl.pop=function(t){return $l(qn(this,t).model,[])},Jl.push=function(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return Ul(qn(this,t).model,e)},Jl.raise=function(t,e){for(var n=[],i=arguments.length-2;i-->0;)n[i]=arguments[i+2];for(var r,s=this.element;s;){if(s.component&&(s=s.component),r=Hn(s,t))return r.fire(r.element.getContext(e||{},!e||"original"in e?{}:{original:{}}),n);s=s.up&&s.up.owner}},Jl.readLink=function(t,e){return this.ractive.readLink(this.resolve(t),e)},Jl.resolve=function(t,e){var n=qn(this,t),i=n.model,r=n.instance;return i?i.getKeypath(e||r):t},Jl.reverse=function(t){return Gl(qn(this,t).model,[])},Jl.set=function(t,e,n){return en($n(this,t,e),n)},Jl.shift=function(t){return ql(qn(this,t).model,[])},Jl.splice=function(t,e,n){for(var i=[],r=arguments.length-3;r-->0;)i[r]=arguments[r+3];return i.unshift(e,n),Wl(qn(this,t).model,i)},Jl.sort=function(t){return Zl(qn(this,t).model,[])},Jl.subtract=function(t,e,n){var i=l(e)?e:1,s=o(e)?e:n;return en($n(this,t,i).map(function(t){var e=t[0],n=t[1],i=e.get();if(!r(n)||!r(i))throw new Error("Cannot add non-numeric value");return[e,i-n]}),s)},Jl.toggle=function(t,e){var n=qn(this,t),i=n.model;return en([[i,!i.get()]],e)},Jl.unlink=function(t){var e=qn(this,t).model,n=dl.start();return e.owner&&e.owner._link&&e.owner.unlink(),dl.end(),n},Jl.unlisten=function(t,e){this.element.off(t,e)},Jl.unshift=function(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return Hl(qn(this,t).model,e)},Jl.update=function(t,e){return zn(this.ractive,qn(this,t).model,e)},Jl.updateModel=function(t,e){var n=qn(this,t),i=n.model,r=dl.start();return i.updateFromBindings(e),dl.end(),r},Jl.isBound=function(){var t=this.getBindingModel(this),e=t.model;return!!e},Jl.getBindingPath=function(t){var e=this.getBindingModel(this),n=e.model,i=e.instance;return n?n.getKeypath(t||i):void 0},Jl.getBinding=function(){var t=this.getBindingModel(this),e=t.model;return e?e.get(!0):void 0},Jl.getBindingModel=function(t){var e=t.element;return{model:e.binding&&e.binding.model,instance:e.up.ractive}},Jl.setBinding=function(t){var e=this.getBindingModel(this),n=e.model;return en([[n,t]])},Object.defineProperties(Jl,Xl),Yl.forRactive=Je,Sl.Context=Yl;var tc,ec,nc,ic,rc,sc,ac,oc,uc,hc=to&&to.querySelector,lc="http://www.w3.org/1999/xhtml",cc="http://www.w3.org/1998/Math/MathML",fc="http://www.w3.org/2000/svg",dc="http://www.w3.org/1999/xlink",pc="http://www.w3.org/XML/1998/namespace",mc="http://www.w3.org/2000/xmlns",vc={html:lc,mathml:cc,svg:fc,xlink:dc,xml:pc,xmlns:mc};if(tc=io?function(t,e,n){return e&&e!==lc?n?to.createElementNS(e,t,n):to.createElementNS(e,t):n?to.createElement(t,n):to.createElement(t)}:function(t,e,n){if(e&&e!==lc)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://ractive.js.org/support/#svgs for more information";return n?to.createElement(t,n):to.createElement(t)},eo){for(nc=tc("div"),ic=["matches","matchesSelector"],uc=function(t){return function(e,n){return e[t](n)}},ac=ic.length;ac--&&!ec;)if(rc=ic[ac],nc[rc])ec=uc(rc);else for(oc=ro.length;oc--;)if(sc=ro[ac]+rc.substr(0,1).toUpperCase()+rc.substring(1),nc[sc]){ec=uc(sc);break}ec||(ec=function(t,e){var n,i;n=t.parentNode,n||(nc.innerHTML="",n=nc,t=t.cloneNode(),nc.appendChild(t));var r=n.querySelectorAll(e);for(i=r.length;i--;)if(r[i]===t)return!0;return!1})}else ec=null;var gc=function(t,e,n,i){this.context=i.context||t,this.callback=n,this.ractive=t,this.keypath=i.keypath,this.options=i,e&&this.resolved(e),u(i.old)&&(this.oldContext=Pa(t),this.oldFn=i.old),i.init!==!1?(this.dirty=!0,this.dispatch()):ai(this),this.dirty=!1},yc=gc.prototype;yc.cancel=function(){this.cancelled=!0,this.model?this.model.unregister(this):this.resolver.unbind(),T(this.ractive._observers,this)},yc.dispatch=function(){this.cancelled||(this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),ai(this,!0),this.dirty=!1)},yc.handleChange=function(){var t=this;if(this.dirty)this.newValue=this.model.get();else{var e=this.model.get();if(i(e,this.oldValue))return;if(this.newValue=e,this.options.strict&&this.newValue===this.oldValue)return;dl.addObserver(this,this.options.defer),this.dirty=!0,this.options.once&&dl.scheduleTask(function(){return t.cancel()})}},yc.rebind=function(t,e){var n=this;return t=ot(this.keypath,t,e),t===this.model?!1:(this.model&&this.model.unregister(this),void(t&&t.addShuffleTask(function(){return n.resolved(t)})))},yc.resolved=function(t){this.model=t,this.oldValue=void 0,this.newValue=t.get(),t.register(this)};var bc=/\*+/g,wc=function(t,e,n,i,r){var s=this;this.context=r.context||t,this.ractive=t,this.baseModel=e,this.keys=n,this.callback=i;var a=n.join("\\.").replace(bc,"(.+)"),o=this.baseKeypath=e.getKeypath(t);this.pattern=new RegExp("^"+(o?o+"\\.":"")+a+"$"),this.recursive=1===n.length&&"**"===n[0],this.recursive&&(this.keys=["*"]),r.old&&(this.oldContext=Pa(t),this.oldFn=r.old),this.oldValues={},this.newValues={},this.defer=r.defer,this.once=r.once,this.strict=r.strict,this.dirty=!1,this.changed=[],this.partial=!1,this.links=r.links;var u=e.findMatches(this.keys);u.forEach(function(t){s.newValues[t.getKeypath(s.ractive)]=t.get()}),r.init!==!1?this.dispatch():oi(this,this.newValues),e.registerPatternObserver(this)},xc=wc.prototype;xc.cancel=function(){this.baseModel.unregisterPatternObserver(this),T(this.ractive._observers,this)},xc.dispatch=function(){var t=this,e=this.newValues;this.newValues={},Ra(e).forEach(function(n){var r=e[n],s=t.oldValues[n];if(!(t.strict&&r===s||i(r,s))){var a=[r,s,n];if(n){var o=t.pattern.exec(n);o&&(a=a.concat(o.slice(1)))}t.callback.apply(t.context,a)}}),oi(this,e,this.partial),this.dirty=!1},xc.notify=function(t){this.changed.push(t)},xc.shuffle=function(t){var e=this;if(Ka(this.baseModel.value)){for(var n=this.baseModel.value.length,i=0;i<t.length;i++)-1!==t[i]&&t[i]!==i&&e.changed.push([i]);for(var r=t.touchedFrom;n>r;r++)e.changed.push([r])}},xc.handleChange=function(){var t=this;if(!this.dirty||this.changed.length){if(this.dirty||(this.newValues={}),this.changed.length){var e=0;if(this.recursive)this.changed.forEach(function(n){var i=t.baseModel.joinAll(n);(!i.isLink||t.links)&&(e++,t.newValues[i.getKeypath(t.ractive)]=i.get())});else{var n=this.baseModel.isRoot?this.changed.map(function(t){return t.map(_).join(".")}):this.changed.map(function(e){return t.baseKeypath+"."+e.map(_).join(".")});this.baseModel.findMatches(this.keys).forEach(function(i){var r=i.getKeypath(t.ractive),s=function(t){return 0===t.indexOf(r)&&(t.length===r.length||"."===t[r.length])||0===r.indexOf(t)&&(t.length===r.length||"."===r[t.length])};n.filter(s).length&&(e++,t.newValues[r]=i.get())})}if(!e)return;this.partial=!0}else this.baseModel.findMatches(this.keys).forEach(function(e){var n=e.getKeypath(t.ractive);t.newValues[n]=e.get()}),this.partial=!1;dl.addObserver(this,this.defer),this.dirty=!0,this.changed.length=0,this.once&&this.cancel()}};var _c=function(t,e,n,i){this.ractive=t,this.model=e,this.keypath=e.getKeypath(),this.callback=n,this.options=i,this.pending=null,e.register(this),i.init!==!1?(this.sliced=[],this.shuffle([]),this.dispatch()):this.sliced=this.slice()},kc=_c.prototype;kc.cancel=function(){this.model.unregister(this),T(this.ractive._observers,this)},kc.dispatch=function(){this.callback(this.pending),this.pending=null,this.options.once&&this.cancel()},kc.handleChange=function(t){this.pending?dl.addObserver(this,this.options.defer):t||(this.shuffle(this.sliced.map(ui)),this.handleChange())},kc.shuffle=function(t){var e,n=this,i=this.slice(),r=[],s=[],a={};t.forEach(function(t,i){a[t]=!0,t!==i&&void 0===e&&(e=i),-1===t&&s.push(n.sliced[i])}),void 0===e&&(e=t.length);for(var o=i.length,u=0;o>u;u+=1)a[u]||r.push(i[u]);this.pending={inserted:r,deleted:s,start:e},this.sliced=i},kc.slice=function(){var t=this.model.get();return Ka(t)?t.slice():[]};var Ec={init:!1,once:!0},Ac=function(t){return t.trim()},Cc=function(t){return""!==t},Sc=Fn("pop").path,Oc=Fn("push").path,jc="/* Ractive.js component styles */",Nc=[],Tc=!1,Vc=null,Pc=null,Mc={extend:function(t,e,n){e.adapt=V(e.adapt,j(n.adapt))},init:function(){}},Ic=/\/\*(?:[\s\S]*?)\*\//g,Rc=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\2).)*\2/gi,Bc=/\0(\d+)/g,Kc=/(?:^|\}|\{)\s*([^\{\}\0]+)\s*(?=\{)/g,Lc=/@keyframes\s+[^\{\}]+\s*\{(?:[^{}]+|\{[^{}]+})*}/gi,Dc=/((?:(?:\[[^\]]+\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,Fc=/^(?:@|\d+%)/,zc=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Uc=function(t){function e(e){t.call(this,e.cssData,"@style"),this.component=e}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.downstreamChanged=function(t,e){if(!this.locked){var n=this.component;n.extensions.forEach(function(n){var i=n._cssModel;i.mark(),i.downstreamChanged(t,e||1)}),e||Oi(n,!0)}},e}(_l),$c=/\{/,qc={name:"css",extend:function(t,e,n,i){i._cssIds=Ni(t),Ma(i,"cssData",{configurable:!0,value:Va(Pa(t.cssData),n.cssData||{})}),Ma(i,"_cssModel",{configurable:!0,value:new Uc(i)}),n.css&&Vi(n,i,e)},init:function(t,e,n){n.css&&g("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n	...\n	css: '/* your css */',\n	...\n});\n\nconst componentInstance = new Component({ ... })\n		")}},Hc={name:"data",extend:function(t,e,n){var i,r;if(n.data&&s(n.data))for(i in n.data)r=n.data[i],r&&o(r)&&(s(r)||Ka(r))&&g("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Ii(e.data,n.data)},init:function(t,e,n){var i=Ii(t.prototype.data,n.data);if(u(i)&&(i=i.call(e)),i&&i.constructor===Object)for(var r in i)if(u(i[r])){var s=i[r];i[r]=R(s,e),i[r]._r_unbound=s}return i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}},Zc={name:"template",extend:function(t,e,n){if("template"in n){var i=n.template;u(i)?e.template=i:e.template=Di(i,e)}},init:function(t,e,n){var i="template"in n?n.template:t.prototype.template;if(i=i||{v:Oo,t:[]},u(i)){var r=i;i=Li(e,r),e._config.template={fn:r,result:i}}i=Di(i,e),e.template=i.t,i.p&&Ui(e.partials,i.p)},reset:function(t){var e=Ki(t);if(e){var n=Di(e,t);return t.template=n.t,Ui(t.partials,n.p,!0),!0}}},Wc=["adaptors","components","computed","decorators","easing","events","helpers","interpolators","partials","transitions"],Gc=["computed","helpers"],Qc=function(t,e){this.name=t,this.useDefaults=e},Yc=Qc.prototype;Yc.extend=function(t,e,n){var i=this.useDefaults?t.defaults:t,r=this.useDefaults?e:e.constructor;this.configure(i,r,n)},Yc.init=function(){},Yc.configure=function(t,e,n){var i=this.name,r=n[i],s=Pa(t[i]);Va(s,r),e[i]=s},Yc.reset=function(t){var e=t[this.name],n=!1;return Ra(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n};var Jc=Wc.map(function(t){var e=Gc.indexOf(t)>-1;return new Qc(t,e)}),Xc={extend:function(t,e,n,i){return Gi("extend",t,e,n,i)},init:function(t,e,n){return Gi("init",t,e,n)},reset:function(t){return sf.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})}},tf={adapt:Mc,computed:Xc,css:qc,data:Hc,helpers:Xc,template:Zc},ef=Ra(Ya),nf=Yi(ef.filter(function(t){return!tf[t]})),rf=Yi(ef.concat(Jc.map(function(t){return t.name}),["on","observe","attributes","cssData","use"])),sf=[].concat(ef.filter(function(t){return!Jc[t]&&!tf[t]}),Jc,tf.template,tf.css),af=/\b_super\b/,of=function(t){this.up=t.up,this.ractive=t.up.ractive,this.template=t.template,this.index=t.index,this.type=t.template.t,this.dirty=!1},uf=of.prototype;uf.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},uf.destroyed=function(){this.fragment&&this.fragment.destroyed()},uf.find=function(){return null},uf.findComponent=function(){return null},uf.findNextNode=function(){return this.up.findNextNode(this)},uf.rebound=function(t){this.fragment&&this.fragment.rebound(t)},uf.shuffled=function(){this.fragment&&this.fragment.shuffled()},uf.valueOf=function(){return this.toString()},of.prototype.findAll=c,of.prototype.findAllComponents=c;var hf=function(t){function e(e){t.call(this,e)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.detach=function(){return this.fragment?this.fragment.detach():Yn()},n.find=function(t){return this.fragment?this.fragment.find(t):void 0},n.findAll=function(t,e){this.fragment&&this.fragment.findAll(t,e)},n.findComponent=function(t){return this.fragment?this.fragment.findComponent(t):void 0},n.findAllComponents=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},n.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},n.toString=function(t){return this.fragment?this.fragment.toString(t):""},e}(of),lf=function(e){function n(t,n){e.call(this,t,n),this.isReadonly=!this.root.ractive.syncComputedChildren,this.dirty=!0,this.isComputed=!0}e&&(n.__proto__=e);var i=n.prototype=Object.create(e&&e.prototype);i.constructor=n;var r={setRoot:{}};return r.setRoot.get=function(){return this.parent.setRoot},i.applyValue=function(t){if(e.prototype.applyValue.call(this,t),!this.isReadonly){for(var n=this.parent;n&&n.shuffle;)n=n.parent;n&&n.dependencies.forEach(G)}this.setRoot&&this.setRoot.set(this.setRoot.value)},i.get=function(t,e){if(t&&$(this),this.dirty){this.dirty=!1;var n=this.parent.get();this.value=n?n[this.key]:void 0,this.wrapper&&(this.newWrapperValue=this.value),this.adapt()}return(e&&"unwrap"in e?e.unwrap!==!1:t)&&this.wrapper?this.wrapperValue:this.value},i.handleChange=function(){this.dirty||(this.dirty=!0,this.boundValue&&(this.boundValue=null),this.links.forEach(Y),this.deps.forEach(W),this.children.forEach(W))},i.joinKey=function(e){if(void 0===e||""===e)return this;if(!t(this.childByKey,e)){var i=new n(this,e);this.children.push(i),this.childByKey[e]=i}return this.childByKey[e]},Object.defineProperties(i,r),n}(wl),cf=function(t){function e(e,n,i){t.call(this,e,i),this.signature=n,this.isReadonly=!this.signature.setter,this.isComputed=!0,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.dirty=!0,this.shuffle=void 0}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);n.constructor=e;var r={setRoot:{}};return r.setRoot.get=function(){return this.signature.setter?this:void 0},n.get=function(t,e){if(t&&$(this),this.dirty){this.dirty=!1;var n=this.value;this.value=this.getValue(),dl.active()?i(n,this.value)||this.notifyUpstream():(dl.start(),i(n,this.value)||this.notifyUpstream(),dl.end()),this.wrapper&&(this.newWrapperValue=this.value),this.adapt()}return B(this,this.wrapper&&(e&&"unwrap"in e?e.unwrap!==!1:t)?this.wrapperValue:this.value,!e||e.shouldBind!==!1)},n.getContext=function(){return this.parent.isRoot?this.root.ractive:this.parent.get(!1,wo)},n.getValue=function(){z();var t;try{t=this.signature.getter.call(this.root.ractive,this.getContext())}catch(e){if(g("Failed to compute "+this.getKeypath()+": "+(e.message||e)),no){console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var n=this.signature;console.error(e.name+": "+e.message+"\n\n"+n.getterString+(n.getterUseStack?"\n\n"+e.stack:"")),console.groupCollapsed&&console.groupEnd()}}var i=U();return this.setDependencies(i),t},n.mark=function(){this.handleChange()},n.rebind=function(t,e){t!==e&&this.handleChange()},n.set=function(t){if(this.isReadonly)throw new Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(t),this.mark()},n.setDependencies=function(t){for(var e=this,n=this.dependencies.length;n--;){var i=e.dependencies[n];~t.indexOf(i)||i.unregister(e)}for(n=t.length;n--;){var r=t[n];~e.dependencies.indexOf(r)||r.register(e)}this.dependencies=t},n.teardown=function(){for(var e=this,n=this.dependencies.length;n--;)e.dependencies[n]&&e.dependencies[n].unregister(e);this.parent.computed[this.key]===this&&delete this.parent.computed[this.key],t.prototype.teardown.call(this)},Object.defineProperties(n,r),e}(wl),ff=cf.prototype,df=lf.prototype;ff.handleChange=df.handleChange,ff.joinKey=df.joinKey,bl.Computation=cf;var pf=function(t){function e(e,n){var i=this;t.call(this,e.ractive.viewmodel,null),this.fragment=e,this.template=n,this.isReadonly=!0,this.isComputed=!0,this.dirty=!0,this.fn=e.ractive.allowExpressions===!1?c:lt(n.s,n.r.length),this.models=this.template.r.map(function(t){return We(i.fragment,t)}),this.dependencies=[],this.shuffle=void 0,this.bubble()}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bubble=function(t){void 0===t&&(t=!0),this.keypath=void 0,t&&this.handleChange()},n.getKeypath=function(){var t=this;return this.template?(this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(e,n){if(n>=t.models.length)return e;var i=t.models[n];return i?i.getKeypath():"@undefined"})),this.keypath):"@undefined"},n.getValue=function(){var t=this;z();var e;try{var n=this.models.map(function(t){return t?t.get(!0):void 0});e=this.fn.apply(this.fragment.ractive,n)}catch(i){g("Failed to compute "+this.getKeypath()+": "+(i.message||i))}var r=U();return this.dependencies.filter(function(t){return!~r.indexOf(t)}).forEach(function(e){e.unregister(t),T(t.dependencies,e)}),r.filter(function(e){return!~t.dependencies.indexOf(e)}).forEach(function(e){e.register(t),t.dependencies.push(e)}),e},n.notifyUpstream=function(){},n.rebind=function(t,e,n){var i=this.models.indexOf(e);~i&&(t=ot(this.template.r[i],t,e),t!==e&&(e.unregister(this),this.models.splice(i,1,t),t&&t.addShuffleRegister(this,"mark"))),this.bubble(!n)},n.rebound=function(t){var e=this;this.models=this.template.r.map(function(t){return We(e.fragment,t)}),t&&this.bubble(!0)},n.retrieve=function(){return this.get()},n.teardown=function(){var e=this;this.fragment=void 0,this.dependencies&&this.dependencies.forEach(function(t){return t.unregister(e)}),t.prototype.teardown.call(this)},n.unreference=function(){t.prototype.unreference.call(this),Ji(this)},n.unregister=function(e){t.prototype.unregister.call(this,e),Ji(this)},n.unregisterLink=function(e){t.prototype.unregisterLink.call(this,e),Ji(this)},e}(wl),mf=pf.prototype,vf=cf.prototype;mf.get=vf.get,mf.handleChange=vf.handleChange,mf.joinKey=vf.joinKey,mf.mark=vf.mark,mf.unbind=c;var gf=function(t){function e(e,n){t.call(this,null,null,null,"@undefined"),this.root=e.ractive.viewmodel,this.template=n,this.rootLink=!0,this.template=n,this.fragment=e,this.rebound()}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},n.rebound=function(){var t,e=this,n=this.fragment,i=this.template,r=this.base=er(n,i);this.proxy&&Xi(this);var s=this.proxy={rebind:function(n,o){o===r?(n=ot(i,n,o),n!==r&&(e.base=r=n)):~(t=a.indexOf(o))&&(n=ot(i.m[t].n,n,o),n!==a[t]&&a.splice(t,1,n||Ao)),n!==o&&(o.unregister(s),n&&n.addShuffleTask(function(){return n.register(s)}))},handleChange:function(){o()}};r.register(s);var a=this.members=i.m.map(function(t){if(h(t))return{get:function(){return t}};var e;return t.t===au?(e=We(n,t.n),e.register(s),e):(e=new pf(n,t),e.register(s),e)}),o=function(){var t=r.joinAll(a.reduce(function(t,e){var n=e.get();return Ka(n)?t.concat(n):(t.push(_(String(n))),t)},[]));t!==e.model&&(e.model=t,e.relinking(t),D(),tr(e))};o()},n.teardown=function(){Xi(this),t.prototype.teardown.call(this)},n.unreference=function(){t.prototype.unreference.call(this),this.deps.length||this.refs||this.teardown()},n.unregister=function(e){t.prototype.unregister.call(this,e),this.deps.length||this.refs||this.teardown()},e}(Co),yf=pf.prototype,bf=gf.prototype;bf.unreference=yf.unreference,bf.unregister=yf.unregister,bf.unregisterLink=yf.unregisterLink;var wf=function(t){function e(e){t.call(this,e),this.fragment=null}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.fragment=new Op({owner:this,template:this.template.f}),this.fragment.aliases=nr(this.template.z,this.up),this.fragment.bind()},n.rebound=function(t){var e=this.fragment.aliases;for(var n in e)e[n].rebound?e[n].rebound(t):(e[n].unreference(),e[n]=0);nr(this.template.z,this.up,e),this.fragment&&this.fragment.rebound(t)},n.render=function(t,e){this.rendered=!0,this.fragment&&this.fragment.render(t,e)},n.unbind=function(){var t=this;for(var e in t.fragment.aliases)t.fragment.aliases[e].unreference();this.fragment.aliases={},this.fragment&&this.fragment.unbind()},n.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},n.update=function(){this.dirty&&(this.dirty=!1,this.fragment.update())},e}(hf),xf=/\s+/,_f=[void 0,"text","search","url","email","hidden","password","search","reset","submit"],kf={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Ef=to?tc("div"):null,Af=!1,Cf=function(t){function e(e){t.call(this,e),this.attributes=[],this.owner=e.owner,this.fragment=new Op({ractive:this.ractive,owner:this,template:this.template}),this.fragment.findNextNode=c,this.dirty=!1}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.fragment.bind()},n.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())},n.destroyed=function(){this.unrender()},n.render=function(){this.node=this.owner.node,this.node&&(this.isSvg=this.node.namespaceURI===fc),Af=!0,this.rendered||this.fragment.render(),this.rendered=!0,this.dirty=!0,this.update(),Af=!1},n.toString=function(){return this.fragment.toString()},n.unbind=function(){this.fragment.unbind()},n.unrender=function(){this.rendered=!1,this.fragment.unrender()},n.update=function(){var t,e,n=this;if(this.dirty){this.dirty=!1;var i=Af;Af=!0,this.fragment.update(),this.rendered&&this.node&&(t=this.fragment.toString(),e=_r(t,this.isSvg),this.attributes.filter(function(t){return kr(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e),Af=i||!1}},e}(of),Sf=/^\s*$/,Of=!1,jf=function(t){function e(e){return t.call(this,e),this.name=e.template.n,this.namespace=null,this.owner=e.owner||e.up.owner||e.element||Kn(e.up),this.element=e.element||(this.owner.attributeByName?this.owner:Kn(e.up)),this.up=e.up,this.ractive=this.up.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.element.attributeByName[this.name]=this,Ka(e.template.f)?(this.fragment=new Op({owner:this,template:e.template.f}),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Mo&&this.fragment.items[0],void(this.interpolator&&(this.interpolator.owner=this))):(this.value=e.template.f,void(0===this.value?this.value="":void 0===this.value&&(this.value=!0)))}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.fragment&&this.fragment.bind()},n.bubble=function(){this.dirty||(this.up.bubble(),this.element.bubble(),this.dirty=!0)},n.firstNode=function(){},n.getString=function(){Of=!0;var t=this.fragment?this.fragment.toString():null!=this.value?""+this.value:"";return Of=!1,t},n.getValue=function(){Of=!0;var t=this.fragment?this.fragment.valueOf():Pu[this.name.toLowerCase()]?!0:this.value;return Of=!1,t},n.render=function(){var t=this.element.node;if(this.node=t,t.namespaceURI&&t.namespaceURI!==vc.html||(this.propertyName=kf[this.name]||this.name,void 0!==t[this.propertyName]&&(this.useProperty=!0),(Pu[this.name.toLowerCase()]||this.isTwoway)&&(this.isBoolean=!0),"value"===this.propertyName&&(t._ractive.value=this.value)),t.namespaceURI){var e=this.name.indexOf(":");-1!==e?this.namespace=Er(t,this.name.slice(0,e)):this.namespace=t.namespaceURI}this.rendered=!0,this.updateDelegate=sr(this),this.updateDelegate()},n.toString=function(){if(xr())return"";Of=!0;var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.style&&!this.inlineClass){if(!(this.rendered||this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-")))return void(this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.style=xe(this.name.substr(6)));if(Pu[this.name.toLowerCase()])return t?h(t)?this.name+'="'+ei(t)+'"':this.name:"";if(null==t)return"";var e=ei(this.getString());return Of=!1,e?this.name+'="'+e+'"':this.name}}},n.unbind=function(){this.fragment&&this.fragment.unbind()},n.unrender=function(){this.updateDelegate(!0),this.rendered=!1},n.update=function(){if(this.dirty){var t;if(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked)this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get());else if("value"===this.name&&(t=this.element.binding)){var e=t.attribute;e&&!e.dirty&&e.rendered&&this.element.binding.attribute.updateDelegate()}}},e}(of),Nf=function(t){function e(e){t.call(this,e),this.owner=e.owner||e.up.owner||Kn(e.up),this.element=this.owner.attributeByName?this.owner:Kn(e.up),this.flag="l"===e.template.v?"lazy":"twoway",this.bubbler=this.owner===this.element?this.element:this.up,this.element.type===Lo&&(Ka(e.template.f)&&(this.fragment=new Op({owner:this,template:e.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Mo&&this.fragment.items[0])}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.fragment&&this.fragment.bind(),Cr(this,this.getValue(),!0)},n.bubble=function(){this.dirty||(this.bubbler.bubble(),this.dirty=!0)},n.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:"f"in this.template?this.template.f:!0},n.render=function(){Cr(this,this.getValue(),!0)},n.toString=function(){return""},n.unbind=function(){this.fragment&&this.fragment.unbind(),delete this.element[this.flag]},n.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()},n.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),Cr(this,this.getValue(),!0))},e}(of),Tf=Pa(of.prototype);Va(Tf,{bind:c,unbind:c,update:c,detach:function(){return Xn(this.node)},firstNode:function(){return this.node},render:function(t){this.rendered=!0,this.node=to.createComment(this.template.c),t.appendChild(this.node)},toString:function(){return"<!-- "+this.template.c+" -->"},unrender:function(t){this.rendered&&t&&this.detach(),this.rendered=!1}}),Sr.prototype=Tf;var Vf=function(t){function e(e){t.call(this,e,"@this"),this.ractive=e}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.joinKey=function(e){var n=t.prototype.joinKey.call(this,e);return"root"!==e&&"parent"!==e||n.isLink?"data"===e?this.ractive.viewmodel:"cssData"===e?this.ractive.constructor._cssModel:n:Nr(n,e)},e}(_l),Pf={"@this":function(t){return t.getRactiveModel()},"@global":function(){return El},"@shared":function(){return kl},"@style":function(t){return t.getRactiveModel().joinKey("cssData")},"@helpers":function(t){return t.getHelpers()}};Pf["@"]=Pf["@this"];var Mf=function(t){function e(e){t.call(this,null,null),this.isRoot=!0,this.root=this,this.ractive=e.ractive,this.value=e.data,this.adaptors=e.adapt,this.adapt()}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.attached=function(t){Tr(this,t)},n.createLink=function(t,e,n,i){for(var r=E(t),s=this;r.length;){var a=r.shift();s=s.childByKey[a]||s.joinKey(a)}return s.link(e,n,i)},n.detached=function(){Vr(this)},n.get=function(t,e){return t&&$(this),e&&e.virtual===!1?this.value:this.getVirtual()},n.getHelpers=function(){return this.helpers||(this.helpers=new _l(this.ractive.helpers,"helpers")),this.helpers},n.getKeypath=function(){return""},n.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new Vf(this.ractive))},n.getValueChildren=function(){var e=t.prototype.getValueChildren.call(this,this.value);return this.children.forEach(function(t){if(t._link){var n=e.indexOf(t);~n?e.splice(n,1,t._link):e.push(t._link)}}),e},n.has=function(e){if("~"===e[0]&&"/"===e[1]&&(e=e.slice(2)),Pf[e]||""===e)return!0;if(t.prototype.has.call(this,e))return!0;var n=A(e);return this.childByKey[n]&&this.childByKey[n]._link?!0:void 0},n.joinKey=function(e,n){if("~"===e[0]&&"/"===e[1]&&(e=e.slice(2)),"@"!==e[0])return t.prototype.joinKey.call(this,e,n);var i=Pf[e];return i?i(this):void 0},n.set=function(t){var e=this.wrapper;if(e){var n=!e.reset||e.reset(t)===!1;n&&(e.teardown(),this.wrapper=null,this.value=t,this.adapt())}else this.value=t,this.adapt();this.deps.forEach(W),this.children.forEach(G)},n.retrieve=function(){return this.wrapper?this.wrapper.get():this.value},n.teardown=function(){t.prototype.teardown.call(this),this.ractiveModel&&this.ractiveModel.teardown()},e}(wl);Mf.prototype.update=c;var If=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Rf=["computed","helpers"],Bf=0,Kf=function(t){function e(e,n){var i=this;t.call(this,e);var r=e.template;this.isAnchor=r.t===Uo,this.type=this.isAnchor?Uo:Ho;var s=r.m,a=r.p||{};if("content"in a||(a.content=r.f||[]),this._partials=a,this.isAnchor)this.name=r.n,this.addChild=Kr,this.removeChild=Lr;else{var o=Pa(n.prototype);this.instance=o,this.name=r.e,(o.el||o.target)&&(g("The <"+this.name+"> component has a default '"+(o.el?"el":"target")+"' property; it has been disregarded"),o.el=o.target=null);for(var u,l=e.up;l;){if(l.owner.type===Zo){u=l.owner.container;break}l=l.parent}o.parent=this.up.ractive,o.container=u||null,o.root=o.parent.root,o.component=this,Mr(this.instance,{partials:a}),r=this.template,s=r.m,Ka(this.mappings)?s=(s||[]).concat(this.mappings):h(this.mappings)&&(s=(s||[]).concat(hl.parse(this.mappings,{attributes:!0}).t)),o._inlinePartials=a}if(this.attributeByName={},this.attributes=[],s){var c=[];s.forEach(function(t){switch(t.t){case $o:case ku:i.attributes.push(Zs({owner:i,up:i.up,template:t}));break;case Au:case Cu:case Eu:break;default:c.push(t)}}),c.length&&this.attributes.push(new Cf({owner:this,up:this.up,template:c}))}this.eventHandlers=[]}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.isAnchor||(this.attributes.forEach(q),this.eventHandlers.forEach(q),Qs(this.instance,{partials:this._partials},{cssIds:this.up.cssIds}),(this.instance.target||this.instance.el)&&(this.extern=!0),this.bound=!0)},n.bubble=function(){this.dirty||(this.dirty=!0,this.up.bubble())},n.destroyed=function(){!this.isAnchor&&this.instance.fragment&&this.instance.fragment.destroyed()},n.detach=function(){return this.isAnchor?this.instance?this.instance.fragment.detach():Yn():this.instance.fragment.detach()},n.find=function(t,e){return this.instance?this.instance.fragment.find(t,e):void 0},n.findAll=function(t,e){this.instance&&this.instance.fragment.findAll(t,e)},n.findComponent=function(t,e){return t&&this.name!==t?this.instance.fragment?this.instance.fragment.findComponent(t,e):void 0:this.instance},n.findAllComponents=function(t,e){var n=e.result;!this.instance||t&&this.name!==t||n.push(this.instance),this.instance&&this.instance.findAllComponents(t,e)},n.firstNode=function(t){return this.instance?this.instance.fragment.firstNode(t):void 0},n.getContext=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.unshift(this.instance),Je.apply(null,t)},n.rebound=function(t){this.attributes.forEach(function(e){return e.rebound(t)})},n.render=function(t,e){this.isAnchor?(this.rendered=!0,this.target=t,Lf.length||(Lf.push(this.ractive),e?(this.occupants=e,zr(),this.occupants=null):dl.scheduleTask(zr,!0))):(this.attributes.forEach(X),this.eventHandlers.forEach(X),this.extern?(this.instance.delegate=!1,this.instance.render()):Js(this.instance,t,null,e),this.rendered=!0)},n.shuffled=function(){t.prototype.shuffled.call(this),this.instance&&!this.instance.isolated&&this.instance.fragment&&this.instance.fragment.shuffled()},n.toString=function(){return this.instance?this.instance.toHTML():void 0},n.unbind=function(){this.isAnchor||(this.bound=!1,this.attributes.forEach(nt),jr(this.instance,function(){return dl.promise()}))},n.unrender=function(t){this.shouldDestroy=t,this.isAnchor?(this.item&&Fr(this,this.item),this.target=null,Lf.length||(Lf.push(this.ractive),dl.scheduleTask(zr,!0))):(this.instance.unrender(),this.instance.el=this.instance.target=null,this.attributes.forEach(it),this.eventHandlers.forEach(it)),this.rendered=!1},n.update=function(){this.dirty=!1,this.instance&&(this.instance.fragment.update(),this.attributes.forEach(rt),this.eventHandlers.forEach(rt))},e}(of),Lf=[],Df={update:c,teardown:c},Ff=function(t){this.owner=t.owner||t.up.owner||Kn(t.up),this.element=this.owner.attributeByName?this.owner:Kn(t.up),this.up=t.up||this.owner.up,this.ractive=this.owner.ractive;var e=this.template=t.template;this.name=e.n,this.node=null,this.handle=null,this.element.decorators.push(this)},zf=Ff.prototype;zf.bind=function(){Ur(this,this.template,this.up,{register:!0})},zf.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble(),this.up.bubble())},zf.destroyed=function(){this.handle&&(this.handle.teardown(),this.handle=null),this.shouldDestroy=!0},zf.handleChange=function(){this.bubble()},zf.rebind=function(t,e,n){var i=this.models.indexOf(e);~i&&(t=ot(this.template.f.r[i],t,e),t!==e&&(e.unregister(this),this.models.splice(i,1,t),t&&t.addShuffleRegister(this,"mark"),n||this.bubble()))},zf.rebound=function(t){qr(this,this.template),Ur(this,this.template,this.up,{register:!0}),t&&this.bubble()},zf.render=function(){var t=this;this.shouldDestroy=!1,this.handle&&this.unrender(),dl.scheduleTask(function(){if(t.element.rendered){var e=b("decorators",t.ractive,t.name);if(!e)return v(lo(t.name,"decorator")),void(t.handle=Df);t.node=t.element.node;var n;if(t.fn&&(n=t.models.map(function(t){return t?t.get():void 0}),n=t.fn.apply(t.ractive,n)),t.handle=e.apply(t.ractive,[t.node].concat(n)),!t.handle||!t.handle.teardown)throw new Error("The '"+t.name+"' decorator must return an object with a teardown method");t.shouldDestroy&&t.destroyed()}},!0)},zf.toString=function(){return""},zf.unbind=function(){qr(this,this.template)},zf.unrender=function(t){t&&!this.element.rendered||!this.handle||(this.handle.teardown(),this.handle=null)},zf.update=function(){var t=this.handle;if(!this.dirty)return void(t&&t.invalidate&&dl.scheduleTask(function(){return t.invalidate()},!0));if(this.dirty=!1,t)if(t.update){var e=this.models.map(function(t){return t&&t.get()});t.update.apply(this.ractive,this.fn.apply(this.ractive,e))}else this.unrender(),this.render()};var Uf=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e}(of),$f=Uf.prototype;$f.bind=$f.render=$f.teardown=$f.unbind=$f.unrender=$f.update=c;var qf=function(t,e){void 0===e&&(e="value"),this.element=t,this.ractive=t.ractive,this.attribute=t.attributeByName[e];var n=this.attribute.interpolator;n.twowayBinding=this;var i=n.model;if(i.isReadonly&&!i.setRoot){var r=i.getKeypath().replace(/^@/,"");return y("Cannot use two-way binding on <"+t.name+"> element: "+r+" is read-only. To suppress this warning use <"+t.name+" twoway='false'...>",{ractive:this.ractive}),!1}this.attribute.isTwoway=!0,this.model=i;var s=i.get();this.wasUndefined=void 0===s,void 0===s&&this.getInitialValue&&(s=this.getInitialValue(),i.set(s)),this.lastVal(!0,s);var a=Kn(this.element,!1,"form");a&&(this.resetValue=s,a.formBindings.push(this))},Hf=qf.prototype;Hf.bind=function(){this.model.registerTwowayBinding(this)},Hf.handleChange=function(){var t=this,e=this.getValue();this.lastVal()!==e&&(dl.start(),this.attribute.locked=!0,this.model.set(e),this.lastVal(!0,e),this.model.get()!==e?this.attribute.locked=!1:dl.scheduleTask(function(){return t.attribute.locked=!1}),dl.end())},Hf.lastVal=function(t,e){return t?void(this.lastValue=e):this.lastValue},Hf.rebind=function(t,e){var n=this;this.model&&this.model===e&&e.unregisterTwowayBinding(this),t&&(this.model=t,dl.scheduleTask(function(){return t.registerTwowayBinding(n)}))},Hf.rebound=function(){this.model&&this.model.unregisterTwowayBinding(this),this.model=this.attribute.interpolator.model,this.model.registerTwowayBinding(this)},Hf.render=function(){this.node=this.element.node,this.node._ractive.binding=this,this.rendered=!0},Hf.setFromNode=function(t){this.model.set(t.value)},Hf.unbind=function(){this.model.unregisterTwowayBinding(this)},qf.prototype.unrender=c;var Zf=function(t){function e(e){t.call(this,e,"checked")}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.render=function(){t.prototype.render.call(this),this.element.on("change",Hr),this.node.attachEvent&&this.element.on("click",Hr)},n.unrender=function(){this.element.off("change",Hr),this.element.off("click",Hr)},n.getInitialValue=function(){return!!this.element.getAttribute("checked")},n.getValue=function(){return this.node.checked},n.setFromNode=function(t){this.model.set(t.checked)},e}(qf),Wf=function(t,e,n){var i=this;this.model=e,this.hash=t,this.getValue=function(){return i.value=n.call(i),i.value},this.bindings=[]},Gf=Wf.prototype;Gf.add=function(t){this.bindings.push(t)},Gf.bind=function(){this.value=this.model.get(),this.model.registerTwowayBinding(this),this.bound=!0},Gf.remove=function(t){T(this.bindings,t),this.bindings.length||this.unbind()},Gf.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1,delete this.model[this.hash]},Wf.prototype.rebind=qf.prototype.rebind;var Qf=[].push,Yf=function(t){function e(e){if(t.call(this,e,"name"),this.checkboxName=!0,this.group=Zr("checkboxes",this.model,Wr),this.group.add(this),this.noInitialValue&&(this.group.noInitialValue=!0),this.group.noInitialValue&&this.element.getAttribute("checked")){var n=this.model.get(),i=this.element.getAttribute("value");this.arrayContains(n,i)||Qf.call(n,i)}}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.group.bound||this.group.bind()},n.getInitialValue=function(){return this.noInitialValue=!0,[]},n.getValue=function(){return this.group.value},n.handleChange=function(){this.isChecked=this.element.node.checked,this.group.value=this.model.get();var e=this.element.getAttribute("value");this.isChecked&&!this.arrayContains(this.group.value,e)?this.group.value.push(e):!this.isChecked&&this.arrayContains(this.group.value,e)&&this.removeFromArray(this.group.value,e),this.lastValue=null,t.prototype.handleChange.call(this)},n.render=function(){t.prototype.render.call(this);var e=this.node,n=this.model.get(),i=this.element.getAttribute("value");Ka(n)?this.isChecked=this.arrayContains(n,i):this.isChecked=this.element.compare(n,i),e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.isChecked,this.element.on("change",Hr),this.node.attachEvent&&this.element.on("click",Hr)},n.setFromNode=function(t){if(this.group.bindings.forEach(function(t){return t.wasUndefined=!0}),t.checked){var e=this.group.getValue();e.push(this.element.getAttribute("value")),this.group.model.set(e)}},n.unbind=function(){this.group.remove(this)},n.unrender=function(){var t=this.element;t.off("change",Hr),t.off("click",Hr)},n.arrayContains=function(t,e){for(var n=this,i=t.length;i--;)if(n.element.compare(e,t[i]))return!0;return!1},n.removeFromArray=function(t,e){var n=this;if(t)for(var i=t.length;i--;)n.element.compare(e,t[i])&&t.splice(i,1)},e}(qf),Jf=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},n.getValue=function(){return this.element.node.innerHTML},n.render=function(){t.prototype.render.call(this);var e=this.element;e.on("change",Hr),e.on("blur",Hr),this.ractive.lazy||(e.on("input",Hr),this.node.attachEvent&&e.on("keyup",Hr))},n.setFromNode=function(t){this.model.set(t.innerHTML)},n.unrender=function(){var t=this.element;t.off("blur",Hr),t.off("change",Hr),t.off("input",Hr),t.off("keyup",Hr)},e}(qf),Xf=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){return""},n.getValue=function(){return this.node.value},n.render=function(){t.prototype.render.call(this);var e=this.ractive.lazy,n=!1,i=this.element;"lazy"in this.element&&(e=this.element.lazy),r(e)&&(n=+e,e=!1),this.handler=n?Qr(n):Hr;var s=this.node;i.on("change",Hr),"file"!==s.type&&(e||(i.on("input",this.handler),s.attachEvent&&i.on("keyup",this.handler)),i.on("blur",Gr))},n.unrender=function(){var t=this.element;this.rendered=!1,t.off("change",Hr),t.off("input",this.handler),t.off("keyup",this.handler),t.off("blur",Gr)},e}(qf),td=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){return void 0},n.getValue=function(){return this.node.files},n.render=function(){this.element.lazy=!1,t.prototype.render.call(this)},n.setFromNode=function(t){this.model.set(t.files)},e}(Xf),ed=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},n.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],i=0;e>i;i+=1){var r=t[i];if(r.selected){var s=r._ractive?r._ractive.value:r.value;n.push(s)}}return n},n.handleChange=function(){var e=this.attribute,n=e.getValue(),i=this.getValue();return void 0!==n&&O(i,n)||t.prototype.handleChange.call(this),this},n.render=function(){t.prototype.render.call(this),this.element.on("change",Hr),void 0===this.model.get()&&this.handleChange()},n.setFromNode=function(t){for(var e=Yr(t),n=e.length,i=new Array(n);n--;){var r=e[n];i[n]=r._ractive?r._ractive.value:r.value}this.model.set(i)},n.unrender=function(){this.element.off("change",Hr)},e}(qf),nd=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getInitialValue=function(){return void 0},n.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},n.setFromNode=function(t){var e=parseFloat(t.value);isNaN(e)||this.model.set(e)},e}(Xf),id={},rd=function(t){function e(e){t.call(this,e,"checked"),this.siblings=Jr(this.ractive._guid+this.element.getAttribute("name")),this.siblings.push(this)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.getValue=function(){return this.node.checked},n.handleChange=function(){dl.start(),this.siblings.forEach(function(t){t.model.set(t.getValue())}),dl.end()},n.render=function(){t.prototype.render.call(this),this.element.on("change",Hr),this.node.attachEvent&&this.element.on("click",Hr)},n.setFromNode=function(t){this.model.set(t.checked)},n.unbind=function(){T(this.siblings,this)},n.unrender=function(){this.element.off("change",Hr),this.element.off("click",Hr)},e}(qf),sd=function(t){function e(e){var n=this;t.call(this,e,"name"),this.group=Zr("radioname",this.model,Xr),this.group.add(this),e.checked&&(this.group.value=this.getValue()),this.attribute.interpolator.pathChanged=function(){return n.updateName()}}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){this.group.bound||this.group.bind()},n.getInitialValue=function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},n.getValue=function(){return this.element.getAttribute("value")},n.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),t.prototype.handleChange.call(this)),this.updateName()},n.lastVal=function(t,e){return this.group?t?void(this.group.lastValue=e):this.group.lastValue:void 0},n.rebind=function(e,n){t.prototype.rebind.call(this,e,n),this.updateName()},n.rebound=function(e){t.prototype.rebound.call(this,e),this.updateName()},n.render=function(){t.prototype.render.call(this);var e=this.node;this.updateName(),e.checked=this.element.compare(this.model.get(),this.element.getAttribute("value")),this.element.on("change",Hr),e.attachEvent&&this.element.on("click",Hr)},n.setFromNode=function(t){t.checked&&this.group.model.set(this.element.getAttribute("value"))},n.unbind=function(){this.group.remove(this)},n.unrender=function(){var t=this.element;t.off("change",Hr),t.off("click",Hr)},n.updateName=function(){this.node&&(this.node.name="{{"+this.model.getKeypath()+"}}")},e}(qf),ad=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.forceUpdate=function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,dl.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e))},n.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n,i,r=e;r--;){var s=t[r];if(s.getAttribute("selected")){s.getAttribute("disabled")||(n=s.getAttribute("value")),i=!0;break}}if(!i)for(;++r<e;)if(!t[r].getAttribute("disabled")){n=t[r].getAttribute("value");break}return void 0!==n&&(this.element.attributeByName.value.value=n),n}}},n.getValue=function(){var t,e=this.node.options,n=e.length;for(t=0;n>t;t+=1){var i=e[t];if(e[t].selected&&!e[t].disabled)return i._ractive?i._ractive.value:i.value}},n.render=function(){t.prototype.render.call(this),this.element.on("change",Hr)},n.setFromNode=function(t){var e=Yr(t)[0];this.model.set(e._ractive?e._ractive.value:e.value)},n.unrender=function(){this.element.off("change",Hr)},e}(qf),od=/;\s*$/,ud=function(t){function e(e){var n=this;if(t.call(this,e),this.name=e.template.e.toLowerCase(),this.parent=Kn(this.up,!1),this.parent&&"option"===this.parent.name)throw new Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[],this.attributeByName={};for(var i,r,s,a,o,u,l,c,f=this.template.m,d=f&&f.length||0,p=0;d>p;p++)if(l=f[p],l.g)(n.statics||(n.statics={}))[l.n]=h(l.f)?l.f:l.n;else switch(l.t){case $o:case Cu:case Eu:case ku:case Au:s=Zs({owner:n,up:n.up,template:l}),r=l.n,i=i||(i=n.attributes=[]),"value"===r?a=s:"name"===r?u=s:"class"===r?o=s:i.push(s);break;case Su:n.delegate=!1;break;default:(c||(c=[])).push(l)}a&&i.push(a),u&&i.push(u),o&&i.unshift(o),c&&((i||(this.attributes=[])).push(new Cf({owner:this,up:this.up,template:c})),c=[]),e.template.f&&!e.deferContent&&(this.fragment=new Op({template:e.template.f,owner:this,cssIds:null})),this.binding=null}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){var t=this.attributes;if(t){t.binding=!0;for(var e=t.length,n=0;e>n;n++)t[n].bind();t.binding=!1}this.fragment&&this.fragment.bind(),this.binding?this.binding.bind():this.recreateTwowayBinding()},n.createTwowayBinding=function(){if("twoway"in this?this.twoway:this.ractive.twoway){var t=es(this);if(t){var e=new t(this);if(e&&e.model)return e}}},n.destroyed=function(){this.attributes&&this.attributes.forEach(Z),this.fragment&&this.fragment.destroyed()},n.detach=function(){return this.rendered||this.destroyed(),Xn(this.node)},n.find=function(t,e){return this.node&&ec(this.node,t)?this.node:this.fragment?this.fragment.find(t,e):void 0},n.findAll=function(t,e){var n=e.result;ec(this.node,t)&&n.push(this.node),this.fragment&&this.fragment.findAll(t,e)},n.findNextNode=function(){return null},n.firstNode=function(){return this.node},n.getAttribute=function(t){if(this.statics&&t in this.statics)return this.statics[t];var e=this.attributeByName[t];return e?e.getValue():void 0},n.getContext=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.fragment?(n=this.fragment).getContext.apply(n,t):(this.ctx||(this.ctx=new Yl(this.up,this)),t.unshift(Pa(this.ctx)),Va.apply(null,t));var n},n.off=function(t,e,n){void 0===n&&(n=!1);var i=this.up.delegate,r=this.listeners&&this.listeners[t];if(r)if(T(r,e),i){var s=(i.listeners||(i.listeners=[]))&&(i.listeners[t]||(i.listeners[t]=[]));s.refs&&!--s.refs&&i.off(t,ss,!0)}else if(this.rendered){var a=this.node,o=a.addEventListener,u=a.removeEventListener;r.length?r.length&&!r.refs&&n&&(u.call(a,t,os,!0),o.call(a,t,os,!1)):u.call(a,t,os,n)}},n.on=function(t,e,n){void 0===n&&(n=!1);var i=this.up.delegate,r=(this.listeners||(this.listeners={}))[t]||(this.listeners[t]=[]);if(i){var s=(i.listeners||(i.listeners=[]))&&i.listeners[t]||(i.listeners[t]=[]);s.refs?s.refs++:(s.refs=0,i.on(t,ss,!0),s.refs++)}else if(this.rendered){var a=this.node,o=a.addEventListener,u=a.removeEventListener;r.length?r.length&&!r.refs&&n&&(u.call(a,t,os,!1),o.call(a,t,os,!0)):o.call(a,t,os,n)}C(this.listeners[t],e)},n.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender()),(this.binding=this.createTwowayBinding())&&(this.binding.bind(),this.rendered&&this.binding.render())},n.rebound=function(e){t.prototype.rebound.call(this,e),this.attributes&&this.attributes.forEach(function(t){return t.rebound(e)}),this.binding&&this.binding.rebound(e)},n.render=function(t,e){var n=this;this.namespace=rs(this);var i,r=!1;if(e)for(var s;s=e.shift();){if(s.nodeName.toUpperCase()===n.template.e.toUpperCase()&&s.namespaceURI===n.namespace){n.node=i=s,r=!0;break}Xn(s)}if(!r&&this.node&&(i=this.node,t.appendChild(i),r=!0),!i){var a=this.template.e;i=tc(this.namespace===lc?a.toLowerCase():a,this.namespace,this.getAttribute("is")),this.node=i}this.statics&&Ra(this.statics).forEach(function(t){i.setAttribute(t,n.statics[t])}),Ma(i,"_ractive",{value:{proxy:this},configurable:!0}),r&&this.foundNode&&this.foundNode(i);var o=this.intro;if(o&&o.shouldFire("intro")&&(o.isIntro=!0,o.isOutro=!1,dl.registerTransition(o)),this.fragment){var u=r?P(i.childNodes):void 0;this.fragment.render(i,u),u&&u.forEach(Xn)}if(r){this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(i);for(var h=i.attributes.length;h--;){var l=i.attributes[h].name;l in n.attributeByName||n.statics&&l in n.statics||i.removeAttribute(l)}}if(this.up.cssIds&&i.setAttribute("data-ractive-css",this.up.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),this.attributes)for(var c=this.attributes.length,f=0;c>f;f++)n.attributes[f].render();if(this.binding&&this.binding.render(),!this.up.delegate&&this.listeners){var d=this.listeners;for(var p in d)d[p]&&d[p].length&&n.node.addEventListener(p,os,!!d[p].refs)}r||t.appendChild(i),this.rendered=!0},n.toString=function(){var t=this,e=this.template.e,n=this.attributes&&this.attributes.map(is).join("")||"";this.statics&&Ra(this.statics).forEach(function(e){return"class"!==e&&"style"!==e&&(n=" "+e+'="'+t.statics[e]+'"'+n)}),"option"===this.name&&this.isSelected()&&(n+=" selected"),"input"===this.name&&ns(this)&&(n+=" checked");var i=this.statics?this.statics.style:void 0,r=this.statics?this.statics["class"]:void 0;this.attributes&&this.attributes.forEach(function(t){"class"===t.name?r=(r||"")+(r?" ":"")+ei(t.getString()):"style"===t.name?(i=(i||"")+(i?" ":"")+ei(t.getString()),i&&!od.test(i)&&(i+=";")):t.style?i=(i||"")+(i?" ":"")+t.style+": "+ei(t.getString())+";":t.inlineClass&&t.getValue()&&(r=(r||"")+(r?" ":"")+t.inlineClass)}),void 0!==i&&(n=" style"+(i?'="'+i+'"':"")+n),void 0!==r&&(n=" class"+(r?'="'+r+'"':"")+n),this.up.cssIds&&(n+=' data-ractive-css="'+this.up.cssIds.map(function(t){return"{"+t+"}"}).join(" ")+'"');var s="<"+e+n+">";return Mu[this.name.toLowerCase()]?s:("textarea"===this.name&&void 0!==this.getAttribute("value")?s+=gt(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(s+=this.getAttribute("value")||""),this.fragment&&(s+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e))),s+="</"+e+">")},n.unbind=function(){var t=this.attributes;if(t){t.unbinding=!0;for(var e=t.length,n=0;e>n;n++)t[n].unbind();t.unbinding=!1}this.binding&&this.binding.unbind(),this.fragment&&this.fragment.unbind()},n.unrender=function(t){if(this.rendered){this.rendered=!1;var e=this.intro;e&&e.complete&&e.complete(),"option"===this.name?this.detach():t&&dl.detachWhenReady(this);var n=this.outro;n&&n.shouldFire("outro")&&(n.isIntro=!1,n.isOutro=!0,dl.registerTransition(n)),this.fragment&&this.fragment.unrender(),this.binding&&this.binding.unrender()}},n.update=function(){if(this.dirty){this.dirty=!1;var t=this.attributes;if(t)for(var e=t.length,n=0;e>n;n++)t[n].update();this.fragment&&this.fragment.update()}},e}(hf),hd=null!==Xa?Xa.UIEvent:null,ld=function(t){function e(e){t.call(this,e),this.formBindings=[]}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.render=function(e,n){t.prototype.render.call(this,e,n),this.on("reset",us)},n.unrender=function(e){this.off("reset",us),t.prototype.unrender.call(this,e)},e}(ud),cd={animationend:1,animationiteration:1,animationstart:1,transitioncancel:1,transitionend:1,transitionstart:1,transitionrun:1},fd=function(t,e){-1!==t.indexOf("*")&&d('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+t+'="..."/> is not valid'),this.name=t,this.owner=e,this.handler=null},dd=fd.prototype;dd.bind=function(){},dd.render=function(t){var e=this,n=this.name,i=function(){var i=e.owner.node,r="on"+n;(r in i||r in Xa||cd[n])&&e.owner.on(n,e.handler=function(e){return t.fire({node:i,original:e,event:e,name:n})})};"load"!==n?dl.scheduleTask(i,!0):i()},dd.unbind=function(){},dd.unrender=function(){this.handler&&this.owner.off(this.name,this.handler)};var pd=function(t,e,n,i){this.eventPlugin=t,this.owner=e,this.name=n,this.handler=null,this.args=i},md=pd.prototype;md.bind=function(){},md.render=function(t){var e=this;dl.scheduleTask(function(){var n=e.owner.node;e.handler=e.eventPlugin.apply(e.owner.ractive,[n,function(i){return void 0===i&&(i={}),i.original?i.event=i.original:i.original=i.event,i.name=e.name,i.node=i.node||n,t.fire(i)}].concat(e.args||[]))})},md.unbind=function(){},md.unrender=function(){this.handler.teardown()};var vd=function(t,e){this.component=t,this.name=e,this.handler=null},gd=vd.prototype;gd.bind=function(t){var e=this.component.instance;this.handler=e.on(this.name,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n[0]instanceof Yl){var r=n.shift();r.component=e,t.fire(r,n)}else t.fire({},n);return!1})},gd.render=function(){},gd.unbind=function(){this.handler.cancel()},gd.unrender=function(){};var yd=/^(event|arguments|@node|@event|@context)(\..+)?$/,bd=/^\$(\d+)(\..+)?$/,wd=function(t){this.owner=t.owner||t.up.owner||Kn(t.up),this.element=this.owner.attributeByName?this.owner:Kn(t.up,!0),this.template=t.template,this.up=t.up,this.ractive=t.up.ractive,this.events=[]},xd=wd.prototype;xd.bind=function(){var t=this;if(this.element.type===Ho||this.element.type===Uo)this.template.n.forEach(function(e){t.events.push(new vd(t.element,e))});else{var e;if(e=this.template.a){var n=e.r.map(function(e){var n=We(t.up,e);return n?n.get():void 0});try{e=lt(e.s,n.length).apply(null,n)}catch(i){e=null,g("Failed to compute args for event on-"+this.template.n.join("- ")+": "+(i.message||i))}}this.template.n.forEach(function(n){var i=b("events",t.ractive,n);i?t.events.push(new pd(i,t.element,n,e)):t.events.push(new fd(n,t.element))})}this.models=null,C(this.element.events||(this.element.events=[]),this),Ur(this,this.template),this.fn||(this.action=this.template.f),this.events.forEach(function(e){return e.bind(t)})},xd.destroyed=function(){this.events.forEach(function(t){return t.unrender()})},xd.fire=function(t,e){var n=this;void 0===e&&(e=[]);var i=t instanceof Yl&&t.refire?t:this.element.getContext(t);if(this.fn){var r=[],s=$r(this,this.template,this.up,{specialRef:function(t){var e=yd.exec(t);if(e)return{special:e[1],keys:e[2]?E(e[2].substr(1)):[]};var n=bd.exec(t);return n?{special:"arguments",keys:[n[1]-1].concat(n[2]?E(n[2].substr(1)):[])}:void 0}});s&&s.forEach(function(s){if(!s)return r.push(void 0);if(s.special){var a,o=s.special;"@node"===o?a=n.element.node:"@event"===o?a=t&&t.event:"event"===o?(y("The event reference available to event directives is deprecated and should be replaced with @context and @event"),a=i):a="@context"===o?i:e;for(var u=s.keys.slice();a&&u.length;)a=a[u.shift()];return r.push(a)}return s.wrapper?r.push(s.wrapperValue):void r.push(s.get())});var a=this.ractive,o=a.event;a.event=i;var u=this.fn.apply(a,r),l=u.pop();if(l===!1){var c=t?t.original:void 0;c?(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation()):y("handler '"+this.template.n.join(" ")+"' returned false, but there is no event available to cancel")}else!u.length&&Ka(l)&&h(l[0])&&(l=vn(this.ractive,l.shift(),i,l));return a.event=o,l}return vn(this.ractive,this.action,i,e)},xd.handleChange=function(){},xd.render=function(){var t=this;this.events.forEach(function(e){return e.render(t)})},xd.toString=function(){return""},xd.unbind=function(){T(this.element.events,this),this.events.forEach(function(t){return t.unbind()})},xd.unrender=function(){this.events.forEach(function(t){return t.unrender()})},wd.prototype.update=c,wd.prototype.rebound=c;var _d=function(t){function e(e){t.call(this,e),e.owner&&(this.parent=e.owner),this.isStatic=!!e.template.s,this.model=null,this.dirty=!1}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){var t=this.template.y?this.template.y.containerFragment:this.containerFragment||this.up,e=er(t,this.template);if(e){var n=e.get();if(this.isStatic)return this.model={get:function(){return n}},void e.unreference();e.register(this),this.model=e}},n.handleChange=function(){this.bubble()},n.rebind=function(t,e,n){return this.isStatic?void 0:(t=ot(this.template,t,e,this.up),t===this.model?!1:(this.model&&this.model.unregister(this),t&&t.addShuffleRegister(this,"mark"),this.model=t,n||this.handleChange(),!0))},n.rebound=function(t){this.model&&(this.model.rebound?this.model.rebound(t):(this.model.unregister(this),this.bind()),t&&this.bubble()),this.fragment&&this.fragment.rebound(t)},n.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0)},e}(of),kd=cs.prototype=Object.create(hf.prototype);Va(kd,_d.prototype,{constructor:cs});var Ed=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bubble=function(){this.owner&&this.owner.bubble(),t.prototype.bubble.call(this)},n.detach=function(){return Xn(this.node)},n.firstNode=function(){return this.node},n.getString=function(){return this.model?ti(this.model.get()):""},n.render=function(t,e){if(!xr()){var n=this.value=this.getString();this.rendered=!0,ls(this,t,e,n)}},n.toString=function(t){var e=this.getString();return t?gt(e):e},n.unrender=function(t){t&&this.detach(),this.rendered=!1},n.update=function(){if(this.dirty&&(this.dirty=!1,this.rendered)){var t=this.getString();t!==this.value&&(this.node.data=this.value=t)}},n.valueOf=function(){return this.model?this.model.get():void 0},e}(_d),Ad=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.render=function(e,n){t.prototype.render.call(this,e,n),this.node.defaultValue=this.node.value},n.compare=function(t,e){var n=this.getAttribute("value-comparator");if(n){if(u(n))return n(t,e);if(t&&e)return t[n]==e[n]}return t==e},e}(ud),Cd={"true":!0,"false":!1,"null":null,undefined:void 0},Sd=new RegExp("^(?:"+Ra(Cd).join("|")+")"),Od=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,jd=/\$\{([^\}]+)\}/g,Nd=/^\$\{([^\}]+)\}/,Td=/^\s*$/,Vd=To.extend({init:function(t,e){this.values=e.values,this.sp()},postProcess:function(t){return 1===t.length&&Td.test(this.leftover)?{value:t[0].v}:null},converters:[function(e){if(!e.values)return null;var n=e.matchPattern(Nd);return n&&t(e.values,n)?{v:e.values[n]}:void 0},function(t){var e=t.matchPattern(Sd);return e?{v:Cd[e]}:void 0},function(t){var e=t.matchPattern(Od);return e?{v:+e}:void 0},function(t){var e=_t(t),n=t.values;return e&&n?{v:e.v.replace(jd,function(t,e){return e in n?n[e]:e})}:e},function(t){if(!t.matchString("{"))return null;var e={};if(t.sp(),t.matchString("}"))return{v:e};for(var n;n=fs(t);){if(e[n.key]=n.value,t.sp(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){if(!t.matchString("["))return null;var e=[];if(t.sp(),t.matchString("]"))return{v:e};for(var n;n=t.read();){if(e.push(n.v),t.sp(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.sp()}return null}]}),Pd=function(t){function e(e){t.call(this,e),this.name=e.template.n,this.owner=e.owner||e.up.owner||e.element||Kn(e.up),this.element=e.element||(this.owner.attributeByName?this.owner:Kn(e.up)),this.up=this.element.up,this.ractive=this.up.ractive,this.element.attributeByName[this.name]=this,this.value=e.template.f}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){var t=this.template.f,e=this.element.instance.viewmodel;if(0===t)e.joinKey(this.name).set(!0);else if(h(t)){var n=ds(t);e.joinKey(this.name).set(n?n.value:t)}else Ka(t)&&ps(this,!0)},n.rebound=function(t){if(this.boundFragment&&this.boundFragment.rebound(t),this.link){this.model=er(this.up,this.template.f[0]);var e=this.element.instance.viewmodel.joinAll(E(this.name));e.link(this.model,this.name,{mapping:!0})}},n.render=function(){},n.unbind=function(){this.model&&this.model.unregister(this),this.boundFragment&&this.boundFragment.unbind(),this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()},n.unrender=function(){},n.update=function(){this.dirty&&(this.dirty=!1,this.boundFragment&&this.boundFragment.update())},e}(of),Md=function(t){function e(e){var n=e.template;n.a||(n.a={}),void 0!==n.a.value||"disabled"in n.a||(n.a.value=n.f||""),t.call(this,e),this.select=Kn(this.parent||this.up,!1,"select")}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){if(!this.select)return void t.prototype.bind.call(this);var e=this.attributeByName.selected;if(e&&void 0!==this.select.getAttribute("value")){var n=this.attributes.indexOf(e);this.attributes.splice(n,1),delete this.attributeByName.selected}t.prototype.bind.call(this),this.select.options.push(this)},n.bubble=function(){var e=this.getAttribute("value");this.node&&this.node.value!==e&&(this.node._ractive.value=e),t.prototype.bubble.call(this)},n.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():"value"===t&&this.fragment?this.fragment.valueOf():void 0},n.isSelected=function(){var t=this,e=this.getAttribute("value");if(void 0===e||!this.select)return!1;var n=this.select.getAttribute("value");if(this.select.compare(n,e))return!0;if(this.select.getAttribute("multiple")&&Ka(n))for(var i=n.length;i--;)if(t.select.compare(n[i],e))return!0},n.render=function(e,n){t.prototype.render.call(this,e,n),this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))},n.unbind=function(){t.prototype.unbind.call(this),this.select&&T(this.select.options,this)},e}(ud),Id=ws.prototype=Pa(cs.prototype);Va(Id,{constructor:ws,bind:function(){var t=this.template;if(this.yielder){if(this.container=this.up.ractive,this.component=this.container.component,this.containerFragment=this.up,!this.component)return this.fragment=new Op({owner:this,template:[]}),void this.fragment.bind();this.up=this.component.up,t.r||t.x||t.tx||(this.refName="content")}this.macro?this.fn=this.macro:(this.refName||(this.refName=t.r),this.refName&&ks(this,this.refName),this.partial||this.fn||(cs.prototype.bind.call(this),this.model&&ks(this,this.model.get()))),this.partial||this.fn||y("Could not find template for partial '"+this.name+"'"),xs(this,this.partial||[]),this.fn&&Cs(this),this.fragment.bind()},bubble:function(){this.dirty||(this.dirty=!0,this.yielder?this.containerFragment.bubble():this.up.bubble())},findNextNode:function(){return(this.containerFragment||this.up).findNextNode(this)},handleChange:function(){this.dirtyTemplate=!0,this.externalChange=!0,this.bubble()},rebound:function(t){var e=this,n=this.fragment&&this.fragment.aliases;if(n){for(var i in n)n[i].rebound?n[i].rebound(t):(n[i].unreference(),n[i]=0);this.template.z&&nr(this.template.z,this.containerFragment||this.up,n)}this._attrs&&Ra(this._attrs).forEach(function(n){return e._attrs[n].rebound(t)}),cs.prototype.rebound.call(this,t)},refreshAttrs:function(){var t=this;Ra(this._attrs).forEach(function(e){t.handle.attributes[e]=!t._attrs[e].items.length||t._attrs[e].valueOf()})},resetTemplate:function(){var t=this;if(this.fn&&this.proxy){if(!this.externalChange)return this.partial=this.fnTemplate,!0;u(this.proxy.teardown)&&this.proxy.teardown(),this.fn=this.proxy=null}var e=this.partial;return this.partial=null,this.refName&&(this.partial=ms(this.ractive,this.refName,this.up)),!this.partial&&this.model&&ks(this,this.model.get()),this.fn||e!==this.partial?(this.unbindAttrs(),this.fn?(Cs(this),u(this.proxy.render)&&dl.scheduleTask(function(){return t.proxy.render()})):this.partial||y("Could not find template for partial '"+this.name+"'"),!0):!1},render:function(t,e){this.fn&&this.fn._cssDef&&!this.fn._cssDef.applied&&gi(),this.fragment.render(t,e),this.proxy&&u(this.proxy.render)&&this.proxy.render()},unbind:function(){this.fragment.unbind(),this.fragment.aliases=null,this.unbindAttrs(),cs.prototype.unbind.call(this)},unbindAttrs:function(){var t=this;this._attrs&&Ra(this._attrs).forEach(function(e){t._attrs[e].unbind()})},unrender:function(t){this.proxy&&u(this.proxy.teardown)&&this.proxy.teardown(),this.fragment.unrender(t)},update:function(){var t=this,e=this.proxy;this.updating=1,this.dirtyAttrs&&(this.dirtyAttrs=!1,Ra(this._attrs).forEach(function(e){return t._attrs[e].update()}),this.refreshAttrs(),u(e.update)&&e.update(this.handle.attributes)),this.dirtyTemplate&&(this.dirtyTemplate=!1,this.resetTemplate()&&this.fragment.resetTemplate(this.partial||[])),this.dirty&&(this.dirty=!1,e&&u(e.invalidate)&&e.invalidate(),this.fragment.update()),this.externalChange=!1,this.updating=0}});var Rd="extra-attributes",Bd=function(t,e,n){this.value=this.key=t,this.context=e,this.isReadonly=this.isKey=!0,this.deps=[],this.links=[],this.children=[],this.instance=n},Kd=Bd.prototype;Kd.applyValue=function(t){t!==this.value&&(this.value=this.key=t,this.deps.forEach(W),this.links.forEach(W),this.children.forEach(function(t){t.applyValue(t.context.getKeypath(t.instance))}))},Kd.destroyed=function(){this.upstream&&this.upstream.unregisterChild(this)},Kd.get=function(t){return t&&$(this),A(this.value)},Kd.getKeypath=function(){return A(this.value)},Kd.has=function(){return!1},Kd.rebind=function(t,e){for(var n=this,i=this.deps.length;i--;)n.deps[i].rebind(t,e,!1);for(i=this.links.length;i--;)n.links[i].relinking(t,!1)},Kd.register=function(t){this.deps.push(t)},Kd.registerChild=function(t){C(this.children,t),t.upstream=this},Kd.registerLink=function(t){C(this.links,t)},Kd.unregister=function(t){T(this.deps,t)},Kd.unregisterChild=function(t){T(this.children,t)},Kd.unregisterLink=function(t){T(this.links,t)},Bd.prototype.reference=c,Bd.prototype.unreference=c;var Ld=/^"(\\"|[^"])+"$/,Dd=function(t){this.parent=t.owner.up,this.up=this,this.owner=t.owner,this.ractive=this.parent.ractive,this.delegate=this.ractive.delegate!==!1&&(this.parent.delegate||Os(this.parent)),this.delegate&&this.delegate.delegate===!1&&(this.delegate=!1),this.delegate&&(this.delegate.delegate=this.delegate),this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.context=null,this.rendered=!1,this.iterations=[],this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.previousIterations=null,this.isArray=!1},Fd=Dd.prototype;Fd.bind=function(t){var e=this;this.context=t,this.bound=!0;var n=t.get(),i=this.aliases=this.owner.template.z&&this.owner.template.z.slice(),r=i&&i.find(function(t){return"shuffle"===t.n});r&&r.x&&r.x.x&&("true"===r.x.x.s?this.shuffler=!0:Ld.test(r.x.x.s)&&(this.shuffler=E(r.x.x.s.slice(1,-1)))),this.shuffler&&(this.values=Ts(this,this.shuffler)),this.source&&this.source.model.unbind(this.source);var a=t.isComputed&&i&&i.find(function(t){return"source"===t.n});if(a&&a.x&&a.x.r){var o=er(this,a.x);this.source={handleChange:function(){},rebind:function(t){this.model.unregister(this),this.model=t,t.register(this)}},this.source.model=o,o.register(this.source)}if(this.isArray=Ka(n)){this.iterations=[];for(var u=this.length=n.length,h=0;u>h;h+=1)e.iterations[h]=e.createIteration(h,h)}else if(s(n)){if(this.isArray=!1,this.indexRef){var l=this.indexRef.split(",");this.keyRef=l[0],this.indexRef=l[1]}var c=Ra(n);this.length=c.length,this.iterations=c.map(function(t,n){return e.createIteration(t,n)})}return this},Fd.bubble=function(t){this.bubbled||(this.bubbled=[]),this.bubbled.push(t),this.rebounding||this.owner.bubble()},Fd.createIteration=function(t,e){var n=new Op({owner:this,template:this.template});return n.isIteration=!0,n.delegate=this.delegate,this.aliases&&(n.aliases={}),Ns(this,n,t,e),n.bind(n.context)},Fd.destroyed=function(){for(var t=this,e=this.iterations.length,n=0;e>n;n++)t.iterations[n].destroyed();this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},Fd.detach=function(){var t=Yn();return this.iterations.forEach(function(e){return t.appendChild(e.detach())}),t},Fd.find=function(t,e){return M(this.iterations,function(n){return n.find(t,e)})},Fd.findAll=function(t,e){return this.iterations.forEach(function(n){return n.findAll(t,e)})},Fd.findAllComponents=function(t,e){return this.iterations.forEach(function(n){return n.findAllComponents(t,e)})},Fd.findComponent=function(t,e){return M(this.iterations,function(n){return n.findComponent(t,e)})},Fd.findContext=function(){return this.context},Fd.findNextNode=function(t){var e=this;if(t.index<this.iterations.length-1)for(var n=t.index+1;n<this.iterations.length;n++){var i=e.iterations[n].firstNode(!0);if(i)return i}return this.owner.findNextNode()},Fd.firstNode=function(t){return this.iterations[0]?this.iterations[0].firstNode(t):null},Fd.getLast=function(){return this.lastModel||(this.lastModel=new Bd(this.length-1))},Fd.rebind=function(t){var e=this;this.context=t,this.source||this.iterations.forEach(function(t){Ns(e,t,t.key,t.index)})},Fd.rebound=function(t){var e=this;this.context=this.owner.model,this.iterations.forEach(function(n,i){n.context=Vs(e,n,i),n.rebound(t)})},Fd.render=function(t,e){var n=this.iterations;if(n)for(var i=n.length,r=0;i>r;r++)n[r].render(t,e);this.rendered=!0},Fd.shuffle=function(t,e){var n=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice()),this.pendingNewIndices||(this.pendingNewIndices=[]),this.pendingNewIndices.push(t);var i=[];t.forEach(function(t,r){if(-1!==t){var s=n.iterations[r];i[t]=s,t!==r&&s&&(s.dirty=!0,e&&(s.shouldRebind=1))}}),this.iterations=i,e||this.bubble()},Fd.shuffled=function(){this.iterations.forEach(tt)},Fd.toString=function(t){return this.iterations?this.iterations.map(t?at:st).join(""):""},Fd.unbind=function(){var t=this;this.bound=!1,this.source&&this.source.model.unregister(this.source);for(var e=this.iterations.length,n=0;e>n;n++)t.iterations[n].unbind();return this},Fd.unrender=function(t){for(var e=this,n=this.iterations.length,i=0;n>i;i++)e.iterations[i].unrender(t);if(this.pendingNewIndices&&this.previousIterations){n=this.previousIterations.length;for(var r=0;n>r;r++)e.previousIterations[r].unrender(t)}this.rendered=!1},Fd.update=function(){var t=this;if(this.pendingNewIndices)return this.bubbled.length=0,void this.updatePostShuffle();if(!this.updating){if(this.updating=!0,this.shuffler){var e=Ts(this,this.shuffler);this.shuffle(I(this.values,e),!0),this.updatePostShuffle()}else{for(var n=this.iterations.length,i=0;n>i;i++){var r=t.iterations[i];r&&r.idxModel&&r.idxModel.applyValue(i)}var a,o,u,h=this.context.get(),l=this.isArray,c=!0;if(this.isArray=Ka(h)){if(this.source){this.rebounding=1;var f=this.source.model.get();this.iterations.forEach(function(e,n){n<h.length&&e.lastValue!==h[n]&&~(u=f.indexOf(h[n]))&&(Ns(t,e,n,n),e.rebound(!0))}),this.rebounding=0}l&&(c=!1,this.iterations.length>h.length&&(a=this.iterations.splice(h.length)))}else if(s(h)&&!l)for(c=!1,a=[],o={},u=this.iterations.length;u--;){var d=t.iterations[u];d.key in h?o[d.key]=!0:(t.iterations.splice(u,1),a.push(d))}var p=Ka(h)?h.length:s(h)?Ra(h).length:0;if(this.length=p,this.updateLast(),c&&(a=this.iterations,this.iterations=[]),a){n=a.length;for(var m=0;n>m;m++)a[m].unbind().unrender(!0)}if(!c&&this.isArray&&this.bubbled&&this.bubbled.length){var v=this.bubbled;this.bubbled=[],n=v.length;for(var g=0;n>g;g++)t.iterations[v[g]]&&t.iterations[v[g]].update()}else{n=this.iterations.length;for(var y=0;n>y;y++)t.iterations[y].update()}var b,w;if(p>this.iterations.length){if(b=this.rendered?Yn():null,u=this.iterations.length,Ka(h))for(;u<h.length;)w=t.createIteration(u,u),t.iterations.push(w),t.rendered&&w.render(b),u+=1;else if(s(h)){if(this.indexRef&&!this.keyRef){var x=this.indexRef.split(",");this.keyRef=x[0],this.indexRef=x[1]}Ra(h).forEach(function(e){o&&e in o||(w=t.createIteration(e,u),t.iterations.push(w),t.rendered&&w.render(b),u+=1)})}if(this.rendered){var _=this.parent.findParentNode(),k=this.parent.findNextNode(this.owner);_.insertBefore(b,k)}}}this.updating=!1}},Fd.updateLast=function(){this.lastModel&&this.lastModel.applyValue(this.length-1)},Fd.updatePostShuffle=function(){var t=this,e=this.pendingNewIndices[0],n=this.rendered?this.parent.findParentNode():null,i=n&&this.owner.findNextNode(),r=n?Yn():null;this.pendingNewIndices.slice(1).forEach(function(t){e.forEach(function(n,i){e[i]=t[n]})});var s,a,u,h,l,c,f=this.length=this.context.get().length,d=this.previousIterations,p=this.iterations,m=this.context.get(),v={},g=new Array(e.length);for(e.forEach(function(t,e){return g[t]=e}),this.updateLast(),s=u=0;f>s;)a=e[u],h=null,c=!1,-1===a?(d[u].unbind().unrender(!0),d[u++]=0):a>s?(h=e[u+1],a>=h?(v[a]=d[u],d[u++]=null):(h=v[s]||d[g[s]],d[g[s]]=null,l=d[js(u,e,d)],l=l&&n&&l.firstNode()||i,h?(c=t.source&&h.lastValue!==m[s],Ns(t,h,s,s),n&&n.insertBefore(h.detach(),l)):(h=p[s]=t.createIteration(s,s),n&&(h.render(r),n.insertBefore(r,l))),s++)):(h=p[s],l=d[js(u,e,d)],l=l&&n&&l.firstNode()||i,h?(u!==s||v[s])&&(c=t.source&&h.lastValue!==m[s],Ns(t,h,s,s),v[s]&&n&&n.insertBefore(h.detach(),l)):(h=p[s]=t.createIteration(s,s),n&&(h.render(r),n.insertBefore(r,l))),s++,d[u++]=null),h&&o(h)&&((h.shouldRebind||c)&&(h.rebound(c),h.shouldRebind=0),h.update(),h.shuffled());for(var y=d.length,b=0;y>b;b++)d[b]&&d[b].unbind().unrender(!0);this.shuffler&&(this.values=Ts(this,this.shuffler)),this.pendingNewIndices=null,this.previousIterations=null},Dd.prototype.getContext=Xe,Dd.prototype.getKeypath=Gs;var zd=function(t){function e(e){t.call(this,e),this.sectionType=e.template.n||null,this.templateSectionType=this.sectionType,this.subordinate=1===e.template.l,this.fragment=null}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bind=function(){t.prototype.bind.call(this),this.subordinate&&(this.sibling=this.up.items[this.up.items.indexOf(this)-1],this.sibling.nextSibling=this),this.model?(this.dirty=!0,this.update()):!this.sectionType||this.sectionType!==mu||this.sibling&&this.sibling.isTruthy()||(this.fragment=new Op({owner:this,template:this.template.f}).bind())},n.detach=function(){var e=this.fragment||this.detached;return e?e.detach():t.prototype.detach.call(this)},n.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var t=this.model?this.model.isRoot?this.model.value:this.model.get():void 0;return!(!t||this.templateSectionType!==yu&&Ps(t))},n.rebind=function(e,n,i){t.prototype.rebind.call(this,e,n,i)&&this.fragment&&this.sectionType!==pu&&this.sectionType!==mu&&this.fragment.rebind(e)},n.rebound=function(e){this.model&&(this.model.rebound?this.model.rebound(e):(t.prototype.unbind.call(this),t.prototype.bind.call(this),(this.sectionType===gu||this.sectionType===yu||this.sectionType===vu)&&this.fragment&&this.fragment.rebind(this.model),e&&this.bubble())),this.fragment&&this.fragment.rebound(e)},n.render=function(t,e){this.rendered=!0,this.fragment&&this.fragment.render(t,e)},n.shuffle=function(t){this.fragment&&this.sectionType===vu&&this.fragment.shuffle(t)},n.unbind=function(){t.prototype.unbind.call(this),this.fragment&&this.fragment.unbind()},n.unrender=function(t){this.rendered&&this.fragment&&this.fragment.unrender(t),this.rendered=!1},n.update=function(){var t=this;if(this.dirty&&(this.fragment&&this.sectionType!==pu&&this.sectionType!==mu&&(this.fragment.context=this.model),this.model||this.sectionType===mu)){this.dirty=!1;var e=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,n=!this.subordinate||!this.sibling.isTruthy(),i=this.sectionType;(null===this.sectionType||null===this.templateSectionType)&&(this.sectionType=Ms(e,this.template.i)),i&&i!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null);var r,s=this.sectionType===vu||this.sectionType===gu||n&&(this.sectionType===mu?!this.isTruthy():this.isTruthy());if(s)if(this.fragment||(this.fragment=this.detached),this.fragment)this.detached&&(Is(this,this.fragment),this.detached=!1,this.rendered=!0),this.fragment.bound||this.fragment.bind(this.model),this.fragment.update();else if(this.sectionType===vu)r=new Dd({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model);else{var a=this.sectionType!==pu&&this.sectionType!==mu?this.model:null;r=new Op({owner:this,template:this.template.f}).bind(a)}else this.fragment&&this.rendered?Nl!==!0?this.fragment.unbind().unrender(!0):(this.unrender(!1),this.detached=this.fragment,dl.promise().then(function(){t.detached&&t.detach()})):this.fragment&&this.fragment.unbind(),this.fragment=null;r&&(this.rendered&&Is(this,r),this.fragment=r),this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update())}},e}(cs),Ud=function(t){function e(e){t.call(this,e),this.options=[]}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.foundNode=function(t){if(this.binding){var e=Yr(t);e.length>0&&(this.selectedOptions=e)}},n.render=function(e,n){t.prototype.render.call(this,e,n),this.sync();for(var i=this.node,r=i.options.length;r--;)i.options[r].defaultSelected=i.options[r].selected;this.rendered=!0},n.sync=function(){var t=this,e=this.node;if(e){var n=P(e.options);if(this.selectedOptions)return n.forEach(function(e){t.selectedOptions.indexOf(e)>=0?e.selected=!0:e.selected=!1}),this.binding.setFromNode(e),void delete this.selectedOptions;var i=this.getAttribute("value"),r=this.getAttribute("multiple"),s=r&&Ka(i);if(void 0!==i){var a;n.forEach(function(e){var n=e._ractive?e._ractive.value:e.value,o=r?s&&t.valueContains(i,n):t.compare(i,n);o&&(a=!0),e.selected=o}),a||r||this.binding&&this.binding.forceUpdate()}else this.binding&&this.binding.forceUpdate&&this.binding.forceUpdate()}},n.valueContains=function(t,e){for(var n=this,i=t.length;i--;)if(n.compare(e,t[i]))return!0},n.compare=function(t,e){var n=this.getAttribute("value-comparator");if(n){if(u(n))return n(e,t);if(e&&t)return e[n]==t[n]}return e==t},n.update=function(){var e=this.dirty;t.prototype.update.call(this),e&&this.sync()},e}(ud),$d=function(t){function e(e){var n=e.template;e.deferContent=!0,t.call(this,e),this.attributeByName.value||(n.f&&ts({template:n})?(this.attributes||(this.attributes=[])).push(Zs({owner:this,template:{t:$o,f:n.f,n:"value"},up:this.up})):this.fragment=new Op({owner:this,cssIds:null,template:n.f}))}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.bubble=function(){var t=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&dl.scheduleTask(function(){t.dirty=!1,t.node.value=t.fragment.toString()}),this.up.bubble())},e}(Ad),qd=function(t){function e(e){t.call(this,e),this.type=Po}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.detach=function(){return Xn(this.node)},n.firstNode=function(){return this.node},n.render=function(t,e){xr()||(this.rendered=!0,ls(this,t,e,this.template))},n.toString=function(t){return t?gt(this.template):this.template},n.unrender=function(t){this.rendered&&t&&this.detach(),this.rendered=!1},n.valueOf=function(){return this.template},e}(of),Hd=qd.prototype;Hd.bind=Hd.unbind=Hd.update=c;var Zd,Wd="hidden";if(to){var Gd;if(Wd in to)Gd="";else for(var Qd=ro.length;Qd--;){var Yd=ro[Qd];if(Wd=Yd+"Hidden",Wd in to){Gd=Yd;break}}void 0!==Gd?(to.addEventListener(Gd+"visibilitychange",Rs),Rs()):("onfocusout"in to?(to.addEventListener("focusout",Bs),to.addEventListener("focusin",Ks)):(Xa.addEventListener("pagehide",Bs),Xa.addEventListener("blur",Bs),Xa.addEventListener("pageshow",Ks),Xa.addEventListener("focus",Ks)),Zd=!0)}var Jd;if(eo){var Xd={},tp=tc("div").style;Jd=function(t){if(!Xd[t]){var e=xe(t);if(void 0!==tp[t])Xd[t]=e;else for(var n=ro.length;n--;){var i="-"+ro[n]+"-"+e;if(void 0!==tp[i]){Xd[t]=i;break}}}return Xd[t]}}else Jd=null;var ep,np=Jd,ip=new RegExp("^(?:"+ro.join("|")+")([A-Z])");if(eo){var rp,sp,ap,op,up,hp,lp=tc("div").style,cp=function(t){return t},fp={},dp={};void 0!==lp.transition?(rp="transition",sp="transitionend",ap=!0):void 0!==lp.webkitTransition?(rp="webkitTransition",sp="webkitTransitionEnd",ap=!0):ap=!1,rp&&(op=rp+"Duration",up=rp+"Property",hp=rp+"TimingFunction"),ep=function(t,e,n,i,r){setTimeout(function(){function s(){clearTimeout(d)}function a(){c&&f&&(t.unregisterCompleteHandler(s),t.ractive.fire(t.name+":end",t.node,t.isIntro),r())}function o(t){var e=i.indexOf(t.propertyName);-1!==e&&i.splice(e,1),i.length||(clearTimeout(d),l())}function l(){m[up]=v.property,m[hp]=v.duration,m[op]=v.timing,t.node.removeEventListener(sp,o,!1),f=!0,a()}var c,f,d,p=(t.node.namespaceURI||"")+t.node.tagName,m=t.node.style,v={property:m[up],timing:m[hp],duration:m[op]};t.node.addEventListener(sp,o,!1),d=setTimeout(function(){i=[],l()},n.duration+(n.delay||0)+50),t.registerCompleteHandler(s),m[up]=i.join(",");var b=Ls(n.easing||"linear");m[hp]=b;var w=m[hp]===b;m[op]=n.duration/1e3+"s",setTimeout(function(){for(var r,s,l,d,v,b=i.length,_=null,k=[];b--;){if(l=i[b],r=p+l,w&&ap&&!dp[r]){var E=m[l];m[l]=e[l],r in fp||(_=t.getStyle(l),fp[r]=t.getStyle(l)!=e[l],dp[r]=!fp[r],dp[r]&&(m[l]=E))}w&&ap&&!dp[r]||(null===_&&(_=t.getStyle(l)),s=i.indexOf(l),-1===s?g("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(s,1),d=/[^\d]*$/.exec(_)[0],v=x(parseFloat(_),parseFloat(e[l])),v?k.push({name:l,interpolator:v,suffix:d}):m[l]=e[l],_=null)}if(k.length){var A;h(n.easing)?(A=t.ractive.easing[n.easing],A||(y(lo(n.easing,"easing")),A=cp)):A=u(n.easing)?n.easing:cp,new vl({duration:n.duration,easing:A,step:function(t){for(var e=k.length;e--;){var n=k[e];m[n.name]=n.interpolator(t)+n.suffix}},complete:function(){c=!0,a()}})}else c=!0;i.length?m[up]=i.join(","):(m[up]="none",t.node.removeEventListener(sp,o,!1),f=!0,a())},0)},n.delay||0)}}else ep=null;var pp=ep,mp=Xa&&Xa.getComputedStyle,vp=Promise.resolve(),gp={t0:"intro-outro",t1:"intro",t2:"outro"},yp=function(t){this.owner=t.owner||t.up.owner||Kn(t.up),this.element=this.owner.attributeByName?this.owner:Kn(t.up),this.ractive=this.owner.ractive,this.template=t.template,this.up=t.up,this.options=t,this.onComplete=[]},bp=yp.prototype;bp.animateStyle=function(t,e,n){var i=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!Zd)return this.setStyle(t,e),vp;var r;return h(t)?(r={},r[t]=e):(r=t,n=e),new Promise(function(t){if(!n.duration)return i.setStyle(r),void t();for(var e=Ra(r),s=[],a=mp(i.node),o=e.length;o--;){var u=e[o],h=np(u),l=a[np(u)],c=i.node.style[h];h in i.originals||(i.originals[h]=i.node.style[h]),i.node.style[h]=r[u],i.targets[h]=i.node.style[h],i.node.style[h]=c,l!=r[u]&&(s.push(h),r[h]=r[u],i.node.style[h]=l)}return s.length?void pp(i,r,n,s,t):void t()})},bp.bind=function(){var t=this.options,e=t.template&&t.template.v;e&&(("t0"===e||"t1"===e)&&(this.element.intro=this),("t0"===e||"t2"===e)&&(this.element.outro=this),this.eventName=gp[e]);var n=this.owner.ractive;this.name=t.name||t.template.n,t.params&&(this.params=t.params),u(this.name)?(this._fn=this.name,this.name=this._fn.name):this._fn=b("transitions",n,this.name),this._fn||y(lo(this.name,"transition"),{ractive:n}),Ur(this,t.template)},bp.getParams=function(){if(this.params)return this.params;if(this.fn){var t=$r(this,this.template,this.up).map(function(t){return t?t.get():void 0});return this.fn.apply(this.ractive,t)}},bp.getStyle=function(t){var e=mp(this.node);if(h(t))return e[np(t)];if(!Ka(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var n={},i=t.length;i--;){var r=t[i],s=e[np(r)];"0px"===s&&(s=0),n[r]=s}return n},bp.processParams=function(t,e){return l(t)?t={duration:t}:h(t)?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),Va({},e,t)},bp.registerCompleteHandler=function(t){C(this.onComplete,t)},bp.setStyle=function(e,n){var i=this;if(h(e)){var r=np(e);t(this.originals,r)||(this.originals[r]=this.node.style[r]),this.node.style[r]=n,this.targets[r]=this.node.style[r]}else{var s;for(s in e)t(e,s)&&i.setStyle(s,e[s])}return this},bp.shouldFire=function(t){if(!this.ractive.transitionsEnabled)return!1;if("intro"===t&&this.ractive.rendering&&Ds("noIntro",this.ractive,!0))return!1;if("outro"===t&&this.ractive.unrendering&&Ds("noOutro",this.ractive,!1))return!1;var e=this.getParams();if(!this.element.parent)return!0;if(e&&e[0]&&s(e[0])&&"nested"in e[0]){if(e[0].nested!==!1)return!0}else if(Ds("nestedTransitions",this.ractive)!==!1)return!0;for(var n=this.element.parent;n;){if(n[t]&&n[t].starting)return!1;n=n.parent}return!0},bp.start=function(){var t,e=this,n=this.node=this.element.node,i=this.originals={},r=this.targets={},s=this.getParams();if(this.complete=function(s){if(e.starting=!1,!t){if(e.onComplete.forEach(function(t){return t()}),!s&&e.isIntro)for(var a in r)n.style[a]===r[a]&&(n.style[a]=i[a]);e._manager.remove(e),t=!0}},!this._fn)return void this.complete();var a=this._fn.apply(this.ractive,[this].concat(s));a&&a.then(this.complete)},bp.toString=function(){return""},bp.unbind=function(){if(!this.element.attributes.unbinding){var t=this.options&&this.options.template&&this.options.template.v;("t0"===t||"t1"===t)&&(this.element.intro=null),("t0"===t||"t2"===t)&&(this.element.outro=null)}},bp.unregisterCompleteHandler=function(t){T(this.onComplete,t)};var wp=yp.prototype;wp.destroyed=wp.rebound=wp.render=wp.unrender=wp.update=c;var xp,_p,kp={};try{tc("table").innerHTML="foo"}catch(Ep){xp=!0,_p={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Ap=function(t){function e(e){t.call(this,e)}t&&(e.__proto__=t);var n=e.prototype=Object.create(t&&t.prototype);return n.constructor=e,n.detach=function(){var t=Yn();return this.nodes&&this.nodes.forEach(function(e){return t.appendChild(e)}),t},n.find=function(t){var e,n=this,i=this.nodes.length;for(e=0;i>e;e+=1){var r=n.nodes[e];if(1===r.nodeType){if(ec(r,t))return r;var s=r.querySelector(t);if(s)return s}}return null},n.findAll=function(t,e){var n,i=this,r=e.result,s=this.nodes.length;for(n=0;s>n;n+=1){var a=i.nodes[n];if(1===a.nodeType){ec(a,t)&&r.push(a);var o=a.querySelectorAll(t);o&&r.push.apply(r,o)}}},n.findComponent=function(){return null},n.firstNode=function(){return this.rendered&&this.nodes[0]},n.render=function(t,e,n){var i=this;if(!this.nodes){var r=this.model?this.model.get():"";this.nodes=Fs(r,t)}var s=this.nodes;if(e){for(var a,o=-1;e.length&&(a=this.nodes[o+1]);)for(var u=void 0;u=e.shift();){var h=u.nodeType;if(h===a.nodeType&&(1===h&&u.outerHTML===a.outerHTML||(3===h||8===h)&&u.nodeValue===a.nodeValue)){i.nodes.splice(++o,1,u);break}t.removeChild(u)}o>=0&&(s=this.nodes.slice(o)),e.length&&(n=e[0])}if(s.length){var l=Yn();s.forEach(function(t){return l.appendChild(t)}),n?t.insertBefore(l,n):t.appendChild(l)}this.rendered=!0},n.toString=function(){var t=this.model&&this.model.get();return t=null!=t?""+t:"",Ar()?vt(t):t},n.unrender=function(){this.nodes&&this.nodes.forEach(function(t){dl.detachWhenReady({node:t,detach:function(){Xn(t)}})}),this.rendered=!1,this.nodes=null},n.update=function(){this.rendered&&this.dirty?(this.dirty=!1,this.unrender(),this.render(this.up.findParentNode(),null,this.up.findNextNode(this))):this.dirty=!1},e}(_d),Cp={};Cp[Qo]=wf,Cp[Uo]=Kf,Cp[Yo]=Hs,Cp[Go]=Uf,Cp[Mo]=Ed,Cp[Do]=ws,Cp[Ro]=zd,Cp[Io]=Ap,Cp[Zo]=ws,Cp[$o]=jf,Cp[Cu]=Nf,Cp[Eu]=Ff,Cp[ku]=wd,Cp[Au]=yp,Cp[Fo]=Sr;var Sp={doctype:Uf,form:ld,input:Ad,option:Md,select:Ud,textarea:$d},Op=function(t){this.owner=t.owner,this.isRoot=!t.owner.up,this.parent=this.isRoot?null:this.owner.up,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.up:null,!this.isRoot||this.ractive.delegate?this.delegate=this.owner.containerFragment?this.owner.containerFragment&&this.owner.containerFragment.delegate:this.componentParent&&this.componentParent.delegate||this.parent&&this.parent.delegate:this.delegate=!1,this.context=null,this.rendered=!1,"cssIds"in t?this.cssIds=t.cssIds&&t.cssIds.length&&t.cssIds:this.cssIds=this.parent?this.parent.cssIds:null,this.dirty=!1,this.dirtyValue=!0,this.template=t.template||[],this.createItems()},jp=Op.prototype;jp.bind=function(t){var e=this;this.context=t;for(var n=this.items.length,i=0;n>i;i++)e.items[i].bind();return this.bound=!0,this.dirty&&this.update(),this},jp.bubble=function(){this.dirtyValue=!0,this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&dl.addFragment(this):this.owner.bubble(this.index))},jp.createItems=function(){var t=this,e=this.template.length;this.items=[];for(var n=0;e>n;n++)t.items[n]=Zs({up:t,template:t.template[n],index:n})},jp.destroyed=function(){for(var t=this,e=this.items.length,n=0;e>n;n++)t.items[n].destroyed();this.pathModel&&this.pathModel.destroyed(),this.rootModel&&this.rootModel.destroyed()},jp.detach=function(){for(var t=Yn(),e=this.items,n=e.length,i=0;n>i;i++)t.appendChild(e[i].detach());return t},jp.find=function(t,e){return M(this.items,function(n){return n.find(t,e)})},jp.findAll=function(t,e){this.items&&this.items.forEach(function(n){return n.findAll&&n.findAll(t,e)})},jp.findComponent=function(t,e){return M(this.items,function(n){return n.findComponent(t,e)})},jp.findAllComponents=function(t,e){this.items&&this.items.forEach(function(n){return n.findAllComponents&&n.findAllComponents(t,e)})},jp.findContext=function(){var t=tn(this);return t&&t.context?t.context:this.ractive.viewmodel},jp.findNextNode=function(t){var e=this;if(t)for(var n,i=t.index+1;i<this.items.length;i++)if(n=e.items[i],n&&n.firstNode){var r=n.firstNode(!0);if(r)return r}return this.isRoot?this.ractive.component?this.ractive.component.up.findNextNode(this.ractive.component):null:this.parent?this.owner.findNextNode(this):void 0},jp.findParentNode=function(){var t=this;do{if(t.owner.type===Lo)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el;t=t.owner.type===Zo?t.owner.containerFragment:t.componentParent||t.parent}while(t);throw new Error("Could not find parent node")},jp.firstNode=function(t){var e=M(this.items,function(t){return t.firstNode(!0)});return e?e:t?null:this.parent.findNextNode(this.owner)},jp.getKey=function(){return this.keyModel||(this.keyModel=new Bd(this.key))},jp.getIndex=function(){return this.idxModel||(this.idxModel=new Bd(this.index))},jp.rebind=function(t){this.context=t,this.rootModel&&(this.rootModel.context=this.context),this.pathModel&&(this.pathModel.context=this.context)},jp.rebound=function(t){this.items.forEach(function(e){return e.rebound(t)}),t&&(this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath()))},jp.render=function(t,e){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0;for(var n=this.items,i=n.length,r=0;i>r;r++)n[r].render(t,e)},jp.resetTemplate=function(t){var e=this.bound,n=this.rendered;if(e&&(n&&this.unrender(!0),this.unbind()),this.template=t,this.createItems(),e&&(this.bind(this.context),n)){var i=this.findParentNode(),r=this.findNextNode();if(r){var s=Yn();this.render(s),i.insertBefore(s,r)}else this.render(i)}},jp.shuffled=function(){this.items.forEach(tt),this.rootModel&&this.rootModel.applyValue(this.context.getKeypath(this.ractive.root)),this.pathModel&&this.pathModel.applyValue(this.context.getKeypath())},jp.toString=function(t){return this.items.map(t?at:st).join("")},jp.unbind=function(){var t=this;this.context=null;for(var e=this.items.length,n=0;e>n;n++)t.items[n].unbind();return this.bound=!1,this},jp.unrender=function(t){for(var e=this,n=this.items.length,i=0;n>i;i++)e.items[i].unrender(t);this.rendered=!1},jp.update=function(){var t=this;if(this.dirty)if(this.updating)this.isRoot&&dl.addFragmentToRoot(this);else{this.dirty=!1,this.updating=!0;for(var e=this.items.length,n=0;e>n;n++)t.items[n].update();this.updating=!1}},jp.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var t={},e=Ws(this.items,t,this.ractive._guid),n=ds(e,t);this.value=n?n.value:this.toString(),this.dirtyValue=!1}return this.value},Op.prototype.getContext=Xe,Op.prototype.getKeypath=Gs;var Np=["template","partials","components","decorators","events"],Tp=Fn("reverse").path,Vp=Fn("shift").path,Pp=Fn("sort").path,Mp=Fn("splice").path,Ip=Fn("unshift").path,Rp={add:un,animate:fn,attachChild:An,compute:jn,detach:Nn,detachChild:Tn,find:Vn,findAll:Pn,findAllComponents:Mn,findComponent:In,findContainer:Rn,findParent:Bn,fire:Zn,get:Wn,getContext:Qn,insert:ni,link:ri,observe:hi,observeOnce:ci,off:fi,on:di,once:pi,pop:Sc,push:Oc,readLink:mi,render:Xs,reset:ta,resetPartial:na,resetTemplate:ia,reverse:Tp,set:ra,shift:Vp,sort:Pp,splice:Mp,subtract:sa,teardown:Or,toggle:aa,toCSS:oa,toCss:oa,toHTML:ua,toHtml:ua,toText:ha,transition:la,unlink:ca,unrender:fa,unshift:Ip,update:Un,updateModel:da,use:pa},Bp=[],Kp=/super\s*\(|\.call\s*\(\s*this/;if(Ia(Na,{sharedGet:{value:xa},sharedSet:{value:wa},styleGet:{configurable:!0,value:va.bind(Na)},styleSet:{configurable:!0,value:Si.bind(Na)},addCSS:{configurable:!1,value:ga.bind(Na)},hasCSS:{configurable:!1,value:ba.bind(Na)}}),Xa&&!Xa.Ractive){var Lp="",Dp=document.currentScript||document.querySelector("script[data-ractive-options]");Dp&&(Lp=Dp.getAttribute("data-ractive-options")||""),~Lp.indexOf("ForceGlobal")&&(Xa.Ractive=Na)}else Xa&&m("Ractive already appears to be loaded while loading 0.10.4.");return Va(Na.prototype,Rp,Ya),Na.prototype.constructor=Na,Na.defaults=Na.prototype,Jh.defaults=Na.defaults,Jh.Ractive=Na,Ia(Na,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:ka},extendWith:{value:Ea},escapeKey:{value:_},evalObjectString:{value:ds},findPlugin:{value:ja},getContext:{value:Gn},getCSS:{value:yi},isInstance:{value:ma},joinKeys:{value:Sa},macro:{value:Ca},normaliseKeypath:{value:k},parse:{value:Pe},splitKeypath:{value:Oa},unescapeKey:{value:A},use:{value:_a},enhance:{writable:!0,value:!1},svg:{value:io},VERSION:{value:"0.10.4"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Ja},events:{writable:!0,value:{}},extensions:{value:[]},helpers:{writable:!0,value:Ya.helpers},interpolators:{writable:!0,value:co},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},cssData:{configurable:!0,value:{}},sharedData:{value:xl},Ractive:{value:Na},Context:{value:Sl.Context.prototype}}),Ma(Na,"_cssModel",{configurable:!0,value:new Uc(Na)}),Ma(Na.prototype,"rendered",{get:function(){return this.fragment&&this.fragment.rendered}}),Na});!function(root,factory){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=factory(root,exports)):"function"==typeof define&&define.amd?define(["exports"],function(exports){root.Lockr=factory(root,exports)}):root.Lockr=factory(root,{})}(this,function(root,Lockr){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in this&&this[from]===elt)return from;return-1}),Lockr.prefix="",Lockr._getPrefixedKey=function(key,options){return options=options||{},options.noPrefix?key:this.prefix+key},Lockr.set=function(key,value,options){var query_key=this._getPrefixedKey(key,options);try{localStorage.setItem(query_key,JSON.stringify({data:value}))}catch(e){console&&console.warn("Lockr didn't successfully save the '{"+key+": "+value+"}' pair, because the localStorage is full.")}},Lockr.get=function(key,missing,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){try{value=localStorage[query_key]?JSON.parse('{"data":"'+localStorage.getItem(query_key)+'"}'):null}catch(e){console&&console.warn("Lockr could not load the item with key "+key)}}return null===value?missing:"undefined"!=typeof value.data?value.data:missing},Lockr.sadd=function(key,value,options){var json,query_key=this._getPrefixedKey(key,options),values=Lockr.smembers(key);if(values.indexOf(value)>-1)return null;try{values.push(value),json=JSON.stringify({data:values}),localStorage.setItem(query_key,json)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+value+" to "+key+" set, because the localStorage is full.")}},Lockr.smembers=function(key,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return null===value?[]:value.data||[]},Lockr.sismember=function(key,value,options){this._getPrefixedKey(key,options);return Lockr.smembers(key).indexOf(value)>-1},Lockr.getAll=function(){var keys=Object.keys(localStorage);return keys.map(function(key){return Lockr.get(key)})},Lockr.srem=function(key,value,options){var json,index,query_key=this._getPrefixedKey(key,options),values=Lockr.smembers(key,value);index=values.indexOf(value),index>-1&&values.splice(index,1),json=JSON.stringify({data:values});try{localStorage.setItem(query_key,json)}catch(e){console&&console.warn("Lockr couldn't remove the "+value+" from the set "+key)}},Lockr.rm=function(key){localStorage.removeItem(key)},Lockr.flush=function(){localStorage.clear()},Lockr});!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=d(t)),v)}function o(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function s(e){C=e}function i(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e,t){var o=m();v||n(o),u(e,o,t)||l(o)}function c(t){var o=m();return v||n(o),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function l(t){for(var n=v.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t)}function u(t,n,o){var s=!(!o||!o.force)&&o.force;return!(!t||!s&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0)}function d(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(e){C&&C(e)}function g(t){function o(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(){c(),u(),d(),p(),g(),C(),l(),i()}function i(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}I.attr("aria-live",e)}function a(){E.closeOnHover&&I.hover(H,D),!E.onclick&&E.tapToDismiss&&I.click(b),E.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),E.onCloseClick&&E.onCloseClick(e),b(!0)}),E.onclick&&I.click(function(e){E.onclick(e),b()})}function r(){I.hide(),I[E.showMethod]({duration:E.showDuration,easing:E.showEasing,complete:E.onShown}),E.timeOut>0&&(k=setTimeout(b,E.timeOut),F.maxHideTime=parseFloat(E.timeOut),F.hideEta=(new Date).getTime()+F.maxHideTime,E.progressBar&&(F.intervalId=setInterval(x,10)))}function c(){t.iconClass&&I.addClass(E.toastClass).addClass(y)}function l(){E.newestOnTop?v.prepend(I):v.append(I)}function u(){if(t.title){var e=t.title;E.escapeHtml&&(e=o(t.title)),M.append(e).addClass(E.titleClass),I.append(M)}}function d(){if(t.message){var e=t.message;E.escapeHtml&&(e=o(t.message)),B.append(e).addClass(E.messageClass),I.append(B)}}function p(){E.closeButton&&(j.addClass(E.closeClass).attr("role","button"),I.prepend(j))}function g(){E.progressBar&&(q.addClass(E.progressClass),I.prepend(q))}function C(){E.rtl&&I.addClass("rtl")}function O(e,t){if(e.preventDuplicates){if(t.message===w)return!0;w=t.message}return!1}function b(t){var n=t&&E.closeMethod!==!1?E.closeMethod:E.hideMethod,o=t&&E.closeDuration!==!1?E.closeDuration:E.hideDuration,s=t&&E.closeEasing!==!1?E.closeEasing:E.hideEasing;if(!e(":focus",I).length||t)return clearTimeout(F.intervalId),I[n]({duration:o,easing:s,complete:function(){h(I),clearTimeout(k),E.onHidden&&"hidden"!==P.state&&E.onHidden(),P.state="hidden",P.endTime=new Date,f(P)}})}function D(){(E.timeOut>0||E.extendedTimeOut>0)&&(k=setTimeout(b,E.extendedTimeOut),F.maxHideTime=parseFloat(E.extendedTimeOut),F.hideEta=(new Date).getTime()+F.maxHideTime)}function H(){clearTimeout(k),F.hideEta=0,I.stop(!0,!0)[E.showMethod]({duration:E.showDuration,easing:E.showEasing})}function x(){var e=(F.hideEta-(new Date).getTime())/F.maxHideTime*100;q.width(e+"%")}var E=m(),y=t.iconClass||E.iconClass;if("undefined"!=typeof t.optionsOverride&&(E=e.extend(E,t.optionsOverride),y=t.optionsOverride.iconClass||y),!O(E,t)){T++,v=n(E,!0);var k=null,I=e("<div/>"),M=e("<div/>"),B=e("<div/>"),q=e("<div/>"),j=e(E.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},P={toastId:T,state:"visible",startTime:new Date,options:E,map:t};return s(),r(),a(),f(P),E.debug&&console&&console.log(P),I}}function m(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),w=void 0))}var v,C,w,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:o,options:{},subscribe:s,success:i,version:"2.1.3",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SignaturePad=e()}(this,function(){"use strict";function t(t,e,i){this.x=t,this.y=e,this.time=i||(new Date).getTime()}function e(t,e,i,o){this.startPoint=t,this.control1=e,this.control2=i,this.endPoint=o}function i(t,e,i){var o,n,s,r=null,h=0;i||(i={});var a=function(){h=!1===i.leading?0:Date.now(),r=null,s=t.apply(o,n),r||(o=n=null)};return function(){var c=Date.now();h||!1!==i.leading||(h=c);var d=e-(c-h);return o=this,n=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),h=c,s=t.apply(o,n),r||(o=n=null)):r||!1===i.trailing||(r=setTimeout(a,d)),s}}function o(t,e){var n=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=i(o.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=o.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(n._mouseButtonDown=!0,n._strokeBegin(t))},this._handleMouseMove=function(t){n._mouseButtonDown&&n._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];n._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];n._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===n._canvas&&(t.preventDefault(),n._strokeEnd(t))},this.on()}return t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},e.prototype.length=function(){for(var t=0,e=void 0,i=void 0,o=0;o<=10;o+=1){var n=o/10,s=this._point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var h=s-e,a=r-i;t+=Math.sqrt(h*h+a*a)}e=s,i=r}return t},e.prototype._point=function(t,e,i,o,n){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*o*(1-t)*t*t+n*t*t*t},o.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},o.prototype.fromDataURL=function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Image,n=i.ratio||1||1,s=i.width||this._canvas.width/n,r=i.height||this._canvas.height/n;this._reset(),o.src=t,o.onload=function(){e._ctx.drawImage(o,0,0,s,r)},this._isEmpty=!1},o.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var i=arguments.length,o=Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return(e=this._canvas).toDataURL.apply(e,[t].concat(o))}},o.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},o.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},o.prototype.isEmpty=function(){return this._isEmpty},o.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},o.prototype._strokeUpdate=function(t){var e=t.clientX,i=t.clientY,o=this._createPoint(e,i),n=this._data[this._data.length-1],s=n&&n[n.length-1],r=s&&o.distanceTo(s)<this.minDistance;if(!s||!r){var h=this._addPoint(o),a=h.curve,c=h.widths;a&&c&&this._drawCurve(a,c.start,c.end),this._data[this._data.length-1].push({x:o.x,y:o.y,time:o.time,color:this.penColor})}},o.prototype._strokeEnd=function(t){var e=this.points.length>2,i=this.points[0];if(!e&&i&&this._drawDot(i),i){var o=this._data[this._data.length-1],n=o[o.length-1];i.equals(n)||o.push({x:i.x,y:i.y,time:i.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},o.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},o.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},o.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},o.prototype._createPoint=function(e,i,o){var n=this._canvas.getBoundingClientRect();return new t(e-n.left,i-n.top,o||(new Date).getTime())},o.prototype._addPoint=function(t){var i=this.points,o=void 0;if(i.push(t),i.length>2){3===i.length&&i.unshift(i[0]),o=this._calculateCurveControlPoints(i[0],i[1],i[2]);var n=o.c2;o=this._calculateCurveControlPoints(i[1],i[2],i[3]);var s=o.c1,r=new e(i[1],n,s,i[2]),h=this._calculateCurveWidths(r);return i.shift(),{curve:r,widths:h}}return{}},o.prototype._calculateCurveControlPoints=function(e,i,o){var n=e.x-i.x,s=e.y-i.y,r=i.x-o.x,h=i.y-o.y,a={x:(e.x+i.x)/2,y:(e.y+i.y)/2},c={x:(i.x+o.x)/2,y:(i.y+o.y)/2},d=Math.sqrt(n*n+s*s),l=Math.sqrt(r*r+h*h),u=a.x-c.x,v=a.y-c.y,p=l/(d+l),_={x:c.x+u*p,y:c.y+v*p},y=i.x-_.x,f=i.y-_.y;return{c1:new t(a.x+y,a.y+f),c2:new t(c.x+y,c.y+f)}},o.prototype._calculateCurveWidths=function(t){var e=t.startPoint,i=t.endPoint,o={start:null,end:null},n=this.velocityFilterWeight*i.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,s=this._strokeWidth(n);return o.start=this._lastWidth,o.end=s,this._lastVelocity=n,this._lastWidth=s,o},o.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},o.prototype._drawPoint=function(t,e,i){var o=this._ctx;o.moveTo(t,e),o.arc(t,e,i,0,2*Math.PI,!1),this._isEmpty=!1},o.prototype._drawCurve=function(t,e,i){var o=this._ctx,n=i-e,s=Math.floor(t.length());o.beginPath();for(var r=0;r<s;r+=1){var h=r/s,a=h*h,c=a*h,d=1-h,l=d*d,u=l*d,v=u*t.startPoint.x;v+=3*l*h*t.control1.x,v+=3*d*a*t.control2.x,v+=c*t.endPoint.x;var p=u*t.startPoint.y;p+=3*l*h*t.control1.y,p+=3*d*a*t.control2.y,p+=c*t.endPoint.y;var _=e+c*n;this._drawPoint(v,p,_)}o.closePath(),o.fill()},o.prototype._drawDot=function(t){var e=this._ctx,i="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,i),e.closePath(),e.fill()},o.prototype._fromData=function(e,i,o){for(var n=0;n<e.length;n+=1){var s=e[n];if(s.length>1)for(var r=0;r<s.length;r+=1){var h=s[r],a=new t(h.x,h.y,h.time),c=h.color;if(0===r)this.penColor=c,this._reset(),this._addPoint(a);else if(r!==s.length-1){var d=this._addPoint(a),l=d.curve,u=d.widths;l&&u&&i(l,u,c)}}else{this._reset();o(s[0])}}},o.prototype._toSVG=function(){var t=this,e=this._data,i=this._canvas,o=Math.max(1||1,1),n=i.width/o,s=i.height/o,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"width",i.width),r.setAttributeNS(null,"height",i.height),this._fromData(e,function(t,e,i){var o=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var n="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);o.setAttribute("d",n),o.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),o.setAttribute("stroke",i),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),r.appendChild(o)}},function(e){var i=document.createElement("circle"),o="function"==typeof t.dotSize?t.dotSize():t.dotSize;i.setAttribute("r",o),i.setAttribute("cx",e.x),i.setAttribute("cy",e.y),i.setAttribute("fill",e.color),r.appendChild(i)});var h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+n+" "+s+'" width="'+n+'" height="'+s+'">',a=r.innerHTML;if(void 0===a){var c=document.createElement("dummy"),d=r.childNodes;c.innerHTML="";for(var l=0;l<d.length;l+=1)c.appendChild(d[l].cloneNode(!0));a=c.innerHTML}var u=h+a+"</svg>";return"data:image/svg+xml;base64,"+btoa(u)},o.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t,i){return e._drawCurve(t,i.start,i.end)},function(t){return e._drawDot(t)}),this._data=t},o.prototype.toData=function(){return this._data},o});/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2017 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(c){a=c}var l=t("./schedule"),u=t("./queue"),p=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},p.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,s,void 0,u,h),l._then(a,c,void 0,u,h),u._setOnCancel(l)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(c){var l=a._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return o(n).call(l,c)}else if("function"==typeof p){var h=o(p).call(l,c);if(h===s)return h;if(h)return o(n).call(l,c)}else if(r.isObject(c)){for(var f=i(p),_=0;_<f.length;++_){var d=f[_];if(p[d]!=c[d])continue t}return o(n).call(l,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e){return{promise:e}}function i(){return!1}function o(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+H.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?H.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function a(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function f(){this._trace=new S(this._peekContext())}function _(t,e){if(N(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=j(t);H.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),H.notEnumerableProp(t,"__stackCleaned__",!0)}}}function d(t,e,n,r,i){if(void 0===t&&null!==e&&W){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),c=w(a),l=c.length-1;l>=0;--l){var u=c[l];if(!U.test(u)){var p=u.match(M);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0)for(var h=c[0],l=0;l<a.length;++l)if(a[l]===h){l>0&&(s="\n"+a[l-1]);break}}var f="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(f,!0,e)}}function v(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),y(n)}function y(t,n,r){if(ot.warnings){var i,o=new L(t);if(n)r._attachExtraTrace(o);else if(ot.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=j(o);o.stack=s.message+"\n"+s.stack.join("\n")}tt("warning",o)||E(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function g(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function b(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=r[a];if(e[i]!==c)break;e.pop(),i--}e=r}}function w(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||q.test(r),o=i&&nt(r);i&&!o&&($&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function C(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||q.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}function j(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?C(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:w(e)}}function E(t,e,n){if("undefined"!=typeof console){var r;if(H.isObject(t)){var i=t.stack;r=e+Q(i,t)}else r=e+String(t);"function"==typeof D?D(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function k(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){I.throwLater(o)}"unhandledRejection"===t?tt(t,n,r)||i||E(n,"Unhandled rejection "):tt(t,r)}function F(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():H.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+x(e)+">, no stack trace)"}function x(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function T(){return"function"==typeof it}function P(t){var e=t.match(rt);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function R(t,e){if(T()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c){var l=P(i[c]);if(l){n=l.fileName,s=l.line;break}}for(var c=0;c<o.length;++c){var l=P(o[c]);if(l){r=l.fileName,a=l.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(nt=function(t){if(B.test(t))return!0;var e=P(t);return e&&e.fileName===n&&s<=e.line&&e.line<=a?!0:!1})}}function S(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);it(this,S),e>32&&this.uncycle()}var O,A,D,V=e._getDomain,I=e._async,L=t("./errors").Warning,H=t("./util"),N=H.canAttachTrace,B=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,U=/\((?:timers\.js):\d+:\d+\)/,M=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,q=null,Q=null,$=!1,G=!(0==H.env("BLUEBIRD_DEBUG")||!H.env("BLUEBIRD_DEBUG")&&"development"!==H.env("NODE_ENV")),z=!(0==H.env("BLUEBIRD_WARNINGS")||!G&&!H.env("BLUEBIRD_WARNINGS")),X=!(0==H.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!H.env("BLUEBIRD_LONG_STACK_TRACES")),W=0!=H.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(z||!!H.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),I.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",O,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",A,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return y(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=V();A="function"==typeof t?null===e?t:H.domainBind(e,t):void 0},e.onUnhandledRejectionHandled=function(t){var e=V();O="function"==typeof t?null===e?t:H.domainBind(e,t):void 0};var K=function(){};e.longStackTraces=function(){if(I.haveItemsQueued()&&!ot.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ot.longStackTraces&&T()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace;ot.longStackTraces=!0,K=function(){if(I.haveItemsQueued()&&!ot.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),I.enableTrampoline(),ot.longStackTraces=!1},e.prototype._captureStackTrace=f,e.prototype._attachExtraTrace=_,n.activateLongStackTraces(),I.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return ot.longStackTraces&&T()};var J=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return H.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!H.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return H.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!H.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),H.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!H.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),Y=function(){return H.isNode?function(){return process.emit.apply(process,arguments)}:H.global?function(t){var e="on"+t.toLowerCase(),n=H.global[e];return n?(n.apply(H.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),Z={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},tt=function(t){var e=!1;try{e=Y.apply(null,arguments)}catch(n){I.throwLater(n),e=!0}var r=!1;try{r=J(t,Z[t].apply(null,arguments))}catch(n){I.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&K()),"warnings"in t){var n=t.warnings;ot.warnings=!!n,W=ot.warnings,H.isObject(n)&&"wForgottenReturn"in n&&(W=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!ot.cancellation){if(I.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=u,e.prototype._onCancel=a,e.prototype._setOnCancel=c,e.prototype._attachCancellationCallback=s,e.prototype._execute=o,et=u,ot.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!ot.monitoring?(ot.monitoring=!0,e.prototype._fireEvent=tt):!t.monitoring&&ot.monitoring&&(ot.monitoring=!1,e.prototype._fireEvent=i)),e},e.prototype._fireEvent=i,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var et=p,nt=function(){return!1},rt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;H.inherits(S,Error),n.CapturedTrace=S,S.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=r-2;u>=0;--u)e[u]._length=l,l++;return}}}},S.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=j(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(w(i.stack.split("\n"))),i=i._parent;b(r),g(r),H.notEnumerableProp(t,"stack",m(n,r)),H.notEnumerableProp(t,"__stackCleaned__",!0)}};var it=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():F(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,q=t,Q=e;var n=Error.captureStackTrace;return nt=function(t){return B.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return q=/@/,Q=e,$=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(Q=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?F(e):e.toString()},null):(q=t,Q=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(t){console.warn(t)},H.isNode&&process.stderr.isTTY?D=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:H.isNode||"string"!=typeof(new Error).stack||(D=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var ot={warnings:z,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&e.longStackTraces(),{longStackTraces:function(){return ot.longStackTraces},warnings:function(){return ot.warnings},cancellation:function(){return ot.cancellation},monitoring:function(){return ot.monitoring},propagateFromFunction:function(){return et},boundValueFunction:function(){return h},checkForgottenReturns:d,setBounds:R,warn:y,deprecated:v,CapturedTrace:S,fireDomEvent:J,fireGlobalEvent:Y}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(p(this,"message","string"==typeof r?r:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return u(n,Error),n}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),c=a.freeze,l=t("./util"),u=l.inherits,p=l.notEnumerableProp,h=r("Warning","warning"),f=r("CancellationError","cancellation error"),_=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(d.prototype[y[m]]=Array.prototype[y[m]]);a.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return g--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:f,TimeoutError:_,OperationalError:i,RejectionError:i,AggregateError:d}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function o(t){this.finallyHandler=t}function s(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function a(){return l.call(this,this.promise._target()._settledValue())}function c(t){return s(this,t)?void 0:(h.e=t,h)}function l(t){var i=this.promise,l=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?l.call(i._boundValue()):l.call(i._boundValue(),t);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var f=n(u,i);if(f instanceof e){if(null!=this.cancelPromise){if(f._isCancelled()){var _=new p("late cancellation observer");return i._attachExtraTrace(_),h.e=_,h}f.isPending()&&f._attachCancellationCallback(new o(this))}return f._then(a,c,void 0,this,void 0)}}}return i.isRejected()?(s(this),h.e=t,h):(s(this),t)}var u=t("./util"),p=e.CancellationError,h=u.errorObj,f=t("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){s(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new i(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,l,l)},e.prototype.tap=function(t){return this._passThrough(t,1,l)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,l);var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var s=arguments[r];if(!u.isObject(s))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(s)));i[o++]=s}i.length=o;var a=arguments[r];return this._passThrough(f(i,a,this),1,void 0,l)},i}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(t);if(r._popContext(),s===h){r._pushContext();var a=e.reject(h.e);return r._popContext(),a}var c=i(s,r);if(c instanceof e)return c}return null}function c(t,n,i,o){if(s.cancellation()){var a=new e(r),c=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{var l=this._promise=new e(r);l._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(_):_,this._yieldedPromise=null,this._cancellationPhase=!1}var l=t("./errors"),u=l.TypeError,p=t("./util"),h=p.errorObj,f=p.tryCatch,_=[];p.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=f(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=f(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("expecting a function but got "+p.classString(t));_.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:u.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function c(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,n,s,o).promise()}var l=e._getDomain,u=t("./util"),p=u.tryCatch,h=u.errorObj,f=e._async;u.inherits(a,n),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var l=this._promise,u=this._callback,f=l._boundValue();l._pushContext();var _=p(u).call(f,t,n,o),d=l._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",l),_===h)return this._reject(_.e),!0;var v=i(_,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y))return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);_=v._value()}r[n]=_}var m=++this._totalResolved;return m>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=s.isArray(l)?a(t).apply(u,l):a(t).call(u,l)}else c=a(t)();var p=r._popContext();return o.checkForgottenReturns(c,p,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var o=n[i];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,c=t("./errors"),l=c.OperationalError,u=t("./es5"),p=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===c&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===c&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function n(){}function r(t,e){if(null==t||t.constructor!==i)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new m("expecting a function but got "+f.classString(e))}function i(t){t!==b&&r(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},p=function(t){return i.reject(new m(t))},h={},f=t("./util");c=f.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},f.notEnumerableProp(i,"_getDomain",c);var _=t("./es5"),d=t("./async"),v=new d;_.defineProperty(i,"_async",{value:v});var y=t("./errors"),m=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var g=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},w={},C={},j=t("./thenables")(i,b),E=t("./promise_array")(i,b,j,p,n),k=t("./context")(i),F=k.create,x=t("./debuggability")(i,k),T=(x.CapturedTrace,t("./finally")(i,j,C)),P=t("./catch_filter")(C),R=t("./nodeback"),S=f.errorObj,O=f.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!f.isObject(o))return p("Catch statement predicate: expecting an object but got "+f.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,P(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(t,e){if(x.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},i.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=O(t)(R(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new E(t).promise()},i.cast=function(t){var e=j(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+f.classString(t));return v.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var s=void 0!==o,a=s?o:new i(b),l=this._target(),u=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=c();if(0!==(50397184&u)){var h,_,d=l._settlePromiseCtx;0!==(33554432&u)?(_=l._rejectionHandler0,h=t):0!==(16777216&u)?(_=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(d=l._settlePromiseLateCancellationObserver,_=new g("late cancellation observer"),l._attachExtraTrace(_),h=e),v.invoke(d,l,{handler:null===p?h:"function"==typeof h&&f.domainBind(p,h),promise:a,receiver:r,value:_})}else l._addCallbacks(t,e,a,r,p);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===h?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:f.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:f.domainBind(i,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:f.domainBind(i,t)),"function"==typeof e&&(this[s+1]=null===i?e:f.domainBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=j(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;s>a;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var c=new g("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},i.prototype._rejectCallback=function(t,e,n){var r=f.ensureErrorObject(t),i=r===t;if(!i&&!n&&x.warnings()){var o="a promise was rejected with a non-error: "+f.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){if(t!==b){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===w?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=S,o.e=new m("cannot .spread() a non-array: "+f.classString(n))):o=O(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===C?r._reject(n):o===S?r._rejectCallback(o.e,!1):(x.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var s=t instanceof i,a=this._bitField,c=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=t,O(e).call(r,o)===S&&t._reject(S.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):s||t instanceof E?t._cancel():r.cancel()):"function"==typeof e?s?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):s&&(c&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,f.isNode):void((65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){x.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:s}},f.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,j,p,x),t("./bind")(i,b,j,x),t("./cancel")(i,E,p,x),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,E,j,b,v,c),i.Promise=i,i.version="3.5.0",t("./map.js")(i,E,p,j,b,x),t("./call_get.js")(i),t("./using.js")(i,p,j,F,b,x),t("./timers.js")(i,b,x),t("./generators.js")(i,p,b,j,n,x),t("./nodeify.js")(i),t("./promisify.js")(i,b),t("./props.js")(i,E,j,p),t("./race.js")(i,b,j,p),t("./reduce.js")(i,E,p,j,b,x),t("./settle.js")(i,E,x),t("./some.js")(i,E,p),t("./filter.js")(i,b),t("./each.js")(i,b),t("./any.js")(i),f.toFastProperties(i),f.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new i(b)),x.setBounds(d.firstLineError,f.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var u=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var c=r(t[a],i);c instanceof e?(c=c._target(),s=c._bitField):s=null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0===(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!==(33554432&s)?this._promiseFulfilled(c._value(),a):0!==(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!C.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=f.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=f.inheritedDataKeys(t),c=[],l=0;l<a.length;++l){var u=a[l],p=t[u],h=r===j?!0:j(u,p,t);"function"!=typeof p||i(p)||o(t,u,e)||!r(u,p,t,h)||c.push(u,p)}return s(c,e,n),c}function c(t,r,i,o,s,a){function c(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==l?this[u]:t,c=_(o,a);try{s.apply(i,d(arguments,c))}catch(p){o._rejectCallback(v(p),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),u=t;return"string"==typeof u&&(t=o),f.notEnumerableProp(c,"__isPromisified__",!0),c}function l(t,e,n,r,i){for(var o=new RegExp(E(e)+"$"),s=a(t,e,o,n),c=0,l=s.length;l>c;c+=2){var u=s[c],p=s[c+1],_=u+e;if(r===k)t[_]=k(u,h,u,p,e,i);else{var d=r(p,function(){return k(u,h,u,p,e,i)});f.notEnumerableProp(d,"__isPromisified__",!0),t[_]=d}}return f.toFastProperties(t),t}function u(t,e,n){return k(t,e,void 0,t,null,n)}var p,h={},f=t("./util"),_=t("./nodeback"),d=f.withAppended,v=f.maybeWrapAsError,y=f.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),j=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},E=function(t){return t.replace(/([$])/,"\\$")},k=y?p:c;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+f.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,s=u(t,n,o);return f.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=j);var o=e.promisifier;if("function"!=typeof o&&(o=k),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=f.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&f.isClass(c)&&(l(c.prototype,r,i,o,n),l(c,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=p(t),n=!0;else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function s(t){var n,s=r(t);return l(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,c=t("./util"),l=c.isObject,u=t("./es5");"function"==typeof Map&&(a=Map);var p=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return a(c);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var l=new e(n);void 0!==o&&l._propagateFrom(o,3);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;f>h;++h){var _=t[h];(void 0!==_||h in t)&&e.cast(_)._then(u,p,void 0,l,null)}return l}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=h();this._fn=null===s?n:f.domainBind(s,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+f.classString(e));var o=new a(t,e,n,i);return o.promise()}function u(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n=this.array,r=n._promise,i=_(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,f=t("./util"),_=f.tryCatch;f.inherits(a,n),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(u,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,c=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){c.call(process,t)}}else if("function"==typeof s&&"function"==typeof s.resolve){var l=s.resolve();r=function(t){l.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,c=t("./errors").AggregateError,l=s.isArray,u={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e)return t;var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(s(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function s(t){try{return p.call(t,"_promise0")}catch(e){return!1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,p,!0),a=null)}var a=new e(n),u=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var p=!0,h=c.tryCatch(r).call(t,o,s);return p=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,p={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(l,null,null,t,void 0),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return u(t,this)};var p=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,c=new i(setTimeout(function(){n.isPending()&&p(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,s,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(s>=l)return u._fulfill();var o=c(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(p){return a(p)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,l=t.length,u=new e(o);return i(),u}function u(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function h(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function f(t){this.length=t,this.promise=null,this[t-1]=null}var _=t("./util"),d=t("./errors").TypeError,v=t("./util").inherits,y=_.errorObj,m=_.tryCatch,g={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},u.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(p,u),p.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},f.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+_.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var c=new f(t),p=0;t>p;++p){var d=o[p];if(u.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var g=r(d);g instanceof e&&(d=g._then(h,null,null,{resources:c,index:p},void 0))}c[p]=d}for(var b=new Array(c.length),p=0;p<b.length;++p)b[p]=e.resolve(c[p]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}C._pushContext(),i=m(i);var r=a?i.apply(void 0,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return l(c,t)});return c.promise=C,C._setOnCancel(c),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,i());throw new d}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=P;return P=null,t.apply(this,arguments)}catch(e){return T.e=e,T}}function i(t){return P=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!F.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function u(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return F.defineProperty(t,e,r),t}function p(t){throw t}function h(t){try{if("function"==typeof t){var e=F.names(t.prototype),n=F.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&F.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function f(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function _(t){return D.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){try{u(t,"isOperational",!0)}catch(e){}}function g(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&F.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=F.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{F.defineProperty(e,o,F.getDescriptor(t,o))}catch(s){}}}function j(t){return N?process.env[t]:void 0}function E(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function k(t,e){return t.bind(e)}var F=t("./es5"),x="undefined"==typeof navigator,T={e:{}},P,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},O=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(F.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}t=F.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,D=/^[a-z$_][a-z$_0-9]*$/i,V=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(v(t))}:function(t){if(b(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),I=function(t){return F.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};I=function(t){return F.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?L(t):null}}var H="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,B={isClass:h,isIdentifier:_,inheritedDataKeys:O,getDataPropertyOrDefault:l,thrower:p,isArray:F.isArray,asArray:I,notEnumerableProp:u,isPrimitive:o,isObject:s,isError:y,canEvaluate:x,errorObj:T,tryCatch:i,inherits:S,withAppended:c,maybeWrapAsError:a,toFastProperties:f,filledRange:d,toString:v,canAttachTrace:b,ensureErrorObject:V,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,hasEnvVariables:N,env:j,global:R,getNativePromise:E,domainBind:k};B.isRecentNode=B.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(U){B.lastLineError=U}e.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);(function(e){var t=function(t,n){var i=e.extend({},e.fn.nivoSlider.defaults,n),r={currentSlide:0,currentImage:"",totalSlides:0,running:!1,paused:!1,stop:!1,controlNavEl:!1},o=e(t);o.data("nivo:vars",r).addClass("nivoSlider");var a=o.children();a.each(function(){var t=e(this),n="";t.is("img")||(t.is("a")&&(t.addClass("nivo-imageLink"),n=t),t=t.find("img:first"));var i=0===i?t.attr("width"):t.width(),o=0===o?t.attr("height"):t.height();""!==n&&n.css("display","none"),t.css("display","none"),r.totalSlides++}),i.randomStart&&(i.startSlide=Math.floor(Math.random()*r.totalSlides)),i.startSlide>0&&(i.startSlide>=r.totalSlides&&(i.startSlide=r.totalSlides-1),r.currentSlide=i.startSlide),r.currentImage=e(a[r.currentSlide]).is("img")?e(a[r.currentSlide]):e(a[r.currentSlide]).find("img:first"),e(a[r.currentSlide]).is("a")&&e(a[r.currentSlide]).css("display","block");var s=e("<img/>").addClass("nivo-main-image");s.attr("src",r.currentImage.attr("src")).show(),o.append(s),e(window).resize(function(){o.children("img").width(o.width()),s.attr("src",r.currentImage.attr("src")),s.stop().height("auto"),e(".nivo-slice").remove(),e(".nivo-box").remove()}),o.append(e('<div class="nivo-caption"></div>'));var l=function(t){var n=e(".nivo-caption",o);if(""!=r.currentImage.attr("title")&&void 0!=r.currentImage.attr("title")){var i=r.currentImage.attr("title");"#"==i.substr(0,1)&&(i=e(i).html()),"block"==n.css("display")?setTimeout(function(){n.html(i)},t.animSpeed):(n.html(i),n.stop().fadeIn(t.animSpeed))}else n.stop().fadeOut(t.animSpeed)};l(i);var c=0;if(!i.manualAdvance&&a.length>1&&(c=setInterval(function(){f(o,a,i,!1)},i.pauseTime)),i.directionNav&&(o.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+i.prevText+'</a><a class="nivo-nextNav">'+i.nextText+"</a></div>"),e(o).on("click","a.nivo-prevNav",function(){return r.running?!1:(clearInterval(c),c="",r.currentSlide-=2,f(o,a,i,"prev"),void 0)}),e(o).on("click","a.nivo-nextNav",function(){return r.running?!1:(clearInterval(c),c="",f(o,a,i,"next"),void 0)})),i.controlNav){r.controlNavEl=e('<div class="nivo-controlNav"></div>'),o.after(r.controlNavEl);for(var u=0;a.length>u;u++)if(i.controlNavThumbs){r.controlNavEl.addClass("nivo-thumbs-enabled");var d=a.eq(u);d.is("img")||(d=d.find("img:first")),d.attr("data-thumb")&&r.controlNavEl.append('<a class="nivo-control" rel="'+u+'"><img src="'+d.attr("data-thumb")+'" alt="" /></a>')}else r.controlNavEl.append('<a class="nivo-control" rel="'+u+'">'+(u+1)+"</a>");e("a:eq("+r.currentSlide+")",r.controlNavEl).addClass("active"),e("a",r.controlNavEl).bind("click",function(){return r.running?!1:e(this).hasClass("active")?!1:(clearInterval(c),c="",s.attr("src",r.currentImage.attr("src")),r.currentSlide=e(this).attr("rel")-1,f(o,a,i,"control"),void 0)})}i.pauseOnHover&&o.hover(function(){r.paused=!0,clearInterval(c),c=""},function(){r.paused=!1,""!==c||i.manualAdvance||(c=setInterval(function(){f(o,a,i,!1)},i.pauseTime))}),o.bind("nivo:animFinished",function(){s.attr("src",r.currentImage.attr("src")),r.running=!1,e(a).each(function(){e(this).is("a")&&e(this).css("display","none")}),e(a[r.currentSlide]).is("a")&&e(a[r.currentSlide]).css("display","block"),""!==c||r.paused||i.manualAdvance||(c=setInterval(function(){f(o,a,i,!1)},i.pauseTime)),i.afterChange.call(this)});var h=function(t,n,i){e(i.currentImage).parent().is("a")&&e(i.currentImage).parent().css("display","block"),e('img[src="'+i.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show();for(var r=e('img[src="'+i.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().is("a")?e('img[src="'+i.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").parent().height():e('img[src="'+i.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height(),o=0;n.slices>o;o++){var a=Math.round(t.width()/n.slices);o===n.slices-1?t.append(e('<div class="nivo-slice" name="'+o+'"><img src="'+i.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(a+o*a-a)+'px;" /></div>').css({left:a*o+"px",width:t.width()-a*o+"px",height:r+"px",opacity:"0",overflow:"hidden"})):t.append(e('<div class="nivo-slice" name="'+o+'"><img src="'+i.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block !important; top:0; left:-"+(a+o*a-a)+'px;" /></div>').css({left:a*o+"px",width:a+"px",height:r+"px",opacity:"0",overflow:"hidden"}))}e(".nivo-slice",t).height(r),s.stop().animate({height:e(i.currentImage).height()},n.animSpeed)},p=function(t,n,i){e(i.currentImage).parent().is("a")&&e(i.currentImage).parent().css("display","block"),e('img[src="'+i.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").width(t.width()).css("visibility","hidden").show();for(var r=Math.round(t.width()/n.boxCols),o=Math.round(e('img[src="'+i.currentImage.attr("src")+'"]',t).not(".nivo-main-image,.nivo-control img").height()/n.boxRows),a=0;n.boxRows>a;a++)for(var l=0;n.boxCols>l;l++)l===n.boxCols-1?(t.append(e('<div class="nivo-box" name="'+l+'" rel="'+a+'"><img src="'+i.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+o*a+"px; left:-"+r*l+'px;" /></div>').css({opacity:0,left:r*l+"px",top:o*a+"px",width:t.width()-r*l+"px"})),e('.nivo-box[name="'+l+'"]',t).height(e('.nivo-box[name="'+l+'"] img',t).height()+"px")):(t.append(e('<div class="nivo-box" name="'+l+'" rel="'+a+'"><img src="'+i.currentImage.attr("src")+'" style="position:absolute; width:'+t.width()+"px; height:auto; display:block; top:-"+o*a+"px; left:-"+r*l+'px;" /></div>').css({opacity:0,left:r*l+"px",top:o*a+"px",width:r+"px"})),e('.nivo-box[name="'+l+'"]',t).height(e('.nivo-box[name="'+l+'"] img',t).height()+"px"));s.stop().animate({height:e(i.currentImage).height()},n.animSpeed)},f=function(t,n,i,r){var o=t.data("nivo:vars");if(o&&o.currentSlide===o.totalSlides-1&&i.lastSlide.call(this),(!o||o.stop)&&!r)return!1;i.beforeChange.call(this),r?("prev"===r&&s.attr("src",o.currentImage.attr("src")),"next"===r&&s.attr("src",o.currentImage.attr("src"))):s.attr("src",o.currentImage.attr("src")),o.currentSlide++,o.currentSlide===o.totalSlides&&(o.currentSlide=0,i.slideshowEnd.call(this)),0>o.currentSlide&&(o.currentSlide=o.totalSlides-1),o.currentImage=e(n[o.currentSlide]).is("img")?e(n[o.currentSlide]):e(n[o.currentSlide]).find("img:first"),i.controlNav&&(e("a",o.controlNavEl).removeClass("active"),e("a:eq("+o.currentSlide+")",o.controlNavEl).addClass("active")),l(i),e(".nivo-slice",t).remove(),e(".nivo-box",t).remove();var a=i.effect,c="";"random"===i.effect&&(c=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"],a=c[Math.floor(Math.random()*(c.length+1))],void 0===a&&(a="fade")),-1!==i.effect.indexOf(",")&&(c=i.effect.split(","),a=c[Math.floor(Math.random()*c.length)],void 0===a&&(a="fade")),o.currentImage.attr("data-transition")&&(a=o.currentImage.attr("data-transition")),o.running=!0;var u=0,d=0,f="",m="",v="",b="";if("sliceDown"===a||"sliceDownRight"===a||"sliceDownLeft"===a)h(t,i,o),u=0,d=0,f=e(".nivo-slice",t),"sliceDownLeft"===a&&(f=e(".nivo-slice",t)._reverse()),f.each(function(){var n=e(this);n.css({top:"0px"}),d===i.slices-1?setTimeout(function(){n.animate({opacity:"1.0"},i.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+u):setTimeout(function(){n.animate({opacity:"1.0"},i.animSpeed)},100+u),u+=50,d++});else if("sliceUp"===a||"sliceUpRight"===a||"sliceUpLeft"===a)h(t,i,o),u=0,d=0,f=e(".nivo-slice",t),"sliceUpLeft"===a&&(f=e(".nivo-slice",t)._reverse()),f.each(function(){var n=e(this);n.css({bottom:"0px"}),d===i.slices-1?setTimeout(function(){n.animate({opacity:"1.0"},i.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+u):setTimeout(function(){n.animate({opacity:"1.0"},i.animSpeed)},100+u),u+=50,d++});else if("sliceUpDown"===a||"sliceUpDownRight"===a||"sliceUpDownLeft"===a){h(t,i,o),u=0,d=0;var y=0;f=e(".nivo-slice",t),"sliceUpDownLeft"===a&&(f=e(".nivo-slice",t)._reverse()),f.each(function(){var n=e(this);0===d?(n.css("top","0px"),d++):(n.css("bottom","0px"),d=0),y===i.slices-1?setTimeout(function(){n.animate({opacity:"1.0"},i.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+u):setTimeout(function(){n.animate({opacity:"1.0"},i.animSpeed)},100+u),u+=50,y++})}else if("fold"===a)h(t,i,o),u=0,d=0,e(".nivo-slice",t).each(function(){var n=e(this),r=n.width();n.css({top:"0px",width:"0px"}),d===i.slices-1?setTimeout(function(){n.animate({width:r,opacity:"1.0"},i.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+u):setTimeout(function(){n.animate({width:r,opacity:"1.0"},i.animSpeed)},100+u),u+=50,d++});else if("fade"===a)h(t,i,o),m=e(".nivo-slice:first",t),m.css({width:t.width()+"px"}),m.animate({opacity:"1.0"},2*i.animSpeed,"",function(){t.trigger("nivo:animFinished")});else if("slideInRight"===a)h(t,i,o),m=e(".nivo-slice:first",t),m.css({width:"0px",opacity:"1"}),m.animate({width:t.width()+"px"},2*i.animSpeed,"",function(){t.trigger("nivo:animFinished")});else if("slideInLeft"===a)h(t,i,o),m=e(".nivo-slice:first",t),m.css({width:"0px",opacity:"1",left:"",right:"0px"}),m.animate({width:t.width()+"px"},2*i.animSpeed,"",function(){m.css({left:"0px",right:""}),t.trigger("nivo:animFinished")});else if("boxRandom"===a)p(t,i,o),v=i.boxCols*i.boxRows,d=0,u=0,b=g(e(".nivo-box",t)),b.each(function(){var n=e(this);d===v-1?setTimeout(function(){n.animate({opacity:"1"},i.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+u):setTimeout(function(){n.animate({opacity:"1"},i.animSpeed)},100+u),u+=20,d++});else if("boxRain"===a||"boxRainReverse"===a||"boxRainGrow"===a||"boxRainGrowReverse"===a){p(t,i,o),v=i.boxCols*i.boxRows,d=0,u=0;var x=0,w=0,k=[];k[x]=[],b=e(".nivo-box",t),("boxRainReverse"===a||"boxRainGrowReverse"===a)&&(b=e(".nivo-box",t)._reverse()),b.each(function(){k[x][w]=e(this),w++,w===i.boxCols&&(x++,w=0,k[x]=[])});for(var C=0;2*i.boxCols>C;C++){for(var _=C,T=0;i.boxRows>T;T++)_>=0&&i.boxCols>_&&(function(n,r,o,s,l){var c=e(k[n][r]),u=c.width(),d=c.height();("boxRainGrow"===a||"boxRainGrowReverse"===a)&&c.width(0).height(0),s===l-1?setTimeout(function(){c.animate({opacity:"1",width:u,height:d},i.animSpeed/1.3,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){c.animate({opacity:"1",width:u,height:d},i.animSpeed/1.3)},100+o)}(T,_,u,d,v),d++),_--;u+=100}}},g=function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i,10),n=e[--i],e[i]=e[t],e[t]=n);return e},m=function(e){this.console&&console.log!==void 0&&console.log(e)};return this.stop=function(){e(t).data("nivo:vars").stop||(e(t).data("nivo:vars").stop=!0,m("Stop Slider"))},this.start=function(){e(t).data("nivo:vars").stop&&(e(t).data("nivo:vars").stop=!1,m("Start Slider"))},i.afterLoad.call(this),this};e.fn.nivoSlider=function(n){return this.each(function(){var i=e(this);if(i.data("nivoslider"))return i.data("nivoslider");var r=new t(this,n);i.data("nivoslider",r)})},e.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:!0,controlNav:!0,controlNavThumbs:!1,pauseOnHover:!0,manualAdvance:!1,prevText:"Prev",nextText:"Next",randomStart:!1,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}},e.fn._reverse=[].reverse})(jQuery);
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(factory)}else if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=factory()}else if(typeof Package!=="undefined"){Sortable=factory()}else{window.Sortable=factory()}})(function(){"use strict";if(typeof window=="undefined"||typeof window.document=="undefined"){return function(){throw new Error("Sortable.js requires a window with a document")}}
var dragEl,parentEl,ghostEl,cloneEl,rootEl,nextEl,scrollEl,scrollParentEl,lastEl,lastCSS,lastParentCSS,oldIndex,newIndex,activeGroup,autoScroll={},tapEvt,touchEvt,moved,RSPACE=/\s+/g,expando='Sortable'+(new Date).getTime(),win=window,document=win.document,parseInt=win.parseInt,supportDraggable=!!('draggable' in document.createElement('div')),supportCssPointerEvents=(function(el){el=document.createElement('x');el.style.cssText='pointer-events:auto';return el.style.pointerEvents==='auto'})(),_silent=!1,abs=Math.abs,slice=[].slice,touchDragOverListeners=[],_autoScroll=_throttle(function(evt,options,rootEl){if(rootEl&&options.scroll){var el,rect,sens=options.scrollSensitivity,speed=options.scrollSpeed,x=evt.clientX,y=evt.clientY,winWidth=window.innerWidth,winHeight=window.innerHeight,vx,vy;if(scrollParentEl!==rootEl){scrollEl=options.scroll;scrollParentEl=rootEl;if(scrollEl===!0){scrollEl=rootEl;do{if((scrollEl.offsetWidth<scrollEl.scrollWidth)||(scrollEl.offsetHeight<scrollEl.scrollHeight)){break}}while(scrollEl=scrollEl.parentNode);}}
if(scrollEl){el=scrollEl;rect=scrollEl.getBoundingClientRect();vx=(abs(rect.right-x)<=sens)-(abs(rect.left-x)<=sens);vy=(abs(rect.bottom-y)<=sens)-(abs(rect.top-y)<=sens)}
if(!(vx||vy)){vx=(winWidth-x<=sens)-(x<=sens);vy=(winHeight-y<=sens)-(y<=sens);(vx||vy)&&(el=win)}
if(autoScroll.vx!==vx||autoScroll.vy!==vy||autoScroll.el!==el){autoScroll.el=el;autoScroll.vx=vx;autoScroll.vy=vy;clearInterval(autoScroll.pid);if(el){autoScroll.pid=setInterval(function(){if(el===win){win.scrollTo(win.pageXOffset+vx*speed,win.pageYOffset+vy*speed)}else{vy&&(el.scrollTop+=vy*speed);vx&&(el.scrollLeft+=vx*speed)}},24)}}}},30),_prepareGroup=function(options){var group=options.group;if(!group||typeof group!='object'){group=options.group={name:group}}['pull','put'].forEach(function(key){if(!(key in group)){group[key]=!0}});options.groups=' '+group.name+(group.put.join?' '+group.put.join(' '):'')+' '};function Sortable(el,options){if(!(el&&el.nodeType&&el.nodeType===1)){throw 'Sortable: `el` must be HTMLElement, and not '+{}.toString.call(el)}
this.el=el;this.options=options=_extend({},options);el[expando]=this;var defaults={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(el.nodeName)?'li':'>*',ghostClass:'sortable-ghost',chosenClass:'sortable-chosen',ignore:'a, img',filter:null,animation:0,setData:function(dataTransfer,dragEl){dataTransfer.setData('Text',dragEl.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:'data-id',delay:0,forceFallback:!1,fallbackClass:'sortable-fallback',fallbackOnBody:!1};for(var name in defaults){!(name in options)&&(options[name]=defaults[name])}
_prepareGroup(options);for(var fn in this){if(fn.charAt(0)==='_'){this[fn]=this[fn].bind(this)}}
this.nativeDraggable=options.forceFallback?!1:supportDraggable;_on(el,'mousedown',this._onTapStart);_on(el,'touchstart',this._onTapStart);if(this.nativeDraggable){_on(el,'dragover',this);_on(el,'dragenter',this)}
touchDragOverListeners.push(this._onDragOver);options.store&&this.sort(options.store.get(this))}
Sortable.prototype={constructor:Sortable,_onTapStart:function(evt){var _this=this,el=this.el,options=this.options,type=evt.type,touch=evt.touches&&evt.touches[0],target=(touch||evt).target,originalTarget=target,filter=options.filter;if(type==='mousedown'&&evt.button!==0||options.disabled){return}
target=_closest(target,options.draggable,el);if(!target){return}
oldIndex=_index(target,options.draggable);if(typeof filter==='function'){if(filter.call(this,evt,target,this)){_dispatchEvent(_this,originalTarget,'filter',target,el,oldIndex);evt.preventDefault();return}}else if(filter){filter=filter.split(',').some(function(criteria){criteria=_closest(originalTarget,criteria.trim(),el);if(criteria){_dispatchEvent(_this,criteria,'filter',target,el,oldIndex);return!0}});if(filter){return}}
if(options.handle&&!_closest(originalTarget,options.handle,el)){return}
this._prepareDragStart(evt,touch,target)},_prepareDragStart:function(evt,touch,target){var _this=this,el=_this.el,options=_this.options,ownerDocument=el.ownerDocument,dragStartFn;if(target&&!dragEl&&(target.parentNode===el)){tapEvt=evt;rootEl=el;dragEl=target;parentEl=dragEl.parentNode;nextEl=dragEl.nextSibling;activeGroup=options.group;dragStartFn=function(){_this._disableDelayedDrag();dragEl.draggable=!0;_toggleClass(dragEl,_this.options.chosenClass,!0);_this._triggerDragStart(touch)};options.ignore.split(',').forEach(function(criteria){_find(dragEl,criteria.trim(),_disableDraggable)});_on(ownerDocument,'mouseup',_this._onDrop);_on(ownerDocument,'touchend',_this._onDrop);_on(ownerDocument,'touchcancel',_this._onDrop);if(options.delay){_on(ownerDocument,'mouseup',_this._disableDelayedDrag);_on(ownerDocument,'touchend',_this._disableDelayedDrag);_on(ownerDocument,'touchcancel',_this._disableDelayedDrag);_on(ownerDocument,'mousemove',_this._disableDelayedDrag);_on(ownerDocument,'touchmove',_this._disableDelayedDrag);_this._dragStartTimer=setTimeout(dragStartFn,options.delay)}else{dragStartFn()}}},_disableDelayedDrag:function(){var ownerDocument=this.el.ownerDocument;clearTimeout(this._dragStartTimer);_off(ownerDocument,'mouseup',this._disableDelayedDrag);_off(ownerDocument,'touchend',this._disableDelayedDrag);_off(ownerDocument,'touchcancel',this._disableDelayedDrag);_off(ownerDocument,'mousemove',this._disableDelayedDrag);_off(ownerDocument,'touchmove',this._disableDelayedDrag)},_triggerDragStart:function(touch){if(touch){tapEvt={target:dragEl,clientX:touch.clientX,clientY:touch.clientY};this._onDragStart(tapEvt,'touch')}else if(!this.nativeDraggable){this._onDragStart(tapEvt,!0)}else{_on(dragEl,'dragend',this);_on(rootEl,'dragstart',this._onDragStart)}
try{if(document.selection){document.selection.empty()}else{window.getSelection().removeAllRanges()}}catch(err){}},_dragStarted:function(){if(rootEl&&dragEl){_toggleClass(dragEl,this.options.ghostClass,!0);Sortable.active=this;_dispatchEvent(this,rootEl,'start',dragEl,rootEl,oldIndex)}},_emulateDragOver:function(){if(touchEvt){if(this._lastX===touchEvt.clientX&&this._lastY===touchEvt.clientY){return}
this._lastX=touchEvt.clientX;this._lastY=touchEvt.clientY;if(!supportCssPointerEvents){_css(ghostEl,'display','none')}
var target=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),parent=target,groupName=' '+this.options.group.name+'',i=touchDragOverListeners.length;if(parent){do{if(parent[expando]&&parent[expando].options.groups.indexOf(groupName)>-1){while(i--){touchDragOverListeners[i]({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:target,rootEl:parent})}
break}
target=parent}
while(parent=parent.parentNode);}
if(!supportCssPointerEvents){_css(ghostEl,'display','')}}},_onTouchMove:function(evt){if(tapEvt){if(!Sortable.active){this._dragStarted()}
this._appendGhost();var touch=evt.touches?evt.touches[0]:evt,dx=touch.clientX-tapEvt.clientX,dy=touch.clientY-tapEvt.clientY,translate3d=evt.touches?'translate3d('+dx+'px,'+dy+'px,0)':'translate('+dx+'px,'+dy+'px)';moved=!0;touchEvt=touch;_css(ghostEl,'webkitTransform',translate3d);_css(ghostEl,'mozTransform',translate3d);_css(ghostEl,'msTransform',translate3d);_css(ghostEl,'transform',translate3d);evt.preventDefault()}},_appendGhost:function(){if(!ghostEl){var rect=dragEl.getBoundingClientRect(),css=_css(dragEl),options=this.options,ghostRect;ghostEl=dragEl.cloneNode(!0);_toggleClass(ghostEl,options.ghostClass,!1);_toggleClass(ghostEl,options.fallbackClass,!0);_css(ghostEl,'top',rect.top-parseInt(css.marginTop,10));_css(ghostEl,'left',rect.left-parseInt(css.marginLeft,10));_css(ghostEl,'width',rect.width);_css(ghostEl,'height',rect.height);_css(ghostEl,'opacity','0.8');_css(ghostEl,'position','fixed');_css(ghostEl,'zIndex','100000');_css(ghostEl,'pointerEvents','none');options.fallbackOnBody&&document.body.appendChild(ghostEl)||rootEl.appendChild(ghostEl);ghostRect=ghostEl.getBoundingClientRect();_css(ghostEl,'width',rect.width*2-ghostRect.width);_css(ghostEl,'height',rect.height*2-ghostRect.height)}},_onDragStart:function(evt,useFallback){var dataTransfer=evt.dataTransfer,options=this.options;this._offUpEvents();if(activeGroup.pull=='clone'){cloneEl=dragEl.cloneNode(!0);_css(cloneEl,'display','none');rootEl.insertBefore(cloneEl,dragEl)}
if(useFallback){if(useFallback==='touch'){_on(document,'touchmove',this._onTouchMove);_on(document,'touchend',this._onDrop);_on(document,'touchcancel',this._onDrop)}else{_on(document,'mousemove',this._onTouchMove);_on(document,'mouseup',this._onDrop)}
this._loopId=setInterval(this._emulateDragOver,50)}else{if(dataTransfer){dataTransfer.effectAllowed='move';options.setData&&options.setData.call(this,dataTransfer,dragEl)}
_on(document,'drop',this);setTimeout(this._dragStarted,0)}},_onDragOver:function(evt){var el=this.el,target,dragRect,revert,options=this.options,group=options.group,groupPut=group.put,isOwner=(activeGroup===group),canSort=options.sort;if(evt.preventDefault!==void 0){evt.preventDefault();!options.dragoverBubble&&evt.stopPropagation()}
moved=!0;if(activeGroup&&!options.disabled&&(isOwner?canSort||(revert=!rootEl.contains(dragEl)):activeGroup.pull&&groupPut&&((activeGroup.name===group.name)||(groupPut.indexOf&&~groupPut.indexOf(activeGroup.name))))&&(evt.rootEl===void 0||evt.rootEl===this.el)){_autoScroll(evt,options,this.el);if(_silent){return}
target=_closest(evt.target,options.draggable,el);dragRect=dragEl.getBoundingClientRect();if(revert){_cloneHide(!0);if(cloneEl||nextEl){rootEl.insertBefore(dragEl,cloneEl||nextEl)}else if(!canSort){rootEl.appendChild(dragEl)}
return}
if((el.children.length===0)||(el.children[0]===ghostEl)||(el===evt.target)&&(target=_ghostIsLast(el,evt))){if(target){if(target.animated){return}
targetRect=target.getBoundingClientRect()}
_cloneHide(isOwner);if(_onMove(rootEl,el,dragEl,dragRect,target,targetRect)!==!1){if(!dragEl.contains(el)){el.appendChild(dragEl);parentEl=el}
this._animate(dragRect,dragEl);target&&this._animate(targetRect,target)}}else if(target&&!target.animated&&target!==dragEl&&(target.parentNode[expando]!==void 0)){if(lastEl!==target){lastEl=target;lastCSS=_css(target);lastParentCSS=_css(target.parentNode)}
var targetRect=target.getBoundingClientRect(),width=targetRect.right-targetRect.left,height=targetRect.bottom-targetRect.top,floating=/left|right|inline/.test(lastCSS.cssFloat+lastCSS.display)||(lastParentCSS.display=='flex'&&lastParentCSS['flex-direction'].indexOf('row')===0),isWide=(target.offsetWidth>dragEl.offsetWidth),isLong=(target.offsetHeight>dragEl.offsetHeight),halfway=(floating?(evt.clientX-targetRect.left)/width:(evt.clientY-targetRect.top)/height)>0.5,nextSibling=target.nextElementSibling,moveVector=_onMove(rootEl,el,dragEl,dragRect,target,targetRect),after;if(moveVector!==!1){_silent=!0;setTimeout(_unsilent,30);_cloneHide(isOwner);if(moveVector===1||moveVector===-1){after=(moveVector===1)}else if(floating){var elTop=dragEl.offsetTop,tgTop=target.offsetTop;if(elTop===tgTop){after=(target.previousElementSibling===dragEl)&&!isWide||halfway&&isWide}else{after=tgTop>elTop}}else{after=(nextSibling!==dragEl)&&!isLong||halfway&&isLong}
if(!dragEl.contains(el)){if(after&&!nextSibling){el.appendChild(dragEl)}else{target.parentNode.insertBefore(dragEl,after?nextSibling:target)}}
parentEl=dragEl.parentNode;this._animate(dragRect,dragEl);this._animate(targetRect,target)}}}},_animate:function(prevRect,target){var ms=this.options.animation;if(ms){var currentRect=target.getBoundingClientRect();_css(target,'transition','none');_css(target,'transform','translate3d('+(prevRect.left-currentRect.left)+'px,'+(prevRect.top-currentRect.top)+'px,0)');target.offsetWidth;_css(target,'transition','all '+ms+'ms');_css(target,'transform','translate3d(0,0,0)');clearTimeout(target.animated);target.animated=setTimeout(function(){_css(target,'transition','');_css(target,'transform','');target.animated=!1},ms)}},_offUpEvents:function(){var ownerDocument=this.el.ownerDocument;_off(document,'touchmove',this._onTouchMove);_off(ownerDocument,'mouseup',this._onDrop);_off(ownerDocument,'touchend',this._onDrop);_off(ownerDocument,'touchcancel',this._onDrop)},_onDrop:function(evt){var el=this.el,options=this.options;clearInterval(this._loopId);clearInterval(autoScroll.pid);clearTimeout(this._dragStartTimer);_off(document,'mousemove',this._onTouchMove);if(this.nativeDraggable){_off(document,'drop',this);_off(el,'dragstart',this._onDragStart)}
this._offUpEvents();if(evt){if(moved){evt.preventDefault();!options.dropBubble&&evt.stopPropagation()}
ghostEl&&ghostEl.parentNode.removeChild(ghostEl);if(dragEl){if(this.nativeDraggable){_off(dragEl,'dragend',this)}
_disableDraggable(dragEl);_toggleClass(dragEl,this.options.ghostClass,!1);_toggleClass(dragEl,this.options.chosenClass,!1);if(rootEl!==parentEl){newIndex=_index(dragEl,options.draggable);if(newIndex>=0){_dispatchEvent(null,parentEl,'sort',dragEl,rootEl,oldIndex,newIndex);_dispatchEvent(this,rootEl,'sort',dragEl,rootEl,oldIndex,newIndex);_dispatchEvent(null,parentEl,'add',dragEl,rootEl,oldIndex,newIndex);_dispatchEvent(this,rootEl,'remove',dragEl,rootEl,oldIndex,newIndex)}}else{cloneEl&&cloneEl.parentNode.removeChild(cloneEl);if(dragEl.nextSibling!==nextEl){newIndex=_index(dragEl,options.draggable);if(newIndex>=0){_dispatchEvent(this,rootEl,'update',dragEl,rootEl,oldIndex,newIndex);_dispatchEvent(this,rootEl,'sort',dragEl,rootEl,oldIndex,newIndex)}}}
if(Sortable.active){if(newIndex===null||newIndex===-1){newIndex=oldIndex}
_dispatchEvent(this,rootEl,'end',dragEl,rootEl,oldIndex,newIndex);this.save()}}}
this._nulling()},_nulling:function(){rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=scrollEl=scrollParentEl=tapEvt=touchEvt=moved=newIndex=lastEl=lastCSS=activeGroup=Sortable.active=null},handleEvent:function(evt){var type=evt.type;if(type==='dragover'||type==='dragenter'){if(dragEl){this._onDragOver(evt);_globalDragOver(evt)}}else if(type==='drop'||type==='dragend'){this._onDrop(evt)}},toArray:function(){var order=[],el,children=this.el.children,i=0,n=children.length,options=this.options;for(;i<n;i++){el=children[i];if(_closest(el,options.draggable,this.el)){order.push(el.getAttribute(options.dataIdAttr)||_generateId(el))}}
return order},sort:function(order){var items={},rootEl=this.el;this.toArray().forEach(function(id,i){var el=rootEl.children[i];if(_closest(el,this.options.draggable,rootEl)){items[id]=el}},this);order.forEach(function(id){if(items[id]){rootEl.removeChild(items[id]);rootEl.appendChild(items[id])}})},save:function(){var store=this.options.store;store&&store.set(this)},closest:function(el,selector){return _closest(el,selector||this.options.draggable,this.el)},option:function(name,value){var options=this.options;if(value===void 0){return options[name]}else{options[name]=value;if(name==='group'){_prepareGroup(options)}}},destroy:function(){var el=this.el;el[expando]=null;_off(el,'mousedown',this._onTapStart);_off(el,'touchstart',this._onTapStart);if(this.nativeDraggable){_off(el,'dragover',this);_off(el,'dragenter',this)}
Array.prototype.forEach.call(el.querySelectorAll('[draggable]'),function(el){el.removeAttribute('draggable')});touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver),1);this._onDrop();this.el=el=null}};function _cloneHide(state){if(cloneEl&&(cloneEl.state!==state)){_css(cloneEl,'display',state?'none':'');!state&&cloneEl.state&&rootEl.insertBefore(cloneEl,dragEl);cloneEl.state=state}}
function _closest(el,selector,ctx){if(el){ctx=ctx||document;do{if((selector==='>*'&&el.parentNode===ctx)||_matches(el,selector)){return el}}
while(el!==ctx&&(el=el.parentNode));}
return null}
function _globalDragOver(evt){if(evt.dataTransfer){evt.dataTransfer.dropEffect='move'}
evt.preventDefault()}
function _on(el,event,fn){el.addEventListener(event,fn,!1)}
function _off(el,event,fn){el.removeEventListener(event,fn,!1)}
function _toggleClass(el,name,state){if(el){if(el.classList){el.classList[state?'add':'remove'](name)}else{var className=(' '+el.className+' ').replace(RSPACE,' ').replace(' '+name+' ',' ');el.className=(className+(state?' '+name:'')).replace(RSPACE,' ')}}}
function _css(el,prop,val){var style=el&&el.style;if(style){if(val===void 0){if(document.defaultView&&document.defaultView.getComputedStyle){val=document.defaultView.getComputedStyle(el,'')}else if(el.currentStyle){val=el.currentStyle}
return prop===void 0?val:val[prop]}else{if(!(prop in style)){prop='-webkit-'+prop}
style[prop]=val+(typeof val==='string'?'':'px')}}}
function _find(ctx,tagName,iterator){if(ctx){var list=ctx.getElementsByTagName(tagName),i=0,n=list.length;if(iterator){for(;i<n;i++){iterator(list[i],i)}}
return list}
return[]}
function _dispatchEvent(sortable,rootEl,name,targetEl,fromEl,startIndex,newIndex){var evt=document.createEvent('Event'),options=(sortable||rootEl[expando]).options,onName='on'+name.charAt(0).toUpperCase()+name.substr(1);evt.initEvent(name,!0,!0);evt.to=rootEl;evt.from=fromEl||rootEl;evt.item=targetEl||rootEl;evt.clone=cloneEl;evt.oldIndex=startIndex;evt.newIndex=newIndex;rootEl.dispatchEvent(evt);if(options[onName]){options[onName].call(sortable,evt)}}
function _onMove(fromEl,toEl,dragEl,dragRect,targetEl,targetRect){var evt,sortable=fromEl[expando],onMoveFn=sortable.options.onMove,retVal;evt=document.createEvent('Event');evt.initEvent('move',!0,!0);evt.to=toEl;evt.from=fromEl;evt.dragged=dragEl;evt.draggedRect=dragRect;evt.related=targetEl||toEl;evt.relatedRect=targetRect||toEl.getBoundingClientRect();fromEl.dispatchEvent(evt);if(onMoveFn){retVal=onMoveFn.call(sortable,evt)}
return retVal}
function _disableDraggable(el){el.draggable=!1}
function _unsilent(){_silent=!1}
function _ghostIsLast(el,evt){var lastEl=el.lastElementChild,rect=lastEl.getBoundingClientRect();return((evt.clientY-(rect.top+rect.height)>5)||(evt.clientX-(rect.right+rect.width)>5))&&lastEl}
function _generateId(el){var str=el.tagName+el.className+el.src+el.href+el.textContent,i=str.length,sum=0;while(i--){sum+=str.charCodeAt(i)}
return sum.toString(36)}
function _index(el,selector){var index=0;if(!el||!el.parentNode){return-1}
while(el&&(el=el.previousElementSibling)){if(el.nodeName.toUpperCase()!=='TEMPLATE'&&_matches(el,selector)){index++}}
return index}
function _matches(el,selector){if(el){selector=selector.split('.');var tag=selector.shift().toUpperCase(),re=new RegExp('\\s('+selector.join('|')+')(?=\\s)','g');return((tag===''||el.nodeName.toUpperCase()==tag)&&(!selector.length||((' '+el.className+' ').match(re)||[]).length==selector.length))}
return!1}
function _throttle(callback,ms){var args,_this;return function(){if(args===void 0){args=arguments;_this=this;setTimeout(function(){if(args.length===1){callback.call(_this,args[0])}else{callback.apply(_this,args)}
args=void 0},ms)}}}
function _extend(dst,src){if(dst&&src){for(var key in src){if(src.hasOwnProperty(key)){dst[key]=src[key]}}}
return dst}
Sortable.utils={on:_on,off:_off,css:_css,find:_find,is:function(el,selector){return!!_closest(el,selector,el)},extend:_extend,throttle:_throttle,closest:_closest,toggleClass:_toggleClass,index:_index};Sortable.create=function(el,options){return new Sortable(el,options)};Sortable.version='1.4.2';return Sortable});function Cobler(options){var topics={};this.options=options
this.options.active=this.options.active||'widget_active';this.options.itemContainer=this.options.itemContainer||'itemContainer';this.options.itemTarget=this.options.itemTarget||'cobler-li-content';this.options.sortSelected=this.options.sortSelected||!1;options.removed=!1;this.subscribe=function(topic,listener){if(!topics[topic])topics[topic]=[];topics[topic].push(listener)}.bind({topics:topics})
this.publish=function(topic,data){if(!topics[topic]||topics[topic].length<1)return;topics[topic].forEach(function(listener){listener(data||{})})}.bind({topics:topics})
var collections=[];for(var i=0;i<options.targets.length;i++){var items=options.items[i];if(i==options.targets.length-1&&options.items.length>options.targets.length){for(var j=i+1;j<options.items.length;j++){items=items.concat(options.items[j])}}
addCollection.call(this,options.targets[i],items)}
function collection(target,items,cob){var sortable;var events={};function init(){events.em=eventManager.bind(this);target.addEventListener('click',events.em,!1);if(!cob.options.disabled){events.im=instanceManager.bind(this);target.addEventListener('click',events.im,!1);if(target.className.split(' ').indexOf('cobler_container')<0){target.className+=' cobler_container'}
var filter="input, textarea";if(!cob.options.sortSelected){filter+=", ."+cob.options.active}
sortable=Sortable.create(target,{forceFallback:!!cob.options.fallback,group:cob.options.group||'cb',animation:50,preventOnFilter:!1,filter:filter,onSort:function(evt){if(cob.options.remove){cob.options.removed=items.splice(parseInt(evt.item.dataset.start,10),1)[0];cob.options.remove=!1}else if(evt.from!==evt.to&&typeof evt.item.dataset.type==='undefined'){cob.options.remove=!0}},onAdd:addOnDrop.bind(this),onUpdate:function(evt){var item=items.splice(parseInt(evt.item.dataset.start,10),1)[0];items.splice(getNodeIndex(evt.item),0,item);evt.item.removeAttribute('data-start');cob.publish('change',item);cob.publish('reorder',item)},onStart:function(evt){evt.item.dataset.start=getNodeIndex(evt.item)}})}
loadItems.call(this,items)}
function reset(items){target.innerHTML='';items=items||[]}
function addOnDrop(evt){var A=evt.item;if(A.parentNode===target){var newItem;if(typeof A.dataset.type!=='undefined'){newItem=new Cobler.types[A.dataset.type](this)}else{var temp=cob.options.removed.get();newItem=new Cobler.types[temp.widgetType](this);newItem.set(temp);evt.newIndex=getNodeIndex(evt.item)}
var renderedItem=renderItem.call(this.owner,newItem);var a=A.parentNode.replaceChild(renderedItem,A);items.splice(evt.newIndex,0,newItem);if(typeof newItem.initialize!=='undefined'){newItem.initialize(renderedItem)}
if(typeof A.dataset.type!=='undefined'){activate(renderedItem)}else{cob.options.removed=!1}}
this.owner.publish('moved',newItem)}
function eventManager(e){if(typeof e.target.dataset.event!=='undefined'){var referenceNode=e.target.parentElement;while(referenceNode!==null&&!referenceNode.classList.contains('slice')){referenceNode=referenceNode.parentElement}
cob.publish(e.target.dataset.event,items[getNodeIndex(referenceNode)])}}
function instanceManager(e){var referenceNode=e.target.parentElement;while(referenceNode!==null&&!referenceNode.classList.contains('slice')&&!referenceNode.classList.contains('widget')){referenceNode=referenceNode.parentElement}
var classList=e.target.className.split(' ');if(classList.indexOf('remove-item')>=0){if(confirm('Are you sure you want to delete this widget?')){var olditem=items.splice(getNodeIndex(referenceNode),1);target.removeChild(referenceNode);deactivate();cob.publish('remove',olditem);cob.publish('change',olditem)}}else if(classList.indexOf('duplicate-item')>=0){deactivate();var index=getNodeIndex(referenceNode);addItem.call(this,items[index].get(),index+1)}else if(classList.indexOf('edit-item')>=0){activate(referenceNode)}else if(e.target.tagName==='LI'&&target.className.indexOf('cobler_select')!=-1){deactivate();activate(e.target)}}
function activate(targetEL){targetEL.className+=' '+cob.options.active;active=getNodeIndex(targetEL);cob.publish('activate',items[active]);items[active].edit();cob.publish('activated',items[active])}
function update(data,item){var item=item||items[active];item.set(data);var temp=renderItem.call(cob,item);if(items[active]==item){temp.className+=' '+cob.options.active}
var modEL=elementOf(item);var a=modEL.parentNode.replaceChild(temp,modEL);if(typeof item.initialize!=='undefined'){item.initialize(temp)}
cob.publish('change',item)}
function deactivate(){active=null;var elems=target.getElementsByClassName(cob.options.active);[].forEach.call(elems,function(el){el.className=el.className.replace(cob.options.active,'')});cob.publish('deactivate')}
function loadItems(obj){deactivate();reset(obj);items=[];for(var i in obj){addItem.call(this,obj[i],!1,!0)}}
function addItem(widgetType,index,silent){if(typeof widgetType==='undefined'||typeof Cobler.types[widgetType.widgetType||widgetType]==='undefined'){return!1}
index=index||items.length;var newItem=new Cobler.types[widgetType.widgetType||widgetType](this)
if(typeof widgetType!=='string'){newItem.set(widgetType)}
items.splice(index,0,newItem);var renderedItem=renderItem.call(this.owner,newItem);target.insertBefore(renderedItem,target.childNodes[index]);if(typeof newItem.initialize!=='undefined'){newItem.initialize(renderedItem)}
if(!silent){activate(renderedItem);cob.publish('change',newItem)}}
function toJSON(opts){var json=[];for(var i in items){json.push(items[i].toJSON(opts))}
if(typeof opts!=='undefined'&&opts.object)return{target:target.dataset.id,items:json};return json}
function toHTML(){var temp='';for(var i in items){temp+=items[i].toHTML()}
return temp}
function destroy(){reset();if(typeof sortable!=='undefined'){sortable.destroy()}
target.removeEventListener('click',events.em,!1);target.removeEventListener('click',events.im,!1)}
function indexOf(item){return items.indexOf(item)}
function elementOf(item){return target.children[items.indexOf(item)]}
return{addItem:addItem,toJSON:toJSON,toHTML:toHTML,deactivate:deactivate,activate:activate,clear:reset,load:loadItems,update:update.bind(this),destroy:destroy,owner:cob,init:init,indexOf:indexOf,elementOf:elementOf,getItems:function(){return items}.bind(this),}}
function renderItem(item){var EL;if(options.disabled){EL=document.createElement('DIV')}else{EL=document.createElement('LI')}
EL.className='slice';EL.dataset.name=item.get().name+' - ('+item.get().widgetType+')';EL.innerHTML=templates[item.template||this.options.itemContainer].render(item.get(),templates);var component=item.render();if(typeof component=="object"&&component instanceof Node){EL.querySelector('.'+(item.target||this.options.itemTarget)).append(component)}
if(typeof component=="string"){EL.getElementsByClassName(item.target||this.options.itemTarget)[0].innerHTML+=item.render()}
return EL}
function getNodeIndex(node){var index=0;while(node=node.previousSibling){if(node.nodeType!=3||!/^\s*$/.test(node.data)){index++}}
return index}
function addCollection(target,item){var newCol=new collection(target,item,this);newCol.init();collections.push(newCol)}
function addSource(element){Sortable.create(element,{group:{name:'cb',pull:'clone',put:!1},sort:!1})}
function applyToEach(func){return function(opts){var temp=[];for(var i in collections){temp.push(collections[i][func].call(null,opts))}
this.publish(func,temp);return temp}.bind(this)}
return{collections:collections,addCollection:addCollection.bind(this),addSource:addSource,toJSON:applyToEach.call(this,'toJSON'),toHTML:applyToEach.call(this,'toHTML'),clear:applyToEach.call(this,'clear'),deactivate:applyToEach.call(this,'deactivate'),destroy:applyToEach.call(this,'destroy'),on:this.subscribe,version:'1.2.0'}}
Cobler.types={};defaultCobEditor=function(container,renderer){return function(){var formConfig=$.extend(!0,{},{renderer:renderer||'base',data:this.get(),fields:_.map(this.fields,function(field,key){if(!('label' in field))field.label=key;if(!('name' in field))field.name=key.toLocaleLowerCase().split(' ').join('_');return field}),autoDestroy:!0,horizotal:!1},this.formOptions||{});var opts=container.owner.options;var events='save';if(typeof opts.formTarget!=='undefined'&&opts.formTarget.length){formConfig.actions=!1;events='change'}
return new gform(formConfig,opts.formTarget||$(container.elementOf(this))[0]).on(events,function(e){if(e.form.validate()){container.update(e.form.get(),this);container.deactivate();e.form.trigger('saved')}}.bind(this)).on('cancel',function(e){container.update(this.get(),this)
container.deactivate()}.bind(this))}};gform.types.contenteditable=gform.types.contentEditable
Cobler.types.Content=function(container){function render(){return templates.widgets_content.render(get(),templates)}
function get(){item.widgetType='Content';return item}
function set(newItem){$.extend(item,newItem)}
var item={title:'This is the title',text:'Here is some text',guid:generateUUID()}
var fields={Title:{},"Editor":{name:'editor',type:'radio',value:'contenteditable',options:[{'label':'WYSIWYG Editor',value:'contenteditable'},{'label':'HTML',value:'ace'}]},Text:{name:'text',type:'ace',mode:'ace/mode/html',label:!1,show:!1},}
return{container:container,fields:fields,render:render,toJSON:get,edit:defaultCobEditor.call(this,container),get:get,set:set,initialize:function(el){if(typeof this.get().editor!=='undefined'){this.fields.Editor.show=!1;this.fields.Text.show=!0;this.fields.Text.type=this.get().editor}
if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}}}};Cobler.types.Image=function(container){function render(){var temp=get();temp.image_admin=group_admin;temp.group_id=group_id;return templates.widgets_image_header.render(temp,templates)}
function get(){item.widgetType='Image';return item}
function toJSON(){return get()}
function set(newItem){$.extend(item,newItem)}
var item={images:[{image:'',url:'',text:'',overlay:''}],guid:generateUUID()}
var fields={"Title":{label:'Title'},"My Images":{legend:"My Images",label:!1,name:"images",type:'fieldset',array:{min:0,max:25},fields:[{name:'image',label:'Image',required:!0,type:'smallcombo',options:'/api/groups/'+group_id+'/images',custom:{name:"addFile",display:'<div style="padding:10px;color:#084010;border-top:solid 1px #333">Upload New File <span class="pull-right"><i class="fa fa-upload"></i></span></div>',action:function(e){window.open("/admin/groups/"+group_id+"/images","_blank")}},format:{title:'Image',label:"{{name}}",value:"{{id}}",display:'<div style="height:50px;padding-left:60px;position:relative" href="/image/{{id}}.{{ext}}" target="_blank"><div style="outline:dashed 1px #ccc;display:inline-block;text-align:center;width:50px;;height:50px;background-image: url(/image/{{id}}.{{ext}});background-size: contain;background-repeat: no-repeat;background-position: center;position:absolute;top:0px;left:5px"></div> {{name}} </div>'}},{name:'text',label:'Alt Text',required:!0},{name:'url',label:'Link',placeholder:'http://',validate:[{type:'valid_url'}],post:'<i class="fa fa-link"></i>'},{name:'window',label:'New Window?',type:'checkbox',show:[{type:"not_matches",name:'url',value:''}]},]}}
return{container:container,fields:fields,render:render,toJSON:toJSON,edit:defaultCobEditor.call(this,container),get:get,set:set,initialize:function(el){$(el).find('.slider').nivoSlider({effect:'fade'});if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}}}};Cobler.types.uApp=function(container){function get(){item.widgetType='uApp';return item}
var item={guid:generateUUID()}
var fields={Title:{},'App ID':{type:'select',options:'/api/groups/'+group_id+'/appinstances',format:{label:"{{name}}",value:function(i){return i.id}}},'User Options':{name:'user_edit',type:'checkbox'},}
return{container:container,fields:fields,render:function(){var temp=get();temp.uapp_admin=group_admin;return templates.widgets_microapp.render(temp,templates)},edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:function(newItem){$.extend(item,newItem)},initialize:function(el){if(typeof this.get().app_id=='undefined'){return!1};this.fields['App ID'].enabled=!1;if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}
$.ajax({url:'/api/fetch/'+this.get().app_id,dataType:'json',type:'POST',data:(Lockr.get('/api/apps/instances/'+this.get().app_id+'/user_options')||{options:{}}),success:function(data){if(typeof data.user.id=='undefined'){var url='/api/apps/instances/'+this.get().app_id+'/user_options';data.user.options=(Lockr.get(url)||{options:{}}).options}
var opts={template:this.get().template||'dashboard',$el:$(el).find('.collapsible'),crud:function(name,data,callback,verb){var send_data={request:data};if(typeof this.data.user.id=='undefined'){send_data.options=this.data.user.options}
$.ajax({url:'/api/fetch/'+this.config.app_instance_id+'/'+name+'?verb='+verb,contentType:'application/json',data:JSON.stringify(send_data),type:'POST',error:function(data){toastr.error(data.statusText,'ERROR')}.bind(this),success:callback.bind(this)})}}
opts.data=data;opts.config=(_.find(apps,{id:parseInt(this.get().app_id,10)})||_.find(gform.collections.get('/api/groups/'+group_id+'/appinstances'),{id:parseInt(this.get().app_id,10)})).app.code||{};opts.config.app_instance_id=this.get().app_id;opts.config.title=this.get().title;opts.onLoad=function(){this.appEngine.app.on('refetch',function(data){var options;if(typeof this.appEngine.data.user.id=='undefined'){options=(Lockr.get('/api/apps/instances/'+this.get().app_id+'/user_options')||{options:{}})}
$.ajax({type:'POST',url:'/api/fetch/'+this.get().app_id,data:options,success:function(data){if(typeof data.user.id=='undefined'){var url='/api/apps/instances/'+this.get().app_id+'/user_options';data.user.options=(Lockr.get(url)||{options:{}}).options}
this.appEngine.app.update(data)}.bind(this),error:function(data){toastr.error(data.statusText,'An error occured updating App')}})}.bind(this));$g.emit('loaded',this)}.bind(this)
switch(opts.config.engine){case 'graphene':if('graphene' in $g.engines){this.appEngine=$g.engines[opts.config.version||'v1'].v1(opts)}else{this.appEngine=gAE_v0001(opts)}
break;case 'vue':this.appEngine=vueAppEngine(opts);break;default:this.appEngine=$g.engines.graphene.v1(opts)}
$g.apps[opts.config.app_instance_id]=this}.bind(this)})}}};Cobler.types.Workflow=function(container){function get(){return{widgetType:'Workflow',...item}}
function set(newItem){$.extend(item,newItem);({submission,guid,user,resources}=item);instance=item.workflow;({flow,form,methods}=instance.version.code);flowState=(_.find(flow,{name:instance.configuration.initial})||flow[0]||{"actions":[]});formData._flowstate=flowState.name;rootPath='/api/workflowsubmissions/'+instance.id;$g.emit('workflow_summary',{submission:submission})
if(submission){gform.collections.update('files',_.map(submission.files||[],$g.formatFile))
submission=$g.formatDates(submission);formData._state=submission.data;let oldId=formData.id;formData.id=submission.id;formData.data.instance=instance;if(typeof oldId!=='undefined'&&oldId!==submission.id){loadForm()}}
if(typeof ractive!=='undefined')ractive.set(item)}
create=()=>{message.status='create';workflowForm.destroy();item.isContinue=!1;sync({})}
discard=(forceNew)=>{$.ajax({url:'/api/workflowsubmissions/'+submission.id,type:'delete',success:e=>{submission.deleted_at=!0;$g.emit('workflow_summary',{submission:submission})
item.all=_.filter(item.all,item=>{return item.id!==submission.id})
if(!forceNew&&item.all.length){$g.emit('workflow_select',item.all[0])}else{create()}}})}
function submitFlow(additionalInfo){gform.types.fieldset.edit.call(workflowForm.find('_state'),!1)
workflowForm.find('_state').el.style.opacity=.7
$('.gform-footer').hide();$.ajax({url:rootPath+'/submit',dataType:'json',contentType:'application/json',type:'POST',data:JSON.stringify((()=>{return{...workflowForm.get(),...additionalInfo,_state:JSON.stringify(formData._state)}})()),success:response=>{document.location="/workflows/report/"+response.id},error:()=>{workflowForm.find('_state').el.style.opacity=1
gform.types.fieldset.edit.call(workflowForm.find('_state'),!0)
$('.gform-footer').show();$g.alert({content:"An error occured submitting this form. Please try again later",title:"ERROR",status:'error'})}})}
function updateRequiredFields(form){let required=_.uniq(_.compact(_.map(form.find({name:"_state"}).items.filter({active:!0,required:!0}),e=>{return{..._.pick(e,'label','id'),satisfied:e.satisfied()}})));$g.emit('workflow_summary',{required:required,satisfied:_.countBy(required,'satisfied')})}
function processAction(e){var action=_.find(flowState.actions,{name:e.field.name});if(action.validate!==!1&&!workflowForm.validate(!0)){if(action.invalid_submission!==!0||!confirm(gform.renderString("This form has the following errors:\r\n\r\n{{#errors}}{{.}}\r\n{{/errors}}\r\nWould you like to submit anyway?",{errors:_.values(e.form.errors)}))){toastr.clear();$g.alert({content:"Form invalid, please check for errors!",title:"ERROR",status:'error'})
message.status='error';e.form.find("_state").filter({active:!0,valid:!1})
return}}
if(action.signature){signature=new gform({legend:"Signature Required",actions:[{type:"cancel",label:'<i class="fa fa-times"></i> Clear'},{type:"save"}]}).on('cancel',e=>{e.form.set({signature:null})
e.form.clearValidation()}).on('save',e=>{if(e.form.validate()){e.form.trigger('close')
submitFlow({action:action.name,signature:e.form.get('signature')})}}).on('input',e=>{if(e.form.el.classList.contains('in'))e.form.validate()}).modal()
signature.add({type:'signaturePad',required:!0,label:"Signature",hideLabel:!0,help:(action.signature_text||"Please Sign Above"),name:"signature"})}else{submitFlow({action:action.name})}}
var update=(file,response)=>{var files=submission.files=submission.files||gform.collections.get('files')
if(typeof response!=='undefined'){var exists=_.find(files,{id:response.id});if(typeof exists!=='undefined'){_.merge(exists,response)}else{files=files||[];files.push(response)}}
if(files!=="waiting"){gform.collections.update('files',_.map(files,$g.formatFile))}
var field=workflowForm.find({shown:!0,type:'files'});if(field){field.set(response.name)
field.renderMenu();$('[href="'+_.find(field.options,{id:response.id}).path+'"]').click()}}
function saveFlow(data,callback,onError){$g.setData(rootPath+'/save',{data:{...data,_state:JSON.stringify(data._state)}},callback,onError)}
var sync=newFormData=>{if(message.status||!submission||typeof submission.id=='undefined'){$g.waiting='Waiting...';saveFlow(newFormData||workflowForm.get(),response=>{message.status='success';lastSynced=response.data;response.files=gform.collections.get('files')
set({submission:response});if(!workflowForm.valid)workflowForm.validate()},e=>{message.status='error';$g.alert({content:"An error occured durring autosave - please try refreshing before proceeding or you may lose your work",title:"ERROR",status:'error'})})}}
var loadForm=()=>{ractive.set(item);evalMethods=[];_.each(methods,(item,index)=>{eval('evalMethods["method_'+index+'"] = function(data,e){'+item.content+'\n}.bind(formData,formData.data)')})
var formSetup={"id":item.guid,"data":formData,"name":"workflow","methods":evalMethods,"events":form.events||{},"actions":[{"type":"cancel","action":"canceled","label":"<i class='fa fa-times'></i> Clear"},{"type":"hidden","name":"_flowstate"},{"type":"hidden","name":"id","parse":[{type:"not_matches",value:""}]}],"fields":[{"name":"_state","label":!1,"type":"fieldset","fields":form.fields}]}
formSetup.actions=formSetup.actions.concat(_.filter(flowState.actions,action=>{if(typeof assignment=='undefined')return!0;let{type,id}=action.assignment;if(type=="user"&&gform.m(id,formData.data)==formData.data.actor.id.toString())return!0;if(type=="group"&&formData.data.actor.groups.indexOf(parseInt(gform.m(id,formData.data)))>=0)return!0;return!1}))
formSetup.data._state={...formSetup.data._state,...((form.resource in formData.data.resources)?formData.data.resources[form.resource]:(form.resource in evalMethods)?evalMethods[form.resource](formData):{})}
if(submission!=null){gform.collections.update('files',_.map(submission.files||[],$g.formatFile))}else{gform.collections.update('files',[])}
workflowForm=new gform(formSetup,'.g_'+guid).on('validation',e=>{let status={errors:[]}
if(!e.form.valid){var invalid_fields=e.form.find({name:"_state"}).items.filter({active:!0,valid:!1})
status.errors=_.compact(_.map(invalid_fields,e=>{return{label:e.label,id:e.id,errors:e.errors.split('<br>')}}))}
$g.emit('workflow_summary',status)}).on('save',processAction).on('canceled',e=>{set({submission:{...initialFormState,id:submission.id}});loadForm()}).on("input",e=>{if('field' in e&&!e.field.valid){gform.validateItem.call(null,!0,e.field)}}).on('input canceled reset',_.throttle(e=>{if(_.isEqual(lastSynced,e.form.get('_state')))return;message.status="saving";_saveDelay=setTimeout(sync,1500);updateRequiredFields(e.form)},500)).on('options',_.debounce(e=>{updateRequiredFields(e.form)}));workflowForm.trigger('input')
updateRequiredFields(workflowForm);if(typeof fileLoader=="undefined"&&submission&&form.files&&flowState.uploads){if($("#uploader_"+item.guid).length){$("#uploader_"+item.guid).html('');fileLoader=new Dropzone("#uploader_"+item.guid,{dictDefaultMessage:"Drop files here to upload attatchments",timeout:60000,url:"/api/workflowsubmissions/"+submission.id+"/files",init:function(){this.on("success",update)}})}
update()}
$('.f_'+guid).off('click');$('.f_'+guid).on('click','[data-id]',e=>{e.stopPropagation();e.preventDefault();if(e.currentTarget.dataset.action=='delete'){$.ajax({url:'/api/workflowsubmissions/'+submission.id+'/files/'+e.currentTarget.dataset.id,type:'delete',success:update.bind(null,{}),error:()=>{}})}else if(e.currentTarget.dataset.action=='edit'){new gform({legend:"Edit file name",data:_.find(submission.files,{id:parseInt(e.currentTarget.dataset.id)}),fields:[{name:"name",label:!1},{name:"id",type:"hidden"}]}).on('cancel',e=>{e.form.destroy()}).on('save',e=>{$.ajax({url:'/api/workflowsubmissions/'+submission.id+'/files/'+e.form.get('id'),dataType:'json',contentType:'application/json',type:'PUT',data:JSON.stringify(e.form.get()),success:update.bind(null,{}),error:()=>{}})
e.form.trigger('close')}).modal()}})
if(!submission){sync()}}
var addComment=()=>{new gform({data:submission,legend:"Comment for this submission",name:"submission_comment",modal:{header_class:'bg-success'},fields:[{label:!1,name:'comment',type:'textarea',placeholder:"example: Waiting for John Doe to send me his ID",help:'<span class="text-muted">HINT: <i>Use this comment to differentiate this submission from others you may have, or to remember what you are waiting on to continue.</i></span>'}],actions:[{type:'cancel',modifiers:"btn btn-danger pull-left"},{type:'save',label:"Save and start new",action:"save_create",modifiers:"btn btn-warning"},{type:'save'}]}).modal().on('save_create save',e=>{if(!e.form.validate())return;$g.waiting="Updating Comment...";e.form.trigger('close')
$.ajax({url:'/api/workflowsubmissions/'+instance.id+'/save',dataType:'json',contentType:'application/json',type:'POST',data:JSON.stringify({...submission,...e.form.get()}),success:submission=>{set({submission:submission});e.form.trigger('close');if(e.event=='save'){message.status='success'}else{create()}},})}).on('save cancel',e=>{e.form.dispatch('close');e.form.destroy()})}
var item={guid:generateUUID()}
var fields={Title:{},'Workflow ID':{type:'select',options:'/api/groups/'+group_id+'/workflowinstances',format:{label:"{{name}}",value:"{{id}}"}},}
var panelEL,ractive,submission,rootPath,guid,user,resources,initialFormState={},lastSynced,flowState,workflowForm,fileLoader,flow,form,methods,instance={configuration:{}},evalMethods=[],formData={user:user,data:{actor:user,form:{},owner:null,history:[]}};var message=(()=>{let _saveDelay;let _message="";let _obj={clear:()=>{message.status=""}};Object.defineProperty(_obj,"value",{get:()=>{return _message},enumerable:!1});Object.defineProperty(_obj,"status",{get:()=>$g.waiting,set:e=>{let el=$('#flow-status');el.removeClass('label-success').removeClass('label-danger');clearTimeout(_saveDelay);$g.waiting=!1;gform.removeClass(panelEL,'error')
gform.removeClass(panelEL,'success')
switch(e){case "saving":_message='Auto Saving...';$g.waiting=_message;break;case "create":_message='Creating New...';$g.waiting=_message;break;case "loading":_message='Loading...';$g.waiting=_message;break;case "error":_message='Error Saving';el.addClass('label-danger')
gform.addClass(panelEL,'error')
break;case "success":_message='All Changes Saved';el.addClass('label-success')
gform.addClass(panelEL,'success')
break;default:_message=''}
$('#flow-status').html(_message);gform.toggleClass(panelEL,'animate-border',!!$g.waiting)},enumerable:!1});return _obj})()
return{container:container,fields:fields,edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:set,render:()=>{ractive=new Ractive({el:gform.create('<div></div>'),template:workflow_report.workflow,data:{...item,workflow_admin:group_admin,allowFiles:(form.files&&flowState.uploads)},partials:workflow_report});return ractive.el},load:function(){formData.data.datamap=_.reduce(instance.configuration.map,(datamap,item)=>{datamap[item.name]=item.value;return datamap},{})
formData.data.resources=_.reduce(resources,(resources,item,name)=>{gform.collections.add(name,_.isArray(item)?item:[])
resources[name]=item;return resources},{})
evalMethods=[];let tformData={...formData,_state:form.data||{}};_.each(methods,(item,index)=>{eval('evalMethods["method_'+index+'"] = function(data,e){'+item.content+'\n}.bind(tformData,tformData.data)')})
initialFormState
let tempForm=new gform({fields:form.fields,private:!0,data:((form.resource in formData.data.resources)?formData.data.resources[form.resource]:(form.resource in evalMethods)?evalMethods[form.resource](tformData):{})})
initialFormState=tempForm.get()
tempForm.destroy();lastSynced=(submission)?submission.data:{};set({isContinue:((submission!==null)&&(submission.updated_at!==submission.created_at)&&!_.isEqual(lastSynced,initialFormState))})
if(item.isContinue)$g.alert({content:"Continuing from data last updated {{updated_at.fromNow}}",status:"success"},submission);loadForm()
$g.emit('loaded')},initialize:function(el){panelEL=this.container.elementOf(this).querySelector('.panel');$(panelEL).on('click','[data-action]',e=>{$g.emit('workflow_action',e.currentTarget.dataset)})
gform.collections.add('files',[]);gform.collections.on('files',e=>{$('.f_'+guid).html(gform.renderString(workflow_report.attachments,submission))});window.addEventListener("beforeunload",e=>{if(message.status){var confirmationMessage='Changes you made May not be saved';(e||window.event).returnValue=confirmationMessage;return confirmationMessage}});if(typeof instance.id=='undefined'){return!1};this.fields['Workflow ID'].enabled=!1;if(this.container.owner.options.disabled&&get().enable_min){set({collapsed:(Lockr.get(guid)||get()).collapsed});$(el).find('.widget').toggleClass('cob-collapsed',get().collapsed)}
if(typeof instance!=='undefined'){this.load()}else{$.ajax({url:'/api/workflowinstances/'+instance.id,type:'GET',success:function(instance){set({workflow:instance})
this.load()}.bind(this),error:()=>{}})}
$g.on('workflow_select',e=>{toastr.clear();if(e.data.id==submission.id)return
$g.emit('workflow_summary',{required:[],satisfied:[],errors:[]})
if(fileLoader)fileLoader.removeAllFiles();gform.collections.update('files',[]);message.status="loading";workflowForm.destroy();$g.getData('/api/workflowsubmissions/'+e.data.id+'/context',context=>{message.status="success";lastSynced=context.submission.data;set({...context,isContinue:((context.submission!==null)&&(context.submission.updated_at!==context.submission.created_at)&&!_.isEqual(lastSynced,initialFormState))})
if(item.isContinue)$g.alert({content:"Continuing from data last updated {{updated_at.fromNow}}",status:"success"},submission)})})
$g.on('workflow_action',e=>{_.each(e.data.action.split(' '),action=>{switch(action){case 'restart':$g.confirm("Are you sure you want to discard the current data?",()=>(discard(!0)));break;case 'new':create();break;case 'validate':workflowForm.validate(!0);break;case 'save':addComment();break;case 'discard':$g.confirm("Are you sure you want to discard the current data?",()=>(discard(!1)));break}})})
$g.on('workflow_status',e=>{updateRequiredFields(workflowForm)})}}};Cobler.types.Workflows=function(container){function get(){item.widgetType='Workflows';return item}
var item={guid:generateUUID()}
var fields={Title:{},}
return{container:container,fields:fields,render:function(){var temp=get();temp.workflow_admin=group_admin;return gform.renderString(workflow_report.workflows,temp)},edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:function(newItem){$.extend(item,newItem)},initialize:function(el){if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}
$.ajax({url:'/api/workflowinstances/user',dataType:'json',type:'GET',success:function(data){this.container.elementOf(this).querySelector('.collapsible').innerHTML=gform.renderString(workflow_report.links,{data:data})}.bind(this)})}}};Cobler.types.WorkflowAssignments=function(container){function get(){item.widgetType='WorkflowAssignments';return item}
var item={guid:generateUUID()}
var fields={Title:{},}
return{container:container,fields:fields,render:function(){var temp=get();temp.workflow_admin=group_admin;return gform.renderString(workflow_report.status,temp)},edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:function(newItem){$.extend(item,newItem)},initialize:function(el){if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}
$.ajax({url:'/api/workflowsubmissions/user/assignments',dataType:'json',type:'GET',success:function(assignments){this.container.elementOf(this).querySelector('.collapsible').innerHTML=gform.renderString('<h5>These are all of the workflows which require your action</h5><div id="assignmentgrid"></div>');assignmentGrid=new GrapheneDataGrid({el:"#assignmentgrid",autoSize:50,data:assignments,actions:[],upload:!1,download:!1,columns:!1,sortBy:"updated_at",reverse:!0,form:{fields:[{label:"Workflow Name",name:"name",type:"select",options:function(data){return _.uniq(_.map(data,function(item){return item.workflow.name}))}.bind(null,assignments),template:"{{attributes.workflow.name}}"},{label:"Submitted",name:"submitted_at",template:"<div>{{attributes.submitted_at}}</div> by {{attributes.user.first_name}} {{attributes.user.last_name}}"},{label:"Last Updated",name:"updated_at",template:'<div>{{attributes.updated_at}}</div> <div class="label label-default">{{attributes.logs.0.action}}</div> '},{label:"Assigned",name:"assignment_type",type:"select",options:[{value:'group',label:'Group'},{value:'user',label:'User'}],template:'<span style="text-transform:capitalize">{{attributes.assignee.name}}{{attributes.assignee.first_name}} {{attributes.assignee.last_name}} ({{attributes.assignment_type}})</span>'},{label:"State",name:"state",type:"select",options:function(data){return _.uniq(_.map(data,function(item){return item.state}))}.bind(null,assignments)},{label:"ID",name:"id",type:"text"}]}}).on('click',function(e){document.location="/workflows/report/"+e.model.attributes.id}).on("*",function(e){if(e.event.startsWith("click_")&&!e.model.waiting()){e.model.waiting(!0);if(_.find(e.model.attributes.actions,{name:e.event.split("click_")[1]}).form){e.model.waiting(!1);new gform({"legend":e.model.attributes.workflow.name,"data":e.model.attributes.data,"events":e.model.attributes.workflow_version.code.form.events||{},"actions":[{"type":"cancel","name":"submitted","action":"canceled",},{"type":"save","name":"submit","label":"<i class='fa fa-check'></i> Submit"},{"type":"hidden","name":"_flowstate","value":e.model.attributes.state},{"type":"hidden","name":"_flowstate_history","value":e.model.attributes.state}],"fields":[{"name":"_state","label":!1,"type":"fieldset","fields":e.model.attributes.workflow_version.code.form.fields},{"name":"comment","type":"textarea","length":255}]}).on('save',function(e,eForm){if(!eForm.form.validate(!0))return;e.model.waiting(!0);eForm.form.trigger('close')
$.ajax({url:'/api/workflowsubmissions/'+e.model.attributes.id,type:'PUT',dataType:'json',contentType:'application/json',data:JSON.stringify({_state:eForm.form.get()._state,comment:eForm.form.get().comment,action:e.event.split("click_")[1]},),success:function(e,data){e.model.waiting(!1);data.actions=(_.find(data.workflow_version.code.flow,{name:data.state})||{"actions":[]}).actions;e.model.set(data)}.bind(null,e)})}.bind(null,e)).on('canceled',function(eForm){eForm.form.trigger('close')}).modal()}else{new gform({"legend":e.model.attributes.workflow.name,"data":e.model.attributes.data,"events":e.model.attributes.workflow_version.code.form.events||{},"actions":[{"type":"cancel","name":"submitted","action":"canceled",},{"type":"save","name":"submit","label":"<i class='fa fa-check'></i> Submit"},{"type":"hidden","name":"_flowstate","value":e.model.attributes.state}],"fields":[{"name":"comment","type":"textarea","length":255}]}).on('save',function(e,eForm){e.model.waiting(!0);eForm.form.trigger('close')
$.ajax({url:'/api/workflowsubmissions/'+e.model.attributes.id,dataType:'json',type:'PUT',contentType:'application/json',data:JSON.stringify({_state:e.model.attributes.data,comment:eForm.form.get().comment,action:e.event.split("click_")[1]}),success:function(e,data){e.model.waiting(!1);data.actions=(_.find(data.workflow_version.code.flow,{name:data.state})||{"actions":[]}).actions;e.model.set(data)}.bind(null,e)})}.bind(null,e)).on('canceled',function(eForm){eForm.form.trigger('close')}).modal()}}})}.bind(this)})}}};Cobler.types.WorkflowHistory=function(container){function get(){item.widgetType='WorkflowHistory';return item}
var item={guid:generateUUID()}
var fields={Title:{},}
return{container:container,fields:fields,render:function(){var temp=get();temp.workflow_admin=group_admin;return gform.renderString(workflow_report.status,temp)},edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:function(newItem){$.extend(item,newItem)},initialize:function(el){if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}
$.ajax({url:'/api/workflowsubmissions/user/history',dataType:'json',type:'GET',success:function(history){var getActions=function(item){item.actions=(_.find(item.workflow_version.code.flow,{name:item.state})||{"actions":[]}).actions}
this.container.elementOf(this).querySelector('.collapsible').innerHTML=gform.renderString(`<h5>These are all of the workflows on which you have ever taken an action</h5><div id="historygrid"></div>`,{});myGrid=new GrapheneDataGrid({el:"#historygrid",autoSize:50,data:history,actions:[],upload:!1,download:!1,columns:!1,sortBy:"updated_at",reverse:!0,form:{fields:[{label:"Workflow Name",name:"name",type:"select",options:function(data){return _.uniq(_.map(data,function(item){return item.workflow.name}))}.bind(null,history),template:"{{attributes.workflow.name}}"},{label:"Submitted",name:"submitted_at",template:"<div>{{attributes.submitted_at}}</div> by {{attributes.user.first_name}} {{attributes.user.last_name}}"},{label:"Last Updated",name:"updated_at",template:'<div>{{attributes.updated_at}}</div> <div class="label label-default">{{attributes.logs.0.action}}</div>'},{label:"Assigned",name:"assignment_type",type:"select",options:[{value:'group',label:'Group'},{value:'user',label:'User'}],template:'<span style="text-transform:capitalize">{{attributes.assignee.name}}{{attributes.assignee.first_name}} {{attributes.assignee.last_name}} <div>({{attributes.assignment_type}})</div></span>'},{label:"Status",name:"status",type:"select",options:['open','closed'],template:'<span style="text-transform:capitalize">{{attributes.status}}</span>'},{label:"State",name:"state",type:"select",options:function(data){return _.uniq(_.map(data,function(item){return item.state}))}.bind(null,history)},{label:"ID",name:"id",type:"text"}]}}).on('click',function(e){document.location="/workflows/report/"+e.model.attributes.id})}.bind(this)})}}};Cobler.types.WorkflowStatus=function(container){function get(){item.widgetType='WorkflowStatus';return item}
var item={guid:generateUUID()}
var fields={Title:{},}
return{container:container,fields:fields,render:function(){var temp=get();temp.workflow_admin=group_admin;return gform.renderString(workflow_report.status,temp)},edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:function(newItem){$.extend(item,newItem)},initialize:function(el){if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}
$.ajax({url:'/api/workflowsubmissions/user',dataType:'json',type:'GET',success:function(newdata){this.container.elementOf(this).querySelector('.collapsible').innerHTML=gform.renderString('<h5>These are all of the workflows you have ever submitted</h5><div id="mygrid"></div>',{open:newdata});myGrid=new GrapheneDataGrid({el:"#mygrid",autoSize:50,data:newdata,actions:[],upload:!1,download:!1,columns:!1,sortBy:"updated_at",reverse:!0,form:{fields:[{label:"Workflow Name",name:"name",type:"select",options:function(data){return _.uniq(_.map(data,function(item){return item.workflow.name}))}.bind(null,newdata),template:"{{attributes.workflow.name}}"},{label:"Submitted",name:"submitted_at",template:"<div>{{attributes.submitted_at}}</div> by {{attributes.user.first_name}} {{attributes.user.last_name}}"},{label:"Last Updated",name:"updated_at",template:'<div>{{attributes.updated_at}}</div> <div class="label label-default">{{attributes.logs.0.action}}</div>'},{label:"Assigned",name:"assignment_type",type:"select",options:[{value:'group',label:'Group'},{value:'user',label:'User'}],template:'<span style="text-transform:capitalize">{{attributes.assignee.name}}{{attributes.assignee.first_name}} {{attributes.assignee.last_name}} <div>({{attributes.assignment_type}})</div></span>'},{label:"Status",name:"status",type:"select",options:['open','closed'],template:'<span style="text-transform:capitalize">{{attributes.status}}</span>'},{label:"State",name:"state",type:"select",options:function(data){return _.uniq(_.map(data,function(item){return item.state}))}.bind(null,newdata)},{label:"ID",name:"id",type:"text"}]}}).on('click',function(e){document.location="/workflows/report/"+e.model.attributes.id})}.bind(this)})}}};Cobler.types.WorkflowSummary=function(container){function get(){return{widgetType:'WorkflowSummary',...item}}
var item={guid:generateUUID()}
return{container:container,fields:[],render:()=>gform.renderString(workflow_report.workflow_summary_container,get()),edit:defaultCobEditor.call(this,container),toJSON:get,get:get,redraw:function(newItem){if(typeof newItem!=='undefined'){this.set(newItem)
let{submission}=newItem;if(submission){let index=_.findIndex(item.all,_.pick(submission,'id'));if(index>=0){item.all[index]=submission}else{item.all.unshift(submission)}}}
item.all=_.filter(item.all,submission=>{return!submission.deleted_at})
this.ractive.set(item)},set:newItem=>{$.extend(item,newItem);item.submission=$g.formatDates(item.submission)},initialize:function(el){this.ractive=new Ractive({el:this.container.elementOf(this),template:workflow_report.workflow_summary,data:this.get(),partials:{}});$(this.container.elementOf(this)).on('click','.error-field, .required-field a',e=>{gform.instances.workflow.find(e.currentTarget.dataset).focus()
gform.instances.workflow.find(e.currentTarget.dataset).el.scrollIntoView({block:"end",inline:"nearest",behavior:"smooth"})})
$('.action-bar').on('click','[data-action]',e=>{$g.emit('workflow_action',e.currentTarget.dataset)})
$('.saved-panel').on('click','[data-id]',e=>{$g.emit('workflow_select',_.find(this.get().all,{id:parseInt(e.currentTarget.dataset.id)}))})
$g.on('workflow_summary',e=>{this.redraw(e.data)})
$g.emit('workflow_status')}}};workflow_report={};workflow_report.actions='{{#is.actionable}}<div class="hidden-print"><legend>Available Actions</legend><div>{{#actions}}<span class="btn btn-{{type}}{{^type}}default{{/type}}" style="margin:2px 5px 2px 0" data-id="{{id}}" data-event="{{name}}">{{label}}</span>{{/actions}}</div><br></div>{{/is.actionable}}';workflow_report.assignments=' <ul class="nav nav-tabs" role="tablist"> <li role="presentation" class="active"><a href="#workflows" aria-controls="workflows" role="tab" data-toggle="tab">My Workflows</a></li> <li role="presentation"><a href="#assignments" aria-controls="assignments" role="tab" data-toggle="tab">My Assignments</a></li> </ul> <div class="tab-content"> <div role="tabpanel" class="tab-pane active" id="workflows"> <h5>These are all of the workflows you have ever submitted</h5><div id="mygrid"></div> </div> <div role="tabpanel" class="tab-pane" id="assignments"> <h5>These are all of the workflows which require your action</h5><div id="assignmentgrid"></div> </div> </div>';workflow_report.attachments='{{#files.length}}<div class="list-group"> {{#files}} <a style="height:60px;padding-left:70px" href="{{path}}" target="_blank" class="list-group-item {{#deleted_at}}list-group-item-danger{{/deleted_at}}"> <div style="outline:dashed 1px #ccc;display:inline-block;text-align:center;width:50px;;height:50px;{{^icon}}background-image: url(\'{{path}}\');background-size: contain;background-repeat: no-repeat;background-position: center;{{/icon}}position:absolute;top:5px;left:5px"> {{{icon}}} </div>{{name}} <div class="text-muted">{{mime_type}}<span class="pull-right">{{date}}</span></div> {{^deleted_at}} <div style="position: absolute;right: 10px;top: 5px;" class="btn-group parent-hover"> <span data-id="{{id}}" data-action="edit" class="edit-item btn btn-default fa fa-pencil" data-title="Edit"></span> <span data-id="{{id}}" data-action="delete" class="remove-item btn btn-danger fa fa-trash-o" data-title="Delete"></span> </div> {{/deleted_at}} </a> {{/files}} {{/files.length}} </div> {{^files}} <b style="text-align:center">No files yet...click below or drop some files there to begin.</b> {{/files}}';workflow_report.container='<div class="row"> <div class="list col-md-4 hidden-xs hidden-sm " style=""> <center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> <div class="col-md-8 col-md-offset-4 report" style="top:-20px"> </div> </div> <style> .list-group-item.active{ background-color:#606971; border-color: #606971 !important; } .list-group-item.active .text-muted{ color:#a5a5a5 } .list-group-item.filterable:hover{ background-color:#f0f0f0; cursor:pointer } .list-group-item.active:hover{ background-color:#606971 } hr{ margin:10px 0 } </style>';workflow_report.file='<a {{^deleted_at}}href="{{path}}/download"{{/deleted_at}} style="height:60px;padding-left:70px" target="_blank" data-id="{{id}}" class="filterable list-group-item file"> <div style="outline:dashed 1px #ccc;display:inline-block;text-align:center;width:50px;;height:50px;{{^icon}}{{^deleted_at}}background-image: url(\'{{path}}\');background-size: contain;background-repeat: no-repeat;background-position: center;{{/deleted_at}}{{/icon}}position:absolute;top:5px;left:5px"> {{{icon}}} </div>{{name}} <div style="margin-top:5px" class="text-muted">{{mime_type}}<span class="pull-right">{{date}}</span></div> {{^deleted_at}} {{#current_state.uploads}} <div style="position: absolute;right: 10px;top: 5px;" class="btn-group parent-hover"> <span data-id="{{id}}" data-action="edit" class="edit-item btn btn-default fa fa-pencil" data-title="Edit"></span> <span data-id="{{id}}" data-action="delete" class="remove-item btn btn-danger fa fa-trash-o" data-title="Delete"></span> </div> {{/current_state.uploads}} {{/deleted_at}} </a>';workflow_report.file_summary='{{#history}} {{#selected}} {{>file}} <div><h5> <span class="text-muted">Attached by {{created_by.first_name}} {{created_by.last_name}}</span><span class="pull-right" data-toggle="tooltip" title="{{created_at.date}} @ {{created_at.time}}" data-placement="top">({{created_at.fromNow}})</span></h5></div> {{#deleted_at}}<div><h5><span class="text-muted">Deleted by {{deleted_by.first_name}} {{deleted_by.last_name}}</span><span class="pull-right" data-toggle="tooltip" title="{{updated_at.date}} @ {{updated_at.time}}" data-placement="top">({{updated_at.fromNow}})</span></h5></div>{{/deleted_at}} {{^deleted_at}}{{{preview}}}{{/deleted_at}} {{/selected}} {{/history}}';workflow_report.files='<ul class="list-group workflow-files" style="margin:10px 0 0"> {{#history}} {{#file}} {{^deleted_at}}{{>file}}{{/deleted_at}} {{/file}} {{/history}} </ul>';workflow_report.header=' <span class="label label-default pull-right" id="flow-status"></span> <h3 class="flow-title">{{workflow.workflow.name}}</h3> {{#submission.title}}{{#if submission.title !== workflow.workflow.name}}<h5 class="submission-title">{{submission.title}}</h5>{{/if submission.title !== workflow.workflow.name}}{{/submission.title}} ';workflow_report.history='<ul class="list-group workflow-history" style="margin:10px 0 0"> <div class="filterable submission list-group-item" target="_blank" data-current=true data-id="{{latest.id}}"> <div>{{owner.first_name}} {{owner.last_name}} (Originator) <span class="label pull-right label-success{{#latest.closed}} label-danger{{/latest.closed}}">{{latest.end_state}}</span> </div> <hr> <div><h5 style="text-align:right"><span data-toggle="tooltip" title="{{latest.updated_at.date}} @ {{latest.updated_at.time}}" data-placement="top">({{latest.updated_at.fromNow}})</span></h5></div> </div> <div class="list-group-item bg-info" style="color: white;background: #aaa;"><h4>History</h4></div> {{#history}} {{#log}} <div class="filterable list-group-item submission" target="_blank" data-id="{{id}}" ><div><h5>{{action}} <span class="text-muted">by {{actor.first_name}} {{actor.last_name}}</span><span class="pull-right" data-toggle="tooltip" title="{{updated_at.date}} @ {{updated_at.time}}" data-placement="top">({{updated_at.fromNow}})</span></h5></div> <span class="label label-default">{{previous.state}}</span> <i class="fa fa-long-arrow-right text-muted"></i> <span class="label label-success{{#closed}} label-danger{{/closed}}">{{state}}</span> <span style="display:none" class="pull-right text-muted">{{updated_at.date}} @ {{updated_at.time}} </span> {{#comment}}<h5>Comment:</h5><p>{{comment}}</p>{{/comment}}</div> {{/log}} {{#file}} <div style="height:60px;padding-left:70px" target="_blank" data-id="{{id}}" class="filterable list-group-item file {{#deleted_at}}list-group-item-danger{{/deleted_at}}"> <div style="outline:dashed 1px #ccc;display:inline-block;text-align:center;width:50px;;height:50px;{{^icon}}{{^deleted_at}}background-image: url(\'{{path}}\');background-size: contain;background-repeat: no-repeat;background-position: center;{{/deleted_at}}{{/icon}}position:absolute;top:5px;left:5px"> {{{icon}}} </div> <div><h5><div style="position: relative;top: -5px;">{{name}}</div> <span class="text-muted">{{^deleted_at}}Attached{{/deleted_at}}{{#deleted_at}}Deleted {{/deleted_at}} by {{actor.first_name}} {{actor.last_name}}</span><span class="pull-right" data-toggle="tooltip" title="{{updated_at.date}} @ {{updated_at.time}}" data-placement="top">({{updated_at.fromNow}})</span></h5></div> </div> {{/file}} {{/history}} </ul>';workflow_report.links=' <label for="link_filter" class="sr-only">Filter</label><input id="link_filter" type="text" class="form-control filter" data-selector=".available_workflow" name="filter" placeholder="Filter..."> <ul class="list-group available_workflow" style="margin:10px 0 0"> {{#data}}{{^unlisted}}<a class="filterable list-group-item" target="_blank" href="/workflow/{{group_id}}/{{slug}}">{{name}}</a>{{/unlisted}}{{/data}} </ul>';workflow_report.prompt='You are currently in the middle of this workflow. Would you like to continue with your current data?<hr>{{#submission}} {{>prompt_summary}} {{/submission}}';workflow_report.prompt_summary='<dl class="dl-horizontal"> {{#title}}<dt>Title</dt><dd>{{{title}}}</dd>{{/title}} {{#saved}}<dt>Comment</dt> <dd>{{{comment}}}{{^comment}} - {{/comment}}</dd> {{/saved}} <dt>Started</dt> <dd>{{created_at.date}} @ {{{created_at.time}}}</dd> <dt>Last Updated</dt> <dd>{{updated_at.date}} @ {{{updated_at.time}}}</dd> </dl>';workflow_report.report='<div> <span class="label pull-right label-success{{#data.closed}} label-danger{{/data.closed}}">{{data.end_state}}</span> Submitted {{workflow.created_at.fromNow}} by <h4>{{owner.first_name}} {{owner.last_name}}</h4><hr> <div class="row"> <div class="col-md-6"> {{>summary}} </div> <div class="col-md-6"> {{>actions}} </div> </div> </div> <div class="panel"> <div class="panel-body"> {{>preview}} </div> </div> {{#workflow.instance.version.code.form.files}} <div> <a class="pull-right btn btn-primary {{^hasFiles }}disabled{{/hasFiles}}" href="/api/workflowsubmissions/{{original.workflow_submission_id}}/files/zip"><i class="fa fa-download"></i> Download All</a> <h3> Attachments </h3><hr/> {{>files}} </div> {{#current_state.uploads}} <div class="dropzone" id="myId"><center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center></div> {{/current_state.uploads}} {{/workflow.instance.version.code.form.files}}';workflow_report.status=' <div class="btn-group pull-right slice-actions parent-hover"> {{#enable_min}}<span class="btn btn-default btn-sm min-item fa fa-toggle" data-event="min" title="Minimize"></span>{{/enable_min}} </div> {{#container}} <div class="panel panel-default"> <div class="panel-heading{{^titlebar}} hide{{/titlebar}}" style="position:relative"> <h3 class="panel-title">{{title}}{{^title}}{{{widgetType}}}{{/title}}</h3> </div> <div class="collapsible panel-body"> <h3 class="flow-title"></h3> <div class="g_{{guid}}"> <center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> </div> </div> {{/container}} {{^container}} <div class="collapsible"> </div> {{/container}}';workflow_report.summary='<dl class="dl-horizontal"> <dt>Status</dt><dd style="text-transform: capitalize;">{{status}}</dd> <dt>State</dt><dd>{{state}}</dd> <dt>Original Submission</dt> <dd>{{original.created_at.date}} @ {{original.created_at.time}}</dd> <dt>Last Action</dt> <dd>{{latest.updated_at.date}} @ {{latest.updated_at.time}}</dd> <dt>Assignee</dt><dd>{{assignment.group.name}}{{^assignment.group.name}}{{assignment.user.first_name}} {{assignment.user.last_name}}{{/assignment.group.name}} ({{assignment.type}})</dd> <dt>Submission ID</dt> <dd>{{original.workflow_submission_id}}</dd> </dl>';workflow_report.view='<div class="panel panel-default"> <div class="panel-heading" style="position:relative"> <h3 class="panel-title">{{options.workflow_instance.name}}</h3> </div> <div class="panel-body" style="padding-right: 50px;padding-left: 35px;"> <div class="view_container" style="padding-right: 50px;padding-left: 35px;"></div> </div> </div>';workflow_report.workflow=' <div class="btn-group pull-right slice-actions parent-hover"> {{#enable_min}}<span class="btn btn-default btn-sm min-item fa fa-toggle" data-event="min" title="Minimize"></span>{{/enable_min}} </div> {{#container}} <div class="row"> <div class="col-md-12"> <div class="panel panel-default" id="{{guid}}"> <div class="panel-body"> <div class="header">{{>header}}</div> {{#isContinue}} <div class="alert alert-info alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <b>Continuing with workflow that was previously started. <br><br>Click <a href="#" data-action="restart">here</a> to discard this data and start over.</b> <hr> <small class="pull-right">Last updated {{submission.updated_at.fromNow}}</small> {{#submission}} <dl class="dl-horizontal" style="margin-bottom: 0;"> <dt>Title</dt><dd>{{title}}</dd> <dt>Comment</dt><dd>{{comment}}</dd> </dl> {{/submission}} </div> {{/isContinue}} <div> <!-- Nav tabs --> {{#allowFiles}} <ul class="nav nav-tabs" role="tablist"> <li role="presentation" class="active"><a href="#form" aria-controls="form" role="tab" data-toggle="tab">Form</a></li> <li role="presentation"><a href="#files" aria-controls="files" role="tab" data-toggle="tab">Attachments</a></li> </ul> {{/allowFiles}} <!-- Tab panes --> <div class="tab-content" style="padding-top:15px"> <div role="tabpanel" class="tab-pane active" id="form"> <div class="g_{{guid}}"> <center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> </div> {{#allowFiles}} <div role="tabpanel" class="tab-pane" id="files"> <div class="f_{{guid}}"></div> </div> {{/allowFiles}} </div> </div> {{#allowFiles}} <div class="dropzone" id="uploader_{{guid}}"><center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> {{/allowFiles}} </div> </div> </div> </div> {{/container}} {{^container}} <div class="collapsible "id="{{guid}}"> <div class="header"></div> <div> <!-- Nav tabs --> {{#allowFiles}} <ul class="nav nav-tabs" role="tablist"> <li role="presentation" class="active"><a href="#form" aria-controls="form" role="tab" data-toggle="tab">Form</a></li> <li role="presentation"><a href="#files" aria-controls="files" role="tab" data-toggle="tab">Attachments</a></li> </ul> {{/allowFiles}} <!-- Tab panes --> <div class="tab-content" style="padding-top:15px"> <div role="tabpanel" class="tab-pane active" id="form"> <div class="g_{{guid}}"> <center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> </div> {{#allowFiles}} <div role="tabpanel" class="tab-pane" id="files"> <div class="f_{{guid}}"></div> </div> {{/allowFiles}} </div> </div> {{#allowFiles}} <div class="dropzone" id="uploader_{{guid}}"><center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center></div> {{/allowFiles}} </div> {{/container}}';workflow_report.workflow_summary_container=' <div></div>';workflow_report.workflow_summary=' {{#workflow.configuration}} {{#allow_multiple_new}} <div class="btn-group action-bar"> <button type="button" class="btn btn-success" data-action="save">Save for later</button> <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu"> <li><a href="#" data-action="new" type="button">New</a></li> <li><a href="#" data-action="validate" type="button">Validate</a></li> <li role="separator" class="divider"></li> <li><a href="#" data-action="discard" type="button" class="text-danger">Discard</a></li> </ul> </div> <hr> {{/allow_multiple_new}} {{#instructions}} <div class="callout callout-warning">{{instructions}}</div> {{/instructions}} {{/workflow.configuration}} {{#workflow.configuration.display_required_list}} {{#required.length}} <div class="panel panel-{{#satisfied.false}}info{{/satisfied.false}}{{^satisfied.false}}success{{/satisfied.false}} current-panel"> <div class="panel-heading" style="position:relative"> <h3 class="panel-title">Required Fields</h3> </div> <div class="panel-body workflow-required"> <div>{{#required}}<span class="required-field {{^satisfied}}missing{{/satisfied}}"><a data-id="{{id}}" class="label label-{{^satisfied}}info{{/satisfied}}{{#satisfied}}default{{/satisfied}}">{{label}}</a>{{/required}}</div> </div> </div> {{/required.length}} {{/workflow.configuration.display_required_list}} {{#workflow.configuration.display_error_list}} {{#errors.length}} <div class="panel panel-danger current-panel"> <div class="panel-heading" style="position:relative"> <h3 class="panel-title">Errors</h3> </div> <div class="list-group workflow-errors"> {{#errors}}<a class="list-group-item text-info error-field" data-id="{{id}}" style="cursor:pointer;padding: 5px 5px 0;overflow: hidden;" > <b>{{label}}</b> <ul> {{#errors}}<li class="text-danger" >{{{.}}}</li>{{/errors}} </ul> </a> {{/errors}} </div> </div> {{/errors.length}} {{/workflow.configuration.display_error_list}} {{#workflow.configuration.allow_multiple_new}} {{#if all.length > 1 }} <div class="panel panel-default saved-panel"> <div class="panel-heading" style="position:relative"> <h3 class="panel-title">Unsubmitted</h3> </div> <div class="list-group" id="submissions" style="max-height: 295px;overflow: scroll;"> <div class="list-group-item" style="padding:0"> <div class="input-group" style="margin: 0 -1px;"> <span class="input-group-addon" style="border-radius: 0;"><i class="fa fa-filter"></i></span> <label for="filter" class="sr-only">Filter</label> <input type="text" class="form-control filter" data-selector="#submissions.list-group" name="filter" placeholder="Filter..."> <span class="input-group-addon" style="border-radius: 0;"><span class="badge">{{all.length}}</span></span> </div> </div> {{#all}} <a href="#" onclick="event.preventDefault();" class="filterable list-group-item {{status}} inProgress {{#if submission.id == id}}list-group-item-info{{/if}}" data-id="{{id}}">{{title}}<br><small class="text-muted">{{comment}}</small></a> {{/all}} </div> </div> {{/if}} {{/workflow.configuration.allow_multiple_new}}';workflow_report.workflows=' <div class="btn-group pull-right slice-actions parent-hover"> {{#enable_min}}<span class="btn btn-default btn-sm min-item fa fa-toggle" data-event="min" title="Minimize"></span>{{/enable_min}} </div> {{#container}} <div class="panel panel-default"> <div class="panel-heading{{^titlebar}} hide{{/titlebar}}" style="position:relative"> <h3 class="panel-title">{{title}}{{^title}}{{{widgetType}}}{{/title}}</h3> </div> <div class="collapsible panel-body"> <h3 class="flow-title"></h3> <div class="g_{{guid}}"> <center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> </div> </div> {{/container}} {{^container}} <div class="collapsible"> </div> {{/container}}';Cobler.types.WorkflowSubmissionReport=function(container){function get(){return item}
var item={guid:generateUUID()}
var fields={}
return{container:container,fields:fields,render:function(){return workflow_report.container},edit:defaultCobEditor.call(this,container),toJSON:get,get:get,set:function(newItem){$.extend(item,newItem)},processFile:function(file){file=this.processDates(file);file.file=!0;switch(file.mime_type){case "image/jpeg":case "image/png":case "image/jpg":case "image/gif":if(file.deleted_at){file.icon='<i class="fa fa-image fa-3x" style="padding-top: 4px;"></i>'}
file.preview='<div style="text-align:center;padding:10px;"><img style="max-width:100%" src="'+file.path+'"/></div>';break;default:file.icon='<i class="fa '+mime_icons[file.mime_type]||mime_icons[file.mime_type.split('/')[0]]||mime_icons[file.ext]||"fa-file-o"+' fa-3x" style="padding-top: 4px;"></i>';file.preview=""}
if(file.ext=="pdf"){file.preview='<iframe width="100%" height="'+($(document).height()-$('.report').position().top-100)+'px" src="'+file.path+'"></iframe>'}
return file},processDates:function(log){var cat=moment(log.created_at);var uat=moment(log.updated_at);log.created_at={original:log.created_at,time:cat.format('h:mma'),date:cat.format('MM/DD/YY'),fromNow:cat.fromNow()}
log.updated_at={original:log.updated_at,time:uat.format('h:mma'),date:uat.format('MM/DD/YY'),fromNow:uat.fromNow()}
log.date=log.created_at.original;log.closed=log.status=='closed';log.open=log.status=='open';return log},initialize:function(el){$('body').append('<style>@media (min-width: 992px) {.modal.gform .modal-dialog{width:992px}}</style>')
if(this.container.owner.options.disabled&&this.get().enable_min){var collapsed=(Lockr.get(this.get().guid)||{collapsed:this.get().collapsed}).collapsed;this.set({collapsed:collapsed});$(el).find('.widget').toggleClass('cob-collapsed',collapsed)}
$.ajax({url:'/workflows/fetch/'+this.get().options.workflow_instance_id+'/all/'+this.get().options.id,dataType:'json',type:'GET',success:function(resources){$.ajax({url:'/api/workflowsubmissions/'+this.get().options.id+'/history',dataType:'json',type:'GET',success:function(resources,response){this.get().options=this.processDates(this.get().options)
data=_.orderBy(_.map(response.logs,function(log){log=this.processDates(log);log.log=!0;return log}.bind(this)).concat(_.map(response.files,this.processFile.bind(this))),'date','desc')
templates=_.merge({},workflow_report,_.mapValues(_.keyBy(_.filter(this.get().options.workflow_version.code.templates,function(e){return e.content.length}),function(e){return e.name.toLowerCase()}),'content'))
mappedData=_.pick(this.get().options,'status','state')
mappedData.report_url=this.get().report_url;mappedData.owner=_.pick(this.get().options.user,'first_name','last_name','email','unique_id','id','params')
mappedData.actor=_.pick(this.get().user,'first_name','last_name','email','unique_id','id','params','groups')
mappedData.owner.is={actor:mappedData.owner.unique_id==mappedData.actor.unique_id}
mappedData.actor.is={owner:mappedData.owner.unique_id==mappedData.actor.unique_id}
mappedData.assignment={type:this.get().options.assignment_type,id:this.get().options.assignment_id};if(mappedData.assignment.type=="user"){mappedData.assignment.user=_.pick(this.get().assignment,'first_name','last_name','email','unique_id','id','params')}else{mappedData.assignment.group=this.get().assignment}
mappedData.workflow={name:this.get().options.workflow.name,description:this.get().options.workflow.description,instance:this.get().options.workflow_instance};mappedData.current_state=_.find(mappedData.workflow.instance.version.code.flow,{name:mappedData.state})||mappedData.workflow.instance.version.code.flow[0];mappedData.is={open:(mappedData.status=='open'),closed:(mappedData.status=='closed'),initial:(mappedData.state==mappedData.workflow.instance.configuration.initial),}
if(data.length>1){mappedData.previous=_.pick(data[1],'state','status')
mappedData.previous.state=mappedData.previous.end_state||mappedData.workflow.instance.configuration.initial;mappedData.was={open:(mappedData.previous.status=='open'),closed:(mappedData.previous.status=='closed'),initial:(mappedData.previous.state==mappedData.workflow.instance.configuration.initial)}}
mappedData.history=_.map(data,function(event){var newEvent=_.pick(event,'user','deleted_by','id','data','comment','action','status','created_at','updated_at','file','log','mime_type','path','name','icon','preview','date','deleted_at','deleted_by');newEvent.assignemnt={type:event.assignment_type,id:event.assignment_id};newEvent.state=event.end_state;newEvent.actor=_.pick(event.deleted_by||event.user,'first_name','last_name','email','unique_id','id','params')
newEvent.created_by=_.pick(event.user,'first_name','last_name','email','unique_id','id','params')
newEvent.actor.is={owner:mappedData.owner.unique_id==newEvent.actor.unique_id}
newEvent.previous={state:event.start_state}
newEvent.is={open:(newEvent.status=='open'),closed:(newEvent.status=='closed'),initial:(newEvent.state==mappedData.workflow.instance.configuration.initial)}
return newEvent})
mappedData.original=data[data.length-1];mappedData.latest=_.find(data,{log:!0});mappedData.datamap={};_.each(mappedData.workflow.instance.configuration.map,function(item){mappedData.datamap[item.name]=item.value})
mappedData.actions=_.filter((_.find(this.get().options.workflow_version.code.flow,{name:this.get().options.state})||{"actions":[]}).actions,function(is_assigned,action){if(typeof action.assignment=='undefined'){if(is_assigned){return!0}}else{if(action.assignment.type=="user"){if(gform.m(action.assignment.id,mappedData)==mappedData.actor.unique_id.toString()){return!0}}else if(action.assignment.type=="group"){if(mappedData.actor.groups.indexOf(parseInt(gform.m(action.assignment.id,mappedData)))>=0){return!0}}}
return!1}.bind(null,this.get().is_assigned))
mappedData.is.actionable=!!mappedData.actions.length
gform.prototype.options.rootpath='/workflows/fetch/'+mappedData.workflow.instance.id+'/'
_.each(resources,function(item,name){gform.collections.add(name,_.isArray(item)?item:[])})
mappedData.resources=_.reduce(resources,function(resources,item,name){resources[name]=item;return resources},{})
mappedData.hasFiles=(_.filter(mappedData.history,function(item){if(item.file&&(item.deleted_at==null)){return item}}).length>0)
mappedData.hasFiles=(_.filter(mappedData.history,function(item){if(item.file&&(item.deleted_at==null)){return item}}).length>0)
if(typeof this.history!=='undefined'){this.history.teardown()}
this.history=new Ractive({el:this.container.elementOf(this).querySelector('.row .list'),template:templates.history,data:_.extend({},this.methods,mappedData),partials:templates});$('[data-toggle="tooltip"]').tooltip()
gform.collections.on('change',function(e){mappedData.resources[e.collection]=gform.collections.get(e.collection);if(typeof this.history!=='undefined'){this.history.update({data:mappedData})}
if(typeof this.ractive!=='undefined'){this.ractive.update({data:mappedData})}}.bind(this))
$('.filterable.file').on('click',function(e){$('.active').removeClass('active')
$(e.currentTarget).addClass('active')
if(typeof previewForm!=='undefined'){previewForm.destroy()}
document.querySelector('.report').innerHTML=gform.renderString(workflow_report.view,this.get());var file=_.find(mappedData.history,{selected:!0});if(typeof file!=='undefined'){file.selected=!1}
file=_.find(mappedData.history,{id:parseInt(e.currentTarget.dataset.id),file:!0});if(typeof file!=='undefined'){file.selected=!0}
if(typeof this.ractive!=='undefined'){this.ractive.teardown()}
this.ractive=new Ractive({el:document.querySelector('.report .view_container'),template:workflow_report.file_summary,data:_.extend({},this.methods,mappedData),partials:templates});$('[data-toggle="tooltip"]').tooltip()}.bind(this))
this.methods=[];update=function(dummy,response){if(typeof response!=='undefined'){var event=this.processFile.call(this,response);if(typeof event.user=='undefined'&&event.user_id_created==this.get().user.id){event.user=this.get().user}
if(event.deleted_at&&typeof event.deleted_by=='undefined'&&event.user_id_deleted==this.get().user.id){event.deleted_by=this.get().user}
var newEvent=_.pick(event,'user','deleted_by','id','data','comment','action','status','created_at','updated_at','file','log','mime_type','path','name','icon','preview','date','deleted_at','deleted_by');newEvent.assignemnt={type:event.assignment_type,id:event.assignment_id};newEvent.state=event.end_state;newEvent.actor=_.pick(event.deleted_by||event.user,'first_name','last_name','email','unique_id','id','params')
newEvent.created_by=_.pick(event.user,'first_name','last_name','email','unique_id','id','params')
newEvent.actor.is={owner:mappedData.owner.unique_id==newEvent.actor.unique_id}
newEvent.previous={state:event.start_state}
newEvent.is={open:(newEvent.status=='open'),closed:(newEvent.status=='closed'),initial:(newEvent.state==mappedData.workflow.instance.configuration.initial)}
var exists=_.find(mappedData.history,{id:response.id});if(typeof exists!=='undefined'){_.merge(exists,newEvent)}else{mappedData.history.unshift(newEvent)}
this.history.update(mappedData)
this.ractive.update(mappedData)}}.bind(this)
_.each(this.get().options.workflow_version.code.methods,function(item,index){eval('this.methods["'+item.name+'"] = this.methods["method_'+index+'"] = function(data,e){'+item.content+'\n}.bind(null,mappedData)')}.bind(this))
$('.row .list').on('click','.filterable.submission',function(e){$('.active').removeClass('active')
$(e.currentTarget).addClass('active')
if(typeof previewForm!=='undefined'){previewForm.destroy()}
var log=_.find(mappedData.history,{id:parseInt(e.currentTarget.dataset.id),log:!0});var states=_.map(mappedData.history,function(item){return item.state})
states.push(mappedData.workflow.instance.configuration.initial)
mappedData._flowstate_history=_.uniq(_.compact(states));form={name:"display",actions:[],data:{_state:log.data,data:mappedData,user:this.get().user,},"fields":[{"name":"_state",edit:!1,"label":"","type":"fieldset","fields":this.get().options.workflow_version.code.form.fields},{"type":"hidden","name":"_flowstate","value":log.state||mappedData.workflow.instance.configuration.initial},{"type":"hidden","name":"_flowstate_history","value":mappedData._flowstate_history}]}
form.methods=this.methods;form.events=this.get().options.workflow_version.code.form.events
if(e.currentTarget.dataset.current){var states=_.map(mappedData.history,function(item){return item.state})
states.push(mappedData.workflow.instance.configuration.initial)
form.fields[2].value=_.uniq(_.compact(states));gform.collections.update('files',_.where(mappedData.history,{file:!0}));previewForm=new gform(form);if(typeof templates.preview=='undefined'){previewForm.on('change',function(e){$('#previewForm').html(e.form.toString('_state'))
templates.preview='<h4>Current Data</h4><div id="previewForm">'+previewForm.toString('_state')+'</div>'})
templates.preview='<h4>Current Data</h4><div id="previewForm">'+previewForm.toString('_state')+'</div>'}
if(typeof this.ractive!=='undefined'){this.ractive.teardown()}
mappedData.preview=previewForm.toString('_state');mappedData.form=previewForm.toString('_state',!0);this.ractive=new Ractive({el:document.querySelector('.report'),template:templates.report,data:_.extend({},this.methods,mappedData),partials:templates});previewForm.on('change',function(e){mappedData.form=e.form.toString('_state',!0);mappedData.preview=previewForm.toString('_state');this.ractive.set({form:mappedData.form})}.bind(this))
if(mappedData.workflow.instance.version.code.form.files&&mappedData.current_state.uploads){$('#myId').html('');this.Dropzone=new Dropzone("div#myId",{timeout:60000,url:"/api/workflowsubmissions/"+mappedData.original.workflow_submission_id+"/files",init:function(){this.on("success",update)}});update()}
$('.workflow-files, .report').on('click','[data-id]',function(e){if(e.currentTarget.dataset.action=='delete'){e.stopPropagation();e.preventDefault();$.ajax({url:'/api/workflowsubmissions/'+mappedData.original.workflow_submission_id+'/files/'+e.currentTarget.dataset.id,type:'delete',success:update.bind(null,{}),error:function(){}})}else if(e.currentTarget.dataset.action=='edit'){e.stopPropagation();e.preventDefault();myModal=new gform({legend:"Edit file name",data:_.find(mappedData.history,{id:parseInt(e.currentTarget.dataset.id)}),fields:[{name:"name",label:!1},{name:"id",type:"hidden"}]}).on('cancel',function(e){e.form.trigger('close')}).on('save',function(e){$.ajax({url:'/api/workflowsubmissions/'+mappedData.original.workflow_submission_id+'/files/'+e.form.get('id'),type:'put',dataType:'json',contentType:'application/json',data:JSON.stringify(e.form.get()),success:update.bind(null,{}),error:function(){}})
e.form.trigger('close')}.bind(this)).modal()}}.bind(this))}else{document.querySelector('.report').innerHTML=gform.renderString(workflow_report.view,this.get());form.fields.push({"type":"hidden","name":"_flowaction","value":log.action})
var states=_.map(mappedData.history,function(compareDate,item){if(compareDate.isAfter(moment(item.created_at.original))){return item.state}}.bind(null,moment(log.created_at.original)))
states.push(mappedData.workflow.instance.configuration.initial)
form.fields[2].value=_.uniq(_.compact(states));form.fields[1].value=log.previous.state;previewForm=new gform(form,document.querySelector('.view_container'))}}.bind(this))
$('.filterable').first().click();$('.report').on('click','[data-event]',function(e){var formStructure={"legend":this.get().options.workflow_instance.name,"events":this.get().options.workflow_version.code.form.events||{},"data":{user:this.get().user,data:mappedData,_flowstate:this.get().options.state,_flowaction:e.currentTarget.dataset.event,_id:this.get().options.id},"actions":[{"type":"cancel","name":"submitted","action":"canceled",},{"type":"save","name":"submit","label":"<i class='fa fa-check'></i> Submit"},{"type":"hidden","name":"_flowstate"},{"type":"hidden","name":"_flowstate_history","value":''},{"type":"hidden","name":"_flowaction"},{"type":"hidden","name":"_id"}],"fields":[{"name":"comment","label":"Comment","type":"textarea","length":255}]}
if(_.find((_.find(this.get().options.workflow_version.code.flow,{name:this.get().options.state})||{"actions":[]}).actions,{name:e.currentTarget.dataset.event}).form){formStructure.data._state=this.get().options.data;formStructure.fields.splice(0,0,{"name":"_state","label":!1,"type":"fieldset","fields":this.get().options.workflow_version.code.form.fields})}
var states=_.map(mappedData.history,function(item){return item.state})
states.push(mappedData.workflow.instance.configuration.initial)
formStructure.actions[3].value=_.uniq(_.compact(states));formStructure.methods=[];_.each(this.get().options.workflow_version.code.methods,function(item,index){eval('formStructure.methods["method_'+index+'"] = function(e){'+item.content+'\n}.bind(formStructure.data)')}.bind(this))
new gform(formStructure).on('save',function(e){document.querySelector('.report').innerHTML='<center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center>';if(!e.form.validate(!0))return;e.form.trigger('close')
formData={comment:e.form.get('comment'),action:e.form.get('_flowaction')}
if(typeof e.form.find('_state')!=='undefined'){formData._state=e.form.get('_state')}
$.ajax({url:'/api/workflowsubmissions/'+e.form.get('_id'),dataType:'json',contentType:'application/json',data:JSON.stringify(formData),type:'PUT',success:function(data){document.location.reload()},error:function(){toastr.error("An error occured submitting this form. Please try again later",'ERROR')}})}.bind(this)).on('canceled',function(e){e.form.trigger('close')}).modal()}.bind(this))}.bind(this,resources)})}.bind(this)})}}};Cobler.types.Links=function(container){function render(){var temp=get();temp.link_admin=group_admin;temp.group_id=group_id;return templates.widgets_links_container.render(temp,templates)}
function get(){item.widgetType='Links';return item}
function set(newItem){$.extend(item,newItem)}
var item={title:'Links',show_all:!1,guid:generateUUID(),no_minimize:!0}
var fields={Title:{},"Show All":{name:'show_all',type:'checkbox'}}
return{container:container,fields:fields,render:render,toJSON:get,edit:defaultCobEditor.call(this,container),get:get,set:set,initialize:function(el){this.state=Lockr.get('links')||{favorites:[],toggle:!1};$(el).on('click','#available_links',function(e){this.state.toggle=!this.state.toggle;Lockr.set('links',this.state)}.bind(this))
$(el).on('click','.favorites',function(e){e.preventDefault();_.findWhere(this.links,{id:parseInt(e.currentTarget.parentElement.dataset.guid)}).favorite=!_.findWhere(this.links,{id:parseInt(e.currentTarget.parentElement.dataset.guid)}).favorite
this.state.favorites=_.map(_.where(this.links,{favorite:!0}),function(item){return _.pick(item,'id','favorite','link')});Lockr.set('links',this.state)
$(el).find('.link_collection').html(templates.widgets_links.render($.extend({},this.get(),{links:this.links,toggle:this.state.toggle}),templates))}.bind(this))
var url='/api/user_links'
if(!this.get().show_all){url=url+'/'+group_id}
$.ajax({url:url,dataType:'json',type:'GET',success:function(el,data){if(typeof this.state.favorites!=='undefined'){_.each(this.state.favorites,function(links){var temp=_.findWhere(data,{id:links.id});if(typeof temp!=='undefined'){temp.favorite=links.favorite}else{temp=_.findWhere(data,{link:links.link});if(typeof temp!=='undefined'){temp.favorite=links.favorite}}})}
this.links=data;$(el).find('.link_collection').html(templates.widgets_links.render($.extend({},this.get(),{links:this.links,toggle:this.state.toggle}),templates))}.bind(this,el)})}}};var templates_render=function(data){return gform.m(this.template,_.extend({},data||{},templates_partials))}
if(!!!templates)var templates={}
templates.filter={render:templates_render,template:'<div class="input-group"> <span class="input-group-addon"><i class="fa fa-filter"></i></span> <label for="filter" class="sr-only">Filter</label> <input type="text" class="form-control filter" data-selector="{{filter.selector}}" data-score="{{filter.score}}" name="filter" placeholder="{{^filter.placeholder}}Filter...{{/filter.placeholder}}{{filter.placeholder}}"> </div> '};templates.spinner={render:templates_render,template:'<center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:20px auto;color:#d8d8d8"></i></center>'};templates.widgets__actions={render:templates_render,template:'{{^container}}<div class="slice-label">{{title}}{{^title}}{{{widgetType}}}{{/title}}</div>{{/container}} <div class="btn-group pull-right slice-actions parent-hover"> <span class="btn btn-default btn-sm fa-pencil fa edit-item" title="Edit&nbsp;Settings"></span> <span class="btn btn-default btn-sm fa-eye fa" data-event="manage" title="Visibility&nbsp;Settings"></span> <!--{{#enable_min}}<span class="btn btn-default btn-sm min-item fa fa-toggle" data-event="min" title="Minimize"></span>{{/enable_min}}--> <!-- <span class="btn btn-default btn-sm fa fa-resize hidden-xs" data-event="full" title="Full Page"></span> <span class="duplicate-item btn btn-sm btn-default fa fa-copy" data-title="Duplicate"></span>--> <span class="btn btn-danger btn-sm fa fa-times remove-item" title="Remove"></span> </div> '};templates.widgets__header={render:templates_render,template:'<div class="panel-heading{{^titlebar}} hide{{/titlebar}}" style="position:relative"> <h3 class="panel-title">{{title}}{{^title}}{{{widgetType}}}{{/title}}</h3> </div>'};templates.widgets__limited_actions={render:templates_render,template:'<div class="btn-group pull-right slice-actions parent-hover"> {{#uapp_admin}}<a href="/admin/appinstances/{{app_id}}" target="_blank" class="btn btn-default btn-sm fa fa-edit admin-item" data-event="admin_edit" title="Instance Admin"></a>{{/uapp_admin}} {{#image_admin}}<a href="/admin/groups/{{group_id}}/images" target="_blank" class="btn btn-default btn-sm fa fa-edit admin-item" data-event="admin_edit" title="Images Admin"></a>{{/image_admin}} {{#enable_min}}<span class="btn btn-default btn-sm min-item fa fa-toggle" data-event="min" title="Minimize"></span>{{/enable_min}} {{#user_edit}}<span class="btn btn-default btn-sm fa fa-pencil edit-item" data-event="user_edit" title="Edit"></span>{{/user_edit}} </div> '};templates.widgets_container={render:templates_render,template:'<div style="position:relative;{{#collapsed}}min-height:30px{{/collapsed}}" class="widget {{widgetType}} {{#limit}}{{#group.ids}}group_{{.}} {{/group.ids}}{{^group.ids}}group_all {{/group.ids}}{{/limit}}{{^limit}}group_all{{/limit}} {{device}}" id="{{id}}"> <div class="cobler-li-content widget"></div> </div>'};templates.widgets_content={render:templates_render,template:'{{>widgets__limited_actions}} {{#container}} <div class="panel panel-default"> {{>widgets__header}} <div class="collapsible panel-body"> <div> {{{text}}} </div> </div> </div> {{/container}} {{^container}} <div class="collapsible"> <div> {{{text}}} </div> </div> {{/container}}'};templates.widgets_edit_container={render:templates_render,template:'<div style="position:relative"> <div class="cobler-li-content widget"></div> {{>widgets__actions}} </div>'};templates.widgets_empty_microapp={render:templates_render,template:'<div> <div class="panel panel-default on-collapse"> {{>widgets__header}} </div> <div class="collapsible {{#collapsed}}cob-collapsed" style="display: none;{{/collapsed}}"> </div> </div>'};templates.widgets_image_header={render:templates_render,template:'{{>widgets__limited_actions}} {{#container}} <div class="panel panel-default"> {{>widgets__header}} <div class="collapsible panel-body" style="overflow: auto;"> {{/container}} {{#images.1.image}} <div class="slider-wrapper theme-default"> <div class="ribbon"></div> <div class="slider" class="nivoSlider"> {{#images}} {{#url}}<a href="{{url}}" {{#window}}target="_blank"{{/window}}>{{/url}}<img src="/image/{{image}}" alt="{{text}}" title="{{&overlay}}"/>{{#url}}</a>{{/url}} {{/images}} </div> </div> {{/images.1.image}} {{^images.1.image}} {{#images}} {{#url}}<a href="{{url}}" {{#window}}target="_blank"{{/window}}>{{/url}}<img style="max-width: 100%;margin-bottom: 20px;" src="/image/{{image}}" alt="{{text}}" title="{{&overlay}}"/>{{#url}}</a>{{/url}} {{/images}} {{^images}}Click Here to choose an Image{{/images}} {{/images.1.image}} {{#container}} </div> </div> {{/container}} '};templates.widgets_links={render:templates_render,template:'{{#links}} {{#favorite}} <a href="/link/{{id}}" data-guid="{{id}}" data-image="{{image}}" data-icon="{{icon}}" data-color="{{color}}" data-link="{{link}}" data-title="{{title}}" target="_blank" class="filterable list-group-item">{{#icon}}<i style="color:{{color}}" class="{{icon}}"></i>{{/icon}} {{#image}}<img height="16px" alt="icon" src="{{image}}"/>{{/image}} {{title}}<i style="font-size:21px;position: absolute;top: 10px;right: 10px;{{#favorite}}color:gold{{/favorite}}" class="favorites parent-hover fa fa-star{{^favorite}}-o{{/favorite}}"></i></a> {{/favorite}} {{/links}} {{! <hr style="margin: 16px;border: solid 1px #ffd700;"> }} <div class="panel-default"> <div class="panel-heading" role="tab" id="headingOne"> <h4 class="panel-title"> <a id="available_links" data-toggle="collapse" href="#links-container" aria-expanded="true" aria-controls="links-container" {{#toggle}}class="collapsed"{{/toggle}}> <i class="fa fa-collapse fa-fw"></i> Available Links </a> </h4> </div> <div id="links-container" class="panel-collapse collapse {{^toggle}}in{{/toggle}}" {{#toggle}}style="height: 0px;"{{/toggle}} role="tabpanel" aria-labelledby="links-container"> <div class="panel-body" style="padding:0"> <div class="list-group" style="margin-bottom:0;min-height:30px" data-title="links" id="links" data-label="Useful Links"> {{#links}} {{^favorite}} <a href="/link/{{id}}" data-guid="{{id}}" data-image="{{image}}" data-icon="{{icon}}" data-color="{{color}}" data-link="{{link}}" data-title="{{title}}" target="_blank" class="filterable list-group-item">{{#icon}}<i style="color:{{color}}" class="{{icon}}"></i>{{/icon}} {{#image}}<img height="16px" alt="{{title}}" src="{{image}}"/>{{/image}} {{title}}<i style="font-size:21px;position: absolute;top: 10px;right: 10px;{{#favorite}}color:gold{{/favorite}}" class="favorites parent-hover fa fa-star{{^favorite}}-o{{/favorite}}"></i></a> {{/favorite}} {{/links}} </div> </div> </div></div>'};templates.widgets_links_container={render:templates_render,template:'<div class="btn-group pull-right slice-actions parent-hover"> {{#link_admin}}<a href="/admin/groups/{{group_id}}/links" target="_blank" class="btn btn-default btn-sm fa fa-edit admin-item" data-event="admin_edit" title="Links Admin"></a>{{/link_admin}} </div> {{#container}} <div class="panel panel-default"> <div class="panel-heading" style="position:relative"> <h3 class="panel-title">{{title}}{{^title}}{{loaded.name}}{{^loaded.name}}{{{widgetType}}}{{/loaded.name}}{{/title}}</h3> </div> {{/container}} <div id="{{title}}{{id}}" class="panel-collapse {{#collapse}}collapse{{/collapse}}{{^collapse}}in{{/collapse}}" role="tabpanel" aria-labelledby="{{title}}{{id}}"> <div class="panel-body" style="padding:0"> <label for="link_filter" class="sr-only">Filter</label><input id="link_filter" type="text" class="form-control filter" data-selector=".link_collection" name="filter" placeholder="Filter..."> <div class="list-group link_collection" style="margin-bottom:0;min-height:30px" data-title="link_filter"> {{>widgets_links}} </div> </div> </div> {{#container}} </div> {{/container}} '};templates.widgets_microapp={render:templates_render,template:'{{>widgets__limited_actions}} {{#container}} <div class="panel panel-default"> {{>widgets__header}} <div class="collapsible panel-body"> <center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:40px auto;color:#eee"></i></center> </div> </div> {{/container}} {{^container}} <div class="collapsible"> </div> {{/container}}'};templates.widgets_summary={render:templates_render,template:'<div> Unique ID: {{user.unique_id}} </div>'};var templates_partials={"filter":templates.filter.template,"spinner":templates.spinner.template,"widgets__actions":templates.widgets__actions.template,"widgets__header":templates.widgets__header.template,"widgets__limited_actions":templates.widgets__limited_actions.template,"widgets_container":templates.widgets_container.template,"widgets_content":templates.widgets_content.template,"widgets_edit_container":templates.widgets_edit_container.template,"widgets_empty_microapp":templates.widgets_empty_microapp.template,"widgets_image_header":templates.widgets_image_header.template,"widgets_links":templates.widgets_links.template,"widgets_links_container":templates.widgets_links_container.template,"widgets_microapp":templates.widgets_microapp.template,"widgets_summary":templates.widgets_summary.template};modal=(options,data)=>{if(typeof options=='string'){options={content:options}}
var hClass=''
switch(options.status){case 'error':hClass='bg-danger';break;case 'success':case 'primary':case 'info':case 'warning':hClass='bg-'+options.status;break}
let mm=new gform({modal:{header_class:hClass},...options,data:{...data,...options.data},fields:[{type:'output',name:'modal',label:!1,format:{},value:$g.render(options.content,_.extend({},options.partials,data))},...(options.fields||[])],actions:(!!options.footer)?[]:options.actions||[{type:'cancel',label:'<i class="fa fa-times"></i> Close',"modifiers":"btn btn-default pull-right"}],}).modal().on('cancel',e=>{e.form.dispatch('close');e.form.destroy()});mm.ref=$(mm.el);return mm}
$g=function(options){function eventHub(){let handlers={};let on=(event,handler,data)=>{let guid=!1;if(typeof event!=='undefined'){var events=event.split(' ');guid=api.uuid
events.forEach(event=>{handlers[event]=handlers[event]||[];if(typeof handler!=='function')throw "Event handler must be a function"
handlers[event].push({handler:handler,id:guid,data:data})})}
return guid};let off=(event,id)=>{handlers[event].splice(handlers[event].findIndex(elem=>(elem.id==id)),1)};let emit=(e,data)=>{let a={};let pd=!0;let propagate=!0;a.preventDefault=()=>{pd=!0}
a.stopPropagation=()=>{propagate=!1}
if(typeof e=='string'){e=e.split(' ')}
if(typeof e!=='object'||!Array.isArray(e))throw 'Event must be a string or array'
e.forEach(event=>{a.event=event;a.data=data;let f=(handler)=>{if(typeof handler.handler=='function'){handler.handler(a)}
return propagate}
if(event in handlers)handlers[event].every(f);if('*' in handlers)handlers['*'].every(f)})
return a}
return{emit:emit,on:on,off:off}}
let globalevents=new eventHub();let actionBuffer=[]
let api={worker:new Worker('/assets/js/grapheneWorker.js'),isSet:e=>(e!=='undefined'),setData:(urls,options,callback,onError,onComplete)=>{if(typeof urls=='string')urls=[urls];Promise.all(_.map(urls,(url,index,list)=>{return new Promise((resolve,reject)=>{$.ajax({url:url,dataType:'json',contentType:'application/json',data:JSON.stringify(options.data),type:'POST',success:data=>{resolve(data)},error:data=>{reject(data)}})})})).then(data=>{if(typeof callback!=='undefined'){callback.apply(null,data)}}).catch(onError||(()=>{})).finally(onComplete||(()=>{}))},getData:(urls,callback,onError,onComplete)=>{if(typeof urls=='string')urls=[urls];Promise.all(_.map(urls,url=>{return new Promise((resolve,reject)=>{gform.ajax({path:url,success:function(data){resolve(data)},error:function(data){reject(data)}})})})).then(data=>{let ss=callback.toString().split('=>')[0].split('(');((ss.length>1)?ss[1]:ss[0]).split(')')[0].split(',').forEach((item,index)=>{if(data.length>index)$g.collections.add(item.trim(),data[index])})
callback.apply(null,data)}).catch(onError||(()=>{})).finally(onComplete||(()=>{}))},form:gform,forms:gform.instances,render:gform.m,alert:function(options,data){let{status="info",content="",title=""}=(typeof options=='string')?{content:options}:options;toastr[status](gform.m(content,data||{}),title)},emit:globalevents.emit,on:globalevents.on,off:globalevents.off,schedule:(method,interval)=>{return api.on('schedule',(e)=>{if(!(e.data.ticks%(interval||1)))method.call(null,e)})},intervalTask:(actions,opts)=>{let options=_.extend({period:1000},opts);actionBuffer=actionBuffer.concat(actions||[]);if(timer==null){timer=setInterval(function(){if(actionBuffer.length){if(typeof actionBuffer[0]=="function"){actionBuffer.shift().call(this)}else{actionBuffer.shift()}}
if(!actionBuffer.length){clearInterval(timer);timer=null}},options.period)}
return timer},modal:modal,confirm:(message,action)=>{$g.modal({title:'Confirm',content:message,actions:[{type:'save',label:'<i class="fa fa-check"></i> Ok',"modifiers":"btn btn-primary pull-right"},{type:'cancel',label:'<i class="fa fa-times"></i> Cancel',"modifiers":"btn btn-default pull-right"}]}).on('save',(e)=>{e.form.destroy();action(e)})},grid:GrapheneDataGrid,collections:gform.collections,apps:{},engines:{},formatDates:function(data){if(data==null)return{};if(typeof data.created_at=='string'){var cat=moment(data.created_at);data.created_at={original:data.created_at,time:cat.format('h:mma'),date:cat.format('MM/DD/YY'),fromNow:cat.fromNow()}
data.date=data.created_at.original}
if(typeof data.updated_at=='string'){var uat=moment(data.updated_at);data.updated_at={original:data.updated_at,time:uat.format('h:mma'),date:uat.format('MM/DD/YY'),fromNow:uat.fromNow()}}
return data},formatFile:file=>{switch(file.mime_type){case "image/jpeg":case "image/png":case "image/jpg":case "image/gif":break;default:file.icon='<i class="fa '+(mime_icons[file.mime_type]||mime_icons[file.mime_type.split('/')[0]]||mime_icons[file.ext]||"fa-file-o")+' fa-3x" style="padding-top: 4px;"></i>'}
file.date=moment(file.deleted_at||file.created_at).format('MM/DD/YY h:mm a');return file}}
api.worker.onmessage=(message)=>{api.emit('schedule',{timeStamp:message.timeStamp,ticks:message.data.ticks})}
Object.defineProperty(api,"widgets",{get:function(){return _.reduce(cb.collections,function(list,item){return list.concat(item.getItems())},[])},enumerable:!0});Object.defineProperty(api,"uuid",{get:()=>generateUUID(),enumerable:!0});Object.defineProperty(api,"waiting",{get:()=>!!this.isWaiting,set:value=>{if(value){if(!this.el){this.el=document.createElement("div");this.el.setAttribute("class","hide_wait");this.el.setAttribute("id","waiting");document.body.append(this.el)}
this.el.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> <span>'+value+'</span>';this.el.setAttribute("class","")}else{if(this.el)this.el.setAttribute("class","hide_wait")}
this.isWaiting=value},enumerable:!0});Object.defineProperty(api,"message",{set:message=>{if(typeof message=="string")message={message:message};let packet={...message,...(options.broadcast||{}),id:api.uuid};window.localStorage.setItem("_gb",JSON.stringify(packet))
$g.emit('broadcast',packet)},enumerable:!0});window.addEventListener('storage',(event)=>{if(event.storageArea!=localStorage)return;if(event.key==='_gb'){if(event.newValue!==""){let source=event.url.split(event.srcElement.location.origin)[1]
let newVal=JSON.parse(event.newValue);$g.emit('broadcast',{...newVal,source:event.url.split(event.srcElement.location.origin)[1]})}}});return api}({broadcast:{app:"custom"}})
$g.on('load',e=>{if(window.localStorage.getItem("_gb")!==null&&window.localStorage.getItem("_gb")!==""){$g.emit('broadcast',JSON.parse(window.localStorage.getItem("_gb")));$g.message=""}})
$g.on('broadcast',(e)=>{if('action' in e.data){switch(e.data.action){case 'toggle':debug[e.data.toggle]=!debug[e.data.toggle];$g.message="";break}}})
$g.on('loaded debug',(e)=>{var temp=document.querySelector('#debugtools')
if(temp)document.body.removeChild(temp)
if(!debug.state||typeof resource_type=='undefined'||['app','workflow'].indexOf(resource_type)<0||typeof cb=='undefined')return;switch(resource_type){case 'app':obj={resources:_.reduce(debug.app.config.resources,(result,resource)=>{result.push({results:debug.app.data[resource.name],...resource});return result},[])};case 'workflow':obj={};break}
document.body.append(gform.create(gform.renderString(`
  <div id="debugtools" style="position:fixed;bottom:0;right:0;width: 400px;margin-bottom: 0;" class="panel panel-default">
  <div class="panel-heading" role="tab" id="headingTools">
    <h4 class="panel-title">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTools" aria-expanded="false" aria-controls="collapseTools">
  Tools
      </a>
    </h4>
  </div>
  <div id="collapseTools" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTools">
    <div class="panel-body">
    {{#resources}}
    <h4>{{name}}</h4>
    <span class="muted">{{path}}</span>
    <div>Count:{{results.length}}</div>
    {{/resources}}
    </div>
  </div>
  </div>`,obj)))})
toastr.options={"closeButton":!1,"debug":!1,"newestOnTop":!1,"progressBar":!1,"positionClass":"toast-bottom-right","onclick":null,"showDuration":"300","hideDuration":"1000","timeOut":"5000","extendedTimeOut":"1000","showEasing":"swing","hideEasing":"linear","showMethod":"fadeIn","hideMethod":"fadeOut"};
/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.6.3
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2017, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof module==='object'&&typeof module.exports==='object'){factory(require('jquery'))}else{factory(jQuery)}}(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp)}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp))}else if(typeof timestamp==="number"){return inWords(new Date(timestamp))}else{return inWords($.timeago.datetime(timestamp))}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,autoDispose:!0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:'any moment now',seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){if(!this.settings.allowPast&&!this.settings.allowFuture){throw 'timeago allowPast and allowFuture settings can not both be set to false.'}
var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow}}
if(!this.settings.allowPast&&distanceMillis>=0){return this.settings.strings.inPast}
var seconds=Math.abs(distanceMillis)/1000;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;var years=days/365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=($l.numbers&&$l.numbers[number])||number;return string.replace(/%d/i,value)}
var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days/30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years));var separator=$l.wordSeparator||"";if($l.wordSeparator===undefined){separator=" "}
return $.trim([prefix,words,suffix].join(separator))},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");s=s.replace(/([\+\-]\d\d)$/," $100");return new Date(s)},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601)},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time"}});var functions={init:function(){functions.dispose.call(this);var refresh_el=$.proxy(refresh,this);refresh_el();var $s=$t.settings;if($s.refreshMillis>0){this._timeagoInterval=setInterval(refresh_el,$s.refreshMillis)}},update:function(timestamp){var date=(timestamp instanceof Date)?timestamp:$t.parse(timestamp);$(this).data('timeago',{datetime:date});if($t.settings.localeTitle){$(this).attr("title",date.toLocaleString())}
refresh.apply(this)},updateFromDOM:function(){$(this).data('timeago',{datetime:$t.parse($t.isTime(this)?$(this).attr("datetime"):$(this).attr("title"))});refresh.apply(this)},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};$.fn.timeago=function(action,options){var fn=action?functions[action]:functions.init;if(!fn){throw new Error("Unknown function name '"+action+"' for timeago")}
this.each(function(){fn.call(this,options)});return this};function refresh(){var $s=$t.settings;if($s.autoDispose&&!$.contains(document.documentElement,this)){$(this).timeago("dispose");return this}
var data=prepareData(this);if(!isNaN(data.datetime)){if($s.cutoff===0||Math.abs(distance(data.datetime))<$s.cutoff){$(this).text(inWords(data.datetime))}else{if($(this).attr('title').length>0){$(this).text($(this).attr('title'))}}}
return this}
function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if($t.settings.localeTitle){element.attr("title",element.data('timeago').datetime.toLocaleString())}else if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){element.attr("title",text)}}
return element.data("timeago")}
function inWords(date){return $t.inWords(distance(date))}
function distance(date){return(new Date().getTime()-date.getTime())}
document.createElement("abbr");document.createElement("time")}));function generateUUID(){var d=new Date().getTime();var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c=='x'?r:(r&0x3|0x8)).toString(16)});return uuid};function render(template,data){if(typeof templates[template]==='undefined'&&$('#'+template).length){templates[template]={render:templates_render,template:$('#'+template).html()}}
if(typeof templates[template]!=='undefined'){return templates[template].render(data,templates)}else{return gform.m(template,_.extend({},data||{},templates_partials))}}
function processFilter(options){options=options||{};var currentTarget=options.currentTarget||this.currentTarget;var collection;if(this.selector){collection=$(this.selector).find('.filterable')}else{collection=$('.filterable')}
collection.each(function(){if(_.score($(this).text().replace(/\s+/g," ").toLowerCase(),$(currentTarget).val().toLowerCase())>($(currentTarget).data('score')||0.40)){$(this).removeClass('nodisplay')}else{$(this).addClass('nodisplay')}})}
filterTimer=null;$('body').on('keyup','[name=filter]',function(event){this.currentTarget=event.currentTarget;this.selector=$(this).data('selector');if(!$(this).hasClass("delay")){processFilter.call(this)}else{clearTimeout(filterTimer);filterTimer=setTimeout($.proxy(processFilter,this),300)}});templates.listing=Hogan.compile('<ol class="list-group">{{#widgets}}<li data-guid="{{guid}}" class="list-group-item"><div class="handle"></div>{{widgetType}} - {{title}}</li>{{/widgets}}</ol>')
gform.validations.is_https=value=>value.startsWith("https://")?!1:'Basic Auth Routes must start with "https://"';var mime_icons={image:"fa-file-image-o",audio:"fa-file-audio-o",video:"fa-file-video-o","application/pdf":"fa-file-pdf-o","application/msword":"fa-file-word-o","application/vnd.ms-word":"fa-file-word-o","application/vnd.oasis.opendocument.text":"fa-file-word-o","application/vnd.openxmlformats-officedocument.wordprocessingml":"fa-file-word-o","application/vnd.ms-excel":"fa-file-excel-o","application/vnd.openxmlformats-officedocument.spreadsheetml":"fa-file-excel-o","application/vnd.oasis.opendocument.spreadsheet":"fa-file-excel-o","application/vnd.ms-powerpoint":"fa-file-powerpoint-o","application/vnd.openxmlformats-officedocument.presentationml":"fa-file-powerpoint-o","application/vnd.oasis.opendocument.presentation":"fa-file-powerpoint-o","text/plain":"fa-file-text-o","text/html":"fa-file-code-o","application/json":"fa-file-code-o","application/gzip":"fa-file-archive-o","application/zip":"fa-file-archive-o"}
debug={};Object.defineProperty(debug,'about',{get:function(){console.log('%c Workflow:\t%c'+mappedData.workflow.name+' %c(ID: '+mappedData.workflow.instance.workflow_id+')','color: #d85e16','color: #aaa','color: #aaa')
console.log('%c Instance:\t%c'+mappedData.workflow.instance.name+' %c(ID: '+mappedData.workflow.instance.id+')','color: #d85e16','color: #aaa','color: #aaa')
console.log('%c Version:\t%c'+(mappedData.workflow.instance.version_id||'Latest')+' %c(Using ID: '+mappedData.workflow.instance.version.id+')  %cUpdated  %c'+mappedData.workflow.instance.updated_at,'color: #d85e16','color: #aaa','color: #aaa','color: #d85e16','color: #aaa')},configurable:!1,});Object.defineProperty(debug,'summary',{get:function(){console.log('%c Status:\t\t%c'+mappedData.status,'color: #d85e16','color: #aaa')
console.log('%c State:\t\t\t%c'+mappedData.state,'color: #d85e16','color: #aaa')
if(typeof gform.instances.display!=='undefined'){console.log('%c _flowstate:\t%c'+gform.instances.display.get('_flowstate'),'color: #d85e16','color: #aaa')
console.log('%c Current Form Data:','color: #0088FF')
console.log(gform.instances.display.get('_state'))}
console.log('%c Template Data:','color: #0088FF')
console.log(mappedData)},configurable:!1,});Object.defineProperty(debug,'form',{get:function(){if(typeof gform.instances.display!=='undefined'){return gform.instances.display}},configurable:!1,});Object.defineProperty(debug,'data',{get:function(){return mappedData},configurable:!1,});Object.defineProperty(debug,'history',{get:function(){console.table(_.map(mappedData.history,function(item){item.owner=item.user.first_name+' '+item.user.last_name;item.created_at=item.created_at.date+' '+item.created_at.time;item.updated_at=item.updated_at.date+' '+item.updated_at.time;if(item.assignemnt.type=="group"){item.assignemnt="Group:"+item.assignemnt.id}else{item.assignemnt="User:"+item.assignemnt.id}
item.actor=item.actor.first_name+' '+item.actor.last_name;item.previous=item.state+'('+item.status+')';return _.omit(item,'is','log','file','data','date','user')}))},configurable:!1,});Object.defineProperty(window,'help',{get:function(){console.log('%c debug.about\t%c - info about the workflow configuration','color: #0088FF','color: #aaa')
console.log('%c debug.summary\t%c - summary','color: #0088FF','color: #aaa')
console.log('%c debug.form\t\t%c - reference to the displayed form','color: #0088FF','color: #aaa')
console.log('%c debug.data\t\t%c - template data','color: #0088FF','color: #aaa')
console.log('%c debug.history\t%c - template data','color: #0088FF','color: #aaa')},configurable:!1,});Object.defineProperty(debug,'instance',{get:function(){return cb.collections[0].getItems()[0]},configurable:!1,});Object.defineProperty(debug,'app',{get:function(){return cb.collections[0].getItems()[0].appEngine},configurable:!1,});Object.defineProperty(debug,'workflow',{get:function(){return cb.collections[0].getItems()[0]},configurable:!1,});Object.defineProperty(debug,'state',{get:()=>{return window.localStorage.getItem("debug")=='true'},set:value=>{value+='';if(window.localStorage.getItem("debug")!==value){window.localStorage.setItem("debug",value);$g.emit('debug',{state:(value=='true')})}},configurable:!1,});if(debug.state){window.addEventListener('error',function(event){$g.alert({content:event.message,title:"ERROR",status:'error'})})}
gform.types.textarea=_.extend({},gform.types.textarea,{focus:function(timeout){window.setTimeout(function(){if(this.el.querySelector('textarea[name="'+this.name+'"]')!==null&&typeof this.el.querySelector('textarea[name="'+this.name+'"]').focus=="function"){this.el.querySelector('textarea[name="'+this.name+'"]').focus();var temp=this.value;this.set('');this.set(temp)}}.bind(this),timeout||0)}});gform.stencils.ace=`
<div class="row clearfix form-group" name="{{name}}">
	{{>_label}}
	{{#label}}
	{{#inline}}<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/inline}}
	{{^inline}}<div class="col-md-8" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/inline}}
	{{/label}}
	{{^label}}
	<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>
	{{/label}}
		<div class="formcontrol"><div placeholder="{{placeholder}}" style="min-height: 250px;outline:none;border:solid 1px #cbd5dd;{{^unstyled}}background:#fff;padding:10px{{/unstyled}}" id="{{id}}container"></div></div>
	</div>
</div>`;gform.types.ace=_.extend({},gform.types.input,{create:function(){var tempEl=document.createElement("span");tempEl.setAttribute("id",this.id);if(this.owner.options.clear){tempEl.setAttribute("class",''+gform.columnClasses[this.columns])}
tempEl.innerHTML=this.render();return tempEl},initialize:function(){this.onchangeEvent=function(input){if(this.el.querySelector('.count')!=null){var text=this.value.length;if(this.limit){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}
this.owner.trigger(['change:'+this.name,'change','input:'+this.name,'input'],this,{input:this.value})}.bind(this)
this.input=this.input||!1;this.editor=ace.edit(this.el.querySelector('#'+this.id+"container"));this.editor.setTheme(this.item.theme||"ace/theme/chrome");this.editor.getSession().setMode({path:this.owner.options.default.mode||this.item.mode||"ace/mode/handlebars",inline:this.owner.options.default.inlinemode||this.item.inlinemode});this.editor.session.setValue(this.value||"");this.editor.on("change",this.onchangeEvent.bind(null,!1))},set:function(value){this.editor.session.setValue(value)},get:function(){return(typeof this.editor=='undefined')?this.value:this.editor.getValue()},focus:function(){this.editor.focus()}});gform.types.user=_.extend({},gform.types.smallcombo,{toString:function(name,display){if(!display){if(typeof this.combo!=='undefined'){return'<dt>'+this.label+'</dt> <dd>'+(this.combo.innerText||'(empty)')+'</dd><hr>'}else{return'<dt>'+this.label+'</dt> <dd>'+(this.get()||'(empty)')+'</dd><hr>'}}else{if(typeof this.options!=='undefined'&&this.options.length){return _.find(this.options,{unique_id:this.value})||this.value}else{return this.value}}},defaults:{strict:!0,search:"/api/users/search/{{search}}{{value}}",format:{title:'{{{label}}}{{^label}}User{{/label}}<span class="text-success pull-right">{{value}}</span>',label:"{{first_name}}{{#last_name}} {{last_name}}{{/last_name}}",value:"{{unique_id}}",display:'{{first_name}} {{last_name}}<div style="color:#aaa">{{email}}</div>'}}})
gform.types.user_id=_.extend({},gform.types.smallcombo,{toString:function(name,display){if(!display){if(typeof this.combo!=='undefined'){return'<dt>'+this.label+'</dt> <dd>'+(this.combo.innerText||'(empty)')+'</dd><hr>'}else{return'<dt>'+this.label+'</dt> <dd>'+(this.get()||'(empty)')+'</dd><hr>'}}else{if(typeof this.options!=='undefined'&&this.options.length){return _.find(this.options,{id:this.value})||this.value}else{return this.value}}},defaults:{strict:!0,search:"/api/users/search/{{search}}{{value}}",format:{title:'{{{label}}}{{^label}}User{{/label}}<span class="text-success pull-right">{{value}}</span>',label:"{{first_name}}{{#last_name}} {{last_name}}{{/last_name}}",value:function(item){return item.id},display:'{{first_name}} {{last_name}}<div style="color:#aaa">{{email}}</div>'},template:'{{attributes.user.first_name}} {{attributes.user.last_name}} - {{attributes.user.email}}'}})
gform.types.user_email=_.extend({},gform.types.user,{toString:function(name,display){if(!display){if(typeof this.combo!=='undefined'){return'<dt>'+this.label+'</dt> <dd>'+(this.combo.value||'(empty)')+'</dd><hr>'}else{return'<dt>'+this.label+'</dt> <dd>'+(this.get()||'(empty)')+'</dd><hr>'}}else{if(typeof this.options!=='undefined'&&this.options.length){return _.find(this.options,{unique_id:this.value})||this.value}else{return this.value}}},defaults:{strict:!0,search:"/api/users/search/{{search}}{{value}}",format:{title:'{{{label}}}{{^label}}User{{/label}}<span class="text-success pull-right">{{value}}</span>',label:"{{first_name}}{{#last_name}} {{last_name}}{{/last_name}}",value:"{{email}}",display:'{{first_name}} {{last_name}}<div style="color:#aaa">{{email}}</div>'}}})
gform.types.group=_.extend({},gform.types.smallcombo,{toString:function(name,display){if(!display){if(typeof this.combo!=='undefined'){return'<dt>'+this.label+'</dt> <dd>'+(this.combo.innerText||'(empty)')+'</dd><hr>'}else{return'<dt>'+this.label+'</dt> <dd>'+(this.get()||'(empty)')+'</dd><hr>'}}else{if(typeof this.options!=='undefined'&&this.options.length){return _.find(this.options,{id:parseInt(this.value)})||this.value}else{return this.value}}},defaults:{template:"{{display.group_id}}",search:'/api/groups?members=20',format:{title:'{{{label}}}{{^label}}Group{{/label}} <span class="text-success pull-right">{{value}}</span>',label:"{{name}}",value:"{{id}}"}}})
gform.types.files=_.extend({},gform.types.smallcombo,{toString:function(name,display){if(!display){if(typeof this.combo!=='undefined'){return'<dt>'+this.label+'</dt> <dd>'+(this.combo.innerText||'(empty)')+'</dd><hr>'}else{return'<dt>'+this.label+'</dt> <dd>'+(this.get()||'(empty)')+'</dd><hr>'}}else{return _.find(this.options,{id:parseInt(this.value)})||{}}},defaults:{options:'files',strict:!0,custom:{name:"addFile",display:'<div style="line-height:50px"><span class="label label-success">Upload New File</span> <span class="pull-right"><i class="fa fa-upload"></i></span></div>',action:function(e){document.querySelector('#uploader_'+e.form.options.id).click()}},format:{title:'<i class="fa fa-paperclip"></i> {{{label}}}{{^label}}Attachement{{/label}}',label:"{{name}}",value:"{{id}}",display:'<div style="height:50px;padding-left:60px;position:relative" href="{{path}}" target="_blank"><div style="outline:dashed 1px #ccc;display:inline-block;text-align:center;width:50px;;height:50px;{{^icon}}background-image: url({{path}});background-size: contain;background-repeat: no-repeat;background-position: center;{{/icon}}position:absolute;top:0px;left:5px">{{{icon}}}</div> {{name}} <span class="pull-right">{{date}}</span></div>'}}})
gform.types.endpoint={...gform.types.smallcombo,defaults:{label:!0,options:[{id:'none',name:"None"},{type:"optgroup",options:'endpoints'}],format:{label:'{{name}}',value:"{{id}}",display:'<dl class="dl-horizontal" style="margin-bottom:0"><dt>Name:</dt><dd>{{name}}</dd>{{#config}}<dt>URL:</dt><dd>{{url}}</dd><dt>User:</dt><dd>{{username}}</dd>{{/config}}{{^config}}<dt></dt><dd>No Endpoint will be used{{/config}}</dd></dl>'}},setLabel(){gform.toggleClass(this.labelEl,'required',this.required)
this.label=this.owner.options.data.resources[this.parent.index].name;this.labelEl.innerHTML=this.owner.options.data.resources[this.parent.index].name+this.suffix},render:function(){if(typeof this.mapOptions=='undefined'){this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections)
this.mapOptions.on('change',function(){this.options=this.mapOptions.getoptions()
if(this.shown){this.renderMenu()}
if(typeof this.value!=='undefined'){gform.types[this.type].set.call(this,this.value)}}.bind(this))}
this.options=this.mapOptions.getoptions();this.internalValue=this.value||"";this.help=($g.collections.get('endpoints').find(endpoint=>endpoint.id==this.value)||{config:{url:''}}).config.url+(this.owner.options.data.resources.find(resource=>resource.name==this.owner.options.data.resources[this.parent.index].name)||{path:''}).path
return gform.render('smallcombo',this)}}
gform.stencils.signaturePad=`
<style>.signaturePad-canvas{border:solid 1px #bbb;} 
.has-error .signaturePad-canvas{border-color:red;}</style>
<div class="row clearfix form-group {{modifiers}} data-type="{{type}}">
	{{>_label}}
	{{#label}}
	{{^horizontal}}<div class="col-md-12">{{/horizontal}}
	{{#horizontal}}<div class="col-md-8">{{/horizontal}}
	{{/label}}
	{{^label}}
	<div class="col-md-12">
    {{/label}}
    <canvas class="signaturePad-canvas" width="567" height="200"></canvas>
	<div class="">
		<div class="input-group" style="width:100%" contentEditable="false"> 
        </div>
        <center style="color:#888"> {{{help}}}{{^help}}Sign Above{{/help}}</center>
        <span class="font-xs text-danger" style="display:block;"></span>
		{{>_actions}}
	</div>
</div>`;gform.types.signature=gform.types.signaturePad=_.extend({},gform.types.input,{set:function(value){if(typeof value=='undefined'||value==null){this.signaturePad.clear()}else{this.signaturePad.fromData(value)}},toString:function(name,report){if(!report){return'<dt>'+this.label+'</dt> <dd><img src="'+(this.signaturePad.toDataURL())+'" alt="(Empty)"/></dd><hr>'}else{return this.signaturePad.toDataURL()}},get:function(){if(!('el' in this)){return this.internalValue};return this.signaturePad.toDataURL()},resizeCanvas:function(){this.canvas.width=(this.el.offsetWidth)?this.el.offsetWidth-32:this.canvas.width;this.signaturePad.clear()},initialize:function(){this.canvas=this.el.querySelector("canvas.signaturePad-canvas");this.signaturePad=new SignaturePad(this.canvas,{onEnd:function(e){this.owner.trigger('input')}.bind(this),onBegin:function(e){this.owner.trigger('change')}.bind(this)});window.onresize=gform.types.signaturePad.resizeCanvas.bind(this);setTimeout(gform.types.signaturePad.resizeCanvas.bind(this),200);gform.types[this.type].setLabel.call(this)},satisfied:function(){return!this.signaturePad.isEmpty()},focus:function(){}});gform.stencils.base64_file=`
<style>
  .files .badge{position:absolute;right:10px;bottom:10px;overflow:hidden;text-overflow:ellipsis;max-width:50%}
  .files .badge:hover{max-width:fit-content}
  </style>
<div class="row clearfix form-group {{modifiers}}" data-type="{{type}}">
  {{>_label}}
  {{#label}}
  {{^horizontal}}<div class="col-md-12">{{/horizontal}}
  {{#horizontal}}<div class="col-md-8">{{/horizontal}}
  {{/label}}
  {{^label}}
  <div class="col-md-12">
  {{/label}}
    {{#pre}}<div class="input-group col-md-12"><span class="input-group-addon">{{{pre}}}</span>{{/pre}}
    {{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}
      {{#multiple}}
      <small class="count text-muted pull-left" style="display:block;text-align:left;margin:5px">0/{{max}}</small>

      <div style="overflow:hidden;margin-bottom: 10px;"><div class="btn-group pull-right" role="group" aria-label="...">
        <button type="button" class="btn btn-danger gform-clear-all" {{^value}}disabled{{/value}}><i class="fa fa-times"></i> Clear</button>
      </div></div>
      {{/multiple}}
      <div class="dropzone dz-clickable" id="{{id}}"><div class="dz-message">Drop files here to upload</div>
      </div>

      <ul class="files list-group" style="border: none;margin: 0;padding: 0;min-height:0">
      </ul>
    {{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}
    {{^post}}{{#pre}}</div>{{/pre}}{{/post}}

    {{>_addons}}
    {{>_actions}}
  </div>
</div>
`;gform.stencils.base64_file_preview=`<li class="list-group-item ">
  <div><div class="btn-group pull-right hidden-print" role="group" aria-label="...">
        <button type="button" class="btn btn-danger gform-remove" title="Remove"><i class="fa fa-times"></i></button>
        <button type="button" class="btn btn-info gform-replace" title="Replace"><i class="fa fa-refresh"></i></button>
      </div></div>
      <span class="badge">{{name}}</span>
      <div style="background: #eee;text-align: center;line-height: 120px;border-radius: 20px;overflow: hidden;width: 120px;height: 120px;">{{#icon}}
      <i class="fa {{{icon}}} fa-3x" style="padding-top: 4px;"></i>
      {{/icon}}{{^icon}}<img data-dz-thumbnail /></div>\n {{/icon}} </div></li>`,Dropzone.autoDiscover=!1;gform.types.base64_file=_.extend({},gform.types.input,gform.types.collection,{focus:function(){},setup:function(){if(this.multiple&&typeof this.limit!=='undefinded'&&this.limit>1){gform.types.base64_file.updateStatus.call(this,!0)}
this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info')},defaults:{format:{uri:'{{{name}}}',options:[]}},dataURItoBlob:function(dataURI){'use strict'
var byteString,mimestring
if(dataURI.split(',')[0].indexOf('base64')!==-1){byteString=atob(dataURI.split(',')[1])}else{byteString=decodeURI(dataURI.split(',')[1])}
mimestring=dataURI.split(',')[0].split(':')[1].split(';')[0]
var content=new Array();for(var i=0;i<byteString.length;i++){content[i]=byteString.charCodeAt(i)}
return new Blob([new Uint8Array(content)],{type:mimestring})},updateStatus:function(silent){if(!silent)this.trigger('input',this)
if(this.multiple)this.el.querySelector('.gform-clear-all').disabled=!this.Dropzone.files.length;if(this.Dropzone.files.length>=(this.multiple?this.limit:1)){setTimeout(()=>{this.Dropzone.disable()},50)
gform.addClass(this.el.querySelector('.dropzone'),'hidden')}else{this.Dropzone.enable();gform.removeClass(this.el.querySelector('.dropzone'),'hidden')}
if(this.el.querySelector('.count')!=null){var text=this.value.length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}},set:function(value){if(typeof value!=='object')return;isDataURLregex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;if(this.multiple){if(typeof value=='object'&&!_.isArray(value)){value=[value]}
value=this.internalValue=value||[]}else{value=this.internalValue=value||{}}
var _this=this;_.each(((this.multiple)?value:[value]),function(value){if(!_.isEmpty(value)){if(typeof value.dataURI=="string"&&!!value.dataURI.match(isDataURLregex)){var mockFile=gform.types.base64_file.dataURItoBlob(value.dataURI,value.name);mockFile.name=value.name;_this.Dropzone.addFile(mockFile)}else if(typeof value=="object"){var mockFile=value;mockFile.name=value.name||value.dataURI;_this.Dropzone.displayExistingFile(mockFile,gform.m(_this.format.uri,value));_this.Dropzone.files.push(mockFile)}}})},destroy:function(){this.Dropzone.destroy()},get:function(){if(!('el' in this)){return this.internalValue};if(this.Dropzone.files.length){var val=_.reduce(this.Dropzone.files,function(obj,file){if(file instanceof Blob){var temp=_.pick(file,'type','name','dataURI')
temp.dataURI=temp.dataURI;temp.name=temp.name||file.upload.uuid}else{var temp=_.pick(file,'name','type')
temp.dataURI=file.dataURL}
obj.push(temp)
return obj},[])
if(this.multiple){this.internalValue=val||[]}else{this.internalValue=val[0]||this.value}}else{this.internalValue=(this.multiple)?[]:{}}
return this.internalValue},assignIcon:file=>{if(typeof file.type!=='undefined'){switch(file.type){case "image/jpeg":case "image/png":case "image/jpg":case "image/gif":if(typeof file.dataURI!=='undefined'){var memoryImg=document.createElement('img');memoryImg.src=file.dataURI;if(memoryImg.width<memoryImg.height){file.width=120;file.top=((120/memoryImg.width)*memoryImg.height-120)*(-.5)}else{file.height=120
file.left=((120/memoryImg.height)*memoryImg.width-120)*(-.5)}}
break;default:file.icon=(mime_icons[file.type]||mime_icons[file.type.split('/')[0]]||mime_icons[file.ext]||"fa-file-o")}}
return file},toString:function(name,report){this.internalValue=this.get();if(!report){this.internalValue=(this.multiple)?_.map(this.value,gform.types.base64_file.assignIcon):gform.types.base64_file.assignIcon(this.value);return gform.renderString((this.limit>1)?`
      <dt>{{label}}</dt> <dd style="min-height:30px">
      {{#value}}
      <hr>
      <a href="{{dataURI}}" download="{{name}}" class="btn btn-default pull-right">{{name}} <i class="fa fa-download text-primary txt-primary"></i></a>
      <!--span class="badge pull-right">{{name}}{{^name}}<span class="text-muted">(empty)</span>{{/name}}</span>-->
      {{#dataURI}}
      <div style="margin:15px 0;background: #eee;text-align: center;line-height: 120px;border-radius: 20px;overflow: hidden;width: 120px;height: 120px;">
        {{#icon}}<i class="fa {{{icon}}} fa-3x" style="padding-top: 4px;"></i>{{/icon}}
        {{^icon}}<img height="{{height}}" width="{{width}}" style="position:relative;top:{{top}}px;left:{{left}}px;" src="{{dataURI}}"/></div>{{/icon}}
      {{/dataURI}} 
      {{/value}}
      {{^value.length}}
      <span class="text-muted">(empty)</span>
      {{/value.length}}
      </dd><hr>`:`<dt>{{label}}</dt> <dd style="min-height:30px">
      {{#value.name}}
      {{#value}}
      <hr>
      {{#dataURI}}
      <a href="{{dataURI}}" download="{{name}}" class="btn btn-default pull-right">{{name}} <i class="fa fa-download text-primary txt-primary"></i></a>
      <!--span class="badge pull-right">{{name}}{{^name}}<span class="text-muted">(empty)</span>{{/name}}</span>-->
      <div style="margin:15px 0;background: #eee;text-align: center;line-height: 120px;border-radius: 20px;overflow: hidden;width: 120px;height: 120px;">
        {{#icon}}<i class="fa {{{icon}}} fa-3x" style="padding-top: 4px;"></i>{{/icon}}
        {{^icon}}<img height="{{height}}" width="{{width}}" style="position:relative;top:{{top}}px;left:{{left}}px;" src="{{dataURI}}"/></div>{{/icon}}
      {{/dataURI}} 
      {{/value}}
      {{/value.name}}
      {{^value.name}}
      <span class="text-muted">(empty)</span>
      {{/value.name}}
      </dd><hr>`,this)}else{return this.value}},satisfied:function(value){value=value||this.value;if(_.isArray(value)){return!!value.length}
return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='number'&&isNaN(value))&&!_.isEmpty(value))},initialize:function(){this.el.querySelector("#"+this.id+'.dropzone .dz-message').innerHTML=(this.item.format&&this.item.format.message)?this.item.format.message:$g.render('Drop files here to upload to {{label}}',_.pick(this,'label'));var onError=function(data){this.trigger('change',this,data)
this.trigger('error',this,data)
this.trigger('input',this,data)}.bind(this)
var onSuccess=function(data){this.trigger('change',this,data)
this.trigger('success',this,data)
this.trigger('input',this,data)}.bind(this)
this.Dropzone=new Dropzone(this.el.querySelector("#"+this.id+'.dropzone'),{addedfile:function(file){var data=this.options.formelement.get();if(this.options.formelement.multiple){data=data[this.files.indexOf(file)]}else{}
data=_.extend(data,file);if(typeof data.type!=='undefined'){switch(data.type){case "image/jpeg":case "image/png":case "image/jpg":case "image/gif":break;default:data.icon=(mime_icons[data.type]||mime_icons[data.type.split('/')[0]]||mime_icons[data.ext]||"fa-file-o")}}
file.previewElement=Dropzone.createElement(gform.render('base64_file_preview',data));var _this=this;file.previewElement.querySelector('.gform-remove').addEventListener("click",function(e){e.preventDefault();e.stopPropagation();_this.removeFile(file);gform.types.base64_file.updateStatus.call(_this.options.formelement)});file.previewElement.querySelector('.gform-replace').addEventListener("click",function(e){e.preventDefault();e.stopPropagation();_this.enable();_this.clickableElements[0].click()
_this.options.formelement.replaceIndex=_this.files.indexOf(file)
_this.options.formelement.replaceFile=file;gform.types.base64_file.updateStatus.call(_this.options.formelement,!0)});this.options.formelement.el.querySelector('ul.files').append(file.previewElement)},formelement:this,queuecomplete:gform.types.base64_file.updateStatus.bind(this),accept:function(file,done){if(this.options.formelement.replaceIndex!==null){this.removeFile(this.options.formelement.replaceFile);clearReplace()}
if(this.files.length>((this.options.formelement.multiple)?this.options.formelement.limit:1)){this.removeFile(file);done("Max files reached")}
this._sendIntercept(file).then(result=>{file.dataURI=result;if(typeof(this.localSuccess)==='function'){this.localSuccess(file,done)}else{done()}}).catch(result=>{if(typeof(this.localFailure)==='function'){file.dataURI=result;this.localFailure(file,done)}else{if(typeof(this.localFailure)==='string'){done(this.localFailure)}else{done(`Failed to upload file ${file.name}`);console.warn(file)}}})},url:"#",timeout:60000,uploadMultiple:!1,init:function(field){this.submitRequest=function(xhr,formData,files){files=_.each(files,function(file){files.status=(files.status=="uploading")?'success':file.status})
this._finished(files)}
this._sendIntercept=function(file,options={}){return new Promise((resolve,reject)=>{if(!options.readType){options.readType=_.reduce(['text/*','application/xml','application/x-sh','application/x-script','image/svg+xml'],function(result,type){const re=new RegExp(type);return result||re.test(file.type)},!1)?'readAsText':'readAsDataURL'}
let reader=new window.FileReader();reader.onload=()=>{resolve(reader.result)};reader.onerror=()=>{reject(reader.result)};reader[options.readType](file)})}
this.localSuccess=function(file,done){onSuccess(file);done()}
this.localFailure=function(file,done){onError(file)}}});this.replaceIndex=null;clearReplace=function(){this.replaceIndex=null;delete this.replaceFile}.bind(this)
this.Dropzone.hiddenFileInput.onclick=clearReplace;this.Dropzone.on('drop',clearReplace)
this.el.addEventListener('click',function(e){if(e.target.classList.contains('disabled')){return}
if(e.target.classList.contains('gform-clear-all')){this.Dropzone.removeAllFiles()
gform.types.base64_file.updateStatus.call(this)}}.bind(this))
gform.types.base64_file.set.call(this,this.value)
gform.types.base64_file.setup.call(this)}});gform.stencils.upload=`
<div class="row clearfix form-group {{modifiers}}" data-type="{{type}}">
  {{>_label}}
  {{#label}}
  {{^horizontal}}<div class="col-md-12">{{/horizontal}}
  {{#horizontal}}<div class="col-md-8">{{/horizontal}}
  {{/label}}
  {{^label}}
  <div class="col-md-12">
  {{/label}}
    {{#pre}}<div class="input-group col-md-12"><span class="input-group-addon">{{{pre}}}</span>{{/pre}}
    {{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}
      <div class="dropzone" id="{{id}}">
      </div>
    {{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}
    {{^post}}{{#pre}}</div>{{/pre}}{{/post}}

    {{>_addons}}
    {{>_actions}}
  </div>
</div>
`;gform.types.upload=_.extend({},gform.types.input,{focus:function(){},defaults:{format:{uri:'{{{name}}}',options:[]}},set:function(value){},get:function(){return this.value},edit:function(state){this.editable=state;this.el.querySelector('[id="'+this.id+'"].dropzone').disabled=!state},toString:function(name,report){if(!report){return gform.m('<dt>{{label}}</dt> <dd>{{#value.dataURI}}<img height=75px src="{{value.dataURI}}"/>{{/value.dataURI}} {{value.name}}{{^value.name}}<span class="text-muted">(empty)</span>{{/value.name}}</dd><hr>',this)}else{return this.value.dataURI}},satisfied:function(value){value=value||this.value;if(_.isArray(value)){return!!value.length}
return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='number'&&isNaN(value))&&!_.isEmpty(value))},initialize:function(){this.Dropzone=new Dropzone(this.el.querySelector("#"+this.id+'.dropzone'),{url:this.item.path,method:'post',paramName:this.name,success:function(message,response){this.trigger('uploaded',this,{response:response})}.bind(this)})}});
/*!
 * cleave.js - 1.6.0
 * https://github.com/nosir/cleave.js
 * Apache License Version 2.0
 *
 * Copyright (C) 2012-2020 Max Huang https://github.com/nosir/
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Cleave=t():e.Cleave=t()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){(function(t){"use strict";var i=function(e,t){var r=this,n=!1;if("string"==typeof e?(r.element=document.querySelector(e),n=document.querySelectorAll(e).length>1):"undefined"!=typeof e.length&&e.length>0?(r.element=e[0],n=e.length>1):r.element=e,!r.element)throw new Error("[cleave.js] Please check the element");if(n)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(a){}t.initValue=r.element.value,r.properties=i.DefaultProperties.assign({},t),r.init()};i.prototype={init:function(){var e=this,t=e.properties;return t.numeral||t.phone||t.creditCard||t.time||t.date||0!==t.blocksLength||t.prefix?(t.maxLength=i.Util.getMaxLength(t.blocks),e.isAndroid=i.Util.isAndroid(),e.lastInputValue="",e.isBackward="",e.onChangeListener=e.onChange.bind(e),e.onKeyDownListener=e.onKeyDown.bind(e),e.onFocusListener=e.onFocus.bind(e),e.onCutListener=e.onCut.bind(e),e.onCopyListener=e.onCopy.bind(e),e.initSwapHiddenInput(),e.element.addEventListener("input",e.onChangeListener),e.element.addEventListener("keydown",e.onKeyDownListener),e.element.addEventListener("focus",e.onFocusListener),e.element.addEventListener("cut",e.onCutListener),e.element.addEventListener("copy",e.onCopyListener),e.initPhoneFormatter(),e.initDateFormatter(),e.initTimeFormatter(),e.initNumeralFormatter(),void((t.initValue||t.prefix&&!t.noImmediatePrefix)&&e.onInput(t.initValue))):void e.onInput(t.initValue)},initSwapHiddenInput:function(){var e=this,t=e.properties;if(t.swapHiddenInput){var r=e.element.cloneNode(!0);e.element.parentNode.insertBefore(r,e.element),e.elementSwapHidden=e.element,e.elementSwapHidden.type="hidden",e.element=r,e.element.id=""}},initNumeralFormatter:function(){var e=this,t=e.properties;t.numeral&&(t.numeralFormatter=new i.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.tailPrefix,t.delimiter))},initTimeFormatter:function(){var e=this,t=e.properties;t.time&&(t.timeFormatter=new i.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=i.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var e=this,t=e.properties;t.date&&(t.dateFormatter=new i.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=i.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var e=this,t=e.properties;if(t.phone)try{t.phoneFormatter=new i.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(r){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(e){var t=this,r=e.which||e.keyCode;t.lastInputValue=t.element.value,t.isBackward=8===r},onChange:function(e){var t=this,r=t.properties,n=i.Util;t.isBackward=t.isBackward||"deleteContentBackward"===e.inputType;var a=n.getPostDelimiter(t.lastInputValue,r.delimiter,r.delimiters);t.isBackward&&a?r.postDelimiterBackspace=a:r.postDelimiterBackspace=!1,this.onInput(this.element.value)},onFocus:function(){var e=this,t=e.properties;e.lastInputValue=e.element.value,t.prefix&&t.noImmediatePrefix&&!e.element.value&&this.onInput(t.prefix),i.Util.fixPrefixCursor(e.element,t.prefix,t.delimiter,t.delimiters)},onCut:function(e){i.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(e),this.onInput(""))},onCopy:function(e){i.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(e)},copyClipboardData:function(e){var t=this,r=t.properties,n=i.Util,a=t.element.value,o="";o=r.copyDelimiter?a:n.stripDelimiters(a,r.delimiter,r.delimiters);try{e.clipboardData?e.clipboardData.setData("Text",o):window.clipboardData.setData("Text",o),e.preventDefault()}catch(l){}},onInput:function(e){var t=this,r=t.properties,n=i.Util,a=n.getPostDelimiter(e,r.delimiter,r.delimiters);return r.numeral||!r.postDelimiterBackspace||a||(e=n.headStr(e,e.length-r.postDelimiterBackspace.length)),r.phone?(!r.prefix||r.noImmediatePrefix&&!e.length?r.result=r.phoneFormatter.format(e):r.result=r.prefix+r.phoneFormatter.format(e).slice(r.prefix.length),void t.updateValueState()):r.numeral?(r.prefix&&r.noImmediatePrefix&&0===e.length?r.result="":r.result=r.numeralFormatter.format(e),void t.updateValueState()):(r.date&&(e=r.dateFormatter.getValidatedDate(e)),r.time&&(e=r.timeFormatter.getValidatedTime(e)),e=n.stripDelimiters(e,r.delimiter,r.delimiters),e=n.getPrefixStrippedValue(e,r.prefix,r.prefixLength,r.result,r.delimiter,r.delimiters,r.noImmediatePrefix,r.tailPrefix,r.signBeforePrefix),e=r.numericOnly?n.strip(e,/[^\d]/g):e,e=r.uppercase?e.toUpperCase():e,e=r.lowercase?e.toLowerCase():e,r.prefix&&(r.tailPrefix?e+=r.prefix:e=r.prefix+e,0===r.blocksLength)?(r.result=e,void t.updateValueState()):(r.creditCard&&t.updateCreditCardPropsByValue(e),e=n.headStr(e,r.maxLength),r.result=n.getFormattedValue(e,r.blocks,r.blocksLength,r.delimiter,r.delimiters,r.delimiterLazyShow),void t.updateValueState()))},updateCreditCardPropsByValue:function(e){var t,r=this,n=r.properties,a=i.Util;a.headStr(n.result,4)!==a.headStr(e,4)&&(t=i.CreditCardDetector.getInfo(e,n.creditCardStrictMode),n.blocks=t.blocks,n.blocksLength=n.blocks.length,n.maxLength=a.getMaxLength(n.blocks),n.creditCardType!==t.type&&(n.creditCardType=t.type,n.onCreditCardTypeChanged.call(r,n.creditCardType)))},updateValueState:function(){var e=this,t=i.Util,r=e.properties;if(e.element){var n=e.element.selectionEnd,a=e.element.value,o=r.result;if(n=t.getNextCursorPosition(n,a,o,r.delimiter,r.delimiters),e.isAndroid)return void window.setTimeout(function(){e.element.value=o,t.setSelection(e.element,n,r.document,!1),e.callOnValueChanged()},1);e.element.value=o,r.swapHiddenInput&&(e.elementSwapHidden.value=e.getRawValue()),t.setSelection(e.element,n,r.document,!1),e.callOnValueChanged()}},callOnValueChanged:function(){var e=this,t=e.properties;t.onValueChanged.call(e,{target:{name:e.element.name,value:t.result,rawValue:e.getRawValue()}})},setPhoneRegionCode:function(e){var t=this,r=t.properties;r.phoneRegionCode=e,t.initPhoneFormatter(),t.onChange()},setRawValue:function(e){var t=this,r=t.properties;e=void 0!==e&&null!==e?e.toString():"",r.numeral&&(e=e.replace(".",r.numeralDecimalMark)),r.postDelimiterBackspace=!1,t.element.value=e,t.onInput(e)},getRawValue:function(){var e=this,t=e.properties,r=i.Util,n=e.element.value;return t.rawValueTrimPrefix&&(n=r.getPrefixStrippedValue(n,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),n=t.numeral?t.numeralFormatter.getRawValue(n):r.stripDelimiters(n,t.delimiter,t.delimiters)},getISOFormatDate:function(){var e=this,t=e.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var e=this,t=e.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var e=this;e.element.removeEventListener("input",e.onChangeListener),e.element.removeEventListener("keydown",e.onKeyDownListener),e.element.removeEventListener("focus",e.onFocusListener),e.element.removeEventListener("cut",e.onCutListener),e.element.removeEventListener("copy",e.onCopyListener)},toString:function(){return"[Cleave Object]"}},i.NumeralFormatter=r(1),i.DateFormatter=r(2),i.TimeFormatter=r(3),i.PhoneFormatter=r(4),i.CreditCardDetector=r(5),i.Util=r(6),i.DefaultProperties=r(7),("object"==typeof t&&t?t:window).Cleave=i,e.exports=i}).call(t,function(){return this}())},function(e,t){"use strict";var r=function(e,t,i,n,a,o,l,s,c,u){var d=this;d.numeralDecimalMark=e||".",d.numeralIntegerScale=t>0?t:0,d.numeralDecimalScale=i>=0?i:2,d.numeralThousandsGroupStyle=n||r.groupStyle.thousand,d.numeralPositiveOnly=!!a,d.stripLeadingZeroes=o!==!1,d.prefix=l||""===l?l:"",d.signBeforePrefix=!!s,d.tailPrefix=!!c,d.delimiter=u||""===u?u:",",d.delimiterRE=u?new RegExp("\\"+u,"g"):""};r.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},r.prototype={getRawValue:function(e){return e.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(e){var t,i,n,a,o=this,l="";switch(e=e.replace(/[A-Za-z]/g,"").replace(o.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",o.numeralPositiveOnly?"":"-").replace("M",o.numeralDecimalMark),o.stripLeadingZeroes&&(e=e.replace(/^(-)?0+(?=\d)/,"$1")),i="-"===e.slice(0,1)?"-":"",n="undefined"!=typeof o.prefix?o.signBeforePrefix?i+o.prefix:o.prefix+i:i,a=e,e.indexOf(o.numeralDecimalMark)>=0&&(t=e.split(o.numeralDecimalMark),a=t[0],l=o.numeralDecimalMark+t[1].slice(0,o.numeralDecimalScale)),"-"===i&&(a=a.slice(1)),o.numeralIntegerScale>0&&(a=a.slice(0,o.numeralIntegerScale)),o.numeralThousandsGroupStyle){case r.groupStyle.lakh:a=a.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+o.delimiter);break;case r.groupStyle.wan:a=a.replace(/(\d)(?=(\d{4})+$)/g,"$1"+o.delimiter);break;case r.groupStyle.thousand:a=a.replace(/(\d)(?=(\d{3})+$)/g,"$1"+o.delimiter)}return o.tailPrefix?i+a.toString()+(o.numeralDecimalScale>0?l.toString():"")+o.prefix:n+a.toString()+(o.numeralDecimalScale>0?l.toString():"")}},e.exports=r},function(e,t){"use strict";var r=function(e,t,r){var i=this;i.date=[],i.blocks=[],i.datePattern=e,i.dateMin=t.split("-").reverse().map(function(e){return parseInt(e,10)}),2===i.dateMin.length&&i.dateMin.unshift(0),i.dateMax=r.split("-").reverse().map(function(e){return parseInt(e,10)}),2===i.dateMax.length&&i.dateMax.unshift(0),i.initBlocks()};r.prototype={initBlocks:function(){var e=this;e.datePattern.forEach(function(t){"Y"===t?e.blocks.push(4):e.blocks.push(2)})},getISOFormatDate:function(){var e=this,t=e.date;return t[2]?t[2]+"-"+e.addLeadingZero(t[1])+"-"+e.addLeadingZero(t[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(e){var t=this,r="";return e=e.replace(/[^\d]/g,""),t.blocks.forEach(function(i,n){if(e.length>0){var a=e.slice(0,i),o=a.slice(0,1),l=e.slice(i);switch(t.datePattern[n]){case"d":"00"===a?a="01":parseInt(o,10)>3?a="0"+o:parseInt(a,10)>31&&(a="31");break;case"m":"00"===a?a="01":parseInt(o,10)>1?a="0"+o:parseInt(a,10)>12&&(a="12")}r+=a,e=l}}),this.getFixedDateString(r)},getFixedDateString:function(e){var t,r,i,n=this,a=n.datePattern,o=[],l=0,s=0,c=0,u=0,d=0,m=0,p=!1;4===e.length&&"y"!==a[0].toLowerCase()&&"y"!==a[1].toLowerCase()&&(u="d"===a[0]?0:2,d=2-u,t=parseInt(e.slice(u,u+2),10),r=parseInt(e.slice(d,d+2),10),o=this.getFixedDate(t,r,0)),8===e.length&&(a.forEach(function(e,t){switch(e){case"d":l=t;break;case"m":s=t;break;default:c=t}}),m=2*c,u=l<=c?2*l:2*l+2,d=s<=c?2*s:2*s+2,t=parseInt(e.slice(u,u+2),10),r=parseInt(e.slice(d,d+2),10),i=parseInt(e.slice(m,m+4),10),p=4===e.slice(m,m+4).length,o=this.getFixedDate(t,r,i)),4!==e.length||"y"!==a[0]&&"y"!==a[1]||(d="m"===a[0]?0:2,m=2-d,r=parseInt(e.slice(d,d+2),10),i=parseInt(e.slice(m,m+2),10),p=2===e.slice(m,m+2).length,o=[0,r,i]),6!==e.length||"Y"!==a[0]&&"Y"!==a[1]||(d="m"===a[0]?0:4,m=2-.5*d,r=parseInt(e.slice(d,d+2),10),i=parseInt(e.slice(m,m+4),10),p=4===e.slice(m,m+4).length,o=[0,r,i]),o=n.getRangeFixedDate(o),n.date=o;var h=0===o.length?e:a.reduce(function(e,t){switch(t){case"d":return e+(0===o[0]?"":n.addLeadingZero(o[0]));case"m":return e+(0===o[1]?"":n.addLeadingZero(o[1]));case"y":return e+(p?n.addLeadingZeroForYear(o[2],!1):"");case"Y":return e+(p?n.addLeadingZeroForYear(o[2],!0):"")}},"");return h},getRangeFixedDate:function(e){var t=this,r=t.datePattern,i=t.dateMin||[],n=t.dateMax||[];return!e.length||i.length<3&&n.length<3?e:r.find(function(e){return"y"===e.toLowerCase()})&&0===e[2]?e:n.length&&(n[2]<e[2]||n[2]===e[2]&&(n[1]<e[1]||n[1]===e[1]&&n[0]<e[0]))?n:i.length&&(i[2]>e[2]||i[2]===e[2]&&(i[1]>e[1]||i[1]===e[1]&&i[0]>e[0]))?i:e},getFixedDate:function(e,t,r){return e=Math.min(e,31),t=Math.min(t,12),r=parseInt(r||0,10),(t<7&&t%2===0||t>8&&t%2===1)&&(e=Math.min(e,2===t?this.isLeapYear(r)?29:28:30)),[e,t,r]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},addLeadingZero:function(e){return(e<10?"0":"")+e},addLeadingZeroForYear:function(e,t){return t?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e}},e.exports=r},function(e,t){"use strict";var r=function(e,t){var r=this;r.time=[],r.blocks=[],r.timePattern=e,r.timeFormat=t,r.initBlocks()};r.prototype={initBlocks:function(){var e=this;e.timePattern.forEach(function(){e.blocks.push(2)})},getISOFormatTime:function(){var e=this,t=e.time;return t[2]?e.addLeadingZero(t[0])+":"+e.addLeadingZero(t[1])+":"+e.addLeadingZero(t[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){var e=this;return"12"===String(e.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(e){var t=this,r="";e=e.replace(/[^\d]/g,"");var i=t.getTimeFormatOptions();return t.blocks.forEach(function(n,a){if(e.length>0){var o=e.slice(0,n),l=o.slice(0,1),s=e.slice(n);switch(t.timePattern[a]){case"h":parseInt(l,10)>i.maxHourFirstDigit?o="0"+l:parseInt(o,10)>i.maxHours&&(o=i.maxHours+"");break;case"m":case"s":parseInt(l,10)>i.maxMinutesFirstDigit?o="0"+l:parseInt(o,10)>i.maxMinutes&&(o=i.maxMinutes+"")}r+=o,e=s}}),this.getFixedTimeString(r)},getFixedTimeString:function(e){var t,r,i,n=this,a=n.timePattern,o=[],l=0,s=0,c=0,u=0,d=0,m=0;return 6===e.length&&(a.forEach(function(e,t){switch(e){case"s":l=2*t;break;case"m":s=2*t;break;case"h":c=2*t}}),m=c,d=s,u=l,t=parseInt(e.slice(u,u+2),10),r=parseInt(e.slice(d,d+2),10),i=parseInt(e.slice(m,m+2),10),o=this.getFixedTime(i,r,t)),4===e.length&&n.timePattern.indexOf("s")<0&&(a.forEach(function(e,t){switch(e){case"m":s=2*t;break;case"h":c=2*t}}),m=c,d=s,t=0,r=parseInt(e.slice(d,d+2),10),i=parseInt(e.slice(m,m+2),10),o=this.getFixedTime(i,r,t)),n.time=o,0===o.length?e:a.reduce(function(e,t){switch(t){case"s":return e+n.addLeadingZero(o[2]);case"m":return e+n.addLeadingZero(o[1]);case"h":return e+n.addLeadingZero(o[0])}},"")},getFixedTime:function(e,t,r){return r=Math.min(parseInt(r||0,10),60),t=Math.min(t,60),e=Math.min(e,60),[e,t,r]},addLeadingZero:function(e){return(e<10?"0":"")+e}},e.exports=r},function(e,t){"use strict";var r=function(e,t){var r=this;r.delimiter=t||""===t?t:" ",r.delimiterRE=t?new RegExp("\\"+t,"g"):"",r.formatter=e};r.prototype={setFormatter:function(e){this.formatter=e},format:function(e){var t=this;t.formatter.clear(),e=e.replace(/[^\d+]/g,""),e=e.replace(/^\+/,"B").replace(/\+/g,"").replace("B","+"),e=e.replace(t.delimiterRE,"");for(var r,i="",n=!1,a=0,o=e.length;a<o;a++)r=t.formatter.inputDigit(e.charAt(a)),/[\s()-]/g.test(r)?(i=r,n=!0):n||(i=r);return i=i.replace(/[()]/g,""),i=i.replace(/[\s-]/g,t.delimiter)}},e.exports=r},function(e,t){"use strict";var r={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(e){var t=e.reduce(function(e,t){return e+t},0);return e.concat(19-t)},getInfo:function(e,t){var i=r.blocks,n=r.re;t=!!t;for(var a in n)if(n[a].test(e)){var o=i[a];return{type:a,blocks:t?this.getStrictBlocks(o):o}}return{type:"unknown",blocks:t?this.getStrictBlocks(i.general):i.general}}};e.exports=r},function(e,t){"use strict";var r={noop:function(){},strip:function(e,t){return e.replace(t,"")},getPostDelimiter:function(e,t,r){if(0===r.length)return e.slice(-t.length)===t?t:"";var i="";return r.forEach(function(t){e.slice(-t.length)===t&&(i=t)}),i},getDelimiterREByDelimiter:function(e){return new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(e,t,r,i,n){return t.length===e?r.length:e+this.getPositionOffset(e,t,r,i,n)},getPositionOffset:function(e,t,r,i,n){var a,o,l;return a=this.stripDelimiters(t.slice(0,e),i,n),o=this.stripDelimiters(r.slice(0,e),i,n),l=a.length-o.length,0!==l?l/Math.abs(l):0},stripDelimiters:function(e,t,r){var i=this;if(0===r.length){var n=t?i.getDelimiterREByDelimiter(t):"";return e.replace(n,"")}return r.forEach(function(t){t.split("").forEach(function(t){e=e.replace(i.getDelimiterREByDelimiter(t),"")})}),e},headStr:function(e,t){return e.slice(0,t)},getMaxLength:function(e){return e.reduce(function(e,t){return e+t},0)},getPrefixStrippedValue:function(e,t,r,i,n,a,o,l,s){if(0===r)return e;if(e===t&&""!==e)return"";if(s&&"-"==e.slice(0,1)){var c="-"==i.slice(0,1)?i.slice(1):i;return"-"+this.getPrefixStrippedValue(e.slice(1),t,r,c,n,a,o,l,s)}if(i.slice(0,r)!==t&&!l)return o&&!i&&e?e:"";if(i.slice(-r)!==t&&l)return o&&!i&&e?e:"";var u=this.stripDelimiters(i,n,a);return e.slice(0,r)===t||l?e.slice(-r)!==t&&l?u.slice(0,-r-1):l?e.slice(0,-r):e.slice(r):u.slice(r)},getFirstDiffIndex:function(e,t){for(var r=0;e.charAt(r)===t.charAt(r);)if(""===e.charAt(r++))return-1;return r},getFormattedValue:function(e,t,r,i,n,a){var o="",l=n.length>0,s="";return 0===r?e:(t.forEach(function(t,c){if(e.length>0){var u=e.slice(0,t),d=e.slice(t);s=l?n[a?c-1:c]||s:i,a?(c>0&&(o+=s),o+=u):(o+=u,u.length===t&&c<r-1&&(o+=s)),e=d}}),o)},fixPrefixCursor:function(e,t,r,i){if(e){var n=e.value,a=r||i[0]||" ";if(e.setSelectionRange&&t&&!(t.length+a.length<=n.length)){var o=2*n.length;setTimeout(function(){e.setSelectionRange(o,o)},1)}}},checkFullSelection:function(e){try{var t=window.getSelection()||document.getSelection()||{};return t.toString().length===e.length}catch(r){}return!1},setSelection:function(e,t,r){if(e===this.getActiveElement(r)&&!(e&&e.value.length<=t))if(e.createTextRange){var i=e.createTextRange();i.move("character",t),i.select()}else try{e.setSelectionRange(t,t)}catch(n){console.warn("The input element type does not support selection")}},getActiveElement:function(e){var t=e.activeElement;return t&&t.shadowRoot?this.getActiveElement(t.shadowRoot):t},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(e,t){return!!(this.isAndroid()&&e&&t)&&t===e.slice(0,-1)}};e.exports=r},function(e,t){(function(t){"use strict";var r={assign:function(e,r){return e=e||{},r=r||{},e.creditCard=!!r.creditCard,e.creditCardStrictMode=!!r.creditCardStrictMode,e.creditCardType="",e.onCreditCardTypeChanged=r.onCreditCardTypeChanged||function(){},e.phone=!!r.phone,e.phoneRegionCode=r.phoneRegionCode||"AU",e.phoneFormatter={},e.time=!!r.time,e.timePattern=r.timePattern||["h","m","s"],e.timeFormat=r.timeFormat||"24",e.timeFormatter={},e.date=!!r.date,e.datePattern=r.datePattern||["d","m","Y"],e.dateMin=r.dateMin||"",e.dateMax=r.dateMax||"",e.dateFormatter={},e.numeral=!!r.numeral,e.numeralIntegerScale=r.numeralIntegerScale>0?r.numeralIntegerScale:0,e.numeralDecimalScale=r.numeralDecimalScale>=0?r.numeralDecimalScale:2,e.numeralDecimalMark=r.numeralDecimalMark||".",e.numeralThousandsGroupStyle=r.numeralThousandsGroupStyle||"thousand",e.numeralPositiveOnly=!!r.numeralPositiveOnly,e.stripLeadingZeroes=r.stripLeadingZeroes!==!1,e.signBeforePrefix=!!r.signBeforePrefix,e.tailPrefix=!!r.tailPrefix,e.swapHiddenInput=!!r.swapHiddenInput,e.numericOnly=e.creditCard||e.date||!!r.numericOnly,e.uppercase=!!r.uppercase,e.lowercase=!!r.lowercase,e.prefix=e.creditCard||e.date?"":r.prefix||"",e.noImmediatePrefix=!!r.noImmediatePrefix,e.prefixLength=e.prefix.length,e.rawValueTrimPrefix=!!r.rawValueTrimPrefix,e.copyDelimiter=!!r.copyDelimiter,e.initValue=void 0!==r.initValue&&null!==r.initValue?r.initValue.toString():"",e.delimiter=r.delimiter||""===r.delimiter?r.delimiter:r.date?"/":r.time?":":r.numeral?",":(r.phone," "),e.delimiterLength=e.delimiter.length,e.delimiterLazyShow=!!r.delimiterLazyShow,e.delimiters=r.delimiters||[],e.blocks=r.blocks||[],e.blocksLength=e.blocks.length,e.root="object"==typeof t&&t?t:window,e.document=r.document||e.root.document,e.maxLength=0,e.backspace=!1,e.result="",e.onValueChanged=r.onValueChanged||function(){},e}};e.exports=r}).call(t,function(){return this}())}])});gform.types.currency=_.extend({},gform.types.input,{defaults:{placeholder:"$0.00",value:"",validate:[{type:'numeric'}]},toString:function(name,report){if(!report){return'<dt>'+this.label+'</dt> <dd>'+((this.item.pre||"")+((typeof this.cleave!=='undefined'&&this.cleave instanceof Cleave)?this.cleave.getFormattedValue():this.value)+(this.item.post||"")||'<span class="text-muted">(empty)</span>')+'</dd><hr>'}else{return this.value}},display:function(){var val=this.value;if(typeof this.cleave!=='undefined'&&this.cleave instanceof Cleave){val=this.cleave.getFormattedValue()}
return(typeof this.value!=='undefined'&&this.value!=='')?(this.item.pre||"")+((typeof this.cleave!=='undefined'&&this.cleave instanceof Cleave)?this.cleave.getFormattedValue():this.value)+(this.item.post||""):'(empty)'},initialize:function(){this.onchangeEvent=function(input){this.internalValue=this.get();if(this.el.querySelector('.count')!=null){var text=(this.value+"").length;if(this.limit>1){text+='/'+this.limit}
this.el.querySelector('.count').innerHTML=text}
gform.types[this.type].setup.call(this);this.parent.trigger(['change'],this,{input:this.value});if(input){this.parent.trigger(['input'],this,{input:this.value})}}.bind(this)
this.input=this.input||!1;this.el.addEventListener('input',this.onchangeEvent.bind(null,!0));this.el.addEventListener('change',this.onchangeEvent.bind(null,!1));this.item.cleave={...(!this.item.pre)?{prefix:'$',noImmediatePrefix:!0,rawValueTrimPrefix:!0}:{},numeral:!0,numeralThousandsGroupStyle:'thousand',...(!(this.item.post||"").indexOf('.'))?{numeralDecimalScale:0}:{},}
this.placeholder=this.placeholder.substring(this.placeholder.indexOf(this.pre)+1,this.placeholder.indexOf(this.post));this.cleave=new Cleave(this.el.querySelector('input'),{...this.item.cleave});gform.types[this.type].setup.call(this)},setup:function(){this.labelEl=this.el.querySelector('label');gform.types[this.type].setLabel.call(this)
this.infoEl=this.el.querySelector('.gform-info');this.el.querySelector('input').placeholder=this.placeholder},set:function(value){this.cleave.setRawValue(value)},get:function(){if(!('el' in this)){return this.internalValue};return parseFloat(this.cleave.getRawValue())||0},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+this.value+'"')},satisfied:function(value){if(this.cleave.getRawValue().length==0&&this.value==0)return!1;value=value||this.value;return(typeof value!=='undefined'&&value!==null&&value!==''&&!(typeof value=='number'&&isNaN(value)))}});const fieldLibrary=(function(){let group_id=(typeof resource_id!=='undefined')?resource_id:(typeof instanceData!=='undefined')?instanceData.group_id:null;let collection={layout:{label:'Layout',name:'layout',options:'layouts',value:0,format:{display:"{{{original.label}}} {{title}} ",label:"{{title}}",value:layout=>parseInt(layout.value)},type:'smallcombo'},group:{label:'Group',name:'group_id',strict:!0,type:'smallcombo',required:!0,value:parseInt(group_id),edit:[{type:'not_matches',name:"_method",value:"edit"},{type:'test',test:()=>(resource_id=='')}],options:'groups',format:{title:'{{{label}}}{{^label}}Group{{/label}} <span class="text-success pull-right">{{value}}</span>',label:"{{name}}",value:(group=>group.id)}},icon:{label:'Icon',name:'icon',type:'smallcombo',template:'<i class="fa fa-{{attributes.icon}}"></i>',format:{title:'Icon <span class="pull-right"><i class="fa fa-{{value}}"></i></span>',label:i=>i.name.replace(/(\r\n|\s)/gm,""),value:function(item){return(item.value||"").split('-')[1]},template:'<i class="fa fa-{{value}}"></i>',display:'<span style="text-transform:capitalize;"><i class="{{value}}"></i> {{{label}}}'},options:'icons',required:!1},name:[{label:'Name',name:'name',required:!0},{label:'Slug',name:'slug',required:!0},],composites:[{label:'Limit Composite Groups',name:'limit',value:function(e){if(typeof e.form!=='undefined'&&!e.form.isActive){return(typeof e.form.options.data.groups!=='undefined'&&_.compact(e.form.options.data.groups).length>0)}else{return e.initial.value}},type:'checkbox',options:[{label:'No',value:!1},{label:'Yes',value:!0}],strict:!0,template:"{{#attributes.groups.length}}Yes{{/attributes.groups.length}}{{^attributes.groups.length}}No{{/attributes.groups.length}}",show:[{type:'matches',name:'public',value:!1},{type:'test',test:()=>$g.collections.get('composites').length>0}]},{label:'Composites',get:function(){return(this.visible)?gform.types[this.type].get.call(this):null},legend:'Composites',parse:!0,array:{min:1,max:100,duplicate:{copy:!0}},name:'groups',type:'smallcombo',options:'composites',format:{label:"{{name}}",value:function(i){return i.id}},'show':[{type:"matches",name:'limit',value:!0}],validate:[{type:'unique',message:"Duplicate group"}]}],_display:[{label:'List in page menu',name:'unlisted',value:0,type:'checkbox',options:[{label:'No',value:!0},{label:'Yes',value:!1}]},{label:'Limit Device',name:'device',type:"select",value:0,options:[{label:'All',value:"0"},{label:'Desktop Only',value:"1"},{label:'Tablet and Desktop',value:"2"},{label:'Tablet and Phone',value:"3"},{label:'Phone Only',value:"4"}]},{label:'Public',name:'public',type:'checkbox',options:[{label:'No',value:!1},{label:'Yes',value:!0}],edit:[{type:'matches',name:'limit',value:!1}]},]}
Object.defineProperty(collection,'content',{get:()=>{const{name,icon,_display,composites}=collection;return[...name,icon,..._display,...composites,{name:'order',type:'hidden'}]},configurable:!1,});return collection}())
_.each(["success","danger","info","warning","default","primary","link"],actionType=>{gform.types[actionType]=_.defaultsDeep({toString:()=>''},gform.types.button,{defaults:{"action":"save","modifiers":"btn btn-"+actionType}})});function App(){var router=(verb,name,data,callback)=>{var callback=callback||function(data){if(data.error){if(data.error.message){modal({title:"ERROR",content:data.error.message,modal:{header_class:"bg-danger"}})}else{modal({title:"ERROR",content:data.error,modal:{header_class:"bg-danger"}})}}else{console.log(data)}};(this.options[verb]||_.partial(this.options.crud,_,_,_,verb)||function(){}).call(this,name,data,callback.bind(this))}
function redraw(){this.destroy();this.draw()}
function refresh(skipFetch){this.destroy();this.config=$.extend(!0,{},this.options.config);this.$el.html(this.options.defaultHtml);if(!skipFetch){$.ajax({type:'POST',url:'/api/fetch/'+this.config.app_instance_id,data:(Lockr.get('/api/apps/instances/'+this.config.app_instance_id+'/user_options')||{options:{}}),success:function(data){if(typeof data.user.id=='undefined'){var url='/api/apps/instances/'+this.config.app_instance_id+'/user_options';data.user.options=(Lockr.get(url)||{options:{}}).options}
_.extend(this.data,data||{});this.app.update();this.load()}.bind(this),error:function(data){toastr.error(data.statusText,'An error occured updating App')}})}else{this.load()}}
function update(newData,silent){_.merge(this.data,newData||{});_.each(newData,function(i,name){this.collections.update(name,i);switch(name){case "user":if(typeof this.inline!=='undefined'){this.inline.set(i.options)}
case "options":break;default:this.eventBus.dispatch(name,i)}}.bind(this))
if(typeof this.inline=='object'&&this.inline instanceof gform){this.inline.set(this.data.user.options)}
this.ractive.set(this.data);this.app.trigger('updated')}
function click(selector,callback){this.$el.off('click',selector,callback);this.$el.on('click',selector,callback.bind(this))}
this.forms={};this.grids={};this.eventBus=new gform.eventBus({owner:'instance',item:'resource',handlers:{}},this);this.collections=new gform.collectionManager(this.data)
var returnable={post:_.partial(router,'POST'),get:_.partial(router,'GET'),put:_.partial(router,'PUT'),patch:_.partial(router,'PATCH'),delete:_.partial(router,'DELETE'),redraw:redraw.bind(this),refresh:refresh.bind(this),refetch:function(){this.app.trigger('refetch')}.bind(this),update:update.bind(this),click:click.bind(this),on:this.eventBus.on,trigger:this.eventBus.dispatch,options:function(newOptions){this.app.update({user:$.extend(!0,{},this.data.user,{options:newOptions})});var url='/api/apps/instances/'+this.config.app_instance_id+'/user_options';if(typeof this.data.user.id!=='undefined'){$.ajax({type:'POST',dataType:'json',contentType:'application/json',url:url,data:JSON.stringify({'options':newOptions}),success:function(data){this.app.update({user:$.extend(!0,{},this.data.user,{options:data.options})});this.app.trigger('options')}.bind(this),error:function(data){toastr.error(data.statusText,'An error occured updating options')}})}else{Lockr.set(url,{'options':this.data.user.options})
this.app.trigger('options')}}.bind(this),$el:this.$el,data:this.data,find:function(selectors){return this.$el[0].querySelectorAll(selectors)}.bind(this),render:function(template,data){var local_ractive=Ractive({template:this.partials[template],partials:this.partials,data:data});return local_ractive.toHTML()}.bind(this),version:function(){return'1.2.0'},findForm:function(name){var form=_.find(this.options.config.forms,{name:name})
if(typeof form!=='undefined'){try{form=JSON.parse(form.content);form.collections=this.collections;form.methods=this.method;return form}catch(e){this.app.debug('Failed to parse form:'+name)}}}.bind(this),form:function(name,target,options){if(typeof this.forms[name]=='undefined'){if(typeof target=='string'){target=this.app.find(target)[0]}
if(typeof name=='string'){var formOptions=_.cloneDeep(this.app.findForm(name));if(typeof formOptions!=='undefined'){formOptions.private=!0;formOptions.collections=this.collections;formOptions.selector=target;formOptions.methods=this.methods;formOptions.data=this.app.data[name]||this.app;if(typeof target=='string'){target=this.app.find(target)[0]}
this.forms[name]=new gform(_.merge(formOptions,options),target)
return this.forms[name]}}else{var formOptions=name;formOptions.private=!0;formOptions.collections=this.collections;formOptions.selector=target;formOptions.methods=this.methods;formOptions.data=this.app.data[name]||this.app;var newForm=new gform(_.merge(formOptions,options),target)
this.forms[newForm.name]=newForm;return this.forms[newForm.name]}}else{if(typeof options=='object'){if('data' in options){this.forms[name].set(options.data)}}
if(typeof target!=='undefined'){if(typeof target=='string'){target=this.app.find(target)[0]}
this.forms[name].attach(target)}}
return this.forms[name]}.bind(this),grid:function(name,options){if(typeof this.grids[name]=='undefined'){options=options||{};if(typeof options.create=='string'){options.create=_.cloneDeep(this.app.findForm(options.create))}
if(typeof options.edit=='string'){options.edit=_.cloneDeep(this.app.findForm(options.edit))}
if(typeof options.form=='undefined'){this.app.debug('Form required for grid:'+name)}
if(typeof options.form=='string'){options.form=_.cloneDeep(this.app.findForm(options.form))}
this.grids[name]=new GrapheneDataGrid(_.extend({methods:this.methods,collections:this.collections,data:this.data[options.resource||name]},options))
if(typeof options.resource!=='undefined'){this.collections.on(options.resource,function(e){this.load(e.collection)}.bind(this.grids[name]))
if(options.rest){this.grids[name].on('model:created',function(e){this.app.post(e.grid.resource,e.model.attributes)}.bind(this))
this.grids[name].on('model:edited',function(e){this.app.put(e.grid.resource,e.model.attributes)}.bind(this))
this.grids[name].on('model:deleted',function(e){this.app.delete(e.grid.resource,e.model.attributes)}.bind(this))}}}
return this.grids[name]}.bind(this),debug:function(text,type){if(this.data.user.site_developer){if(typeof text=='string'){console.log('%c'+this.config.title+': %c'+text,'color: #d85e16','color: #333')}
if(typeof text=='object'){console[type||'log']('%c'+this.config.title+'','color: #d85e16')
console[type||'log'](text)}}}.bind(this),modal:function(options,data){if(typeof options=='string'){options={content:options}}
var hClass=''
switch(options.status){case 'error':hClass='bg-danger';break;case 'success':hClass='bg-success';break;case 'primary':hClass='bg-primary';break;case 'info':hClass='bg-info';break;case 'warning':hClass='bg-warning';break}
return new gform({legend:options.title,modal:{header_class:hClass},fields:[{type:'output',name:'modal',label:!1,format:{},value:gform.m(options.content,_.extend({},this.partials,data))}],actions:(options.actions||[{type:'cancel',label:'<i class="fa fa-times"></i> Close',"modifiers":"btn btn-default pull-right"}])}).modal().on('cancel',function(e){e.form.dispatch('close');e.form.destroy()})}.bind(this),alert:function(options,data){if(typeof options=='string'){options={content:options}}
toastr[options.status||'info'](gform.m(options.content||'',_.extend({},this.partials,data)),options.title)}.bind(this)}
_.each(this.methods,function(method,key){if(typeof returnable[key]=='undefined'){returnable[key]=method.bind(this)}})
return returnable}
$g.engines.graphene={'v1':function(options){var temp=function(options){this.load=function(){this.partials={};for(var i in this.config.templates){this.partials[this.config.templates[i].name]=this.config.templates[i].content}
if(typeof this.config.scripts=='object'){this.config.script=_.reduce(this.config.scripts,function(sum,n){return sum+';\n\n\n/*-- New File - '+n.name+' --*/\n\n'+n.content},'//'+this.config.title+' ('+this.config.app_instance_id+')\nfunction mount(){var context = this;app.data = app.data||data;\n/*- Custom Code starts Here -*/');this.config.script+='\n\n/*- Custom Code Ends Here -*/;return function(){return this;}.bind(this);}'}
var mountFunc=(function(data,script){eval(script);return mount.call({data:data,app:app})})(this.options.data||{},this.config.script)
if(typeof mountFunc!=='undefined'){mountResult=mountFunc();if(typeof mountResult!=='undefined'){this.data=mountResult.data;this.methods={};for(var i in mountResult){if(typeof mountResult[i]=='function'){this.methods[i]=mountResult[i].bind(this)}}
for(var i in mountResult.app){if(typeof mountResult.app[i]=='function'){this.methods[i]=mountResult.app[i].bind(this)}}}else{this.data=this.options.data}}else{this.data=this.options.data}
this.data.options=$.extend({},this.data.options);this.$el=this.options.$el;if(typeof this.app=='undefined'){this.app=App.call(this)
app=this.app}
this.draw()
if(typeof this.options.onLoad=='function'){this.options.onLoad.call(this)}}
this.draw=function(){this.options.defaultHtml=this.$el.html();if(typeof this.component=='undefined'){this.component=Ractive.extend({data:this.methods,css:this.options.config.css,template:this.partials[this.options.template||'Main']||this.partials.Main||this.partials.main,partials:this.partials})}
this.ractive=this.component({data:this.data,el:this.$el[0],on:this.methods});this.$el.find('[data-toggle="tooltip"]').tooltip();this.$el.find('[data-toggle="popover"]').popover();if(this.$el.find('[data-inline]').length&&this.options.config.forms[1].content.length){this.inline=new gform({actions:JSON.parse(this.options.config.forms[1].content).actions||[],default:{hideLabel:!0,type:'text',format:{label:'{{label}}',value:'{{value}}'},target:function(){return'[data-inline="'+this.name+'"]'}},clear:!1,data:this.options.data.user.options,fields:JSON.parse(this.options.config.forms[1].content).fields,legend:'Edit '+this.type},this.$el[0]).on('save',function(e){this.app.options(e.form.get())}.bind(this));this.$el.find('form').on('submit',function(e){e.preventDefault();this.inline.trigger('save')}.bind(this));this.$el.find('[data-inline="submit"]').on('click',function(){this.inline.trigger('save')}.bind(this));this.$el.find('[data-form]').each(function(index,form){this.app.form(form.dataset.form,form)}.bind(this))}
if(typeof this.methods!=='undefined'&&typeof this.methods[this.options.initializer]!=='undefined'){this.methods[this.options.initializer].call(this,this);this.app.on('call',function(name,args){if(typeof this.methods[name]!=='undefined'){this.methods[name].call(this,args.args)}})
this.app.on('apply',function(name,args){if(typeof this.methods[name]!=='undefined'){this.methods[name].apply(this,args.args)}})}}
this.call=function(method,args){this.app.trigger('call',method,args)}
this.destroy=function(){this.$el.off('click');this.eventBus.handlers={};if(typeof this.inline=='object'&&this.inline instanceof gform){this.inline.destroy()}
_.each(this.forms,function(form,name){form.destroy();delete this.forms[name]}.bind(this))
_.each(this.grids,function(grid,name){grid.destroy();delete this.grids[name]}.bind(this))
this.app.trigger('destroy')
this.ractive.teardown()}
this.options=$.extend(!0,{},options);this.options.initializer=this.options.initializer||'callback'
this.config=this.options.config;this.get=function(){return this.data}
setTimeout(this.load.bind(this),0)}
var newtemp=new temp(options);var app={};return newtemp}};gAE_v0001=options=>{partials=_.reduce(options.config.templates,(partials,_partial)=>{partials[_partial.name]=_partial.content;return partials},{})
if(typeof component=='undefined'){component=Ractive.extend({data:options.methods,css:options.config.css,template:partials[options.template||'Main']||partials.Main||partials.main,partials:partials})}
ractive=component({data:options.data,el:options.$el[0],on:options.methods});return()=>{return{...this}}};var reset=function(){if(typeof gform.instances.modal!=='undefined'){gform.instances.modal.destroy()}
mymodal.ref.find('.modal-body').html('<center style="height:300px"><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:20px auto;color:#d8d8d8"></i></center>')}
var selectGroup=function(e){$g.getData(['/api/groups?limit=true'],(groups)=>{new $g.form({data:instanceData,name:"modal",fields:[{label:'Group',name:'group_id',required:!0,type:'select',value:instanceData.group_id,options:[{"name":"Choose One","value":null},{type:'optgroup',options:'groups'}],format:{label:"{{name}}",value:group=>group.id}},],actions:[]},mymodal.el.querySelector('.modal-body'))})}
var selectComposite=function(){$g.getData(['/api/groups/'+instanceData.group_id+'/composites'],(composites)=>{if(composites.length){new $g.form({data:instanceData,name:"modal",fields:[...fieldLibrary._display,...fieldLibrary.composites],actions:[]},mymodal.el.querySelector('.modal-body'))}else{mymodal.ref.find('.modal-body').html('There are no Composites for this group. This step is complete.')}})}
instanceData={};if(typeof group_id!=='undefined'){instanceData.group_id=group_id}
if(typeof group!=='undefined'){instanceData.group_id=group.id}
if(typeof loaded!=='undefined'&&typeof loaded.app!=='undefined'){instanceData.app_id=loaded.app.id}
if(typeof loaded!=='undefined'&&typeof loaded.workflow!=='undefined'){instanceData.workflow_id=loaded.workflow.id}
var createEngine=function(e){if(typeof gform.instances.modal!=='undefined'){gform.instances.modal.destroy()}
var options={init:'start',complete:"Successfully Created",legend:'<span class="btn btn-default btn-sm" data-action="cancel"><i class="fa fa-th"></i></span> Create New',transitions:[{name:'createpage',from:'*',to:'pagegroup'},{name:'next',from:'page',to:'pagecomposite'},{name:'next',from:'pagegroup',to:'page'},{name:'submit',from:'pagecomposite',to:'submit'},{name:'previous',from:'page',to:'pagegroup'},{name:'previous',from:'pagecomposite',to:'page'},{name:'complete',from:'success',to:'complete'},{name:'createendpoint',from:'*',to:'endpointgroup'},{name:'next',from:'endpointgroup',to:'endpoint'},{name:'submit',from:'endpoint',to:'submit'},{name:'previous',from:'endpoint',to:'endpointgroup'},{name:'createlink',from:'*',to:'linkgroup'},{name:'next',from:'linkgroup',to:'link'},{name:'submit',from:'link',to:'submit'},{name:'previous',from:'link',to:'linkgroup'},{name:'createimage',from:'*',to:'imagegroup'},{name:'next',from:'imagegroup',to:'image'},{name:'previous',from:'image',to:'imagegroup'},{name:'createapp',from:'start',to:'appCreate'},{name:'submit',from:'appCreate',to:'submit'},{name:'createworkflow',from:'start',to:'workflowCreate'},{name:'submit',from:'workflowCreate',to:'submit'},{name:'creategroup',from:'start',to:'groupCreate'},{name:'submit',from:'groupCreate',to:'submit'},{name:'createuser',from:'start',to:'userCreate'},{name:'submit',from:'userCreate',to:'submit'},{name:'createappinstance',from:'*',to:'appinstancegroup'},{name:'next',from:'appinstancegroup',to:'app'},{name:'createworkflowinstance',from:'*',to:'workflowinstancegroup'},{name:'next',from:'workflowinstancegroup',to:'workflow'},{name:'next',from:'workflow',to:'workflowinstance'},{name:'next',from:'workflowinstance',to:'workflowinstancecomposite'},{name:'submit',from:'workflowinstancecomposite',to:'submit'},{name:'previous',from:'workflowinstance',to:'workflow'},{name:'previous',from:'workflow',to:'workflowinstancegroup'},{name:'previous',from:'workflowinstancecomposite',to:'workflowinstance'},{name:'next',from:'app',to:'appinstance'},{name:'next',from:'appinstance',to:'appinstancecomposite'},{name:'submit',from:'appinstancecomposite',to:'submit'},{name:'previous',from:'appinstance',to:'app'},{name:'previous',from:'app',to:'appinstancegroup'},{name:'previous',from:'instancecomposite',to:'appinstance'},{name:'cancel',from:'*',to:'start'},{name:'success',from:'*',to:'success'},{name:'error',from:'*',to:'start'},{name:'other',from:'success',to:'start'},],methods:{onStart:function(){mymodal.ref.find('.modal-body').html(startContent)},onAppCreate:function(){options.url='/api/apps';new $g.form({data:instanceData,name:"modal",fields:[{label:'Name',name:'name',required:!0},{label:'Description',name:'description',required:!1,type:'textarea'},{label:'Tags',name:'tags',required:!1},{label:'Lead Developer',name:'user_id',type:'select',choices:'/api/apps/developers',template:'{{attributes.user.first_name}} {{attributes.user.last_name}} - {{attributes.user.email}}',required:!1,value_key:'id',label_key:'email'}],actions:[]},mymodal.el.querySelector('.modal-body'))},onWorkflowCreate:function(){new $g.form({data:instanceData,name:"modal",fields:[{label:'Name',name:'name',required:!0},{label:'Description',name:'description',required:!1,type:'textarea'},{label:'Tags',name:'tags',required:!1},{label:'Lead Developer',name:'user_id',type:'select',choices:'/api/apps/developers',template:'{{attributes.user.first_name}} {{attributes.user.last_name}} - {{attributes.user.email}}',required:!1,value_key:'id',label_key:'email'}],actions:[]},mymodal.el.querySelector('.modal-body'))},onGroupCreate:function(){options.url='/api/groups';options.complete="Successfully Created a Group!<br><br> Here are some next steps you may want to take:"
new $g.form({data:instanceData,name:"modal",fields:[{label:'Name',name:'name',required:!0},{label:'Slug',name:'slug',required:!0}],actions:[]},mymodal.el.querySelector('.modal-body'))},onUserCreate:function(){options.url='/api/users';options.complete="Successfully Created a user!";new $g.form({data:instanceData,name:"modal",fields:[{name:'first_name',label:"First Name"},{name:'last_name',label:"Last Name"},{name:'email',label:"Email",required:!0,type:'email'},{name:'password',label:"Password",type:"password"},{name:'unique_id',label:"Unique ID",required:!0}],actions:[]},mymodal.el.querySelector('.modal-body'))},onPage:function(){options.url='/api/pages';options.complete="Successfully Created a Page!<br><br> Here are some next steps you may want to take:"
new $g.form({data:instanceData,name:"modal",fields:[...fieldLibrary.content],actions:[]},mymodal.el.querySelector('.modal-body'))},onImage:function(){options.url='/api/images';options.complete="Successfully Created an Image!"
new $g.form({data:instanceData,name:"modal",fields:[{type:'upload',label:!1,path:'/api/images?group_id='+instanceData.group_id,name:'image_filename'}],actions:[]},mymodal.el.querySelector('.modal-body'))},onEndpoint:function(){options.url='/api/endpoints';options.complete="Successfully Created an Endpoint!"
new $g.form({data:instanceData,name:"modal",fields:[{label:'Name',name:'name',required:!0},{label:'Auth Type',name:'type',type:'select',options:[{label:'HTTP No Auth',value:'http_no_auth'},{label:'HTTP Basic Auth',value:'http_basic_auth'}],required:!0},{label:'Configuration',type:"fieldset",name:'config',showColumn:!1,fields:[{label:'URL',required:!1,validate:[{type:'is_https',"conditions":[{type:'matches',name:'type',value:'http_basic_auth'}]}],show:[]},{label:'Username',required:!0,show:[{type:'matches',name:'type',value:'http_basic_auth'}]},{label:'Password','name':'secret',required:!0,show:[{type:'matches',name:'type',value:'http_basic_auth'}]},{label:'Content Type','name':'content_type',required:!0,show:[{type:'matches',name:'type',value:'http_basic_auth'}],type:"select",options:[{label:"Form Data (application/x-www-form-urlencoded)",value:'application/x-www-form-urlencoded'},{label:"JSON (application/json)",value:'application/json'},{label:"XML (application/xml)",value:'application/xml'},{label:"Plain Text (text/plain)",value:'text/plain'}],'help':'Please specify the Content Type / Data Encoding your endpoint is expecting for POST / PUT / DELETE actions.  '+'<div><i>Note this only applies to data which is <b>sent to</b> the endpoint, not data which is received from the endpoint.</i></div>'},]}],actions:[]},mymodal.el.querySelector('.modal-body'))},onAppinstance:function(){options.url='/api/appinstances';options.complete="Successfully Created an App Instance!<br><br> Here are some next steps you may want to take:"
$.ajax({url:'/api/apps/'+instanceData.app_id+'/versions',success:function(versions){new $g.form({data:instanceData,name:"modal",fields:[{label:'Version',name:'app_version_id',edit:!1,options:[{id:-1,label:'Latest (Working or Published)'},...(versions.length)?[{id:0,label:'Latest Published'}]:[],...versions],type:'select',format:{value:version=>version.id,label:"{{label}}"},post:'<i class="fa fa-pencil" id="version"></i>'},...fieldLibrary.content,{name:'app_id',required:!0,type:'hidden'},{name:'id',type:'hidden'}],actions:[]},mymodal.el.querySelector('.modal-body'))}})},onWorkflowinstance:function(){options.url='/api/workflowinstances';options.complete="Successfully Created a workflow Instance!<br><br> Here are some next steps you may want to take:"
$.ajax({url:'/api/workflows/'+instanceData.workflow_id+'/versions',success:function(versions){new $g.form({data:instanceData,name:"modal",fields:[{label:'Version',name:'workflow_version_id',edit:!1,options:[{id:-1,label:'Latest (Working or Published)'},...(versions.length)?[{id:0,label:'Latest Published'}]:[],...versions],type:'select',format:{value:version=>version.id,label:"{{label}}"},post:'<i class="fa fa-pencil" id="version"></i>'},...fieldLibrary.content,{name:'workflow_id',required:!0,type:'hidden'},{name:'id',type:'hidden'}],actions:[]},mymodal.el.querySelector('.modal-body'))}})},onPagegroup:selectGroup,onEndpointgroup:selectGroup,onLinkgroup:selectGroup,onImagegroup:selectGroup,onAppinstancegroup:selectGroup,onWorkflowinstancegroup:selectGroup,onApp:function(){new $g.form({data:instanceData,name:"modal",fields:[{label:'App',name:'app_id',type:'select',satisfied:function(value){return(this.toJSON()!=="")},required:!0,options:[{"label":"Choose One","value":""},{type:'optgroup',options:'/api/apps'}]}],actions:[]},mymodal.el.querySelector('.modal-body'))},onWorkflow:function(){new $g.form({data:instanceData,name:"modal",fields:[{label:'Workflow',name:'workflow_id',type:'select',satisfied:function(value){return(this.toJSON()!=="")},required:!0,options:[{"label":"Choose One","value":""},{type:'optgroup',options:'/api/apps'}]}],actions:[]},mymodal.el.querySelector('.modal-body'))},onAppinstancecomposite:selectComposite,onWorkflowinstancecomposite:selectComposite,onPagecomposite:selectComposite,onLink:function(){options.url='/api/links';new $g.form({data:instanceData,name:"modal",fields:[{label:'Title',name:'title',required:!0},{label:'Link',name:'link',required:!0},{label:'Image',name:'image'},fieldLibrary.icon,{label:'Color',name:'color'}],actions:[]},mymodal.el.querySelector('.modal-body'))},onComplete:function(){location.reload()},onAfterTransition:function(e){mymodal.ref.find('.modal-footer').find('[data-action]').each(function(item){item=mymodal.ref.find('.modal-footer').find('[data-action]')[item]
if(this.transitions().indexOf($(item).attr('data-action'))==-1){$(item).hide()}else{$(item).show()}}.bind(this))},onBeforeSubmit:function(e){if(typeof gform.instances.modal!=='undefined'){if(gform.instances.modal.validate()){$.extend(instanceData,gform.instances.modal.toJSON())}else{return!1}}else if(typeof gform.instances.modal!='undefined'){if(!gform.instances.modal.validate()){return!1}else{$.extend(instanceData,gform.instances.modal.toJSON())}}
$.ajax({url:options.url,type:'POST',data:instanceData,success:function(e){toastr.success('','Successfully Added')
fsm.success(this,e)}.bind(e),error:function(e){toastr.error(e.statusText,'ERROR');fsm.error(this,e)}})},onSubmit:function(){reset()},onBeforeError:function(e,history,item){if(typeof item.responseJSON!=='undefined'&&item.responseJSON.error){toastr.error(item.responseJSON.error,'ERROR')}},onAfterSuccess:function(e,history,item){var link="";switch(history.from){case "appCreate":instanceData.app_id=item.id;options.complete="Successfully Created an App!<br><br> Here are some next steps you may want to take<div>"+"<a href='#' style='border-left-color:#31708f' class='list-group-action' data-action='createappinstance'><i class='fa fa-cubes'></i> Instanciate App</a>"+"<a href='/admin/apps/"+item.id+"' class='list-group-action'><i class='fa fa-cube'></i> Edit App</a>"+"<a href='#' class='list-group-action' data-action='other'><i class='fa fa-gear'></i> Other</a></div>"
break;case "workflowCreate":instanceData.workflow_id=item.id;options.complete="Successfully Created aa Workflow!<br><br> Here are some next steps you may want to take<div>"+"<a href='#' style='border-left-color:#31708f' class='list-group-action' data-action='createworkflowinstance'><i class='fa fa-check'></i> Instanciate Workflow</a>"+"<a href='/admin/workflows/"+item.id+"' class='list-group-action'><i class='fa fa-check-o'></i> Edit Workflow</a>"+"<a href='#' class='list-group-action' data-action='other'><i class='fa fa-gear'></i> Other</a></div>"
break;case "groupCreate":instanceData.group_id=item.id;options.complete="Successfully Created an App!<br><br> Here are some next steps you may want to take:<div>"+startContent+"<a href='/admin/groups/"+item.id+"' class='list-group-action'><i class='fa fa-users'></i> Manage Group</a>"+"<a href='#' class='list-group-action' data-action='other'><i class='fa fa-gear'></i> Other</a></div>"
break;case "pagecomposite":link="<br><br> Here are some next steps you may want to take:<div><a href='/page/"+item.group_id+"/"+item.slug+"' class='list-group-action'><i class='fa fa-file'></i> Visit Page</a>";default:instanceData.group_id=item.group_id;options.complete="Created Successfully!"+link+"<div>Create New</div>"
startContent+"<a href='#' class='list-group-action' data-action='other'><i class='fa fa-gear'></i> Other</a></div>"}
mymodal.ref.find('.modal-body').html(options.complete);mymodal.ref.find('.modal-body').find('[data-action]').each(function(item){item=mymodal.ref.find('.modal-body').find('[data-action]')[item]
if(this.transitions().indexOf($(item).attr('data-action'))==-1){$(item).hide()}else{$(item).show()}}.bind(this))},onBeforeNext:function(){if(typeof gform.instances.modal!=='undefined'){if(!gform.instances.modal.validate()){return!1}else{$.extend(instanceData,gform.instances.modal.toJSON())}}else if(typeof gform.instances.modal!='undefined'){if(!gform.instances.modal.validate()){return!1}else{$.extend(instanceData,gform.instances.modal.toJSON())}}
reset()},onBeforePrevious:reset,onBeforeCancel:function(e){if(e.from!==e.to){reset()}},onBeforeOther:reset}};mymodal=modal({title:options.legend,content:'<center><i class="fa fa-spinner fa-spin" style="font-size:60px;margin:20px auto;color:#d8d8d8"></i></center>',footer:'<span class="btn btn-default" data-action="previous"><i class="fa fa-arrow-left"></i> Back</span><span class="btn btn-info" data-action="next"><i class="fa fa-arrow-right"></i> Next</span><span class="btn btn-success" data-action="submit"><i class="fa fa-check"></i> Create</span><span class="btn btn-primary" data-action="complete"><i class="fa fa-check"></i> Done</span>'})
fsm=new StateMachine(options)}
$('#graphene-quick-create').on('click',createEngine)